define(["require","exports"],(function(e,t){"use strict";function r(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}const i="18.1.0",a="esriFieldTypeDouble",s="esriFieldTypeInteger",o="esriFieldTypeSingle",n="esriFieldTypeSmallInteger",l="count",c="sum",u="min",d="max",f="avg",h="var",p="percentile_cont",g="percentile_disc",m="envelope-aggregate",y="no_aggregation",v="esriSLSSolid",b="esriSMSCircle",w="esriSFSSolid",S="center",_="middle",x="esriSLS",P="esriSMS",F="esriSFS",C="chart",E="chartOverlay",k="chartOverlays",I="chartAxis",O="number",j="scatterSeries",A="pieSeries",T="gaugeSeries",L="lineSeries",D="barSeries",$="histogramSeries",U="boxPlotSeries",B="radarSeries",M="comboLineAndBarSeries",R="none",N="ASC",z="DESC",V="hide",q="same",G="newer",Q="older",H="unrecognized",K="arcgis-charts-y-value",W="arcgis-charts-mean",X="arcgis-charts-median",Y="arcgis-charts-category",J="arcgis_charts_pie_from_fields_name",Z="axisLabels",ee="guideLabel",te="axisTitle",re="chartTitle",ie="dataLabels",ae="legendTitle",se="legendText",oe="descriptionText",ne={Arabic:"ar",ArabicLatin:"ar-u-nu-latn",Bosnian:"bs",Bulgarian:"bg",Catalan:"ca",Czech:"cs",Danish:"da",German:"de",Greek:"el",English:"en",EnglishUSA:"en-US",Spanish:"es",Estonian:"et",Finnish:"fi",French:"fr",Hebrew:"he",Croatian:"hr",Hungarian:"hu",Indonesian:"id",Italian:"it",Japanese:"ja",Korean:"ko",Lithuanian:"lt",Latvian:"lv",NorwegianBokml:"no",Dutch:"nl",Polish:"pl",PortugueseBrazil:"pt-BR",PortuguesePortugal:"pt-PT",Romanian:"ro",Russian:"ru",Serbian:"sr",Slovenian:"sl",Slovak:"sk",Swedish:"sv",Thai:"th",Turkish:"tr",Ukrainian:"uk",Vietnamese:"vi",ChineseChina:"zh-CN",ChineseHongKong:"zh-HK",ChineseTaiwan:"zh-TW"},le=[...Object.values(ne),"en-AU","en-GB","es-ES","es-MX","de-CH","de-DE","de-AT","it-CH","it-IT"];var ce="object"==typeof global&&global&&global.Object===Object&&global,ue="object"==typeof self&&self&&self.Object===Object&&self,de=ce||ue||Function("return this")(),fe=de.Symbol,he=Object.prototype,pe=he.hasOwnProperty,ge=he.toString,me=fe?fe.toStringTag:void 0,ye=Object.prototype.toString,ve=fe?fe.toStringTag:void 0;function be(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ve&&ve in Object(e)?function(e){var t=pe.call(e,me),r=e[me];try{e[me]=void 0;var i=!0}catch(e){}var a=ge.call(e);return i&&(t?e[me]=r:delete e[me]),a}(e):function(e){return ye.call(e)}(e)}function we(e){return null!=e&&"object"==typeof e}function Se(e,t){for(var r=-1,i=null==e?0:e.length,a=Array(i);++r<i;)a[r]=t(e[r],r,e);return a}var _e=Array.isArray,xe=fe?fe.prototype:void 0,Pe=xe?xe.toString:void 0;function Fe(e){if("string"==typeof e)return e;if(_e(e))return Se(e,Fe)+"";if(function(e){return"symbol"==typeof e||we(e)&&"[object Symbol]"==be(e)}(e))return Pe?Pe.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ce(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ee(e){return e}function ke(e){if(!Ce(e))return!1;var t=be(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var Ie,Oe=de["__core-js_shared__"],je=(Ie=/[^.]+$/.exec(Oe&&Oe.keys&&Oe.keys.IE_PROTO||""))?"Symbol(src)_1."+Ie:"",Ae=Function.prototype.toString;function Te(e){if(null!=e){try{return Ae.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var Le=/^\[object .+?Constructor\]$/,De=Function.prototype,$e=Object.prototype,Ue=De.toString,Be=$e.hasOwnProperty,Me=RegExp("^"+Ue.call(Be).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Re(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Ce(e)||(t=e,je&&je in t))&&(ke(e)?Me:Le).test(Te(e));var t}(r)?r:void 0}var Ne=Re(de,"WeakMap"),ze=Object.create,Ve=function(){function e(){}return function(t){if(!Ce(t))return{};if(ze)return ze(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),qe=Ve;function Ge(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Qe,He,Ke,We=Date.now,Xe=function(){try{var e=Re(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Ye=Xe,Je=Ye?function(e,t){return Ye(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:Ee,Ze=(Qe=Je,He=0,Ke=0,function(){var e=We(),t=16-(e-Ke);if(Ke=e,t>0){if(++He>=800)return arguments[0]}else He=0;return Qe.apply(void 0,arguments)}),et=/^(?:0|[1-9]\d*)$/;function tt(e,t){var r=typeof e;return!!(t=t??9007199254740991)&&("number"==r||"symbol"!=r&&et.test(e))&&e>-1&&e%1==0&&e<t}function rt(e,t,r){"__proto__"==t&&Ye?Ye(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function it(e,t){return e===t||e!=e&&t!=t}var at=Object.prototype.hasOwnProperty;function st(e,t,r){var i=e[t];at.call(e,t)&&it(i,r)&&(void 0!==r||t in e)||rt(e,t,r)}function ot(e,t,r,i){var a=!r;r||(r={});for(var s=-1,o=t.length;++s<o;){var n=t[s],l=i?i(r[n],e[n],n,r,e):void 0;void 0===l&&(l=e[n]),a?rt(r,n,l):st(r,n,l)}return r}var nt=Math.max;function lt(e,t){return Ze(function(e,t,r){return t=nt(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,s=nt(i.length-t,0),o=Array(s);++a<s;)o[a]=i[t+a];a=-1;for(var n=Array(t+1);++a<t;)n[a]=i[a];return n[t]=r(o),Ge(e,this,n)}}(e,t,Ee),e+"")}function ct(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function ut(e){return null!=e&&ct(e.length)&&!ke(e)}function dt(e,t,r){if(!Ce(r))return!1;var i=typeof t;return!!("number"==i?ut(r)&&tt(t,r.length):"string"==i&&t in r)&&it(r[t],e)}var ft=Object.prototype;function ht(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ft)}function pt(e){return we(e)&&"[object Arguments]"==be(e)}var gt=Object.prototype,mt=gt.hasOwnProperty,yt=gt.propertyIsEnumerable,vt=pt(function(){return arguments}())?pt:function(e){return we(e)&&mt.call(e,"callee")&&!yt.call(e,"callee")},bt="object"==typeof t&&t&&!t.nodeType&&t,wt=bt&&"object"==typeof module&&module&&!module.nodeType&&module,St=wt&&wt.exports===bt?de.Buffer:void 0,_t=(St?St.isBuffer:void 0)||function(){return!1},xt={};function Pt(e){return function(t){return e(t)}}xt["[object Float32Array]"]=xt["[object Float64Array]"]=xt["[object Int8Array]"]=xt["[object Int16Array]"]=xt["[object Int32Array]"]=xt["[object Uint8Array]"]=xt["[object Uint8ClampedArray]"]=xt["[object Uint16Array]"]=xt["[object Uint32Array]"]=!0,xt["[object Arguments]"]=xt["[object Array]"]=xt["[object ArrayBuffer]"]=xt["[object Boolean]"]=xt["[object DataView]"]=xt["[object Date]"]=xt["[object Error]"]=xt["[object Function]"]=xt["[object Map]"]=xt["[object Number]"]=xt["[object Object]"]=xt["[object RegExp]"]=xt["[object Set]"]=xt["[object String]"]=xt["[object WeakMap]"]=!1;var Ft="object"==typeof t&&t&&!t.nodeType&&t,Ct=Ft&&"object"==typeof module&&module&&!module.nodeType&&module,Et=Ct&&Ct.exports===Ft&&ce.process,kt=function(){try{return Ct&&Ct.require&&Ct.require("util").types||Et&&Et.binding&&Et.binding("util")}catch(e){}}(),It=kt&&kt.isTypedArray,Ot=It?Pt(It):function(e){return we(e)&&ct(e.length)&&!!xt[be(e)]},jt=Object.prototype.hasOwnProperty;function At(e,t){var r=_e(e),i=!r&&vt(e),a=!r&&!i&&_t(e),s=!r&&!i&&!a&&Ot(e),o=r||i||a||s,n=o?function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}(e.length,String):[],l=n.length;for(var c in e)!t&&!jt.call(e,c)||o&&("length"==c||a&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||tt(c,l))||n.push(c);return n}function Tt(e,t){return function(r){return e(t(r))}}var Lt=Tt(Object.keys,Object),Dt=Object.prototype.hasOwnProperty;function $t(e){if(!ht(e))return Lt(e);var t=[];for(var r in Object(e))Dt.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Ut(e){return ut(e)?At(e):$t(e)}var Bt=Object.prototype.hasOwnProperty;function Mt(e){return ut(e)?At(e,!0):function(e){if(!Ce(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=ht(e),r=[];for(var i in e)("constructor"!=i||!t&&Bt.call(e,i))&&r.push(i);return r}(e)}var Rt,Nt=(Rt=function(e,t,r,i){ot(t,Mt(t),e,i)},lt((function(e,t){var r=-1,i=t.length,a=i>1?t[i-1]:void 0,s=i>2?t[2]:void 0;for(a=Rt.length>3&&"function"==typeof a?(i--,a):void 0,s&&dt(t[0],t[1],s)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var o=t[r];o&&Rt(e,o,0,a)}return e}))),zt=Nt,Vt=Re(Object,"create"),qt=Object.prototype.hasOwnProperty,Gt=Object.prototype.hasOwnProperty;function Qt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function Ht(e,t){for(var r=e.length;r--;)if(it(e[r][0],t))return r;return-1}Qt.prototype.clear=function(){this.__data__=Vt?Vt(null):{},this.size=0},Qt.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Qt.prototype.get=function(e){var t=this.__data__;if(Vt){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return qt.call(t,e)?t[e]:void 0},Qt.prototype.has=function(e){var t=this.__data__;return Vt?void 0!==t[e]:Gt.call(t,e)},Qt.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Vt&&void 0===t?"__lodash_hash_undefined__":t,this};var Kt=Array.prototype.splice;function Wt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Wt.prototype.clear=function(){this.__data__=[],this.size=0},Wt.prototype.delete=function(e){var t=this.__data__,r=Ht(t,e);return!(r<0||(r==t.length-1?t.pop():Kt.call(t,r,1),--this.size,0))},Wt.prototype.get=function(e){var t=this.__data__,r=Ht(t,e);return r<0?void 0:t[r][1]},Wt.prototype.has=function(e){return Ht(this.__data__,e)>-1},Wt.prototype.set=function(e,t){var r=this.__data__,i=Ht(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this};var Xt=Re(de,"Map");function Yt(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function Jt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function Zt(e){return null==e?"":Fe(e)}function er(e,t){for(var r=-1,i=t.length,a=e.length;++r<i;)e[a+r]=t[r];return e}Jt.prototype.clear=function(){this.size=0,this.__data__={hash:new Qt,map:new(Xt||Wt),string:new Qt}},Jt.prototype.delete=function(e){var t=Yt(this,e).delete(e);return this.size-=t?1:0,t},Jt.prototype.get=function(e){return Yt(this,e).get(e)},Jt.prototype.has=function(e){return Yt(this,e).has(e)},Jt.prototype.set=function(e,t){var r=Yt(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this};var tr=Tt(Object.getPrototypeOf,Object),rr=Function.prototype,ir=Object.prototype,ar=rr.toString,sr=ir.hasOwnProperty,or=ar.call(Object);function nr(e){if(!we(e))return!1;var t=be(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!function(e){if(!we(e)||"[object Object]"!=be(e))return!1;var t=tr(e);if(null===t)return!0;var r=sr.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&ar.call(r)==or}(e)}var lr=lt((function(e,t){try{return Ge(e,void 0,t)}catch(e){return nr(e)?e:new Error(e)}})),cr=lr;function ur(e){var t=this.__data__=new Wt(e);this.size=t.size}ur.prototype.clear=function(){this.__data__=new Wt,this.size=0},ur.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},ur.prototype.get=function(e){return this.__data__.get(e)},ur.prototype.has=function(e){return this.__data__.has(e)},ur.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Wt){var i=r.__data__;if(!Xt||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new Jt(i)}return r.set(e,t),this.size=r.size,this};var dr="object"==typeof t&&t&&!t.nodeType&&t,fr=dr&&"object"==typeof module&&module&&!module.nodeType&&module,hr=fr&&fr.exports===dr?de.Buffer:void 0,pr=hr?hr.allocUnsafe:void 0;function gr(){return[]}var mr=Object.prototype.propertyIsEnumerable,yr=Object.getOwnPropertySymbols,vr=yr?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,i=null==e?0:e.length,a=0,s=[];++r<i;){var o=e[r];t(o)&&(s[a++]=o)}return s}(yr(e),(function(t){return mr.call(e,t)})))}:gr,br=vr,wr=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)er(t,br(e)),e=tr(e);return t}:gr,Sr=wr;function _r(e,t,r){var i=t(e);return _e(e)?i:er(i,r(e))}function xr(e){return _r(e,Ut,br)}function Pr(e){return _r(e,Mt,Sr)}var Fr=Re(de,"DataView"),Cr=Re(de,"Promise"),Er=Re(de,"Set"),kr="[object Map]",Ir="[object Promise]",Or="[object Set]",jr="[object WeakMap]",Ar="[object DataView]",Tr=Te(Fr),Lr=Te(Xt),Dr=Te(Cr),$r=Te(Er),Ur=Te(Ne),Br=be;(Fr&&Br(new Fr(new ArrayBuffer(1)))!=Ar||Xt&&Br(new Xt)!=kr||Cr&&Br(Cr.resolve())!=Ir||Er&&Br(new Er)!=Or||Ne&&Br(new Ne)!=jr)&&(Br=function(e){var t=be(e),r="[object Object]"==t?e.constructor:void 0,i=r?Te(r):"";if(i)switch(i){case Tr:return Ar;case Lr:return kr;case Dr:return Ir;case $r:return Or;case Ur:return jr}return t});var Mr=Br,Rr=Object.prototype.hasOwnProperty,Nr=de.Uint8Array;function zr(e){var t=new e.constructor(e.byteLength);return new Nr(t).set(new Nr(e)),t}var Vr=/\w*$/,qr=fe?fe.prototype:void 0,Gr=qr?qr.valueOf:void 0;var Qr=kt&&kt.isMap,Hr=Qr?Pt(Qr):function(e){return we(e)&&"[object Map]"==Mr(e)},Kr=kt&&kt.isSet,Wr=Kr?Pt(Kr):function(e){return we(e)&&"[object Set]"==Mr(e)},Xr="[object Arguments]",Yr="[object Function]",Jr="[object Object]",Zr={};function ei(e,t,r,i,a,s){var o,n=1&t,l=2&t,c=4&t;if(r&&(o=a?r(e,i,a,s):r(e)),void 0!==o)return o;if(!Ce(e))return e;var u=_e(e);if(u){if(o=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Rr.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!n)return function(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}(e,o)}else{var d=Mr(e),f=d==Yr||"[object GeneratorFunction]"==d;if(_t(e))return function(e,t){if(t)return e.slice();var r=e.length,i=pr?pr(r):new e.constructor(r);return e.copy(i),i}(e,n);if(d==Jr||d==Xr||f&&!a){if(o=l||f?{}:function(e){return"function"!=typeof e.constructor||ht(e)?{}:qe(tr(e))}(e),!n)return l?function(e,t){return ot(e,Sr(e),t)}(e,function(e,t){return e&&ot(t,Mt(t),e)}(o,e)):function(e,t){return ot(e,br(e),t)}(e,function(e,t){return e&&ot(t,Ut(t),e)}(o,e))}else{if(!Zr[d])return a?e:{};o=function(e,t,r){var i,a,s,o=e.constructor;switch(t){case"[object ArrayBuffer]":return zr(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return function(e,t){var r=t?zr(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var r=t?zr(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,r);case"[object Map]":case"[object Set]":return new o;case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return(s=new(a=e).constructor(a.source,Vr.exec(a))).lastIndex=a.lastIndex,s;case"[object Symbol]":return i=e,Gr?Object(Gr.call(i)):{}}}(e,d,n)}}s||(s=new ur);var h=s.get(e);if(h)return h;s.set(e,o),Wr(e)?e.forEach((function(i){o.add(ei(i,t,r,i,e,s))})):Hr(e)&&e.forEach((function(i,a){o.set(a,ei(i,t,r,a,e,s))}));var p=u?void 0:(c?l?Pr:xr:l?Mt:Ut)(e);return function(e,t){for(var r=-1,i=null==e?0:e.length;++r<i&&!1!==t(e[r],r););}(p||e,(function(i,a){p&&(i=e[a=i]),st(o,a,ei(i,t,r,a,e,s))})),o}function ti(e){return ei(e,5)}Zr[Xr]=Zr["[object Array]"]=Zr["[object ArrayBuffer]"]=Zr["[object DataView]"]=Zr["[object Boolean]"]=Zr["[object Date]"]=Zr["[object Float32Array]"]=Zr["[object Float64Array]"]=Zr["[object Int8Array]"]=Zr["[object Int16Array]"]=Zr["[object Int32Array]"]=Zr["[object Map]"]=Zr["[object Number]"]=Zr[Jr]=Zr["[object RegExp]"]=Zr["[object Set]"]=Zr["[object String]"]=Zr["[object Symbol]"]=Zr["[object Uint8Array]"]=Zr["[object Uint8ClampedArray]"]=Zr["[object Uint16Array]"]=Zr["[object Uint32Array]"]=!0,Zr["[object Error]"]=Zr[Yr]=Zr["[object WeakMap]"]=!1;var ri=fe?fe.prototype:void 0;ri&&ri.valueOf;var ii,ai=(ii={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},function(e){return null==ii?void 0:ii[e]}),si=/[&<>"']/g,oi=RegExp(si.source),ni=Object.prototype.hasOwnProperty;function li(e){if(null==e)return!0;if(ut(e)&&(_e(e)||"string"==typeof e||"function"==typeof e.splice||_t(e)||Ot(e)||vt(e)))return!e.length;var t=Mr(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(ht(e))return!$t(e).length;for(var r in e)if(ni.call(e,r))return!1;return!0}var ci=Object.prototype,ui=ci.hasOwnProperty;function di(e,t,r,i){return void 0===e||it(e,ci[r])&&!ui.call(i,r)?t:e}var fi={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function hi(e){return"\\"+fi[e]}var pi=/<%=([\s\S]+?)%>/g,gi={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:pi,variable:"",imports:{_:{escape:function(e){return(e=Zt(e))&&oi.test(e)?e.replace(si,ai):e}}}},mi=/\b__p \+= '';/g,yi=/\b(__p \+=) '' \+/g,vi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bi=/[()=,{}\[\]\/\s]/,wi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Si=/($^)/,_i=/['\n\r\u2028\u2029\\]/g,xi=Object.prototype.hasOwnProperty;function Pi(e,t){return function(e,t,r){var i=gi.imports._.templateSettings||gi;r&&dt(e,t,r)&&(t=void 0),e=Zt(e),t=zt({},t,i,di);var a,s,o=zt({},t.imports,i.imports,di),n=Ut(o),l=function(e,t){return Se(t,(function(t){return e[t]}))}(o,n),c=0,u=t.interpolate||Si,d="__p += '",f=RegExp((t.escape||Si).source+"|"+u.source+"|"+(u===pi?wi:Si).source+"|"+(t.evaluate||Si).source+"|$","g"),h=xi.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(f,(function(t,r,i,o,n,l){return i||(i=o),d+=e.slice(c,l).replace(_i,hi),r&&(a=!0,d+="' +\n__e("+r+") +\n'"),n&&(s=!0,d+="';\n"+n+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=l+t.length,t})),d+="';\n";var p=xi.call(t,"variable")&&t.variable;if(p){if(bi.test(p))throw new Error("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(s?d.replace(mi,""):d).replace(yi,"$1").replace(vi,"$1;"),d="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=cr((function(){return Function(n,h+"return "+d).apply(void 0,l)}));if(g.source=d,nr(g))throw g;return g}(e)(t)}function Fi(e,t){let r=ne.English;const i=function(e){let t=e;if(void 0!==e&&e.includes("-")){const[r,i]=e.split("-");t=`${r}-${i.toUpperCase()}`}return t}(e);if(void 0!==i)if(t.includes(i))r=i;else{const e=function(e){const t=e?.match(/^([a-z]{2})-([A-Z]{2})$/u);let r=ne.English;return null!=t&&t?.length>1?r=t[1]:2===e?.length&&e.toLowerCase()===e&&(r=e),r}(i);t.includes(e)?r=e:"nb"===e&&(r="no")}return r}function Ci(e,t){return function t(r){let i;return i=void 0===r||r===document||r===window?null:r.closest(e)||t(r.getRootNode().host),i}(t)}function Ei(e=document.documentElement){const t=Ci("[lang]",e),r=t?.lang??window.navigator.language,i=Object.values(ne),a=Object.values(le),s=Fi(r,i);let o=Fi(r,a);return o="ar"===o?"ar-u-nu-latn":o,{locale:s,rtl:"rtl"===Ci("[dir]",e)?.getAttribute("dir"),formatLocale:o}}async function ki(t=Ei().locale){let r=await new Promise((function(t,r){e(["./messages.en-0fffc776-03ae3b5b"],t,r)}));switch(t){case ne.Arabic:r=await new Promise((function(t,r){e(["./messages.ar-01382838-b9c09396"],t,r)}));break;case ne.Bosnian:r=await new Promise((function(t,r){e(["./messages.bs-26dfc274-77908982"],t,r)}));break;case ne.Bulgarian:r=await new Promise((function(t,r){e(["./messages.bg-32cb6752-f6918041"],t,r)}));break;case ne.Catalan:r=await new Promise((function(t,r){e(["./messages.ca-21b03272-b8ee4695"],t,r)}));break;case ne.Czech:r=await new Promise((function(t,r){e(["./messages.cs-71896a8d-06ae6c25"],t,r)}));break;case ne.Danish:r=await new Promise((function(t,r){e(["./messages.da-90739473-af2e5135"],t,r)}));break;case ne.German:r=await new Promise((function(t,r){e(["./messages.de-e2ce6e5c-a2b58d32"],t,r)}));break;case ne.Greek:r=await new Promise((function(t,r){e(["./messages.el-5582e711-0e989f04"],t,r)}));break;case ne.EnglishUSA:r=await new Promise((function(t,r){e(["./messages.en-US-63042069-20d00d10"],t,r)}));break;case ne.Spanish:r=await new Promise((function(t,r){e(["./messages.es-907baf0a-1d47130e"],t,r)}));break;case ne.Estonian:r=await new Promise((function(t,r){e(["./messages.et-79ae70c6-f3db8b9b"],t,r)}));break;case ne.Finnish:r=await new Promise((function(t,r){e(["./messages.fi-cc657f3a-50bf5b97"],t,r)}));break;case ne.French:r=await new Promise((function(t,r){e(["./messages.fr-fb0dd043-6dd3e8e7"],t,r)}));break;case ne.Hebrew:r=await new Promise((function(t,r){e(["./messages.he-ca24a7af-1c955769"],t,r)}));break;case ne.Croatian:r=await new Promise((function(t,r){e(["./messages.hr-a0968519-3420bf69"],t,r)}));break;case ne.Hungarian:r=await new Promise((function(t,r){e(["./messages.hu-f801472e-cc231efc"],t,r)}));break;case ne.Indonesian:r=await new Promise((function(t,r){e(["./messages.id-e0a138dd-0f6039fe"],t,r)}));break;case ne.Italian:r=await new Promise((function(t,r){e(["./messages.it-f3a3c18c-c641a42f"],t,r)}));break;case ne.Japanese:r=await new Promise((function(t,r){e(["./messages.ja-0a345b79-4dac106c"],t,r)}));break;case ne.Korean:r=await new Promise((function(t,r){e(["./messages.ko-2c82d42a-56809a1a"],t,r)}));break;case ne.Lithuanian:r=await new Promise((function(t,r){e(["./messages.lt-437315dc-82d714cb"],t,r)}));break;case ne.Latvian:r=await new Promise((function(t,r){e(["./messages.lv-57b9e23e-1c549f97"],t,r)}));break;case ne.NorwegianBokml:r=await new Promise((function(t,r){e(["./messages.no-950d514a-3da49aab"],t,r)}));break;case ne.Dutch:r=await new Promise((function(t,r){e(["./messages.nl-bf7731db-6ff7f54a"],t,r)}));break;case ne.Polish:r=await new Promise((function(t,r){e(["./messages.pl-1ed04c02-4bcc2d85"],t,r)}));break;case ne.PortugueseBrazil:r=await new Promise((function(t,r){e(["./messages.pt-BR-d65a99a9-72ada2b3"],t,r)}));break;case ne.PortuguesePortugal:r=await new Promise((function(t,r){e(["./messages.pt-PT-e9eb0f86-1b0ad8bb"],t,r)}));break;case ne.Romanian:r=await new Promise((function(t,r){e(["./messages.ro-0cc0459a-98d1a361"],t,r)}));break;case ne.Russian:r=await new Promise((function(t,r){e(["./messages.ru-d76e79cf-4524e3ce"],t,r)}));break;case ne.Serbian:r=await new Promise((function(t,r){e(["./messages.sr-b8d5fefe-4f359d65"],t,r)}));break;case ne.Slovak:r=await new Promise((function(t,r){e(["./messages.sk-7e8fa059-f21ef130"],t,r)}));break;case ne.Slovenian:r=await new Promise((function(t,r){e(["./messages.sl-fc1a9dc6-68b1b26c"],t,r)}));break;case ne.Swedish:r=await new Promise((function(t,r){e(["./messages.sv-18b29f8a-fc5a9483"],t,r)}));break;case ne.Thai:r=await new Promise((function(t,r){e(["./messages.th-c923afca-3e4d9356"],t,r)}));break;case ne.Turkish:r=await new Promise((function(t,r){e(["./messages.tr-7495cb63-47403a96"],t,r)}));break;case ne.Ukrainian:r=await new Promise((function(t,r){e(["./messages.uk-4083ab16-1d4090cd"],t,r)}));break;case ne.Vietnamese:r=await new Promise((function(t,r){e(["./messages.vi-087f5bf7-cb27467a"],t,r)}));break;case ne.ChineseChina:r=await new Promise((function(t,r){e(["./messages.zh-CN-ac74cfc3-30a4fb8d"],t,r)}));break;case ne.ChineseHongKong:r=await new Promise((function(t,r){e(["./messages.zh-HK-f7b7d981-2dc447bb"],t,r)}));break;case ne.ChineseTaiwan:r=await new Promise((function(t,r){e(["./messages.zh-TW-34ee3824-92e3e5ee"],t,r)}))}return r}const Ii=5,Oi=4,ji=2e3,Ai=.7,Ti=[156,156,156,255],Li=[156,156,156,255],Di=v,$i="arcgis_charts_group_of_slices",Ui="arcgis_charts_box_plot_category",Bi=[[31,120,180,255],[166,206,227,255],[51,160,44,255],[178,223,138,255],[227,26,28,255],[251,154,153,255],[255,127,0,255],[253,191,111,255],[106,61,154,255],[202,178,214,255]],Mi=[[104,104,104,255],[51,124,235,255],[132,0,168,255],[156,156,156,255]];function Ri(e){const{colorIndex:t,opacity:r,histogramOverlays:i}=e,a=Math.max(0,t??0),s=[...!0===i?Mi:Bi],[o,n,l,c]=s[a%s.length];return[o,n,l,void 0!==r?255*r:c]}function Ni(e){return[0,0,0,255*(e??Ai)]}function zi(e=1){return[Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random()),255*e]}function Vi(e){const t={family:"Arial, Helvetica, sans-serif",size:10};switch(e){case re:t.size=18;break;case te:t.size=14;break;case se:t.size=12;break;case ae:t.size=13;break;case oe:t.size=11}return t}function qi(e="",t=Vi(),r){let i=S;return r!==ie&&r!==ee||(i=void 0),{type:"esriTS",color:Ni(),text:e,font:t,horizontalAlignment:i}}function Gi(e){const{text:t,visible:r,font:i,type:a}=e??{text:"",visible:!0,font:Vi()};return{type:"chartText",visible:r,content:qi(t,i,a)}}function Qi(e){const t=e?.useRandomColor??!1,r=e?.useRampColor,i=e?.width??1,a=e?.isHistogramOverlay;let s=e?.color??Ni(1);return t?s=zi():void 0!==r&&(s=Ri(!0===a?{colorIndex:r.colorIndex,histogramOverlays:a}:{colorIndex:r.colorIndex})),void 0!==e?.opacity&&(s[3]=e.opacity),{type:x,style:v,color:s,width:i}}function Hi(){return{type:O,intlOptions:{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:3,useGrouping:!0}}}function Ki(e="Category Axis"){const t=Gi({text:e,visible:!0,font:Vi(te)});t.content.horizontalAlignment=S,t.content.verticalAlignment=_;const r=Gi({text:e,visible:!0,font:Vi(Z)});return{type:I,visible:!0,title:t,labels:r,valueFormat:{type:"category",characterLimit:11},lineSymbol:Qi({color:Ti})}}function Wi(e="Value Axis"){const t=Gi({text:e,visible:!0,font:Vi(te)}),r=Gi({text:e,visible:!0,font:Vi(Z)});return t.content.verticalAlignment=_,t.content.horizontalAlignment=S,{type:I,visible:!0,title:t,labels:r,valueFormat:Hi(),lineSymbol:Qi({color:Ti})}}function Xi(){return{type:"chartLegend",visible:!0,title:Gi({text:"",visible:!0,font:Vi(ae)}),body:qi("",Vi(se)),position:"right",maxHeight:Number.NaN}}function Yi(e){return{type:E,visible:!0,created:!1,symbol:Qi({useRampColor:{colorIndex:e},isHistogramOverlay:!0})}}async function Ji(){return(await ki()).defaultTitle}function Zi(){return`Chart ${Date.now()}`}function ea(e,t=!1){return{type:F,style:w,color:t?zi(Ai):Ri({colorIndex:e??0,opacity:Ai})}}function ta(e=0){return{type:P,style:b,color:Ri({colorIndex:e,opacity:Ai}),size:4}}function ra(e){return{type:x,style:v,color:Ri({colorIndex:e,opacity:Ai}),width:2}}function ia(e=!1){return{type:P,style:b,color:e?zi(Ai):Ri({colorIndex:0,opacity:Ai}),size:7}}function aa(e=!1){return{type:k,trendLine:{type:E,created:!1,visible:!0,symbol:{type:x,style:v,color:e?zi():Ri({colorIndex:1}),width:2}}}}async function sa(e){const t=await ki(),r=[],i=t.xAxis;let a;const s=Wi(t.statistics.count),o=Qi({opacity:25});switch(s.grid=o,e){case D:a=Ki(i);break;case j:a=Wi(i),a.grid=o;break;case L:case $:a=Wi(i);break;case U:a=Ki("")}return void 0!==a&&r.push(a,s),r}function oa(){return{type:"gaugeNeedle",symbol:{type:F,color:[0,0,0,200]}}}async function na(){const e=[],t=Wi((await ki()).xAxis);return t.needle=oa(),e.push(t),e}async function la(e){const t=e.objectIDField??"ObjectID",r=`${l}_${t}_0`.toUpperCase(),i=(await ki()).countSeries;return{type:L,id:i,name:i,query:{outStatistics:[{statisticType:l,onStatisticField:t,outStatisticFieldName:r}],groupByFieldsForStatistics:[]},x:"",y:r,lineSymbol:ra(e.seriesIndex),markerSymbol:ta(e.seriesIndex),dataLabels:Gi({text:"",visible:!1,font:Vi(ie)}),timeIntervalSize:0,timeIntervalUnits:"esriTimeUnitsDays",timeAggregationType:"equalIntervalsFromStartTime",trimIncompleteTimeInterval:!0,nullPolicy:"interpolate"}}function ca(e){return{type:F,style:w,color:Ri({colorIndex:e,opacity:Ai})}}async function ua(e){const t=e.objectIDField??"ObjectID",r=`${l}_${t}_0`.toUpperCase(),i=(await ki()).countSeries;return{type:D,id:i,name:i,query:{outStatistics:[{statisticType:l,onStatisticField:t,outStatisticFieldName:r}],groupByFieldsForStatistics:[]},x:"",y:r,fillSymbol:ca(e.seriesIndex),dataLabels:Gi({text:"",visible:!1,font:Vi(ie),type:ie})}}async function da(e){const t=(await ki()).countSeries;return{name:t,type:U,id:t,fillSymbol:{type:F,style:w,color:Ri({colorIndex:e,opacity:Ai})},query:{},x:Ui,y:""}}function fa(){return{type:"pieTick",visible:!0,lineSymbol:Qi({width:1,color:Li})}}async function ha(e){const t=`${l}_${e}_0`.toUpperCase(),r=(await ki()).countSeries;return{type:A,id:r,name:r,query:{outStatistics:[{statisticType:l,onStatisticField:e??"ObjectID",outStatisticFieldName:t}],groupByFieldsForStatistics:[]},x:"",y:t,fillSymbol:{type:F,style:w},dataLabels:Gi({text:"",visible:!1,font:Vi(ie),type:ie}),startAngle:-90,endAngle:270,dataLabelsCharacterLimit:11,displayNumericValueOnDataLabel:!1,displayPercentageOnDataLabel:!0,numericValueFormat:{...Hi(),intlOptions:{minimumFractionDigits:1,maximumFractionDigits:1}},percentValueFormat:{...Hi(),intlOptions:{minimumFractionDigits:1,maximumFractionDigits:1}},ticks:fa()}}function pa(e){const t=e.objectIDField??"ObjectID",r=`${l}_${t}_0`.toUpperCase(),i="Series0";return{type:T,id:i,name:i,query:{outStatistics:[{statisticType:l,onStatisticField:t,outStatisticFieldName:r}]},x:""}}async function ga(e=Zi()){return{version:i,type:C,id:e,colorMatch:!0,rotated:!1,orderOptions:{data:{orderType:Y,orderBy:N}},title:Gi({text:await Ji(),visible:!0,font:Vi(re)}),subTitle:Gi(),footer:Gi({text:"",visible:!0,font:Vi(oe)}),background:[255,255,255,255],axes:await sa(D),series:[],legend:Xi()}}function ma(){return{type:k,mean:Yi(1),median:Yi(2),standardDeviation:Yi(3),comparisonDistribution:Yi(4)}}function ya(){return{type:$,id:$,name:$,visible:!0,dataTooltipVisible:!0,dataTooltipReverseColor:!1,assignToSecondValueAxis:!1,x:"",binCount:32,overlays:ma(),dataTransformationType:R,fillSymbol:{type:F,style:w,color:Ri({colorIndex:0,opacity:Ai})},dataLabels:Gi({text:"",visible:!1,font:Vi(ie)})}}async function va(e){const t=await ki();let r;switch(e){case f:r=t.statistics.mean;break;case p:r=t.statistics.median;break;case c:r=t.statistics.sum;break;case u:r=t.statistics.minimum;break;case d:r=t.statistics.maximum;break;case h:r=t.statistics.variance;break;case g:r=t.statistics.discretePercentile;break;case y:r=t.statistics.noAggregation;break;default:r=t.statistics.count}return r}const ba=[210,210,210,178.5];var wa={exports:{}},Sa={},_a={exports:{}},xa={};function Pa(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}var Fa=/javascript\s*\:/gim;xa.whiteList={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},xa.getDefaultWhiteList=Pa,xa.onAttr=function(e,t,r){},xa.onIgnoreAttr=function(e,t,r){},xa.safeAttrValue=function(e,t){return Fa.test(t)?"":t};var Ca=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},Ea=function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")},ka=xa,Ia=function(e,t){";"!==(e=Ea(e))[e.length-1]&&(e+=";");var r=e.length,i=!1,a=0,s=0,o="";function n(){if(!i){var r=Ca(e.slice(a,s)),n=r.indexOf(":");if(-1!==n){var l=Ca(r.slice(0,n)),c=Ca(r.slice(n+1));if(l){var u=t(a,o.length,l,c,r);u&&(o+=u+"; ")}}}a=s+1}for(;s<r;s++){var l=e[s];if("/"===l&&"*"===e[s+1]){var c=e.indexOf("*/",s+2);if(-1===c)break;a=(s=c+1)+1,i=!1}else"("===l?i=!0:")"===l?i=!1:";"===l?i||n():"\n"===l&&n()}return Ca(o)};function Oa(e){return null==e}function ja(e){(e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{})).whiteList=e.whiteList||ka.whiteList,e.onAttr=e.onAttr||ka.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||ka.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||ka.safeAttrValue,this.options=e}ja.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,i=t.onAttr,a=t.onIgnoreAttr,s=t.safeAttrValue;return Ia(e,(function(e,t,o,n,l){var c=r[o],u=!1;if(!0===c?u=c:"function"==typeof c?u=c(n):c instanceof RegExp&&(u=c.test(n)),!0!==u&&(u=!1),n=s(o,n)){var d,f={position:t,sourcePosition:e,source:l,isWhite:u};return u?Oa(d=i(o,n,f))?o+":"+n:d:Oa(d=a(o,n,f))?void 0:d}}))};var Aa=ja;!function(e,t){var r=xa,i=Aa;for(var a in(t=e.exports=function(e,t){return new i(t).process(e)}).FilterCSS=i,r)t[a]=r[a]}(_a,_a.exports);var Ta=_a.exports,La={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,a;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,a=e.length;i<a;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}},Da=Ta.FilterCSS,$a=Ta.getDefaultWhiteList,Ua=La;var Ba=new Da;function Ma(e){return e.replace(Ra,"&lt;").replace(Na,"&gt;")}var Ra=/</g,Na=/>/g,za=/"/g,Va=/&quot;/g,qa=/&#([a-zA-Z0-9]*);?/gim,Ga=/&colon;?/gim,Qa=/&newline;?/gim,Ha=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Ka=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Wa=/u\s*r\s*l\s*\(.*/gi;function Xa(e){return e.replace(za,"&quot;")}function Ya(e){return e.replace(Va,'"')}function Ja(e){return e.replace(qa,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function Za(e){return e.replace(Ga,":").replace(Qa," ")}function es(e){for(var t="",r=0,i=e.length;r<i;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return Ua.trim(t)}function ts(e){return es(e=Za(e=Ja(e=Ya(e))))}function rs(e){return Ma(e=Xa(e))}Sa.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},Sa.getDefaultWhiteList=function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}},Sa.onTag=function(e,t,r){},Sa.onIgnoreTag=function(e,t,r){},Sa.onTagAttr=function(e,t,r){},Sa.onIgnoreTagAttr=function(e,t,r){},Sa.safeAttrValue=function(e,t,r,i){if(r=ts(r),"href"===t||"src"===t){if("#"===(r=Ua.trim(r)))return"#";if("http://"!==r.substr(0,7)&&"https://"!==r.substr(0,8)&&"mailto:"!==r.substr(0,7)&&"tel:"!==r.substr(0,4)&&"data:image/"!==r.substr(0,11)&&"ftp://"!==r.substr(0,6)&&"./"!==r.substr(0,2)&&"../"!==r.substr(0,3)&&"#"!==r[0]&&"/"!==r[0])return""}else if("background"===t){if(Ha.lastIndex=0,Ha.test(r))return""}else if("style"===t){if(Ka.lastIndex=0,Ka.test(r))return"";if(Wa.lastIndex=0,Wa.test(r)&&(Ha.lastIndex=0,Ha.test(r)))return"";!1!==i&&(r=(i=i||Ba).process(r))}return rs(r)},Sa.escapeHtml=Ma,Sa.escapeQuote=Xa,Sa.unescapeQuote=Ya,Sa.escapeHtmlEntities=Ja,Sa.escapeDangerHtml5Entities=Za,Sa.clearNonPrintableCharacter=es,Sa.friendlyAttrValue=ts,Sa.escapeAttrValue=rs,Sa.onIgnoreTagStripAll=function(){return""},Sa.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var r=!Array.isArray(e),i=[],a=!1;return{onIgnoreTag:function(s,o,n){if(function(t){return!!r||-1!==Ua.indexOf(e,t)}(s)){if(n.isClosing){var l=n.position+10;return i.push([!1!==a?a:n.position,l]),a=!1,"[/removed]"}return a||(a=n.position),"[removed]"}return t(s,o,n)},remove:function(e){var t="",r=0;return Ua.forEach(i,(function(i){t+=e.slice(r,i[0]),r=i[1]})),t+=e.slice(r)}}},Sa.stripCommentTag=function(e){for(var t="",r=0;r<e.length;){var i=e.indexOf("\x3c!--",r);if(-1===i){t+=e.slice(r);break}t+=e.slice(r,i);var a=e.indexOf("--\x3e",i);if(-1===a)break;r=a+3}return t},Sa.stripBlankChar=function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return!(127===t||t<=31&&10!==t&&13!==t)}))).join("")},Sa.cssFilter=Ba,Sa.getDefaultCSSWhiteList=$a;var is={},as=La;function ss(e){var t,r=as.spaceIndex(e);return t=-1===r?e.slice(1,-1):e.slice(1,r+1),"/"===(t=as.trim(t).toLowerCase()).slice(0,1)&&(t=t.slice(1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),t}function os(e){return"</"===e.slice(0,2)}var ns=/[^a-zA-Z0-9\\_:.-]/gim;function ls(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"="===r?t:-1}}function cs(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"'"===r||'"'===r?t:-1}}function us(e,t){for(;t>0;t--){var r=e[t];if(" "!==r)return"="===r?t:-1}}function ds(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}is.parseTag=function(e,t,r){var i="",a=0,s=!1,o=!1,n=0,l=e.length,c="",u="";e:for(n=0;n<l;n++){var d=e.charAt(n);if(!1===s){if("<"===d){s=n;continue}}else if(!1===o){if("<"===d){i+=r(e.slice(a,n)),s=n,a=n;continue}if(">"===d){i+=r(e.slice(a,s)),c=ss(u=e.slice(s,n+1)),i+=t(s,i.length,c,u,os(u)),a=n+1,s=!1;continue}if('"'===d||"'"===d)for(var f=1,h=e.charAt(n-f);""===h.trim()||"="===h;){if("="===h){o=d;continue e}h=e.charAt(n-++f)}}else if(d===o){o=!1;continue}}return a<e.length&&(i+=r(e.substr(a))),i},is.parseAttr=function(e,t){var r=0,i=0,a=[],s=!1,o=e.length;function n(e,r){if(!((e=(e=as.trim(e)).replace(ns,"").toLowerCase()).length<1)){var i=t(e,r||"");i&&a.push(i)}}for(var l=0;l<o;l++){var c,u=e.charAt(l);if(!1!==s||"="!==u)if(!1===s||l!==i){if(/\s|\n|\t/.test(u)){if(e=e.replace(/\s|\n|\t/g," "),!1===s){if(-1===(c=ls(e,l))){n(as.trim(e.slice(r,l))),s=!1,r=l+1;continue}l=c-1;continue}if(-1===(c=us(e,l-1))){n(s,ds(as.trim(e.slice(r,l)))),s=!1,r=l+1;continue}}}else{if(-1===(c=e.indexOf(u,l+1)))break;n(s,as.trim(e.slice(i+1,c))),s=!1,r=(l=c)+1}else s=e.slice(r,l),r=l+1,i='"'===e.charAt(r)||"'"===e.charAt(r)?r:cs(e,l+1)}return r<e.length&&(!1===s?n(e.slice(r)):n(s,ds(as.trim(e.slice(r))))),as.trim(a.join(" "))};var fs=Ta.FilterCSS,hs=Sa,ps=is,gs=ps.parseTag,ms=ps.parseAttr,ys=La;function vs(e){return null==e}function bs(e){(e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=hs.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=function(e){var t={};for(var r in e)Array.isArray(e[r])?t[r.toLowerCase()]=e[r].map((function(e){return e.toLowerCase()})):t[r.toLowerCase()]=e[r];return t}(e.whiteList||e.allowList):e.whiteList=hs.whiteList,e.onTag=e.onTag||hs.onTag,e.onTagAttr=e.onTagAttr||hs.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||hs.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||hs.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||hs.safeAttrValue,e.escapeHtml=e.escapeHtml||hs.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new fs(e.css))}bs.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,i=t.onTag,a=t.onIgnoreTag,s=t.onTagAttr,o=t.onIgnoreTagAttr,n=t.safeAttrValue,l=t.escapeHtml,c=this.cssFilter;t.stripBlankChar&&(e=hs.stripBlankChar(e)),t.allowCommentTag||(e=hs.stripCommentTag(e));var u=!1;t.stripIgnoreTagBody&&(u=hs.StripTagBody(t.stripIgnoreTagBody,a),a=u.onIgnoreTag);var d=gs(e,(function(e,t,u,d,f){var h={sourcePosition:e,position:t,isClosing:f,isWhite:Object.prototype.hasOwnProperty.call(r,u)},p=i(u,d,h);if(!vs(p))return p;if(h.isWhite){if(h.isClosing)return"</"+u+">";var g=function(e){var t=ys.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var r="/"===(e=ys.trim(e.slice(t+1,-1)))[e.length-1];return r&&(e=ys.trim(e.slice(0,-1))),{html:e,closing:r}}(d),m=r[u],y=ms(g.html,(function(e,t){var r=-1!==ys.indexOf(m,e),i=s(u,e,t,r);return vs(i)?r?(t=n(u,e,t,c))?e+'="'+t+'"':e:vs(i=o(u,e,t,r))?void 0:i:i}));return d="<"+u,y&&(d+=" "+y),g.closing&&(d+=" /"),d+">"}return vs(p=a(u,d,h))?l(d):p}),l);return u&&(d=u.remove(d)),d};var ws=bs;!function(e,t){var r=Sa,i=is,a=ws;function s(e,t){return new a(t).process(e)}(t=e.exports=s).filterXSS=s,t.FilterXSS=a,function(){for(var e in r)t[e]=r[e];for(var a in i)t[a]=i[a]}(),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)}(wa,wa.exports);const Ss="nonSpecific",_s="barAndLineNoAggregation",xs="barAndLineMonoField",Ps="barAndLineMultiFields",Fs="barAndLineFromFields",Cs="barAndLineSplitBy",Es="barAndLineSplitByNoAggregation",ks="pieNoAggregation",Is="pieFromCategory",Os="pieFromFields",js="boxPlotMonoField",As="boxPlotMultiFields",Ts="boxPlotMonoFieldAndCategory",Ls="boxPlotMultiFieldsAndCategory",Ds="boxPlotMonoFieldAndSplitBy",$s="boxPlotMultiFieldsAndSplitBy",Us="boxPlotMonoFieldAndCategoryAndSplitBy";function Bs(e,t){let r;if(void 0!==e&&e.length>0)if(void 0!==t&&t>=0&&t<e.length)r=e[t].type;else{const t=new Set(e.map((e=>e.type))),i=function(e){return 2===e.size&&e.has(L)&&e.has(D)}(t),a=function(e){return 2===e.size&&e.has(L)&&e.has(U)||1===e.size&&e.has(U)}(t);r=!0===i?M:a?U:t.size>=2?void 0:e[0].type}return r}function Ms(e){let t=!1;if(void 0!==e){const r=Bs(e.series);r!==D&&r!==L&&r!==M&&r!==U||(t=e.rotated??!1)}return t}function Rs(e){const{value:t,keepSurroundingQuotes:r,escape:i}=e;let a=t?.trim();if(!zs(a)){let e="";a.startsWith("'")&&a.endsWith("'")&&(a=a.slice(1,-1),r&&(e="'")),!1!==i&&(a=function(e){let t=e;return t=t.replace(/'/gu,"''"),t=t.replace(/[/\\"|[\]\\]/gu,"\\$&"),t}(a)),a=`${e}${a}${e}`}return a}function Ns(e=[],t){const r=e.find((e=>e.name===t))?.alias;return""!==r?r??t:t}function zs(e){return null==e||"string"==typeof e&&""===e.trim()}function Vs(e,t){let r={fieldToSort:""};if(!zs(e)){const i=e.trim(),a=i.split(" "),s=a.at(-1)?.toUpperCase();s===N||s===z?r={fieldToSort:i.substring(0,i.lastIndexOf(" ")),orderBy:s}:(r={fieldToSort:i},!1!==t&&(r.orderBy=N))}return r}const qs=["1.0.0","1.0.1","2.0.0","3.0.0","3.1.0","3.2.0","3.3.0","3.4.0","3.5.0","3.6.0","3.7.0","3.8.0","3.9.0","3.9.1","3.9.2","3.10.0","3.11.0","4.0.0","4.0.1","5.0.0","6.0.0","6.1.0","6.2.0","6.2.1","6.3.0","6.4.0","7.0.0","7.1.0","7.1.1","7.2.0","7.2.1","7.3.1","7.4.0","7.4.1","7.5.0","7.5.1","7.6.0","8.0.0","8.0.1","9.0.0","9.1.0","9.2.0","9.3.0","9.4.0","9.5.0","9.6.0","9.6.1","9.7.0","10.0.0","11.0.0","12.0.0","13.0.0","14.0.0","14.0.1","15.0.0","16.0.0","16.1.0","16.1.1","17.0.0","17.1.0","17.2.0","17.2.1","18.0.0","18.1.0"],Gs="1.0.0",Qs="unrecognized.version";function Hs(e,t){let r=0;if(e!==t){const i=e.split("."),a=t.split(".");for(let e=0;e<i.length;e+=1){const t=Number.parseInt(i[e],10),s=Number.parseInt(a[e],10);if(t>s||Number.isNaN(s)){r=1;break}if(t<s){r=-1;break}}}return r}function Ks(e){const{series:t}=e;let r=!0===("showMean"in e&&e.showMean)?t.find((e=>e.type===L)):t[0];return r??=t[0],r}function Ws(e,t){let r="";return void 0!==e&&e.includes("=")&&(r=!1!==t?Rs({value:e.split("=")[0]}):e.split("=")[0].trim()),r}function Xs(e){const{where:t,normalize:r,keepSurroundingQuotes:i,escape:a}=e;let s="";return void 0!==t&&t.includes("=")&&(s=t.split("=").slice(1).join("=").trim(),"null"===s?s=null:""===s.trim()||Number.isNaN(Number(s))?!1===r?!0===a&&(s=function(e){let t=e,r="";e.startsWith("'")&&e.endsWith("'")&&(t=e.slice(1,-1),r="'"),t=t.replace(/'/gu,"''");let i="";return function(e){let t=!1;return"number"!=typeof e&&(t=[...e].some((e=>e.charCodeAt(0)>255))),t}(t)&&(i="N"),`${i}${r}${t}${r}`}(s)):s=Rs({value:s,keepSurroundingQuotes:i,escape:a}):s=Number(s)),s}function Ys(e){let t=!1;return void 0===e||""===e?t=!0:e.includes("=")&&(t=Ws(e,!1)===`${Xs({where:e,normalize:!1})}`),t}function Js(e){let t=Ss;if(void 0!==e?.[0])switch(Bs(e)){case A:t=function(e){let t=Is;return void 0===e[0].query?.outStatistics?t=ks:void 0===e[0].query?.groupByFieldsForStatistics&&(t=Os),t}(e);break;case B:case D:case L:case M:t=function(e){let t=xs;const r=e[0].query?.where;return void 0===e[0].query?.groupByFieldsForStatistics&&(e[0].query?.outStatistics??[]).length>0?t=Fs:void 0===r&&void 0===e[0].query?.outStatistics?t=_s:Ys(r)?e.length>1&&(t=Ps):t=void 0===e[0].query?.outStatistics?Es:Cs,t}(e);break;case U:t=function(e){let t=js;const r=1===e.length,i=e.find((e=>e.type===L))??e[0],{x:a}=i,s="y"in i?i.y:"",o=i.query?.where;return a===Ui?"object"==typeof s&&s.length>1?Ys(o)?r&&(t=As):t=$s:r?t=js:Ys(o)||(t=Ds):t=r?Ts:Ys(o)?Ls:Us,t}(e)}return t}var Zs="undefined"!=typeof window&&"$arcgis"in window&&"object"==typeof window.$arcgis&&"import"in window.$arcgis&&!("forceESM"in window.$arcgis);function eo(e){return void 0!==e.default}async function to(){if(Zs)return await window.$arcgis.import("esri/geometry/support/jsonUtils");const t=await new Promise((function(t,i){e(["esri/geometry/support/jsonUtils"],(function(e){t(r(e))}),i)}));return eo(t)?t.default:t}function ro(e){return void 0!==e&&"type"in e&&"subtype-sublayer"===e.type}function io(e){return ro(e)?e.parent:e}function ao(e){let t;return t=function(e){return void 0!==e&&"layer"in e}(e)?e.layer:e,t}function so(e){const t=io(e)?.sourceJSON;let r=t?.maxRecordCount??ji;return t?.advancedQueryCapabilities?.supportsMaxRecordCountFactor&&void 0!==t?.maxRecordCount&&(r=t.maxRecordCount*Ii),r}function oo(e,t){let r;const i=Array.from(new Set(e)).filter((e=>null!=e&&""!==e&&!Ys(e)));return i.sort(((e,t)=>t.length-e.length)),1===i.length?[r]=i:i?.forEach((e=>{void 0!==e&&(zs(r)?r=`(${e})`:r?.includes(`(${e})`)||(r=`${r} ${t??"AND"} (${e})`))})),r??"1=1"}async function no(t){let i;return void 0!==t&&(i=await async function(t){return new(await async function(){if(Zs)return await window.$arcgis.import("esri/time/TimeExtent");const t=await new Promise((function(t,i){e(["esri/time/TimeExtent"],(function(e){t(r(e))}),i)}));return eo(t)?t.default:t}())(t)}({start:new Date(t[0]),end:new Date(t[1])})),i}async function lo(t){const{queryObject:i,queryConfig:a,maxRecordCountFactor:s}=t,{where:o,groupByFieldsForStatistics:n,orderByFields:l,outStatistics:c,gdbVersion:u,geometry:d,distance:f,units:h,timeExtent:p,start:g,num:y,returnDistinctValues:v,outFields:b}=a??{},w=await async function(t){return new(await async function(){if(Zs)return await window.$arcgis.import("esri/rest/support/Query");const t=await new Promise((function(t,i){e(["esri/rest/support/Query"],(function(e){t(r(e))}),i)}));return eo(t)?t.default:t}())(t)}({});w.returnGeometry=!1;const S=ao(i),_=io(S),x=[o,_.definitionExpression];if(w.where=oo(x),w.outFields=function(e){return void 0===e?["*"]:Array.from(new Set(e))}(b),w.groupByFieldsForStatistics=n??w.groupByFieldsForStatistics,w.orderByFields=l??[],w.returnDistinctValues=v??!1,void 0!==c){const t=function(e){let t=!1;const r=io(e).sourceJSON?.advancedQueryCapabilities?.supportedSpatialAggregationStatistics??[],i=e.capabilities?.query.supportedSpatialAggregationStatistics??{};return t=r.includes("EnvelopeAggregate")||"envelope"in i&&void 0!==i.envelope&&null!==i.envelope,t}(S),i=await async function(){if(Zs)return await window.$arcgis.import("esri/rest/support/StatisticDefinition");const t=await new Promise((function(t,i){e(["esri/rest/support/StatisticDefinition"],(function(e){t(r(e))}),i)}));return eo(t)?t.default:t}();w.outStatistics=c.filter((e=>e.statisticType!==m||t)).map((e=>i.fromJSON(e)))}void 0!==s&&(w.maxRecordCountFactor=s),void 0!==u&&""!==u?w.gdbVersion=u:void 0!==_.gdbVersion&&""!==_.gdbVersion&&(w.gdbVersion=_.gdbVersion);const P=await async function(e){let t;return void 0!==e&&(t=(await to()).fromJSON(e)),t}(d);void 0!==P&&(w.geometry=P,function(e){return e.capabilities?.query?.supportsDistance||!0===io(e).sourceJSON?.advancedQueryCapabilities?.supportsQueryWithDistance}(S)&&(void 0!==f&&(w.distance=f),void 0!==h&&(w.units=h)));const F=await no(p);return void 0!==F?w.timeExtent=F:void 0!==_.timeExtent&&(w.timeExtent=_.timeExtent),void 0!==y&&(w.num=y),void 0!==g&&(w.start=g,w.num=w.num??so(S)),function(e){const t=!e.geometry,r=(e.where??"").toUpperCase(),i=!r.includes("CURRENT_TIMESTAMP")&&!r.includes("CURRENT_DATE")&&!r.includes("CURRENT_TIME");return t&&i}(w)&&(w.cacheHint=!0),w}const co=new Map,uo="queryFeaturesError";class fo extends Error{constructor(e,t,r){super(t),this.name=e,this.details=r}}async function ho(t=Ei().locale){let r=await new Promise((function(t,r){e(["./messages.en-2720bc04-baca466f"],t,r)}));switch(t){case ne.Arabic:r=await new Promise((function(t,r){e(["./messages.ar-2a516be4-54470893"],t,r)}));break;case ne.Bosnian:r=await new Promise((function(t,r){e(["./messages.bs-ed521a4a-32ce1ad5"],t,r)}));break;case ne.Bulgarian:r=await new Promise((function(t,r){e(["./messages.bg-32846a04-3862bd1e"],t,r)}));break;case ne.Catalan:r=await new Promise((function(t,r){e(["./messages.ca-534a5a29-64c39c04"],t,r)}));break;case ne.Czech:r=await new Promise((function(t,r){e(["./messages.cs-f7dfa0ea-7ba1e527"],t,r)}));break;case ne.Danish:r=await new Promise((function(t,r){e(["./messages.da-12df1d76-7cb64949"],t,r)}));break;case ne.German:r=await new Promise((function(t,r){e(["./messages.de-8ac83862-9d61adfb"],t,r)}));break;case ne.Greek:r=await new Promise((function(t,r){e(["./messages.el-d39d2cdb-0d1076f7"],t,r)}));break;case ne.EnglishUSA:r=await new Promise((function(t,r){e(["./messages.en-US-d444015e-f2c3b05a"],t,r)}));break;case ne.Spanish:r=await new Promise((function(t,r){e(["./messages.es-5242724e-889c4f09"],t,r)}));break;case ne.Estonian:r=await new Promise((function(t,r){e(["./messages.et-62f107f7-dcc27e55"],t,r)}));break;case ne.Finnish:r=await new Promise((function(t,r){e(["./messages.fi-c0c48057-3feef5c0"],t,r)}));break;case ne.French:r=await new Promise((function(t,r){e(["./messages.fr-b992d801-75f7ffeb"],t,r)}));break;case ne.Hebrew:r=await new Promise((function(t,r){e(["./messages.he-70d41af0-fc088ff7"],t,r)}));break;case ne.Croatian:r=await new Promise((function(t,r){e(["./messages.hr-5657371a-0ec0e3fb"],t,r)}));break;case ne.Hungarian:r=await new Promise((function(t,r){e(["./messages.hu-5bc9a465-8a339164"],t,r)}));break;case ne.Indonesian:r=await new Promise((function(t,r){e(["./messages.id-e1e1d374-7ede105f"],t,r)}));break;case ne.Italian:r=await new Promise((function(t,r){e(["./messages.it-025c832d-0c9ff8f5"],t,r)}));break;case ne.Japanese:r=await new Promise((function(t,r){e(["./messages.ja-4264bfb4-ce5de129"],t,r)}));break;case ne.Korean:r=await new Promise((function(t,r){e(["./messages.ko-e9e78e29-11d99207"],t,r)}));break;case ne.Lithuanian:r=await new Promise((function(t,r){e(["./messages.lt-21cd5fa8-82c23cbb"],t,r)}));break;case ne.Latvian:r=await new Promise((function(t,r){e(["./messages.lv-90fae237-789f830e"],t,r)}));break;case ne.NorwegianBokml:r=await new Promise((function(t,r){e(["./messages.no-70efa82c-9d3560ae"],t,r)}));break;case ne.Dutch:r=await new Promise((function(t,r){e(["./messages.nl-417c9242-3fb1bcf4"],t,r)}));break;case ne.Polish:r=await new Promise((function(t,r){e(["./messages.pl-2dec17dd-a89e3682"],t,r)}));break;case ne.PortugueseBrazil:r=await new Promise((function(t,r){e(["./messages.pt-BR-56a76dfb-59511d3b"],t,r)}));break;case ne.PortuguesePortugal:r=await new Promise((function(t,r){e(["./messages.pt-PT-67e158bf-68ebab5b"],t,r)}));break;case ne.Romanian:r=await new Promise((function(t,r){e(["./messages.ro-fbedb46a-cce04645"],t,r)}));break;case ne.Russian:r=await new Promise((function(t,r){e(["./messages.ru-46c525de-e52e60d9"],t,r)}));break;case ne.Serbian:r=await new Promise((function(t,r){e(["./messages.sr-6eeefca3-43c905e0"],t,r)}));break;case ne.Slovak:r=await new Promise((function(t,r){e(["./messages.sk-36f6b3f3-0da8828d"],t,r)}));break;case ne.Slovenian:r=await new Promise((function(t,r){e(["./messages.sl-407c0dc1-d7c12b74"],t,r)}));break;case ne.Swedish:r=await new Promise((function(t,r){e(["./messages.sv-8a49b669-73d563bd"],t,r)}));break;case ne.Thai:r=await new Promise((function(t,r){e(["./messages.th-63ead210-0db7855e"],t,r)}));break;case ne.Turkish:r=await new Promise((function(t,r){e(["./messages.tr-7c612534-030aa5bf"],t,r)}));break;case ne.Ukrainian:r=await new Promise((function(t,r){e(["./messages.uk-7a3e2f41-2a5c6856"],t,r)}));break;case ne.Vietnamese:r=await new Promise((function(t,r){e(["./messages.vi-7bf62f1e-054b72f0"],t,r)}));break;case ne.ChineseChina:r=await new Promise((function(t,r){e(["./messages.zh-CN-9407591c-3fecf5eb"],t,r)}));break;case ne.ChineseHongKong:r=await new Promise((function(t,r){e(["./messages.zh-HK-fc092e0a-508071e7"],t,r)}));break;case ne.ChineseTaiwan:r=await new Promise((function(t,r){e(["./messages.zh-TW-53165175-463caff2"],t,r)}))}return r}async function po(t){const{queryObject:i,queryConfig:a,returnUniqueIdsOnly:s,abortKey:o}=t;let n=[];const l=ao(i);if(void 0!==i){const c=function(e){return!0===io(e)?.sourceJSON?.advancedQueryCapabilities?.supportsMaxRecordCountFactor?Ii:void 0}(l),u=await lo({queryObject:i,queryConfig:a,maxRecordCountFactor:c});try{!0===s?"queryObjectIds"in i?n=await i.queryObjectIds(u):(u.outFields=[l.objectIdField],n=(await i.queryFeatures(u,{signal:void 0!==o?co.get(o)?.signal:void 0})).features.map((e=>e.attributes[l.objectIdField]))):n=(await i.queryFeatures(u,{signal:void 0!==o?co.get(o)?.signal:void 0})).features}catch(t){if(!(await async function(){if(Zs)return await window.$arcgis.import("esri/core/promiseUtils");const t=await new Promise((function(t,i){e(["esri/core/promiseUtils"],(function(e){t(r(e))}),i)}));return eo(t)?t.default:t}()).isAbortError(t)){const e=await ho();throw new fo(uo,e.queryError,t)}}}return n}async function go(e){const t=[],{featureCount:r,maxRecords:i,queryConfig:a}=e;let s=[],o=0,n=a?.start??0;for(;o<Oi&&n<r;){const s={...e};s.queryConfig={...a,start:n,num:Math.min(i,r-n)},t.push(po(s)),n+=i,o+=1}return s=(await Promise.all(t)).flat(),s}async function mo(e){const{queryObject:t,queryConfig:r,category:i,splitByField:a,chartLimits:s,abortKey:o}=e,n=void 0!==a,c=i!==Ui?[i]:[];n&&c.push(a);const u=ao(t),d={...r,groupByFieldsForStatistics:Array.from(new Set(c)),outStatistics:[{statisticType:l,onStatisticField:u.objectIdField,outStatisticFieldName:`${l}_OBJECTID`}],orderByFields:void 0,num:s?.maxBarThreePlusSeriesCountTotal},f=await async function(e){const{queryObject:t,queryConfig:r,returnUniqueIdsOnly:i,featureCount:a,noBatch:s,abortKey:o}=e;let n=[];const l=ao(t);if(void 0!==t){const e=a??1,c=so(l);if(!0!==s&&e>c&&l.capabilities?.query.supportsPagination){let a=0,s=0;const l=Math.ceil(e/c),u=Math.ceil(l/Oi),d=[];for(;s<u;){a=s*Oi*c;const n=go({queryConfig:{...r,start:a},queryObject:t,maxRecords:c,featureCount:e,returnUniqueIdsOnly:i,abortKey:o});d.push(n),s+=1}n=(await Promise.all(d)).flat()}else(Number.isNaN(e)||e>=0)&&(n=await po({queryObject:t,queryConfig:r,returnUniqueIdsOnly:i,abortKey:o}))}return n}({queryObject:t,featureCount:1,queryConfig:d,abortKey:o});return Array.from(new Set(f.map((e=>e.attributes[n?a:i])))).sort(((e,t)=>"string"==typeof e&&"string"==typeof t?e.localeCompare(t):Number(e)-Number(t)))}function yo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var vo,bo,wo,So,_o,xo,Po,Fo,Co,Eo={exports:{}};function ko(){return vo||(vo=1,function(e){function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var i=t.length-1,a=1;a<i;++a)t[a]=t[a].slice(1,-1);return t[i]=t[i].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function i(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function a(e){return e.toUpperCase()}function s(e){var i="[A-Za-z]",a="[0-9]",s=t(a,"[A-Fa-f]"),o=r(r("%[EFef]"+s+"%"+s+s+"%"+s+s)+"|"+r("%[89A-Fa-f]"+s+"%"+s+s)+"|"+r("%"+s+s)),n="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",l=t("[\\:\\/\\?\\#\\[\\]\\@]",n),c=e?"[\\uE000-\\uF8FF]":"[]",u=t(i,a,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]");r(i+t(i,a,"[\\+\\-\\.]")+"*"),r(r(o+"|"+t(u,n,"[\\:]"))+"*");var d=r(r("25[0-5]")+"|"+r("2[0-4]"+a)+"|"+r("1"+a+a)+"|"+r("0?[1-9]"+a)+"|0?0?"+a),f=r(d+"\\."+d+"\\."+d+"\\."+d),h=r(s+"{1,4}"),p=r(r(h+"\\:"+h)+"|"+f),g=r(r(h+"\\:")+"{6}"+p),m=r("\\:\\:"+r(h+"\\:")+"{5}"+p),y=r(r(h)+"?\\:\\:"+r(h+"\\:")+"{4}"+p),v=r(r(r(h+"\\:")+"{0,1}"+h)+"?\\:\\:"+r(h+"\\:")+"{3}"+p),b=r(r(r(h+"\\:")+"{0,2}"+h)+"?\\:\\:"+r(h+"\\:")+"{2}"+p),w=r(r(r(h+"\\:")+"{0,3}"+h)+"?\\:\\:"+h+"\\:"+p),S=r(r(r(h+"\\:")+"{0,4}"+h)+"?\\:\\:"+p),_=r(r(r(h+"\\:")+"{0,5}"+h)+"?\\:\\:"+h),x=r(r(r(h+"\\:")+"{0,6}"+h)+"?\\:\\:"),P=r([g,m,y,v,b,w,S,_,x].join("|")),F=r(r(u+"|"+o)+"+");r("[vV]"+s+"+\\."+t(u,n,"[\\:]")+"+"),r(r(o+"|"+t(u,n))+"*");var C=r(o+"|"+t(u,n,"[\\:\\@]"));return r(r(o+"|"+t(u,n,"[\\@]"))+"+"),r(r(C+"|"+t("[\\/\\?]",c))+"*"),{NOT_SCHEME:new RegExp(t("[^]",i,a,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",u,n),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",u,n),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",u,n),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",u,n),"g"),NOT_QUERY:new RegExp(t("[^\\%]",u,n,"[\\:\\@\\/\\?]",c),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",u,n,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",u,n),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",u,l),"g"),PCT_ENCODED:new RegExp(o,"g"),IPV4ADDRESS:new RegExp("^("+f+")$"),IPV6ADDRESS:new RegExp("^\\[?("+P+")"+r(r("\\%25|\\%(?!"+s+"{2})")+"("+F+")")+"?\\]?$")}}var o=s(!1),n=s(!0),l=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],i=!0,a=!1,s=void 0;try{for(var o,n=e[Symbol.iterator]();!(i=(o=n.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(e){a=!0,s=e}finally{try{!i&&n.return&&n.return()}finally{if(a)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=2147483647,u=36,d=/^xn--/,f=/[^\0-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=Math.floor,m=String.fromCharCode;function y(e){throw new RangeError(p[e])}function v(e,t){var r=e.split("@"),i="";return r.length>1&&(i=r[0]+"@",e=r[1]),i+function(e,t){for(var r=[],i=e.length;i--;)r[i]=t(e[i]);return r}((e=e.replace(h,".")).split("."),t).join(".")}function b(e){for(var t=[],r=0,i=e.length;r<i;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<i){var s=e.charCodeAt(r++);56320==(64512&s)?t.push(((1023&a)<<10)+(1023&s)+65536):(t.push(a),r--)}else t.push(a)}return t}var w=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:u},S=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},_=function(e,t,r){var i=0;for(e=r?g(e/700):e>>1,e+=g(e/t);e>455;i+=u)e=g(e/35);return g(i+36*e/(e+38))},x=function(e){var t=[],r=e.length,i=0,a=128,s=72,o=e.lastIndexOf("-");o<0&&(o=0);for(var n=0;n<o;++n)e.charCodeAt(n)>=128&&y("not-basic"),t.push(e.charCodeAt(n));for(var l=o>0?o+1:0;l<r;){for(var d=i,f=1,h=u;;h+=u){l>=r&&y("invalid-input");var p=w(e.charCodeAt(l++));(p>=u||p>g((c-i)/f))&&y("overflow"),i+=p*f;var m=h<=s?1:h>=s+26?26:h-s;if(p<m)break;var v=u-m;f>g(c/v)&&y("overflow"),f*=v}var b=t.length+1;s=_(i-d,b,0==d),g(i/b)>c-a&&y("overflow"),a+=g(i/b),i%=b,t.splice(i++,0,a)}return String.fromCodePoint.apply(String,t)},P=function(e){var t=[],r=(e=b(e)).length,i=128,a=0,s=72,o=!0,n=!1,l=void 0;try{for(var d,f=e[Symbol.iterator]();!(o=(d=f.next()).done);o=!0){var h=d.value;h<128&&t.push(m(h))}}catch(e){n=!0,l=e}finally{try{!o&&f.return&&f.return()}finally{if(n)throw l}}var p=t.length,v=p;for(p&&t.push("-");v<r;){var w=c,x=!0,P=!1,F=void 0;try{for(var C,E=e[Symbol.iterator]();!(x=(C=E.next()).done);x=!0){var k=C.value;k>=i&&k<w&&(w=k)}}catch(e){P=!0,F=e}finally{try{!x&&E.return&&E.return()}finally{if(P)throw F}}var I=v+1;w-i>g((c-a)/I)&&y("overflow"),a+=(w-i)*I,i=w;var O=!0,j=!1,A=void 0;try{for(var T,L=e[Symbol.iterator]();!(O=(T=L.next()).done);O=!0){var D=T.value;if(D<i&&++a>c&&y("overflow"),D==i){for(var $=a,U=u;;U+=u){var B=U<=s?1:U>=s+26?26:U-s;if($<B)break;var M=$-B,R=u-B;t.push(m(S(B+M%R,0))),$=g(M/R)}t.push(m(S($,0))),s=_(a,I,v==p),a=0,++v}}}catch(e){j=!0,A=e}finally{try{!O&&L.return&&L.return()}finally{if(j)throw A}}++a,++i}return t.join("")},F=function(e){return v(e,(function(e){return f.test(e)?"xn--"+P(e):e}))},C=function(e){return v(e,(function(e){return d.test(e)?x(e.slice(4).toLowerCase()):e}))},E={};function k(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function I(e){for(var t="",r=0,i=e.length;r<i;){var a=parseInt(e.substr(r+1,2),16);if(a<128)t+=String.fromCharCode(a),r+=3;else if(a>=194&&a<224){if(i-r>=6){var s=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&a)<<6|63&s)}else t+=e.substr(r,6);r+=6}else if(a>=224){if(i-r>=9){var o=parseInt(e.substr(r+4,2),16),n=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&a)<<12|(63&o)<<6|63&n)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function O(e,t){function r(e){var r=I(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,k).replace(t.PCT_ENCODED,a)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,k).replace(t.PCT_ENCODED,a)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,k).replace(t.PCT_ENCODED,a)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,k).replace(t.PCT_ENCODED,a)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,k).replace(t.PCT_ENCODED,a)),e}function j(e){return e.replace(/^0*(.*)/,"$1")||"0"}function A(e,t){var r=e.match(t.IPV4ADDRESS)||[],i=l(r,2)[1];return i?i.split(".").map(j).join("."):e}function T(e,t){var r=e.match(t.IPV6ADDRESS)||[],i=l(r,3),a=i[1],s=i[2];if(a){for(var o=a.toLowerCase().split("::").reverse(),n=l(o,2),c=n[0],u=n[1],d=u?u.split(":").map(j):[],f=c.split(":").map(j),h=t.IPV4ADDRESS.test(f[f.length-1]),p=h?7:8,g=f.length-p,m=Array(p),y=0;y<p;++y)m[y]=d[y]||f[g+y]||"";h&&(m[p-1]=A(m[p-1],t));var v=m.reduce((function(e,t,r){if(!t||"0"===t){var i=e[e.length-1];i&&i.index+i.length===r?i.length++:e.push({index:r,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],b=void 0;if(v&&v.length>1){var w=m.slice(0,v.index),S=m.slice(v.index+v.length);b=w.join(":")+"::"+S.join(":")}else b=m.join(":");return s&&(b+="%"+s),b}return e}var L=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,D=void 0==="".match(/(){0}/)[1];function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},i=!1!==t.iri?n:o;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var a=e.match(L);if(a){D?(r.scheme=a[1],r.userinfo=a[3],r.host=a[4],r.port=parseInt(a[5],10),r.path=a[6]||"",r.query=a[7],r.fragment=a[8],isNaN(r.port)&&(r.port=a[5])):(r.scheme=a[1]||void 0,r.userinfo=-1!==e.indexOf("@")?a[3]:void 0,r.host=-1!==e.indexOf("//")?a[4]:void 0,r.port=parseInt(a[5],10),r.path=a[6]||"",r.query=-1!==e.indexOf("?")?a[7]:void 0,r.fragment=-1!==e.indexOf("#")?a[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?a[4]:void 0)),r.host&&(r.host=T(A(r.host,i),i)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var s=E[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||s&&s.unicodeSupport)O(r,i);else{if(r.host&&(t.domainHost||s&&s.domainHost))try{r.host=F(r.host.replace(i.PCT_ENCODED,I).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}O(r,o)}s&&s.parse&&s.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}var U=/^\.\.?\//,B=/^\/\.(\/|$)/,M=/^\/\.\.(\/|$)/,R=/^\/?(?:.|\n)*?(?=\/|$)/;function N(e){for(var t=[];e.length;)if(e.match(U))e=e.replace(U,"");else if(e.match(B))e=e.replace(B,"/");else if(e.match(M))e=e.replace(M,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(R);if(!r)throw new Error("Unexpected dot segment condition");var i=r[0];e=e.slice(i.length),t.push(i)}return t.join("")}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?n:o,i=[],a=E[(t.scheme||e.scheme||"").toLowerCase()];if(a&&a.serialize&&a.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||a&&a.domainHost)try{e.host=t.iri?C(e.host):F(e.host.replace(r.PCT_ENCODED,I).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}O(e,r),"suffix"!==t.reference&&e.scheme&&(i.push(e.scheme),i.push(":"));var s=function(e,t){var r=!1!==t.iri?n:o,i=[];return void 0!==e.userinfo&&(i.push(e.userinfo),i.push("@")),void 0!==e.host&&i.push(T(A(String(e.host),r),r).replace(r.IPV6ADDRESS,(function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(i.push(":"),i.push(String(e.port))),i.length?i.join(""):void 0}(e,t);if(void 0!==s&&("suffix"!==t.reference&&i.push("//"),i.push(s),e.path&&"/"!==e.path.charAt(0)&&i.push("/")),void 0!==e.path){var l=e.path;t.absolutePath||a&&a.absolutePath||(l=N(l)),void 0===s&&(l=l.replace(/^\/\//,"/%2F")),i.push(l)}return void 0!==e.query&&(i.push("?"),i.push(e.query)),void 0!==e.fragment&&(i.push("#"),i.push(e.fragment)),i.join("")}function V(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={};return arguments[3]||(e=$(z(e,r),r),t=$(z(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=N(t.path||""),i.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=N(t.path||""),i.query=t.query):(t.path?("/"===t.path.charAt(0)?i.path=N(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path:i.path="/"+t.path,i.path=N(i.path)),i.query=t.query):(i.path=e.path,void 0!==t.query?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function q(e,t){return e&&e.toString().replace(t&&t.iri?n.PCT_ENCODED:o.PCT_ENCODED,I)}var G={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var r="https"===String(e.scheme).toLowerCase();return e.port!==(r?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},Q={scheme:"https",domainHost:G.domainHost,parse:G.parse,serialize:G.serialize};function H(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var K={scheme:"ws",domainHost:!0,parse:function(e,t){var r=e;return r.secure=H(r),r.resourceName=(r.path||"/")+(r.query?"?"+r.query:""),r.path=void 0,r.query=void 0,r},serialize:function(e,t){if(e.port!==(H(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var r=e.resourceName.split("?"),i=l(r,2),a=i[0],s=i[1];e.path=a&&"/"!==a?a:void 0,e.query=s,e.resourceName=void 0}return e.fragment=void 0,e}},W={scheme:"wss",domainHost:K.domainHost,parse:K.parse,serialize:K.serialize},X={},Y="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",J="[0-9A-Fa-f]",Z=r(r("%[EFef]"+J+"%"+J+J+"%"+J+J)+"|"+r("%[89A-Fa-f]"+J+"%"+J+J)+"|"+r("%"+J+J)),ee=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),te=new RegExp(Y,"g"),re=new RegExp(Z,"g"),ie=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',ee),"g"),ae=new RegExp(t("[^]",Y,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),se=ae;function oe(e){var t=I(e);return t.match(te)?t:e}var ne={scheme:"mailto",parse:function(e,t){var r=e,i=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var a=!1,s={},o=r.query.split("&"),n=0,l=o.length;n<l;++n){var c=o[n].split("=");switch(c[0]){case"to":for(var u=c[1].split(","),d=0,f=u.length;d<f;++d)i.push(u[d]);break;case"subject":r.subject=q(c[1],t);break;case"body":r.body=q(c[1],t);break;default:a=!0,s[q(c[0],t)]=q(c[1],t)}}a&&(r.headers=s)}r.query=void 0;for(var h=0,p=i.length;h<p;++h){var g=i[h].split("@");if(g[0]=q(g[0]),t.unicodeSupport)g[1]=q(g[1],t).toLowerCase();else try{g[1]=F(q(g[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}i[h]=g.join("@")}return r},serialize:function(e,t){var r=e,i=function(e){return null!=e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}(e.to);if(i){for(var s=0,o=i.length;s<o;++s){var n=String(i[s]),l=n.lastIndexOf("@"),c=n.slice(0,l).replace(re,oe).replace(re,a).replace(ie,k),u=n.slice(l+1);try{u=t.iri?C(u):F(q(u,t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}i[s]=c+"@"+u}r.path=i.join(",")}var d=e.headers=e.headers||{};e.subject&&(d.subject=e.subject),e.body&&(d.body=e.body);var f=[];for(var h in d)d[h]!==X[h]&&f.push(h.replace(re,oe).replace(re,a).replace(ae,k)+"="+d[h].replace(re,oe).replace(re,a).replace(se,k));return f.length&&(r.query=f.join("&")),r}},le=/^([^\:]+)\:(.*)/,ce={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(le),i=e;if(r){var a=t.scheme||i.scheme||"urn",s=r[1].toLowerCase(),o=r[2],n=a+":"+(t.nid||s),l=E[n];i.nid=s,i.nss=o,i.path=void 0,l&&(i=l.parse(i,t))}else i.error=i.error||"URN can not be parsed.";return i},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",i=e.nid,a=r+":"+(t.nid||i),s=E[a];s&&(e=s.serialize(e,t));var o=e,n=e.nss;return o.path=(i||t.nid)+":"+n,o}},ue=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,de={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(ue)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};E[G.scheme]=G,E[Q.scheme]=Q,E[K.scheme]=K,E[W.scheme]=W,E[ne.scheme]=ne,E[ce.scheme]=ce,E[de.scheme]=de,e.SCHEMES=E,e.pctEncChar=k,e.pctDecChars=I,e.parse=$,e.removeDotSegments=N,e.serialize=z,e.resolveComponents=V,e.resolve=function(e,t,r){var i=function(e,t){var r=e;if(t)for(var i in t)r[i]=t[i];return r}({scheme:"null"},r);return z(V($(e,i),$(t,i),i,!0),i)},e.normalize=function(e,t){return"string"==typeof e?e=z($(e,t),t):"object"===i(e)&&(e=$(z(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=z($(e,r),r):"object"===i(e)&&(e=z(e,r)),"string"==typeof t?t=z($(t,r),r):"object"===i(t)&&(t=z(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?n.ESCAPE:o.ESCAPE,k)},e.unescapeComponent=q,Object.defineProperty(e,"__esModule",{value:!0})}(Eo.exports)),Eo.exports}function Io(){return wo||(wo=1,bo=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var i,a,s;if(Array.isArray(t)){if((i=t.length)!=r.length)return!1;for(a=i;0!=a--;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((i=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=i;0!=a--;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=i;0!=a--;){var o=s[a];if(!e(t[o],r[o]))return!1}return!0}return t!=t&&r!=r}),bo}function Oo(){if(Po)return xo;function e(e,t,r,i){var a=i?" !== ":" === ",s=i?" || ":" && ",o=i?"!":"",n=i?"":"!";switch(e){case"null":return t+a+"null";case"array":return o+"Array.isArray("+t+")";case"object":return"("+o+t+s+"typeof "+t+a+'"object"'+s+n+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+a+'"number"'+s+n+"("+t+" % 1)"+s+t+a+t+(r?s+o+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+a+'"'+e+'"'+(r?s+o+"isFinite("+t+")":"")+")";default:return"typeof "+t+a+'"'+e+'"'}}Po=1,xo={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:e,checkDataTypes:function(t,i,a){if(1===t.length)return e(t[0],i,a,!0);var s="",o=r(t);for(var n in o.array&&o.object&&(s=o.null?"(":"(!"+i+" || ",s+="typeof "+i+' !== "object")',delete o.null,delete o.array,delete o.object),o.number&&delete o.integer,o)s+=(s?" && ":"")+e(n,i,a,!0);return s},coerceToTypes:function(e,r){if(Array.isArray(r)){for(var i=[],a=0;a<r.length;a++){var s=r[a];(t[s]||"array"===e&&"array"===s)&&(i[i.length]=s)}if(i.length)return i}else{if(t[r])return[r];if("array"===e&&"array"===r)return["array"]}},toHash:r,getProperty:s,escapeQuotes:o,equal:Io(),ucs2length:_o?So:(_o=1,So=function(e){for(var t,r=0,i=e.length,a=0;a<i;)r++,(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<i&&56320==(64512&(t=e.charCodeAt(a)))&&a++;return r}),varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var i in e)if(i!=r&&t[i])return!0},schemaUnknownRules:function(e,t){if("boolean"!=typeof e)for(var r in e)if(!t[r])return r},toQuotedString:n,getPathExpr:function(e,t,r,i){return u(e,r?"'/' + "+t+(i?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):i?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){return u(e,n(r?"/"+d(t):s(t)))},getData:function(e,t,r){var i,a,o,n;if(""===e)return"rootData";if("/"==e[0]){if(!l.test(e))throw new Error("Invalid JSON-pointer: "+e);a=e,o="rootData"}else{if(!(n=e.match(c)))throw new Error("Invalid JSON-pointer: "+e);if(i=+n[1],"#"==(a=n[2])){if(i>=t)throw new Error("Cannot access property/index "+i+" levels up, current level is "+t);return r[t-i]}if(i>t)throw new Error("Cannot access data "+i+" levels up, current level is "+t);if(o="data"+(t-i||""),!a)return o}for(var u=o,d=a.split("/"),h=0;h<d.length;h++){var p=d[h];p&&(u+=" && "+(o+=s(f(p))))}return u},unescapeFragment:function(e){return f(decodeURIComponent(e))},unescapeJsonPointer:f,escapeFragment:function(e){return encodeURIComponent(d(e))},escapeJsonPointer:d};var t=r(["string","number","integer","boolean","null"]);function r(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var i=/^[a-z$_][a-z$_0-9]*$/i,a=/'|\\/g;function s(e){return"number"==typeof e?"["+e+"]":i.test(e)?"."+e:"['"+o(e)+"']"}function o(e){return e.replace(a,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function n(e){return"'"+o(e)+"'"}var l=/^\/(?:[^~]|~0|~1)*$/,c=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function u(e,t){return'""'==e?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function d(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function f(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}return xo}function jo(){if(Co)return Fo;Co=1;var e=Oo();return Fo=function(t){e.copy(t,this)}}var Ao,To,Lo,Do,$o,Uo,Bo,Mo,Ro,No,zo,Vo={exports:{}};function qo(){if(Lo)return To;Lo=1;var e=ko(),t=Io(),r=Oo(),i=jo(),a=function(){if(Ao)return Vo.exports;Ao=1;var e=Vo.exports=function(e,r,i){"function"==typeof r&&(i=r,r={}),t(r,"function"==typeof(i=r.cb||i)?i:i.pre||function(){},i.post||function(){},e,"",e)};function t(r,i,a,s,o,n,l,c,u,d){if(s&&"object"==typeof s&&!Array.isArray(s)){for(var f in i(s,o,n,l,c,u,d),s){var h=s[f];if(Array.isArray(h)){if(f in e.arrayKeywords)for(var p=0;p<h.length;p++)t(r,i,a,h[p],o+"/"+f+"/"+p,n,o,f,s,p)}else if(f in e.propsKeywords){if(h&&"object"==typeof h)for(var g in h)t(r,i,a,h[g],o+"/"+f+"/"+g.replace(/~/g,"~0").replace(/\//g,"~1"),n,o,f,s,g)}else(f in e.keywords||r.allKeys&&!(f in e.skipKeywords))&&t(r,i,a,h,o+"/"+f,n,o,f,s)}a(s,o,n,l,c,u,d)}}return e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0},Vo.exports}();function s(e,t,r){var a=this._refs[r];if("string"==typeof a){if(!this._refs[a])return s.call(this,e,t,a);a=this._refs[a]}if((a=a||this._schemas[r])instanceof i)return d(a.schema,this._opts.inlineRefs)?a.schema:a.validate||this._compile(a);var n,l,c,u=o.call(this,t,r);return u&&(n=u.schema,t=u.root,c=u.baseId),n instanceof i?l=n.validate||e.call(this,n.schema,t,void 0,c):void 0!==n&&(l=d(n,this._opts.inlineRefs)?n:e.call(this,n,t,void 0,c)),l}function o(t,r){var a=e.parse(r),s=g(a),o=p(this._getId(t.schema));if(0===Object.keys(t.schema).length||s!==o){var l=y(s),u=this._refs[l];if("string"==typeof u)return n.call(this,t,u,a);if(u instanceof i)u.validate||this._compile(u),t=u;else{if(!((u=this._schemas[l])instanceof i))return;if(u.validate||this._compile(u),l==y(r))return{schema:u,root:t,baseId:o};t=u}if(!t.schema)return;o=p(this._getId(t.schema))}return c.call(this,a,o,t.schema,t)}function n(e,t,r){var i=o.call(this,e,t);if(i){var a=i.schema,s=i.baseId;e=i.root;var n=this._getId(a);return n&&(s=v(s,n)),c.call(this,r,s,a,e)}}To=s,s.normalizeId=y,s.fullPath=p,s.url=v,s.ids=function(i){var s=y(this._getId(i)),o={"":s},n={"":p(s,!1)},l={},c=this;return a(i,{allKeys:!0},(function(i,a,s,u,d,f,h){if(""!==a){var p=c._getId(i),g=o[u],m=n[u]+"/"+d;if(void 0!==h&&(m+="/"+("number"==typeof h?h:r.escapeFragment(h))),"string"==typeof p){p=g=y(g?e.resolve(g,p):p);var v=c._refs[p];if("string"==typeof v&&(v=c._refs[v]),v&&v.schema){if(!t(i,v.schema))throw new Error('id "'+p+'" resolves to more than one schema')}else if(p!=y(m))if("#"==p[0]){if(l[p]&&!t(i,l[p]))throw new Error('id "'+p+'" resolves to more than one schema');l[p]=i}else c._refs[p]=m}o[a]=g,n[a]=m}})),l},s.inlineRef=d,s.schema=o;var l=r.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function c(e,t,i,a){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var s=e.fragment.split("/"),n=1;n<s.length;n++){var c=s[n];if(c){if(void 0===(i=i[c=r.unescapeFragment(c)]))break;var u;if(!l[c]&&((u=this._getId(i))&&(t=v(t,u)),i.$ref)){var d=v(t,i.$ref),f=o.call(this,a,d);f&&(i=f.schema,a=f.root,t=f.baseId)}}}return void 0!==i&&i!==a.schema?{schema:i,root:a,baseId:t}:void 0}}var u=r.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function d(e,t){return!1!==t&&(void 0===t||!0===t?f(e):t?h(e)<=t:void 0)}function f(e){var t;if(Array.isArray(e)){for(var r=0;r<e.length;r++)if("object"==typeof(t=e[r])&&!f(t))return!1}else for(var i in e){if("$ref"==i)return!1;if("object"==typeof(t=e[i])&&!f(t))return!1}return!0}function h(e){var t,r=0;if(Array.isArray(e)){for(var i=0;i<e.length;i++)if("object"==typeof(t=e[i])&&(r+=h(t)),r==1/0)return 1/0}else for(var a in e){if("$ref"==a)return 1/0;if(u[a])r++;else if("object"==typeof(t=e[a])&&(r+=h(t)+1),r==1/0)return 1/0}return r}function p(t,r){return!1!==r&&(t=y(t)),g(e.parse(t))}function g(t){return e.serialize(t).split("#")[0]+"#"}var m=/#\/?$/;function y(e){return e?e.replace(m,""):""}function v(t,r){return r=y(r),e.resolve(t,r)}return To}function Go(){if($o)return Do;$o=1;var e=qo();function t(r,i,a){this.message=a||t.message(r,i),this.missingRef=e.url(r,i),this.missingSchema=e.normalizeId(e.fullPath(this.missingRef))}function r(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}return Do={Validation:r((function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0})),MissingRef:r(t)},t.message=function(e,t){return"can't resolve reference "+t+" from id "+e},Do}function Qo(){return Bo||(Bo=1,Uo=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,i="boolean"==typeof t.cycles&&t.cycles,a=t.cmp&&(r=t.cmp,function(e){return function(t,i){var a={key:t,value:e[t]},s={key:i,value:e[i]};return r(a,s)}}),s=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var r,o;if(Array.isArray(t)){for(o="[",r=0;r<t.length;r++)r&&(o+=","),o+=e(t[r])||"null";return o+"]"}if(null===t)return"null";if(-1!==s.indexOf(t)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var n=s.push(t)-1,l=Object.keys(t).sort(a&&a(t));for(o="",r=0;r<l.length;r++){var c=l[r],u=e(t[c]);u&&(o&&(o+=","),o+=JSON.stringify(c)+":"+u)}return s.splice(n,1),"{"+o+"}"}}(e)}),Uo}function Ho(){return Ro||(Ro=1,Mo=function(e,t,r){var i="",a=!0===e.schema.$async,s=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),o=e.self._getId(e.schema);if(e.opts.strictKeywords){var n=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(n){var l="unknown keyword: "+n;if("log"!==e.opts.strictKeywords)throw new Error(l);e.logger.warn(l)}}if(e.isTop&&(i+=" var validate = ",a&&(e.async=!0,i+="async "),i+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",o&&(e.opts.sourceCode||e.opts.processCode)&&(i+=" /*# sourceURL="+o+" */ ")),"boolean"==typeof e.schema||!s&&!e.schema.$ref){t="false schema";var c=e.level,u=e.dataLevel,d=e.schema[t],f=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,g="data"+(u||""),m="valid"+c;if(!1===e.schema){e.isTop?p=!0:i+=" var "+m+" = false; ",(G=G||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'boolean schema is false' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),i+=" } "):i+=" {} ";var y=i;i=G.pop(),!e.compositeRule&&p?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?i+=a?" return data; ":" validate.errors = null; return true; ":i+=" var "+m+" = true; ";return e.isTop&&(i+=" }; return validate; "),i}if(e.isTop){var v=e.isTop;if(c=e.level=0,u=e.dataLevel=0,g="data",e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var b="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}i+=" var vErrors = null; ",i+=" var errors = 0;     ",i+=" if (rootData === undefined) rootData = data; "}else{if(c=e.level,g="data"+((u=e.dataLevel)||""),o&&(e.baseId=e.resolve.url(e.baseId,o)),a&&!e.async)throw new Error("async schema in sync schema");i+=" var errs_"+c+" = errors;"}m="valid"+c,p=!e.opts.allErrors;var w="",S="",_=e.schema.type,x=Array.isArray(_);if(_&&e.opts.nullable&&!0===e.schema.nullable&&(x?-1==_.indexOf("null")&&(_=_.concat("null")):"null"!=_&&(_=[_,"null"],x=!0)),x&&1==_.length&&(_=_[0],x=!1),e.schema.$ref&&s){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(s=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(i+=" "+e.RULES.all.$comment.code(e,"$comment")),_){if(e.opts.coerceTypes)var P=e.util.coerceToTypes(e.opts.coerceTypes,_);var F=e.RULES.types[_];if(P||x||!0===F||F&&!Y(F)){f=e.schemaPath+".type",h=e.errSchemaPath+"/type",f=e.schemaPath+".type",h=e.errSchemaPath+"/type";var C=x?"checkDataTypes":"checkDataType";if(i+=" if ("+e.util[C](_,g,e.opts.strictNumbers,!0)+") { ",P){var E="dataType"+c,k="coerced"+c;i+=" var "+E+" = typeof "+g+"; var "+k+" = undefined; ","array"==e.opts.coerceTypes&&(i+=" if ("+E+" == 'object' && Array.isArray("+g+") && "+g+".length == 1) { "+g+" = "+g+"[0]; "+E+" = typeof "+g+"; if ("+e.util.checkDataType(e.schema.type,g,e.opts.strictNumbers)+") "+k+" = "+g+"; } "),i+=" if ("+k+" !== undefined) ; ";var I=P;if(I)for(var O,j=-1,A=I.length-1;j<A;)"string"==(O=I[j+=1])?i+=" else if ("+E+" == 'number' || "+E+" == 'boolean') "+k+" = '' + "+g+"; else if ("+g+" === null) "+k+" = ''; ":"number"==O||"integer"==O?(i+=" else if ("+E+" == 'boolean' || "+g+" === null || ("+E+" == 'string' && "+g+" && "+g+" == +"+g+" ","integer"==O&&(i+=" && !("+g+" % 1)"),i+=")) "+k+" = +"+g+"; "):"boolean"==O?i+=" else if ("+g+" === 'false' || "+g+" === 0 || "+g+" === null) "+k+" = false; else if ("+g+" === 'true' || "+g+" === 1) "+k+" = true; ":"null"==O?i+=" else if ("+g+" === '' || "+g+" === 0 || "+g+" === false) "+k+" = null; ":"array"==e.opts.coerceTypes&&"array"==O&&(i+=" else if ("+E+" == 'string' || "+E+" == 'number' || "+E+" == 'boolean' || "+g+" == null) "+k+" = ["+g+"]; ");i+=" else {   ",(G=G||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",i+=x?""+_.join(","):""+_,i+="' } ",!1!==e.opts.messages&&(i+=" , message: 'should be ",i+=x?""+_.join(","):""+_,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),i+=" } "):i+=" {} ",y=i,i=G.pop(),!e.compositeRule&&p?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } if ("+k+" !== undefined) {  ";var T=u?"data"+(u-1||""):"parentData";i+=" "+g+" = "+k+"; ",u||(i+="if ("+T+" !== undefined)"),i+=" "+T+"["+(u?e.dataPathArr[u]:"parentDataProperty")+"] = "+k+"; } "}else(G=G||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",i+=x?""+_.join(","):""+_,i+="' } ",!1!==e.opts.messages&&(i+=" , message: 'should be ",i+=x?""+_.join(","):""+_,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),i+=" } "):i+=" {} ",y=i,i=G.pop(),!e.compositeRule&&p?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";i+=" } "}}if(e.schema.$ref&&!s)i+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",p&&(i+=" } if (errors === ",i+=v?"0":"errs_"+c,i+=") { ",S+="}");else{var L=e.RULES;if(L)for(var D=-1,$=L.length-1;D<$;)if(Y(F=L[D+=1])){if(F.type&&(i+=" if ("+e.util.checkDataType(F.type,g,e.opts.strictNumbers)+") { "),e.opts.useDefaults)if("object"==F.type&&e.schema.properties){d=e.schema.properties;var U=Object.keys(d);if(U)for(var B,M=-1,R=U.length-1;M<R;)if(void 0!==(V=d[B=U[M+=1]]).default){var N=g+e.util.getProperty(B);if(e.compositeRule){if(e.opts.strictDefaults){if(b="default is ignored for: "+N,"log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else i+=" if ("+N+" === undefined ","empty"==e.opts.useDefaults&&(i+=" || "+N+" === null || "+N+" === '' "),i+=" ) "+N+" = ","shared"==e.opts.useDefaults?i+=" "+e.useDefault(V.default)+" ":i+=" "+JSON.stringify(V.default)+" ",i+="; "}}else if("array"==F.type&&Array.isArray(e.schema.items)){var z=e.schema.items;if(z){j=-1;for(var V,q=z.length-1;j<q;)if(void 0!==(V=z[j+=1]).default)if(N=g+"["+j+"]",e.compositeRule){if(e.opts.strictDefaults){if(b="default is ignored for: "+N,"log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else i+=" if ("+N+" === undefined ","empty"==e.opts.useDefaults&&(i+=" || "+N+" === null || "+N+" === '' "),i+=" ) "+N+" = ","shared"==e.opts.useDefaults?i+=" "+e.useDefault(V.default)+" ":i+=" "+JSON.stringify(V.default)+" ",i+="; "}}var G,Q=F.rules;if(Q)for(var H,K=-1,W=Q.length-1;K<W;)if(J(H=Q[K+=1])){var X=H.code(e,H.keyword,F.type);X&&(i+=" "+X+" ",p&&(w+="}"))}if(p&&(i+=" "+w+" ",w=""),F.type&&(i+=" } ",_&&_===F.type&&!P))i+=" else { ",f=e.schemaPath+".type",h=e.errSchemaPath+"/type",(G=G||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",i+=x?""+_.join(","):""+_,i+="' } ",!1!==e.opts.messages&&(i+=" , message: 'should be ",i+=x?""+_.join(","):""+_,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),i+=" } "):i+=" {} ",y=i,i=G.pop(),!e.compositeRule&&p?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ";p&&(i+=" if (errors === ",i+=v?"0":"errs_"+c,i+=") { ",S+="}")}}function Y(e){for(var t=e.rules,r=0;r<t.length;r++)if(J(t[r]))return!0}function J(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,i=0;i<r.length;i++)if(void 0!==e.schema[r[i]])return!0}(t)}return p&&(i+=" "+S+" "),v?(a?(i+=" if (errors === 0) return data;           ",i+=" else throw new ValidationError(vErrors); "):(i+=" validate.errors = vErrors; ",i+=" return errors === 0;       "),i+=" }; return validate;"):i+=" var "+m+" = errors === errs_"+c+";",i}),Mo}var Ko,Wo,Xo,Yo,Jo,Zo,en,tn,rn,an,sn,on,nn,ln,cn,un,dn,fn,hn,pn,gn,mn,yn,vn,bn,wn,Sn,_n,xn,Pn,Fn,Cn,En,kn,In,On,jn,An,Tn,Ln,Dn,$n,Un,Bn,Mn,Rn,Nn,zn,Vn,qn,Gn,Qn,Hn,Kn,Wn,Xn,Yn,Jn,Zn,el={exports:{}};function tl(){return Sn||(Sn=1,wn=function(e,t,r){var i,a=" ",s=e.level,o=e.dataLevel,n=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),f=e.opts.$data&&n&&n.$data;f?(a+=" var schema"+s+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",i="schema"+s):i=n;var h="maximum"==t,p=h?"exclusiveMaximum":"exclusiveMinimum",g=e.schema[p],m=e.opts.$data&&g&&g.$data,y=h?"<":">",v=h?">":"<",b=void 0;if(!f&&"number"!=typeof n&&void 0!==n)throw new Error(t+" must be number");if(!m&&void 0!==g&&"number"!=typeof g&&"boolean"!=typeof g)throw new Error(p+" must be number or boolean");if(m){var w,S=e.util.getData(g.$data,o,e.dataPathArr),_="exclusive"+s,x="exclType"+s,P="exclIsNumber"+s,F="' + "+(E="op"+s)+" + '";a+=" var schemaExcl"+s+" = "+S+"; ",a+=" var "+_+"; var "+x+" = typeof "+(S="schemaExcl"+s)+"; if ("+x+" != 'boolean' && "+x+" != 'undefined' && "+x+" != 'number') { ",b=p,(w=w||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(b||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: '"+p+" should be boolean' "),e.opts.verbose&&(a+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var C=a;a=w.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+C+"]); ":a+=" validate.errors = ["+C+"]; return false; ":a+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else if ( ",f&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),a+=" "+x+" == 'number' ? ( ("+_+" = "+i+" === undefined || "+S+" "+y+"= "+i+") ? "+d+" "+v+"= "+S+" : "+d+" "+v+" "+i+" ) : ( ("+_+" = "+S+" === true) ? "+d+" "+v+"= "+i+" : "+d+" "+v+" "+i+" ) || "+d+" !== "+d+") { var op"+s+" = "+_+" ? '"+y+"' : '"+y+"='; ",void 0===n&&(b=p,c=e.errSchemaPath+"/"+p,i=S,f=m)}else if(F=y,(P="number"==typeof g)&&f){var E="'"+F+"'";a+=" if ( ",f&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),a+=" ( "+i+" === undefined || "+g+" "+y+"= "+i+" ? "+d+" "+v+"= "+g+" : "+d+" "+v+" "+i+" ) || "+d+" !== "+d+") { "}else P&&void 0===n?(_=!0,b=p,c=e.errSchemaPath+"/"+p,i=g,v+="="):(P&&(i=Math[h?"min":"max"](g,n)),g===(!P||i)?(_=!0,b=p,c=e.errSchemaPath+"/"+p,v+="="):(_=!1,F+="=")),E="'"+F+"'",a+=" if ( ",f&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),a+=" "+d+" "+v+" "+i+" || "+d+" !== "+d+") { ";return b=b||t,(w=w||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(b||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { comparison: "+E+", limit: "+i+", exclusive: "+_+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be "+F+" ",a+=f?"' + "+i:i+"'"),e.opts.verbose&&(a+=" , schema:  ",a+=f?"validate.schema"+l:""+n,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ",C=a,a=w.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+C+"]); ":a+=" validate.errors = ["+C+"]; return false; ":a+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",u&&(a+=" else { "),a}),wn}function rl(){return xn||(xn=1,_n=function(e,t,r){var i,a=" ",s=e.level,o=e.dataLevel,n=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),f=e.opts.$data&&n&&n.$data;if(f?(a+=" var schema"+s+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",i="schema"+s):i=n,!f&&"number"!=typeof n)throw new Error(t+" must be number");a+="if ( ",f&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),a+=" "+d+".length "+("maxItems"==t?">":"<")+" "+i+") { ";var h=t,p=p||[];p.push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(h||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+i+" } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have ",a+="maxItems"==t?"more":"fewer",a+=" than ",a+=f?"' + "+i+" + '":""+n,a+=" items' "),e.opts.verbose&&(a+=" , schema:  ",a+=f?"validate.schema"+l:""+n,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var g=a;return a=p.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+g+"]); ":a+=" validate.errors = ["+g+"]; return false; ":a+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",u&&(a+=" else { "),a}),_n}function il(){return Fn||(Fn=1,Pn=function(e,t,r){var i,a=" ",s=e.level,o=e.dataLevel,n=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),f=e.opts.$data&&n&&n.$data;if(f?(a+=" var schema"+s+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",i="schema"+s):i=n,!f&&"number"!=typeof n)throw new Error(t+" must be number");var h="maxLength"==t?">":"<";a+="if ( ",f&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),!1===e.opts.unicode?a+=" "+d+".length ":a+=" ucs2length("+d+") ",a+=" "+h+" "+i+") { ";var p=t,g=g||[];g.push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(p||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+i+" } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT be ",a+="maxLength"==t?"longer":"shorter",a+=" than ",a+=f?"' + "+i+" + '":""+n,a+=" characters' "),e.opts.verbose&&(a+=" , schema:  ",a+=f?"validate.schema"+l:""+n,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var m=a;return a=g.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+m+"]); ":a+=" validate.errors = ["+m+"]; return false; ":a+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",u&&(a+=" else { "),a}),Pn}function al(){return En||(En=1,Cn=function(e,t,r){var i,a=" ",s=e.level,o=e.dataLevel,n=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),f=e.opts.$data&&n&&n.$data;if(f?(a+=" var schema"+s+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",i="schema"+s):i=n,!f&&"number"!=typeof n)throw new Error(t+" must be number");a+="if ( ",f&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),a+=" Object.keys("+d+").length "+("maxProperties"==t?">":"<")+" "+i+") { ";var h=t,p=p||[];p.push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(h||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+i+" } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have ",a+="maxProperties"==t?"more":"fewer",a+=" than ",a+=f?"' + "+i+" + '":""+n,a+=" properties' "),e.opts.verbose&&(a+=" , schema:  ",a+=f?"validate.schema"+l:""+n,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var g=a;return a=p.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+g+"]); ":a+=" validate.errors = ["+g+"]; return false; ":a+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",u&&(a+=" else { "),a}),Cn}var sl,ol,nl,ll,cl={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};var ul,dl,fl,hl={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1},pl=function(){if(dl)return ul;dl=1;var e=function(){if(zo)return No;zo=1;var e=qo(),t=Oo(),r=Go(),i=Qo(),a=Ho(),s=t.ucs2length,o=Io(),n=r.Validation;function l(e,t,r){var i=u.call(this,e,t,r);return i>=0?{index:i,compiling:!0}:(i=this._compilations.length,this._compilations[i]={schema:e,root:t,baseId:r},{index:i,compiling:!1})}function c(e,t,r){var i=u.call(this,e,t,r);i>=0&&this._compilations.splice(i,1)}function u(e,t,r){for(var i=0;i<this._compilations.length;i++){var a=this._compilations[i];if(a.schema==e&&a.root==t&&a.baseId==r)return i}return-1}function d(e,r){return"var pattern"+e+" = new RegExp("+t.toQuotedString(r[e])+");"}function f(e){return"var default"+e+" = defaults["+e+"];"}function h(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function p(e){return"var customRule"+e+" = customRules["+e+"];"}function g(e,t){if(!e.length)return"";for(var r="",i=0;i<e.length;i++)r+=t(i,e);return r}return No=function u(m,y,v,b){var w=this,S=this._opts,_=[void 0],x={},P=[],F={},C=[],E={},k=[];y=y||{schema:m,refVal:_,refs:x};var I=l.call(this,m,y,b),O=this._compilations[I.index];if(I.compiling)return O.callValidate=function e(){var t=O.validate,r=t.apply(this,arguments);return e.errors=t.errors,r};var j=this._formats,A=this.RULES;try{var T=D(m,y,v,b);O.validate=T;var L=O.callValidate;return L&&(L.schema=T.schema,L.errors=null,L.refs=T.refs,L.refVal=T.refVal,L.root=T.root,L.$async=T.$async,S.sourceCode&&(L.source=T.source)),T}finally{c.call(this,m,y,b)}function D(i,l,c,m){var v=!l||l&&l.schema==i;if(l.schema!=y.schema)return u.call(w,i,l,c,m);var b,F=!0===i.$async,E=a({isTop:!0,schema:i,isRoot:v,baseId:m,root:l,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:r.MissingRef,RULES:A,validate:a,util:t,resolve:e,resolveRef:$,usePattern:M,useDefault:R,useCustomRule:N,opts:S,formats:j,logger:w.logger,self:w});E=g(_,h)+g(P,d)+g(C,f)+g(k,p)+E,S.processCode&&(E=S.processCode(E,i));try{b=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",E)(w,A,j,y,_,C,k,o,s,n),_[0]=b}catch(e){throw w.logger.error("Error compiling schema, function code:",E),e}return b.schema=i,b.errors=null,b.refs=x,b.refVal=_,b.root=v?b:l,F&&(b.$async=!0),!0===S.sourceCode&&(b.source={code:E,patterns:P,defaults:C}),b}function $(t,r,i){r=e.url(t,r);var a,s,o=x[r];if(void 0!==o)return B(a=_[o],s="refVal["+o+"]");if(!i&&y.refs){var n=y.refs[r];if(void 0!==n)return B(a=y.refVal[n],s=U(r,a))}s=U(r);var l=e.call(w,D,y,r);if(void 0===l){var c=v&&v[r];c&&(l=e.inlineRef(c,S.inlineRefs)?c:u.call(w,c,y,v,t))}if(void 0!==l)return function(e,t){var r=x[e];_[r]=t}(r,l),B(l,s);!function(e){delete x[e]}(r)}function U(e,t){var r=_.length;return _[r]=t,x[e]=r,"refVal"+r}function B(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function M(e){var t=F[e];return void 0===t&&(t=F[e]=P.length,P[t]=e),"pattern"+t}function R(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return t.toQuotedString(e);case"object":if(null===e)return"null";var r=i(e),a=E[r];return void 0===a&&(a=E[r]=C.length,C[a]=e),"default"+a}}function N(e,t,r,i){if(!1!==w._opts.validateSchema){var a=e.definition.dependencies;if(a&&!a.every((function(e){return Object.prototype.hasOwnProperty.call(r,e)})))throw new Error("parent schema must have all required keywords: "+a.join(","));var s=e.definition.validateSchema;if(s&&!s(t)){var o="keyword schema is invalid: "+w.errorsText(s.errors);if("log"!=w._opts.validateSchema)throw new Error(o);w.logger.error(o)}}var n,l=e.definition.compile,c=e.definition.inline,u=e.definition.macro;if(l)n=l.call(w,t,r,i);else if(u)n=u.call(w,t,r,i),!1!==S.validateSchema&&w.validateSchema(n,!0);else if(c)n=c.call(w,i,e.keyword,t,r);else if(!(n=e.definition.validate))return;if(void 0===n)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var d=k.length;return k[d]=n,{code:"customRule"+d,validate:n}}},No}(),t=qo(),r=function(){if(Ko)return el.exports;Ko=1;var e=el.exports=function(){this._cache={}};return e.prototype.put=function(e,t){this._cache[e]=t},e.prototype.get=function(e){return this._cache[e]},e.prototype.del=function(e){delete this._cache[e]},e.prototype.clear=function(){this._cache={}},el.exports}(),i=jo(),a=Qo(),s=function(){if(Xo)return Wo;Xo=1;var e=Oo(),t=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,r=[0,31,28,31,30,31,30,31,31,30,31,30,31],i=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,a=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,s=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,o=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,n=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,l=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,c=/^(?:\/(?:[^~/]|~0|~1)*)*$/,u=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,d=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function f(t){return t="full"==t?"full":"fast",e.copy(f[t])}function h(e){var i=e.match(t);if(!i)return!1;var a=+i[1],s=+i[2],o=+i[3];return s>=1&&s<=12&&o>=1&&o<=(2==s&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(a)?29:r[s])}function p(e,t){var r=e.match(i);if(!r)return!1;var a=r[1],s=r[2],o=r[3],n=r[5];return(a<=23&&s<=59&&o<=59||23==a&&59==s&&60==o)&&(!t||n)}Wo=f,f.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":o,url:n,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:a,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:v,uuid:l,"json-pointer":c,"json-pointer-uri-fragment":u,"relative-json-pointer":d},f.full={date:h,time:p,"date-time":function(e){var t=e.split(g);return 2==t.length&&h(t[0])&&p(t[1],!0)},uri:function(e){return m.test(e)&&s.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":o,url:n,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:a,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:v,uuid:l,"json-pointer":c,"json-pointer-uri-fragment":u,"relative-json-pointer":d};var g=/t|\s/i,m=/\/|:/,y=/[^\\]\\Z/;function v(e){if(y.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}return Wo}(),o=function(){if(Hn)return Qn;Hn=1;var e=(Gn||(Gn=1,qn={$ref:(Jo||(Jo=1,Yo=function(e,t,r){var i,a,s=" ",o=e.level,n=e.dataLevel,l=e.schema[t],c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),f="valid"+o;if("#"==l||"#/"==l)e.isRoot?(i=e.async,a="validate"):(i=!0===e.root.schema.$async,a="root.refVal[0]");else{var h=e.resolveRef(e.baseId,l,e.isRoot);if(void 0===h){var p=e.MissingRefError.message(e.baseId,l);if("fail"==e.opts.missingRefs){e.logger.error(p),(v=v||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { ref: '"+e.util.escapeQuotes(l)+"' } ",!1!==e.opts.messages&&(s+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(l)+"' "),e.opts.verbose&&(s+=" , schema: "+e.util.toQuotedString(l)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var g=s;s=v.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+g+"]); ":s+=" validate.errors = ["+g+"]; return false; ":s+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(s+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,l,p);e.logger.warn(p),u&&(s+=" if (true) { ")}}else if(h.inline){var m=e.util.copy(e);m.level++;var y="valid"+m.level;m.schema=h.schema,m.schemaPath="",m.errSchemaPath=l,s+=" "+e.validate(m).replace(/validate\.schema/g,h.code)+" ",u&&(s+=" if ("+y+") { ")}else i=!0===h.$async||e.async&&!1!==h.$async,a=h.code}if(a){var v;(v=v||[]).push(s),s="",e.opts.passContext?s+=" "+a+".call(this, ":s+=" "+a+"( ",s+=" "+d+", (dataPath || '')",'""'!=e.errorPath&&(s+=" + "+e.errorPath);var b=s+=" , "+(n?"data"+(n-1||""):"parentData")+" , "+(n?e.dataPathArr[n]:"parentDataProperty")+", rootData)  ";if(s=v.pop(),i){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(s+=" var "+f+"; "),s+=" try { await "+b+"; ",u&&(s+=" "+f+" = true; "),s+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(s+=" "+f+" = false; "),s+=" } ",u&&(s+=" if ("+f+") { ")}else s+=" if (!"+b+") { if (vErrors === null) vErrors = "+a+".errors; else vErrors = vErrors.concat("+a+".errors); errors = vErrors.length; } ",u&&(s+=" else { ")}return s}),Yo),allOf:(en||(en=1,Zo=function(e,t,r){var i=" ",a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),o=e.errSchemaPath+"/"+t,n=!e.opts.allErrors,l=e.util.copy(e),c="";l.level++;var u="valid"+l.level,d=l.baseId,f=!0,h=a;if(h)for(var p,g=-1,m=h.length-1;g<m;)p=h[g+=1],(e.opts.strictKeywords?"object"==typeof p&&Object.keys(p).length>0||!1===p:e.util.schemaHasRules(p,e.RULES.all))&&(f=!1,l.schema=p,l.schemaPath=s+"["+g+"]",l.errSchemaPath=o+"/"+g,i+="  "+e.validate(l)+" ",l.baseId=d,n&&(i+=" if ("+u+") { ",c+="}"));return n&&(i+=f?" if (true) { ":" "+c.slice(0,-1)+" "),i}),Zo),anyOf:(rn||(rn=1,tn=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+a,f="errs__"+a,h=e.util.copy(e),p="";h.level++;var g="valid"+h.level,m=o.every((function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0||!1===t:e.util.schemaHasRules(t,e.RULES.all)}));if(m){var y=h.baseId;i+=" var "+f+" = errors; var "+d+" = false;  ";var v=e.compositeRule;e.compositeRule=h.compositeRule=!0;var b=o;if(b)for(var w,S=-1,_=b.length-1;S<_;)w=b[S+=1],h.schema=w,h.schemaPath=n+"["+S+"]",h.errSchemaPath=l+"/"+S,i+="  "+e.validate(h)+" ",h.baseId=y,i+=" "+d+" = "+d+" || "+g+"; if (!"+d+") { ",p+="}";e.compositeRule=h.compositeRule=v,i+=" "+p+" if (!"+d+") {   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" } else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } ")}else c&&(i+=" if (true) { ");return i}),tn),$comment:(sn||(sn=1,an=function(e,t,r){var i=" ",a=e.schema[t],s=e.errSchemaPath+"/"+t;e.opts.allErrors;var o=e.util.toQuotedString(a);return!0===e.opts.$comment?i+=" console.log("+o+");":"function"==typeof e.opts.$comment&&(i+=" self._opts.$comment("+o+", "+e.util.toQuotedString(s)+", validate.root.schema);"),i}),an),const:(nn||(nn=1,on=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+a,f=e.opts.$data&&o&&o.$data;f&&(i+=" var schema"+a+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; "),f||(i+=" var schema"+a+" = validate.schema"+n+";"),i+="var "+d+" = equal("+u+", schema"+a+"); if (!"+d+") {   ";var h=h||[];h.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValue: schema"+a+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be equal to constant' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var p=i;return i=h.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+p+"]); ":i+=" validate.errors = ["+p+"]; return false; ":i+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",c&&(i+=" else { "),i}),on),contains:(cn||(cn=1,ln=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+a,f="errs__"+a,h=e.util.copy(e);h.level++;var p="valid"+h.level,g="i"+a,m=h.dataLevel=e.dataLevel+1,y="data"+m,v=e.baseId,b=e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0||!1===o:e.util.schemaHasRules(o,e.RULES.all);if(i+="var "+f+" = errors;var "+d+";",b){var w=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=o,h.schemaPath=n,h.errSchemaPath=l,i+=" var "+p+" = false; for (var "+g+" = 0; "+g+" < "+u+".length; "+g+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);var S=u+"["+g+"]";h.dataPathArr[m]=g;var _=e.validate(h);h.baseId=v,e.util.varOccurences(_,y)<2?i+=" "+e.util.varReplace(_,y,S)+" ":i+=" var "+y+" = "+S+"; "+_+" ",i+=" if ("+p+") break; }  ",e.compositeRule=h.compositeRule=w,i+="  if (!"+p+") {"}else i+=" if ("+u+".length == 0) {";var x=x||[];x.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should contain a valid item' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var P=i;return i=x.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+P+"]); ":i+=" validate.errors = ["+P+"]; return false; ":i+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { ",b&&(i+="  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } "),e.opts.allErrors&&(i+=" } "),i}),ln),dependencies:(dn||(dn=1,un=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="errs__"+a,f=e.util.copy(e),h="";f.level++;var p="valid"+f.level,g={},m={},y=e.opts.ownProperties;for(S in o)if("__proto__"!=S){var v=o[S],b=Array.isArray(v)?m:g;b[S]=v}i+="var "+d+" = errors;";var w=e.errorPath;for(var S in i+="var missing"+a+";",m)if((b=m[S]).length){if(i+=" if ( "+u+e.util.getProperty(S)+" !== undefined ",y&&(i+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(S)+"') "),c){i+=" && ( ";var _=b;if(_)for(var x=-1,P=_.length-1;x<P;)O=_[x+=1],x&&(i+=" || "),i+=" ( ( "+(L=u+(T=e.util.getProperty(O)))+" === undefined ",y&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(O)+"') "),i+=") && (missing"+a+" = "+e.util.toQuotedString(e.opts.jsonPointers?O:T)+") ) ";i+=")) {  ";var F="missing"+a,C="' + "+F+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,F,!0):w+" + "+F);var E=E||[];E.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(S)+"', missingProperty: '"+C+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should have ",1==b.length?i+="property "+e.util.escapeQuotes(b[0]):i+="properties "+e.util.escapeQuotes(b.join(", ")),i+=" when property "+e.util.escapeQuotes(S)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var k=i;i=E.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+k+"]); ":i+=" validate.errors = ["+k+"]; return false; ":i+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{i+=" ) { ";var I=b;if(I)for(var O,j=-1,A=I.length-1;j<A;){O=I[j+=1];var T=e.util.getProperty(O),L=(C=e.util.escapeQuotes(O),u+T);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,O,e.opts.jsonPointers)),i+=" if ( "+L+" === undefined ",y&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(O)+"') "),i+=") {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(S)+"', missingProperty: '"+C+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should have ",1==b.length?i+="property "+e.util.escapeQuotes(b[0]):i+="properties "+e.util.escapeQuotes(b.join(", ")),i+=" when property "+e.util.escapeQuotes(S)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}i+=" }   ",c&&(h+="}",i+=" else { ")}e.errorPath=w;var D=f.baseId;for(var S in g)v=g[S],(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0||!1===v:e.util.schemaHasRules(v,e.RULES.all))&&(i+=" "+p+" = true; if ( "+u+e.util.getProperty(S)+" !== undefined ",y&&(i+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(S)+"') "),i+=") { ",f.schema=v,f.schemaPath=n+e.util.getProperty(S),f.errSchemaPath=l+"/"+e.util.escapeFragment(S),i+="  "+e.validate(f)+" ",f.baseId=D,i+=" }  ",c&&(i+=" if ("+p+") { ",h+="}"));return c&&(i+="   "+h+" if ("+d+" == errors) {"),i}),un),enum:(hn||(hn=1,fn=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+a,f=e.opts.$data&&o&&o.$data;f&&(i+=" var schema"+a+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ");var h="i"+a,p="schema"+a;f||(i+=" var "+p+" = validate.schema"+n+";"),i+="var "+d+";",f&&(i+=" if (schema"+a+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+a+")) "+d+" = false; else {"),i+=d+" = false;for (var "+h+"=0; "+h+"<"+p+".length; "+h+"++) if (equal("+u+", "+p+"["+h+"])) { "+d+" = true; break; }",f&&(i+="  }  "),i+=" if (!"+d+") {   ";var g=g||[];g.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValues: schema"+a+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var m=i;return i=g.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",c&&(i+=" else { "),i}),fn),format:(gn||(gn=1,pn=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||"");if(!1===e.opts.format)return c&&(i+=" if (true) { "),i;var d,f=e.opts.$data&&o&&o.$data;f?(i+=" var schema"+a+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ",d="schema"+a):d=o;var h=e.opts.unknownFormats,p=Array.isArray(h);if(f)i+=" var "+(g="format"+a)+" = formats["+d+"]; var "+(m="isObject"+a)+" = typeof "+g+" == 'object' && !("+g+" instanceof RegExp) && "+g+".validate; var "+(y="formatType"+a)+" = "+m+" && "+g+".type || 'string'; if ("+m+") { ",e.async&&(i+=" var async"+a+" = "+g+".async; "),i+=" "+g+" = "+g+".validate; } if (  ",f&&(i+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),i+=" (","ignore"!=h&&(i+=" ("+d+" && !"+g+" ",p&&(i+=" && self._opts.unknownFormats.indexOf("+d+") == -1 "),i+=") || "),i+=" ("+g+" && "+y+" == '"+r+"' && !(typeof "+g+" == 'function' ? ",e.async?i+=" (async"+a+" ? await "+g+"("+u+") : "+g+"("+u+")) ":i+=" "+g+"("+u+") ",i+=" : "+g+".test("+u+"))))) {";else{var g;if(!(g=e.formats[o])){if("ignore"==h)return e.logger.warn('unknown format "'+o+'" ignored in schema at path "'+e.errSchemaPath+'"'),c&&(i+=" if (true) { "),i;if(p&&h.indexOf(o)>=0)return c&&(i+=" if (true) { "),i;throw new Error('unknown format "'+o+'" is used in schema at path "'+e.errSchemaPath+'"')}var m,y=(m="object"==typeof g&&!(g instanceof RegExp)&&g.validate)&&g.type||"string";if(m){var v=!0===g.async;g=g.validate}if(y!=r)return c&&(i+=" if (true) { "),i;if(v){if(!e.async)throw new Error("async format in sync schema");i+=" if (!(await "+(b="formats"+e.util.getProperty(o)+".validate")+"("+u+"))) { "}else{i+=" if (! ";var b="formats"+e.util.getProperty(o);m&&(b+=".validate"),i+="function"==typeof g?" "+b+"("+u+") ":" "+b+".test("+u+") ",i+=") { "}}var w=w||[];w.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { format:  ",i+=f?""+d:""+e.util.toQuotedString(o),i+="  } ",!1!==e.opts.messages&&(i+=" , message: 'should match format \"",i+=f?"' + "+d+" + '":""+e.util.escapeQuotes(o),i+="\"' "),e.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+n:""+e.util.toQuotedString(o),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var S=i;return i=w.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+S+"]); ":i+=" validate.errors = ["+S+"]; return false; ":i+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",c&&(i+=" else { "),i}),pn),if:(yn||(yn=1,mn=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+a,f="errs__"+a,h=e.util.copy(e);h.level++;var p="valid"+h.level,g=e.schema.then,m=e.schema.else,y=void 0!==g&&(e.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0||!1===g:e.util.schemaHasRules(g,e.RULES.all)),v=void 0!==m&&(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0||!1===m:e.util.schemaHasRules(m,e.RULES.all)),b=h.baseId;if(y||v){var w;h.createErrors=!1,h.schema=o,h.schemaPath=n,h.errSchemaPath=l,i+=" var "+f+" = errors; var "+d+" = true;  ";var S=e.compositeRule;e.compositeRule=h.compositeRule=!0,i+="  "+e.validate(h)+" ",h.baseId=b,h.createErrors=!0,i+="  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; }  ",e.compositeRule=h.compositeRule=S,y?(i+=" if ("+p+") {  ",h.schema=e.schema.then,h.schemaPath=e.schemaPath+".then",h.errSchemaPath=e.errSchemaPath+"/then",i+="  "+e.validate(h)+" ",h.baseId=b,i+=" "+d+" = "+p+"; ",y&&v?i+=" var "+(w="ifClause"+a)+" = 'then'; ":w="'then'",i+=" } ",v&&(i+=" else { ")):i+=" if (!"+p+") { ",v&&(h.schema=e.schema.else,h.schemaPath=e.schemaPath+".else",h.errSchemaPath=e.errSchemaPath+"/else",i+="  "+e.validate(h)+" ",h.baseId=b,i+=" "+d+" = "+p+"; ",y&&v?i+=" var "+(w="ifClause"+a)+" = 'else'; ":w="'else'",i+=" } "),i+=" if (!"+d+") {   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { failingKeyword: "+w+" } ",!1!==e.opts.messages&&(i+=" , message: 'should match \"' + "+w+" + '\" schema' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" }   ",c&&(i+=" else { ")}else c&&(i+=" if (true) { ");return i}),mn),items:(bn||(bn=1,vn=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+a,f="errs__"+a,h=e.util.copy(e),p="";h.level++;var g="valid"+h.level,m="i"+a,y=h.dataLevel=e.dataLevel+1,v="data"+y,b=e.baseId;if(i+="var "+f+" = errors;var "+d+";",Array.isArray(o)){var w=e.schema.additionalItems;if(!1===w){i+=" "+d+" = "+u+".length <= "+o.length+"; ";var S=l;l=e.errSchemaPath+"/additionalItems",i+="  if (!"+d+") {   ";var _=_||[];_.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+o.length+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have more than "+o.length+" items' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var x=i;i=_.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+x+"]); ":i+=" validate.errors = ["+x+"]; return false; ":i+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",l=S,c&&(p+="}",i+=" else { ")}var P=o;if(P)for(var F,C=-1,E=P.length-1;C<E;)if(F=P[C+=1],e.opts.strictKeywords?"object"==typeof F&&Object.keys(F).length>0||!1===F:e.util.schemaHasRules(F,e.RULES.all)){i+=" "+g+" = true; if ("+u+".length > "+C+") { ";var k=u+"["+C+"]";h.schema=F,h.schemaPath=n+"["+C+"]",h.errSchemaPath=l+"/"+C,h.errorPath=e.util.getPathExpr(e.errorPath,C,e.opts.jsonPointers,!0),h.dataPathArr[y]=C;var I=e.validate(h);h.baseId=b,e.util.varOccurences(I,v)<2?i+=" "+e.util.varReplace(I,v,k)+" ":i+=" var "+v+" = "+k+"; "+I+" ",i+=" }  ",c&&(i+=" if ("+g+") { ",p+="}")}"object"==typeof w&&(e.opts.strictKeywords?"object"==typeof w&&Object.keys(w).length>0||!1===w:e.util.schemaHasRules(w,e.RULES.all))&&(h.schema=w,h.schemaPath=e.schemaPath+".additionalItems",h.errSchemaPath=e.errSchemaPath+"/additionalItems",i+=" "+g+" = true; if ("+u+".length > "+o.length+") {  for (var "+m+" = "+o.length+"; "+m+" < "+u+".length; "+m+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0),k=u+"["+m+"]",h.dataPathArr[y]=m,I=e.validate(h),h.baseId=b,e.util.varOccurences(I,v)<2?i+=" "+e.util.varReplace(I,v,k)+" ":i+=" var "+v+" = "+k+"; "+I+" ",c&&(i+=" if (!"+g+") break; "),i+=" } }  ",c&&(i+=" if ("+g+") { ",p+="}"))}else(e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0||!1===o:e.util.schemaHasRules(o,e.RULES.all))&&(h.schema=o,h.schemaPath=n,h.errSchemaPath=l,i+="  for (var "+m+" = 0; "+m+" < "+u+".length; "+m+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0),k=u+"["+m+"]",h.dataPathArr[y]=m,I=e.validate(h),h.baseId=b,e.util.varOccurences(I,v)<2?i+=" "+e.util.varReplace(I,v,k)+" ":i+=" var "+v+" = "+k+"; "+I+" ",c&&(i+=" if (!"+g+") break; "),i+=" }");return c&&(i+=" "+p+" if ("+f+" == errors) {"),i}),vn),maximum:tl(),minimum:tl(),maxItems:rl(),minItems:rl(),maxLength:il(),minLength:il(),maxProperties:al(),minProperties:al(),multipleOf:(In||(In=1,kn=function(e,t,r){var i,a=" ",s=e.level,o=e.dataLevel,n=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),f=e.opts.$data&&n&&n.$data;if(f?(a+=" var schema"+s+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",i="schema"+s):i=n,!f&&"number"!=typeof n)throw new Error(t+" must be number");a+="var division"+s+";if (",f&&(a+=" "+i+" !== undefined && ( typeof "+i+" != 'number' || "),a+=" (division"+s+" = "+d+" / "+i+", ",e.opts.multipleOfPrecision?a+=" Math.abs(Math.round(division"+s+") - division"+s+") > 1e-"+e.opts.multipleOfPrecision+" ":a+=" division"+s+" !== parseInt(division"+s+") ",a+=" ) ",f&&(a+="  )  "),a+=" ) {   ";var h=h||[];h.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { multipleOf: "+i+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be multiple of ",a+=f?"' + "+i:i+"'"),e.opts.verbose&&(a+=" , schema:  ",a+=f?"validate.schema"+l:""+n,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var p=a;return a=h.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+p+"]); ":a+=" validate.errors = ["+p+"]; return false; ":a+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",u&&(a+=" else { "),a}),kn),not:(jn||(jn=1,On=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="errs__"+a,f=e.util.copy(e);f.level++;var h="valid"+f.level;if(e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0||!1===o:e.util.schemaHasRules(o,e.RULES.all)){f.schema=o,f.schemaPath=n,f.errSchemaPath=l,i+=" var "+d+" = errors;  ";var p,g=e.compositeRule;e.compositeRule=f.compositeRule=!0,f.createErrors=!1,f.opts.allErrors&&(p=f.opts.allErrors,f.opts.allErrors=!1),i+=" "+e.validate(f)+" ",f.createErrors=!0,p&&(f.opts.allErrors=p),e.compositeRule=f.compositeRule=g,i+=" if ("+h+") {   ";var m=m||[];m.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var y=i;i=m.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } ")}else i+="  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(i+=" if (false) { ");return i}),On),oneOf:(Tn||(Tn=1,An=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+a,f="errs__"+a,h=e.util.copy(e),p="";h.level++;var g="valid"+h.level,m=h.baseId,y="prevValid"+a,v="passingSchemas"+a;i+="var "+f+" = errors , "+y+" = false , "+d+" = false , "+v+" = null; ";var b=e.compositeRule;e.compositeRule=h.compositeRule=!0;var w=o;if(w)for(var S,_=-1,x=w.length-1;_<x;)S=w[_+=1],(e.opts.strictKeywords?"object"==typeof S&&Object.keys(S).length>0||!1===S:e.util.schemaHasRules(S,e.RULES.all))?(h.schema=S,h.schemaPath=n+"["+_+"]",h.errSchemaPath=l+"/"+_,i+="  "+e.validate(h)+" ",h.baseId=m):i+=" var "+g+" = true; ",_&&(i+=" if ("+g+" && "+y+") { "+d+" = false; "+v+" = ["+v+", "+_+"]; } else { ",p+="}"),i+=" if ("+g+") { "+d+" = "+y+" = true; "+v+" = "+_+"; }";return e.compositeRule=h.compositeRule=b,i+=p+"if (!"+d+") {   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { passingSchemas: "+v+" } ",!1!==e.opts.messages&&(i+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+="} else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; }",e.opts.allErrors&&(i+=" } "),i}),An),pattern:(Dn||(Dn=1,Ln=function(e,t,r){var i,a=" ",s=e.level,o=e.dataLevel,n=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),f=e.opts.$data&&n&&n.$data;f?(a+=" var schema"+s+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",i="schema"+s):i=n,a+="if ( ",f&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'string') || "),a+=" !"+(f?"(new RegExp("+i+"))":e.usePattern(n))+".test("+d+") ) {   ";var h=h||[];h.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { pattern:  ",a+=f?""+i:""+e.util.toQuotedString(n),a+="  } ",!1!==e.opts.messages&&(a+=" , message: 'should match pattern \"",a+=f?"' + "+i+" + '":""+e.util.escapeQuotes(n),a+="\"' "),e.opts.verbose&&(a+=" , schema:  ",a+=f?"validate.schema"+l:""+e.util.toQuotedString(n),a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var p=a;return a=h.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+p+"]); ":a+=" validate.errors = ["+p+"]; return false; ":a+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",u&&(a+=" else { "),a}),Ln),properties:(Un||(Un=1,$n=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="errs__"+a,f=e.util.copy(e),h="";f.level++;var p="valid"+f.level,g="key"+a,m="idx"+a,y=f.dataLevel=e.dataLevel+1,v="data"+y,b="dataProperties"+a,w=Object.keys(o||{}).filter(T),S=e.schema.patternProperties||{},_=Object.keys(S).filter(T),x=e.schema.additionalProperties,P=w.length||_.length,F=!1===x,C="object"==typeof x&&Object.keys(x).length,E=e.opts.removeAdditional,k=F||C||E,I=e.opts.ownProperties,O=e.baseId,j=e.schema.required;if(j&&(!e.opts.$data||!j.$data)&&j.length<e.opts.loopRequired)var A=e.util.toHash(j);function T(e){return"__proto__"!==e}if(i+="var "+d+" = errors;var "+p+" = true;",I&&(i+=" var "+b+" = undefined;"),k){if(i+=I?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+m+"=0; "+m+"<"+b+".length; "+m+"++) { var "+g+" = "+b+"["+m+"]; ":" for (var "+g+" in "+u+") { ",P){if(i+=" var isAdditional"+a+" = !(false ",w.length)if(w.length>8)i+=" || validate.schema"+n+".hasOwnProperty("+g+") ";else{var L=w;if(L)for(var D=-1,$=L.length-1;D<$;)W=L[D+=1],i+=" || "+g+" == "+e.util.toQuotedString(W)+" "}if(_.length){var U=_;if(U)for(var B=-1,M=U.length-1;B<M;)se=U[B+=1],i+=" || "+e.usePattern(se)+".test("+g+") "}i+=" ); if (isAdditional"+a+") { "}if("all"==E)i+=" delete "+u+"["+g+"]; ";else{var R=e.errorPath,N="' + "+g+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers)),F)if(E)i+=" delete "+u+"["+g+"]; ";else{i+=" "+p+" = false; ";var z=l;l=e.errSchemaPath+"/additionalProperties",(re=re||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { additionalProperty: '"+N+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is an invalid additional property":i+="should NOT have additional properties",i+="' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var V=i;i=re.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+V+"]); ":i+=" validate.errors = ["+V+"]; return false; ":i+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=z,c&&(i+=" break; ")}else if(C)if("failing"==E){i+=" var "+d+" = errors;  ";var q=e.compositeRule;e.compositeRule=f.compositeRule=!0,f.schema=x,f.schemaPath=e.schemaPath+".additionalProperties",f.errSchemaPath=e.errSchemaPath+"/additionalProperties",f.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var G=u+"["+g+"]";f.dataPathArr[y]=g;var Q=e.validate(f);f.baseId=O,e.util.varOccurences(Q,v)<2?i+=" "+e.util.varReplace(Q,v,G)+" ":i+=" var "+v+" = "+G+"; "+Q+" ",i+=" if (!"+p+") { errors = "+d+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+u+"["+g+"]; }  ",e.compositeRule=f.compositeRule=q}else f.schema=x,f.schemaPath=e.schemaPath+".additionalProperties",f.errSchemaPath=e.errSchemaPath+"/additionalProperties",f.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers),G=u+"["+g+"]",f.dataPathArr[y]=g,Q=e.validate(f),f.baseId=O,e.util.varOccurences(Q,v)<2?i+=" "+e.util.varReplace(Q,v,G)+" ":i+=" var "+v+" = "+G+"; "+Q+" ",c&&(i+=" if (!"+p+") break; ");e.errorPath=R}P&&(i+=" } "),i+=" }  ",c&&(i+=" if ("+p+") { ",h+="}")}var H=e.opts.useDefaults&&!e.compositeRule;if(w.length){var K=w;if(K)for(var W,X=-1,Y=K.length-1;X<Y;){var J=o[W=K[X+=1]];if(e.opts.strictKeywords?"object"==typeof J&&Object.keys(J).length>0||!1===J:e.util.schemaHasRules(J,e.RULES.all)){var Z=e.util.getProperty(W),ee=(G=u+Z,H&&void 0!==J.default);if(f.schema=J,f.schemaPath=n+Z,f.errSchemaPath=l+"/"+e.util.escapeFragment(W),f.errorPath=e.util.getPath(e.errorPath,W,e.opts.jsonPointers),f.dataPathArr[y]=e.util.toQuotedString(W),Q=e.validate(f),f.baseId=O,e.util.varOccurences(Q,v)<2){Q=e.util.varReplace(Q,v,G);var te=G}else te=v,i+=" var "+v+" = "+G+"; ";if(ee)i+=" "+Q+" ";else{if(A&&A[W]){i+=" if ( "+te+" === undefined ",I&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(W)+"') "),i+=") { "+p+" = false; ",R=e.errorPath,z=l;var re,ie=e.util.escapeQuotes(W);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(R,W,e.opts.jsonPointers)),l=e.errSchemaPath+"/required",(re=re||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+ie+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+ie+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",V=i,i=re.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+V+"]); ":i+=" validate.errors = ["+V+"]; return false; ":i+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=z,e.errorPath=R,i+=" } else { "}else c?(i+=" if ( "+te+" === undefined ",I&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(W)+"') "),i+=") { "+p+" = true; } else { "):(i+=" if ("+te+" !== undefined ",I&&(i+=" &&   Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(W)+"') "),i+=" ) { ");i+=" "+Q+" } "}}c&&(i+=" if ("+p+") { ",h+="}")}}if(_.length){var ae=_;if(ae)for(var se,oe=-1,ne=ae.length-1;oe<ne;)J=S[se=ae[oe+=1]],(e.opts.strictKeywords?"object"==typeof J&&Object.keys(J).length>0||!1===J:e.util.schemaHasRules(J,e.RULES.all))&&(f.schema=J,f.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(se),f.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(se),i+=I?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+m+"=0; "+m+"<"+b+".length; "+m+"++) { var "+g+" = "+b+"["+m+"]; ":" for (var "+g+" in "+u+") { ",i+=" if ("+e.usePattern(se)+".test("+g+")) { ",f.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers),G=u+"["+g+"]",f.dataPathArr[y]=g,Q=e.validate(f),f.baseId=O,e.util.varOccurences(Q,v)<2?i+=" "+e.util.varReplace(Q,v,G)+" ":i+=" var "+v+" = "+G+"; "+Q+" ",c&&(i+=" if (!"+p+") break; "),i+=" } ",c&&(i+=" else "+p+" = true; "),i+=" }  ",c&&(i+=" if ("+p+") { ",h+="}"))}return c&&(i+=" "+h+" if ("+d+" == errors) {"),i}),$n),propertyNames:(Mn||(Mn=1,Bn=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="errs__"+a,f=e.util.copy(e);f.level++;var h="valid"+f.level;if(i+="var "+d+" = errors;",e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0||!1===o:e.util.schemaHasRules(o,e.RULES.all)){f.schema=o,f.schemaPath=n,f.errSchemaPath=l;var p="key"+a,g="idx"+a,m="i"+a,y="' + "+p+" + '",v="data"+(f.dataLevel=e.dataLevel+1),b="dataProperties"+a,w=e.opts.ownProperties,S=e.baseId;w&&(i+=" var "+b+" = undefined; "),i+=w?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+g+"=0; "+g+"<"+b+".length; "+g+"++) { var "+p+" = "+b+"["+g+"]; ":" for (var "+p+" in "+u+") { ",i+=" var startErrs"+a+" = errors; ";var _=p,x=e.compositeRule;e.compositeRule=f.compositeRule=!0;var P=e.validate(f);f.baseId=S,e.util.varOccurences(P,v)<2?i+=" "+e.util.varReplace(P,v,_)+" ":i+=" var "+v+" = "+_+"; "+P+" ",e.compositeRule=f.compositeRule=x,i+=" if (!"+h+") { for (var "+m+"=startErrs"+a+"; "+m+"<errors; "+m+"++) { vErrors["+m+"].propertyName = "+p+"; }   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { propertyName: '"+y+"' } ",!1!==e.opts.messages&&(i+=" , message: 'property name \\'"+y+"\\' is invalid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),c&&(i+=" break; "),i+=" } }"}return c&&(i+="  if ("+d+" == errors) {"),i}),Bn),required:(Nn||(Nn=1,Rn=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+a,f=e.opts.$data&&o&&o.$data;f&&(i+=" var schema"+a+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ");var h="schema"+a;if(!f)if(o.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var p=[],g=o;if(g)for(var m,y=-1,v=g.length-1;y<v;){m=g[y+=1];var b=e.schema.properties[m];b&&(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0||!1===b:e.util.schemaHasRules(b,e.RULES.all))||(p[p.length]=m)}}else p=o;if(f||p.length){var w=e.errorPath,S=f||p.length>=e.opts.loopRequired,_=e.opts.ownProperties;if(c)if(i+=" var missing"+a+"; ",S){f||(i+=" var "+h+" = validate.schema"+n+"; ");var x="' + "+(I="schema"+a+"["+(E="i"+a)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,I,e.opts.jsonPointers)),i+=" var "+d+" = true; ",f&&(i+=" if (schema"+a+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+a+")) "+d+" = false; else {"),i+=" for (var "+E+" = 0; "+E+" < "+h+".length; "+E+"++) { "+d+" = "+u+"["+h+"["+E+"]] !== undefined ",_&&(i+=" &&   Object.prototype.hasOwnProperty.call("+u+", "+h+"["+E+"]) "),i+="; if (!"+d+") break; } ",f&&(i+="  }  "),i+="  if (!"+d+") {   ",(F=F||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+x+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+x+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var P=i;i=F.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+P+"]); ":i+=" validate.errors = ["+P+"]; return false; ":i+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else{i+=" if ( ";var F,C=p;if(C)for(var E=-1,k=C.length-1;E<k;)j=C[E+=1],E&&(i+=" || "),i+=" ( ( "+(D=u+(L=e.util.getProperty(j)))+" === undefined ",_&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(j)+"') "),i+=") && (missing"+a+" = "+e.util.toQuotedString(e.opts.jsonPointers?j:L)+") ) ";i+=") {  ",x="' + "+(I="missing"+a)+" + '",e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,I,!0):w+" + "+I),(F=F||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+x+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+x+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",P=i,i=F.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+P+"]); ":i+=" validate.errors = ["+P+"]; return false; ":i+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else if(S){var I;f||(i+=" var "+h+" = validate.schema"+n+"; "),x="' + "+(I="schema"+a+"["+(E="i"+a)+"]")+" + '",e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,I,e.opts.jsonPointers)),f&&(i+=" if ("+h+" && !Array.isArray("+h+")) {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+x+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+x+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+h+" !== undefined) { "),i+=" for (var "+E+" = 0; "+E+" < "+h+".length; "+E+"++) { if ("+u+"["+h+"["+E+"]] === undefined ",_&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", "+h+"["+E+"]) "),i+=") {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+x+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+x+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",f&&(i+="  }  ")}else{var O=p;if(O)for(var j,A=-1,T=O.length-1;A<T;){j=O[A+=1];var L=e.util.getProperty(j),D=(x=e.util.escapeQuotes(j),u+L);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,j,e.opts.jsonPointers)),i+=" if ( "+D+" === undefined ",_&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(j)+"') "),i+=") {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+x+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+x+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=w}else c&&(i+=" if (true) {");return i}),Rn),uniqueItems:(Vn||(Vn=1,zn=function(e,t,r){var i,a=" ",s=e.level,o=e.dataLevel,n=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),f="valid"+s,h=e.opts.$data&&n&&n.$data;if(h?(a+=" var schema"+s+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",i="schema"+s):i=n,(n||h)&&!1!==e.opts.uniqueItems){h&&(a+=" var "+f+"; if ("+i+" === false || "+i+" === undefined) "+f+" = true; else if (typeof "+i+" != 'boolean') "+f+" = false; else { "),a+=" var i = "+d+".length , "+f+" = true , j; if (i > 1) { ";var p=e.schema.items&&e.schema.items.type,g=Array.isArray(p);if(!p||"object"==p||"array"==p||g&&(p.indexOf("object")>=0||p.indexOf("array")>=0))a+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+d+"[i], "+d+"[j])) { "+f+" = false; break outer; } } } ";else{a+=" var itemIndices = {}, item; for (;i--;) { var item = "+d+"[i]; ";var m="checkDataType"+(g?"s":"");a+=" if ("+e.util[m](p,"item",e.opts.strictNumbers,!0)+") continue; ",g&&(a+=" if (typeof item == 'string') item = '\"' + item; "),a+=" if (typeof itemIndices[item] == 'number') { "+f+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}a+=" } ",h&&(a+="  }  "),a+=" if (!"+f+") {   ";var y=y||[];y.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(a+=" , schema:  ",a+=h?"validate.schema"+l:""+n,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var v=a;a=y.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+v+"]); ":a+=" validate.errors = ["+v+"]; return false; ":a+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",u&&(a+=" else { ")}else u&&(a+=" if (true) { ");return a}),zn),validate:Ho()}),qn),t=Oo().toHash;return Qn=function(){var r=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],i=["type","$comment"];return r.all=t(i),r.types=t(["number","integer","string","array","object","boolean","null"]),r.forEach((function(t){t.rules=t.rules.map((function(t){var a;if("object"==typeof t){var s=Object.keys(t)[0];a=t[s],t=s,a.forEach((function(e){i.push(e),r.all[e]=!0}))}return i.push(t),r.all[t]={keyword:t,code:e[t],implements:a}})),r.all.$comment={keyword:"$comment",code:e.$comment},t.type&&(r.types[t.type]=t)})),r.keywords=t(i.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),r.custom={},r},Qn}(),n=function(){if(Wn)return Kn;Wn=1;var e=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];return Kn=function(t,r){for(var i=0;i<r.length;i++){t=JSON.parse(JSON.stringify(t));var a,s=r[i].split("/"),o=t;for(a=1;a<s.length;a++)o=o[s[a]];for(a=0;a<e.length;a++){var n=e[a],l=o[n];l&&(o[n]={anyOf:[l,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return t}}(),l=Oo();ul=p,p.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var i=this._addSchema(e);r=i.validate||this._compile(i)}var a=r(t);return!0!==r.$async&&(this.errors=r.errors),a},p.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},p.prototype.addSchema=function(e,r,i,a){if(Array.isArray(e)){for(var s=0;s<e.length;s++)this.addSchema(e[s],void 0,i,a);return this}var o=this._getId(e);if(void 0!==o&&"string"!=typeof o)throw new Error("schema id must be string");return w(this,r=t.normalizeId(r||o)),this._schemas[r]=this._addSchema(e,i,a,!0),this},p.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},p.prototype.validateSchema=function(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(r=r||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(d)?d:void 0,e._opts.defaultMeta}(this),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var i=this.validate(r,e);if(!i&&t){var a="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(a);this.logger.error(a)}return i},p.prototype.getSchema=function(r){var a=g(this,r);switch(typeof a){case"object":return a.validate||this._compile(a);case"string":return this.getSchema(a);case"undefined":return function(r,a){var s=t.schema.call(r,{schema:{}},a);if(s){var o=s.schema,n=s.root,l=s.baseId,c=e.call(r,o,n,void 0,l);return r._fragments[a]=new i({ref:a,fragment:!0,schema:o,root:n,baseId:l,validate:c}),c}}(this,r)}},p.prototype.removeSchema=function(e){if(e instanceof RegExp)return m(this,this._schemas,e),m(this,this._refs,e),this;switch(typeof e){case"undefined":return m(this,this._schemas),m(this,this._refs),this._cache.clear(),this;case"string":var r=g(this,e);return r&&this._cache.del(r.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var i=this._opts.serialize,a=i?i(e):e;this._cache.del(a);var s=this._getId(e);s&&(s=t.normalizeId(s),delete this._schemas[s],delete this._refs[s])}return this},p.prototype.addFormat=function(e,t){return"string"==typeof t&&(t=new RegExp(t)),this._formats[e]=t,this},p.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,i=void 0===t.dataVar?"data":t.dataVar,a="",s=0;s<e.length;s++){var o=e[s];o&&(a+=i+o.dataPath+" "+o.message+r)}return a.slice(0,-r.length)},p.prototype._addSchema=function(e,r,a,s){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var o=this._opts.serialize,n=o?o(e):e,l=this._cache.get(n);if(l)return l;s=s||!1!==this._opts.addUsedSchema;var c=t.normalizeId(this._getId(e));c&&s&&w(this,c);var u,d=!1!==this._opts.validateSchema&&!r;d&&!(u=c&&c==t.normalizeId(e.$schema))&&this.validateSchema(e,!0);var f=t.ids.call(this,e),h=new i({id:c,schema:e,localRefs:f,cacheKey:n,meta:a});return"#"!=c[0]&&s&&(this._refs[c]=h),this._cache.put(n,h),d&&u&&this.validateSchema(e,!0),h},p.prototype._compile=function(t,r){if(t.compiling)return t.validate=s,s.schema=t.schema,s.errors=null,s.root=r||s,!0===t.schema.$async&&(s.$async=!0),s;var i,a;t.compiling=!0,t.meta&&(i=this._opts,this._opts=this._metaOpts);try{a=e.call(this,t.schema,r,t.localRefs)}catch(e){throw delete t.validate,e}finally{t.compiling=!1,t.meta&&(this._opts=i)}return t.validate=a,t.refs=a.refs,t.refVal=a.refVal,t.root=a.root,a;function s(){var e=t.validate,r=e.apply(this,arguments);return s.errors=e.errors,r}},p.prototype.compileAsync=function(){if(Yn)return Xn;Yn=1;var e=Go().MissingRef;return Xn=function t(r,i,a){var s=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof i&&(a=i,i=void 0);var o=n(r).then((function(){var e=s._addSchema(r,void 0,i);return e.validate||l(e)}));return a&&o.then((function(e){a(null,e)}),a),o;function n(e){var r=e.$schema;return r&&!s.getSchema(r)?t.call(s,{$ref:r},!0):Promise.resolve()}function l(t){try{return s._compile(t)}catch(r){if(r instanceof e)return function(e){var r=e.missingSchema;if(c(r))throw new Error("Schema "+r+" is loaded but "+e.missingRef+" cannot be resolved");var a=s._loadingSchemas[r];return a||(a=s._loadingSchemas[r]=s._opts.loadSchema(r)).then(o,o),a.then((function(e){if(!c(r))return n(e).then((function(){c(r)||s.addSchema(e,r,void 0,i)}))})).then((function(){return l(t)}));function o(){delete s._loadingSchemas[r]}function c(e){return s._refs[e]||s._schemas[e]}}(r);throw r}}},Xn}();var c=function(){if(ll)return nl;ll=1;var e=/^[a-z_$][a-z0-9_$-]*$/i,t=(Zn||(Zn=1,Jn=function(e,t,r){var i,a,s=" ",o=e.level,n=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,f="data"+(n||""),h="valid"+o,p="errs__"+o,g=e.opts.$data&&l&&l.$data;g?(s+=" var schema"+o+" = "+e.util.getData(l.$data,n,e.dataPathArr)+"; ",a="schema"+o):a=l;var m,y,v,b,w,S=this,_="definition"+o,x=S.definition,P="";if(g&&x.$data){w="keywordValidate"+o;var F=x.validateSchema;s+=" var "+_+" = RULES.custom['"+t+"'].definition; var "+w+" = "+_+".validate;"}else{if(!(b=e.useCustomRule(S,l,e.schema,e)))return;a="validate.schema"+c,w=b.code,m=x.compile,y=x.inline,v=x.macro}var C=w+".errors",E="i"+o,k="ruleErr"+o,I=x.async;if(I&&!e.async)throw new Error("async keyword in sync schema");if(y||v||(s+=C+" = null;"),s+="var "+p+" = errors;var "+h+";",g&&x.$data&&(P+="}",s+=" if ("+a+" === undefined) { "+h+" = true; } else { ",F&&(P+="}",s+=" "+h+" = "+_+".validateSchema("+a+"); if ("+h+") { ")),y)x.statements?s+=" "+b.validate+" ":s+=" "+h+" = "+b.validate+"; ";else if(v){var O=e.util.copy(e);P="",O.level++;var j="valid"+O.level;O.schema=b.validate,O.schemaPath="";var A=e.compositeRule;e.compositeRule=O.compositeRule=!0;var T=e.validate(O).replace(/validate\.schema/g,w);e.compositeRule=O.compositeRule=A,s+=" "+T}else{(U=U||[]).push(s),s="",s+="  "+w+".call( ",e.opts.passContext?s+="this":s+="self",m||!1===x.schema?s+=" , "+f+" ":s+=" , "+a+" , "+f+" , validate.schema"+e.schemaPath+" ",s+=" , (dataPath || '')",'""'!=e.errorPath&&(s+=" + "+e.errorPath);var L=n?"data"+(n-1||""):"parentData",D=n?e.dataPathArr[n]:"parentDataProperty",$=s+=" , "+L+" , "+D+" , rootData )  ";s=U.pop(),!1===x.errors?(s+=" "+h+" = ",I&&(s+="await "),s+=$+"; "):s+=I?" var "+(C="customErrors"+o)+" = null; try { "+h+" = await "+$+"; } catch (e) { "+h+" = false; if (e instanceof ValidationError) "+C+" = e.errors; else throw e; } ":" "+C+" = null; "+h+" = "+$+"; "}if(x.modifying&&(s+=" if ("+L+") "+f+" = "+L+"["+D+"];"),s+=""+P,x.valid)d&&(s+=" if (true) { ");else{var U;s+=" if ( ",void 0===x.valid?(s+=" !",s+=v?""+j:""+h):s+=" "+!x.valid+" ",s+=") { ",i=S.keyword,(U=U||[]).push(s),s="",(U=U||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(i||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+S.keyword+"' } ",!1!==e.opts.messages&&(s+=" , message: 'should pass \""+S.keyword+"\" keyword validation' "),e.opts.verbose&&(s+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),s+=" } "):s+=" {} ";var B=s;s=U.pop(),!e.compositeRule&&d?e.async?s+=" throw new ValidationError(["+B+"]); ":s+=" validate.errors = ["+B+"]; return false; ":s+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var M=s;s=U.pop(),y?x.errors?"full"!=x.errors&&(s+="  for (var "+E+"="+p+"; "+E+"<errors; "+E+"++) { var "+k+" = vErrors["+E+"]; if ("+k+".dataPath === undefined) "+k+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+k+".schemaPath === undefined) { "+k+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(s+=" "+k+".schema = "+a+"; "+k+".data = "+f+"; "),s+=" } "):!1===x.errors?s+=" "+M+" ":(s+=" if ("+p+" == errors) { "+M+" } else {  for (var "+E+"="+p+"; "+E+"<errors; "+E+"++) { var "+k+" = vErrors["+E+"]; if ("+k+".dataPath === undefined) "+k+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+k+".schemaPath === undefined) { "+k+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(s+=" "+k+".schema = "+a+"; "+k+".data = "+f+"; "),s+=" } } "):v?(s+="   var err =   ",!1!==e.createErrors?(s+=" { keyword: '"+(i||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+S.keyword+"' } ",!1!==e.opts.messages&&(s+=" , message: 'should pass \""+S.keyword+"\" keyword validation' "),e.opts.verbose&&(s+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?s+=" throw new ValidationError(vErrors); ":s+=" validate.errors = vErrors; return false; ")):!1===x.errors?s+=" "+M+" ":(s+=" if (Array.isArray("+C+")) { if (vErrors === null) vErrors = "+C+"; else vErrors = vErrors.concat("+C+"); errors = vErrors.length;  for (var "+E+"="+p+"; "+E+"<errors; "+E+"++) { var "+k+" = vErrors["+E+"]; if ("+k+".dataPath === undefined) "+k+".dataPath = (dataPath || '') + "+e.errorPath+";  "+k+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(s+=" "+k+".schema = "+a+"; "+k+".data = "+f+"; "),s+=" } } else { "+M+" } "),s+=" } ",d&&(s+=" else { ")}return s}),Jn),r=function(){if(ol)return sl;ol=1;var e=cl;return sl={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:e.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:e.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}}();return nl={add:function(r,i){var a=this.RULES;if(a.keywords[r])throw new Error("Keyword "+r+" is already defined");if(!e.test(r))throw new Error("Keyword "+r+" is not a valid identifier");if(i){this.validateKeyword(i,!0);var s=i.type;if(Array.isArray(s))for(var o=0;o<s.length;o++)l(r,s[o],i);else l(r,s,i);var n=i.metaSchema;n&&(i.$data&&this._opts.$data&&(n={anyOf:[n,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),i.validateSchema=this.compile(n,!0))}function l(e,r,i){for(var s,o=0;o<a.length;o++){var n=a[o];if(n.type==r){s=n;break}}s||(s={type:r,rules:[]},a.push(s));var l={keyword:e,definition:i,custom:!0,code:t,implements:i.implements};s.rules.push(l),a.custom[e]=l}return a.keywords[r]=a.all[r]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var i=t[r].rules,a=0;a<i.length;a++)if(i[a].keyword==e){i.splice(a,1);break}return this},validate:function e(t,i){e.errors=null;var a=this._validateKeyword=this._validateKeyword||this.compile(r,!0);if(a(t))return!0;if(e.errors=a.errors,i)throw new Error("custom keyword definition is invalid: "+this.errorsText(a.errors));return!1}},nl}();p.prototype.addKeyword=c.add,p.prototype.getKeyword=c.get,p.prototype.removeKeyword=c.remove,p.prototype.validateKeyword=c.validate;var u=Go();p.ValidationError=u.Validation,p.MissingRefError=u.MissingRef,p.$dataMetaSchema=n;var d="http://json-schema.org/draft-07/schema",f=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],h=["/properties"];function p(e){if(!(this instanceof p))return new p(e);e=this._opts=l.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:S,warn:S,error:S};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=s(e.format),this._cache=e.cache||new r,this._loadingSchemas={},this._compilations=[],this.RULES=o(),this._getId=function(e){switch(e.schemaId){case"auto":return b;case"id":return y;default:return v}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=a),this._metaOpts=function(e){for(var t=l.copy(e._opts),r=0;r<f.length;r++)delete t[f[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),e.keywords&&function(e){for(var t in e._opts.keywords){var r=e._opts.keywords[t];e.addKeyword(t,r)}}(this),function(e){var t;if(e._opts.$data&&(t=hl,e.addMetaSchema(t,t.$id,!0)),!1!==e._opts.meta){var r=cl;e._opts.$data&&(r=n(r,h)),e.addMetaSchema(r,d,!0),e._refs["http://json-schema.org/schema"]=d}}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(t)if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function g(e,r){return r=t.normalizeId(r),e._schemas[r]||e._refs[r]||e._fragments[r]}function m(e,t,r){for(var i in t){var a=t[i];a.meta||r&&!r.test(i)||(e._cache.del(a.cacheKey),delete t[i])}}function y(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function v(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function b(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function w(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function S(){}return ul}(),gl=yo(pl),ml={exports:{}},yl=function(){if(fl)return ml.exports;function e(e,t,r,i){var a,s=null==(a=i)||"number"==typeof a||"boolean"==typeof a?i:r(i),o=t.get(s);return void 0===o&&(o=e.call(this,i),t.set(s,o)),o}function t(e,t,r){var i=Array.prototype.slice.call(arguments,3),a=r(i),s=t.get(a);return void 0===s&&(s=e.apply(this,i),t.set(a,s)),s}function r(e,t,r,i,a){return r.bind(t,e,i,a)}function i(i,a){return r(i,this,1===i.length?e:t,a.cache.create(),a.serializer)}function a(){return JSON.stringify(arguments)}function s(){this.cache=Object.create(null)}fl=1,s.prototype.has=function(e){return e in this.cache},s.prototype.get=function(e){return this.cache[e]},s.prototype.set=function(e,t){this.cache[e]=t};var o={create:function(){return new s}};return ml.exports=function(e,t){var r=t&&t.cache?t.cache:o,s=t&&t.serializer?t.serializer:a;return(t&&t.strategy?t.strategy:i)(e,{cache:r,serializer:s})},ml.exports.strategies={variadic:function(e,i){return r(e,this,t,i.cache.create(),i.serializer)},monadic:function(t,i){return r(t,this,e,i.cache.create(),i.serializer)}},ml.exports}();const vl=yo(yl)((async t=>{const i=t.featureCollection;let a,s;if(void 0!==i?.layers?.[0]){const e=i.layers[0];a=e.featureSet,s=e.layerDefinition}else s=t.layerDefinition;const o={};if(void 0!==a){const t=await async function(){if(Zs)return await window.$arcgis.import("esri/rest/support/FeatureSet");const t=await new Promise((function(t,i){e(["esri/rest/support/FeatureSet"],(function(e){t(r(e))}),i)}));return eo(t)?t.default:t}();if(o.source=t.fromJSON(a).features,void 0!==s?.fields){const t=await async function(){if(Zs)return await window.$arcgis.import("esri/layers/support/Field");const t=await new Promise((function(t,i){e(["esri/layers/support/Field"],(function(e){t(r(e))}),i)}));return eo(t)?t.default:t}();o.fields=s.fields.map((e=>t.fromJSON(e)))}void 0!==s?.objectIdField&&(o.objectIdField=s.objectIdField);const i=await to();if(void 0!==s?.geometryType){const e=i.fromJSON({geometryType:s.geometryType});void 0!==e?.type&&"extent"!==e?.type&&(o.geometryType=e.type)}void 0!==s?.spatialReference&&(o.spatialReference=s.spatialReference)}else o.id=t.id,void 0!==s?.id&&(o.layerId=s.id),void 0!==t.url&&(o.url=t.url),void 0!==t.itemId&&void 0!==s?.id&&(o.portalItem={id:t.itemId});if(void 0!==s){const t=s.drawingInfo;if(void 0!==t?.renderer){const i=await async function(){if(Zs)return await window.$arcgis.import("esri/renderers/support/jsonUtils");const t=await new Promise((function(t,i){e(["esri/renderers/support/jsonUtils"],(function(e){t(r(e))}),i)}));return eo(t)?t.default:t}();o.renderer=i.fromJSON(t.renderer)}}return await async function(t){return new(await async function(){if(Zs)return await window.$arcgis.import("esri/layers/FeatureLayer");const t=await new Promise((function(t,i){e(["esri/layers/FeatureLayer"],(function(e){t(r(e))}),i)}));return eo(t)?t.default:t}())(t)}(o)}));async function bl(e,t){const r=ao(e);let i=[];if(void 0!==r){await r.load();const e=!0===t&&void 0!==r?.popupTemplate?.fieldInfos;i=r.fields.map((t=>{const i=t.toJSON();if(e){const e=r.popupTemplate?.fieldInfos?.find((e=>e.fieldName?.toLowerCase()===t.name.toLowerCase()))?.label;void 0!==e&&e!==t.name&&(i.alias=e)}return i}))}return i}function wl(e){return[n,s].includes(e.type)}function Sl(e){return e.filter((e=>"esriFieldTypeDate"===e.type)).map((e=>e.name))}function _l(e){return e.filter((e=>function(e){return[o,a,n,s].includes(e.type)}(e))).map((e=>e.name))}function xl(e,t){const r=[],i=function(e){return void 0!==e&&"type"in e&&"subtype-group"===e.type}(e)?e.subtypes:e[t];return void 0!==i?.[0]&&i.forEach((e=>{const{name:t,domains:i}=e;let a="id"in e?e.id:void 0;!a&&"code"in e&&(a=e.code);const s=Object.entries(i??{}),o=[],n=s?.filter((([e,t])=>"coded-value"===t?.type)),l=n?.map((([e,r])=>{let i={fieldName:e,name:t,codedValues:o};if(r&&"codedValues"in r){const t=r.codedValues.map((({code:e,name:t})=>({name:t,code:e})));i={fieldName:e,name:r.name,codedValues:t}}return i}));r.push({id:a??"",name:t,domains:l})})),0===r.length?void 0:r}async function Pl(e){const{queryObject:t,fieldToMatch:r,returnUndefinedIfNotFound:i}=e,a=await bl(t);let s=a.find((e=>r===e.name));s||(s=a.find((e=>r.toUpperCase()===e.name.toUpperCase())));const o=i?"":r;return s?.name??o}async function Fl(e){const{fieldsList:t,queryObject:r,returnUndefinedIfNotFound:i}=e;let a=t;return void 0!==a&&(a=await Promise.all(a.map((async e=>await Pl({queryObject:r,fieldToMatch:e,returnUndefinedIfNotFound:i}))))),a}function Cl(e){let t=!1;switch(Bs(e?.series)){case M:case $:t=0===(e?.series?.[0]?.x?.trim()?.length??0);break;case j:{const r=e?.series;t=0===(r?.[0]?.x?.length??0)||0===(r?.[0]?.y?.length??0);break}case A:{const r=e?.series;t=Js(r)===Os?0===(r?.[0]?.query?.outStatistics?.length??0):0===(r?.[0]?.x?.length??0)||r?.[0]?.x===J;break}case U:{const r=e?.series;t=0===[r?.[0]?.y].flat().length||""===r?.[0]?.y;break}case B:case D:case L:{const r=e?.series;t=Js(r)===Fs?0===(r?.[0]?.query?.outStatistics?.length??0):0===(r?.[0]?.x?.trim()?.length??0);break}}return t}function El(e){return e.type===U}function kl(e){return e.type===L}function Il(e){return e.type===D}!function(){const e=new gl({allErrors:!0})}();const Ol=e=>Bs(e)===L;var jl;async function Al(e,t){const r=[];return await Promise.all(e.map((async e=>{if(!zs(e)){const i=Vs(e,!1);if(void 0!==i.fieldToSort){const e=await Pl({queryObject:t,fieldToMatch:i.fieldToSort});void 0!==e&&r.push(void 0===i.orderBy?e:`${e} ${i.orderBy}`)}}}))),r}function Tl(e){let t;switch(e){case"mean":t=W;break;case"median":t=X;break;case"category":t=Y}return t}function Ll(e){let t,r=e.orderOptions?.orderByFields?.[0];if(e.series?.length>0){const i=Bs(e.series),a=Js(e.series);if(i!==A&&a!==Fs&&(r=r??e.series[0].x),r&&!zs(r)){const{fieldToSort:i,orderBy:a}=Vs(r);let s;i===e.series[0].x||i===J?s=Y:"y"in e.series[0]&&i===e.series[0].y&&(s=K),void 0!==s&&(t={orderType:s,orderBy:"DESC"===a?.toUpperCase()?z:N})}}return t}async function Dl(e,t){let r=ti(e);return r=function(e){const t=ti(e);return li(e.axes)||(t.axes=e.axes?.map((e=>{const t=e;return delete t.calculateAutomaticMaximum,delete t.calculateAutomaticMinimum,void 0!==t.title?.content.font?.style&&(t.title.content.font.style=t.title.content.font.style.toLowerCase()),t}))),t}(r),r=function(e){const t=ti(e);return li(e.series)||(t.series=e.series.map(((t,r)=>{const i=t;void 0===t.id&&(i.id=`Series ${Date.now()}-${r}`);const a=Bs(e.series,r);return a!==D&&a!==L&&a!==B||"median"!==i.query?.outStatistics?.[0]?.statisticType||(i.query.outStatistics[0].statisticType=p),a===D&&void 0!==i.multipleBarType&&(i.stackedType=i.multipleBarType,delete i.multipleBarType),a===A&&void 0!==i.sliceGrouping&&(i.sliceGrouping.sliceId=$i,void 0!==i.sliceGrouping.groupName&&(i.sliceGrouping={...i.sliceGrouping,label:i.sliceGrouping.groupName},delete i.sliceGrouping.groupName),void 0!==i.sliceGrouping.groupSliceSymbol&&(i.sliceGrouping={...i.sliceGrouping,fillSymbol:i.sliceGrouping.groupSliceSymbol},delete i.sliceGrouping.groupSliceSymbol)),i}))),t}(r),r=await async function(e,t){const r={...e};let i=t;if(!i){const t=function(e){return e&&"iLayer"in e&&e.iLayer}(e)?e.iLayer:e.dataSource?.layer;t&&(i=await vl(t))}if(i){const t=Js(r.series),a=Bs(r.series),s=r.series&&r.series.length>0&&""===r.series[0].x.trim()||a===T&&!function(e){return"featureGauge"===e.subType}(e)||t===Os||t===Fs||t===js||t===Ds||t===As||t===$s,o=a===j||t===_s||t===Es||t===js||t===Ds||t===Ts||t===Us||t===ks;if(r.series=await Promise.all(e.series.map((async e=>{const r={...e};if(s||(r.x=await Pl({queryObject:i,fieldToMatch:e.x})),"y"in r&&o){const e=r.y;if(Array.isArray(e)){const t=await Fl({fieldsList:e,queryObject:i});void 0!==t&&"y"in r&&(r.y=t)}else"y"in r&&"string"==typeof e&&(r.y=await Pl({queryObject:i,fieldToMatch:e}))}if(void 0!==e.query){let{where:a,groupByFieldsForStatistics:s,outStatistics:o}=e.query;if(s=await Fl({fieldsList:s,queryObject:i}),void 0!==o&&(o=await Promise.all(o.map((async e=>{const t={...e};return t.onStatisticField=await Pl({queryObject:i,fieldToMatch:e.onStatisticField}),t})))),void 0!==a&&t===Cs){const t=Ws(e.query?.where),r=Xs({where:e.query?.where,normalize:!1,escape:!1});a=`${await Pl({queryObject:i,fieldToMatch:t})}=${r}`}void 0!==r.query&&(void 0!==a&&(r.query.where=a),void 0!==s&&(r.query.groupByFieldsForStatistics=s),void 0!==o&&(r.query.outStatistics=o))}return r}))),void 0!==r.series[0]?.query){const e=r.series[0].query;let{orderByFields:t}=e;void 0!==t&&t.length>0&&(t=await Al(t,i),t.length>0&&void 0!==e.orderByFields&&(r.series[0].query.orderByFields=t))}if(void 0!==r.orderOptions?.orderByFields){let{orderByFields:e}=r.orderOptions;void 0!==e&&e.length>0&&(e=await Al(e,i),e.length>0&&(r.orderOptions.orderByFields=e))}if(a===T&&void 0!==e.axes?.[0]){const{minimumFromField:t,maximumFromField:r}=e.axes[0];if(void 0!==t){const r="string"==typeof t?t:t.onStatisticField,a=await Pl({queryObject:i,fieldToMatch:r});let s=t;"string"==typeof e.axes[0].minimumFromField?s=a:"object"==typeof t&&(s={...t,onStatisticField:a}),e.axes[0].minimumFromField=s}if(void 0!==r){const t="string"==typeof r?r:r.onStatisticField,a=await Pl({queryObject:i,fieldToMatch:t});let s=r;"string"==typeof e.axes[0].maximumFromField?s=a:"object"==typeof r&&(s={...r,onStatisticField:a}),e.axes[0].maximumFromField=s}}}return r}(r,t),r=function(e){const t=ti(e);if(!li(e.series)&&Bs(e.series)===U){const r=t.series[0];void 0!==r.showOutliers&&(void 0===e.showOutliers&&(t.showOutliers=r.showOutliers),delete r.showOutliers),void 0!==r.standardizeValues&&(void 0===e.standardizeValues&&(t.standardizeValues=r.standardizeValues),delete r.standardizeValues),void 0!==r.showMean&&(void 0===e.showMean&&(t.showMean=r.showMean),delete r.showMean)}return t}(r),r=function(e){const t=ti(e);if(!li(t.series)&&Bs(e.series)===U){if(void 0===t.orderOptions?.data){const r=function(e){const t={orderType:Y,orderBy:N},r=e.query?.orderByFields?.[0];if(void 0!==r){const{outStatisticFieldName:i,statisticType:a}=e.query?.outStatistics?.[0]??{},s=Vs(r);void 0!==i&&s.fieldToSort===i&&void 0!==a&&(a===f||"mean"===a?t.orderType=W:a===p&&(t.orderType=X)),t.orderBy=s.orderBy??N}return t}(e.series[0]);void 0!==r.orderType&&(t.orderOptions??={},t.orderOptions.data={orderType:r.orderType,orderBy:r.orderBy})}if(t.series=e.series.map((e=>{const t=e;return li(t.x?.trim())&&(t.x=Ui),delete t.query?.orderByFields,t})),function(e){let t=!1;const r=Array.from(new Set(e.series.map((e=>e.type))));if(2===r.length&&r.includes(U)&&r.includes(L)){const r=e.series.find((e=>e.type===L));t=void 0!==r?.query?.outStatistics?.[0]}return t}(t)){t.showMean=!0;const e=t.series.find((e=>e.type===U));t.series.forEach((t=>{t.type===L&&(delete t.query?.groupByFieldsForStatistics,delete t.query?.outStatistics,delete t.query?.orderByFields,e&&(t.y=e.y))}))}t.series=e.series.map((e=>{const t=e;return delete t.query?.outStatistics,t}))}return t}(r),r=function(e){const t=ti(e);return void 0===t.legend||Number.isFinite(t.legend.maxHeight)||(t.legend.maxHeight=Number.NaN),t}(r),r=function(e){const t=ti(e),r=new Set,i=t.id??"";return r.add(i),t.series.forEach((e=>{let t=e.id;r.has(t)&&(t=`${t}_${Date.now()}`,e.id=t),r.add(t)})),t}(r),r}function $l(e){let t=ti(e);return t=function(e){const t=ti(e);if(!li(e.series)&&void 0!==t.axes?.[0]&&Bs(e.series)===T&&void 0!==e.axes?.[0]){const r=e.axes[0];void 0!==r.ticks&&Object.hasOwn(r.ticks,"spacing")&&delete r.ticks.spacing,t.axes[0]=r}return t}(t),t}function Ul(e){let t=ti(e);return t=function(e){const t=ti(e),{extent:r}=t.series[0]?.query??{};return void 0!==r&&(t.dataFilters={...t.dataFilters,geometry:r},t.series.forEach((e=>{"query"in e&&"extent"in e.query&&delete e.query.extent}))),t}(t),t}function Bl(e){let t=ti(e);return t=function(e){const t=ti(e);return li(e.series)||(function(e){const t=[D,L,M,U],r=Bs(e?.series);return void 0!==r&&t.includes(r)}(e)&&void 0===e.rotated&&(t.rotated=e.series[0].rotated??!1),t.series.forEach((e=>{void 0!==e.rotated&&delete e.rotated}))),t}(t),t}function Ml(e){let t=ti(e);return t=function(e){const t=ti(e),r=e.dataSource;return"dataSource"in t&&!li(r)&&("featureLayer"===r.type&&void 0!==t.dataSource&&(t.dataSource.type="layer"),"featureLayer"in r&&(t.dataSource.layer=r.featureLayer,delete t.dataSource.featureLayer)),t}(t),t}function Rl(e){let t=ti(e);return t=function(e){const t=ti(e);if("dataSource"in e){const r=e.dataSource;if(void 0!==r.filter&&""!==r.filter.trim()){const e=oo([r.filter,t.dataFilters?.where]);t.dataFilters={...t.dataFilters,where:e},delete t.dataSource.filter}}return t}(t),t}function Nl(e){let t=ti(e);return t=function(e){const t=ti(e);if(!li(e.series)&&Bs(e.series)===A){const e=t.series[0];if("originalValue"===e.sortLabelsBy)t.sortLabelsBy=e.sortLabelsBy;else if(void 0!==e.sortLabelsBy&&void 0===t.orderOptions?.data){const e=Ll(t);void 0!==e&&(t.orderOptions??={},t.orderOptions.data=e)}e.sortLabelsBy&&delete e.sortLabelsBy}return t}(t),t}function zl(e){let t=ti(e);return t=function(e){const t=ti(e),r=e.sortOptions?.sortSeriesBy;return void 0===t.orderOptions&&"string"==typeof r&&(t.orderOptions??={},t.orderOptions.series={orderBy:"DESC"===r?z:N}),t}(t),t}function Vl(e){let t=ti(e);return t=function(e){const t=ti(e);return void 0===t.colorMatch&&void 0!==t.series[0].colorType&&(t.colorMatch="colorMatch"===t.series[0].colorType),t.series.forEach((e=>{void 0!==e.colorType&&delete e.colorType})),t}(t),t}function ql(e){return function(e){const t=ti(e);return t.axes?.forEach((e=>{void 0!==e&&void 0!==e.scrollbarVisible&&void 0===e.scrollbar?.visible&&(e.scrollbar={...e.scrollbar,visible:e.scrollbarVisible},delete e.scrollbarVisible)})),t}(e)}function Gl(e){let t=ti(e);return e.series[0]?.type===U&&(t=function(e){const t=ti(e);if(void 0!==t.sortDataBy){if(void 0===t.orderOptions?.data){const r=e.sortDataBy,i=Tl(r?.sortType);void 0!==i&&(t.orderOptions??={},t.orderOptions.data={orderType:i,orderBy:r?.sortOrder??N})}delete t.sortDataBy}return t}(t)),t}function Ql(e){return function(e){const t=ti(e);return li(e.series)||(function(e){const t=[D,L,M,B],r=Bs(e?.series);return void 0!==r&&t.includes(r)}(e)&&void 0===e.stackedType&&(t.stackedType=e.series[0].stackedType??"sideBySide"),t.series.forEach((e=>{"stackedType"in e&&delete e.stackedType}))),t}(e)}function Hl(e){return function(e){const t=ti(e),r=e,i=e,a=e,s=e,o=e;if(t){if(void 0===t.orderOptions?.series&&void 0!==r.sortOptions?.sortSeriesBy&&(t.orderOptions??={},t.orderOptions.series={preferLabel:(n=i.sortLabelsBy??r.sortOptions.sortSeriesBy.sortType,"originalValue"!==n),orderBy:r.sortOptions.sortSeriesBy.sortOrder??N}),"originalValue"===i.sortLabelsBy||!1===s.orderOptions?.data?.preferDataLabel||!1===o.orderOptions?.data?.preferLabel)t.orderOptions?.data&&delete t.orderOptions.data;else if(void 0===t.orderOptions?.data)if(Bs(t.series)===U){if(i.sortLabelsBy||void 0!==a.sortOptions?.sortDataBy){const e=Tl(a.sortOptions?.sortDataBy?.sortType);void 0!==e&&(t.orderOptions??={},t.orderOptions.data={orderType:e,orderBy:a.sortOptions?.sortDataBy?.sortOrder??N})}}else{const e=Ll(t);void 0!==e&&(t.orderOptions??={},t.orderOptions.data=e)}"sortLabelsBy"in t&&delete t.sortLabelsBy,"sortOptions"in t&&delete t.sortOptions}var n;return t}(e)}function Kl(e){return function(e){const t=ti(e);return"dataSource"in t&&t.dataSource.layer&&(t.iLayer=t.dataSource.layer,delete t.dataSource),t}(e)}function Wl(e){return function(e){const t=ti(e);if(t){const e=Js(t.series);if((e===Fs||e===Os)&&void 0===t.orderOptions?.data&&void 0!==t.orderOptions?.orderByFields){const e=Ll(t);void 0!==e&&(t.orderOptions??={},t.orderOptions.data=e,delete t.orderOptions.orderByFields)}}return t}(e)}function Xl(e){return function(e){const t=ti(e);return t.horizontalAxisLabelsBehavior===jl.NONE&&(t.horizontalAxisLabelsBehavior=V),t.verticalAxisLabelsBehavior===jl.NONE&&(t.verticalAxisLabelsBehavior=V),t}(e)}function Yl(e){const{versionsToConvert:t=[],configToUpdate:r}=e;let a=ti(r);return t.length>0&&void 0!==a&&(a=function(e){const t=ti(e),r=t.series[0]?.query?.orderByFields;if(void 0!==r&&r.length>0&&void 0===t.orderOptions?.orderByFields){t.orderOptions??={};let i=!0;if(1===r.length){const{fieldToSort:a,orderBy:s}=Vs(r[0]);let o;a===e.series[0].x||a===J?o=Y:"y"in e.series[0]&&a===e.series[0].y&&(o=K),void 0!==o&&(i=!1,void 0===t.orderOptions.data&&(t.orderOptions.data={orderType:o,orderBy:"DESC"===s?.toUpperCase()?z:N}))}i&&(t.orderOptions.orderByFields=r)}return t.series.forEach((e=>{delete e.query?.orderByFields})),t}(a),t.includes(Gs)||t.includes(Qs)?(a=function(e){let t=ti(e);return t=function(e){const t=ti(e);return void 0!==t?.orderOptions?.orderByFields&&Js(e.series)===Os&&(t.orderOptions.orderByFields=e?.orderOptions?.orderByFields?.map((e=>{let t=ti(e);return void 0!==e&&e.includes("arcgis_charts_pie_category_from_fields_name")&&(t=e.replace("arcgis_charts_pie_category_from_fields_name",J)),t}))),t}(t),t}(a),a=$l(a),a=Ul(a),a=Bl(a),a=Ml(a),a=Rl(a),a=Nl(a),a=zl(a),a=Vl(a),a=ql(a),a=Gl(a),a=Ql(a),a=Hl(a),a=Kl(a),a=Wl(a),a=Xl(a)):t.forEach((e=>{if(void 0!==a)switch(e){case"1.0.1":a=$l(a);break;case"3.4.0":a=Ul(a);break;case"4.0.0":a=Bl(a);break;case"4.0.1":a=Ml(a);break;case"6.4.0":a=Rl(a);break;case"7.5.1":a=Nl(a);break;case"8.0.0":a=zl(a);break;case"9.2.0":a=Vl(a);break;case"9.7.0":a=ql(a);break;case"10.0.0":a=Gl(a);break;case"11.0.0":a=Ql(a);break;case"14.0.1":a=Hl(a);break;case"16.0.0":a=Kl(a);break;case"16.1.0":a=Wl(a);break;case"18.0.0":a=Xl(a)}})),a.version=i),a}async function Jl(e,t){let r=e;if(e){const i=ao(t);r=await Dl(e,i);const a=e.version??Gs,{versionStatus:s,versions:o}=function(e){let t=q,r=[];var i;if(void 0!==(i=e)&&/^([1-9]\d*|0)(\.(([1-9]\d*)|0)){2}$/u.test(i)&&void 0!==e){qs.sort(Hs);const i=Hs(e,qs[qs.length-1]);if(1===i?t=G:-1===i&&(t=Q),t===G||t===q)r.push(e);else{for(let t=qs.length-2;t>=0;t-=1)if(Hs(e,qs[t])>=0){r=qs.slice(t,qs.length);break}0===r.length&&r.push(Gs)}}else t=H,r.push(Qs);return{versionStatus:t,versions:r}}(a);s!==Q&&s!==H||(r=Yl({versionsToConvert:o,configToUpdate:r}))}return r}!function(e){e.NONE="none",e.ROTATE="rotate",e.STAGGER="stagger",e.WRAP="wrap"}(jl||(jl={}));const Zl=e=>e.title?.content.text??"",ec=e=>e.footer?.content.text??"",tc=e=>e.footer?.visible??!1;class rc extends EventTarget{constructor(){super(...arguments),this.setupFinished=new Promise((e=>{this.resolveSetup=e}))}isSameChartAs(e){const t=e?.getLayer();return void 0!==t&&this._config.id===e?.getChartId()&&this.layerInfo?.layer.id===t.id}getConfig(){return this._config}setConfig(e){this._config=e,this.emitConfigUpdate("setConfig")}getChartType(){return this._chartType}getLayer(){return this.layerInfo?.layer}getChartId(){return this._config.id}setChartId(e){this._config.id=e}getTitleText(){return Zl(this._config)}setTitleText(e){var t,r;t=e,void 0!==(r=this._config).title?r.title.content.text=t:void 0===r.title&&void 0!==t&&(r.title=Gi({text:t,visible:!0,font:Vi(re)})),this.emitConfigUpdate("setTitleText")}getDescriptionText(){return ec(this._config)}setDescriptionText(e){var t,r;t=e,void 0!==(r=this._config).footer?r.footer.content.text=t:void 0===r.footer&&void 0!==t&&(r.footer=Gi({text:t,visible:!0,font:Vi(oe)})),this.emitConfigUpdate("setDescriptionText")}getChartTitleVisibility(){return!!(e=this._config).title&&(e.title.visible??!0);var e}setChartTitleVisibility(e){((e,t)=>{void 0!==t.title?t.title.visible=e:void 0===t.title&&(t.title=Gi({text:"",visible:e,font:Vi(re)}))})(e,this._config),this.emitConfigUpdate("setChartTitleVisibility")}getDescriptionVisibility(){return tc(this._config)}setDescriptionVisibility(e){((e,t)=>{void 0!==t.footer?t.footer.visible=e:void 0===t.footer&&e!==tc(t)&&(t.footer=Gi({text:"",visible:!0,font:Vi(oe)}))})(e,this._config),this.emitConfigUpdate("setDescriptionVisibility")}getTitleSymbol(){return e=this._config,e.title?.content;var e}setTitleSymbol(e){((e,t)=>{const r=Zl(t);void 0!==t.title&&void 0!==e||(t.title=Gi({text:"",visible:!0,font:Vi(re),type:re})),void 0!==e&&(t.title.content=e),t.title.content.text=r})(e,this._config),this.emitConfigUpdate("setTitleSymbol")}getDescriptionSymbol(){return e=this._config,e.footer?.content;var e}setDescriptionSymbol(e){((e,t)=>{const r=ec(t);void 0!==t.footer&&void 0!==e||(t.footer=Gi({text:"",visible:!0,font:Vi(oe),type:oe})),void 0!==e&&(t.footer.content=e),t.footer.content.text=r})(e,this._config),this.emitConfigUpdate("setDescriptionSymbol")}getBackgroundColor(){return this._config.background}setBackgroundColor(e){((e,t)=>{t.background=e})(e,this._config),this.emitConfigUpdate("setBackgroundColor")}setSeriesVisibility(e){!function(e,t){if(void 0!==t){const{seriesId:r,overlayType:i,visible:a}=e.detail;let s;switch(i){case"Mean":t.series[0].type===$&&(s=t.series[0].overlays?.mean);break;case"Median":t.series[0].type===$&&(s=t.series[0].overlays?.median);break;case"Standard Deviation":t.series[0].type===$&&(s=t.series[0].overlays?.standardDeviation);break;case"Normal Distribution":t.series[0].type===$&&(s=t.series[0].overlays?.comparisonDistribution);break;case"Trendline":t.series[0].type===j&&(s=t.series[0].overlays?.trendLine);break;default:s=t.series.find((e=>e.id===r))}void 0!==s&&(s.visible=a)}}({detail:e},this._config),this.emitConfigUpdate("setSeriesVisibility")}getSeriesId(e){return((e,t)=>t.series[e]?.id)(e,this._config)}getSeriesIndex(e){return((e,t)=>t.series.findIndex((t=>t.id===e)))(e,this._config)}getSeriesLength(){return this._config.series.length??0}getChartSubType(){return Js(this._config.series)}setFetchNULLValues(e){((e,t)=>{t.series.forEach((t=>{t.query&&(t.query.fetchNullValues=e)}))})(e,this._config)}getFetchNULLValues(){return this._config.series.some((e=>e.query?.fetchNullValues))}emitConfigUpdate(e){this.dispatchEvent(new CustomEvent("arcgisChartsModelConfigChange",{detail:{config:this._config,functionCalled:e}}))}async loadConfigFromLayer(e){const{layer:t,iLayer:r,config:i}=e;let a=t;if(!a&&r&&(a=await vl(r)),a){const e=await bl(a,!0),{objectIdField:t}=a;this.layerInfo={layer:a,layerFieldsInfo:e,objectIdField:t}}this._config=void 0!==i?await Jl(i):await this.generateDefaultConfig(),r&&(this._config.iLayer=r)}}const ic="esriFieldTypeString",ac="count",sc="sum",oc="no_aggregation",nc="esriSLS",lc="esriSFS",cc="gaugeAxisTick",uc="category",dc="date",fc="chartGuide",hc="scatterSeries",pc="pieSeries",gc="gaugeSeries",mc="lineSeries",yc="barSeries",vc="histogramSeries",bc="boxPlotSeries",wc="comboLineAndBarSeries",Sc="none",_c="right",xc="sideBySide",Pc="stacked100",Fc="ASC",Cc="DESC",Ec="null",kc="interpolate",Ic="statisticGauge",Oc="arcgis-charts-y-value",jc="arcgis-charts-mean",Ac="arcgis-charts-median",Tc="arcgis-charts-category",Lc="arcgis_charts_pie_from_fields_name",Dc="arcgis_charts_pie_from_fields_value",$c="arcgis_charts_bar_line_from_fields_name",Uc=(e,t)=>t.series?.[e]?.hideOversizedStackedLabels,Bc=(e,t,r)=>{void 0!==r.series?.[t]&&(r.series[t].hideOversizedStackedLabels=e)};async function Mc(e){const{config:t,layer:r,xAxisField:i,splitByField:a,layerFieldsInfo:s,aggregationFields:o,aggregationType:n,fetchNullValues:l}=e,c=s.filter((e=>e.name===a)),u=c[0]?.type,d=!0!==l?`${a} IS NOT NULL`:"",f=i&&!0!==l?`${i} IS NOT NULL`:"",{where:h}=t?.dataFilters??{},p={where:oo([h,d,f]),orderByFields:zs(a)?[]:[`${a} ${Fc}`],geometry:t?.dataFilters?.geometry};let g=r;!g&&void 0!==t&&"iLayer"in t&&t.iLayer&&(g=await vl(t.iLayer));let m="";0===o.length?m=g?.objectIdField??"":[m]=o;const y=void 0!==n?`${n}_${m}`:"";let v=await mo({queryObject:g,category:t?.series[0].x??"",splitByField:a,queryConfig:p});if(t){const e=t?.series.map((e=>Xs({where:e.query?.where})?.toString()??"")).filter((e=>void 0!==e&&""!==e));v=function(e,t){let r;if(0===t.length)r=e;else{const i=new Map;t.forEach(((e,t)=>{i.set(e,t)})),r=e.slice().sort(((e,t)=>{const r=i.get(e),a=i.get(t);let s=0;return s=void 0===r&&void 0===a?0:void 0===r?1:void 0===a?-1:r-a,s}))}return r}(v,e)}return{categoriesArray:v,fieldName:y,splitByFieldType:u,numericalField:m}}function Rc(e,t){let r=""===t;for(const i of e)if(t===i.name){r=!0;break}return r}function Nc(e,t){const r=_l(e);let i=0===t.length,a=0;for(let e=0;e<t.length;e+=1){for(let s=0;s<r.length;s+=1)if(t[e]===r[s]&&(a+=1),a===t.length){i=!0;break}if(i)break}return i}function zc(e,t){t.forEach((t=>{Object.getOwnPropertyNames(t.prototype).forEach((r=>{Object.defineProperty(e.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r)||Object.create(null))}))}))}async function Vc(e){const{layerInfo:t,config:r,category:i}=e,{layer:a}=t,{where:s}=r?.dataFilters??{},{fetchNullValues:o}=r?.series?.[0]?.query??{},n={where:oo([s,!0!==o?`${i} IS NOT NULL`:""]),orderByFields:[],geometry:r?.dataFilters?.geometry};let l=a;!l&&void 0!==r&&"iLayer"in r&&r.iLayer&&(l=await vl(r.iLayer));const c=function(e){let t;if(void 0!==e){const r=ao(e);if(!ro(r)&&!zs(r?.typeIdField)){const e=xl(r,"types");void 0!==e&&(t={typeIdField:r.typeIdField??void 0,types:e})}if(!zs(r?.subtypeField)){const e=io(r),i=xl(e,"subtypes");void 0!==i&&(t={...t,subtypeField:e.subtypeField??void 0,subtypes:i})}}return t}(l),u=(await mo({queryObject:l,category:i,queryConfig:n})).map((e=>{const r=String(e),a=function(e){const{fieldName:t,fieldValueToMatch:r,subtypeInfo:i,fieldList:a}=e;let s;if(!("string"==typeof r&&zs(r)||zs(t))&&(s=function(e){const{subtypeInfo:t,fieldName:r,fieldValueToMatch:i}=e;let a;const s=e=>`${e.id}`==`${i}`;return t?.subtypeField===r&&t.subtypes?a=t.subtypes.find(s)?.name:t?.typeIdField===r&&t.types&&(a=t.types.find(s)?.name),a}({subtypeInfo:i,fieldName:t,fieldValueToMatch:r}),void 0===s)){const e=function(e,t=[]){return t.find((t=>t.name===e))}(t,a);if(void 0!==i?.types){const t=i?.types;for(const i of t){const t=i.domains?.filter((t=>t.fieldName===e?.name))??[];for(const e of t)if(s=e?.codedValues?.find((e=>`${e.code}`===r))?.name,void 0!==s)break;if(void 0!==s)break}}void 0===s&&void 0!==e?.domain&&"codedValue"===e.domain.type&&(s=e.domain.codedValues?.find((e=>`${e.code}`==`${r}`))?.name)}return s}({fieldName:i,fieldValueToMatch:r,subtypeInfo:c,fieldList:t.layerFieldsInfo});return a??r}));return u}class qc extends rc{getColorMatch(){return this._config.colorMatch??!0}setColorMatch(e){((e,t)=>{t.colorMatch=e})(e,this._config),this.emitConfigUpdate("setColorMatch")}}const Gc=e=>e.legend?.title?.content.text??"";class Qc extends rc{getLegendVisibility(){return(e=>{let t=!1;return void 0!==e.legend&&(t=e.legend.visible??!0),t})(this._config)}setLegendVisibility(e){((e,t)=>{void 0===t.legend&&(t.legend=Xi()),t.legend.visible=e})(e,this._config),this.emitConfigUpdate("setLegendVisibility")}getLegendTitleText(){return Gc(this._config)}setLegendTitleText(e){((e,t)=>{if(void 0!==t.legend?.title)t.legend.title.content.text=e;else if(void 0===t.legend&&void 0!==e){const r=Xi();void 0!==r.title&&(r.title.content.text=e,r.title.visible=!0,t.legend=r)}})(e,this._config),this.emitConfigUpdate("setLegendTitleText")}getLegendTitleVisibility(){return e=this._config,e.legend?.title?.visible??!1;var e}setLegendTitleVisibility(e){((e,t)=>{if(void 0!==t.legend?.title)t.legend.title.visible=e;else if(void 0!==t.legend&&void 0===t.legend?.title&&e)t.legend.title=Gi({text:Gc(t),visible:e,font:Vi(ae),type:ae});else if(void 0===t.legend){const r=Xi();r.title=Gi({text:Gc(t),visible:e,font:Vi(ae),type:ae}),t.legend=r}})(e,this._config),this.emitConfigUpdate("setLegendTitleVisibility")}getLegendPosition(){return e=this._config,e.legend?.position??_c;var e}setLegendPosition(e){((e,t)=>{if(void 0!==t.legend)t.legend.position=e;else if(void 0===t.legend){const r=Xi();r.position=e,t.legend=r}})(e,this._config),this.emitConfigUpdate("setLegendPosition")}getLegendTitleSymbol(){return e=this._config,e.legend?.title?.content;var e}setLegendTitleSymbol(e){var t,r;t=e,void 0===(r=this._config).legend&&(r.legend=Xi()),void 0!==r.legend.title&&void 0!==t||(r.legend.title=Gi({text:"",visible:!0,font:Vi(ae),type:ae})),void 0!==t&&(r.legend.title.content=t),this.emitConfigUpdate("setLegendTitleSymbol")}getLegendTextSymbol(){return e=this._config,e.legend?.body;var e}setLegendTextSymbol(e){var t,r;t=e,void 0===(r=this._config).legend&&(r.legend=Xi()),r.legend.body=t??Gi({text:"",visible:!0,font:Vi(se),type:se}).content,this.emitConfigUpdate("setLegendTextSymbol")}}async function Hc(t=Ei().locale){let r=await new Promise((function(t,r){e(["./messages.en-7f1532eb"],t,r)}));switch(t){case ne.Arabic:r=await new Promise((function(t,r){e(["./messages.ar-0191d927"],t,r)}));break;case ne.Bosnian:r=await new Promise((function(t,r){e(["./messages.bs-902a4f31"],t,r)}));break;case ne.Bulgarian:r=await new Promise((function(t,r){e(["./messages.bg-1c14ae27"],t,r)}));break;case ne.Catalan:r=await new Promise((function(t,r){e(["./messages.ca-b81b8c94"],t,r)}));break;case ne.Czech:r=await new Promise((function(t,r){e(["./messages.cs-7072f5bc"],t,r)}));break;case ne.Danish:r=await new Promise((function(t,r){e(["./messages.da-2fbb32a2"],t,r)}));break;case ne.German:r=await new Promise((function(t,r){e(["./messages.de-2bb31bbd"],t,r)}));break;case ne.Greek:r=await new Promise((function(t,r){e(["./messages.el-9e64666e"],t,r)}));break;case ne.EnglishUSA:r=await new Promise((function(t,r){e(["./messages.en-US-54e93633"],t,r)}));break;case ne.Spanish:r=await new Promise((function(t,r){e(["./messages.es-217216a0"],t,r)}));break;case ne.Estonian:r=await new Promise((function(t,r){e(["./messages.et-494d7782"],t,r)}));break;case ne.French:r=await new Promise((function(t,r){e(["./messages.fr-c73c9ea7"],t,r)}));break;case ne.Finnish:r=await new Promise((function(t,r){e(["./messages.fi-f6abd355"],t,r)}));break;case ne.Hebrew:r=await new Promise((function(t,r){e(["./messages.he-e457fb4e"],t,r)}));break;case ne.Croatian:r=await new Promise((function(t,r){e(["./messages.hr-d331a289"],t,r)}));break;case ne.Hungarian:r=await new Promise((function(t,r){e(["./messages.hu-78d139fe"],t,r)}));break;case ne.Indonesian:r=await new Promise((function(t,r){e(["./messages.id-7138d44b"],t,r)}));break;case ne.Italian:r=await new Promise((function(t,r){e(["./messages.it-ce8e784f"],t,r)}));break;case ne.Japanese:r=await new Promise((function(t,r){e(["./messages.ja-a021f6d7"],t,r)}));break;case ne.Korean:r=await new Promise((function(t,r){e(["./messages.ko-2e6e2535"],t,r)}));break;case ne.Lithuanian:r=await new Promise((function(t,r){e(["./messages.lt-86a01481"],t,r)}));break;case ne.Latvian:r=await new Promise((function(t,r){e(["./messages.lv-b2f34b28"],t,r)}));break;case ne.NorwegianBokml:r=await new Promise((function(t,r){e(["./messages.no-f164f3e5"],t,r)}));break;case ne.Dutch:r=await new Promise((function(t,r){e(["./messages.nl-2aa30fbc"],t,r)}));break;case ne.Polish:r=await new Promise((function(t,r){e(["./messages.pl-116ce173"],t,r)}));break;case ne.PortugueseBrazil:r=await new Promise((function(t,r){e(["./messages.pt-BR-b6a76225"],t,r)}));break;case ne.PortuguesePortugal:r=await new Promise((function(t,r){e(["./messages.pt-PT-b57dd63e"],t,r)}));break;case ne.Romanian:r=await new Promise((function(t,r){e(["./messages.ro-519b3c17"],t,r)}));break;case ne.Russian:r=await new Promise((function(t,r){e(["./messages.ru-b271da10"],t,r)}));break;case ne.Serbian:r=await new Promise((function(t,r){e(["./messages.sr-4722d938"],t,r)}));break;case ne.Slovak:r=await new Promise((function(t,r){e(["./messages.sk-0b56d980"],t,r)}));break;case ne.Slovenian:r=await new Promise((function(t,r){e(["./messages.sl-795d0362"],t,r)}));break;case ne.Swedish:r=await new Promise((function(t,r){e(["./messages.sv-d48a77df"],t,r)}));break;case ne.Thai:r=await new Promise((function(t,r){e(["./messages.th-67c08dc3"],t,r)}));break;case ne.Turkish:r=await new Promise((function(t,r){e(["./messages.tr-d1c9085f"],t,r)}));break;case ne.Ukrainian:r=await new Promise((function(t,r){e(["./messages.uk-a7ca855e"],t,r)}));break;case ne.Vietnamese:r=await new Promise((function(t,r){e(["./messages.vi-78e2ce7d"],t,r)}));break;case ne.ChineseChina:r=await new Promise((function(t,r){e(["./messages.zh-CN-d67a683f"],t,r)}));break;case ne.ChineseHongKong:r=await new Promise((function(t,r){e(["./messages.zh-HK-e75ccf6c"],t,r)}));break;case ne.ChineseTaiwan:r=await new Promise((function(t,r){e(["./messages.zh-TW-0392c8a8"],t,r)}))}return r}function Kc(e,t,r){const i=e?.axes?.[t];void 0!==i?.title?i.title.content.text=r:void 0!==i&&(i.title=Gi({text:r,visible:!0,font:Vi(te)}))}async function Wc(e){const{config:t,layerInfo:r,numericFields:i,aggregationType:a}=e;let s="";if(t){const e=function(e){let t=e?.stackedType;if(void 0===t&&void 0!==e){const r=Bs(e.series);r!==D&&r!==L&&r!==M&&r!==B||(t="sideBySide")}return t}(t)===Pc,o=await Hc();if(e)s=o.axisLabels.percent;else{const e=await va(a);if(1===i.length){const t=Ns(r.layerFieldsInfo,i[0]);s=a===oc?t:a===ac&&i[0]===r.objectIdField?o.axisLabels.count:Pi(o.axisLabels.aggregationOfFieldName,{aggregation:e,fieldName:t})}else i.length>1&&(s=a===oc?o.axisLabels.values:Pi(o.axisLabels.aggregationOfValues,{aggregation:e}))}}return s}const Xc=async(e,t)=>e.axes?.[t]??(await sa(e.type))[t],Yc=(e,t,r)=>{void 0!==e.axes&&(e.axes[r]=t)},Jc=(e,t,r)=>{let i=Number.NaN;return i=r?e.axes?.[t]?.maximum:e.axes?.[t]?.minimum,i??Number.NaN},Zc=async(e,t,r,i)=>{const a=e?.axes?.[r];i&&void 0!==a?a.maximum=t:i||void 0===a||(a.minimum=t)},eu=async(e,t)=>{await Zc(e,t,1,!0)},tu=async(e,t)=>{await Zc(e,t,1,!1)},ru=async(e,t)=>{await Zc(e,t,0,!0)},iu=async(e,t)=>{await Zc(e,t,0,!1)},au=e=>e.axes?.[0]?.valueFormat??{type:"category",characterLimit:11},su=async(e,t)=>{const r=await Xc(e,0);if(void 0!==r&&void 0!==t){const i={...r,valueFormat:t};Yc(e,i,0)}},ou=e=>{let t;return function(e){return void 0!==e&&e.type===O}(e.axes?.[1]?.valueFormat)&&(t=e.axes?.[1]?.valueFormat),t},nu=(e,t,r)=>{const i=e.axes?.[t];void 0!==i&&(i.integerOnlyValues=r)};var lu="object"==typeof global&&global&&global.Object===Object&&global,cu="object"==typeof self&&self&&self.Object===Object&&self,uu=lu||cu||Function("return this")(),du=uu.Symbol,fu=Object.prototype,hu=fu.hasOwnProperty,pu=fu.toString,gu=du?du.toStringTag:void 0;var mu=Object.prototype.toString;var yu=du?du.toStringTag:void 0;function vu(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":yu&&yu in Object(e)?function(e){var t=hu.call(e,gu),r=e[gu];try{e[gu]=void 0;var i=!0}catch(e){}var a=pu.call(e);return i&&(t?e[gu]=r:delete e[gu]),a}(e):function(e){return mu.call(e)}(e)}function bu(e){return null!=e&&"object"==typeof e}var wu=Array.isArray;function Su(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function _u(e){if(!Su(e))return!1;var t=vu(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var xu,Pu=uu["__core-js_shared__"],Fu=(xu=/[^.]+$/.exec(Pu&&Pu.keys&&Pu.keys.IE_PROTO||""))?"Symbol(src)_1."+xu:"";var Cu=Function.prototype.toString;function Eu(e){if(null!=e){try{return Cu.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var ku=/^\[object .+?Constructor\]$/,Iu=Function.prototype,Ou=Object.prototype,ju=Iu.toString,Au=Ou.hasOwnProperty,Tu=RegExp("^"+ju.call(Au).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Lu(e){return!(!Su(e)||(t=e,Fu&&Fu in t))&&(_u(e)?Tu:ku).test(Eu(e));var t}function Du(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Lu(r)?r:void 0}var $u=Du(uu,"WeakMap"),Uu=Object.create,Bu=function(){function e(){}return function(t){if(!Su(t))return{};if(Uu)return Uu(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();var Mu=function(){try{var e=Du(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var Ru=/^(?:0|[1-9]\d*)$/;function Nu(e,t){var r=typeof e;return!!(t=t??9007199254740991)&&("number"==r||"symbol"!=r&&Ru.test(e))&&e>-1&&e%1==0&&e<t}function zu(e,t,r){"__proto__"==t&&Mu?Mu(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Vu(e,t){return e===t||e!=e&&t!=t}var qu=Object.prototype.hasOwnProperty;function Gu(e,t,r){var i=e[t];qu.call(e,t)&&Vu(i,r)&&(void 0!==r||t in e)||zu(e,t,r)}function Qu(e,t,r,i){var a=!r;r||(r={});for(var s=-1,o=t.length;++s<o;){var n=t[s],l=i?i(r[n],e[n],n,r,e):void 0;void 0===l&&(l=e[n]),a?zu(r,n,l):Gu(r,n,l)}return r}function Hu(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Ku(e){return null!=e&&Hu(e.length)&&!_u(e)}var Wu=Object.prototype;function Xu(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Wu)}function Yu(e){return bu(e)&&"[object Arguments]"==vu(e)}var Ju=Object.prototype,Zu=Ju.hasOwnProperty,ed=Ju.propertyIsEnumerable,td=Yu(function(){return arguments}())?Yu:function(e){return bu(e)&&Zu.call(e,"callee")&&!ed.call(e,"callee")},rd=td;var id="object"==typeof t&&t&&!t.nodeType&&t,ad=id&&"object"==typeof module&&module&&!module.nodeType&&module,sd=ad&&ad.exports===id?uu.Buffer:void 0,od=(sd?sd.isBuffer:void 0)||function(){return!1},nd={};function ld(e){return function(t){return e(t)}}nd["[object Float32Array]"]=nd["[object Float64Array]"]=nd["[object Int8Array]"]=nd["[object Int16Array]"]=nd["[object Int32Array]"]=nd["[object Uint8Array]"]=nd["[object Uint8ClampedArray]"]=nd["[object Uint16Array]"]=nd["[object Uint32Array]"]=!0,nd["[object Arguments]"]=nd["[object Array]"]=nd["[object ArrayBuffer]"]=nd["[object Boolean]"]=nd["[object DataView]"]=nd["[object Date]"]=nd["[object Error]"]=nd["[object Function]"]=nd["[object Map]"]=nd["[object Number]"]=nd["[object Object]"]=nd["[object RegExp]"]=nd["[object Set]"]=nd["[object String]"]=nd["[object WeakMap]"]=!1;var cd="object"==typeof t&&t&&!t.nodeType&&t,ud=cd&&"object"==typeof module&&module&&!module.nodeType&&module,dd=ud&&ud.exports===cd&&lu.process,fd=function(){try{var e=ud&&ud.require&&ud.require("util").types;return e||dd&&dd.binding&&dd.binding("util")}catch(e){}}(),hd=fd&&fd.isTypedArray,pd=hd?ld(hd):function(e){return bu(e)&&Hu(e.length)&&!!nd[vu(e)]},gd=Object.prototype.hasOwnProperty;function md(e,t){var r=wu(e),i=!r&&rd(e),a=!r&&!i&&od(e),s=!r&&!i&&!a&&pd(e),o=r||i||a||s,n=o?function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}(e.length,String):[],l=n.length;for(var c in e)!t&&!gd.call(e,c)||o&&("length"==c||a&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Nu(c,l))||n.push(c);return n}function yd(e,t){return function(r){return e(t(r))}}var vd=yd(Object.keys,Object),bd=Object.prototype.hasOwnProperty;function wd(e){if(!Xu(e))return vd(e);var t=[];for(var r in Object(e))bd.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Sd(e){return Ku(e)?md(e):wd(e)}var _d=Object.prototype.hasOwnProperty;function xd(e){if(!Su(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=Xu(e),r=[];for(var i in e)("constructor"!=i||!t&&_d.call(e,i))&&r.push(i);return r}function Pd(e){return Ku(e)?md(e,!0):xd(e)}var Fd=Du(Object,"create");var Cd=Object.prototype.hasOwnProperty;var Ed=Object.prototype.hasOwnProperty;function kd(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function Id(e,t){for(var r=e.length;r--;)if(Vu(e[r][0],t))return r;return-1}kd.prototype.clear=function(){this.__data__=Fd?Fd(null):{},this.size=0},kd.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},kd.prototype.get=function(e){var t=this.__data__;if(Fd){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Cd.call(t,e)?t[e]:void 0},kd.prototype.has=function(e){var t=this.__data__;return Fd?void 0!==t[e]:Ed.call(t,e)},kd.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Fd&&void 0===t?"__lodash_hash_undefined__":t,this};var Od=Array.prototype.splice;function jd(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}jd.prototype.clear=function(){this.__data__=[],this.size=0},jd.prototype.delete=function(e){var t=this.__data__,r=Id(t,e);return!(r<0)&&(r==t.length-1?t.pop():Od.call(t,r,1),--this.size,!0)},jd.prototype.get=function(e){var t=this.__data__,r=Id(t,e);return r<0?void 0:t[r][1]},jd.prototype.has=function(e){return Id(this.__data__,e)>-1},jd.prototype.set=function(e,t){var r=this.__data__,i=Id(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this};var Ad=Du(uu,"Map");function Td(e,t){var r,i,a=e.__data__;return("string"==(i=typeof(r=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==r:null===r)?a["string"==typeof t?"string":"hash"]:a.map}function Ld(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Ld.prototype.clear=function(){this.size=0,this.__data__={hash:new kd,map:new(Ad||jd),string:new kd}},Ld.prototype.delete=function(e){var t=Td(this,e).delete(e);return this.size-=t?1:0,t},Ld.prototype.get=function(e){return Td(this,e).get(e)},Ld.prototype.has=function(e){return Td(this,e).has(e)},Ld.prototype.set=function(e,t){var r=Td(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this};function Dd(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var i=arguments,a=t?t.apply(this,i):i[0],s=r.cache;if(s.has(a))return s.get(a);var o=e.apply(this,i);return r.cache=s.set(a,o)||s,o};return r.cache=new(Dd.Cache||Ld),r}function $d(e,t){for(var r=-1,i=t.length,a=e.length;++r<i;)e[a+r]=t[r];return e}Dd.Cache=Ld;var Ud=yd(Object.getPrototypeOf,Object);function Bd(e){var t=this.__data__=new jd(e);this.size=t.size}Bd.prototype.clear=function(){this.__data__=new jd,this.size=0},Bd.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Bd.prototype.get=function(e){return this.__data__.get(e)},Bd.prototype.has=function(e){return this.__data__.has(e)},Bd.prototype.set=function(e,t){var r=this.__data__;if(r instanceof jd){var i=r.__data__;if(!Ad||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new Ld(i)}return r.set(e,t),this.size=r.size,this};var Md="object"==typeof t&&t&&!t.nodeType&&t,Rd=Md&&"object"==typeof module&&module&&!module.nodeType&&module,Nd=Rd&&Rd.exports===Md?uu.Buffer:void 0,zd=Nd?Nd.allocUnsafe:void 0;function Vd(){return[]}var qd=Object.prototype.propertyIsEnumerable,Gd=Object.getOwnPropertySymbols,Qd=Gd?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,i=null==e?0:e.length,a=0,s=[];++r<i;){var o=e[r];t(o,r,e)&&(s[a++]=o)}return s}(Gd(e),(function(t){return qd.call(e,t)})))}:Vd;var Hd=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)$d(t,Qd(e)),e=Ud(e);return t}:Vd;function Kd(e,t,r){var i=t(e);return wu(e)?i:$d(i,r(e))}function Wd(e){return Kd(e,Sd,Qd)}function Xd(e){return Kd(e,Pd,Hd)}var Yd=Du(uu,"DataView"),Jd=Du(uu,"Promise"),Zd=Du(uu,"Set"),ef="[object Map]",tf="[object Promise]",rf="[object Set]",af="[object WeakMap]",sf="[object DataView]",of=Eu(Yd),nf=Eu(Ad),lf=Eu(Jd),cf=Eu(Zd),uf=Eu($u),df=vu;(Yd&&df(new Yd(new ArrayBuffer(1)))!=sf||Ad&&df(new Ad)!=ef||Jd&&df(Jd.resolve())!=tf||Zd&&df(new Zd)!=rf||$u&&df(new $u)!=af)&&(df=function(e){var t=vu(e),r="[object Object]"==t?e.constructor:void 0,i=r?Eu(r):"";if(i)switch(i){case of:return sf;case nf:return ef;case lf:return tf;case cf:return rf;case uf:return af}return t});var ff=df,hf=Object.prototype.hasOwnProperty;var pf=uu.Uint8Array;function gf(e){var t=new e.constructor(e.byteLength);return new pf(t).set(new pf(e)),t}var mf=/\w*$/;var yf=du?du.prototype:void 0,vf=yf?yf.valueOf:void 0;function bf(e,t,r){var i,a,s,o=e.constructor;switch(t){case"[object ArrayBuffer]":return gf(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return function(e,t){var r=t?gf(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var r=t?gf(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,r);case"[object Map]":case"[object Set]":return new o;case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return(s=new(a=e).constructor(a.source,mf.exec(a))).lastIndex=a.lastIndex,s;case"[object Symbol]":return i=e,vf?Object(vf.call(i)):{}}}var wf=fd&&fd.isMap,Sf=wf?ld(wf):function(e){return bu(e)&&"[object Map]"==ff(e)};var _f=fd&&fd.isSet,xf=_f?ld(_f):function(e){return bu(e)&&"[object Set]"==ff(e)},Pf="[object Arguments]",Ff="[object Function]",Cf="[object Object]",Ef={};function kf(e,t,r,i,a,s){var o,n=1&t,l=2&t,c=4&t;if(r&&(o=a?r(e,i,a,s):r(e)),void 0!==o)return o;if(!Su(e))return e;var u=wu(e);if(u){if(o=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&hf.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!n)return function(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}(e,o)}else{var d=ff(e),f=d==Ff||"[object GeneratorFunction]"==d;if(od(e))return function(e,t){if(t)return e.slice();var r=e.length,i=zd?zd(r):new e.constructor(r);return e.copy(i),i}(e,n);if(d==Cf||d==Pf||f&&!a){if(o=l||f?{}:function(e){return"function"!=typeof e.constructor||Xu(e)?{}:Bu(Ud(e))}(e),!n)return l?function(e,t){return Qu(e,Hd(e),t)}(e,function(e,t){return e&&Qu(t,Pd(t),e)}(o,e)):function(e,t){return Qu(e,Qd(e),t)}(e,function(e,t){return e&&Qu(t,Sd(t),e)}(o,e))}else{if(!Ef[d])return a?e:{};o=bf(e,d,n)}}s||(s=new Bd);var h=s.get(e);if(h)return h;s.set(e,o),xf(e)?e.forEach((function(i){o.add(kf(i,t,r,i,e,s))})):Sf(e)&&e.forEach((function(i,a){o.set(a,kf(i,t,r,a,e,s))}));var p=u?void 0:(c?l?Xd:Wd:l?Pd:Sd)(e);return function(e,t){for(var r=-1,i=null==e?0:e.length;++r<i&&!1!==t(e[r],r,e););}(p||e,(function(i,a){p&&(i=e[a=i]),Gu(o,a,kf(i,t,r,a,e,s))})),o}Ef[Pf]=Ef["[object Array]"]=Ef["[object ArrayBuffer]"]=Ef["[object DataView]"]=Ef["[object Boolean]"]=Ef["[object Date]"]=Ef["[object Float32Array]"]=Ef["[object Float64Array]"]=Ef["[object Int8Array]"]=Ef["[object Int16Array]"]=Ef["[object Int32Array]"]=Ef["[object Map]"]=Ef["[object Number]"]=Ef[Cf]=Ef["[object RegExp]"]=Ef["[object Set]"]=Ef["[object String]"]=Ef["[object Symbol]"]=Ef["[object Uint8Array]"]=Ef["[object Uint8ClampedArray]"]=Ef["[object Uint16Array]"]=Ef["[object Uint32Array]"]=!0,Ef["[object Error]"]=Ef[Ff]=Ef["[object WeakMap]"]=!1;function If(e){return kf(e,5)}function Of(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Ld;++t<r;)this.add(e[t])}function jf(e,t){for(var r=-1,i=null==e?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}Of.prototype.add=Of.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Of.prototype.has=function(e){return this.__data__.has(e)};function Af(e,t,r,i,a,s){var o=1&r,n=e.length,l=t.length;if(n!=l&&!(o&&l>n))return!1;var c=s.get(e),u=s.get(t);if(c&&u)return c==t&&u==e;var d=-1,f=!0,h=2&r?new Of:void 0;for(s.set(e,t),s.set(t,e);++d<n;){var p=e[d],g=t[d];if(i)var m=o?i(g,p,d,t,e,s):i(p,g,d,e,t,s);if(void 0!==m){if(m)continue;f=!1;break}if(h){if(!jf(t,(function(e,t){if(o=t,!h.has(o)&&(p===e||a(p,e,r,i,s)))return h.push(t);var o}))){f=!1;break}}else if(p!==g&&!a(p,g,r,i,s)){f=!1;break}}return s.delete(e),s.delete(t),f}function Tf(e){var t=-1,r=Array(e.size);return e.forEach((function(e,i){r[++t]=[i,e]})),r}function Lf(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var Df=du?du.prototype:void 0,$f=Df?Df.valueOf:void 0;var Uf=Object.prototype.hasOwnProperty;var Bf="[object Arguments]",Mf="[object Array]",Rf="[object Object]",Nf=Object.prototype.hasOwnProperty;function zf(e,t,r,i,a,s){var o=wu(e),n=wu(t),l=o?Mf:ff(e),c=n?Mf:ff(t),u=(l=l==Bf?Rf:l)==Rf,d=(c=c==Bf?Rf:c)==Rf,f=l==c;if(f&&od(e)){if(!od(t))return!1;o=!0,u=!1}if(f&&!u)return s||(s=new Bd),o||pd(e)?Af(e,t,r,i,a,s):function(e,t,r,i,a,s,o){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new pf(e),new pf(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Vu(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var n=Tf;case"[object Set]":var l=1&i;if(n||(n=Lf),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;i|=2,o.set(e,t);var u=Af(n(e),n(t),i,a,s,o);return o.delete(e),u;case"[object Symbol]":if($f)return $f.call(e)==$f.call(t)}return!1}(e,t,l,r,i,a,s);if(!(1&r)){var h=u&&Nf.call(e,"__wrapped__"),p=d&&Nf.call(t,"__wrapped__");if(h||p){var g=h?e.value():e,m=p?t.value():t;return s||(s=new Bd),a(g,m,r,i,s)}}return!!f&&(s||(s=new Bd),function(e,t,r,i,a,s){var o=1&r,n=Wd(e),l=n.length;if(l!=Wd(t).length&&!o)return!1;for(var c=l;c--;){var u=n[c];if(!(o?u in t:Uf.call(t,u)))return!1}var d=s.get(e),f=s.get(t);if(d&&f)return d==t&&f==e;var h=!0;s.set(e,t),s.set(t,e);for(var p=o;++c<l;){var g=e[u=n[c]],m=t[u];if(i)var y=o?i(m,g,u,t,e,s):i(g,m,u,e,t,s);if(!(void 0===y?g===m||a(g,m,r,i,s):y)){h=!1;break}p||(p="constructor"==u)}if(h&&!p){var v=e.constructor,b=t.constructor;v==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(h=!1)}return s.delete(e),s.delete(t),h}(e,t,r,i,a,s))}function Vf(e,t,r,i,a){return e===t||(null==e||null==t||!bu(e)&&!bu(t)?e!=e&&t!=t:zf(e,t,r,i,Vf,a))}var qf=Object.prototype.hasOwnProperty;function Gf(e){if(null==e)return!0;if(Ku(e)&&(wu(e)||"string"==typeof e||"function"==typeof e.splice||od(e)||pd(e)||rd(e)))return!e.length;var t=ff(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(Xu(e))return!wd(e).length;for(var r in e)if(qf.call(e,r))return!1;return!0}function Qf(e,t){return Vf(e,t)}const Hf=(e,t)=>{const r=t.title?.content.text;void 0!==t.title&&void 0!==e||(t.title=Gi({text:"",visible:!0,font:Vi(te),type:te})),void 0!==e&&(t.title.content=e),t.title.content.text=r},Kf=(e,t)=>t.axes?.[e]?.title?.content.text??"",Wf=(e,t,r)=>{const i=r.axes?.[t];void 0!==i?.title?i.title.content.text=e:void 0!==i&&void 0===i?.title&&(i.title=Gi({text:e,visible:!0,font:Vi(te)}))},Xf=(e,t)=>t.axes?.[e]?.title?.visible??!1,Yf=(e,t,r)=>{const i=r.axes?.[t];void 0!==i?.title?i.title.visible=e:void 0!==i&&void 0===i?.title&&(i.title=Gi({text:Kf(t,r),visible:e,font:Vi(te)}))};class Jf extends rc{getXAxisTitleText(){return Kf(0,this._config)}setXAxisTitleText(e){Wf(e,0,this._config),this.emitConfigUpdate("setXAxisTitleText")}getXAxisTitleVisibility(){return Xf(0,this._config)}setXAxisTitleVisibility(e){Yf(e,0,this._config),this.emitConfigUpdate("setXAxisTitleVisibility")}getMaxXBound(){return e=this._config,Jc(e,0,!0);var e}async setMaxXBound(e){await ru(this._config,e),this.emitConfigUpdate("setMaxXBound")}getMinXBound(){return e=this._config,Jc(e,0,!1);var e}async setMinXBound(e){await iu(this._config,e),this.emitConfigUpdate("setMinXBound")}getXAxisTitleSymbol(){return e=this._config,e.axes?.[0]?.title?.content;var e}setXAxisTitleSymbol(e){var t,r;t=e,r=this._config,void 0!==r.axes?.[0]&&Hf(t,r.axes[0]),this.emitConfigUpdate("setXAxisTitleSymbol")}getAxisLabelsSymbol(){return(e=>{for(const t of e.axes??[])if(void 0!==t?.labels)return t.labels.content})(this._config)}setAxisLabelsSymbol(e){((e,t)=>{for(const r of t.axes??[])if(void 0!==r){const t=r.labels?.content.text;void 0===e?r.labels=Gi({text:"",visible:!0,font:Vi(Z),type:Z}):r.labels.content=If(e),r.labels.content.text=t}})(e,this._config),this.emitConfigUpdate("setAxisLabelsSymbol")}getAxisLinesSymbol(){return(e=>{for(const t of e.axes??[])if(void 0!==t?.lineSymbol)return t.lineSymbol})(this._config)}setAxisLinesSymbol(e){((e,t)=>{for(const r of t.axes??[])void 0!==r&&(r.lineSymbol=If(e)??Qi())})(e,this._config),this.emitConfigUpdate("setAxisLinesSymbol")}}class Zf extends Jf{getYAxisTitleText(){return Kf(1,this._config)}setYAxisTitleText(e){Wf(e,1,this._config),this.emitConfigUpdate("setYAxisTitleText")}getYAxisTitleVisibility(){return Xf(1,this._config)}setYAxisTitleVisibility(e){Yf(e,1,this._config),this.emitConfigUpdate("setYAxisTitleVisibility")}getMaxYBound(){return e=this._config,Jc(e,1,!0);var e}async setMaxYBound(e){await eu(this._config,e),this.emitConfigUpdate("setMaxYBound")}getMinYBound(){return e=this._config,Jc(e,1,!1);var e}async setMinYBound(e){await tu(this._config,e),this.emitConfigUpdate("setMinYBound")}getXAxisValueFormat(){return au(this._config)}async setXAxisValueFormat(e){await su(this._config,e),this.emitConfigUpdate("setXAxisValueFormat")}getYAxisValueFormat(){return ou(this._config)}async setYAxisValueFormat(e){await(async(e,t)=>{const r=await Xc(e,1);if(void 0!==r&&void 0!==t){const i={...r,valueFormat:t};Yc(e,i,1)}})(this._config,e),this.emitConfigUpdate("setYAxisValueFormat")}getXLogarithmic(){return e=this._config,e.axes?.[0].isLogarithmic??!1;var e}async setXLogarithmic(e){await(async(e,t)=>{void 0!==e.axes?.[0]&&(e.axes[0].isLogarithmic=t,await ru(e,null),await iu(e,null))})(this._config,e),this.emitConfigUpdate("setXLogarithmic")}getYLogarithmic(){return e=this._config,e.axes?.[1]?.isLogarithmic??!1;var e}async setYLogarithmic(e){await(async(e,t)=>{void 0!==e.axes?.[1]&&(e.axes[1].isLogarithmic=t,await eu(e,null),await tu(e,null))})(this._config,e),this.emitConfigUpdate("setYLogarithmic")}getXAxisScrollbar(){return e=this._config,e.axes?.[0]?.scrollbar;var e}setXAxisScrollbar(e){((e,t)=>{void 0!==e.axes?.[0]&&(e.axes[0].scrollbar=t)})(this._config,e),this.emitConfigUpdate("setXAxisScrollbar")}getYAxisScrollbar(){return e=this._config,e.axes?.[1]?.scrollbar;var e}setYAxisScrollbar(e){((e,t)=>{void 0!==e.axes?.[1]&&(e.axes[1].scrollbar=t)})(this._config,e),this.emitConfigUpdate("setYAxisScrollbar")}getYAxisTitleSymbol(){return e=this._config,e.axes?.[1]?.title?.content;var e}setYAxisTitleSymbol(e){((e,t)=>{void 0!==t.axes?.[1]&&Hf(e,t.axes[1])})(e,this._config),this.emitConfigUpdate("setYAxisTitleSymbol")}getGridLinesSymbol(){return(e=>{for(const t of e.axes??[])if(void 0!==t?.grid)return t.grid})(this._config)}setGridLinesSymbol(e){((e,t)=>{for(const r of t.axes??[])void 0!==r&&(r.grid=If(e))})(e,this._config),this.emitConfigUpdate("setGridLinesSymbol")}}zc(Zf,[Jf]);class eh extends rc{getRotatedState(){return Ms(this._config)}setRotatedState(e){this._config=function(e,t){let r;return void 0!==t&&(r={...t,rotated:e}),r}(e,this._config)??this._config,this.emitConfigUpdate("setRotatedState")}}class th extends rc{getDataLabelsVisibility(){return e=this._config,e.series[0]?.dataLabels?.visible??!1;var e}setDataLabelsVisibility(e){((e,t)=>{t.series.forEach((t=>{void 0!==t.dataLabels?t.dataLabels.visible=e:t.dataLabels=Gi({text:"",visible:e,font:Vi(ie),type:ie})}))})(e,this._config),this.emitConfigUpdate("setDataLabelsVisibility")}getDataLabelsSymbol(){return(e=>{for(const t of e.series)if(void 0!==t.dataLabels)return t.dataLabels.content})(this._config)}setDataLabelsSymbol(e){((e,t)=>{for(const r of t.series)void 0!==r.dataLabels&&void 0!==e||(r.dataLabels=Gi({text:"",visible:!0,font:Vi(ie),type:ie})),void 0!==e&&(r.dataLabels.content=If(e))})(e,this._config),this.emitConfigUpdate("setDataLabelsSymbol")}}const rh={xAxisAsc:"xAxisAsc",xAxisDesc:"xAxisDesc",yAxisAsc:"yAxisAsc",yAxisDesc:"yAxisDesc",customSort:"customSort"},ih={xAxisAsc:"xAxisAsc",xAxisDesc:"xAxisDesc",meanAsc:"meanAsc",meanDesc:"meanDesc",medianAsc:"medianAsc",medianDesc:"medianDesc",customSort:"customSort"},ah={labelAsc:"labelAsc",labelDesc:"labelDesc",valueAsc:"valueAsc",valueDesc:"valueDesc",customSort:"customSort"},sh={Category:"category",Fields:"fields"},oh={Value:"value",Percentage:"percentage",Both:"both"},nh={X:"x",Y:"y"};function lh(e){return{...e,axis:e.orientation===nh.X?e.config.axes?.[0]:e.config.axes?.[1],index:e.index??0,orientation:e.orientation??nh.Y}}const ch=e=>{const t=function(e,t){const r=null!==e?e.toString():null,i=null!=t?t.toString():null;return null!==i&&i!==r?F:x}(e.start,e.end);!function(e){return e?.type===x}(e.style)||t!==lc?function(e){return e?.type===F}(e.style)&&t===nc&&(e.style={type:nc,color:e.style.color}):e.style={type:lc,color:e.style.color}},uh=e=>{const{config:t,name:r,index:i,orientation:a}=e,s=a===nh.X?t.axes?.[0]:t.axes?.[1];if(void 0!==s){s.guides=s.guides??[];const e={type:fc,name:r,start:s.valueFormat.type===dc?"":0,style:Qi()};void 0!==i&&i<s.guides.length?s.guides.splice(i,0,e):s.guides.push(e)}},dh=e=>{const{config:t,index:r,orientation:i}=e,a=i===nh.X?t.axes?.[0]:t.axes?.[1];void 0!==a?.guides&&(void 0!==r&&r<a.guides.length?a.guides.splice(r,1):a.guides.pop())};class fh extends rc{getGuideLabelsSymbol(){return(e=>{for(const t of e.axes??[])for(const e of t?.guides??[])if(void 0!==e.label)return e.label})(this._config)}setGuideLabelsSymbol(e){((e,t)=>{for(const r of t.axes??[])for(const t of r?.guides??[]){const r=t.label?.text??"";t.label=If(e),void 0!==t.label&&(t.label.text=r)}})(e,this._config),this.emitConfigUpdate("setGuideLabels")}getGuideVisibility(e,t){return(e=>{const{axis:t,index:r}=lh(e);return t?.guides?.[r]?.visible??!0})({config:this._config,index:e,orientation:t})}setGuideVisibility(e,t,r){(e=>{const{visible:t,axis:r,index:i}=lh(e);void 0!==r?.guides?.[i]&&(r.guides[i].visible=t)})({visible:e,config:this._config,index:t,orientation:r}),this.emitConfigUpdate("setGuideVisibility")}getGuideStart(e,t){return(e=>{const{axis:t,index:r}=lh(e);return t?.guides?.[r]?.start??null})({config:this._config,index:e,orientation:t})}setGuideStart(e,t,r){(e=>{const{start:t,axis:r,index:i}=lh(e);void 0!==r?.guides?.[i]&&(r.guides[i].start=t,ch(r.guides[i]))})({start:e,config:this._config,index:t,orientation:r}),this.emitConfigUpdate("setGuideStart")}getGuideEnd(e,t){return(e=>{const{axis:t,index:r}=lh(e);return t?.guides?.[r]?.end})({config:this._config,index:e,orientation:t})}setGuideEnd(e,t,r){(e=>{const{end:t,axis:r,index:i}=lh(e);void 0!==r?.guides?.[i]&&(r.guides[i].end=t,ch(r.guides[i]))})({end:e,config:this._config,index:t,orientation:r}),this.emitConfigUpdate("setGuideEnd")}getGuideName(e,t){return(e=>{const{axis:t,index:r}=lh(e);return t?.guides?.[r]?.name})({config:this._config,index:e,orientation:t})}setGuideName(e,t,r){(e=>{const{name:t,axis:r,index:i}=lh(e);void 0!==r?.guides?.[i]&&(r.guides[i].name=t)})({name:e,config:this._config,index:t,orientation:r}),this.emitConfigUpdate("setGuideName")}getGuideLabelText(e,t){return(e=>{const{axis:t,index:r}=lh(e);return t?.guides?.[r]?.label?.text})({config:this._config,index:e,orientation:t})}setGuideLabelText(e,t,r){(e=>{const{labelText:t,axis:r,index:i}=lh(e),a=r?.guides?.[i]?.label??qi(t,Vi(ee),ee);void 0!==r?.guides?.[i]&&(r.guides[i].label={...a,text:t})})({labelText:e,config:this._config,index:t,orientation:r}),this.emitConfigUpdate("setGuideLabelText")}getGuideAbove(e,t){return(e=>{const{axis:t,index:r}=lh(e);return t?.guides?.[r]?.above??!1})({config:this._config,index:e,orientation:t})}setGuideAbove(e,t,r){(e=>{const{above:t,axis:r,index:i}=lh(e);void 0!==r?.guides?.[i]&&(r.guides[i].above=t)})({above:e,config:this._config,index:t,orientation:r}),this.emitConfigUpdate("setGuideAbove")}getGuideStyle(e,t){return(e=>{const{axis:t,index:r}=lh(e);return t?.guides?.[r]?.style})({config:this._config,index:e,orientation:t})}setGuideStyle(e,t,r){(e=>{const{style:t,axis:r,index:i}=lh(e);void 0!==r?.guides?.[i]&&(r.guides[i].style=t)})({style:e,config:this._config,index:t,orientation:r}),this.emitConfigUpdate("setGuideStyle")}}class hh extends fh{getXGuidesLength(){return this._config.axes?.[0]?.guides?.length}addXAxisGuide(e,t){uh({config:this._config,name:e,index:t,orientation:nh.X}),this.emitConfigUpdate("addXAxisGuide")}deleteXAxisGuide(e){dh({config:this._config,index:e,orientation:nh.X}),this.emitConfigUpdate("deleteXAxisGuide")}}zc(hh,[fh]);class ph extends fh{getYGuidesLength(){return this._config.axes?.[1]?.guides?.length}addYAxisGuide(e,t){uh({config:this._config,name:e,index:t,orientation:nh.Y}),this.emitConfigUpdate("addYAxisGuide")}deleteYAxisGuide(e){dh({config:this._config,index:e,orientation:nh.Y}),this.emitConfigUpdate("deleteYAxisGuide")}}zc(ph,[fh]);const gh=e=>"timeIntervalSize"in e.series[0]?e.series[0].timeIntervalSize:void 0,mh=e=>"timeIntervalUnits"in e.series[0]?e.series[0].timeIntervalUnits:void 0,yh=e=>"timeAggregationType"in e.series[0]?e.series[0].timeAggregationType:void 0,vh=e=>"trimIncompleteTimeInterval"in e.series[0]?e.series[0].trimIncompleteTimeInterval:void 0,bh=e=>"nullPolicy"in e.series[0]?e.series[0].nullPolicy:void 0,wh=(e,t)=>{t?.series?.forEach((t=>{t.type!==yc&&t.type!==mc||(t.timeIntervalSize=e)})),tu(t,null),eu(t,null)},Sh=(e,t)=>{t?.series?.forEach((t=>{t.type!==yc&&t.type!==mc||(t.nullPolicy=e)})),tu(t,null),eu(t,null)};class _h extends rc{getTimeIntervalSize(){return gh(this._config)}setTimeIntervalSize(e){wh(e,this._config),this.emitConfigUpdate("setTimeIntervalSize")}getTimeIntervalUnits(){return mh(this._config)}setTimeIntervalUnits(e){((e,t)=>{t.series?.forEach((t=>{t.type!==yc&&t.type!==mc||(t.timeIntervalUnits=e)})),tu(t,null),eu(t,null)})(e,this._config),this.emitConfigUpdate("setTimeIntervalUnits")}getTimeAggregationType(){return yh(this._config)}setTimeAggregationType(e){((e,t)=>{t.series?.forEach((t=>{t.type!==yc&&t.type!==mc||(t.timeAggregationType=e)})),tu(t,null),eu(t,null)})(e,this._config),this.emitConfigUpdate("setTimeAggregationType")}getTrimIncompleteTimeInterval(){return vh(this._config)}setTrimIncompleteTimeInterval(e){((e,t)=>{t.series?.forEach((t=>{t.type!==yc&&t.type!==mc||(t.trimIncompleteTimeInterval=e)})),tu(t,null),eu(t,null)})(e,this._config),this.emitConfigUpdate("setTrimIncompleteTimeInterval")}getNullPolicy(){return bh(this._config)}setNullPolicy(e){Sh(e,this._config),this.emitConfigUpdate("setNullPolicy")}resetTimeInterval(){var e;e=this._config,wh(0,e),this.emitConfigUpdate("resetTimeInterval")}}const xh=e=>{const t=Bs(e.series);let r=!1;return t!==yc&&t!==mc||(r=(e=>{let t=rh.xAxisAsc;const r=e.orderOptions?.data?.orderType??Tc,i=e.orderOptions?.data?.orderBy??Fc;return t=r===Tc&&Array.isArray(i)?rh.customSort:r===Tc?i===Fc?rh.xAxisAsc:rh.xAxisDesc:i===Fc?rh.yAxisAsc:rh.yAxisDesc,t})(e)===rh.customSort),r},Ph=e=>{let t=[];const r=e.orderOptions?.data?.orderType;return xh(e)&&r===Tc&&(t=e.orderOptions?.data?.orderBy),t},Fh=(e,t,r)=>{let i=Tc,a=Fc;const s=Bs(t.series);t.orderOptions??={},e===rh.customSort&&void 0!==r?(a=[...r],t.orderOptions.data={orderType:i,orderBy:a}):s!==yc&&s!==mc||(i=e===rh.xAxisAsc||e===rh.xAxisDesc?Tc:Oc,a=e===rh.xAxisAsc||e===rh.yAxisAsc?Fc:Cc,t.orderOptions.data={orderType:i,orderBy:a})},Ch=e=>e?.series?.[0]?.x??"";async function Eh(e){const{seriesIndex:t,config:r,layerInfo:i}=e,{objectIdField:a}=i??{};let s;const o=r.series[t??0];let n=!1;if(void 0===o){n=r.series.slice(0,t).every((e=>kl(e)))}else n=kl(o);s=n?await la({seriesIndex:t,objectIDField:a}):await ua({seriesIndex:t,objectIDField:a});const l=Ch(r),c=r.series[0]?.dataLabels?.visible??!1,u={...s,x:l,y:"",dataLabels:{...s?.dataLabels,visible:c},rotated:Ms(r)},d=Oh(r);if(u.query={groupByFieldsForStatistics:[l]},d!==oc&&void 0!==a){const e=`${d}_${a}_0`.toUpperCase();u.y=e,u.query.outStatistics=[{statisticType:d,onStatisticField:a,outStatisticFieldName:e}]}if(kl(u)){let e;void 0!==r?.series?.[0]&&(e=Js(r.series)),e!==_s&&e!==Es&&(u.timeIntervalSize=gh(r),u.timeIntervalUnits=mh(r),u.timeAggregationType=yh(r),u.trimIncompleteTimeInterval=vh(r),u.nullPolicy=bh(r))}return If(u)}async function kh(e,t){const{layerFieldsInfo:r,objectIdField:i}=t,a=Ch(e),s=Js(e.series),o=Ah(e),n=Oh(e),l=jh(e),c=0===o.length||o.includes(i),u=await va(n),d=c?"":o.map((e=>Ns(r??[],e))).join(", "),f=Ns(r??[],a),h=Ns(r??[],l),p=e.series.some((e=>Il(e))),g=p?"category":"xAxisField",m=f;let y="";const v=await Hc();if(s===Fs)y=Pi(v.titleLabels.aggrTypeOfAggrFields,{aggregationType:u,aggregationFields:d});else if(n===oc){const e=c?i:d;if(""===l){const t=p?"aggrTypeCategory":"aggrTypeXAxisField";y=Pi(v.titleLabels[t],{aggregationType:e,[g]:m})}else{const t=p?"aggrTypeCategoryBySplitBy":"aggrTypeXAxisFieldBySplitBy";y=Pi(v.titleLabels[t],{aggregationType:e,[g]:m,splitByField:h})}}else if(n===ac)if(""===l){const e=p?"aggrTypeCategory":"aggrTypeXAxisField";y=Pi(v.titleLabels[e],{aggregationType:u,[g]:m})}else{const e=p?"aggrTypeCategoryBySplitBy":"aggrTypeXAxisFieldBySplitBy";y=Pi(v.titleLabels[e],{aggregationType:u,[g]:m,splitByField:h})}else if(""!==l){const e=p?"aggrTypeOfAggrFieldByCategoryBySplitByField":"aggrTypeOfAggrFieldByXAxisFieldBySplitByField";y=Pi(v.titleLabels[e],{aggregationType:u,aggregationField:d,[g]:m,splitByField:h})}else if(o.length>0){const e=p?"aggrTypeOfAggrFieldsByCategory":"aggrTypeOfAggrFieldsByXAxisField";y=Pi(v.titleLabels[e],{aggregationType:u,aggregationFields:d,[g]:m})}return y}const Ih=e=>Xs({where:e.query?.where,normalize:!1,escape:!1})??"",Oh=e=>e?.series?.[0]?.query?.outStatistics?.[0]?.statisticType??oc,jh=Dd((e=>{const t=e?.series?.[0]?.query?.where?.split("=")[0].trim()??"";return Ys(e?.series?.[0]?.query?.where)?"":t}),(e=>e?.series?.[0]?.query?.where)),Ah=Dd((e=>{let t=[];if(""===jh(e))t=e?.series.map((e=>{const t=e.query?.outStatistics?.map((e=>e.onStatisticField))??[];return t?.length>0?t:e.y})).flat()??[];else{const r=e?.series?.[0],i=r?.query?.outStatistics?.[0]?.onStatisticField??[r?.y].flat()[0];t=void 0!==i?[i]:[]}return[...new Set(t.filter((e=>""!==e)))]}),(e=>e?.series)),Th=async(e,t,r)=>{const{objectIdField:i}=r;let a=Oh(t);0===e.length?(e.push(i),a=ac):a===ac&&e.length>=1&&!e.includes(i)&&(a=sc);const s=jh(t);await Uh({splitByField:s,numericFields:e,aggregationType:a,config:t,layerInfo:r});Kc(t,1,await Wc({config:t,layerInfo:r,numericFields:Ah(t),aggregationType:Oh(t)})),t.title&&(t.title.content.text=await kh(t,r)),await tu(t,null),await eu(t,null),Lh(t,r)};function Lh(e,t){let r=!1;const i=Oh(e),a=Ah(e);i===ac?r=!0:i===oc&&(r=a.every((e=>{const r=t.layerFieldsInfo.find((t=>t.name===e));return void 0!==r&&wl(r)}))),nu(e,1,r);if(e.series.some((e=>kl(e)))){const r=Ch(e),i=t.layerFieldsInfo.find((e=>e.name===r)),a=void 0!==i&&wl(i);nu(e,0,a)}}const Dh=e=>{let t=rh.xAxisAsc;const r=e.orderOptions?.data?.orderType??Tc,i=e.orderOptions?.data?.orderBy??Fc;return t=r===Tc&&Array.isArray(i)?rh.customSort:r===Tc?i===Fc?rh.xAxisAsc:rh.xAxisDesc:i===Fc?rh.yAxisAsc:rh.yAxisDesc,t};async function $h(e){const{numericFields:t,aggregationType:r,config:i,layerInfo:a}=e,{layerFieldsInfo:s,objectIdField:o}=a,n=[];let l=!1;const c=t.map(((e,t)=>`${r}_${e}_${t}`.toUpperCase()));for(let e=0;e<t.length;e+=1){const u=await Eh({config:i,layerInfo:a,seriesIndex:e}),d=c[e].toUpperCase(),f=t[e];let h={...u,query:{...u.query}};f!==o&&(h={...h,id:f,name:Ns(s,f)});let p=f;void 0!==h.query&&(r!==oc?(p=d,h.query.outStatistics=[{...u.query?.outStatistics?.[0]??{},onStatisticField:f,outStatisticFieldName:d,statisticType:r}]):delete h.query.outStatistics),h.y=p;const g=i.series.find((e=>e.query?.outStatistics?.[0]?.onStatisticField===f&&void 0===e.query.where));if(void 0!==g&&"string"==typeof g.y&&""!==g.y.trim()){i.colorMatch||(Il(h)&&Il(g)?h.fillSymbol=g.fillSymbol:kl(h)&&kl(g)&&(h.lineSymbol=g.lineSymbol,h.markerSymbol=g.markerSymbol),l=!0);const t=await Eh({config:i,layerInfo:a,seriesIndex:e});h.id=g.id,g.id!==t.id&&g.name!==t.name&&(h.id=g.id,h.name=g.name)}n.push(h)}return 1!==i.series.length||1!==n.length||i.colorMatch||(Il(i.series[0])&&Il(n[0])?n[0].fillSymbol=i.series[0].fillSymbol:kl(i.series[0])&&kl(n[0])&&(n[0].lineSymbol=i.series[0].lineSymbol,n[0].markerSymbol=i.series[0].markerSymbol),l=!0),i.colorMatch=!l,n}const Uh=async e=>{const{splitByField:t,numericFields:r,aggregationType:i,config:a,layerInfo:s}=e,{x:o}=a.series[0],n=Dh(a),l=Js(a.series);""===t||r.length>1?o===$c||void 0===o||""===o.trim()||l===Fs?a.series=await async function(e){const{numericFields:t,aggregationType:r,config:i,layerInfo:a}=e;let s=!1;const o=await Eh({config:i,layerInfo:a,seriesIndex:0}),n=await Hc(),l={...o,id:`series_${Date.now()}`,name:n.axisLabels.values,x:$c,y:"arcgis_charts_bar_line_from_fields_value"},c=[];for(const e of t)c.push({onStatisticField:e,outStatisticFieldName:`${e}_0`.toUpperCase(),statisticType:r});l.query={outStatistics:c};const u=i.series[0];return void 0!==u&&(l.id=u.id,i.colorMatch||(Il(u)&&Il(l)?l.fillSymbol=u.fillSymbol:kl(l)&&kl(u)&&(l.lineSymbol=u.lineSymbol,l.markerSymbol=u.markerSymbol),s=!0),l.id=u.id,u.name!==o.name&&(l.name=u.name)),1!==i.series.length||i.colorMatch||(Il(l)?l.fillSymbol=i.series[0].fillSymbol:kl(l)&&(l.lineSymbol=i.series[0].lineSymbol,l.markerSymbol=i.series[0].markerSymbol),s=!0),i.colorMatch=!s,[l]}({config:a,layerInfo:s,numericFields:r,aggregationType:i}):a.series=await $h({config:a,layerInfo:s,numericFields:r,aggregationType:i}):a.series=await async function(e){const{splitByField:t,numericFields:r,aggregationType:i,config:a,layerInfo:s}=e,{layer:o,layerFieldsInfo:n}=s,{fetchNullValues:l}=a?.series?.[0]?.query??{},c=Ch(a),u=c!==$c?c:void 0,{categoriesArray:d,fieldName:f,splitByFieldType:h,numericalField:p}=await Mc({config:a,layer:o,layerFieldsInfo:n,xAxisField:u,aggregationFields:r,aggregationType:i,splitByField:t,fetchNullValues:l});let g=[],m=!1;if(0===d.length){g=await $h({numericFields:r,aggregationType:i,config:a,layerInfo:s});for(const e of g)e.query&&(e.query.where=`${t}=''`)}else for(let e=0;e<d.length;e+=1){const r=d[e],o=`${f}_${e}`.toUpperCase(),n=await Eh({config:a,layerInfo:s,seriesIndex:e}),l=`${r}`,c={...n,id:l,name:l,y:o,query:{...n.query,where:`${t}=${h===ic&&null!==r?`'${r}'`:r}`,outStatistics:i!==oc?[{...n.query?.outStatistics?.[0]??{},onStatisticField:p,outStatisticFieldName:o,statisticType:i}]:void 0}};i===oc&&(void 0!==c.query&&(delete c.query.outStatistics,delete c.query.groupByFieldsForStatistics),c.y=p);const u=a.series.find((e=>String(Ih(e)).trim().replace(/'/gu,"")===l));void 0!==u&&(a.colorMatch||(Il(c)&&Il(u)?c.fillSymbol=u.fillSymbol:kl(c)&&kl(u)&&(c.lineSymbol=u.lineSymbol,c.markerSymbol=u.markerSymbol),m=!0),c.id=u.id,c.name=u.name),g.push(c)}return a.colorMatch=!m,g}({config:a,layerInfo:s,splitByField:t,numericFields:r,aggregationType:i});const c=Ph(a);Fh(n,a,c)},Bh=async(e,t,r)=>{const i=e.series?.[t],a=jh(e);let s;const o=await Hc();if(Js(e.series)===Fs)s=o.axisLabels.values;else if(Gf(a)){const e=i.query?.outStatistics?.[0]?.onStatisticField;void 0!==e&&e!==r.objectIdField&&(s=Ns(r.layerFieldsInfo,e))}else s=String(Ih(i)).trim().replace(/'/gu,"");return s??i.id},Mh=(e,t)=>{t.orderOptions??={};const r=t.orderOptions?.data?.orderType;Dh(t)===rh.customSort&&r===Tc&&(t.orderOptions.data={orderType:Tc,orderBy:[...e]})},Rh=async(e,t)=>{const r=Ch(e),i=au(e)?.type,a=Ah(e),s=Js(e.series);let o=[];return i===uc&&(s===Fs||r===$c?o=a.map((e=>Ns(t?.layerFieldsInfo,e))):""!==r.trim()&&r!==$c&&void 0!==t&&(o=await Vc({layerInfo:t,config:e,category:r}))),o},Nh=(e,t,r)=>{r.series?.[t]&&(r.series[t].name=e)},zh=(e,t,r)=>{const i=r.series?.[t];i&&(Il(i)?i.fillSymbol={...ca(t),...i.fillSymbol,color:e}:kl(i)&&(i.lineSymbol={...ra(t),...i.lineSymbol,color:e}))},Vh=async e=>{const{newStackedType:t,config:r,layerInfo:i}=e;if(r.stackedType=t,void 0!==i){Kc(r,1,await Wc({config:r,layerInfo:i,numericFields:Ah(r),aggregationType:Oh(r)}))}r.axes?.[1]&&(r.axes[1].valueFormat=t===Pc?{type:O,intlOptions:{style:"percent",minimumFractionDigits:0,maximumFractionDigits:0}}:Hi()),await tu(r,null),await eu(r,null)};class qh extends rc{getXAxisField(){return Ch(this._config)}async setXAxisField(e){const t=""===e.trim();t||await(async(e,t,r)=>{const{layerFieldsInfo:i}=r??{},a=t?.series?.length??0,s=Ch(t);let o;const n=t.series.some((e=>Il(e))),l=Ol(t.series);if(void 0!==i){const r=Sl(i);!r.includes(s)&&r.includes(e)?o={type:"date",intlOptions:{}}:r.includes(s)&&!r.includes(e)&&(o=n?{type:"category",characterLimit:11}:Hi());const a=i.find((t=>t.name===e));a?.type===ic&&(o={type:"category",characterLimit:11}),void 0!==o&&await su(t,o)}if(0===a&&(t.series=[await Eh({config:t,layerInfo:r})]),t.series.forEach((t=>{t.x=e,void 0!==t.query&&(t.query.groupByFieldsForStatistics=[e])})),Kc(t,0,Ns(i,e)),void 0!==r){Kc(t,1,await Wc({config:t,layerInfo:r,numericFields:Ah(t),aggregationType:Oh(t)})),t.title&&(t.title.content.text=await kh(t,r)),Lh(t,r);const e=Ah(t);await Th(e,t,r)}await tu(t,null),await eu(t,null),l&&(await iu(t,null),await ru(t,null),wh(0,t),Sh(o?.type===dc?Ec:kc,t))})(e,this._config,this.layerInfo);const r=Ah(this._config),i=Js(this._config.series)===Fs,a=r.includes(this.layerInfo?.objectIdField??"");if(t||i&&a){await this.resetConfig();const e=1===r.length&&r[0]===this.layerInfo?.objectIdField;this.layerInfo&&r.length>0&&!e&&await Th(r,this._config,this.layerInfo)}this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setXAxisField")}getAggregationType(){return Oh(this._config)}async setAggregationType(e){this.layerInfo&&(await(async(e,t,r)=>{const i=Ah(t),a=jh(t);await Uh({splitByField:a,numericFields:i,aggregationType:e,config:t,layerInfo:r}),Kc(t,1,await Wc({config:t,layerInfo:r,numericFields:Ah(t),aggregationType:Oh(t)})),t.title&&(t.title.content.text=await kh(t,r)),await tu(t,null),await eu(t,null),Lh(t,r)})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setAggregationType"))}getSplitByField(){return jh(this._config)}async setSplitByField(e){this.layerInfo?.layerFieldsInfo&&Rc(this.layerInfo?.layerFieldsInfo,e)&&(await(async(e,t,r)=>{const i=Ah(t),a=Oh(t);await Uh({splitByField:e,numericFields:i,aggregationType:a,config:t,layerInfo:r}),Kc(t,1,await Wc({config:t,layerInfo:r,numericFields:Ah(t),aggregationType:Oh(t)})),t.title&&(t.title.content.text=await kh(t,r)),await tu(t,null),await eu(t,null)})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setSplitByField"))}getNumericFields(){return Ah(this._config)}async setNumericFields(e){"string"==typeof e&&(e=[e]);if(Nc(this.layerInfo?.layerFieldsInfo??[],e)&&this.layerInfo){await Th(e,this._config,this.layerInfo);const t=Ah(this._config);Js(this._config.series)===Fs&&t.some((e=>e===this.layerInfo?.objectIdField))&&await this.resetConfig(),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setNumericFields")}}getDataFilter(){return this._config.dataFilters}async setDataFilter(e){var t,r;t=e,r=this._config,void 0!==t?r.dataFilters=t:delete r.dataFilters;const i=Dh(this._config);if(i===rh.customSort){const e=await Rh(this._config,this.layerInfo);Fh(i,this._config,e)}this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setDataFilter")}async getCustomSortValues(){return await Rh(this._config,this.layerInfo)}getSortOrder(){return Dh(this._config)}setSortOrder(e,t){Fh(e,this._config,t),this.emitConfigUpdate("setSortOrder")}getOrderByList(){return Ph(this._config)}setOrderByList(e){!Cl(this._config)&&(Mh(e,this._config),this.emitConfigUpdate("setOrderByList"))}async updateSeriesFromLayerFilter(){void 0!==this.layerInfo&&(await Uh({splitByField:this.getSplitByField(),numericFields:this.getNumericFields(),aggregationType:this.getAggregationType(),config:this._config,layerInfo:this.layerInfo}),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("updateSeriesFromLayerFilter"))}getSeriesName(e){return((e,t)=>t.series?.[e]?.name)(e,this._config)}setSeriesName(e,t){Nh(e,t,this._config),this.emitConfigUpdate("setSeriesName")}getSeriesColor(e){return((e,t)=>{const r=t.series?.[e];let i;return Il(r)?i=r.fillSymbol?.color:kl(r)&&(i=r.lineSymbol?.color),i})(e,this._config)}setSeriesColor(e,t){zh(e,t,this._config),this.emitConfigUpdate("setSeriesColor")}getOrderOfSeries(){return this._config.series.map((e=>e.id))}setOrderOfSeries(e){var t,r;t=e,r=this._config,r.series?.sort(((e,r)=>t.findIndex((t=>e.id===t))-t.findIndex((e=>r.id===e)))),this.emitConfigUpdate("setOrderOfSeries")}getStackedType(){return this._config.stackedType??xc}async setStackedType(e){await Vh({newStackedType:e,config:this._config,layerInfo:this.layerInfo}),this.emitConfigUpdate("setStackedType")}moveSeries(e,t){const r=this.getOrderOfSeries(),[i]=r.splice(e,1);r.splice(t,0,i),this.setOrderOfSeries(r),this.emitConfigUpdate("moveSeries")}moveCustomSortValuesInOrderByList(e,t){const r=Ph(this._config),[i]=r.splice(e,1);r.splice(t,0,i),Mh(r,this._config),this.emitConfigUpdate("moveCustomSortValuesInOrderByList")}async resetConfig(){const e=this._config.id;this._config=await this.generateDefaultConfig(),this._config.id=e,this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("resetConfig")}}class Gh extends qh{constructor(){super(...arguments),this._chartType=yc}async setup(e){await this.loadConfigFromLayer(e),void 0!==e.config&&await this.updateSeriesFromLayerFilter(),this.resolveSetup()}async generateDefaultConfig(){const e=await ga();return e.series=[await ua({objectIDField:this.layerInfo?.objectIdField})],e}getSeriesHideOversizedStackedLabels(e){return Uc(e,this._config)}setSeriesHideOversizedStackedLabels(e,t){Bc(e,t,this._config),this.emitConfigUpdate("setSeriesHideOversizedStackedLabels")}async resetSeriesStyling(){const e=this.getSeriesLength();for(let t=0;t<e;t+=1){const e=this.getSeriesId(t),r=Ri({colorIndex:t,opacity:Ai});if(zh(r,t,this._config),void 0!==this.layerInfo){const r=await Bh(this._config,t,this.layerInfo);r!==this.layerInfo.objectIdField&&Nh(r??e,t,this._config)}}this._config.colorMatch=!0,this.emitConfigUpdate("resetSeriesStyling")}async resetAvailable(){const e=!this.getColorMatch();let t=!1;if(!e&&void 0!==this.layerInfo){const e=this.getSeriesLength();for(let r=0;r<e;r+=1){const e=await Bh(this._config,r,this.layerInfo),i=this.getSeriesName(r);if(void 0!==e&&e!==this.layerInfo.objectIdField&&e!==i){t=!0;break}}}return e||t}}zc(Gh,[Zf,Qc,qc,eh,th,hh,ph,_h]);const Qh=(e,t,r)=>{const i=r;void 0!==i?.series?.[t]&&(i.series[t].name=e)},Hh=e=>{const t=e.series[0];return!0===e.showMean&&El(t)?t.fillSymbol?.color:void 0},Kh=(e,t)=>{const r=t.series[0];!0===t.showMean&&El(r)&&(void 0!==r.fillSymbol?r.fillSymbol.color=e:r.fillSymbol={...ea(),color:e})},Wh=(e,t,r)=>{const i=r,a=i?.series?.[t];a?.type===bc&&void 0!==a.fillSymbol?a.fillSymbol.color=e:a?.type===mc&&void 0!==a.lineSymbol&&(a.lineSymbol.color=e,void 0!==a.markerSymbol&&(a.markerSymbol.color=e))},Xh=e=>e.series.map((e=>e.id)),Yh=(e,t)=>{t?.series?.sort(((t,r)=>e.findIndex((e=>t.id===e))-e.findIndex((e=>r.id===e))))},Jh=e=>Ks(e)?.x??Ui,Zh=Dd((e=>{const t=Ks(e),r=t?.query?.where?.split("=")[0].trim()??"";return Ys(t?.query?.where)?"":r}),(e=>Ks(e)?.query?.where)),ep=Dd((e=>function(e,t){let r=[];const i=t??function(e){return e.map((e=>e.id)).filter((e=>"undefined"!==e))}(e),a=Js(e);return r=e.filter((e=>i.includes(e.id))).map((e=>{let t="y"in e?e.y:void 0;return void 0!==t&&a===Es&&(t=`${t.toString()}_${Xs({where:e.query?.where})}`),t})).filter((e=>void 0!==e)),Array.from(new Set(r.flat()))}(e?.series).filter((e=>""!==e))),(e=>e?.series)),tp=async e=>{const{category:t,seriesIndex:r,y:i}=e;return If({...await da(r),x:void 0===t||""===t?Ui:t,y:i,query:{}})},rp=async e=>{const{category:t,seriesIndex:r,y:i}=e;return If({...await la({seriesIndex:r}),x:void 0===t||""===t?Ui:t,y:i,query:{}})};async function ip(e){const{x:t,y:r,seriesTemplate:i}=e,{id:a,fillSymbol:s}=i??{},o=await da(),n=a??`series_${Date.now()}`;return o.id=n,o.name=n,o.x=t,o.y=[...r],s?o.fillSymbol=s:o.fillSymbol&&(o.fillSymbol.color=ba,o.fillSymbol?.outline&&(o.fillSymbol.outline.color=ba)),o}async function ap(e){const{numericFields:t,config:r,layerInfo:i,category:a}=e,{layerFieldsInfo:s}=i,o=[],n=a??Jh(r);let l=!1;if(0===t.length){const e=await tp({y:"",seriesIndex:0,category:n});o.push(e)}else if(n===Ui){const e=await Hc(),a=t.length>1?t:t[0],s=await tp({y:a,seriesIndex:0,category:n}),c=t.length>1?e.axisLabels.values:Ns(i.layerFieldsInfo,t[0]),u={...s,id:t[0],name:c,x:n},d=r.series.find((e=>Qf(a,e.y)&&void 0===e.query?.where));void 0!==d&&(!r.colorMatch&&"fillSymbol"in d&&(u.fillSymbol=d.fillSymbol,l=!0),u.id=d.id,u.name=d.name),o.push(u)}else for(let e=0;e<t.length;e+=1){const i=t[e],a=await tp({y:i,seriesIndex:e,category:n}),c=Ns(s,i),u={...a,id:i,name:c,x:n},d=r.series.find((e=>i===e.y));void 0!==d&&(!r.colorMatch&&"fillSymbol"in d&&(u.fillSymbol=d.fillSymbol,l=!0),u.id=d.id,u.name=d.name),o.push(u)}return 1===r.series.length&&1===o.length&&!r.colorMatch&&"fillSymbol"in r.series[0]&&(o[0].fillSymbol=r.series[0].fillSymbol,l=!0),r.colorMatch=!l,o}const sp=e=>e?.query?.where?.split("=")[1].trim().replace(/'/gu,"")??"";function op(e){const{formerSeries:t,newSeries:r,showMean:i}=e;let a=r;const s=e=>e.type===(i?mc:bc),o=t.filter(s).map((e=>e.id)),n=r.filter(s).map((e=>e.id));return o.length===n.length&&JSON.stringify(o)!==JSON.stringify(n)&&(a=a.sort(((e,t)=>o.findIndex((t=>t===e.id))-o.findIndex((e=>e===t.id))))),a}async function np(e){const{config:t,layerInfo:r,splitByField:i,numericFields:a,category:s}=e,{layer:o,layerFieldsInfo:n}=r,{fetchNullValues:l}=Ks(t)?.query??{},c=s??Jh(t),{categoriesArray:u,splitByFieldType:d}=await Mc({config:t,layer:o,layerFieldsInfo:n,xAxisField:c!==Ui?c:void 0,aggregationFields:a,splitByField:i,fetchNullValues:l});let f=[],h=!1;const p=(e=>e.series.some((e=>e.type===mc))&&e.series.some((e=>e.type===bc)))(t);if(0===u.length){f=await ap({numericFields:a,category:c,config:t,layerInfo:r});for(const e of f)e.query&&(e.query.where=`${i}=''`)}else for(let e=0;e<u.length;e+=1){const r=u[e],s={y:a,seriesIndex:e,category:c},o=p?await rp(s):await tp(s),n=`${r}`,l={...o,id:n,name:n,x:void 0===c||""===c?Ui:c,query:{...o.query,where:`${i}=${d===ic&&null!==r?`'${r}'`:r}`}},g=t.series.find((e=>sp(e)===n));void 0!==g&&(t.colorMatch||(l.type===bc?El(g)?l.fillSymbol=g.fillSymbol:l.fillSymbol={...ea(),color:g.lineSymbol?.color}:El(g)?(l.lineSymbol={...Qi({width:2}),...void 0!==g.fillSymbol?{color:g.fillSymbol.color}:{}},l.markerSymbol={...ta(),...void 0!==g.fillSymbol?{color:g.fillSymbol.color}:{}}):(l.lineSymbol=g.lineSymbol,l.markerSymbol=g.markerSymbol),h=!0),l.id=g.id,l.name=g.name),f.push(l)}if(f=op({formerSeries:t.series,newSeries:f,showMean:gp(t)}),t.colorMatch=!h,gp(t)){const e=t.series.find((e=>e.type===bc)),r=await ip({x:c,y:a,seriesTemplate:e});f.unshift(r)}return f}const lp=async e=>{const{splitByField:t,numericFields:r,category:i,config:a,layerInfo:s}=e,o=!(r.length>1&&i!==Ui)&&""!==t;mp(!!o&&a.showMean,a),a.series=o?await np({config:a,layerInfo:s,splitByField:t,numericFields:r,category:i}):await ap({numericFields:r,config:a,layerInfo:s,category:i})},cp=e=>e?.standardizeValues??!1;async function up(e,t){const{layerFieldsInfo:r}=t,i=cp(e),a=await Hc();let s=i?a.axisLabels.standardizedValues:a.axisLabels.values,o=e?.series?.map((e=>e.y)).flat();return o=[...new Set(o)],1===o.length&&(s=Ns(r,o[0])),s}async function dp(e,t){const{layerFieldsInfo:r}=t,i=Jh(e),a=ep(e),s=Zh(e),o=a.map((e=>Ns(r??[],e))).join(", "),n=Ns(r??[],i);let l="";const c=await Hc();return a.length>0&&(l=i!==Ui&&""!==s?Pi(c.titleLabels.distributionOfFieldsByCategoryAndSplitBy,{valueFields:o,category:n,splitByField:s}):i!==Ui?Pi(c.titleLabels.distributionOfFieldsByCategory,{valueFields:o,category:n}):""!==s?Pi(c.titleLabels.distributionOfFieldsByCategory,{valueFields:o,category:s}):Pi(c.titleLabels.distributionOfField,{valueField:o})),l}const fp=(e,t,r,i)=>{let a="string"==typeof e.y?Ns(r.layerFieldsInfo,e.y):i.axisLabels.values;return Gf(t)||(a=sp(e)),a??e.id},hp=e=>{let t=ih.xAxisAsc;const r=e.orderOptions?.data?.orderType??Tc,i=e.orderOptions?.data?.orderBy??Fc;switch(r){case Tc:t=Array.isArray(i)?ih.customSort:i===Fc?ih.xAxisAsc:ih.xAxisDesc;break;case jc:t=i===Fc?ih.meanAsc:ih.meanDesc;break;case Ac:t=i===Fc?ih.medianAsc:ih.medianDesc}return t},pp=(e,t,r)=>{let i=Tc,a=Fc;if(t.orderOptions=t.orderOptions??{},e===ih.customSort&&void 0!==r)t.orderOptions.data={orderType:Tc,orderBy:r};else{switch(e){case ih.xAxisAsc:i=Tc,a=Fc;break;case ih.xAxisDesc:i=Tc,a=Cc;break;case ih.meanAsc:i=jc,a=Fc;break;case ih.meanDesc:i=jc,a=Cc;break;case ih.medianAsc:i=Ac,a=Fc;break;case ih.medianDesc:i=Ac,a=Cc}t.orderOptions.data={orderType:i,orderBy:a}}},gp=e=>e.showMean??!1,mp=async(e=!1,t,r)=>{const i=e?r:Hh(t),a=(e??!1)!==(t.showMean??!1);if(t.showMean=e,a){let r;r=e?function(e){return e.every(El)}(t.series)?await async function(e,t){const r=[];return e.forEach((e=>{if(e.type===bc){const{type:t,fillSymbol:i,...a}=e;r.push({...a,type:mc,lineSymbol:{...Qi({width:2}),...void 0!==i?{color:i.color}:{}},markerSymbol:{...ta(),...void 0!==i?{color:i.color}:{}}})}})),r.unshift(await ip({x:e[0].x,y:e[0].y,seriesTemplate:t})),r}(t.series):t.series:function(e){const t=e.slice(1),r=[];return t.forEach((e=>{if(e.type===mc){const{type:t,lineSymbol:i,markerSymbol:a,...s}=e,o=ea();r.push({...s,type:bc,fillSymbol:{...o,color:i?.color}})}})),r}(t.series),r&&(r=op({formerSeries:t.series,newSeries:r,showMean:e}),t.series=r)}return e&&void 0!==r&&Kh(r,t),{previousMeanLinesBoxColor:i}},yp=e=>{let t=[];const r=e.orderOptions?.data?.orderType;return hp(e)===ih.customSort&&r===Tc&&(t=e.orderOptions?.data?.orderBy),t},vp=(e,t)=>{t.orderOptions??={};const r=t.orderOptions?.data?.orderType;hp(t)===ih.customSort&&r===Tc&&(t.orderOptions.data={orderType:Tc,orderBy:e})},bp=e=>e.lineSymbol?.style,wp=(e,t)=>{t.lineSymbol??=ra(),t.lineSymbol.style=e},Sp=e=>e.lineSymbol?.width,_p=(e,t)=>{t.lineSymbol??=ra(),t.lineSymbol.width=e};class xp extends rc{constructor(){super(...arguments),this._chartType=bc}async setup(e){await this.loadConfigFromLayer(e),this.commonStrings=await Hc(),void 0!==e.config&&await this.updateSeriesFromLayerFilter(),this.resolveSetup()}getCategory(){return Jh(this._config)}async setCategory(e){await(async(e,t,r)=>{const{layerFieldsInfo:i}=r,a=Jh(t),s=Zh(t),o=ep(t),n=Sl(i);let l;!n.includes(a)&&n.includes(e)?l={type:"date",intlOptions:{}}:n.includes(a)&&!n.includes(e)&&(l={type:"category",characterLimit:11}),void 0!==l&&su(t,l),await lp({splitByField:s,numericFields:o,category:e,config:t,layerInfo:r}),Kc(t,0,e!==Ui?Ns(i,e):""),Kc(t,1,await up(t,r)),void 0!==t?.title&&(t.title.content.text=await dp(t,r)),tu(t,null),eu(t,null)})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setCategory")}async getCustomSortValues(){const e=Jh(this._config),t=this.getXAxisValueFormat()?.type,r=this.getNumericFields();let i=[];return t===uc&&(i=e===Ui?r.map((e=>Ns(this.layerInfo.layerFieldsInfo,e))):await Vc({layerInfo:this.layerInfo,config:this._config,category:e})),i}getNumericFields(){return ep(this._config)}async setNumericFields(e){const{layerFieldsInfo:t}=this.layerInfo;"string"==typeof e&&(e=[e]);Nc(t,e)?(await(async(e,t,r)=>{const i=Jh(t),a=Zh(t);await lp({splitByField:a,numericFields:e,category:i,config:t,layerInfo:r}),Kc(t,1,await up(t,r)),void 0!==t?.title&&(t.title.content.text=await dp(t,r)),tu(t,null),eu(t,null)})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setNumericFields")):console.log("Invalid numericFields")}getSplitByField(){return Zh(this._config)}async setSplitByField(e){Rc(this.layerInfo.layerFieldsInfo,e)?(await(async(e,t,r)=>{const i=Jh(t),a=ep(t);await lp({splitByField:e,numericFields:a,category:i,config:t,layerInfo:r}),Kc(t,1,await up(t,r)),void 0!==t?.title&&(t.title.content.text=await dp(t,r)),tu(t,null),eu(t,null)})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setSplitByField")):console.log("Invalid splitByField")}getShowOutliers(){return e=this._config,e?.showOutliers??!1;var e}async setShowOutliers(e){await(async(e,t,r)=>{t.showOutliers=e,Kc(t,1,await up(t,r))})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setShowOutliers")}getStandardizeValues(){return cp(this._config)}async setStandardizeValues(e){await(async(e,t,r)=>{t.standardizeValues=e,Kc(t,1,await up(t,r))})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setStandardizeValues")}getSortOrder(){return hp(this._config)}setSortOrder(e,t){pp(e,this._config,t),this.emitConfigUpdate("setSortOrder")}getOrderByList(){return yp(this._config)}setOrderByList(e){vp(e,this._config),this.emitConfigUpdate("setOrderByList")}async updateSeriesFromLayerFilter(){await lp({splitByField:this.getSplitByField(),numericFields:this.getNumericFields(),category:this.getCategory(),config:this._config,layerInfo:this.layerInfo}),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("updateSeriesFromLayerFilter")}getDataFilter(){return this._config.dataFilters}async setDataFilter(e){var t,r;t=e,r=this._config,void 0!==t?r.dataFilters=t:delete r.dataFilters;const i=hp(this._config);if(i===ih.customSort){const e=await(async(e,t)=>{const r=Jh(e),i=au(e)?.type,a=ep(e);let s=[];return i===uc&&(r===Ui?s=a:""!==r.trim()&&r!==Ui&&(s=await Vc({layerInfo:t,config:e,category:r}))),s})(this._config,this.layerInfo);pp(i,this._config,e)}this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setDataFilter")}getShowMeanLines(){return gp(this._config)}async setShowMeanLines(e){const{previousMeanLinesBoxColor:t}=await mp(e,this._config,this.previousMeanLinesBoxColor);this.previousMeanLinesBoxColor=t,this.emitConfigUpdate("setShowMeanLines")}getMeanLinesBoxColor(){return Hh(this._config)}setMeanLinesBoxColor(e){Kh(e,this._config),this.emitConfigUpdate("setMeanLinesBoxColor")}async generateDefaultConfig(){const e=await async function(e=Zi()){return{version:i,type:C,id:e,rotated:!1,colorMatch:!0,orderOptions:{data:{orderType:Y,orderBy:N}},title:Gi({text:await Ji(),visible:!0,font:Vi(re)}),subTitle:Gi(),footer:Gi({text:"",visible:!0,font:Vi(oe)}),background:[255,255,255,255],series:[],legend:Xi(),axes:await sa(U),standardizeValues:!0,showOutliers:!1}}();return e.series=[await da()],e}getSeriesName(e){return((e,t)=>t?.series?.[e]?.name)(e,this._config)}setSeriesName(e,t){Qh(e,t,this._config),this.emitConfigUpdate("setSeriesName")}getSeriesColor(e){return((e,t)=>{let r;const i=t.series?.[e];return i?.type===bc?r=i.fillSymbol?.color:i?.type===mc&&(r=i.lineSymbol?.color),r})(e,this._config)}setSeriesColor(e,t){Wh(e,t,this._config),this.emitConfigUpdate("setSeriesColor")}getSeriesLineStyle(e){const t=this._config.series[e];return!0===this.getShowMeanLines()&&kl(t)?bp(t):void 0}setSeriesLineStyle(e,t){const r=this._config.series[t];!0===this.getShowMeanLines()&&kl(r)&&wp(e,r),this.emitConfigUpdate("setSeriesLineStyle")}getSeriesLineWidth(e){const t=this._config.series[e];return!0===this.getShowMeanLines()&&kl(t)?Sp(t):void 0}setSeriesLineWidth(e,t){const r=this._config.series[t];!0===this.getShowMeanLines()&&kl(r)&&_p(e,r),this.emitConfigUpdate("setSeriesLineWidth")}getOrderOfSeries(){return Xh(this._config)}setOrderOfSeries(e){Yh(e,this._config),this.emitConfigUpdate("setOrderOfSeries")}moveSeries(e,t){((e,t,r)=>{const i=Xh(r),[a]=i.splice(e,1);i.splice(t,0,a),Yh(i,r)})(e,t,this._config),this.emitConfigUpdate("moveSeries")}getBoxPlotSeriesIndexWhenMeanLinesShown(){return e=this._config,gp(e)?e.series.findIndex((e=>e.type===bc)):-1;var e}moveCustomSortValuesInOrderByList(e,t){const r=yp(this._config),[i]=r.splice(e,1);r.splice(t,0,i),vp(r,this._config),this.emitConfigUpdate("moveCustomSortValuesInOrderByList")}resetSeriesStyling(){const e=this.getSeriesLength(),t=this.getShowMeanLines();for(let r=!0===t?1:0;r<e;r+=1){const e=this.getSeriesId(r),i=Ri({colorIndex:r,opacity:Ai}),a=this._config.series[r];Wh(i,r,this._config);const s=fp(a,this.getSplitByField(),this.layerInfo,this.commonStrings);Qh(s??e,r,this._config),!0===t&&kl(a)&&(wp(Di,a),_p(2,a))}!0===t&&Kh(ba,this._config),this._config.colorMatch=!0,this.emitConfigUpdate("resetSeriesStyling")}resetAvailable(){const e=!this.getColorMatch(),t=this.getShowMeanLines(),r=!0===t&&this.getMeanLinesBoxColor()!==ba;let i=!1,a=!1;if(!e){const e=this.getSeriesLength();for(let r=!0===t?1:0;r<e;r+=1){const e=this._config.series[r],s=fp(e,this.getSplitByField(),this.layerInfo,this.commonStrings),o=this.getSeriesName(r);if(void 0!==s&&s!==o){i=!0;break}if(!0===t&&kl(e)){const e=this.getSeriesLineStyle(r),t=this.getSeriesLineWidth(r);if(e!==Di||2!==t){a=!0;break}}}}return e||r||i||a}}zc(xp,[Zf,Qc,qc,eh,th,ph]);const Pp=e=>e.series[0]?.featureIndex,Fp=async(e,t,r)=>{const i=Ip(t),a=Ep(t);null===e?delete t.series[0].featureIndex:void 0!==t.series[0]&&(t.series[0].featureIndex=e),await Cp({config:t,layerInfo:r,field:i,aggregationType:a})},Cp=async e=>{const{config:t,field:r,aggregationType:i}=e;void 0===t.series[0]&&(t.series=[pa({})]);const a=kp(t.series[0]?.featureIndex);let s=a?r:`${i}_${r}`;a&&r.startsWith(`${i}_`)&&(s=r.replace(`${i}_`,"")),t.series[0].x=s,(e=>{const{config:t,field:r,aggregationType:i}=e,a=Pp(t),s=kp(a)?{}:{outStatistics:[{statisticType:i,onStatisticField:r,outStatisticFieldName:`${i}_${r}`}]};t.series[0].query=s})({config:t,field:r,aggregationType:i}),await(async e=>{const{config:t,layerInfo:r,field:i,aggregationType:a}=e;t.title&&(t.title.content.text=await Wc({config:t,layerInfo:r,numericFields:[i],aggregationType:a}))})(e)},Ep=e=>e.series[0]?.query?.outStatistics?.[0]?.statisticType??ac,kp=e=>"number"==typeof e&&e>=0,Ip=e=>kp(e.series[0]?.featureIndex)?e.series[0]?.x:e.series[0]?.query?.outStatistics?.[0]?.onStatisticField??"";class Op extends rc{constructor(){super(...arguments),this._chartType=gc}async setup(e){await this.loadConfigFromLayer(e),this.resolveSetup()}getField(){return Ip(this._config)}async setField(e){await(async(e,t,r)=>{const i=Ep(t);await Cp({config:t,layerInfo:r,field:e,aggregationType:i})})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setField")}getAggregationType(){return Ep(this._config)}async setAggregationType(e){await(async(e,t,r)=>{const i=Ip(t);await Cp({config:t,layerInfo:r,field:i,aggregationType:e})})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setAggregationType")}getInnerRadius(){return this._config.innerRadius??50}setInnerRadius(e){((e,t)=>{t.innerRadius=e})(e,this._config),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setInnerRadius")}getStartAngle(){return this._config.startAngle??-90}setStartAngle(e){((e,t)=>{t.startAngle=e})(e,this._config),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setStartAngle")}getEndAngle(){return this._config.endAngle??270}setEndAngle(e){((e,t)=>{t.endAngle=e})(e,this._config),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setEndAngle")}getValueConversion(){return e=this._config,e.series[0]?.valueConversion;var e}setValueConversion(e){((e,t)=>{void 0!==t.series[0]&&(t.series[0].valueConversion=e)})(e,this._config),this.emitConfigUpdate("setValueConversion")}getFeatureIndex(){return Pp(this._config)}async setFeatureIndex(e){await Fp(e,this._config,this.layerInfo),this.emitConfigUpdate("setFeatureIndex")}removeFeatureIndex(){Fp(null,this._config,this.layerInfo),this.emitConfigUpdate("removeFeatureIndex")}getGaugeSubType(){return this._config.subType??Ic}getNeedleVisibility(){return e=this._config,e.axes[0].needle?.visible??!0;var e}setNeedleVisibility(e){var t,r;t=e,void 0===(r=this._config).axes[0].needle&&(r.axes[0].needle=oa()),r.axes[0].needle.visible=t,this.emitConfigUpdate("setNeedleVisibility")}getNeedleSymbol(){return e=this._config,e.axes[0].needle?.symbol;var e}setNeedleSymbol(e){var t,r;t=e,void 0===(r=this._config).axes[0].needle&&(r.axes[0].needle=oa()),r.axes[0].needle.symbol=t,this.emitConfigUpdate("setNeedleSymbol")}getNeedleStartWidth(){return e=this._config,e.axes[0].needle?.startWidth;var e}setNeedleStartWidth(e){var t,r;t=e,void 0===(r=this._config).axes[0].needle&&(r.axes[0].needle=oa()),r.axes[0].needle.startWidth=t,this.emitConfigUpdate("setNeedleStartWidth")}getNeedleEndWidth(){return e=this._config,e.axes[0].needle?.endWidth;var e}setNeedleEndWidth(e){var t,r;t=e,void 0===(r=this._config).axes[0].needle&&(r.axes[0].needle=oa()),r.axes[0].needle.endWidth=t,this.emitConfigUpdate("setNeedleEndWidth")}getNeedleInnerRadius(){return e=this._config,e.axes[0].needle?.innerRadius;var e}setNeedleInnerRadius(e){var t,r;t=e,void 0===(r=this._config).axes[0].needle&&(r.axes[0].needle=oa()),r.axes[0].needle.innerRadius=t,this.emitConfigUpdate("setNeedleInnerRadius")}getNeedleDisplayPin(){return e=this._config,e.axes[0].needle?.displayPin??!1;var e}setNeedleDisplayPin(e){var t,r;t=e,void 0===(r=this._config).axes[0].needle&&(r.axes[0].needle=oa()),r.axes[0].needle.displayPin=t,this.emitConfigUpdate("setNeedleDisplayPin")}getInnerLabelVisible(){return e=this._config,e.axes[0].innerLabel?.visible??!0;var e}setInnerLabelVisibility(e){var t,r;t=e,void 0===(r=this._config).axes[0].innerLabel&&(r.axes[0].innerLabel=Gi()),r.axes[0].innerLabel.visible=t,this.emitConfigUpdate("setInnerLabelVisibility")}getInnerLabelContent(){return e=this._config,e.axes[0].innerLabel?.content;var e}setInnerLabelContent(e){var t,r;t=e,void 0===(r=this._config).axes[0].innerLabel&&(r.axes[0].innerLabel=Gi()),void 0!==t&&(r.axes[0].innerLabel.content=t),this.emitConfigUpdate("setInnerLabelContent")}getAxisTickVisibility(){return e=this._config,e.axes[0].ticks?.visible??!0;var e}setAxisTickVisibility(e){var t,r;t=e,void 0===(r=this._config).axes[0].ticks&&(r.axes[0].ticks={type:cc}),r.axes[0].ticks.visible=t,this.emitConfigUpdate("setAxisTickVisibility")}getLabelsIncrement(){return this._config.axes[0].labelsIncrement}setLabelsIncrement(e){var t;t=e,this._config.axes[0].labelsIncrement=t,this.emitConfigUpdate("setLabelsIncrement")}getOnlyShowFirstAndLastLabels(){return this._config.axes[0].onlyShowFirstAndLastLabels??!1}setOnlyShowFirstAndLastLabels(e){var t;t=e,this._config.axes[0].onlyShowFirstAndLastLabels=t,this.emitConfigUpdate("setOnlyShowFirstAndLastLabels")}async generateDefaultConfig(){const e=await async function(e=Zi()){return{version:i,type:C,id:e,colorMatch:!0,title:Gi({text:await Ji(),visible:!0,font:Vi(re)}),series:[],axes:await na()}}();return e.series=[pa({objectIDField:this.layerInfo?.objectIdField})],e}}zc(Op,[Jf,hh]);const jp=e=>{iu(e,null),ru(e,null),tu(e,null),eu(e,null)},Ap=e=>e.series[0]?.overlays?.comparisonDistribution?.symbol??ya().overlays.comparisonDistribution?.symbol??Qi(),Tp=e=>e.series[0]?.overlays?.mean?.symbol??ya().overlays.mean?.symbol??Qi(),Lp=e=>e.series[0]?.overlays?.median?.symbol??ya().overlays.median?.symbol??Qi(),Dp=e=>e.series[0]?.overlays?.standardDeviation?.symbol??ya().overlays.standardDeviation?.symbol??Qi();class $p extends rc{constructor(){super(...arguments),this._chartType=vc}async setup(e){await this.loadConfigFromLayer(e),this.resolveSetup()}getNumericField(){return e=this._config,e.series[0]?.x??"";var e}async setNumericField(e){await(async(e,t,r)=>{const{layerFieldsInfo:i}=r;jp(t),t?.series?.[0]&&(t.series[0].x=e);const a=Ns(i,e);Kc(t,0,a);const s=Pi((await Hc()).titleLabels.distributionOfField,{valueField:a});t?.title&&(t.title.content.text=s)})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setNumericField")}getBinCount(){return e=this._config,e.series[0]?.binCount??32;var e}setBinCount(e){((e,t)=>{jp(t),t?.series?.[0]&&(t.series[0].binCount=e)})(e,this._config),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setBinCount")}getBinColor(){return e=this._config,e.series[0]?.fillSymbol??ya().fillSymbol;var e}setBinColor(e){((e,t)=>{t?.series?.[0]&&(t.series[0].fillSymbol={...t.series[0].fillSymbol,...e})})(e,this._config),this.emitConfigUpdate("setBinColor")}getDataTransformationType(){return e=this._config,e.series[0]?.dataTransformationType??Sc;var e}setDataTransformationType(e){((e,t)=>{jp(t),t?.series?.[0]&&(t.series[0].dataTransformationType=e)})(e,this._config),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setDataTransformationType")}getMeanColor(){return Tp(this._config)}setMeanColor(e){((e,t)=>{t.series[0].overlays??=ma(),t.series[0].overlays.mean??=Yi(1),t.series[0].overlays.mean.symbol={...t.series[0].overlays.mean.symbol,...e}})(e,this._config),this.emitConfigUpdate("setMeanColor")}getMedianColor(){return Lp(this._config)}setMedianColor(e){((e,t)=>{t.series[0].overlays??=ma(),t.series[0].overlays.median??=Yi(2),t.series[0].overlays.median.symbol={...t.series[0].overlays.median.symbol,...e}})(e,this._config),this.emitConfigUpdate("setMedianColor")}getNormalDistColor(){return Ap(this._config)}setNormalDistColor(e){((e,t)=>{t.series[0].overlays??=ma(),t.series[0].overlays.comparisonDistribution??=Yi(4),t.series[0].overlays.comparisonDistribution.symbol={...t.series[0].overlays.comparisonDistribution.symbol,...e}})(e,this._config),this.emitConfigUpdate("setNormalDistColor")}getStandardDevColor(){return Dp(this._config)}setStandardDevColor(e){((e,t)=>{t.series[0].overlays??=ma(),t.series[0].overlays.standardDeviation??=Yi(3),t.series[0].overlays.standardDeviation.symbol={...t.series[0].overlays.standardDeviation.symbol,...e}})(e,this._config),this.emitConfigUpdate("setStandardDevColor")}getShowNormalDistOverlay(){return e=this._config,e.series[0]?.overlays?.comparisonDistribution?.created??!1;var e}setShowNormalDistOverlay(e){((e,t)=>{const r=Yi(0);r.created=e,r.visible=e,r.symbol=Ap(t),t?.series?.[0]?.overlays&&(t.series[0].overlays.comparisonDistribution=r)})(e,this._config),this.emitConfigUpdate("setShowNormalDistOverlay")}getShowMeanOverlay(){return e=this._config,e.series[0]?.overlays?.mean?.created??!1;var e}setShowMeanOverlay(e){((e,t)=>{const r=Yi(1);r.created=e,r.visible=e,r.symbol=Tp(t),t?.series?.[0]?.overlays&&(t.series[0].overlays.mean=r)})(e,this._config),this.emitConfigUpdate("setShowMeanOverlay")}getShowMedianOverlay(){return e=this._config,e.series[0]?.overlays?.median?.created??!1;var e}setShowMedianOverlay(e){((e,t)=>{const r=Yi(2);r.created=e,r.visible=e,r.symbol=Lp(t),t?.series?.[0]?.overlays&&(t.series[0].overlays.median=r)})(e,this._config),this.emitConfigUpdate("setShowMedianOverlay")}getShowStandardDevOverlay(){return e=this._config,e.series[0]?.overlays?.standardDeviation?.created??!1;var e}setShowStandardDevOverlay(e){((e,t)=>{const r=Yi(3);r.created=e,r.visible=e,r.symbol=Dp(t),t?.series?.[0]?.overlays&&(t.series[0].overlays.standardDeviation=r)})(e,this._config),this.emitConfigUpdate("setShowStandardDevOverlay")}getSeriesOverlay(){return e=this._config,e?.series?.[0]?.overlays;var e}setSeriesOverlays(e){var t,r;t=e,r=this._config,void 0!==r?.series?.[0]&&(r.series[0].overlays=t),this.emitConfigUpdate("setSeriesOverlay")}async generateDefaultConfig(){const e=await async function(e=Zi()){return{version:i,type:C,id:e,colorMatch:!0,title:Gi({text:await Ji(),visible:!0,font:Vi(re)}),subTitle:Gi(),footer:Gi({text:"",visible:!0,font:Vi(oe)}),background:[255,255,255,255],axes:await sa($),series:[ya()],legend:Xi()}}();return e}}zc($p,[Zf,Qc,qc,th,ph]);const Up=(e,t)=>void 0!==t.series[e]?bp(t.series[e]):void 0,Bp=(e,t,r)=>{void 0!==r.series[t]&&wp(e,r.series[t])},Mp=(e,t)=>void 0!==t.series[e]?Sp(t.series[e]):void 0,Rp=(e,t,r)=>{void 0!==r.series[t]&&_p(e,r.series[t])},Np=(e,t)=>t.series?.[e]?.markerSymbol?.color,zp=(e,t,r)=>{if(void 0!==r.series?.[t]){const i=r.series[t];void 0===i.markerSymbol&&(i.markerSymbol=ta()),i.markerSymbol.color=e}},Vp=(e,t)=>t.series?.[e]?.markerSymbol?.style,qp=(e,t,r)=>{if(void 0!==r.series?.[t]){const i=r.series[t];void 0===i.markerSymbol&&(i.markerSymbol=ta()),i.markerSymbol.style=e}},Gp=(e,t)=>t.series?.[e]?.markerSymbol?.size,Qp=(e,t,r)=>{if(void 0!==r.series?.[t]){const i=r.series[t];void 0===i.markerSymbol&&(i.markerSymbol=ta()),i.markerSymbol.size=e}},Hp=(e,t)=>t.series?.[e]?.lineSmoothed??!1,Kp=e=>{const{smoothed:t,seriesIndex:r,config:i}=e;i.series?.[r]&&(i.series[r].lineSmoothed=t)},Wp=(e,t)=>t.series?.[e]?.showArea??!1,Xp=e=>{const{visible:t,seriesIndex:r,config:i}=e;i.series?.[r]&&(i.series[r].showArea=t)},Yp=(e,t)=>t.series?.[e]?.markerVisible??!0,Jp=e=>{const{visible:t,seriesIndex:r,config:i}=e;i.series?.[r]&&(i.series[r].markerVisible=t)},Zp=(e,t)=>t.series?.[e]?.areaColor,eg=(e,t)=>t.series?.[e]?.stackNegativeValuesToBaseline??!0,tg=e=>{const{stackNegativeValuesToBaseline:t,seriesIndex:r,config:i}=e;i.series?.[r]&&(i.series[r].stackNegativeValuesToBaseline=t)};class rg extends qh{constructor(){super(...arguments),this._chartType=mc}async setup(e){await this.loadConfigFromLayer(e),void 0!==e.config&&this.updateSeriesFromLayerFilter(),await this.initDefaultSeries(),this.resolveSetup()}async generateDefaultConfig(){const e=await async function(e=Zi()){return{version:i,type:C,id:e,colorMatch:!0,rotated:!1,orderOptions:{data:{orderType:Y,orderBy:N}},title:Gi({text:await Ji(),visible:!0,font:Vi(re)}),subTitle:Gi(),footer:Gi({text:"",visible:!0,font:Vi(oe)}),background:[255,255,255,255],axes:await sa(L),series:[],legend:Xi()}}();return e.series=[await la({objectIDField:this.layerInfo?.objectIdField})],e}async initDefaultSeries(){this.defaultSeries=await la({objectIDField:this.layerInfo?.objectIdField})}getSeriesLineStyle(e){return Up(e,this._config)}setSeriesLineStyle(e,t){Bp(e,t,this._config),this.emitConfigUpdate("setSeriesLineStyle")}getSeriesLineWidth(e){return Mp(e,this._config)}setSeriesLineWidth(e,t){Rp(e,t,this._config),this.emitConfigUpdate("setSeriesLineWidth")}getSeriesMarkerColor(e){return Np(e,this._config)}setSeriesMarkerColor(e,t){zp(e,t,this._config),this.emitConfigUpdate("setSeriesMarkerColor")}getSeriesMarkerStyle(e){return Vp(e,this._config)}setSeriesMarkerStyle(e,t){qp(e,t,this._config),this.emitConfigUpdate("setSeriesMarkerStyle")}getSeriesMarkerSize(e){return Gp(e,this._config)}setSeriesMarkerSize(e,t){Qp(e,t,this._config),this.emitConfigUpdate("setSeriesMarkerSize")}isLineSmoothed(e){return Hp(e,this._config)}setLineSmoothed(e,t){Kp({smoothed:e,seriesIndex:t,config:this._config}),this.emitConfigUpdate("setLineSmoothed")}isAreaVisible(e){return Wp(e,this._config)}setAreaVisible(e,t){Xp({visible:e,seriesIndex:t,config:this._config}),this.emitConfigUpdate("setAreaVisible")}isMarkerVisible(e){return Yp(e,this._config)}setMarkerVisible(e,t){Jp({visible:e,seriesIndex:t,config:this._config}),this.emitConfigUpdate("setMarkerVisible")}getAreaColor(e){return Zp(e,this._config)}setAreaColor(e,t){Xp({visible:!0,seriesIndex:t,config:this._config}),zh(e,t,this._config),this.emitConfigUpdate("setAreaColor")}isNegativeValuesStackedToBaseline(e){return eg(e,this._config)}setNegativeValuesStackedToBaseline(e,t){tg({stackNegativeValuesToBaseline:e,seriesIndex:t,config:this._config}),this.emitConfigUpdate("setNegativeValuesStackedToBaseline")}async resetSeriesStyling(){const e=this.getSeriesLength();for(let t=0;t<e;t+=1){const e=Ri({colorIndex:t,opacity:Ai});if(zh(e,t,this._config),zp(e,t,this._config),void 0!==this.layerInfo){const e=this.getSeriesId(t),r=await Bh(this._config,t,this.layerInfo);r!==this.layerInfo.objectIdField&&Nh(r??e,t,this._config)}Bp(this.defaultSeries?.lineSymbol?.style,t,this._config),Rp(this.defaultSeries?.lineSymbol?.width,t,this._config),qp(this.defaultSeries?.markerSymbol?.style,t,this._config),Qp(this.defaultSeries?.markerSymbol?.size,t,this._config)}this._config.colorMatch=!0,this.emitConfigUpdate("resetSeriesStyling")}async resetAvailable(){const e=!this.getColorMatch();let t=!1;if(!e){const e=this.getSeriesLength();for(let r=0;r<e;r+=1){if(void 0!==this.layerInfo){const e=await Bh(this._config,r,this.layerInfo),i=this.getSeriesName(r);void 0!==e&&e!==this.layerInfo.objectIdField&&e!==i&&(t=!0)}if(void 0!==this.defaultSeries?.lineSymbol?.style&&this.defaultSeries?.lineSymbol.style!==this.getSeriesLineStyle(r)||void 0!==this.defaultSeries?.lineSymbol?.width&&this.defaultSeries?.lineSymbol.width!==this.getSeriesLineWidth(r)||void 0!==this.defaultSeries?.markerSymbol?.style&&this.defaultSeries?.markerSymbol?.style!==this.getSeriesMarkerStyle(r)||void 0!==this.defaultSeries?.markerSymbol?.size&&this.defaultSeries?.markerSymbol?.size!==this.getSeriesMarkerSize(r)){t=!0;break}}}return e||t}}zc(rg,[Zf,Qc,qc,eh,th,hh,ph,_h]);const ig=(e,t)=>{t.series?.[0]?.slices?.sort(((t,r)=>e.findIndex((e=>t.sliceId===e))-e.findIndex((e=>r.sliceId===e))))},ag=(e,t)=>{t.series?.[0]&&(t.series[0].sliceGrouping=e)},sg=e=>e.series?.[0]?.sliceGrouping?.percentageThreshold,og=(e,t)=>{t.series?.[0]&&(t.series[0].slices=e)},ng=e=>e.series?.[0]?.x??"";const lg=(e,t)=>{let r=ah.valueDesc;const i=e.orderOptions?.data?.orderType??function(e,t){const r=e.series?.[0];return[`${t===sh.Category?r.y:Dc} ${Cc}`]}(e,t),a=e.orderOptions?.data?.orderBy??Cc;return r=i===Tc&&Array.isArray(a)?ah.customSort:i===Tc?a===Fc?ah.labelAsc:ah.labelDesc:a===Fc?ah.valueAsc:ah.valueDesc,r},cg=Dd((e=>{let t=[];return t=e.series?.[0]?.query?.outStatistics?.map((e=>e.onStatisticField))??[e.series?.[0]?.y??""],[...new Set(t.filter((e=>""!==e)))]}),(e=>e.series)),ug=(e,t)=>{const r=cg(e);let i;return i=t===sh.Fields&&0===r.length?sc:e.series?.[0]?.query?.outStatistics?.[0]?.statisticType??oc,i};async function dg(e){const{config:t,layerInfo:r,mode:i}=e,{objectIdField:a}=r??{},s=await ha(a),o=ng(t),n=t.series[0]?.dataLabels?.visible??!1,l={...s,x:i===sh.Category?o:Lc,slices:t.series?.[0]?.slices,dataLabels:{...s.dataLabels,visible:n},innerRadiusSize:t.series?.[0]?.innerRadius,sliceGrouping:t.series?.[0]?.sliceGrouping,dataLabelsCharacterLimit:t.series?.[0]?.dataLabelsCharacterLimit,numericValueFormat:t.series?.[0]?.numericValueFormat,percentValueFormat:t.series?.[0]?.percentValueFormat,displayNumericValueOnDataLabel:t.series?.[0]?.displayNumericValueOnDataLabel,displayPercentageOnDataLabel:t.series?.[0]?.displayPercentageOnDataLabel},c=ug(t,i);if(c!==oc&&void 0!==a){const e=`${c}_${a}_0`.toUpperCase();l.y=i===sh.Category?e:Dc,l.query={outStatistics:i===sh.Category?[{statisticType:c,onStatisticField:a,outStatisticFieldName:e}]:[]}}return i===sh.Category&&void 0!==l.query?l.query.groupByFieldsForStatistics=[o]:delete l.query?.groupByFieldsForStatistics,If(l)}async function fg(e,t,r){const{layerFieldsInfo:i,objectIdField:a}=t,s=ng(e),o=cg(e),n=ug(e,r),l=0===o.length||o.includes(a),c=await va(n),u=l?"":o.map((e=>Ns(i??[],e))).join(", "),d=Ns(i??[],s);let f="";const h=await Hc();let p;return p=r===sh.Fields?0===o.length:""===s,p?f=h.chartType.pieChart:n===oc?f=Pi(h.titleLabels.aggrFieldsByCategory,{aggregationFields:l?a:u,category:d}):n===ac?f=Pi(h.titleLabels.aggrTypeCategory,{aggregationType:c,category:d}):o.length>0&&(f=d===Lc||Gf(d)||null===d?Pi(h.titleLabels.aggrTypeOfAggrFields,{aggregationType:c,aggregationFields:u}):Pi(h.titleLabels.aggrTypeOfAggrFieldsByCategory,{aggregationType:c,aggregationFields:u,category:d})),f}const hg=e=>{const{newSortOrderKind:t,config:r,orderByList:i}=e;r.orderOptions??={},r.orderOptions.data=t===ah.customSort&&void 0!==i?{orderType:Tc,orderBy:[...i]}:{orderType:t===ah.labelAsc||t===ah.labelDesc?Tc:Oc,orderBy:t===ah.labelAsc||t===ah.valueAsc?Fc:Cc}};async function pg(e){const{numericFields:t,aggregationType:r,config:i,layerInfo:a,mode:s}=e,o=lg(i,s),n=[],l=await dg({config:i,layerInfo:a,mode:s}),c={...l,query:{...l.query}};if(t.length<=1?c.query.where=l.query?.where:delete c.query.where,r!==oc)if(s===sh.Category){if(t.length>0){const e=t[0],i=`${r}_${t[0]}_0`.toUpperCase();c.y=i,c.query.outStatistics=[{...l.query?.outStatistics?.[0]??{},onStatisticField:e,outStatisticFieldName:i,statisticType:r}]}}else{c.y=Dc;for(let e=0;e<t.length;e+=1)c.query.outStatistics?.push({onStatisticField:t[e],outStatisticFieldName:t[e],statisticType:r})}else c.y=t[0],c.query={};const u=mg(i,s);hg({newSortOrderKind:o,config:i,orderByList:u}),n.push(c),i.series=n}const gg=async e=>{let{newNumericFields:t}=e;const{config:r,layerInfo:i,mode:a}=e,{objectIdField:s}=i??{};let o=ug(r,a);if(t=""===t?[]:t,t="string"==typeof t?[t]:t,void 0!==s&&(0===t.length&&a===sh.Category?(t.push(s),o=ac):o===ac&&t.length>=1&&!t.includes(s)&&(o=sc)),void 0!==i){await pg({config:r,layerInfo:i,numericFields:t,aggregationType:o,mode:a});Kc(r,1,await Wc({config:r,layerInfo:i,numericFields:cg(r),aggregationType:ug(r,a)})),r.title&&(r.title.content.text=await fg(r,i,a))}else r.series.forEach((e=>{delete e.query,e.y=t[0]}))},mg=(e,t)=>{let r=[];const i=e.orderOptions?.data?.orderType,a=lg(e,t),s=e.orderOptions?.data?.orderBy;return a===ah.customSort&&i===Tc&&Array.isArray(s)&&(r=s),r},yg=e=>{const{values:t,config:r,mode:i}=e;r.orderOptions??={};const a=r.orderOptions?.data?.orderType;lg(r,i)===ah.customSort&&a===Tc&&(r.orderOptions.data={orderType:Tc,orderBy:[...t]})};class vg extends rc{constructor(){super(...arguments),this._chartType=pc,this._mode=sh.Category,this._groupedSliceIds=[]}async setup(e){await this.loadConfigFromLayer(e);const{config:t}=e;if(void 0!==t){const e=Js(t.series);this._mode=e!==Os?sh.Category:sh.Fields}this.resolveSetup()}getCategory(){return ng(this._config)}async setCategory(e){(!Cl(this._config)||""!==e.trim())&&(await(async e=>{const{newCategory:t,config:r,layerInfo:i,mode:a}=e,s=r.series?.length??0,o=lg(r,a);if(r.series.forEach((e=>{e.x=a===sh.Category?t:Lc,void 0!==e.query&&t!==Lc?e.query.groupByFieldsForStatistics=[t]:delete e.query?.groupByFieldsForStatistics})),0===s){const e=[await dg({config:r,layerInfo:i,mode:a})];r.series=e}if(void 0!==o){const e=mg(r,a);hg({newSortOrderKind:o,config:r,orderByList:e})}if(void 0!==i){Kc(r,1,await Wc({config:r,layerInfo:i,numericFields:cg(r),aggregationType:ug(r,a)})),r.title&&(r.title.content.text=await fg(r,i,a));const e=a===sh.Fields?cg(r).filter((e=>e!==i.objectIdField)):cg(r);await gg({newNumericFields:e,config:r,layerInfo:i,mode:a})}})({newCategory:e,config:this._config,layerInfo:this.layerInfo,mode:this._mode}),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setCategory"))}getNumericFields(){return cg(this._config)}async setNumericFields(e){"string"==typeof e&&(e=[e]);void 0===this.layerInfo||Nc(this.layerInfo.layerFieldsInfo,e)?(await gg({newNumericFields:e,config:this._config,layerInfo:this.layerInfo,mode:this._mode}),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setNumericFields")):console.log("Invalid numericFields")}getAggregationType(){return ug(this._config,this._mode)}async setAggregationType(e){await(async e=>{const{newAggregationType:t,config:r,layerInfo:i,mode:a}=e,s=cg(r);await pg({config:r,layerInfo:i,numericFields:s,aggregationType:t,mode:a}),Kc(r,1,await Wc({config:r,layerInfo:i,numericFields:cg(r),aggregationType:ug(r,a)})),r.title&&(r.title.content.text=await fg(r,i,a));const o=r.series?.[0]?.displayNumericValueOnDataLabel,n=r.series?.[0]?.displayPercentageOnDataLabel;r.legend={...r.legend??Xi(),displayNumericValue:o,displayPercentage:n}})({newAggregationType:e,config:this._config,layerInfo:this.layerInfo,mode:this._mode}),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setAggregationType")}getSortOrder(){return lg(this._config,this._mode)}setSortOrder(e,t){hg({newSortOrderKind:e,config:this._config,orderByList:t}),this.emitConfigUpdate("setSortOrder")}getOrderByList(){return mg(this._config,this._mode)}setOrderByList(e){yg({values:e,config:this._config,mode:this._mode}),this.emitConfigUpdate("setOrderByList")}getMode(){return this._mode}setMode(e){this._mode=e,this.emitConfigUpdate("setMode")}async getCustomSortValues(){const e=ng(this._config),t=Js(this._config.series),r=this.getNumericFields();let i=[];return t===Os?i=r:""!==e.trim()&&t===Is&&(i=await Vc({category:e,config:this._config,layerInfo:this.layerInfo})),i}moveCustomSortValuesInOrderByList(e,t){const r=mg(this._config,this._mode),[i]=r.splice(e,1);r.splice(t,0,i),yg({values:r,config:this._config,mode:this._mode}),this.emitConfigUpdate("moveCustomSortValuesInOrderByList")}getLeaderLinesSymbol(){return(e=>{for(const t of e.series)if(void 0!==t.ticks?.lineSymbol)return t.ticks.lineSymbol})(this._config)}setLeaderLinesSymbol(e){((e,t)=>{for(const r of t.series)void 0!==r.ticks&&void 0!==e||(r.ticks=fa()),void 0!==e&&(r.ticks.lineSymbol=If(e))})(e,this._config),this.emitConfigUpdate("setLeaderLinesSymbol")}getSlices(){return e=this._config,e.series?.[0]?.slices;var e}setSlices(e){og(e,this._config),this.emitConfigUpdate("setSlices")}getGroupedSliceIds(){return this._groupedSliceIds}setGroupedSliceIds(e){this._groupedSliceIds=e,this.emitConfigUpdate("setGroupedSliceIds")}getSliceGrouping(){return e=this._config,e.series?.[0]?.sliceGrouping;var e}setSliceGrouping(e){ag(e,this._config),this.emitConfigUpdate("setSliceGrouping")}getInnerRadiusSize(){return e=this._config,e.series?.[0]?.innerRadius??0;var e}setInnerRadiusSize(e){((e,t)=>{t.series?.[0]&&(t.series[0].innerRadius=e)})(e,this._config),this.emitConfigUpdate("setInnerRadiusSize")}getGroupingThreshold(){return sg(this._config)??0}setGroupingThreshold(e){((e,t)=>{void 0!==t.series?.[0]?.sliceGrouping?t.series[0].sliceGrouping.percentageThreshold=e:t.series[0].sliceGrouping={sliceId:$i,percentageThreshold:e}})(e,this._config),this.emitConfigUpdate("setGroupingThreshold")}getLabelCharacterLimit(){return e=this._config,e.series?.[0]?.dataLabelsCharacterLimit??null;var e}setLabelCharacterLimit(e){((e,t)=>{t.series?.[0]&&(t.series[0].dataLabelsCharacterLimit=e)})(e,this._config),this.emitConfigUpdate("setLabelCharacterLimit")}getDecimalPlaces(){return e=this._config,e.series?.[0]?.numericValueFormat?.intlOptions?.minimumFractionDigits??1;var e}setDecimalPlaces(e){((e,t)=>{void 0!==t.series?.[0]?.numericValueFormat?(t.series[0].numericValueFormat.intlOptions.minimumFractionDigits=e,t.series[0].numericValueFormat.intlOptions.maximumFractionDigits=e):t.series[0].numericValueFormat={...Hi(),intlOptions:{minimumFractionDigits:e,maximumFractionDigits:e}},void 0!==t.series?.[0]?.percentValueFormat?(t.series[0].percentValueFormat.intlOptions.minimumFractionDigits=e,t.series[0].percentValueFormat.intlOptions.maximumFractionDigits=e):t.series[0].percentValueFormat={...Hi(),intlOptions:{minimumFractionDigits:e,maximumFractionDigits:e}}})(e,this._config),this.emitConfigUpdate("setDecimalPlaces")}getDisplayType(){return(e=>{let t;const r=e.series?.[0];return t=!0===r?.displayNumericValueOnDataLabel&&!0===r?.displayPercentageOnDataLabel?oh.Both:!0===r?.displayNumericValueOnDataLabel?oh.Value:oh.Percentage,t})(this._config)}setDisplayType(e){((e,t)=>{const r=e===oh.Value||e===oh.Both,i=e===oh.Percentage||e===oh.Both;t.series?.[0]&&(t.series[0].displayNumericValueOnDataLabel=r,t.series[0].displayPercentageOnDataLabel=i),t.legend&&(t.legend={...t.legend,displayNumericValue:r,displayPercentage:i})})(e,this._config),this.emitConfigUpdate("setDisplayType")}async generateDefaultConfig(){const e=await async function(e=Zi()){return{version:i,type:C,id:e,colorMatch:!0,orderOptions:{data:{orderType:K,orderBy:z}},title:Gi({text:await Ji(),visible:!0,font:Vi(re)}),subTitle:Gi(),footer:Gi({text:"",visible:!0,font:Vi(oe)}),background:[255,255,255,255],series:[],legend:{...Xi(),displayNumericValue:!1,displayPercentage:!0}}}();return e.series=[await ha(this.layerInfo?.objectIdField)],e}getOriginalSliceName(e){return((e,t)=>t.series?.[0]?.slices?.[e]?.originalLabel)(e,this._config)}getSliceName(e){return((e,t)=>t.series?.[0]?.slices?.[e]?.label)(e,this._config)}setSliceName(e,t){((e,t,r)=>{r.series?.[0]?.slices?.[t]&&(r.series[0].slices[t].label=e)})(e,t,this._config),this.emitConfigUpdate("setSliceName")}getSliceColor(e){return((e,t)=>t.series?.[0]?.slices?.[e]?.fillSymbol?.color)(e,this._config)}setSliceColor(e,t){((e,t,r)=>{const i=r.series?.[0]?.slices?.[t]?.fillSymbol;void 0!==i?(i.color=e,void 0!==i.outline?i.outline.color=e:i.outline={type:nc,color:e}):void 0!==r.series?.[0]?.slices?.[t]&&(r.series[0].slices[t].fillSymbol={type:lc,color:e,outline:{type:nc,color:e}})})(e,t,this._config),this.emitConfigUpdate("setSliceColor")}getOrderOfSlices(){return e=this._config,e.series?.[0]?.slices?.map((e=>e.sliceId));var e}setOrderOfSlices(e){ig(e,this._config),this.emitConfigUpdate("setOrderOfSlices")}moveSeries(e,t){const r=this.getOrderOfSlices();if(void 0!==r){const[i]=r.splice(e,1);r.splice(t,0,i),ig(r,this._config),this.emitConfigUpdate("moveSeries")}}getSliceId(e){return((e,t)=>t.series[0]?.slices?.[e]?.sliceId)(e,this._config)}getSliceIndex(e){return((e,t)=>t.series[0]?.slices?.findIndex((t=>t.sliceId===e)))(e,this._config)}getSlicesLength(){return e=this._config,e.series[0]?.slices?.length??0;var e}resetSlices(){var e;e=this._config,og(void 0,e),ag({sliceId:$i,percentageThreshold:sg(e)??0},e),this.emitConfigUpdate("resetSlices")}resetAvailable(){const e=!this.getColorMatch();let t=!1;const r=this.getSlices()?.length??0;for(let e=0;e<r;e+=1){const r=this.getOriginalSliceName(e),i=this.getSliceName(e);if(void 0!==r&&r?.toString()!==i?.toString()){t=!0;break}}const i=this.getSliceGrouping();return void 0!==i?.originalLabel&&i?.label!==i.originalLabel&&(t=!0),e||t}}zc(vg,[Qc,qc,th]);const bg=e=>{iu(e,null),ru(e,null),tu(e,null),eu(e,null)},wg=e=>{const{name:t,axisIndex:r,config:i,layerInfo:a}=e,{layerFieldsInfo:s}=a,o=s.find((e=>e.name===t)),n=void 0!==o&&wl(o);nu(i,r,n)},Sg=async e=>{const{x:t,y:r,config:i,layerInfo:a}=e,{layerFieldsInfo:s}=a,o=Ns(s,t),n=Ns(s,r);if(Gf(t)||Kc(i,0,o),Gf(r)||Kc(i,1,n),!Gf(t)&&!Gf(r)){const e=Pi((await Hc()).titleLabels.xAndY,{x:o,y:n});i.title?.content&&(i.title.content.text=e)}},_g=e=>e.series[0]?.x??"",xg=e=>e.series[0]?.y??"",Pg=(e,t)=>{!(t.series[0]?.overlays?.trendLine?.created??!1)&&e&&(t.series[0].overlays??=aa(),t.series[0].overlays.trendLine??=aa().trendLine,t.series[0].overlays.trendLine.created=e),((e,t)=>{t.series[0].overlays??=aa(),t.series[0].overlays.trendLine??=aa().trendLine,t.series[0].overlays.trendLine.visible=e})(e,t)},Fg=e=>e.series[0]?.sizePolicy??{type:"sizeScale",field:"",scaleType:"linear",minSize:5,maxSize:30};class Cg extends rc{constructor(){super(...arguments),this._chartType=hc}async setup(e){await this.loadConfigFromLayer(e),this.resolveSetup()}getXAxisField(){return _g(this._config)}async setXAxisField(e){await(async(e,t,r)=>{bg(t),t.series[0]&&(t.series[0].x=e),await Sg({x:e,y:xg(t),config:t,layerInfo:r}),wg({name:e,axisIndex:0,config:t,layerInfo:r})})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setXAxisField")}getYAxisField(){return xg(this._config)}async setYAxisField(e){await(async(e,t,r)=>{bg(t),t.series[0]&&(t.series[0].y=e),await Sg({x:_g(t),y:e,config:t,layerInfo:r}),wg({name:e,axisIndex:1,config:t,layerInfo:r})})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setYAxisField")}getShowLinearTrend(){return e=this._config,(e.series[0]?.overlays?.trendLine?.visible&&e.series[0]?.overlays?.trendLine?.created)??!1;var e}setShowLinearTrend(e){Pg(e,this._config),this.emitConfigUpdate("setShowLinearTrend")}getLinearTrendSymbol(){return e=this._config,e.series[0]?.overlays?.trendLine?.symbol??{};var e}setLinearTrendSymbol(e){((e,t)=>{t.series[0].overlays??=aa(),t.series[0].overlays.trendLine??=aa().trendLine,t.series[0].overlays.trendLine.symbol=e})(e,this._config),this.emitConfigUpdate("setLinearTrendSymbol")}getFixedMarkerSymbol(){return e=this._config,e.series[0]?.markerSymbol??{};var e}setFixedMarkerSymbol(e){((e,t)=>{t.series[0]&&(t.series[0].markerSymbol=e)})(e,this._config),this.emitConfigUpdate("setFixedMarkerSymbol")}getSizePolicy(){return Fg(this._config)}setSizePolicy(e){Qf(Fg(this._config),e)||(((e,t)=>{t.series[0]&&(void 0!==e&&""!==e.field?.trim()?t.series[0].sizePolicy={...t.series[0].sizePolicy,...e}:t.series[0].sizePolicy=void 0)})(e,this._config),this.emitConfigUpdate("setSizePolicy"))}getSeriesOverlays(){return e=this._config,e?.series?.[0]?.overlays;var e}setSeriesOverlays(e){var t,r;t=e,r=this._config,void 0!==r?.series[0]&&(r.series[0].overlays=t),this.emitConfigUpdate("setSeriesOverlays")}async generateDefaultConfig(){const e=await async function(e=Zi()){return{version:i,type:C,id:e,colorMatch:!0,title:Gi({text:await Ji(),visible:!0,font:Vi(re)}),subTitle:Gi(),footer:Gi({text:"",visible:!0,font:Vi(oe)}),background:[255,255,255,255],axes:await sa(j),series:[{type:j,id:j,name:j,x:"",y:"",markerSymbol:ia(),overlays:aa(),dataLabels:Gi({text:"",visible:!1,font:Vi(ie)})}],legend:Xi()}}();return e}}zc(Cg,[Zf,Qc,qc,th,hh,ph]);class Eg extends qh{constructor(){super(...arguments),this._chartType=wc}getConfig(){return this._config}async setup(e){await this.loadConfigFromLayer(e),void 0!==e.config&&(Ol(e.config?.series)&&await this.initDefaultSeries(),await this.updateSeriesFromLayerFilter()),this.resolveSetup()}async generateDefaultConfig(){const e=await ga();return e.series=[await ua({objectIDField:this.layerInfo?.objectIdField})],e}async initDefaultSeries(){this.defaultSeries=await la({objectIDField:this.layerInfo?.objectIdField})}getSeriesLineStyle(e){return Up(e,this._config)}setSeriesLineStyle(e,t){const r=this._config.series?.[t];kl(r)&&(Bp(e,t,this._config),this.emitConfigUpdate("setSeriesLineStyle"))}getSeriesLineWidth(e){return Mp(e,this._config)}setSeriesLineWidth(e,t){const r=this._config.series?.[t];kl(r)&&(Rp(e,t,this._config),this.emitConfigUpdate("setSeriesLineWidth"))}getSeriesMarkerColor(e){return Np(e,this._config)}setSeriesMarkerColor(e,t){const r=this._config.series?.[t];kl(r)&&(zp(e,t,this._config),this.emitConfigUpdate("setSeriesMarkerColor"))}getSeriesMarkerStyle(e){return Vp(e,this._config)}setSeriesMarkerStyle(e,t){const r=this._config.series?.[t];kl(r)&&(qp(e,t,this._config),this.emitConfigUpdate("setSeriesMarkerStyle"))}getSeriesMarkerSize(e){return Gp(e,this._config)}setSeriesMarkerSize(e,t){const r=this._config.series?.[t];kl(r)&&(Qp(e,t,this._config),this.emitConfigUpdate("setSeriesMarkerSize"))}isLineSmoothed(e){return Hp(e,this._config)}setLineSmoothed(e,t){const r=this._config.series?.[t];kl(r)&&(Kp({smoothed:e,seriesIndex:t,config:this._config}),this.emitConfigUpdate("setLineSmoothed"))}isAreaVisible(e){return Wp(e,this._config)}setAreaVisible(e,t){const r=this._config.series?.[t];kl(r)&&(Xp({visible:e,seriesIndex:t,config:this._config}),this.emitConfigUpdate("setAreaVisible"))}isMarkerVisible(e){return Yp(e,this._config)}setMarkerVisible(e,t){const r=this._config.series?.[t];kl(r)&&(Jp({visible:e,seriesIndex:t,config:this._config}),this.emitConfigUpdate("setMarkerVisible"))}getAreaColor(e){return Zp(e,this._config)}setAreaColor(e,t){const r=this._config.series?.[t];kl(r)&&(Xp({visible:!0,seriesIndex:t,config:this._config}),zh(e,t,this._config),this.emitConfigUpdate("setAreaColor"))}isNegativeValuesStackedToBaseline(e){return eg(e,this._config)}setNegativeValuesStackedToBaseline(e,t){const r=this._config.series?.[t];kl(r)&&(tg({stackNegativeValuesToBaseline:e,seriesIndex:t,config:this._config}),this.emitConfigUpdate("setNegativeValuesStackedToBaseline"))}getSeriesHideOversizedStackedLabels(e){return Uc(e,this._config)}setSeriesHideOversizedStackedLabels(e,t){const r=this._config.series?.[t];Il(r)&&(Bc(e,t,this._config),this.emitConfigUpdate("setSeriesHideOversizedStackedLabels"))}}function kg(e,t){return void 0!==e&&e.getChartType()===t}zc(Eg,[Zf,Qc,qc,eh,th,hh,ph,_h]),t.BarChartModel=Gh,t.BoxPlotDataSortingKinds=ih,t.BoxPlotModel=xp,t.ChartModel=rc,t.ColorFormatKeys={Background:"background"},t.ComboBarLineChartModel=Eg,t.FormatKeys={TextElements:"textElements",XAxisTitle:"xAxisTitle",YAxisTitle:"yAxisTitle",AxisLabels:"axisLabels",GuideLabels:"guideLabels",Title:"title",LegendText:"legendText",LegendTitle:"legendTitle",Description:"description",DataLabels:"dataLabels",Background:"background",LeaderLines:"leaderLines",AxisLines:"axisLines",GridLines:"gridLines"},t.GaugeModel=Op,t.GuideOrientation=nh,t.HistogramModel=$p,t.LineChartModel=rg,t.LineFormatKeys={AxisLines:"axisLines",GridLines:"gridLines",LeaderLines:"leaderLines"},t.ModelWithBasicXAxis=Jf,t.ModelWithColorMatch=qc,t.ModelWithDataLabels=th,t.ModelWithGuides=fh,t.ModelWithLegend=Qc,t.ModelWithRotation=eh,t.ModelWithTemporalBinning=_h,t.ModelWithXGuides=hh,t.ModelWithXYAxes=Zf,t.ModelWithYGuides=ph,t.PieChartDataModes=sh,t.PieChartDataSortingKinds=ah,t.PieChartModel=vg,t.PieChartSlicesDisplay=oh,t.ScatterPlotModel=Cg,t.SerialChartDataSortingKinds=rh,t.SerialChartModel=qh,t.TextFormatKeys={Title:"title",XAxisTitle:"xAxisTitle",YAxisTitle:"yAxisTitle",AxisLabels:"axisLabels",GuideLabels:"guideLabels",LegendText:"legendText",LegendTitle:"legendTitle",Description:"description",DataLabels:"dataLabels"},t.createModel=async function(e){const{config:t,layer:r}=e,i=e.chartType;let a;switch(i){case yc:a=new Gh;break;case mc:a=new rg;break;case pc:a=new vg;break;case vc:a=new $p;break;case hc:a=new Cg;break;case bc:a=new xp;break;case gc:a=new Op;break;default:a=void 0}return await(a?.setup({layer:r,config:t})),void 0!==i&&kg(a,i)?a:void 0},t.isBarChartModel=function(e){return void 0!==e&&e.getChartType()===yc},t.isBoxPlotModel=function(e){return void 0!==e&&e.getChartType()===bc},t.isChartModel=function(e){return void 0!==e&&"getConfig"in e},t.isLineChartModel=function(e){return void 0!==e&&e.getChartType()===mc},t.isModelOfType=kg,t.isModelWithBasicXAxis=function(e){return void 0!==e&&"getXAxisTitleText"in e},t.isModelWithDataLabels=function(e){return void 0!==e&&"getDataLabelsVisibility"in e},t.isModelWithGuides=function(e){return void 0!==e&&"getGuideVisibility"in e},t.isModelWithLegend=function(e){return void 0!==e&&"getLegendVisibility"in e},t.isModelWithRotation=function(e){return void 0!==e&&"getRotatedState"in e},t.isModelWithTemporalBinning=function(e){return void 0!==e&&"getTimeIntervalSize"in e},t.isModelWithXGuides=function(e){return void 0!==e&&"addXAxisGuide"in e},t.isModelWithXYAxes=function(e){return void 0!==e&&[yc,bc,vc,hc,mc,wc].includes(e.getChartType())&&"getYAxisTitleText"in e},t.isModelWithYGuides=function(e){return void 0!==e&&"addYAxisGuide"in e},t.isPieChartModel=function(e){return void 0!==e&&e.getChartType()===pc},t.isScatterPlotModel=function(e){return void 0!==e&&e.getChartType()===hc},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=index.js.map
