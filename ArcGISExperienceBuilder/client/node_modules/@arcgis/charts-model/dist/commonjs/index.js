"use strict";function e(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}Object.defineProperty(exports,"__esModule",{value:!0});const t="18.1.0",r="esriFieldTypeDouble",i="esriFieldTypeInteger",a="esriFieldTypeSingle",s="esriFieldTypeSmallInteger",o="count",n="sum",l="min",c="max",u="avg",d="var",f="percentile_cont",h="percentile_disc",p="envelope-aggregate",g="no_aggregation",m="esriSLSSolid",y="esriSMSCircle",v="esriSFSSolid",b="center",w="middle",S="esriSLS",x="esriSMS",_="esriSFS",P="chart",F="chartOverlay",j="chartOverlays",C="chartAxis",E="number",k="scatterSeries",I="pieSeries",O="gaugeSeries",A="lineSeries",T="barSeries",L="histogramSeries",D="boxPlotSeries",q="radarSeries",$="comboLineAndBarSeries",U="none",B="ASC",M="DESC",R="hide",N="same",z="newer",V="older",G="unrecognized",Q="arcgis-charts-y-value",H="arcgis-charts-mean",K="arcgis-charts-median",W="arcgis-charts-category",X="arcgis_charts_pie_from_fields_name",Y="axisLabels",J="guideLabel",Z="axisTitle",ee="chartTitle",te="dataLabels",re="legendTitle",ie="legendText",ae="descriptionText",se={Arabic:"ar",ArabicLatin:"ar-u-nu-latn",Bosnian:"bs",Bulgarian:"bg",Catalan:"ca",Czech:"cs",Danish:"da",German:"de",Greek:"el",English:"en",EnglishUSA:"en-US",Spanish:"es",Estonian:"et",Finnish:"fi",French:"fr",Hebrew:"he",Croatian:"hr",Hungarian:"hu",Indonesian:"id",Italian:"it",Japanese:"ja",Korean:"ko",Lithuanian:"lt",Latvian:"lv",NorwegianBokml:"no",Dutch:"nl",Polish:"pl",PortugueseBrazil:"pt-BR",PortuguesePortugal:"pt-PT",Romanian:"ro",Russian:"ru",Serbian:"sr",Slovenian:"sl",Slovak:"sk",Swedish:"sv",Thai:"th",Turkish:"tr",Ukrainian:"uk",Vietnamese:"vi",ChineseChina:"zh-CN",ChineseHongKong:"zh-HK",ChineseTaiwan:"zh-TW"},oe=[...Object.values(se),"en-AU","en-GB","es-ES","es-MX","de-CH","de-DE","de-AT","it-CH","it-IT"];var ne="object"==typeof global&&global&&global.Object===Object&&global,le="object"==typeof self&&self&&self.Object===Object&&self,ce=ne||le||Function("return this")(),ue=ce.Symbol,de=Object.prototype,fe=de.hasOwnProperty,he=de.toString,pe=ue?ue.toStringTag:void 0,ge=Object.prototype.toString,me=ue?ue.toStringTag:void 0;function ye(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":me&&me in Object(e)?function(e){var t=fe.call(e,pe),r=e[pe];try{e[pe]=void 0;var i=!0}catch(e){}var a=he.call(e);return i&&(t?e[pe]=r:delete e[pe]),a}(e):function(e){return ge.call(e)}(e)}function ve(e){return null!=e&&"object"==typeof e}function be(e,t){for(var r=-1,i=null==e?0:e.length,a=Array(i);++r<i;)a[r]=t(e[r],r,e);return a}var we=Array.isArray,Se=ue?ue.prototype:void 0,xe=Se?Se.toString:void 0;function _e(e){if("string"==typeof e)return e;if(we(e))return be(e,_e)+"";if(function(e){return"symbol"==typeof e||ve(e)&&"[object Symbol]"==ye(e)}(e))return xe?xe.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Pe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Fe(e){return e}function je(e){if(!Pe(e))return!1;var t=ye(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var Ce,Ee=ce["__core-js_shared__"],ke=(Ce=/[^.]+$/.exec(Ee&&Ee.keys&&Ee.keys.IE_PROTO||""))?"Symbol(src)_1."+Ce:"",Ie=Function.prototype.toString;function Oe(e){if(null!=e){try{return Ie.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var Ae=/^\[object .+?Constructor\]$/,Te=Function.prototype,Le=Object.prototype,De=Te.toString,qe=Le.hasOwnProperty,$e=RegExp("^"+De.call(qe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ue(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Pe(e)||(t=e,ke&&ke in t))&&(je(e)?$e:Ae).test(Oe(e));var t}(r)?r:void 0}var Be=Ue(ce,"WeakMap"),Me=Object.create,Re=function(){function e(){}return function(t){if(!Pe(t))return{};if(Me)return Me(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),Ne=Re;function ze(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Ve,Ge,Qe,He=Date.now,Ke=function(){try{var e=Ue(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),We=Ke,Xe=We?function(e,t){return We(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:Fe,Ye=(Ve=Xe,Ge=0,Qe=0,function(){var e=He(),t=16-(e-Qe);if(Qe=e,t>0){if(++Ge>=800)return arguments[0]}else Ge=0;return Ve.apply(void 0,arguments)}),Je=/^(?:0|[1-9]\d*)$/;function Ze(e,t){var r=typeof e;return!!(t=t??9007199254740991)&&("number"==r||"symbol"!=r&&Je.test(e))&&e>-1&&e%1==0&&e<t}function et(e,t,r){"__proto__"==t&&We?We(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function tt(e,t){return e===t||e!=e&&t!=t}var rt=Object.prototype.hasOwnProperty;function it(e,t,r){var i=e[t];rt.call(e,t)&&tt(i,r)&&(void 0!==r||t in e)||et(e,t,r)}function at(e,t,r,i){var a=!r;r||(r={});for(var s=-1,o=t.length;++s<o;){var n=t[s],l=i?i(r[n],e[n],n,r,e):void 0;void 0===l&&(l=e[n]),a?et(r,n,l):it(r,n,l)}return r}var st=Math.max;function ot(e,t){return Ye(function(e,t,r){return t=st(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,s=st(i.length-t,0),o=Array(s);++a<s;)o[a]=i[t+a];a=-1;for(var n=Array(t+1);++a<t;)n[a]=i[a];return n[t]=r(o),ze(e,this,n)}}(e,t,Fe),e+"")}function nt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function lt(e){return null!=e&&nt(e.length)&&!je(e)}function ct(e,t,r){if(!Pe(r))return!1;var i=typeof t;return!!("number"==i?lt(r)&&Ze(t,r.length):"string"==i&&t in r)&&tt(r[t],e)}var ut=Object.prototype;function dt(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ut)}function ft(e){return ve(e)&&"[object Arguments]"==ye(e)}var ht=Object.prototype,pt=ht.hasOwnProperty,gt=ht.propertyIsEnumerable,mt=ft(function(){return arguments}())?ft:function(e){return ve(e)&&pt.call(e,"callee")&&!gt.call(e,"callee")},yt="object"==typeof exports&&exports&&!exports.nodeType&&exports,vt=yt&&"object"==typeof module&&module&&!module.nodeType&&module,bt=vt&&vt.exports===yt?ce.Buffer:void 0,wt=(bt?bt.isBuffer:void 0)||function(){return!1},St={};function xt(e){return function(t){return e(t)}}St["[object Float32Array]"]=St["[object Float64Array]"]=St["[object Int8Array]"]=St["[object Int16Array]"]=St["[object Int32Array]"]=St["[object Uint8Array]"]=St["[object Uint8ClampedArray]"]=St["[object Uint16Array]"]=St["[object Uint32Array]"]=!0,St["[object Arguments]"]=St["[object Array]"]=St["[object ArrayBuffer]"]=St["[object Boolean]"]=St["[object DataView]"]=St["[object Date]"]=St["[object Error]"]=St["[object Function]"]=St["[object Map]"]=St["[object Number]"]=St["[object Object]"]=St["[object RegExp]"]=St["[object Set]"]=St["[object String]"]=St["[object WeakMap]"]=!1;var _t="object"==typeof exports&&exports&&!exports.nodeType&&exports,Pt=_t&&"object"==typeof module&&module&&!module.nodeType&&module,Ft=Pt&&Pt.exports===_t&&ne.process,jt=function(){try{return Pt&&Pt.require&&Pt.require("util").types||Ft&&Ft.binding&&Ft.binding("util")}catch(e){}}(),Ct=jt&&jt.isTypedArray,Et=Ct?xt(Ct):function(e){return ve(e)&&nt(e.length)&&!!St[ye(e)]},kt=Object.prototype.hasOwnProperty;function It(e,t){var r=we(e),i=!r&&mt(e),a=!r&&!i&&wt(e),s=!r&&!i&&!a&&Et(e),o=r||i||a||s,n=o?function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}(e.length,String):[],l=n.length;for(var c in e)!t&&!kt.call(e,c)||o&&("length"==c||a&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ze(c,l))||n.push(c);return n}function Ot(e,t){return function(r){return e(t(r))}}var At=Ot(Object.keys,Object),Tt=Object.prototype.hasOwnProperty;function Lt(e){if(!dt(e))return At(e);var t=[];for(var r in Object(e))Tt.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Dt(e){return lt(e)?It(e):Lt(e)}var qt=Object.prototype.hasOwnProperty;function $t(e){return lt(e)?It(e,!0):function(e){if(!Pe(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=dt(e),r=[];for(var i in e)("constructor"!=i||!t&&qt.call(e,i))&&r.push(i);return r}(e)}var Ut,Bt=(Ut=function(e,t,r,i){at(t,$t(t),e,i)},ot((function(e,t){var r=-1,i=t.length,a=i>1?t[i-1]:void 0,s=i>2?t[2]:void 0;for(a=Ut.length>3&&"function"==typeof a?(i--,a):void 0,s&&ct(t[0],t[1],s)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var o=t[r];o&&Ut(e,o,0,a)}return e}))),Mt=Bt,Rt=Ue(Object,"create"),Nt=Object.prototype.hasOwnProperty,zt=Object.prototype.hasOwnProperty;function Vt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function Gt(e,t){for(var r=e.length;r--;)if(tt(e[r][0],t))return r;return-1}Vt.prototype.clear=function(){this.__data__=Rt?Rt(null):{},this.size=0},Vt.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Vt.prototype.get=function(e){var t=this.__data__;if(Rt){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Nt.call(t,e)?t[e]:void 0},Vt.prototype.has=function(e){var t=this.__data__;return Rt?void 0!==t[e]:zt.call(t,e)},Vt.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Rt&&void 0===t?"__lodash_hash_undefined__":t,this};var Qt=Array.prototype.splice;function Ht(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Ht.prototype.clear=function(){this.__data__=[],this.size=0},Ht.prototype.delete=function(e){var t=this.__data__,r=Gt(t,e);return!(r<0||(r==t.length-1?t.pop():Qt.call(t,r,1),--this.size,0))},Ht.prototype.get=function(e){var t=this.__data__,r=Gt(t,e);return r<0?void 0:t[r][1]},Ht.prototype.has=function(e){return Gt(this.__data__,e)>-1},Ht.prototype.set=function(e,t){var r=this.__data__,i=Gt(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this};var Kt=Ue(ce,"Map");function Wt(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function Xt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function Yt(e){return null==e?"":_e(e)}function Jt(e,t){for(var r=-1,i=t.length,a=e.length;++r<i;)e[a+r]=t[r];return e}Xt.prototype.clear=function(){this.size=0,this.__data__={hash:new Vt,map:new(Kt||Ht),string:new Vt}},Xt.prototype.delete=function(e){var t=Wt(this,e).delete(e);return this.size-=t?1:0,t},Xt.prototype.get=function(e){return Wt(this,e).get(e)},Xt.prototype.has=function(e){return Wt(this,e).has(e)},Xt.prototype.set=function(e,t){var r=Wt(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this};var Zt=Ot(Object.getPrototypeOf,Object),er=Function.prototype,tr=Object.prototype,rr=er.toString,ir=tr.hasOwnProperty,ar=rr.call(Object);function sr(e){if(!ve(e))return!1;var t=ye(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!function(e){if(!ve(e)||"[object Object]"!=ye(e))return!1;var t=Zt(e);if(null===t)return!0;var r=ir.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&rr.call(r)==ar}(e)}var or=ot((function(e,t){try{return ze(e,void 0,t)}catch(e){return sr(e)?e:new Error(e)}})),nr=or;function lr(e){var t=this.__data__=new Ht(e);this.size=t.size}lr.prototype.clear=function(){this.__data__=new Ht,this.size=0},lr.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},lr.prototype.get=function(e){return this.__data__.get(e)},lr.prototype.has=function(e){return this.__data__.has(e)},lr.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Ht){var i=r.__data__;if(!Kt||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new Xt(i)}return r.set(e,t),this.size=r.size,this};var cr="object"==typeof exports&&exports&&!exports.nodeType&&exports,ur=cr&&"object"==typeof module&&module&&!module.nodeType&&module,dr=ur&&ur.exports===cr?ce.Buffer:void 0,fr=dr?dr.allocUnsafe:void 0;function hr(){return[]}var pr=Object.prototype.propertyIsEnumerable,gr=Object.getOwnPropertySymbols,mr=gr?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,i=null==e?0:e.length,a=0,s=[];++r<i;){var o=e[r];t(o)&&(s[a++]=o)}return s}(gr(e),(function(t){return pr.call(e,t)})))}:hr,yr=mr,vr=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Jt(t,yr(e)),e=Zt(e);return t}:hr,br=vr;function wr(e,t,r){var i=t(e);return we(e)?i:Jt(i,r(e))}function Sr(e){return wr(e,Dt,yr)}function xr(e){return wr(e,$t,br)}var _r=Ue(ce,"DataView"),Pr=Ue(ce,"Promise"),Fr=Ue(ce,"Set"),jr="[object Map]",Cr="[object Promise]",Er="[object Set]",kr="[object WeakMap]",Ir="[object DataView]",Or=Oe(_r),Ar=Oe(Kt),Tr=Oe(Pr),Lr=Oe(Fr),Dr=Oe(Be),qr=ye;(_r&&qr(new _r(new ArrayBuffer(1)))!=Ir||Kt&&qr(new Kt)!=jr||Pr&&qr(Pr.resolve())!=Cr||Fr&&qr(new Fr)!=Er||Be&&qr(new Be)!=kr)&&(qr=function(e){var t=ye(e),r="[object Object]"==t?e.constructor:void 0,i=r?Oe(r):"";if(i)switch(i){case Or:return Ir;case Ar:return jr;case Tr:return Cr;case Lr:return Er;case Dr:return kr}return t});var $r=qr,Ur=Object.prototype.hasOwnProperty,Br=ce.Uint8Array;function Mr(e){var t=new e.constructor(e.byteLength);return new Br(t).set(new Br(e)),t}var Rr=/\w*$/,Nr=ue?ue.prototype:void 0,zr=Nr?Nr.valueOf:void 0;var Vr=jt&&jt.isMap,Gr=Vr?xt(Vr):function(e){return ve(e)&&"[object Map]"==$r(e)},Qr=jt&&jt.isSet,Hr=Qr?xt(Qr):function(e){return ve(e)&&"[object Set]"==$r(e)},Kr="[object Arguments]",Wr="[object Function]",Xr="[object Object]",Yr={};function Jr(e,t,r,i,a,s){var o,n=1&t,l=2&t,c=4&t;if(r&&(o=a?r(e,i,a,s):r(e)),void 0!==o)return o;if(!Pe(e))return e;var u=we(e);if(u){if(o=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Ur.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!n)return function(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}(e,o)}else{var d=$r(e),f=d==Wr||"[object GeneratorFunction]"==d;if(wt(e))return function(e,t){if(t)return e.slice();var r=e.length,i=fr?fr(r):new e.constructor(r);return e.copy(i),i}(e,n);if(d==Xr||d==Kr||f&&!a){if(o=l||f?{}:function(e){return"function"!=typeof e.constructor||dt(e)?{}:Ne(Zt(e))}(e),!n)return l?function(e,t){return at(e,br(e),t)}(e,function(e,t){return e&&at(t,$t(t),e)}(o,e)):function(e,t){return at(e,yr(e),t)}(e,function(e,t){return e&&at(t,Dt(t),e)}(o,e))}else{if(!Yr[d])return a?e:{};o=function(e,t,r){var i,a,s,o=e.constructor;switch(t){case"[object ArrayBuffer]":return Mr(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return function(e,t){var r=t?Mr(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var r=t?Mr(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,r);case"[object Map]":case"[object Set]":return new o;case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return(s=new(a=e).constructor(a.source,Rr.exec(a))).lastIndex=a.lastIndex,s;case"[object Symbol]":return i=e,zr?Object(zr.call(i)):{}}}(e,d,n)}}s||(s=new lr);var h=s.get(e);if(h)return h;s.set(e,o),Hr(e)?e.forEach((function(i){o.add(Jr(i,t,r,i,e,s))})):Gr(e)&&e.forEach((function(i,a){o.set(a,Jr(i,t,r,a,e,s))}));var p=u?void 0:(c?l?xr:Sr:l?$t:Dt)(e);return function(e,t){for(var r=-1,i=null==e?0:e.length;++r<i&&!1!==t(e[r],r););}(p||e,(function(i,a){p&&(i=e[a=i]),it(o,a,Jr(i,t,r,a,e,s))})),o}function Zr(e){return Jr(e,5)}Yr[Kr]=Yr["[object Array]"]=Yr["[object ArrayBuffer]"]=Yr["[object DataView]"]=Yr["[object Boolean]"]=Yr["[object Date]"]=Yr["[object Float32Array]"]=Yr["[object Float64Array]"]=Yr["[object Int8Array]"]=Yr["[object Int16Array]"]=Yr["[object Int32Array]"]=Yr["[object Map]"]=Yr["[object Number]"]=Yr[Xr]=Yr["[object RegExp]"]=Yr["[object Set]"]=Yr["[object String]"]=Yr["[object Symbol]"]=Yr["[object Uint8Array]"]=Yr["[object Uint8ClampedArray]"]=Yr["[object Uint16Array]"]=Yr["[object Uint32Array]"]=!0,Yr["[object Error]"]=Yr[Wr]=Yr["[object WeakMap]"]=!1;var ei=ue?ue.prototype:void 0;ei&&ei.valueOf;var ti,ri=(ti={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},function(e){return null==ti?void 0:ti[e]}),ii=/[&<>"']/g,ai=RegExp(ii.source),si=Object.prototype.hasOwnProperty;function oi(e){if(null==e)return!0;if(lt(e)&&(we(e)||"string"==typeof e||"function"==typeof e.splice||wt(e)||Et(e)||mt(e)))return!e.length;var t=$r(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(dt(e))return!Lt(e).length;for(var r in e)if(si.call(e,r))return!1;return!0}var ni=Object.prototype,li=ni.hasOwnProperty;function ci(e,t,r,i){return void 0===e||tt(e,ni[r])&&!li.call(i,r)?t:e}var ui={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function di(e){return"\\"+ui[e]}var fi=/<%=([\s\S]+?)%>/g,hi={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:fi,variable:"",imports:{_:{escape:function(e){return(e=Yt(e))&&ai.test(e)?e.replace(ii,ri):e}}}},pi=/\b__p \+= '';/g,gi=/\b(__p \+=) '' \+/g,mi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,yi=/[()=,{}\[\]\/\s]/,vi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,bi=/($^)/,wi=/['\n\r\u2028\u2029\\]/g,Si=Object.prototype.hasOwnProperty;function xi(e,t){return function(e,t,r){var i=hi.imports._.templateSettings||hi;r&&ct(e,t,r)&&(t=void 0),e=Yt(e),t=Mt({},t,i,ci);var a,s,o=Mt({},t.imports,i.imports,ci),n=Dt(o),l=function(e,t){return be(t,(function(t){return e[t]}))}(o,n),c=0,u=t.interpolate||bi,d="__p += '",f=RegExp((t.escape||bi).source+"|"+u.source+"|"+(u===fi?vi:bi).source+"|"+(t.evaluate||bi).source+"|$","g"),h=Si.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(f,(function(t,r,i,o,n,l){return i||(i=o),d+=e.slice(c,l).replace(wi,di),r&&(a=!0,d+="' +\n__e("+r+") +\n'"),n&&(s=!0,d+="';\n"+n+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=l+t.length,t})),d+="';\n";var p=Si.call(t,"variable")&&t.variable;if(p){if(yi.test(p))throw new Error("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(s?d.replace(pi,""):d).replace(gi,"$1").replace(mi,"$1;"),d="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=nr((function(){return Function(n,h+"return "+d).apply(void 0,l)}));if(g.source=d,sr(g))throw g;return g}(e)(t)}function _i(e,t){let r=se.English;const i=function(e){let t=e;if(void 0!==e&&e.includes("-")){const[r,i]=e.split("-");t=`${r}-${i.toUpperCase()}`}return t}(e);if(void 0!==i)if(t.includes(i))r=i;else{const e=function(e){const t=e?.match(/^([a-z]{2})-([A-Z]{2})$/u);let r=se.English;return null!=t&&t?.length>1?r=t[1]:2===e?.length&&e.toLowerCase()===e&&(r=e),r}(i);t.includes(e)?r=e:"nb"===e&&(r="no")}return r}function Pi(e,t){return function t(r){let i;return i=void 0===r||r===document||r===window?null:r.closest(e)||t(r.getRootNode().host),i}(t)}function Fi(e=document.documentElement){const t=Pi("[lang]",e),r=t?.lang??window.navigator.language,i=Object.values(se),a=Object.values(oe),s=_i(r,i);let o=_i(r,a);return o="ar"===o?"ar-u-nu-latn":o,{locale:s,rtl:"rtl"===Pi("[dir]",e)?.getAttribute("dir"),formatLocale:o}}async function ji(e=Fi().locale){let t=await Promise.resolve().then((function(){return require("./messages.en-0fffc776-9430eccd.js")}));switch(e){case se.Arabic:t=await Promise.resolve().then((function(){return require("./messages.ar-01382838-048d64e4.js")}));break;case se.Bosnian:t=await Promise.resolve().then((function(){return require("./messages.bs-26dfc274-33406398.js")}));break;case se.Bulgarian:t=await Promise.resolve().then((function(){return require("./messages.bg-32cb6752-d07e0650.js")}));break;case se.Catalan:t=await Promise.resolve().then((function(){return require("./messages.ca-21b03272-65cb9a18.js")}));break;case se.Czech:t=await Promise.resolve().then((function(){return require("./messages.cs-71896a8d-dd3ae410.js")}));break;case se.Danish:t=await Promise.resolve().then((function(){return require("./messages.da-90739473-f9c51117.js")}));break;case se.German:t=await Promise.resolve().then((function(){return require("./messages.de-e2ce6e5c-6f5c333a.js")}));break;case se.Greek:t=await Promise.resolve().then((function(){return require("./messages.el-5582e711-663ab59c.js")}));break;case se.EnglishUSA:t=await Promise.resolve().then((function(){return require("./messages.en-US-63042069-544c6b6d.js")}));break;case se.Spanish:t=await Promise.resolve().then((function(){return require("./messages.es-907baf0a-13f02954.js")}));break;case se.Estonian:t=await Promise.resolve().then((function(){return require("./messages.et-79ae70c6-fa43e8cc.js")}));break;case se.Finnish:t=await Promise.resolve().then((function(){return require("./messages.fi-cc657f3a-f1fdc362.js")}));break;case se.French:t=await Promise.resolve().then((function(){return require("./messages.fr-fb0dd043-eedb1fbc.js")}));break;case se.Hebrew:t=await Promise.resolve().then((function(){return require("./messages.he-ca24a7af-7b7631c2.js")}));break;case se.Croatian:t=await Promise.resolve().then((function(){return require("./messages.hr-a0968519-cd1b6325.js")}));break;case se.Hungarian:t=await Promise.resolve().then((function(){return require("./messages.hu-f801472e-a146c63d.js")}));break;case se.Indonesian:t=await Promise.resolve().then((function(){return require("./messages.id-e0a138dd-c3c64100.js")}));break;case se.Italian:t=await Promise.resolve().then((function(){return require("./messages.it-f3a3c18c-ca9f7b3b.js")}));break;case se.Japanese:t=await Promise.resolve().then((function(){return require("./messages.ja-0a345b79-beb5d1e2.js")}));break;case se.Korean:t=await Promise.resolve().then((function(){return require("./messages.ko-2c82d42a-8926345e.js")}));break;case se.Lithuanian:t=await Promise.resolve().then((function(){return require("./messages.lt-437315dc-1020a810.js")}));break;case se.Latvian:t=await Promise.resolve().then((function(){return require("./messages.lv-57b9e23e-b4442b59.js")}));break;case se.NorwegianBokml:t=await Promise.resolve().then((function(){return require("./messages.no-950d514a-4e3d68c0.js")}));break;case se.Dutch:t=await Promise.resolve().then((function(){return require("./messages.nl-bf7731db-1708a83e.js")}));break;case se.Polish:t=await Promise.resolve().then((function(){return require("./messages.pl-1ed04c02-1792f3bb.js")}));break;case se.PortugueseBrazil:t=await Promise.resolve().then((function(){return require("./messages.pt-BR-d65a99a9-6f06c602.js")}));break;case se.PortuguesePortugal:t=await Promise.resolve().then((function(){return require("./messages.pt-PT-e9eb0f86-1e395269.js")}));break;case se.Romanian:t=await Promise.resolve().then((function(){return require("./messages.ro-0cc0459a-ec8be1bd.js")}));break;case se.Russian:t=await Promise.resolve().then((function(){return require("./messages.ru-d76e79cf-542cb2ce.js")}));break;case se.Serbian:t=await Promise.resolve().then((function(){return require("./messages.sr-b8d5fefe-7f54e58e.js")}));break;case se.Slovak:t=await Promise.resolve().then((function(){return require("./messages.sk-7e8fa059-e8a69330.js")}));break;case se.Slovenian:t=await Promise.resolve().then((function(){return require("./messages.sl-fc1a9dc6-de1ce444.js")}));break;case se.Swedish:t=await Promise.resolve().then((function(){return require("./messages.sv-18b29f8a-b2d98f69.js")}));break;case se.Thai:t=await Promise.resolve().then((function(){return require("./messages.th-c923afca-d2a86a1a.js")}));break;case se.Turkish:t=await Promise.resolve().then((function(){return require("./messages.tr-7495cb63-2a751ef9.js")}));break;case se.Ukrainian:t=await Promise.resolve().then((function(){return require("./messages.uk-4083ab16-39ddbba8.js")}));break;case se.Vietnamese:t=await Promise.resolve().then((function(){return require("./messages.vi-087f5bf7-f672a92f.js")}));break;case se.ChineseChina:t=await Promise.resolve().then((function(){return require("./messages.zh-CN-ac74cfc3-57d64f42.js")}));break;case se.ChineseHongKong:t=await Promise.resolve().then((function(){return require("./messages.zh-HK-f7b7d981-2c1c11cb.js")}));break;case se.ChineseTaiwan:t=await Promise.resolve().then((function(){return require("./messages.zh-TW-34ee3824-017139b7.js")}))}return t}const Ci=5,Ei=4,ki=2e3,Ii=.7,Oi=[156,156,156,255],Ai=[156,156,156,255],Ti=m,Li="arcgis_charts_group_of_slices",Di="arcgis_charts_box_plot_category",qi=[[31,120,180,255],[166,206,227,255],[51,160,44,255],[178,223,138,255],[227,26,28,255],[251,154,153,255],[255,127,0,255],[253,191,111,255],[106,61,154,255],[202,178,214,255]],$i=[[104,104,104,255],[51,124,235,255],[132,0,168,255],[156,156,156,255]];function Ui(e){const{colorIndex:t,opacity:r,histogramOverlays:i}=e,a=Math.max(0,t??0),s=[...!0===i?$i:qi],[o,n,l,c]=s[a%s.length];return[o,n,l,void 0!==r?255*r:c]}function Bi(e){return[0,0,0,255*(e??Ii)]}function Mi(e=1){return[Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random()),255*e]}function Ri(e){const t={family:"Arial, Helvetica, sans-serif",size:10};switch(e){case ee:t.size=18;break;case Z:t.size=14;break;case ie:t.size=12;break;case re:t.size=13;break;case ae:t.size=11}return t}function Ni(e="",t=Ri(),r){let i=b;return r!==te&&r!==J||(i=void 0),{type:"esriTS",color:Bi(),text:e,font:t,horizontalAlignment:i}}function zi(e){const{text:t,visible:r,font:i,type:a}=e??{text:"",visible:!0,font:Ri()};return{type:"chartText",visible:r,content:Ni(t,i,a)}}function Vi(e){const t=e?.useRandomColor??!1,r=e?.useRampColor,i=e?.width??1,a=e?.isHistogramOverlay;let s=e?.color??Bi(1);return t?s=Mi():void 0!==r&&(s=Ui(!0===a?{colorIndex:r.colorIndex,histogramOverlays:a}:{colorIndex:r.colorIndex})),void 0!==e?.opacity&&(s[3]=e.opacity),{type:S,style:m,color:s,width:i}}function Gi(){return{type:E,intlOptions:{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:3,useGrouping:!0}}}function Qi(e="Category Axis"){const t=zi({text:e,visible:!0,font:Ri(Z)});t.content.horizontalAlignment=b,t.content.verticalAlignment=w;const r=zi({text:e,visible:!0,font:Ri(Y)});return{type:C,visible:!0,title:t,labels:r,valueFormat:{type:"category",characterLimit:11},lineSymbol:Vi({color:Oi})}}function Hi(e="Value Axis"){const t=zi({text:e,visible:!0,font:Ri(Z)}),r=zi({text:e,visible:!0,font:Ri(Y)});return t.content.verticalAlignment=w,t.content.horizontalAlignment=b,{type:C,visible:!0,title:t,labels:r,valueFormat:Gi(),lineSymbol:Vi({color:Oi})}}function Ki(){return{type:"chartLegend",visible:!0,title:zi({text:"",visible:!0,font:Ri(re)}),body:Ni("",Ri(ie)),position:"right",maxHeight:Number.NaN}}function Wi(e){return{type:F,visible:!0,created:!1,symbol:Vi({useRampColor:{colorIndex:e},isHistogramOverlay:!0})}}async function Xi(){return(await ji()).defaultTitle}function Yi(){return`Chart ${Date.now()}`}function Ji(e,t=!1){return{type:_,style:v,color:t?Mi(Ii):Ui({colorIndex:e??0,opacity:Ii})}}function Zi(e=0){return{type:x,style:y,color:Ui({colorIndex:e,opacity:Ii}),size:4}}function ea(e){return{type:S,style:m,color:Ui({colorIndex:e,opacity:Ii}),width:2}}function ta(e=!1){return{type:x,style:y,color:e?Mi(Ii):Ui({colorIndex:0,opacity:Ii}),size:7}}function ra(e=!1){return{type:j,trendLine:{type:F,created:!1,visible:!0,symbol:{type:S,style:m,color:e?Mi():Ui({colorIndex:1}),width:2}}}}async function ia(e){const t=await ji(),r=[],i=t.xAxis;let a;const s=Hi(t.statistics.count),o=Vi({opacity:25});switch(s.grid=o,e){case T:a=Qi(i);break;case k:a=Hi(i),a.grid=o;break;case A:case L:a=Hi(i);break;case D:a=Qi("")}return void 0!==a&&r.push(a,s),r}function aa(){return{type:"gaugeNeedle",symbol:{type:_,color:[0,0,0,200]}}}async function sa(){const e=[],t=Hi((await ji()).xAxis);return t.needle=aa(),e.push(t),e}async function oa(e){const t=e.objectIDField??"ObjectID",r=`${o}_${t}_0`.toUpperCase(),i=(await ji()).countSeries;return{type:A,id:i,name:i,query:{outStatistics:[{statisticType:o,onStatisticField:t,outStatisticFieldName:r}],groupByFieldsForStatistics:[]},x:"",y:r,lineSymbol:ea(e.seriesIndex),markerSymbol:Zi(e.seriesIndex),dataLabels:zi({text:"",visible:!1,font:Ri(te)}),timeIntervalSize:0,timeIntervalUnits:"esriTimeUnitsDays",timeAggregationType:"equalIntervalsFromStartTime",trimIncompleteTimeInterval:!0,nullPolicy:"interpolate"}}function na(e){return{type:_,style:v,color:Ui({colorIndex:e,opacity:Ii})}}async function la(e){const t=e.objectIDField??"ObjectID",r=`${o}_${t}_0`.toUpperCase(),i=(await ji()).countSeries;return{type:T,id:i,name:i,query:{outStatistics:[{statisticType:o,onStatisticField:t,outStatisticFieldName:r}],groupByFieldsForStatistics:[]},x:"",y:r,fillSymbol:na(e.seriesIndex),dataLabels:zi({text:"",visible:!1,font:Ri(te),type:te})}}async function ca(e){const t=(await ji()).countSeries;return{name:t,type:D,id:t,fillSymbol:{type:_,style:v,color:Ui({colorIndex:e,opacity:Ii})},query:{},x:Di,y:""}}function ua(){return{type:"pieTick",visible:!0,lineSymbol:Vi({width:1,color:Ai})}}async function da(e){const t=`${o}_${e}_0`.toUpperCase(),r=(await ji()).countSeries;return{type:I,id:r,name:r,query:{outStatistics:[{statisticType:o,onStatisticField:e??"ObjectID",outStatisticFieldName:t}],groupByFieldsForStatistics:[]},x:"",y:t,fillSymbol:{type:_,style:v},dataLabels:zi({text:"",visible:!1,font:Ri(te),type:te}),startAngle:-90,endAngle:270,dataLabelsCharacterLimit:11,displayNumericValueOnDataLabel:!1,displayPercentageOnDataLabel:!0,numericValueFormat:{...Gi(),intlOptions:{minimumFractionDigits:1,maximumFractionDigits:1}},percentValueFormat:{...Gi(),intlOptions:{minimumFractionDigits:1,maximumFractionDigits:1}},ticks:ua()}}function fa(e){const t=e.objectIDField??"ObjectID",r=`${o}_${t}_0`.toUpperCase(),i="Series0";return{type:O,id:i,name:i,query:{outStatistics:[{statisticType:o,onStatisticField:t,outStatisticFieldName:r}]},x:""}}async function ha(e=Yi()){return{version:t,type:P,id:e,colorMatch:!0,rotated:!1,orderOptions:{data:{orderType:W,orderBy:B}},title:zi({text:await Xi(),visible:!0,font:Ri(ee)}),subTitle:zi(),footer:zi({text:"",visible:!0,font:Ri(ae)}),background:[255,255,255,255],axes:await ia(T),series:[],legend:Ki()}}function pa(){return{type:j,mean:Wi(1),median:Wi(2),standardDeviation:Wi(3),comparisonDistribution:Wi(4)}}function ga(){return{type:L,id:L,name:L,visible:!0,dataTooltipVisible:!0,dataTooltipReverseColor:!1,assignToSecondValueAxis:!1,x:"",binCount:32,overlays:pa(),dataTransformationType:U,fillSymbol:{type:_,style:v,color:Ui({colorIndex:0,opacity:Ii})},dataLabels:zi({text:"",visible:!1,font:Ri(te)})}}async function ma(e){const t=await ji();let r;switch(e){case u:r=t.statistics.mean;break;case f:r=t.statistics.median;break;case n:r=t.statistics.sum;break;case l:r=t.statistics.minimum;break;case c:r=t.statistics.maximum;break;case d:r=t.statistics.variance;break;case h:r=t.statistics.discretePercentile;break;case g:r=t.statistics.noAggregation;break;default:r=t.statistics.count}return r}const ya=[210,210,210,178.5];var va={exports:{}},ba={},wa={exports:{}},Sa={};function xa(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}var _a=/javascript\s*\:/gim;Sa.whiteList={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},Sa.getDefaultWhiteList=xa,Sa.onAttr=function(e,t,r){},Sa.onIgnoreAttr=function(e,t,r){},Sa.safeAttrValue=function(e,t){return _a.test(t)?"":t};var Pa=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},Fa=function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")},ja=Sa,Ca=function(e,t){";"!==(e=Fa(e))[e.length-1]&&(e+=";");var r=e.length,i=!1,a=0,s=0,o="";function n(){if(!i){var r=Pa(e.slice(a,s)),n=r.indexOf(":");if(-1!==n){var l=Pa(r.slice(0,n)),c=Pa(r.slice(n+1));if(l){var u=t(a,o.length,l,c,r);u&&(o+=u+"; ")}}}a=s+1}for(;s<r;s++){var l=e[s];if("/"===l&&"*"===e[s+1]){var c=e.indexOf("*/",s+2);if(-1===c)break;a=(s=c+1)+1,i=!1}else"("===l?i=!0:")"===l?i=!1:";"===l?i||n():"\n"===l&&n()}return Pa(o)};function Ea(e){return null==e}function ka(e){(e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{})).whiteList=e.whiteList||ja.whiteList,e.onAttr=e.onAttr||ja.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||ja.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||ja.safeAttrValue,this.options=e}ka.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,i=t.onAttr,a=t.onIgnoreAttr,s=t.safeAttrValue;return Ca(e,(function(e,t,o,n,l){var c=r[o],u=!1;if(!0===c?u=c:"function"==typeof c?u=c(n):c instanceof RegExp&&(u=c.test(n)),!0!==u&&(u=!1),n=s(o,n)){var d,f={position:t,sourcePosition:e,source:l,isWhite:u};return u?Ea(d=i(o,n,f))?o+":"+n:d:Ea(d=a(o,n,f))?void 0:d}}))};var Ia=ka;!function(e,t){var r=Sa,i=Ia;for(var a in(t=e.exports=function(e,t){return new i(t).process(e)}).FilterCSS=i,r)t[a]=r[a]}(wa,wa.exports);var Oa=wa.exports,Aa={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,a;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,a=e.length;i<a;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}},Ta=Oa.FilterCSS,La=Oa.getDefaultWhiteList,Da=Aa;var qa=new Ta;function $a(e){return e.replace(Ua,"&lt;").replace(Ba,"&gt;")}var Ua=/</g,Ba=/>/g,Ma=/"/g,Ra=/&quot;/g,Na=/&#([a-zA-Z0-9]*);?/gim,za=/&colon;?/gim,Va=/&newline;?/gim,Ga=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Qa=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Ha=/u\s*r\s*l\s*\(.*/gi;function Ka(e){return e.replace(Ma,"&quot;")}function Wa(e){return e.replace(Ra,'"')}function Xa(e){return e.replace(Na,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function Ya(e){return e.replace(za,":").replace(Va," ")}function Ja(e){for(var t="",r=0,i=e.length;r<i;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return Da.trim(t)}function Za(e){return Ja(e=Ya(e=Xa(e=Wa(e))))}function es(e){return $a(e=Ka(e))}ba.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},ba.getDefaultWhiteList=function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}},ba.onTag=function(e,t,r){},ba.onIgnoreTag=function(e,t,r){},ba.onTagAttr=function(e,t,r){},ba.onIgnoreTagAttr=function(e,t,r){},ba.safeAttrValue=function(e,t,r,i){if(r=Za(r),"href"===t||"src"===t){if("#"===(r=Da.trim(r)))return"#";if("http://"!==r.substr(0,7)&&"https://"!==r.substr(0,8)&&"mailto:"!==r.substr(0,7)&&"tel:"!==r.substr(0,4)&&"data:image/"!==r.substr(0,11)&&"ftp://"!==r.substr(0,6)&&"./"!==r.substr(0,2)&&"../"!==r.substr(0,3)&&"#"!==r[0]&&"/"!==r[0])return""}else if("background"===t){if(Ga.lastIndex=0,Ga.test(r))return""}else if("style"===t){if(Qa.lastIndex=0,Qa.test(r))return"";if(Ha.lastIndex=0,Ha.test(r)&&(Ga.lastIndex=0,Ga.test(r)))return"";!1!==i&&(r=(i=i||qa).process(r))}return es(r)},ba.escapeHtml=$a,ba.escapeQuote=Ka,ba.unescapeQuote=Wa,ba.escapeHtmlEntities=Xa,ba.escapeDangerHtml5Entities=Ya,ba.clearNonPrintableCharacter=Ja,ba.friendlyAttrValue=Za,ba.escapeAttrValue=es,ba.onIgnoreTagStripAll=function(){return""},ba.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var r=!Array.isArray(e),i=[],a=!1;return{onIgnoreTag:function(s,o,n){if(function(t){return!!r||-1!==Da.indexOf(e,t)}(s)){if(n.isClosing){var l=n.position+10;return i.push([!1!==a?a:n.position,l]),a=!1,"[/removed]"}return a||(a=n.position),"[removed]"}return t(s,o,n)},remove:function(e){var t="",r=0;return Da.forEach(i,(function(i){t+=e.slice(r,i[0]),r=i[1]})),t+=e.slice(r)}}},ba.stripCommentTag=function(e){for(var t="",r=0;r<e.length;){var i=e.indexOf("\x3c!--",r);if(-1===i){t+=e.slice(r);break}t+=e.slice(r,i);var a=e.indexOf("--\x3e",i);if(-1===a)break;r=a+3}return t},ba.stripBlankChar=function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return!(127===t||t<=31&&10!==t&&13!==t)}))).join("")},ba.cssFilter=qa,ba.getDefaultCSSWhiteList=La;var ts={},rs=Aa;function is(e){var t,r=rs.spaceIndex(e);return t=-1===r?e.slice(1,-1):e.slice(1,r+1),"/"===(t=rs.trim(t).toLowerCase()).slice(0,1)&&(t=t.slice(1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),t}function as(e){return"</"===e.slice(0,2)}var ss=/[^a-zA-Z0-9\\_:.-]/gim;function os(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"="===r?t:-1}}function ns(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"'"===r||'"'===r?t:-1}}function ls(e,t){for(;t>0;t--){var r=e[t];if(" "!==r)return"="===r?t:-1}}function cs(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}ts.parseTag=function(e,t,r){var i="",a=0,s=!1,o=!1,n=0,l=e.length,c="",u="";e:for(n=0;n<l;n++){var d=e.charAt(n);if(!1===s){if("<"===d){s=n;continue}}else if(!1===o){if("<"===d){i+=r(e.slice(a,n)),s=n,a=n;continue}if(">"===d){i+=r(e.slice(a,s)),c=is(u=e.slice(s,n+1)),i+=t(s,i.length,c,u,as(u)),a=n+1,s=!1;continue}if('"'===d||"'"===d)for(var f=1,h=e.charAt(n-f);""===h.trim()||"="===h;){if("="===h){o=d;continue e}h=e.charAt(n-++f)}}else if(d===o){o=!1;continue}}return a<e.length&&(i+=r(e.substr(a))),i},ts.parseAttr=function(e,t){var r=0,i=0,a=[],s=!1,o=e.length;function n(e,r){if(!((e=(e=rs.trim(e)).replace(ss,"").toLowerCase()).length<1)){var i=t(e,r||"");i&&a.push(i)}}for(var l=0;l<o;l++){var c,u=e.charAt(l);if(!1!==s||"="!==u)if(!1===s||l!==i){if(/\s|\n|\t/.test(u)){if(e=e.replace(/\s|\n|\t/g," "),!1===s){if(-1===(c=os(e,l))){n(rs.trim(e.slice(r,l))),s=!1,r=l+1;continue}l=c-1;continue}if(-1===(c=ls(e,l-1))){n(s,cs(rs.trim(e.slice(r,l)))),s=!1,r=l+1;continue}}}else{if(-1===(c=e.indexOf(u,l+1)))break;n(s,rs.trim(e.slice(i+1,c))),s=!1,r=(l=c)+1}else s=e.slice(r,l),r=l+1,i='"'===e.charAt(r)||"'"===e.charAt(r)?r:ns(e,l+1)}return r<e.length&&(!1===s?n(e.slice(r)):n(s,cs(rs.trim(e.slice(r))))),rs.trim(a.join(" "))};var us=Oa.FilterCSS,ds=ba,fs=ts,hs=fs.parseTag,ps=fs.parseAttr,gs=Aa;function ms(e){return null==e}function ys(e){(e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=ds.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=function(e){var t={};for(var r in e)Array.isArray(e[r])?t[r.toLowerCase()]=e[r].map((function(e){return e.toLowerCase()})):t[r.toLowerCase()]=e[r];return t}(e.whiteList||e.allowList):e.whiteList=ds.whiteList,e.onTag=e.onTag||ds.onTag,e.onTagAttr=e.onTagAttr||ds.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||ds.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||ds.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||ds.safeAttrValue,e.escapeHtml=e.escapeHtml||ds.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new us(e.css))}ys.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,i=t.onTag,a=t.onIgnoreTag,s=t.onTagAttr,o=t.onIgnoreTagAttr,n=t.safeAttrValue,l=t.escapeHtml,c=this.cssFilter;t.stripBlankChar&&(e=ds.stripBlankChar(e)),t.allowCommentTag||(e=ds.stripCommentTag(e));var u=!1;t.stripIgnoreTagBody&&(u=ds.StripTagBody(t.stripIgnoreTagBody,a),a=u.onIgnoreTag);var d=hs(e,(function(e,t,u,d,f){var h={sourcePosition:e,position:t,isClosing:f,isWhite:Object.prototype.hasOwnProperty.call(r,u)},p=i(u,d,h);if(!ms(p))return p;if(h.isWhite){if(h.isClosing)return"</"+u+">";var g=function(e){var t=gs.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var r="/"===(e=gs.trim(e.slice(t+1,-1)))[e.length-1];return r&&(e=gs.trim(e.slice(0,-1))),{html:e,closing:r}}(d),m=r[u],y=ps(g.html,(function(e,t){var r=-1!==gs.indexOf(m,e),i=s(u,e,t,r);return ms(i)?r?(t=n(u,e,t,c))?e+'="'+t+'"':e:ms(i=o(u,e,t,r))?void 0:i:i}));return d="<"+u,y&&(d+=" "+y),g.closing&&(d+=" /"),d+">"}return ms(p=a(u,d,h))?l(d):p}),l);return u&&(d=u.remove(d)),d};var vs=ys;!function(e,t){var r=ba,i=ts,a=vs;function s(e,t){return new a(t).process(e)}(t=e.exports=s).filterXSS=s,t.FilterXSS=a,function(){for(var e in r)t[e]=r[e];for(var a in i)t[a]=i[a]}(),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)}(va,va.exports);const bs="nonSpecific",ws="barAndLineNoAggregation",Ss="barAndLineMonoField",xs="barAndLineMultiFields",_s="barAndLineFromFields",Ps="barAndLineSplitBy",Fs="barAndLineSplitByNoAggregation",js="pieNoAggregation",Cs="pieFromCategory",Es="pieFromFields",ks="boxPlotMonoField",Is="boxPlotMultiFields",Os="boxPlotMonoFieldAndCategory",As="boxPlotMultiFieldsAndCategory",Ts="boxPlotMonoFieldAndSplitBy",Ls="boxPlotMultiFieldsAndSplitBy",Ds="boxPlotMonoFieldAndCategoryAndSplitBy";function qs(e,t){let r;if(void 0!==e&&e.length>0)if(void 0!==t&&t>=0&&t<e.length)r=e[t].type;else{const t=new Set(e.map((e=>e.type))),i=function(e){return 2===e.size&&e.has(A)&&e.has(T)}(t),a=function(e){return 2===e.size&&e.has(A)&&e.has(D)||1===e.size&&e.has(D)}(t);r=!0===i?$:a?D:t.size>=2?void 0:e[0].type}return r}function $s(e){let t=!1;if(void 0!==e){const r=qs(e.series);r!==T&&r!==A&&r!==$&&r!==D||(t=e.rotated??!1)}return t}function Us(e){const{value:t,keepSurroundingQuotes:r,escape:i}=e;let a=t?.trim();if(!Ms(a)){let e="";a.startsWith("'")&&a.endsWith("'")&&(a=a.slice(1,-1),r&&(e="'")),!1!==i&&(a=function(e){let t=e;return t=t.replace(/'/gu,"''"),t=t.replace(/[/\\"|[\]\\]/gu,"\\$&"),t}(a)),a=`${e}${a}${e}`}return a}function Bs(e=[],t){const r=e.find((e=>e.name===t))?.alias;return""!==r?r??t:t}function Ms(e){return null==e||"string"==typeof e&&""===e.trim()}function Rs(e,t){let r={fieldToSort:""};if(!Ms(e)){const i=e.trim(),a=i.split(" "),s=a.at(-1)?.toUpperCase();s===B||s===M?r={fieldToSort:i.substring(0,i.lastIndexOf(" ")),orderBy:s}:(r={fieldToSort:i},!1!==t&&(r.orderBy=B))}return r}const Ns=["1.0.0","1.0.1","2.0.0","3.0.0","3.1.0","3.2.0","3.3.0","3.4.0","3.5.0","3.6.0","3.7.0","3.8.0","3.9.0","3.9.1","3.9.2","3.10.0","3.11.0","4.0.0","4.0.1","5.0.0","6.0.0","6.1.0","6.2.0","6.2.1","6.3.0","6.4.0","7.0.0","7.1.0","7.1.1","7.2.0","7.2.1","7.3.1","7.4.0","7.4.1","7.5.0","7.5.1","7.6.0","8.0.0","8.0.1","9.0.0","9.1.0","9.2.0","9.3.0","9.4.0","9.5.0","9.6.0","9.6.1","9.7.0","10.0.0","11.0.0","12.0.0","13.0.0","14.0.0","14.0.1","15.0.0","16.0.0","16.1.0","16.1.1","17.0.0","17.1.0","17.2.0","17.2.1","18.0.0","18.1.0"],zs="1.0.0",Vs="unrecognized.version";function Gs(e,t){let r=0;if(e!==t){const i=e.split("."),a=t.split(".");for(let e=0;e<i.length;e+=1){const t=Number.parseInt(i[e],10),s=Number.parseInt(a[e],10);if(t>s||Number.isNaN(s)){r=1;break}if(t<s){r=-1;break}}}return r}function Qs(e){const{series:t}=e;let r=!0===("showMean"in e&&e.showMean)?t.find((e=>e.type===A)):t[0];return r??=t[0],r}function Hs(e,t){let r="";return void 0!==e&&e.includes("=")&&(r=!1!==t?Us({value:e.split("=")[0]}):e.split("=")[0].trim()),r}function Ks(e){const{where:t,normalize:r,keepSurroundingQuotes:i,escape:a}=e;let s="";return void 0!==t&&t.includes("=")&&(s=t.split("=").slice(1).join("=").trim(),"null"===s?s=null:""===s.trim()||Number.isNaN(Number(s))?!1===r?!0===a&&(s=function(e){let t=e,r="";e.startsWith("'")&&e.endsWith("'")&&(t=e.slice(1,-1),r="'"),t=t.replace(/'/gu,"''");let i="";return function(e){let t=!1;return"number"!=typeof e&&(t=[...e].some((e=>e.charCodeAt(0)>255))),t}(t)&&(i="N"),`${i}${r}${t}${r}`}(s)):s=Us({value:s,keepSurroundingQuotes:i,escape:a}):s=Number(s)),s}function Ws(e){let t=!1;return void 0===e||""===e?t=!0:e.includes("=")&&(t=Hs(e,!1)===`${Ks({where:e,normalize:!1})}`),t}function Xs(e){let t=bs;if(void 0!==e?.[0])switch(qs(e)){case I:t=function(e){let t=Cs;return void 0===e[0].query?.outStatistics?t=js:void 0===e[0].query?.groupByFieldsForStatistics&&(t=Es),t}(e);break;case q:case T:case A:case $:t=function(e){let t=Ss;const r=e[0].query?.where;return void 0===e[0].query?.groupByFieldsForStatistics&&(e[0].query?.outStatistics??[]).length>0?t=_s:void 0===r&&void 0===e[0].query?.outStatistics?t=ws:Ws(r)?e.length>1&&(t=xs):t=void 0===e[0].query?.outStatistics?Fs:Ps,t}(e);break;case D:t=function(e){let t=ks;const r=1===e.length,i=e.find((e=>e.type===A))??e[0],{x:a}=i,s="y"in i?i.y:"",o=i.query?.where;return a===Di?"object"==typeof s&&s.length>1?Ws(o)?r&&(t=Is):t=Ls:r?t=ks:Ws(o)||(t=Ts):t=r?Os:Ws(o)?As:Ds,t}(e)}return t}var Ys="undefined"!=typeof window&&"$arcgis"in window&&"object"==typeof window.$arcgis&&"import"in window.$arcgis&&!("forceESM"in window.$arcgis);function Js(e){return void 0!==e.default}async function Zs(){if(Ys)return await window.$arcgis.import("esri/geometry/support/jsonUtils");const t=await Promise.resolve().then((function(){return e(require("@arcgis/core/geometry/support/jsonUtils"))}));return Js(t)?t.default:t}function eo(e){return void 0!==e&&"type"in e&&"subtype-sublayer"===e.type}function to(e){return eo(e)?e.parent:e}function ro(e){let t;return t=function(e){return void 0!==e&&"layer"in e}(e)?e.layer:e,t}function io(e){const t=to(e)?.sourceJSON;let r=t?.maxRecordCount??ki;return t?.advancedQueryCapabilities?.supportsMaxRecordCountFactor&&void 0!==t?.maxRecordCount&&(r=t.maxRecordCount*Ci),r}function ao(e,t){let r;const i=Array.from(new Set(e)).filter((e=>null!=e&&""!==e&&!Ws(e)));return i.sort(((e,t)=>t.length-e.length)),1===i.length?[r]=i:i?.forEach((e=>{void 0!==e&&(Ms(r)?r=`(${e})`:r?.includes(`(${e})`)||(r=`${r} ${t??"AND"} (${e})`))})),r??"1=1"}async function so(t){let r;return void 0!==t&&(r=await async function(t){return new(await async function(){if(Ys)return await window.$arcgis.import("esri/time/TimeExtent");const t=await Promise.resolve().then((function(){return e(require("@arcgis/core/time/TimeExtent"))}));return Js(t)?t.default:t}())(t)}({start:new Date(t[0]),end:new Date(t[1])})),r}async function oo(t){const{queryObject:r,queryConfig:i,maxRecordCountFactor:a}=t,{where:s,groupByFieldsForStatistics:o,orderByFields:n,outStatistics:l,gdbVersion:c,geometry:u,distance:d,units:f,timeExtent:h,start:g,num:m,returnDistinctValues:y,outFields:v}=i??{},b=await async function(t){return new(await async function(){if(Ys)return await window.$arcgis.import("esri/rest/support/Query");const t=await Promise.resolve().then((function(){return e(require("@arcgis/core/rest/support/Query"))}));return Js(t)?t.default:t}())(t)}({});b.returnGeometry=!1;const w=ro(r),S=to(w),x=[s,S.definitionExpression];if(b.where=ao(x),b.outFields=function(e){return void 0===e?["*"]:Array.from(new Set(e))}(v),b.groupByFieldsForStatistics=o??b.groupByFieldsForStatistics,b.orderByFields=n??[],b.returnDistinctValues=y??!1,void 0!==l){const t=function(e){let t=!1;const r=to(e).sourceJSON?.advancedQueryCapabilities?.supportedSpatialAggregationStatistics??[],i=e.capabilities?.query.supportedSpatialAggregationStatistics??{};return t=r.includes("EnvelopeAggregate")||"envelope"in i&&void 0!==i.envelope&&null!==i.envelope,t}(w),r=await async function(){if(Ys)return await window.$arcgis.import("esri/rest/support/StatisticDefinition");const t=await Promise.resolve().then((function(){return e(require("@arcgis/core/rest/support/StatisticDefinition"))}));return Js(t)?t.default:t}();b.outStatistics=l.filter((e=>e.statisticType!==p||t)).map((e=>r.fromJSON(e)))}void 0!==a&&(b.maxRecordCountFactor=a),void 0!==c&&""!==c?b.gdbVersion=c:void 0!==S.gdbVersion&&""!==S.gdbVersion&&(b.gdbVersion=S.gdbVersion);const _=await async function(e){let t;return void 0!==e&&(t=(await Zs()).fromJSON(e)),t}(u);void 0!==_&&(b.geometry=_,function(e){return e.capabilities?.query?.supportsDistance||!0===to(e).sourceJSON?.advancedQueryCapabilities?.supportsQueryWithDistance}(w)&&(void 0!==d&&(b.distance=d),void 0!==f&&(b.units=f)));const P=await so(h);return void 0!==P?b.timeExtent=P:void 0!==S.timeExtent&&(b.timeExtent=S.timeExtent),void 0!==m&&(b.num=m),void 0!==g&&(b.start=g,b.num=b.num??io(w)),function(e){const t=!e.geometry,r=(e.where??"").toUpperCase(),i=!r.includes("CURRENT_TIMESTAMP")&&!r.includes("CURRENT_DATE")&&!r.includes("CURRENT_TIME");return t&&i}(b)&&(b.cacheHint=!0),b}const no=new Map,lo="queryFeaturesError";class co extends Error{constructor(e,t,r){super(t),this.name=e,this.details=r}}async function uo(e=Fi().locale){let t=await Promise.resolve().then((function(){return require("./messages.en-2720bc04-4c6e84b9.js")}));switch(e){case se.Arabic:t=await Promise.resolve().then((function(){return require("./messages.ar-2a516be4-cf7dc570.js")}));break;case se.Bosnian:t=await Promise.resolve().then((function(){return require("./messages.bs-ed521a4a-7f53c91b.js")}));break;case se.Bulgarian:t=await Promise.resolve().then((function(){return require("./messages.bg-32846a04-2841a568.js")}));break;case se.Catalan:t=await Promise.resolve().then((function(){return require("./messages.ca-534a5a29-e9c5e23c.js")}));break;case se.Czech:t=await Promise.resolve().then((function(){return require("./messages.cs-f7dfa0ea-a33d2aac.js")}));break;case se.Danish:t=await Promise.resolve().then((function(){return require("./messages.da-12df1d76-5bd0a0d2.js")}));break;case se.German:t=await Promise.resolve().then((function(){return require("./messages.de-8ac83862-f9098168.js")}));break;case se.Greek:t=await Promise.resolve().then((function(){return require("./messages.el-d39d2cdb-b18ef300.js")}));break;case se.EnglishUSA:t=await Promise.resolve().then((function(){return require("./messages.en-US-d444015e-6026a566.js")}));break;case se.Spanish:t=await Promise.resolve().then((function(){return require("./messages.es-5242724e-a950b843.js")}));break;case se.Estonian:t=await Promise.resolve().then((function(){return require("./messages.et-62f107f7-4a0b435a.js")}));break;case se.Finnish:t=await Promise.resolve().then((function(){return require("./messages.fi-c0c48057-f15bcf69.js")}));break;case se.French:t=await Promise.resolve().then((function(){return require("./messages.fr-b992d801-c1cbb642.js")}));break;case se.Hebrew:t=await Promise.resolve().then((function(){return require("./messages.he-70d41af0-b0991f0c.js")}));break;case se.Croatian:t=await Promise.resolve().then((function(){return require("./messages.hr-5657371a-fce30fd9.js")}));break;case se.Hungarian:t=await Promise.resolve().then((function(){return require("./messages.hu-5bc9a465-c050fbef.js")}));break;case se.Indonesian:t=await Promise.resolve().then((function(){return require("./messages.id-e1e1d374-32f77408.js")}));break;case se.Italian:t=await Promise.resolve().then((function(){return require("./messages.it-025c832d-28911a82.js")}));break;case se.Japanese:t=await Promise.resolve().then((function(){return require("./messages.ja-4264bfb4-a95ab95f.js")}));break;case se.Korean:t=await Promise.resolve().then((function(){return require("./messages.ko-e9e78e29-1519733f.js")}));break;case se.Lithuanian:t=await Promise.resolve().then((function(){return require("./messages.lt-21cd5fa8-1b58c4c5.js")}));break;case se.Latvian:t=await Promise.resolve().then((function(){return require("./messages.lv-90fae237-165bba33.js")}));break;case se.NorwegianBokml:t=await Promise.resolve().then((function(){return require("./messages.no-70efa82c-d221ebf5.js")}));break;case se.Dutch:t=await Promise.resolve().then((function(){return require("./messages.nl-417c9242-34301c2c.js")}));break;case se.Polish:t=await Promise.resolve().then((function(){return require("./messages.pl-2dec17dd-3452e9f9.js")}));break;case se.PortugueseBrazil:t=await Promise.resolve().then((function(){return require("./messages.pt-BR-56a76dfb-aaa59d87.js")}));break;case se.PortuguesePortugal:t=await Promise.resolve().then((function(){return require("./messages.pt-PT-67e158bf-75cce948.js")}));break;case se.Romanian:t=await Promise.resolve().then((function(){return require("./messages.ro-fbedb46a-971dd55c.js")}));break;case se.Russian:t=await Promise.resolve().then((function(){return require("./messages.ru-46c525de-dbf102b0.js")}));break;case se.Serbian:t=await Promise.resolve().then((function(){return require("./messages.sr-6eeefca3-d30aebc7.js")}));break;case se.Slovak:t=await Promise.resolve().then((function(){return require("./messages.sk-36f6b3f3-50ace77c.js")}));break;case se.Slovenian:t=await Promise.resolve().then((function(){return require("./messages.sl-407c0dc1-1b4500eb.js")}));break;case se.Swedish:t=await Promise.resolve().then((function(){return require("./messages.sv-8a49b669-cd94c20d.js")}));break;case se.Thai:t=await Promise.resolve().then((function(){return require("./messages.th-63ead210-1a499d44.js")}));break;case se.Turkish:t=await Promise.resolve().then((function(){return require("./messages.tr-7c612534-7a36f185.js")}));break;case se.Ukrainian:t=await Promise.resolve().then((function(){return require("./messages.uk-7a3e2f41-c7aa42ac.js")}));break;case se.Vietnamese:t=await Promise.resolve().then((function(){return require("./messages.vi-7bf62f1e-99ad8fee.js")}));break;case se.ChineseChina:t=await Promise.resolve().then((function(){return require("./messages.zh-CN-9407591c-8442db0d.js")}));break;case se.ChineseHongKong:t=await Promise.resolve().then((function(){return require("./messages.zh-HK-fc092e0a-27088885.js")}));break;case se.ChineseTaiwan:t=await Promise.resolve().then((function(){return require("./messages.zh-TW-53165175-15e5df51.js")}))}return t}async function fo(t){const{queryObject:r,queryConfig:i,returnUniqueIdsOnly:a,abortKey:s}=t;let o=[];const n=ro(r);if(void 0!==r){const l=function(e){return!0===to(e)?.sourceJSON?.advancedQueryCapabilities?.supportsMaxRecordCountFactor?Ci:void 0}(n),c=await oo({queryObject:r,queryConfig:i,maxRecordCountFactor:l});try{!0===a?"queryObjectIds"in r?o=await r.queryObjectIds(c):(c.outFields=[n.objectIdField],o=(await r.queryFeatures(c,{signal:void 0!==s?no.get(s)?.signal:void 0})).features.map((e=>e.attributes[n.objectIdField]))):o=(await r.queryFeatures(c,{signal:void 0!==s?no.get(s)?.signal:void 0})).features}catch(t){if(!(await async function(){if(Ys)return await window.$arcgis.import("esri/core/promiseUtils");const t=await Promise.resolve().then((function(){return e(require("@arcgis/core/core/promiseUtils"))}));return Js(t)?t.default:t}()).isAbortError(t)){const e=await uo();throw new co(lo,e.queryError,t)}}}return o}async function ho(e){const t=[],{featureCount:r,maxRecords:i,queryConfig:a}=e;let s=[],o=0,n=a?.start??0;for(;o<Ei&&n<r;){const s={...e};s.queryConfig={...a,start:n,num:Math.min(i,r-n)},t.push(fo(s)),n+=i,o+=1}return s=(await Promise.all(t)).flat(),s}async function po(e){const{queryObject:t,queryConfig:r,category:i,splitByField:a,chartLimits:s,abortKey:n}=e,l=void 0!==a,c=i!==Di?[i]:[];l&&c.push(a);const u=ro(t),d={...r,groupByFieldsForStatistics:Array.from(new Set(c)),outStatistics:[{statisticType:o,onStatisticField:u.objectIdField,outStatisticFieldName:`${o}_OBJECTID`}],orderByFields:void 0,num:s?.maxBarThreePlusSeriesCountTotal},f=await async function(e){const{queryObject:t,queryConfig:r,returnUniqueIdsOnly:i,featureCount:a,noBatch:s,abortKey:o}=e;let n=[];const l=ro(t);if(void 0!==t){const e=a??1,c=io(l);if(!0!==s&&e>c&&l.capabilities?.query.supportsPagination){let a=0,s=0;const l=Math.ceil(e/c),u=Math.ceil(l/Ei),d=[];for(;s<u;){a=s*Ei*c;const n=ho({queryConfig:{...r,start:a},queryObject:t,maxRecords:c,featureCount:e,returnUniqueIdsOnly:i,abortKey:o});d.push(n),s+=1}n=(await Promise.all(d)).flat()}else(Number.isNaN(e)||e>=0)&&(n=await fo({queryObject:t,queryConfig:r,returnUniqueIdsOnly:i,abortKey:o}))}return n}({queryObject:t,featureCount:1,queryConfig:d,abortKey:n});return Array.from(new Set(f.map((e=>e.attributes[l?a:i])))).sort(((e,t)=>"string"==typeof e&&"string"==typeof t?e.localeCompare(t):Number(e)-Number(t)))}function go(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var mo,yo,vo,bo,wo,So,xo,_o,Po,Fo={exports:{}};function jo(){return mo||(mo=1,function(e){function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var i=t.length-1,a=1;a<i;++a)t[a]=t[a].slice(1,-1);return t[i]=t[i].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function i(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function a(e){return e.toUpperCase()}function s(e){var i="[A-Za-z]",a="[0-9]",s=t(a,"[A-Fa-f]"),o=r(r("%[EFef]"+s+"%"+s+s+"%"+s+s)+"|"+r("%[89A-Fa-f]"+s+"%"+s+s)+"|"+r("%"+s+s)),n="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",l=t("[\\:\\/\\?\\#\\[\\]\\@]",n),c=e?"[\\uE000-\\uF8FF]":"[]",u=t(i,a,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]");r(i+t(i,a,"[\\+\\-\\.]")+"*"),r(r(o+"|"+t(u,n,"[\\:]"))+"*");var d=r(r("25[0-5]")+"|"+r("2[0-4]"+a)+"|"+r("1"+a+a)+"|"+r("0?[1-9]"+a)+"|0?0?"+a),f=r(d+"\\."+d+"\\."+d+"\\."+d),h=r(s+"{1,4}"),p=r(r(h+"\\:"+h)+"|"+f),g=r(r(h+"\\:")+"{6}"+p),m=r("\\:\\:"+r(h+"\\:")+"{5}"+p),y=r(r(h)+"?\\:\\:"+r(h+"\\:")+"{4}"+p),v=r(r(r(h+"\\:")+"{0,1}"+h)+"?\\:\\:"+r(h+"\\:")+"{3}"+p),b=r(r(r(h+"\\:")+"{0,2}"+h)+"?\\:\\:"+r(h+"\\:")+"{2}"+p),w=r(r(r(h+"\\:")+"{0,3}"+h)+"?\\:\\:"+h+"\\:"+p),S=r(r(r(h+"\\:")+"{0,4}"+h)+"?\\:\\:"+p),x=r(r(r(h+"\\:")+"{0,5}"+h)+"?\\:\\:"+h),_=r(r(r(h+"\\:")+"{0,6}"+h)+"?\\:\\:"),P=r([g,m,y,v,b,w,S,x,_].join("|")),F=r(r(u+"|"+o)+"+");r("[vV]"+s+"+\\."+t(u,n,"[\\:]")+"+"),r(r(o+"|"+t(u,n))+"*");var j=r(o+"|"+t(u,n,"[\\:\\@]"));return r(r(o+"|"+t(u,n,"[\\@]"))+"+"),r(r(j+"|"+t("[\\/\\?]",c))+"*"),{NOT_SCHEME:new RegExp(t("[^]",i,a,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",u,n),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",u,n),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",u,n),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",u,n),"g"),NOT_QUERY:new RegExp(t("[^\\%]",u,n,"[\\:\\@\\/\\?]",c),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",u,n,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",u,n),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",u,l),"g"),PCT_ENCODED:new RegExp(o,"g"),IPV4ADDRESS:new RegExp("^("+f+")$"),IPV6ADDRESS:new RegExp("^\\[?("+P+")"+r(r("\\%25|\\%(?!"+s+"{2})")+"("+F+")")+"?\\]?$")}}var o=s(!1),n=s(!0),l=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],i=!0,a=!1,s=void 0;try{for(var o,n=e[Symbol.iterator]();!(i=(o=n.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(e){a=!0,s=e}finally{try{!i&&n.return&&n.return()}finally{if(a)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=2147483647,u=36,d=/^xn--/,f=/[^\0-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=Math.floor,m=String.fromCharCode;function y(e){throw new RangeError(p[e])}function v(e,t){var r=e.split("@"),i="";return r.length>1&&(i=r[0]+"@",e=r[1]),i+function(e,t){for(var r=[],i=e.length;i--;)r[i]=t(e[i]);return r}((e=e.replace(h,".")).split("."),t).join(".")}function b(e){for(var t=[],r=0,i=e.length;r<i;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<i){var s=e.charCodeAt(r++);56320==(64512&s)?t.push(((1023&a)<<10)+(1023&s)+65536):(t.push(a),r--)}else t.push(a)}return t}var w=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:u},S=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},x=function(e,t,r){var i=0;for(e=r?g(e/700):e>>1,e+=g(e/t);e>455;i+=u)e=g(e/35);return g(i+36*e/(e+38))},_=function(e){var t=[],r=e.length,i=0,a=128,s=72,o=e.lastIndexOf("-");o<0&&(o=0);for(var n=0;n<o;++n)e.charCodeAt(n)>=128&&y("not-basic"),t.push(e.charCodeAt(n));for(var l=o>0?o+1:0;l<r;){for(var d=i,f=1,h=u;;h+=u){l>=r&&y("invalid-input");var p=w(e.charCodeAt(l++));(p>=u||p>g((c-i)/f))&&y("overflow"),i+=p*f;var m=h<=s?1:h>=s+26?26:h-s;if(p<m)break;var v=u-m;f>g(c/v)&&y("overflow"),f*=v}var b=t.length+1;s=x(i-d,b,0==d),g(i/b)>c-a&&y("overflow"),a+=g(i/b),i%=b,t.splice(i++,0,a)}return String.fromCodePoint.apply(String,t)},P=function(e){var t=[],r=(e=b(e)).length,i=128,a=0,s=72,o=!0,n=!1,l=void 0;try{for(var d,f=e[Symbol.iterator]();!(o=(d=f.next()).done);o=!0){var h=d.value;h<128&&t.push(m(h))}}catch(e){n=!0,l=e}finally{try{!o&&f.return&&f.return()}finally{if(n)throw l}}var p=t.length,v=p;for(p&&t.push("-");v<r;){var w=c,_=!0,P=!1,F=void 0;try{for(var j,C=e[Symbol.iterator]();!(_=(j=C.next()).done);_=!0){var E=j.value;E>=i&&E<w&&(w=E)}}catch(e){P=!0,F=e}finally{try{!_&&C.return&&C.return()}finally{if(P)throw F}}var k=v+1;w-i>g((c-a)/k)&&y("overflow"),a+=(w-i)*k,i=w;var I=!0,O=!1,A=void 0;try{for(var T,L=e[Symbol.iterator]();!(I=(T=L.next()).done);I=!0){var D=T.value;if(D<i&&++a>c&&y("overflow"),D==i){for(var q=a,$=u;;$+=u){var U=$<=s?1:$>=s+26?26:$-s;if(q<U)break;var B=q-U,M=u-U;t.push(m(S(U+B%M,0))),q=g(B/M)}t.push(m(S(q,0))),s=x(a,k,v==p),a=0,++v}}}catch(e){O=!0,A=e}finally{try{!I&&L.return&&L.return()}finally{if(O)throw A}}++a,++i}return t.join("")},F=function(e){return v(e,(function(e){return f.test(e)?"xn--"+P(e):e}))},j=function(e){return v(e,(function(e){return d.test(e)?_(e.slice(4).toLowerCase()):e}))},C={};function E(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function k(e){for(var t="",r=0,i=e.length;r<i;){var a=parseInt(e.substr(r+1,2),16);if(a<128)t+=String.fromCharCode(a),r+=3;else if(a>=194&&a<224){if(i-r>=6){var s=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&a)<<6|63&s)}else t+=e.substr(r,6);r+=6}else if(a>=224){if(i-r>=9){var o=parseInt(e.substr(r+4,2),16),n=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&a)<<12|(63&o)<<6|63&n)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function I(e,t){function r(e){var r=k(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,E).replace(t.PCT_ENCODED,a)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,E).replace(t.PCT_ENCODED,a)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,E).replace(t.PCT_ENCODED,a)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,E).replace(t.PCT_ENCODED,a)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,E).replace(t.PCT_ENCODED,a)),e}function O(e){return e.replace(/^0*(.*)/,"$1")||"0"}function A(e,t){var r=e.match(t.IPV4ADDRESS)||[],i=l(r,2)[1];return i?i.split(".").map(O).join("."):e}function T(e,t){var r=e.match(t.IPV6ADDRESS)||[],i=l(r,3),a=i[1],s=i[2];if(a){for(var o=a.toLowerCase().split("::").reverse(),n=l(o,2),c=n[0],u=n[1],d=u?u.split(":").map(O):[],f=c.split(":").map(O),h=t.IPV4ADDRESS.test(f[f.length-1]),p=h?7:8,g=f.length-p,m=Array(p),y=0;y<p;++y)m[y]=d[y]||f[g+y]||"";h&&(m[p-1]=A(m[p-1],t));var v=m.reduce((function(e,t,r){if(!t||"0"===t){var i=e[e.length-1];i&&i.index+i.length===r?i.length++:e.push({index:r,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],b=void 0;if(v&&v.length>1){var w=m.slice(0,v.index),S=m.slice(v.index+v.length);b=w.join(":")+"::"+S.join(":")}else b=m.join(":");return s&&(b+="%"+s),b}return e}var L=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,D=void 0==="".match(/(){0}/)[1];function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},i=!1!==t.iri?n:o;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var a=e.match(L);if(a){D?(r.scheme=a[1],r.userinfo=a[3],r.host=a[4],r.port=parseInt(a[5],10),r.path=a[6]||"",r.query=a[7],r.fragment=a[8],isNaN(r.port)&&(r.port=a[5])):(r.scheme=a[1]||void 0,r.userinfo=-1!==e.indexOf("@")?a[3]:void 0,r.host=-1!==e.indexOf("//")?a[4]:void 0,r.port=parseInt(a[5],10),r.path=a[6]||"",r.query=-1!==e.indexOf("?")?a[7]:void 0,r.fragment=-1!==e.indexOf("#")?a[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?a[4]:void 0)),r.host&&(r.host=T(A(r.host,i),i)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var s=C[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||s&&s.unicodeSupport)I(r,i);else{if(r.host&&(t.domainHost||s&&s.domainHost))try{r.host=F(r.host.replace(i.PCT_ENCODED,k).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}I(r,o)}s&&s.parse&&s.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}var $=/^\.\.?\//,U=/^\/\.(\/|$)/,B=/^\/\.\.(\/|$)/,M=/^\/?(?:.|\n)*?(?=\/|$)/;function R(e){for(var t=[];e.length;)if(e.match($))e=e.replace($,"");else if(e.match(U))e=e.replace(U,"/");else if(e.match(B))e=e.replace(B,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(M);if(!r)throw new Error("Unexpected dot segment condition");var i=r[0];e=e.slice(i.length),t.push(i)}return t.join("")}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?n:o,i=[],a=C[(t.scheme||e.scheme||"").toLowerCase()];if(a&&a.serialize&&a.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||a&&a.domainHost)try{e.host=t.iri?j(e.host):F(e.host.replace(r.PCT_ENCODED,k).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}I(e,r),"suffix"!==t.reference&&e.scheme&&(i.push(e.scheme),i.push(":"));var s=function(e,t){var r=!1!==t.iri?n:o,i=[];return void 0!==e.userinfo&&(i.push(e.userinfo),i.push("@")),void 0!==e.host&&i.push(T(A(String(e.host),r),r).replace(r.IPV6ADDRESS,(function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(i.push(":"),i.push(String(e.port))),i.length?i.join(""):void 0}(e,t);if(void 0!==s&&("suffix"!==t.reference&&i.push("//"),i.push(s),e.path&&"/"!==e.path.charAt(0)&&i.push("/")),void 0!==e.path){var l=e.path;t.absolutePath||a&&a.absolutePath||(l=R(l)),void 0===s&&(l=l.replace(/^\/\//,"/%2F")),i.push(l)}return void 0!==e.query&&(i.push("?"),i.push(e.query)),void 0!==e.fragment&&(i.push("#"),i.push(e.fragment)),i.join("")}function z(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={};return arguments[3]||(e=q(N(e,r),r),t=q(N(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=R(t.path||""),i.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=R(t.path||""),i.query=t.query):(t.path?("/"===t.path.charAt(0)?i.path=R(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path:i.path="/"+t.path,i.path=R(i.path)),i.query=t.query):(i.path=e.path,void 0!==t.query?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function V(e,t){return e&&e.toString().replace(t&&t.iri?n.PCT_ENCODED:o.PCT_ENCODED,k)}var G={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var r="https"===String(e.scheme).toLowerCase();return e.port!==(r?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},Q={scheme:"https",domainHost:G.domainHost,parse:G.parse,serialize:G.serialize};function H(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var K={scheme:"ws",domainHost:!0,parse:function(e,t){var r=e;return r.secure=H(r),r.resourceName=(r.path||"/")+(r.query?"?"+r.query:""),r.path=void 0,r.query=void 0,r},serialize:function(e,t){if(e.port!==(H(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var r=e.resourceName.split("?"),i=l(r,2),a=i[0],s=i[1];e.path=a&&"/"!==a?a:void 0,e.query=s,e.resourceName=void 0}return e.fragment=void 0,e}},W={scheme:"wss",domainHost:K.domainHost,parse:K.parse,serialize:K.serialize},X={},Y="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",J="[0-9A-Fa-f]",Z=r(r("%[EFef]"+J+"%"+J+J+"%"+J+J)+"|"+r("%[89A-Fa-f]"+J+"%"+J+J)+"|"+r("%"+J+J)),ee=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),te=new RegExp(Y,"g"),re=new RegExp(Z,"g"),ie=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',ee),"g"),ae=new RegExp(t("[^]",Y,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),se=ae;function oe(e){var t=k(e);return t.match(te)?t:e}var ne={scheme:"mailto",parse:function(e,t){var r=e,i=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var a=!1,s={},o=r.query.split("&"),n=0,l=o.length;n<l;++n){var c=o[n].split("=");switch(c[0]){case"to":for(var u=c[1].split(","),d=0,f=u.length;d<f;++d)i.push(u[d]);break;case"subject":r.subject=V(c[1],t);break;case"body":r.body=V(c[1],t);break;default:a=!0,s[V(c[0],t)]=V(c[1],t)}}a&&(r.headers=s)}r.query=void 0;for(var h=0,p=i.length;h<p;++h){var g=i[h].split("@");if(g[0]=V(g[0]),t.unicodeSupport)g[1]=V(g[1],t).toLowerCase();else try{g[1]=F(V(g[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}i[h]=g.join("@")}return r},serialize:function(e,t){var r=e,i=function(e){return null!=e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}(e.to);if(i){for(var s=0,o=i.length;s<o;++s){var n=String(i[s]),l=n.lastIndexOf("@"),c=n.slice(0,l).replace(re,oe).replace(re,a).replace(ie,E),u=n.slice(l+1);try{u=t.iri?j(u):F(V(u,t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}i[s]=c+"@"+u}r.path=i.join(",")}var d=e.headers=e.headers||{};e.subject&&(d.subject=e.subject),e.body&&(d.body=e.body);var f=[];for(var h in d)d[h]!==X[h]&&f.push(h.replace(re,oe).replace(re,a).replace(ae,E)+"="+d[h].replace(re,oe).replace(re,a).replace(se,E));return f.length&&(r.query=f.join("&")),r}},le=/^([^\:]+)\:(.*)/,ce={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(le),i=e;if(r){var a=t.scheme||i.scheme||"urn",s=r[1].toLowerCase(),o=r[2],n=a+":"+(t.nid||s),l=C[n];i.nid=s,i.nss=o,i.path=void 0,l&&(i=l.parse(i,t))}else i.error=i.error||"URN can not be parsed.";return i},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",i=e.nid,a=r+":"+(t.nid||i),s=C[a];s&&(e=s.serialize(e,t));var o=e,n=e.nss;return o.path=(i||t.nid)+":"+n,o}},ue=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,de={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(ue)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};C[G.scheme]=G,C[Q.scheme]=Q,C[K.scheme]=K,C[W.scheme]=W,C[ne.scheme]=ne,C[ce.scheme]=ce,C[de.scheme]=de,e.SCHEMES=C,e.pctEncChar=E,e.pctDecChars=k,e.parse=q,e.removeDotSegments=R,e.serialize=N,e.resolveComponents=z,e.resolve=function(e,t,r){var i=function(e,t){var r=e;if(t)for(var i in t)r[i]=t[i];return r}({scheme:"null"},r);return N(z(q(e,i),q(t,i),i,!0),i)},e.normalize=function(e,t){return"string"==typeof e?e=N(q(e,t),t):"object"===i(e)&&(e=q(N(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=N(q(e,r),r):"object"===i(e)&&(e=N(e,r)),"string"==typeof t?t=N(q(t,r),r):"object"===i(t)&&(t=N(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?n.ESCAPE:o.ESCAPE,E)},e.unescapeComponent=V,Object.defineProperty(e,"__esModule",{value:!0})}(Fo.exports)),Fo.exports}function Co(){return vo||(vo=1,yo=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var i,a,s;if(Array.isArray(t)){if((i=t.length)!=r.length)return!1;for(a=i;0!=a--;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((i=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=i;0!=a--;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=i;0!=a--;){var o=s[a];if(!e(t[o],r[o]))return!1}return!0}return t!=t&&r!=r}),yo}function Eo(){if(xo)return So;function e(e,t,r,i){var a=i?" !== ":" === ",s=i?" || ":" && ",o=i?"!":"",n=i?"":"!";switch(e){case"null":return t+a+"null";case"array":return o+"Array.isArray("+t+")";case"object":return"("+o+t+s+"typeof "+t+a+'"object"'+s+n+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+a+'"number"'+s+n+"("+t+" % 1)"+s+t+a+t+(r?s+o+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+a+'"'+e+'"'+(r?s+o+"isFinite("+t+")":"")+")";default:return"typeof "+t+a+'"'+e+'"'}}xo=1,So={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:e,checkDataTypes:function(t,i,a){if(1===t.length)return e(t[0],i,a,!0);var s="",o=r(t);for(var n in o.array&&o.object&&(s=o.null?"(":"(!"+i+" || ",s+="typeof "+i+' !== "object")',delete o.null,delete o.array,delete o.object),o.number&&delete o.integer,o)s+=(s?" && ":"")+e(n,i,a,!0);return s},coerceToTypes:function(e,r){if(Array.isArray(r)){for(var i=[],a=0;a<r.length;a++){var s=r[a];(t[s]||"array"===e&&"array"===s)&&(i[i.length]=s)}if(i.length)return i}else{if(t[r])return[r];if("array"===e&&"array"===r)return["array"]}},toHash:r,getProperty:s,escapeQuotes:o,equal:Co(),ucs2length:wo?bo:(wo=1,bo=function(e){for(var t,r=0,i=e.length,a=0;a<i;)r++,(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<i&&56320==(64512&(t=e.charCodeAt(a)))&&a++;return r}),varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var i in e)if(i!=r&&t[i])return!0},schemaUnknownRules:function(e,t){if("boolean"!=typeof e)for(var r in e)if(!t[r])return r},toQuotedString:n,getPathExpr:function(e,t,r,i){return u(e,r?"'/' + "+t+(i?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):i?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){return u(e,n(r?"/"+d(t):s(t)))},getData:function(e,t,r){var i,a,o,n;if(""===e)return"rootData";if("/"==e[0]){if(!l.test(e))throw new Error("Invalid JSON-pointer: "+e);a=e,o="rootData"}else{if(!(n=e.match(c)))throw new Error("Invalid JSON-pointer: "+e);if(i=+n[1],"#"==(a=n[2])){if(i>=t)throw new Error("Cannot access property/index "+i+" levels up, current level is "+t);return r[t-i]}if(i>t)throw new Error("Cannot access data "+i+" levels up, current level is "+t);if(o="data"+(t-i||""),!a)return o}for(var u=o,d=a.split("/"),h=0;h<d.length;h++){var p=d[h];p&&(u+=" && "+(o+=s(f(p))))}return u},unescapeFragment:function(e){return f(decodeURIComponent(e))},unescapeJsonPointer:f,escapeFragment:function(e){return encodeURIComponent(d(e))},escapeJsonPointer:d};var t=r(["string","number","integer","boolean","null"]);function r(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var i=/^[a-z$_][a-z$_0-9]*$/i,a=/'|\\/g;function s(e){return"number"==typeof e?"["+e+"]":i.test(e)?"."+e:"['"+o(e)+"']"}function o(e){return e.replace(a,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function n(e){return"'"+o(e)+"'"}var l=/^\/(?:[^~]|~0|~1)*$/,c=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function u(e,t){return'""'==e?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function d(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function f(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}return So}function ko(){if(Po)return _o;Po=1;var e=Eo();return _o=function(t){e.copy(t,this)}}var Io,Oo,Ao,To,Lo,Do,qo,$o,Uo,Bo,Mo,Ro={exports:{}};function No(){if(Ao)return Oo;Ao=1;var e=jo(),t=Co(),r=Eo(),i=ko(),a=function(){if(Io)return Ro.exports;Io=1;var e=Ro.exports=function(e,r,i){"function"==typeof r&&(i=r,r={}),t(r,"function"==typeof(i=r.cb||i)?i:i.pre||function(){},i.post||function(){},e,"",e)};function t(r,i,a,s,o,n,l,c,u,d){if(s&&"object"==typeof s&&!Array.isArray(s)){for(var f in i(s,o,n,l,c,u,d),s){var h=s[f];if(Array.isArray(h)){if(f in e.arrayKeywords)for(var p=0;p<h.length;p++)t(r,i,a,h[p],o+"/"+f+"/"+p,n,o,f,s,p)}else if(f in e.propsKeywords){if(h&&"object"==typeof h)for(var g in h)t(r,i,a,h[g],o+"/"+f+"/"+g.replace(/~/g,"~0").replace(/\//g,"~1"),n,o,f,s,g)}else(f in e.keywords||r.allKeys&&!(f in e.skipKeywords))&&t(r,i,a,h,o+"/"+f,n,o,f,s)}a(s,o,n,l,c,u,d)}}return e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0},Ro.exports}();function s(e,t,r){var a=this._refs[r];if("string"==typeof a){if(!this._refs[a])return s.call(this,e,t,a);a=this._refs[a]}if((a=a||this._schemas[r])instanceof i)return d(a.schema,this._opts.inlineRefs)?a.schema:a.validate||this._compile(a);var n,l,c,u=o.call(this,t,r);return u&&(n=u.schema,t=u.root,c=u.baseId),n instanceof i?l=n.validate||e.call(this,n.schema,t,void 0,c):void 0!==n&&(l=d(n,this._opts.inlineRefs)?n:e.call(this,n,t,void 0,c)),l}function o(t,r){var a=e.parse(r),s=g(a),o=p(this._getId(t.schema));if(0===Object.keys(t.schema).length||s!==o){var l=y(s),u=this._refs[l];if("string"==typeof u)return n.call(this,t,u,a);if(u instanceof i)u.validate||this._compile(u),t=u;else{if(!((u=this._schemas[l])instanceof i))return;if(u.validate||this._compile(u),l==y(r))return{schema:u,root:t,baseId:o};t=u}if(!t.schema)return;o=p(this._getId(t.schema))}return c.call(this,a,o,t.schema,t)}function n(e,t,r){var i=o.call(this,e,t);if(i){var a=i.schema,s=i.baseId;e=i.root;var n=this._getId(a);return n&&(s=v(s,n)),c.call(this,r,s,a,e)}}Oo=s,s.normalizeId=y,s.fullPath=p,s.url=v,s.ids=function(i){var s=y(this._getId(i)),o={"":s},n={"":p(s,!1)},l={},c=this;return a(i,{allKeys:!0},(function(i,a,s,u,d,f,h){if(""!==a){var p=c._getId(i),g=o[u],m=n[u]+"/"+d;if(void 0!==h&&(m+="/"+("number"==typeof h?h:r.escapeFragment(h))),"string"==typeof p){p=g=y(g?e.resolve(g,p):p);var v=c._refs[p];if("string"==typeof v&&(v=c._refs[v]),v&&v.schema){if(!t(i,v.schema))throw new Error('id "'+p+'" resolves to more than one schema')}else if(p!=y(m))if("#"==p[0]){if(l[p]&&!t(i,l[p]))throw new Error('id "'+p+'" resolves to more than one schema');l[p]=i}else c._refs[p]=m}o[a]=g,n[a]=m}})),l},s.inlineRef=d,s.schema=o;var l=r.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function c(e,t,i,a){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var s=e.fragment.split("/"),n=1;n<s.length;n++){var c=s[n];if(c){if(void 0===(i=i[c=r.unescapeFragment(c)]))break;var u;if(!l[c]&&((u=this._getId(i))&&(t=v(t,u)),i.$ref)){var d=v(t,i.$ref),f=o.call(this,a,d);f&&(i=f.schema,a=f.root,t=f.baseId)}}}return void 0!==i&&i!==a.schema?{schema:i,root:a,baseId:t}:void 0}}var u=r.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function d(e,t){return!1!==t&&(void 0===t||!0===t?f(e):t?h(e)<=t:void 0)}function f(e){var t;if(Array.isArray(e)){for(var r=0;r<e.length;r++)if("object"==typeof(t=e[r])&&!f(t))return!1}else for(var i in e){if("$ref"==i)return!1;if("object"==typeof(t=e[i])&&!f(t))return!1}return!0}function h(e){var t,r=0;if(Array.isArray(e)){for(var i=0;i<e.length;i++)if("object"==typeof(t=e[i])&&(r+=h(t)),r==1/0)return 1/0}else for(var a in e){if("$ref"==a)return 1/0;if(u[a])r++;else if("object"==typeof(t=e[a])&&(r+=h(t)+1),r==1/0)return 1/0}return r}function p(t,r){return!1!==r&&(t=y(t)),g(e.parse(t))}function g(t){return e.serialize(t).split("#")[0]+"#"}var m=/#\/?$/;function y(e){return e?e.replace(m,""):""}function v(t,r){return r=y(r),e.resolve(t,r)}return Oo}function zo(){if(Lo)return To;Lo=1;var e=No();function t(r,i,a){this.message=a||t.message(r,i),this.missingRef=e.url(r,i),this.missingSchema=e.normalizeId(e.fullPath(this.missingRef))}function r(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}return To={Validation:r((function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0})),MissingRef:r(t)},t.message=function(e,t){return"can't resolve reference "+t+" from id "+e},To}function Vo(){return qo||(qo=1,Do=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,i="boolean"==typeof t.cycles&&t.cycles,a=t.cmp&&(r=t.cmp,function(e){return function(t,i){var a={key:t,value:e[t]},s={key:i,value:e[i]};return r(a,s)}}),s=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var r,o;if(Array.isArray(t)){for(o="[",r=0;r<t.length;r++)r&&(o+=","),o+=e(t[r])||"null";return o+"]"}if(null===t)return"null";if(-1!==s.indexOf(t)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var n=s.push(t)-1,l=Object.keys(t).sort(a&&a(t));for(o="",r=0;r<l.length;r++){var c=l[r],u=e(t[c]);u&&(o&&(o+=","),o+=JSON.stringify(c)+":"+u)}return s.splice(n,1),"{"+o+"}"}}(e)}),Do}function Go(){return Uo||(Uo=1,$o=function(e,t,r){var i="",a=!0===e.schema.$async,s=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),o=e.self._getId(e.schema);if(e.opts.strictKeywords){var n=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(n){var l="unknown keyword: "+n;if("log"!==e.opts.strictKeywords)throw new Error(l);e.logger.warn(l)}}if(e.isTop&&(i+=" var validate = ",a&&(e.async=!0,i+="async "),i+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",o&&(e.opts.sourceCode||e.opts.processCode)&&(i+=" /*# sourceURL="+o+" */ ")),"boolean"==typeof e.schema||!s&&!e.schema.$ref){t="false schema";var c=e.level,u=e.dataLevel,d=e.schema[t],f=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,g="data"+(u||""),m="valid"+c;if(!1===e.schema){e.isTop?p=!0:i+=" var "+m+" = false; ",(G=G||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'boolean schema is false' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),i+=" } "):i+=" {} ";var y=i;i=G.pop(),!e.compositeRule&&p?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?i+=a?" return data; ":" validate.errors = null; return true; ":i+=" var "+m+" = true; ";return e.isTop&&(i+=" }; return validate; "),i}if(e.isTop){var v=e.isTop;if(c=e.level=0,u=e.dataLevel=0,g="data",e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var b="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}i+=" var vErrors = null; ",i+=" var errors = 0;     ",i+=" if (rootData === undefined) rootData = data; "}else{if(c=e.level,g="data"+((u=e.dataLevel)||""),o&&(e.baseId=e.resolve.url(e.baseId,o)),a&&!e.async)throw new Error("async schema in sync schema");i+=" var errs_"+c+" = errors;"}m="valid"+c,p=!e.opts.allErrors;var w="",S="",x=e.schema.type,_=Array.isArray(x);if(x&&e.opts.nullable&&!0===e.schema.nullable&&(_?-1==x.indexOf("null")&&(x=x.concat("null")):"null"!=x&&(x=[x,"null"],_=!0)),_&&1==x.length&&(x=x[0],_=!1),e.schema.$ref&&s){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(s=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(i+=" "+e.RULES.all.$comment.code(e,"$comment")),x){if(e.opts.coerceTypes)var P=e.util.coerceToTypes(e.opts.coerceTypes,x);var F=e.RULES.types[x];if(P||_||!0===F||F&&!Y(F)){f=e.schemaPath+".type",h=e.errSchemaPath+"/type",f=e.schemaPath+".type",h=e.errSchemaPath+"/type";var j=_?"checkDataTypes":"checkDataType";if(i+=" if ("+e.util[j](x,g,e.opts.strictNumbers,!0)+") { ",P){var C="dataType"+c,E="coerced"+c;i+=" var "+C+" = typeof "+g+"; var "+E+" = undefined; ","array"==e.opts.coerceTypes&&(i+=" if ("+C+" == 'object' && Array.isArray("+g+") && "+g+".length == 1) { "+g+" = "+g+"[0]; "+C+" = typeof "+g+"; if ("+e.util.checkDataType(e.schema.type,g,e.opts.strictNumbers)+") "+E+" = "+g+"; } "),i+=" if ("+E+" !== undefined) ; ";var k=P;if(k)for(var I,O=-1,A=k.length-1;O<A;)"string"==(I=k[O+=1])?i+=" else if ("+C+" == 'number' || "+C+" == 'boolean') "+E+" = '' + "+g+"; else if ("+g+" === null) "+E+" = ''; ":"number"==I||"integer"==I?(i+=" else if ("+C+" == 'boolean' || "+g+" === null || ("+C+" == 'string' && "+g+" && "+g+" == +"+g+" ","integer"==I&&(i+=" && !("+g+" % 1)"),i+=")) "+E+" = +"+g+"; "):"boolean"==I?i+=" else if ("+g+" === 'false' || "+g+" === 0 || "+g+" === null) "+E+" = false; else if ("+g+" === 'true' || "+g+" === 1) "+E+" = true; ":"null"==I?i+=" else if ("+g+" === '' || "+g+" === 0 || "+g+" === false) "+E+" = null; ":"array"==e.opts.coerceTypes&&"array"==I&&(i+=" else if ("+C+" == 'string' || "+C+" == 'number' || "+C+" == 'boolean' || "+g+" == null) "+E+" = ["+g+"]; ");i+=" else {   ",(G=G||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",i+=_?""+x.join(","):""+x,i+="' } ",!1!==e.opts.messages&&(i+=" , message: 'should be ",i+=_?""+x.join(","):""+x,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),i+=" } "):i+=" {} ",y=i,i=G.pop(),!e.compositeRule&&p?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } if ("+E+" !== undefined) {  ";var T=u?"data"+(u-1||""):"parentData";i+=" "+g+" = "+E+"; ",u||(i+="if ("+T+" !== undefined)"),i+=" "+T+"["+(u?e.dataPathArr[u]:"parentDataProperty")+"] = "+E+"; } "}else(G=G||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",i+=_?""+x.join(","):""+x,i+="' } ",!1!==e.opts.messages&&(i+=" , message: 'should be ",i+=_?""+x.join(","):""+x,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),i+=" } "):i+=" {} ",y=i,i=G.pop(),!e.compositeRule&&p?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";i+=" } "}}if(e.schema.$ref&&!s)i+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",p&&(i+=" } if (errors === ",i+=v?"0":"errs_"+c,i+=") { ",S+="}");else{var L=e.RULES;if(L)for(var D=-1,q=L.length-1;D<q;)if(Y(F=L[D+=1])){if(F.type&&(i+=" if ("+e.util.checkDataType(F.type,g,e.opts.strictNumbers)+") { "),e.opts.useDefaults)if("object"==F.type&&e.schema.properties){d=e.schema.properties;var $=Object.keys(d);if($)for(var U,B=-1,M=$.length-1;B<M;)if(void 0!==(z=d[U=$[B+=1]]).default){var R=g+e.util.getProperty(U);if(e.compositeRule){if(e.opts.strictDefaults){if(b="default is ignored for: "+R,"log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else i+=" if ("+R+" === undefined ","empty"==e.opts.useDefaults&&(i+=" || "+R+" === null || "+R+" === '' "),i+=" ) "+R+" = ","shared"==e.opts.useDefaults?i+=" "+e.useDefault(z.default)+" ":i+=" "+JSON.stringify(z.default)+" ",i+="; "}}else if("array"==F.type&&Array.isArray(e.schema.items)){var N=e.schema.items;if(N){O=-1;for(var z,V=N.length-1;O<V;)if(void 0!==(z=N[O+=1]).default)if(R=g+"["+O+"]",e.compositeRule){if(e.opts.strictDefaults){if(b="default is ignored for: "+R,"log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else i+=" if ("+R+" === undefined ","empty"==e.opts.useDefaults&&(i+=" || "+R+" === null || "+R+" === '' "),i+=" ) "+R+" = ","shared"==e.opts.useDefaults?i+=" "+e.useDefault(z.default)+" ":i+=" "+JSON.stringify(z.default)+" ",i+="; "}}var G,Q=F.rules;if(Q)for(var H,K=-1,W=Q.length-1;K<W;)if(J(H=Q[K+=1])){var X=H.code(e,H.keyword,F.type);X&&(i+=" "+X+" ",p&&(w+="}"))}if(p&&(i+=" "+w+" ",w=""),F.type&&(i+=" } ",x&&x===F.type&&!P))i+=" else { ",f=e.schemaPath+".type",h=e.errSchemaPath+"/type",(G=G||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",i+=_?""+x.join(","):""+x,i+="' } ",!1!==e.opts.messages&&(i+=" , message: 'should be ",i+=_?""+x.join(","):""+x,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),i+=" } "):i+=" {} ",y=i,i=G.pop(),!e.compositeRule&&p?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ";p&&(i+=" if (errors === ",i+=v?"0":"errs_"+c,i+=") { ",S+="}")}}function Y(e){for(var t=e.rules,r=0;r<t.length;r++)if(J(t[r]))return!0}function J(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,i=0;i<r.length;i++)if(void 0!==e.schema[r[i]])return!0}(t)}return p&&(i+=" "+S+" "),v?(a?(i+=" if (errors === 0) return data;           ",i+=" else throw new ValidationError(vErrors); "):(i+=" validate.errors = vErrors; ",i+=" return errors === 0;       "),i+=" }; return validate;"):i+=" var "+m+" = errors === errs_"+c+";",i}),$o}var Qo,Ho,Ko,Wo,Xo,Yo,Jo,Zo,en,tn,rn,an,sn,on,nn,ln,cn,un,dn,fn,hn,pn,gn,mn,yn,vn,bn,wn,Sn,xn,_n,Pn,Fn,jn,Cn,En,kn,In,On,An,Tn,Ln,Dn,qn,$n,Un,Bn,Mn,Rn,Nn,zn,Vn,Gn,Qn,Hn,Kn,Wn,Xn,Yn,Jn={exports:{}};function Zn(){return bn||(bn=1,vn=function(e,t,r){var i,a=" ",s=e.level,o=e.dataLevel,n=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),f=e.opts.$data&&n&&n.$data;f?(a+=" var schema"+s+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",i="schema"+s):i=n;var h="maximum"==t,p=h?"exclusiveMaximum":"exclusiveMinimum",g=e.schema[p],m=e.opts.$data&&g&&g.$data,y=h?"<":">",v=h?">":"<",b=void 0;if(!f&&"number"!=typeof n&&void 0!==n)throw new Error(t+" must be number");if(!m&&void 0!==g&&"number"!=typeof g&&"boolean"!=typeof g)throw new Error(p+" must be number or boolean");if(m){var w,S=e.util.getData(g.$data,o,e.dataPathArr),x="exclusive"+s,_="exclType"+s,P="exclIsNumber"+s,F="' + "+(C="op"+s)+" + '";a+=" var schemaExcl"+s+" = "+S+"; ",a+=" var "+x+"; var "+_+" = typeof "+(S="schemaExcl"+s)+"; if ("+_+" != 'boolean' && "+_+" != 'undefined' && "+_+" != 'number') { ",b=p,(w=w||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(b||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: '"+p+" should be boolean' "),e.opts.verbose&&(a+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var j=a;a=w.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+j+"]); ":a+=" validate.errors = ["+j+"]; return false; ":a+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else if ( ",f&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),a+=" "+_+" == 'number' ? ( ("+x+" = "+i+" === undefined || "+S+" "+y+"= "+i+") ? "+d+" "+v+"= "+S+" : "+d+" "+v+" "+i+" ) : ( ("+x+" = "+S+" === true) ? "+d+" "+v+"= "+i+" : "+d+" "+v+" "+i+" ) || "+d+" !== "+d+") { var op"+s+" = "+x+" ? '"+y+"' : '"+y+"='; ",void 0===n&&(b=p,c=e.errSchemaPath+"/"+p,i=S,f=m)}else if(F=y,(P="number"==typeof g)&&f){var C="'"+F+"'";a+=" if ( ",f&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),a+=" ( "+i+" === undefined || "+g+" "+y+"= "+i+" ? "+d+" "+v+"= "+g+" : "+d+" "+v+" "+i+" ) || "+d+" !== "+d+") { "}else P&&void 0===n?(x=!0,b=p,c=e.errSchemaPath+"/"+p,i=g,v+="="):(P&&(i=Math[h?"min":"max"](g,n)),g===(!P||i)?(x=!0,b=p,c=e.errSchemaPath+"/"+p,v+="="):(x=!1,F+="=")),C="'"+F+"'",a+=" if ( ",f&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),a+=" "+d+" "+v+" "+i+" || "+d+" !== "+d+") { ";return b=b||t,(w=w||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(b||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { comparison: "+C+", limit: "+i+", exclusive: "+x+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be "+F+" ",a+=f?"' + "+i:i+"'"),e.opts.verbose&&(a+=" , schema:  ",a+=f?"validate.schema"+l:""+n,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ",j=a,a=w.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+j+"]); ":a+=" validate.errors = ["+j+"]; return false; ":a+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",u&&(a+=" else { "),a}),vn}function el(){return Sn||(Sn=1,wn=function(e,t,r){var i,a=" ",s=e.level,o=e.dataLevel,n=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),f=e.opts.$data&&n&&n.$data;if(f?(a+=" var schema"+s+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",i="schema"+s):i=n,!f&&"number"!=typeof n)throw new Error(t+" must be number");a+="if ( ",f&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),a+=" "+d+".length "+("maxItems"==t?">":"<")+" "+i+") { ";var h=t,p=p||[];p.push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(h||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+i+" } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have ",a+="maxItems"==t?"more":"fewer",a+=" than ",a+=f?"' + "+i+" + '":""+n,a+=" items' "),e.opts.verbose&&(a+=" , schema:  ",a+=f?"validate.schema"+l:""+n,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var g=a;return a=p.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+g+"]); ":a+=" validate.errors = ["+g+"]; return false; ":a+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",u&&(a+=" else { "),a}),wn}function tl(){return _n||(_n=1,xn=function(e,t,r){var i,a=" ",s=e.level,o=e.dataLevel,n=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),f=e.opts.$data&&n&&n.$data;if(f?(a+=" var schema"+s+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",i="schema"+s):i=n,!f&&"number"!=typeof n)throw new Error(t+" must be number");var h="maxLength"==t?">":"<";a+="if ( ",f&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),!1===e.opts.unicode?a+=" "+d+".length ":a+=" ucs2length("+d+") ",a+=" "+h+" "+i+") { ";var p=t,g=g||[];g.push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(p||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+i+" } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT be ",a+="maxLength"==t?"longer":"shorter",a+=" than ",a+=f?"' + "+i+" + '":""+n,a+=" characters' "),e.opts.verbose&&(a+=" , schema:  ",a+=f?"validate.schema"+l:""+n,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var m=a;return a=g.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+m+"]); ":a+=" validate.errors = ["+m+"]; return false; ":a+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",u&&(a+=" else { "),a}),xn}function rl(){return Fn||(Fn=1,Pn=function(e,t,r){var i,a=" ",s=e.level,o=e.dataLevel,n=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),f=e.opts.$data&&n&&n.$data;if(f?(a+=" var schema"+s+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",i="schema"+s):i=n,!f&&"number"!=typeof n)throw new Error(t+" must be number");a+="if ( ",f&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),a+=" Object.keys("+d+").length "+("maxProperties"==t?">":"<")+" "+i+") { ";var h=t,p=p||[];p.push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(h||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+i+" } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have ",a+="maxProperties"==t?"more":"fewer",a+=" than ",a+=f?"' + "+i+" + '":""+n,a+=" properties' "),e.opts.verbose&&(a+=" , schema:  ",a+=f?"validate.schema"+l:""+n,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var g=a;return a=p.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+g+"]); ":a+=" validate.errors = ["+g+"]; return false; ":a+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",u&&(a+=" else { "),a}),Pn}var il,al,sl,ol,nl={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};var ll,cl,ul,dl={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1},fl=function(){if(cl)return ll;cl=1;var e=function(){if(Mo)return Bo;Mo=1;var e=No(),t=Eo(),r=zo(),i=Vo(),a=Go(),s=t.ucs2length,o=Co(),n=r.Validation;function l(e,t,r){var i=u.call(this,e,t,r);return i>=0?{index:i,compiling:!0}:(i=this._compilations.length,this._compilations[i]={schema:e,root:t,baseId:r},{index:i,compiling:!1})}function c(e,t,r){var i=u.call(this,e,t,r);i>=0&&this._compilations.splice(i,1)}function u(e,t,r){for(var i=0;i<this._compilations.length;i++){var a=this._compilations[i];if(a.schema==e&&a.root==t&&a.baseId==r)return i}return-1}function d(e,r){return"var pattern"+e+" = new RegExp("+t.toQuotedString(r[e])+");"}function f(e){return"var default"+e+" = defaults["+e+"];"}function h(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function p(e){return"var customRule"+e+" = customRules["+e+"];"}function g(e,t){if(!e.length)return"";for(var r="",i=0;i<e.length;i++)r+=t(i,e);return r}return Bo=function u(m,y,v,b){var w=this,S=this._opts,x=[void 0],_={},P=[],F={},j=[],C={},E=[];y=y||{schema:m,refVal:x,refs:_};var k=l.call(this,m,y,b),I=this._compilations[k.index];if(k.compiling)return I.callValidate=function e(){var t=I.validate,r=t.apply(this,arguments);return e.errors=t.errors,r};var O=this._formats,A=this.RULES;try{var T=D(m,y,v,b);I.validate=T;var L=I.callValidate;return L&&(L.schema=T.schema,L.errors=null,L.refs=T.refs,L.refVal=T.refVal,L.root=T.root,L.$async=T.$async,S.sourceCode&&(L.source=T.source)),T}finally{c.call(this,m,y,b)}function D(i,l,c,m){var v=!l||l&&l.schema==i;if(l.schema!=y.schema)return u.call(w,i,l,c,m);var b,F=!0===i.$async,C=a({isTop:!0,schema:i,isRoot:v,baseId:m,root:l,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:r.MissingRef,RULES:A,validate:a,util:t,resolve:e,resolveRef:q,usePattern:B,useDefault:M,useCustomRule:R,opts:S,formats:O,logger:w.logger,self:w});C=g(x,h)+g(P,d)+g(j,f)+g(E,p)+C,S.processCode&&(C=S.processCode(C,i));try{b=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",C)(w,A,O,y,x,j,E,o,s,n),x[0]=b}catch(e){throw w.logger.error("Error compiling schema, function code:",C),e}return b.schema=i,b.errors=null,b.refs=_,b.refVal=x,b.root=v?b:l,F&&(b.$async=!0),!0===S.sourceCode&&(b.source={code:C,patterns:P,defaults:j}),b}function q(t,r,i){r=e.url(t,r);var a,s,o=_[r];if(void 0!==o)return U(a=x[o],s="refVal["+o+"]");if(!i&&y.refs){var n=y.refs[r];if(void 0!==n)return U(a=y.refVal[n],s=$(r,a))}s=$(r);var l=e.call(w,D,y,r);if(void 0===l){var c=v&&v[r];c&&(l=e.inlineRef(c,S.inlineRefs)?c:u.call(w,c,y,v,t))}if(void 0!==l)return function(e,t){var r=_[e];x[r]=t}(r,l),U(l,s);!function(e){delete _[e]}(r)}function $(e,t){var r=x.length;return x[r]=t,_[e]=r,"refVal"+r}function U(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function B(e){var t=F[e];return void 0===t&&(t=F[e]=P.length,P[t]=e),"pattern"+t}function M(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return t.toQuotedString(e);case"object":if(null===e)return"null";var r=i(e),a=C[r];return void 0===a&&(a=C[r]=j.length,j[a]=e),"default"+a}}function R(e,t,r,i){if(!1!==w._opts.validateSchema){var a=e.definition.dependencies;if(a&&!a.every((function(e){return Object.prototype.hasOwnProperty.call(r,e)})))throw new Error("parent schema must have all required keywords: "+a.join(","));var s=e.definition.validateSchema;if(s&&!s(t)){var o="keyword schema is invalid: "+w.errorsText(s.errors);if("log"!=w._opts.validateSchema)throw new Error(o);w.logger.error(o)}}var n,l=e.definition.compile,c=e.definition.inline,u=e.definition.macro;if(l)n=l.call(w,t,r,i);else if(u)n=u.call(w,t,r,i),!1!==S.validateSchema&&w.validateSchema(n,!0);else if(c)n=c.call(w,i,e.keyword,t,r);else if(!(n=e.definition.validate))return;if(void 0===n)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var d=E.length;return E[d]=n,{code:"customRule"+d,validate:n}}},Bo}(),t=No(),r=function(){if(Qo)return Jn.exports;Qo=1;var e=Jn.exports=function(){this._cache={}};return e.prototype.put=function(e,t){this._cache[e]=t},e.prototype.get=function(e){return this._cache[e]},e.prototype.del=function(e){delete this._cache[e]},e.prototype.clear=function(){this._cache={}},Jn.exports}(),i=ko(),a=Vo(),s=function(){if(Ko)return Ho;Ko=1;var e=Eo(),t=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,r=[0,31,28,31,30,31,30,31,31,30,31,30,31],i=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,a=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,s=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,o=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,n=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,l=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,c=/^(?:\/(?:[^~/]|~0|~1)*)*$/,u=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,d=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function f(t){return t="full"==t?"full":"fast",e.copy(f[t])}function h(e){var i=e.match(t);if(!i)return!1;var a=+i[1],s=+i[2],o=+i[3];return s>=1&&s<=12&&o>=1&&o<=(2==s&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(a)?29:r[s])}function p(e,t){var r=e.match(i);if(!r)return!1;var a=r[1],s=r[2],o=r[3],n=r[5];return(a<=23&&s<=59&&o<=59||23==a&&59==s&&60==o)&&(!t||n)}Ho=f,f.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":o,url:n,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:a,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:v,uuid:l,"json-pointer":c,"json-pointer-uri-fragment":u,"relative-json-pointer":d},f.full={date:h,time:p,"date-time":function(e){var t=e.split(g);return 2==t.length&&h(t[0])&&p(t[1],!0)},uri:function(e){return m.test(e)&&s.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":o,url:n,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:a,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:v,uuid:l,"json-pointer":c,"json-pointer-uri-fragment":u,"relative-json-pointer":d};var g=/t|\s/i,m=/\/|:/,y=/[^\\]\\Z/;function v(e){if(y.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}return Ho}(),o=function(){if(Gn)return Vn;Gn=1;var e=(zn||(zn=1,Nn={$ref:(Xo||(Xo=1,Wo=function(e,t,r){var i,a,s=" ",o=e.level,n=e.dataLevel,l=e.schema[t],c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),f="valid"+o;if("#"==l||"#/"==l)e.isRoot?(i=e.async,a="validate"):(i=!0===e.root.schema.$async,a="root.refVal[0]");else{var h=e.resolveRef(e.baseId,l,e.isRoot);if(void 0===h){var p=e.MissingRefError.message(e.baseId,l);if("fail"==e.opts.missingRefs){e.logger.error(p),(v=v||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { ref: '"+e.util.escapeQuotes(l)+"' } ",!1!==e.opts.messages&&(s+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(l)+"' "),e.opts.verbose&&(s+=" , schema: "+e.util.toQuotedString(l)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var g=s;s=v.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+g+"]); ":s+=" validate.errors = ["+g+"]; return false; ":s+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(s+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,l,p);e.logger.warn(p),u&&(s+=" if (true) { ")}}else if(h.inline){var m=e.util.copy(e);m.level++;var y="valid"+m.level;m.schema=h.schema,m.schemaPath="",m.errSchemaPath=l,s+=" "+e.validate(m).replace(/validate\.schema/g,h.code)+" ",u&&(s+=" if ("+y+") { ")}else i=!0===h.$async||e.async&&!1!==h.$async,a=h.code}if(a){var v;(v=v||[]).push(s),s="",e.opts.passContext?s+=" "+a+".call(this, ":s+=" "+a+"( ",s+=" "+d+", (dataPath || '')",'""'!=e.errorPath&&(s+=" + "+e.errorPath);var b=s+=" , "+(n?"data"+(n-1||""):"parentData")+" , "+(n?e.dataPathArr[n]:"parentDataProperty")+", rootData)  ";if(s=v.pop(),i){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(s+=" var "+f+"; "),s+=" try { await "+b+"; ",u&&(s+=" "+f+" = true; "),s+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(s+=" "+f+" = false; "),s+=" } ",u&&(s+=" if ("+f+") { ")}else s+=" if (!"+b+") { if (vErrors === null) vErrors = "+a+".errors; else vErrors = vErrors.concat("+a+".errors); errors = vErrors.length; } ",u&&(s+=" else { ")}return s}),Wo),allOf:(Jo||(Jo=1,Yo=function(e,t,r){var i=" ",a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),o=e.errSchemaPath+"/"+t,n=!e.opts.allErrors,l=e.util.copy(e),c="";l.level++;var u="valid"+l.level,d=l.baseId,f=!0,h=a;if(h)for(var p,g=-1,m=h.length-1;g<m;)p=h[g+=1],(e.opts.strictKeywords?"object"==typeof p&&Object.keys(p).length>0||!1===p:e.util.schemaHasRules(p,e.RULES.all))&&(f=!1,l.schema=p,l.schemaPath=s+"["+g+"]",l.errSchemaPath=o+"/"+g,i+="  "+e.validate(l)+" ",l.baseId=d,n&&(i+=" if ("+u+") { ",c+="}"));return n&&(i+=f?" if (true) { ":" "+c.slice(0,-1)+" "),i}),Yo),anyOf:(en||(en=1,Zo=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+a,f="errs__"+a,h=e.util.copy(e),p="";h.level++;var g="valid"+h.level,m=o.every((function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0||!1===t:e.util.schemaHasRules(t,e.RULES.all)}));if(m){var y=h.baseId;i+=" var "+f+" = errors; var "+d+" = false;  ";var v=e.compositeRule;e.compositeRule=h.compositeRule=!0;var b=o;if(b)for(var w,S=-1,x=b.length-1;S<x;)w=b[S+=1],h.schema=w,h.schemaPath=n+"["+S+"]",h.errSchemaPath=l+"/"+S,i+="  "+e.validate(h)+" ",h.baseId=y,i+=" "+d+" = "+d+" || "+g+"; if (!"+d+") { ",p+="}";e.compositeRule=h.compositeRule=v,i+=" "+p+" if (!"+d+") {   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" } else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } ")}else c&&(i+=" if (true) { ");return i}),Zo),$comment:(rn||(rn=1,tn=function(e,t,r){var i=" ",a=e.schema[t],s=e.errSchemaPath+"/"+t;e.opts.allErrors;var o=e.util.toQuotedString(a);return!0===e.opts.$comment?i+=" console.log("+o+");":"function"==typeof e.opts.$comment&&(i+=" self._opts.$comment("+o+", "+e.util.toQuotedString(s)+", validate.root.schema);"),i}),tn),const:(sn||(sn=1,an=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+a,f=e.opts.$data&&o&&o.$data;f&&(i+=" var schema"+a+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; "),f||(i+=" var schema"+a+" = validate.schema"+n+";"),i+="var "+d+" = equal("+u+", schema"+a+"); if (!"+d+") {   ";var h=h||[];h.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValue: schema"+a+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be equal to constant' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var p=i;return i=h.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+p+"]); ":i+=" validate.errors = ["+p+"]; return false; ":i+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",c&&(i+=" else { "),i}),an),contains:(nn||(nn=1,on=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+a,f="errs__"+a,h=e.util.copy(e);h.level++;var p="valid"+h.level,g="i"+a,m=h.dataLevel=e.dataLevel+1,y="data"+m,v=e.baseId,b=e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0||!1===o:e.util.schemaHasRules(o,e.RULES.all);if(i+="var "+f+" = errors;var "+d+";",b){var w=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=o,h.schemaPath=n,h.errSchemaPath=l,i+=" var "+p+" = false; for (var "+g+" = 0; "+g+" < "+u+".length; "+g+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);var S=u+"["+g+"]";h.dataPathArr[m]=g;var x=e.validate(h);h.baseId=v,e.util.varOccurences(x,y)<2?i+=" "+e.util.varReplace(x,y,S)+" ":i+=" var "+y+" = "+S+"; "+x+" ",i+=" if ("+p+") break; }  ",e.compositeRule=h.compositeRule=w,i+="  if (!"+p+") {"}else i+=" if ("+u+".length == 0) {";var _=_||[];_.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should contain a valid item' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var P=i;return i=_.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+P+"]); ":i+=" validate.errors = ["+P+"]; return false; ":i+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { ",b&&(i+="  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } "),e.opts.allErrors&&(i+=" } "),i}),on),dependencies:(cn||(cn=1,ln=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="errs__"+a,f=e.util.copy(e),h="";f.level++;var p="valid"+f.level,g={},m={},y=e.opts.ownProperties;for(S in o)if("__proto__"!=S){var v=o[S],b=Array.isArray(v)?m:g;b[S]=v}i+="var "+d+" = errors;";var w=e.errorPath;for(var S in i+="var missing"+a+";",m)if((b=m[S]).length){if(i+=" if ( "+u+e.util.getProperty(S)+" !== undefined ",y&&(i+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(S)+"') "),c){i+=" && ( ";var x=b;if(x)for(var _=-1,P=x.length-1;_<P;)I=x[_+=1],_&&(i+=" || "),i+=" ( ( "+(L=u+(T=e.util.getProperty(I)))+" === undefined ",y&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(I)+"') "),i+=") && (missing"+a+" = "+e.util.toQuotedString(e.opts.jsonPointers?I:T)+") ) ";i+=")) {  ";var F="missing"+a,j="' + "+F+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,F,!0):w+" + "+F);var C=C||[];C.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(S)+"', missingProperty: '"+j+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should have ",1==b.length?i+="property "+e.util.escapeQuotes(b[0]):i+="properties "+e.util.escapeQuotes(b.join(", ")),i+=" when property "+e.util.escapeQuotes(S)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var E=i;i=C.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{i+=" ) { ";var k=b;if(k)for(var I,O=-1,A=k.length-1;O<A;){I=k[O+=1];var T=e.util.getProperty(I),L=(j=e.util.escapeQuotes(I),u+T);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,I,e.opts.jsonPointers)),i+=" if ( "+L+" === undefined ",y&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(I)+"') "),i+=") {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(S)+"', missingProperty: '"+j+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should have ",1==b.length?i+="property "+e.util.escapeQuotes(b[0]):i+="properties "+e.util.escapeQuotes(b.join(", ")),i+=" when property "+e.util.escapeQuotes(S)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}i+=" }   ",c&&(h+="}",i+=" else { ")}e.errorPath=w;var D=f.baseId;for(var S in g)v=g[S],(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0||!1===v:e.util.schemaHasRules(v,e.RULES.all))&&(i+=" "+p+" = true; if ( "+u+e.util.getProperty(S)+" !== undefined ",y&&(i+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(S)+"') "),i+=") { ",f.schema=v,f.schemaPath=n+e.util.getProperty(S),f.errSchemaPath=l+"/"+e.util.escapeFragment(S),i+="  "+e.validate(f)+" ",f.baseId=D,i+=" }  ",c&&(i+=" if ("+p+") { ",h+="}"));return c&&(i+="   "+h+" if ("+d+" == errors) {"),i}),ln),enum:(dn||(dn=1,un=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+a,f=e.opts.$data&&o&&o.$data;f&&(i+=" var schema"+a+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ");var h="i"+a,p="schema"+a;f||(i+=" var "+p+" = validate.schema"+n+";"),i+="var "+d+";",f&&(i+=" if (schema"+a+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+a+")) "+d+" = false; else {"),i+=d+" = false;for (var "+h+"=0; "+h+"<"+p+".length; "+h+"++) if (equal("+u+", "+p+"["+h+"])) { "+d+" = true; break; }",f&&(i+="  }  "),i+=" if (!"+d+") {   ";var g=g||[];g.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValues: schema"+a+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var m=i;return i=g.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",c&&(i+=" else { "),i}),un),format:(hn||(hn=1,fn=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||"");if(!1===e.opts.format)return c&&(i+=" if (true) { "),i;var d,f=e.opts.$data&&o&&o.$data;f?(i+=" var schema"+a+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ",d="schema"+a):d=o;var h=e.opts.unknownFormats,p=Array.isArray(h);if(f)i+=" var "+(g="format"+a)+" = formats["+d+"]; var "+(m="isObject"+a)+" = typeof "+g+" == 'object' && !("+g+" instanceof RegExp) && "+g+".validate; var "+(y="formatType"+a)+" = "+m+" && "+g+".type || 'string'; if ("+m+") { ",e.async&&(i+=" var async"+a+" = "+g+".async; "),i+=" "+g+" = "+g+".validate; } if (  ",f&&(i+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),i+=" (","ignore"!=h&&(i+=" ("+d+" && !"+g+" ",p&&(i+=" && self._opts.unknownFormats.indexOf("+d+") == -1 "),i+=") || "),i+=" ("+g+" && "+y+" == '"+r+"' && !(typeof "+g+" == 'function' ? ",e.async?i+=" (async"+a+" ? await "+g+"("+u+") : "+g+"("+u+")) ":i+=" "+g+"("+u+") ",i+=" : "+g+".test("+u+"))))) {";else{var g;if(!(g=e.formats[o])){if("ignore"==h)return e.logger.warn('unknown format "'+o+'" ignored in schema at path "'+e.errSchemaPath+'"'),c&&(i+=" if (true) { "),i;if(p&&h.indexOf(o)>=0)return c&&(i+=" if (true) { "),i;throw new Error('unknown format "'+o+'" is used in schema at path "'+e.errSchemaPath+'"')}var m,y=(m="object"==typeof g&&!(g instanceof RegExp)&&g.validate)&&g.type||"string";if(m){var v=!0===g.async;g=g.validate}if(y!=r)return c&&(i+=" if (true) { "),i;if(v){if(!e.async)throw new Error("async format in sync schema");i+=" if (!(await "+(b="formats"+e.util.getProperty(o)+".validate")+"("+u+"))) { "}else{i+=" if (! ";var b="formats"+e.util.getProperty(o);m&&(b+=".validate"),i+="function"==typeof g?" "+b+"("+u+") ":" "+b+".test("+u+") ",i+=") { "}}var w=w||[];w.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { format:  ",i+=f?""+d:""+e.util.toQuotedString(o),i+="  } ",!1!==e.opts.messages&&(i+=" , message: 'should match format \"",i+=f?"' + "+d+" + '":""+e.util.escapeQuotes(o),i+="\"' "),e.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+n:""+e.util.toQuotedString(o),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var S=i;return i=w.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+S+"]); ":i+=" validate.errors = ["+S+"]; return false; ":i+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",c&&(i+=" else { "),i}),fn),if:(gn||(gn=1,pn=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+a,f="errs__"+a,h=e.util.copy(e);h.level++;var p="valid"+h.level,g=e.schema.then,m=e.schema.else,y=void 0!==g&&(e.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0||!1===g:e.util.schemaHasRules(g,e.RULES.all)),v=void 0!==m&&(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0||!1===m:e.util.schemaHasRules(m,e.RULES.all)),b=h.baseId;if(y||v){var w;h.createErrors=!1,h.schema=o,h.schemaPath=n,h.errSchemaPath=l,i+=" var "+f+" = errors; var "+d+" = true;  ";var S=e.compositeRule;e.compositeRule=h.compositeRule=!0,i+="  "+e.validate(h)+" ",h.baseId=b,h.createErrors=!0,i+="  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; }  ",e.compositeRule=h.compositeRule=S,y?(i+=" if ("+p+") {  ",h.schema=e.schema.then,h.schemaPath=e.schemaPath+".then",h.errSchemaPath=e.errSchemaPath+"/then",i+="  "+e.validate(h)+" ",h.baseId=b,i+=" "+d+" = "+p+"; ",y&&v?i+=" var "+(w="ifClause"+a)+" = 'then'; ":w="'then'",i+=" } ",v&&(i+=" else { ")):i+=" if (!"+p+") { ",v&&(h.schema=e.schema.else,h.schemaPath=e.schemaPath+".else",h.errSchemaPath=e.errSchemaPath+"/else",i+="  "+e.validate(h)+" ",h.baseId=b,i+=" "+d+" = "+p+"; ",y&&v?i+=" var "+(w="ifClause"+a)+" = 'else'; ":w="'else'",i+=" } "),i+=" if (!"+d+") {   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { failingKeyword: "+w+" } ",!1!==e.opts.messages&&(i+=" , message: 'should match \"' + "+w+" + '\" schema' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" }   ",c&&(i+=" else { ")}else c&&(i+=" if (true) { ");return i}),pn),items:(yn||(yn=1,mn=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+a,f="errs__"+a,h=e.util.copy(e),p="";h.level++;var g="valid"+h.level,m="i"+a,y=h.dataLevel=e.dataLevel+1,v="data"+y,b=e.baseId;if(i+="var "+f+" = errors;var "+d+";",Array.isArray(o)){var w=e.schema.additionalItems;if(!1===w){i+=" "+d+" = "+u+".length <= "+o.length+"; ";var S=l;l=e.errSchemaPath+"/additionalItems",i+="  if (!"+d+") {   ";var x=x||[];x.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+o.length+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have more than "+o.length+" items' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var _=i;i=x.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+_+"]); ":i+=" validate.errors = ["+_+"]; return false; ":i+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",l=S,c&&(p+="}",i+=" else { ")}var P=o;if(P)for(var F,j=-1,C=P.length-1;j<C;)if(F=P[j+=1],e.opts.strictKeywords?"object"==typeof F&&Object.keys(F).length>0||!1===F:e.util.schemaHasRules(F,e.RULES.all)){i+=" "+g+" = true; if ("+u+".length > "+j+") { ";var E=u+"["+j+"]";h.schema=F,h.schemaPath=n+"["+j+"]",h.errSchemaPath=l+"/"+j,h.errorPath=e.util.getPathExpr(e.errorPath,j,e.opts.jsonPointers,!0),h.dataPathArr[y]=j;var k=e.validate(h);h.baseId=b,e.util.varOccurences(k,v)<2?i+=" "+e.util.varReplace(k,v,E)+" ":i+=" var "+v+" = "+E+"; "+k+" ",i+=" }  ",c&&(i+=" if ("+g+") { ",p+="}")}"object"==typeof w&&(e.opts.strictKeywords?"object"==typeof w&&Object.keys(w).length>0||!1===w:e.util.schemaHasRules(w,e.RULES.all))&&(h.schema=w,h.schemaPath=e.schemaPath+".additionalItems",h.errSchemaPath=e.errSchemaPath+"/additionalItems",i+=" "+g+" = true; if ("+u+".length > "+o.length+") {  for (var "+m+" = "+o.length+"; "+m+" < "+u+".length; "+m+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0),E=u+"["+m+"]",h.dataPathArr[y]=m,k=e.validate(h),h.baseId=b,e.util.varOccurences(k,v)<2?i+=" "+e.util.varReplace(k,v,E)+" ":i+=" var "+v+" = "+E+"; "+k+" ",c&&(i+=" if (!"+g+") break; "),i+=" } }  ",c&&(i+=" if ("+g+") { ",p+="}"))}else(e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0||!1===o:e.util.schemaHasRules(o,e.RULES.all))&&(h.schema=o,h.schemaPath=n,h.errSchemaPath=l,i+="  for (var "+m+" = 0; "+m+" < "+u+".length; "+m+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0),E=u+"["+m+"]",h.dataPathArr[y]=m,k=e.validate(h),h.baseId=b,e.util.varOccurences(k,v)<2?i+=" "+e.util.varReplace(k,v,E)+" ":i+=" var "+v+" = "+E+"; "+k+" ",c&&(i+=" if (!"+g+") break; "),i+=" }");return c&&(i+=" "+p+" if ("+f+" == errors) {"),i}),mn),maximum:Zn(),minimum:Zn(),maxItems:el(),minItems:el(),maxLength:tl(),minLength:tl(),maxProperties:rl(),minProperties:rl(),multipleOf:(Cn||(Cn=1,jn=function(e,t,r){var i,a=" ",s=e.level,o=e.dataLevel,n=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),f=e.opts.$data&&n&&n.$data;if(f?(a+=" var schema"+s+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",i="schema"+s):i=n,!f&&"number"!=typeof n)throw new Error(t+" must be number");a+="var division"+s+";if (",f&&(a+=" "+i+" !== undefined && ( typeof "+i+" != 'number' || "),a+=" (division"+s+" = "+d+" / "+i+", ",e.opts.multipleOfPrecision?a+=" Math.abs(Math.round(division"+s+") - division"+s+") > 1e-"+e.opts.multipleOfPrecision+" ":a+=" division"+s+" !== parseInt(division"+s+") ",a+=" ) ",f&&(a+="  )  "),a+=" ) {   ";var h=h||[];h.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { multipleOf: "+i+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be multiple of ",a+=f?"' + "+i:i+"'"),e.opts.verbose&&(a+=" , schema:  ",a+=f?"validate.schema"+l:""+n,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var p=a;return a=h.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+p+"]); ":a+=" validate.errors = ["+p+"]; return false; ":a+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",u&&(a+=" else { "),a}),jn),not:(kn||(kn=1,En=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="errs__"+a,f=e.util.copy(e);f.level++;var h="valid"+f.level;if(e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0||!1===o:e.util.schemaHasRules(o,e.RULES.all)){f.schema=o,f.schemaPath=n,f.errSchemaPath=l,i+=" var "+d+" = errors;  ";var p,g=e.compositeRule;e.compositeRule=f.compositeRule=!0,f.createErrors=!1,f.opts.allErrors&&(p=f.opts.allErrors,f.opts.allErrors=!1),i+=" "+e.validate(f)+" ",f.createErrors=!0,p&&(f.opts.allErrors=p),e.compositeRule=f.compositeRule=g,i+=" if ("+h+") {   ";var m=m||[];m.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var y=i;i=m.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } ")}else i+="  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(i+=" if (false) { ");return i}),En),oneOf:(On||(On=1,In=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+a,f="errs__"+a,h=e.util.copy(e),p="";h.level++;var g="valid"+h.level,m=h.baseId,y="prevValid"+a,v="passingSchemas"+a;i+="var "+f+" = errors , "+y+" = false , "+d+" = false , "+v+" = null; ";var b=e.compositeRule;e.compositeRule=h.compositeRule=!0;var w=o;if(w)for(var S,x=-1,_=w.length-1;x<_;)S=w[x+=1],(e.opts.strictKeywords?"object"==typeof S&&Object.keys(S).length>0||!1===S:e.util.schemaHasRules(S,e.RULES.all))?(h.schema=S,h.schemaPath=n+"["+x+"]",h.errSchemaPath=l+"/"+x,i+="  "+e.validate(h)+" ",h.baseId=m):i+=" var "+g+" = true; ",x&&(i+=" if ("+g+" && "+y+") { "+d+" = false; "+v+" = ["+v+", "+x+"]; } else { ",p+="}"),i+=" if ("+g+") { "+d+" = "+y+" = true; "+v+" = "+x+"; }";return e.compositeRule=h.compositeRule=b,i+=p+"if (!"+d+") {   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { passingSchemas: "+v+" } ",!1!==e.opts.messages&&(i+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+="} else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; }",e.opts.allErrors&&(i+=" } "),i}),In),pattern:(Tn||(Tn=1,An=function(e,t,r){var i,a=" ",s=e.level,o=e.dataLevel,n=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),f=e.opts.$data&&n&&n.$data;f?(a+=" var schema"+s+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",i="schema"+s):i=n,a+="if ( ",f&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'string') || "),a+=" !"+(f?"(new RegExp("+i+"))":e.usePattern(n))+".test("+d+") ) {   ";var h=h||[];h.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { pattern:  ",a+=f?""+i:""+e.util.toQuotedString(n),a+="  } ",!1!==e.opts.messages&&(a+=" , message: 'should match pattern \"",a+=f?"' + "+i+" + '":""+e.util.escapeQuotes(n),a+="\"' "),e.opts.verbose&&(a+=" , schema:  ",a+=f?"validate.schema"+l:""+e.util.toQuotedString(n),a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var p=a;return a=h.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+p+"]); ":a+=" validate.errors = ["+p+"]; return false; ":a+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",u&&(a+=" else { "),a}),An),properties:(Dn||(Dn=1,Ln=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="errs__"+a,f=e.util.copy(e),h="";f.level++;var p="valid"+f.level,g="key"+a,m="idx"+a,y=f.dataLevel=e.dataLevel+1,v="data"+y,b="dataProperties"+a,w=Object.keys(o||{}).filter(T),S=e.schema.patternProperties||{},x=Object.keys(S).filter(T),_=e.schema.additionalProperties,P=w.length||x.length,F=!1===_,j="object"==typeof _&&Object.keys(_).length,C=e.opts.removeAdditional,E=F||j||C,k=e.opts.ownProperties,I=e.baseId,O=e.schema.required;if(O&&(!e.opts.$data||!O.$data)&&O.length<e.opts.loopRequired)var A=e.util.toHash(O);function T(e){return"__proto__"!==e}if(i+="var "+d+" = errors;var "+p+" = true;",k&&(i+=" var "+b+" = undefined;"),E){if(i+=k?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+m+"=0; "+m+"<"+b+".length; "+m+"++) { var "+g+" = "+b+"["+m+"]; ":" for (var "+g+" in "+u+") { ",P){if(i+=" var isAdditional"+a+" = !(false ",w.length)if(w.length>8)i+=" || validate.schema"+n+".hasOwnProperty("+g+") ";else{var L=w;if(L)for(var D=-1,q=L.length-1;D<q;)W=L[D+=1],i+=" || "+g+" == "+e.util.toQuotedString(W)+" "}if(x.length){var $=x;if($)for(var U=-1,B=$.length-1;U<B;)se=$[U+=1],i+=" || "+e.usePattern(se)+".test("+g+") "}i+=" ); if (isAdditional"+a+") { "}if("all"==C)i+=" delete "+u+"["+g+"]; ";else{var M=e.errorPath,R="' + "+g+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers)),F)if(C)i+=" delete "+u+"["+g+"]; ";else{i+=" "+p+" = false; ";var N=l;l=e.errSchemaPath+"/additionalProperties",(re=re||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { additionalProperty: '"+R+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is an invalid additional property":i+="should NOT have additional properties",i+="' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var z=i;i=re.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+z+"]); ":i+=" validate.errors = ["+z+"]; return false; ":i+=" var err = "+z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=N,c&&(i+=" break; ")}else if(j)if("failing"==C){i+=" var "+d+" = errors;  ";var V=e.compositeRule;e.compositeRule=f.compositeRule=!0,f.schema=_,f.schemaPath=e.schemaPath+".additionalProperties",f.errSchemaPath=e.errSchemaPath+"/additionalProperties",f.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var G=u+"["+g+"]";f.dataPathArr[y]=g;var Q=e.validate(f);f.baseId=I,e.util.varOccurences(Q,v)<2?i+=" "+e.util.varReplace(Q,v,G)+" ":i+=" var "+v+" = "+G+"; "+Q+" ",i+=" if (!"+p+") { errors = "+d+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+u+"["+g+"]; }  ",e.compositeRule=f.compositeRule=V}else f.schema=_,f.schemaPath=e.schemaPath+".additionalProperties",f.errSchemaPath=e.errSchemaPath+"/additionalProperties",f.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers),G=u+"["+g+"]",f.dataPathArr[y]=g,Q=e.validate(f),f.baseId=I,e.util.varOccurences(Q,v)<2?i+=" "+e.util.varReplace(Q,v,G)+" ":i+=" var "+v+" = "+G+"; "+Q+" ",c&&(i+=" if (!"+p+") break; ");e.errorPath=M}P&&(i+=" } "),i+=" }  ",c&&(i+=" if ("+p+") { ",h+="}")}var H=e.opts.useDefaults&&!e.compositeRule;if(w.length){var K=w;if(K)for(var W,X=-1,Y=K.length-1;X<Y;){var J=o[W=K[X+=1]];if(e.opts.strictKeywords?"object"==typeof J&&Object.keys(J).length>0||!1===J:e.util.schemaHasRules(J,e.RULES.all)){var Z=e.util.getProperty(W),ee=(G=u+Z,H&&void 0!==J.default);if(f.schema=J,f.schemaPath=n+Z,f.errSchemaPath=l+"/"+e.util.escapeFragment(W),f.errorPath=e.util.getPath(e.errorPath,W,e.opts.jsonPointers),f.dataPathArr[y]=e.util.toQuotedString(W),Q=e.validate(f),f.baseId=I,e.util.varOccurences(Q,v)<2){Q=e.util.varReplace(Q,v,G);var te=G}else te=v,i+=" var "+v+" = "+G+"; ";if(ee)i+=" "+Q+" ";else{if(A&&A[W]){i+=" if ( "+te+" === undefined ",k&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(W)+"') "),i+=") { "+p+" = false; ",M=e.errorPath,N=l;var re,ie=e.util.escapeQuotes(W);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(M,W,e.opts.jsonPointers)),l=e.errSchemaPath+"/required",(re=re||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+ie+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+ie+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",z=i,i=re.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+z+"]); ":i+=" validate.errors = ["+z+"]; return false; ":i+=" var err = "+z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=N,e.errorPath=M,i+=" } else { "}else c?(i+=" if ( "+te+" === undefined ",k&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(W)+"') "),i+=") { "+p+" = true; } else { "):(i+=" if ("+te+" !== undefined ",k&&(i+=" &&   Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(W)+"') "),i+=" ) { ");i+=" "+Q+" } "}}c&&(i+=" if ("+p+") { ",h+="}")}}if(x.length){var ae=x;if(ae)for(var se,oe=-1,ne=ae.length-1;oe<ne;)J=S[se=ae[oe+=1]],(e.opts.strictKeywords?"object"==typeof J&&Object.keys(J).length>0||!1===J:e.util.schemaHasRules(J,e.RULES.all))&&(f.schema=J,f.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(se),f.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(se),i+=k?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+m+"=0; "+m+"<"+b+".length; "+m+"++) { var "+g+" = "+b+"["+m+"]; ":" for (var "+g+" in "+u+") { ",i+=" if ("+e.usePattern(se)+".test("+g+")) { ",f.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers),G=u+"["+g+"]",f.dataPathArr[y]=g,Q=e.validate(f),f.baseId=I,e.util.varOccurences(Q,v)<2?i+=" "+e.util.varReplace(Q,v,G)+" ":i+=" var "+v+" = "+G+"; "+Q+" ",c&&(i+=" if (!"+p+") break; "),i+=" } ",c&&(i+=" else "+p+" = true; "),i+=" }  ",c&&(i+=" if ("+p+") { ",h+="}"))}return c&&(i+=" "+h+" if ("+d+" == errors) {"),i}),Ln),propertyNames:($n||($n=1,qn=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="errs__"+a,f=e.util.copy(e);f.level++;var h="valid"+f.level;if(i+="var "+d+" = errors;",e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0||!1===o:e.util.schemaHasRules(o,e.RULES.all)){f.schema=o,f.schemaPath=n,f.errSchemaPath=l;var p="key"+a,g="idx"+a,m="i"+a,y="' + "+p+" + '",v="data"+(f.dataLevel=e.dataLevel+1),b="dataProperties"+a,w=e.opts.ownProperties,S=e.baseId;w&&(i+=" var "+b+" = undefined; "),i+=w?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+g+"=0; "+g+"<"+b+".length; "+g+"++) { var "+p+" = "+b+"["+g+"]; ":" for (var "+p+" in "+u+") { ",i+=" var startErrs"+a+" = errors; ";var x=p,_=e.compositeRule;e.compositeRule=f.compositeRule=!0;var P=e.validate(f);f.baseId=S,e.util.varOccurences(P,v)<2?i+=" "+e.util.varReplace(P,v,x)+" ":i+=" var "+v+" = "+x+"; "+P+" ",e.compositeRule=f.compositeRule=_,i+=" if (!"+h+") { for (var "+m+"=startErrs"+a+"; "+m+"<errors; "+m+"++) { vErrors["+m+"].propertyName = "+p+"; }   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { propertyName: '"+y+"' } ",!1!==e.opts.messages&&(i+=" , message: 'property name \\'"+y+"\\' is invalid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),c&&(i+=" break; "),i+=" } }"}return c&&(i+="  if ("+d+" == errors) {"),i}),qn),required:(Bn||(Bn=1,Un=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+a,f=e.opts.$data&&o&&o.$data;f&&(i+=" var schema"+a+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ");var h="schema"+a;if(!f)if(o.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var p=[],g=o;if(g)for(var m,y=-1,v=g.length-1;y<v;){m=g[y+=1];var b=e.schema.properties[m];b&&(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0||!1===b:e.util.schemaHasRules(b,e.RULES.all))||(p[p.length]=m)}}else p=o;if(f||p.length){var w=e.errorPath,S=f||p.length>=e.opts.loopRequired,x=e.opts.ownProperties;if(c)if(i+=" var missing"+a+"; ",S){f||(i+=" var "+h+" = validate.schema"+n+"; ");var _="' + "+(k="schema"+a+"["+(C="i"+a)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,k,e.opts.jsonPointers)),i+=" var "+d+" = true; ",f&&(i+=" if (schema"+a+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+a+")) "+d+" = false; else {"),i+=" for (var "+C+" = 0; "+C+" < "+h+".length; "+C+"++) { "+d+" = "+u+"["+h+"["+C+"]] !== undefined ",x&&(i+=" &&   Object.prototype.hasOwnProperty.call("+u+", "+h+"["+C+"]) "),i+="; if (!"+d+") break; } ",f&&(i+="  }  "),i+="  if (!"+d+") {   ",(F=F||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+_+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+_+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var P=i;i=F.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+P+"]); ":i+=" validate.errors = ["+P+"]; return false; ":i+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else{i+=" if ( ";var F,j=p;if(j)for(var C=-1,E=j.length-1;C<E;)O=j[C+=1],C&&(i+=" || "),i+=" ( ( "+(D=u+(L=e.util.getProperty(O)))+" === undefined ",x&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(O)+"') "),i+=") && (missing"+a+" = "+e.util.toQuotedString(e.opts.jsonPointers?O:L)+") ) ";i+=") {  ",_="' + "+(k="missing"+a)+" + '",e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,k,!0):w+" + "+k),(F=F||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+_+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+_+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",P=i,i=F.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+P+"]); ":i+=" validate.errors = ["+P+"]; return false; ":i+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else if(S){var k;f||(i+=" var "+h+" = validate.schema"+n+"; "),_="' + "+(k="schema"+a+"["+(C="i"+a)+"]")+" + '",e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,k,e.opts.jsonPointers)),f&&(i+=" if ("+h+" && !Array.isArray("+h+")) {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+_+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+_+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+h+" !== undefined) { "),i+=" for (var "+C+" = 0; "+C+" < "+h+".length; "+C+"++) { if ("+u+"["+h+"["+C+"]] === undefined ",x&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", "+h+"["+C+"]) "),i+=") {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+_+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+_+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",f&&(i+="  }  ")}else{var I=p;if(I)for(var O,A=-1,T=I.length-1;A<T;){O=I[A+=1];var L=e.util.getProperty(O),D=(_=e.util.escapeQuotes(O),u+L);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,O,e.opts.jsonPointers)),i+=" if ( "+D+" === undefined ",x&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(O)+"') "),i+=") {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+_+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+_+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=w}else c&&(i+=" if (true) {");return i}),Un),uniqueItems:(Rn||(Rn=1,Mn=function(e,t,r){var i,a=" ",s=e.level,o=e.dataLevel,n=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),f="valid"+s,h=e.opts.$data&&n&&n.$data;if(h?(a+=" var schema"+s+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",i="schema"+s):i=n,(n||h)&&!1!==e.opts.uniqueItems){h&&(a+=" var "+f+"; if ("+i+" === false || "+i+" === undefined) "+f+" = true; else if (typeof "+i+" != 'boolean') "+f+" = false; else { "),a+=" var i = "+d+".length , "+f+" = true , j; if (i > 1) { ";var p=e.schema.items&&e.schema.items.type,g=Array.isArray(p);if(!p||"object"==p||"array"==p||g&&(p.indexOf("object")>=0||p.indexOf("array")>=0))a+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+d+"[i], "+d+"[j])) { "+f+" = false; break outer; } } } ";else{a+=" var itemIndices = {}, item; for (;i--;) { var item = "+d+"[i]; ";var m="checkDataType"+(g?"s":"");a+=" if ("+e.util[m](p,"item",e.opts.strictNumbers,!0)+") continue; ",g&&(a+=" if (typeof item == 'string') item = '\"' + item; "),a+=" if (typeof itemIndices[item] == 'number') { "+f+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}a+=" } ",h&&(a+="  }  "),a+=" if (!"+f+") {   ";var y=y||[];y.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(a+=" , schema:  ",a+=h?"validate.schema"+l:""+n,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var v=a;a=y.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+v+"]); ":a+=" validate.errors = ["+v+"]; return false; ":a+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",u&&(a+=" else { ")}else u&&(a+=" if (true) { ");return a}),Mn),validate:Go()}),Nn),t=Eo().toHash;return Vn=function(){var r=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],i=["type","$comment"];return r.all=t(i),r.types=t(["number","integer","string","array","object","boolean","null"]),r.forEach((function(t){t.rules=t.rules.map((function(t){var a;if("object"==typeof t){var s=Object.keys(t)[0];a=t[s],t=s,a.forEach((function(e){i.push(e),r.all[e]=!0}))}return i.push(t),r.all[t]={keyword:t,code:e[t],implements:a}})),r.all.$comment={keyword:"$comment",code:e.$comment},t.type&&(r.types[t.type]=t)})),r.keywords=t(i.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),r.custom={},r},Vn}(),n=function(){if(Hn)return Qn;Hn=1;var e=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];return Qn=function(t,r){for(var i=0;i<r.length;i++){t=JSON.parse(JSON.stringify(t));var a,s=r[i].split("/"),o=t;for(a=1;a<s.length;a++)o=o[s[a]];for(a=0;a<e.length;a++){var n=e[a],l=o[n];l&&(o[n]={anyOf:[l,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return t}}(),l=Eo();ll=p,p.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var i=this._addSchema(e);r=i.validate||this._compile(i)}var a=r(t);return!0!==r.$async&&(this.errors=r.errors),a},p.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},p.prototype.addSchema=function(e,r,i,a){if(Array.isArray(e)){for(var s=0;s<e.length;s++)this.addSchema(e[s],void 0,i,a);return this}var o=this._getId(e);if(void 0!==o&&"string"!=typeof o)throw new Error("schema id must be string");return w(this,r=t.normalizeId(r||o)),this._schemas[r]=this._addSchema(e,i,a,!0),this},p.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},p.prototype.validateSchema=function(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(r=r||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(d)?d:void 0,e._opts.defaultMeta}(this),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var i=this.validate(r,e);if(!i&&t){var a="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(a);this.logger.error(a)}return i},p.prototype.getSchema=function(r){var a=g(this,r);switch(typeof a){case"object":return a.validate||this._compile(a);case"string":return this.getSchema(a);case"undefined":return function(r,a){var s=t.schema.call(r,{schema:{}},a);if(s){var o=s.schema,n=s.root,l=s.baseId,c=e.call(r,o,n,void 0,l);return r._fragments[a]=new i({ref:a,fragment:!0,schema:o,root:n,baseId:l,validate:c}),c}}(this,r)}},p.prototype.removeSchema=function(e){if(e instanceof RegExp)return m(this,this._schemas,e),m(this,this._refs,e),this;switch(typeof e){case"undefined":return m(this,this._schemas),m(this,this._refs),this._cache.clear(),this;case"string":var r=g(this,e);return r&&this._cache.del(r.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var i=this._opts.serialize,a=i?i(e):e;this._cache.del(a);var s=this._getId(e);s&&(s=t.normalizeId(s),delete this._schemas[s],delete this._refs[s])}return this},p.prototype.addFormat=function(e,t){return"string"==typeof t&&(t=new RegExp(t)),this._formats[e]=t,this},p.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,i=void 0===t.dataVar?"data":t.dataVar,a="",s=0;s<e.length;s++){var o=e[s];o&&(a+=i+o.dataPath+" "+o.message+r)}return a.slice(0,-r.length)},p.prototype._addSchema=function(e,r,a,s){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var o=this._opts.serialize,n=o?o(e):e,l=this._cache.get(n);if(l)return l;s=s||!1!==this._opts.addUsedSchema;var c=t.normalizeId(this._getId(e));c&&s&&w(this,c);var u,d=!1!==this._opts.validateSchema&&!r;d&&!(u=c&&c==t.normalizeId(e.$schema))&&this.validateSchema(e,!0);var f=t.ids.call(this,e),h=new i({id:c,schema:e,localRefs:f,cacheKey:n,meta:a});return"#"!=c[0]&&s&&(this._refs[c]=h),this._cache.put(n,h),d&&u&&this.validateSchema(e,!0),h},p.prototype._compile=function(t,r){if(t.compiling)return t.validate=s,s.schema=t.schema,s.errors=null,s.root=r||s,!0===t.schema.$async&&(s.$async=!0),s;var i,a;t.compiling=!0,t.meta&&(i=this._opts,this._opts=this._metaOpts);try{a=e.call(this,t.schema,r,t.localRefs)}catch(e){throw delete t.validate,e}finally{t.compiling=!1,t.meta&&(this._opts=i)}return t.validate=a,t.refs=a.refs,t.refVal=a.refVal,t.root=a.root,a;function s(){var e=t.validate,r=e.apply(this,arguments);return s.errors=e.errors,r}},p.prototype.compileAsync=function(){if(Wn)return Kn;Wn=1;var e=zo().MissingRef;return Kn=function t(r,i,a){var s=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof i&&(a=i,i=void 0);var o=n(r).then((function(){var e=s._addSchema(r,void 0,i);return e.validate||l(e)}));return a&&o.then((function(e){a(null,e)}),a),o;function n(e){var r=e.$schema;return r&&!s.getSchema(r)?t.call(s,{$ref:r},!0):Promise.resolve()}function l(t){try{return s._compile(t)}catch(r){if(r instanceof e)return function(e){var r=e.missingSchema;if(c(r))throw new Error("Schema "+r+" is loaded but "+e.missingRef+" cannot be resolved");var a=s._loadingSchemas[r];return a||(a=s._loadingSchemas[r]=s._opts.loadSchema(r)).then(o,o),a.then((function(e){if(!c(r))return n(e).then((function(){c(r)||s.addSchema(e,r,void 0,i)}))})).then((function(){return l(t)}));function o(){delete s._loadingSchemas[r]}function c(e){return s._refs[e]||s._schemas[e]}}(r);throw r}}},Kn}();var c=function(){if(ol)return sl;ol=1;var e=/^[a-z_$][a-z0-9_$-]*$/i,t=(Yn||(Yn=1,Xn=function(e,t,r){var i,a,s=" ",o=e.level,n=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,f="data"+(n||""),h="valid"+o,p="errs__"+o,g=e.opts.$data&&l&&l.$data;g?(s+=" var schema"+o+" = "+e.util.getData(l.$data,n,e.dataPathArr)+"; ",a="schema"+o):a=l;var m,y,v,b,w,S=this,x="definition"+o,_=S.definition,P="";if(g&&_.$data){w="keywordValidate"+o;var F=_.validateSchema;s+=" var "+x+" = RULES.custom['"+t+"'].definition; var "+w+" = "+x+".validate;"}else{if(!(b=e.useCustomRule(S,l,e.schema,e)))return;a="validate.schema"+c,w=b.code,m=_.compile,y=_.inline,v=_.macro}var j=w+".errors",C="i"+o,E="ruleErr"+o,k=_.async;if(k&&!e.async)throw new Error("async keyword in sync schema");if(y||v||(s+=j+" = null;"),s+="var "+p+" = errors;var "+h+";",g&&_.$data&&(P+="}",s+=" if ("+a+" === undefined) { "+h+" = true; } else { ",F&&(P+="}",s+=" "+h+" = "+x+".validateSchema("+a+"); if ("+h+") { ")),y)_.statements?s+=" "+b.validate+" ":s+=" "+h+" = "+b.validate+"; ";else if(v){var I=e.util.copy(e);P="",I.level++;var O="valid"+I.level;I.schema=b.validate,I.schemaPath="";var A=e.compositeRule;e.compositeRule=I.compositeRule=!0;var T=e.validate(I).replace(/validate\.schema/g,w);e.compositeRule=I.compositeRule=A,s+=" "+T}else{($=$||[]).push(s),s="",s+="  "+w+".call( ",e.opts.passContext?s+="this":s+="self",m||!1===_.schema?s+=" , "+f+" ":s+=" , "+a+" , "+f+" , validate.schema"+e.schemaPath+" ",s+=" , (dataPath || '')",'""'!=e.errorPath&&(s+=" + "+e.errorPath);var L=n?"data"+(n-1||""):"parentData",D=n?e.dataPathArr[n]:"parentDataProperty",q=s+=" , "+L+" , "+D+" , rootData )  ";s=$.pop(),!1===_.errors?(s+=" "+h+" = ",k&&(s+="await "),s+=q+"; "):s+=k?" var "+(j="customErrors"+o)+" = null; try { "+h+" = await "+q+"; } catch (e) { "+h+" = false; if (e instanceof ValidationError) "+j+" = e.errors; else throw e; } ":" "+j+" = null; "+h+" = "+q+"; "}if(_.modifying&&(s+=" if ("+L+") "+f+" = "+L+"["+D+"];"),s+=""+P,_.valid)d&&(s+=" if (true) { ");else{var $;s+=" if ( ",void 0===_.valid?(s+=" !",s+=v?""+O:""+h):s+=" "+!_.valid+" ",s+=") { ",i=S.keyword,($=$||[]).push(s),s="",($=$||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(i||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+S.keyword+"' } ",!1!==e.opts.messages&&(s+=" , message: 'should pass \""+S.keyword+"\" keyword validation' "),e.opts.verbose&&(s+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),s+=" } "):s+=" {} ";var U=s;s=$.pop(),!e.compositeRule&&d?e.async?s+=" throw new ValidationError(["+U+"]); ":s+=" validate.errors = ["+U+"]; return false; ":s+=" var err = "+U+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var B=s;s=$.pop(),y?_.errors?"full"!=_.errors&&(s+="  for (var "+C+"="+p+"; "+C+"<errors; "+C+"++) { var "+E+" = vErrors["+C+"]; if ("+E+".dataPath === undefined) "+E+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+E+".schemaPath === undefined) { "+E+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(s+=" "+E+".schema = "+a+"; "+E+".data = "+f+"; "),s+=" } "):!1===_.errors?s+=" "+B+" ":(s+=" if ("+p+" == errors) { "+B+" } else {  for (var "+C+"="+p+"; "+C+"<errors; "+C+"++) { var "+E+" = vErrors["+C+"]; if ("+E+".dataPath === undefined) "+E+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+E+".schemaPath === undefined) { "+E+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(s+=" "+E+".schema = "+a+"; "+E+".data = "+f+"; "),s+=" } } "):v?(s+="   var err =   ",!1!==e.createErrors?(s+=" { keyword: '"+(i||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+S.keyword+"' } ",!1!==e.opts.messages&&(s+=" , message: 'should pass \""+S.keyword+"\" keyword validation' "),e.opts.verbose&&(s+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?s+=" throw new ValidationError(vErrors); ":s+=" validate.errors = vErrors; return false; ")):!1===_.errors?s+=" "+B+" ":(s+=" if (Array.isArray("+j+")) { if (vErrors === null) vErrors = "+j+"; else vErrors = vErrors.concat("+j+"); errors = vErrors.length;  for (var "+C+"="+p+"; "+C+"<errors; "+C+"++) { var "+E+" = vErrors["+C+"]; if ("+E+".dataPath === undefined) "+E+".dataPath = (dataPath || '') + "+e.errorPath+";  "+E+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(s+=" "+E+".schema = "+a+"; "+E+".data = "+f+"; "),s+=" } } else { "+B+" } "),s+=" } ",d&&(s+=" else { ")}return s}),Xn),r=function(){if(al)return il;al=1;var e=nl;return il={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:e.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:e.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}}();return sl={add:function(r,i){var a=this.RULES;if(a.keywords[r])throw new Error("Keyword "+r+" is already defined");if(!e.test(r))throw new Error("Keyword "+r+" is not a valid identifier");if(i){this.validateKeyword(i,!0);var s=i.type;if(Array.isArray(s))for(var o=0;o<s.length;o++)l(r,s[o],i);else l(r,s,i);var n=i.metaSchema;n&&(i.$data&&this._opts.$data&&(n={anyOf:[n,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),i.validateSchema=this.compile(n,!0))}function l(e,r,i){for(var s,o=0;o<a.length;o++){var n=a[o];if(n.type==r){s=n;break}}s||(s={type:r,rules:[]},a.push(s));var l={keyword:e,definition:i,custom:!0,code:t,implements:i.implements};s.rules.push(l),a.custom[e]=l}return a.keywords[r]=a.all[r]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var i=t[r].rules,a=0;a<i.length;a++)if(i[a].keyword==e){i.splice(a,1);break}return this},validate:function e(t,i){e.errors=null;var a=this._validateKeyword=this._validateKeyword||this.compile(r,!0);if(a(t))return!0;if(e.errors=a.errors,i)throw new Error("custom keyword definition is invalid: "+this.errorsText(a.errors));return!1}},sl}();p.prototype.addKeyword=c.add,p.prototype.getKeyword=c.get,p.prototype.removeKeyword=c.remove,p.prototype.validateKeyword=c.validate;var u=zo();p.ValidationError=u.Validation,p.MissingRefError=u.MissingRef,p.$dataMetaSchema=n;var d="http://json-schema.org/draft-07/schema",f=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],h=["/properties"];function p(e){if(!(this instanceof p))return new p(e);e=this._opts=l.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:S,warn:S,error:S};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=s(e.format),this._cache=e.cache||new r,this._loadingSchemas={},this._compilations=[],this.RULES=o(),this._getId=function(e){switch(e.schemaId){case"auto":return b;case"id":return y;default:return v}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=a),this._metaOpts=function(e){for(var t=l.copy(e._opts),r=0;r<f.length;r++)delete t[f[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),e.keywords&&function(e){for(var t in e._opts.keywords){var r=e._opts.keywords[t];e.addKeyword(t,r)}}(this),function(e){var t;if(e._opts.$data&&(t=dl,e.addMetaSchema(t,t.$id,!0)),!1!==e._opts.meta){var r=nl;e._opts.$data&&(r=n(r,h)),e.addMetaSchema(r,d,!0),e._refs["http://json-schema.org/schema"]=d}}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(t)if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function g(e,r){return r=t.normalizeId(r),e._schemas[r]||e._refs[r]||e._fragments[r]}function m(e,t,r){for(var i in t){var a=t[i];a.meta||r&&!r.test(i)||(e._cache.del(a.cacheKey),delete t[i])}}function y(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function v(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function b(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function w(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function S(){}return ll}(),hl=go(fl),pl={exports:{}},gl=function(){if(ul)return pl.exports;function e(e,t,r,i){var a,s=null==(a=i)||"number"==typeof a||"boolean"==typeof a?i:r(i),o=t.get(s);return void 0===o&&(o=e.call(this,i),t.set(s,o)),o}function t(e,t,r){var i=Array.prototype.slice.call(arguments,3),a=r(i),s=t.get(a);return void 0===s&&(s=e.apply(this,i),t.set(a,s)),s}function r(e,t,r,i,a){return r.bind(t,e,i,a)}function i(i,a){return r(i,this,1===i.length?e:t,a.cache.create(),a.serializer)}function a(){return JSON.stringify(arguments)}function s(){this.cache=Object.create(null)}ul=1,s.prototype.has=function(e){return e in this.cache},s.prototype.get=function(e){return this.cache[e]},s.prototype.set=function(e,t){this.cache[e]=t};var o={create:function(){return new s}};return pl.exports=function(e,t){var r=t&&t.cache?t.cache:o,s=t&&t.serializer?t.serializer:a;return(t&&t.strategy?t.strategy:i)(e,{cache:r,serializer:s})},pl.exports.strategies={variadic:function(e,i){return r(e,this,t,i.cache.create(),i.serializer)},monadic:function(t,i){return r(t,this,e,i.cache.create(),i.serializer)}},pl.exports}();const ml=go(gl)((async t=>{const r=t.featureCollection;let i,a;if(void 0!==r?.layers?.[0]){const e=r.layers[0];i=e.featureSet,a=e.layerDefinition}else a=t.layerDefinition;const s={};if(void 0!==i){const t=await async function(){if(Ys)return await window.$arcgis.import("esri/rest/support/FeatureSet");const t=await Promise.resolve().then((function(){return e(require("@arcgis/core/rest/support/FeatureSet"))}));return Js(t)?t.default:t}();if(s.source=t.fromJSON(i).features,void 0!==a?.fields){const t=await async function(){if(Ys)return await window.$arcgis.import("esri/layers/support/Field");const t=await Promise.resolve().then((function(){return e(require("@arcgis/core/layers/support/Field"))}));return Js(t)?t.default:t}();s.fields=a.fields.map((e=>t.fromJSON(e)))}void 0!==a?.objectIdField&&(s.objectIdField=a.objectIdField);const r=await Zs();if(void 0!==a?.geometryType){const e=r.fromJSON({geometryType:a.geometryType});void 0!==e?.type&&"extent"!==e?.type&&(s.geometryType=e.type)}void 0!==a?.spatialReference&&(s.spatialReference=a.spatialReference)}else s.id=t.id,void 0!==a?.id&&(s.layerId=a.id),void 0!==t.url&&(s.url=t.url),void 0!==t.itemId&&void 0!==a?.id&&(s.portalItem={id:t.itemId});if(void 0!==a){const t=a.drawingInfo;if(void 0!==t?.renderer){const r=await async function(){if(Ys)return await window.$arcgis.import("esri/renderers/support/jsonUtils");const t=await Promise.resolve().then((function(){return e(require("@arcgis/core/renderers/support/jsonUtils"))}));return Js(t)?t.default:t}();s.renderer=r.fromJSON(t.renderer)}}return await async function(t){return new(await async function(){if(Ys)return await window.$arcgis.import("esri/layers/FeatureLayer");const t=await Promise.resolve().then((function(){return e(require("@arcgis/core/layers/FeatureLayer"))}));return Js(t)?t.default:t}())(t)}(s)}));async function yl(e,t){const r=ro(e);let i=[];if(void 0!==r){await r.load();const e=!0===t&&void 0!==r?.popupTemplate?.fieldInfos;i=r.fields.map((t=>{const i=t.toJSON();if(e){const e=r.popupTemplate?.fieldInfos?.find((e=>e.fieldName?.toLowerCase()===t.name.toLowerCase()))?.label;void 0!==e&&e!==t.name&&(i.alias=e)}return i}))}return i}function vl(e){return[s,i].includes(e.type)}function bl(e){return e.filter((e=>"esriFieldTypeDate"===e.type)).map((e=>e.name))}function wl(e){return e.filter((e=>function(e){return[a,r,s,i].includes(e.type)}(e))).map((e=>e.name))}function Sl(e,t){const r=[],i=function(e){return void 0!==e&&"type"in e&&"subtype-group"===e.type}(e)?e.subtypes:e[t];return void 0!==i?.[0]&&i.forEach((e=>{const{name:t,domains:i}=e;let a="id"in e?e.id:void 0;!a&&"code"in e&&(a=e.code);const s=Object.entries(i??{}),o=[],n=s?.filter((([e,t])=>"coded-value"===t?.type)),l=n?.map((([e,r])=>{let i={fieldName:e,name:t,codedValues:o};if(r&&"codedValues"in r){const t=r.codedValues.map((({code:e,name:t})=>({name:t,code:e})));i={fieldName:e,name:r.name,codedValues:t}}return i}));r.push({id:a??"",name:t,domains:l})})),0===r.length?void 0:r}async function xl(e){const{queryObject:t,fieldToMatch:r,returnUndefinedIfNotFound:i}=e,a=await yl(t);let s=a.find((e=>r===e.name));s||(s=a.find((e=>r.toUpperCase()===e.name.toUpperCase())));const o=i?"":r;return s?.name??o}async function _l(e){const{fieldsList:t,queryObject:r,returnUndefinedIfNotFound:i}=e;let a=t;return void 0!==a&&(a=await Promise.all(a.map((async e=>await xl({queryObject:r,fieldToMatch:e,returnUndefinedIfNotFound:i}))))),a}function Pl(e){let t=!1;switch(qs(e?.series)){case $:case L:t=0===(e?.series?.[0]?.x?.trim()?.length??0);break;case k:{const r=e?.series;t=0===(r?.[0]?.x?.length??0)||0===(r?.[0]?.y?.length??0);break}case I:{const r=e?.series;t=Xs(r)===Es?0===(r?.[0]?.query?.outStatistics?.length??0):0===(r?.[0]?.x?.length??0)||r?.[0]?.x===X;break}case D:{const r=e?.series;t=0===[r?.[0]?.y].flat().length||""===r?.[0]?.y;break}case q:case T:case A:{const r=e?.series;t=Xs(r)===_s?0===(r?.[0]?.query?.outStatistics?.length??0):0===(r?.[0]?.x?.trim()?.length??0);break}}return t}function Fl(e){return e.type===D}function jl(e){return e.type===A}function Cl(e){return e.type===T}!function(){const e=new hl({allErrors:!0})}();const El=e=>qs(e)===A;var kl;async function Il(e,t){const r=[];return await Promise.all(e.map((async e=>{if(!Ms(e)){const i=Rs(e,!1);if(void 0!==i.fieldToSort){const e=await xl({queryObject:t,fieldToMatch:i.fieldToSort});void 0!==e&&r.push(void 0===i.orderBy?e:`${e} ${i.orderBy}`)}}}))),r}function Ol(e){let t;switch(e){case"mean":t=H;break;case"median":t=K;break;case"category":t=W}return t}function Al(e){let t,r=e.orderOptions?.orderByFields?.[0];if(e.series?.length>0){const i=qs(e.series),a=Xs(e.series);if(i!==I&&a!==_s&&(r=r??e.series[0].x),r&&!Ms(r)){const{fieldToSort:i,orderBy:a}=Rs(r);let s;i===e.series[0].x||i===X?s=W:"y"in e.series[0]&&i===e.series[0].y&&(s=Q),void 0!==s&&(t={orderType:s,orderBy:"DESC"===a?.toUpperCase()?M:B})}}return t}async function Tl(e,t){let r=Zr(e);return r=function(e){const t=Zr(e);return oi(e.axes)||(t.axes=e.axes?.map((e=>{const t=e;return delete t.calculateAutomaticMaximum,delete t.calculateAutomaticMinimum,void 0!==t.title?.content.font?.style&&(t.title.content.font.style=t.title.content.font.style.toLowerCase()),t}))),t}(r),r=function(e){const t=Zr(e);return oi(e.series)||(t.series=e.series.map(((t,r)=>{const i=t;void 0===t.id&&(i.id=`Series ${Date.now()}-${r}`);const a=qs(e.series,r);return a!==T&&a!==A&&a!==q||"median"!==i.query?.outStatistics?.[0]?.statisticType||(i.query.outStatistics[0].statisticType=f),a===T&&void 0!==i.multipleBarType&&(i.stackedType=i.multipleBarType,delete i.multipleBarType),a===I&&void 0!==i.sliceGrouping&&(i.sliceGrouping.sliceId=Li,void 0!==i.sliceGrouping.groupName&&(i.sliceGrouping={...i.sliceGrouping,label:i.sliceGrouping.groupName},delete i.sliceGrouping.groupName),void 0!==i.sliceGrouping.groupSliceSymbol&&(i.sliceGrouping={...i.sliceGrouping,fillSymbol:i.sliceGrouping.groupSliceSymbol},delete i.sliceGrouping.groupSliceSymbol)),i}))),t}(r),r=await async function(e,t){const r={...e};let i=t;if(!i){const t=function(e){return e&&"iLayer"in e&&e.iLayer}(e)?e.iLayer:e.dataSource?.layer;t&&(i=await ml(t))}if(i){const t=Xs(r.series),a=qs(r.series),s=r.series&&r.series.length>0&&""===r.series[0].x.trim()||a===O&&!function(e){return"featureGauge"===e.subType}(e)||t===Es||t===_s||t===ks||t===Ts||t===Is||t===Ls,o=a===k||t===ws||t===Fs||t===ks||t===Ts||t===Os||t===Ds||t===js;if(r.series=await Promise.all(e.series.map((async e=>{const r={...e};if(s||(r.x=await xl({queryObject:i,fieldToMatch:e.x})),"y"in r&&o){const e=r.y;if(Array.isArray(e)){const t=await _l({fieldsList:e,queryObject:i});void 0!==t&&"y"in r&&(r.y=t)}else"y"in r&&"string"==typeof e&&(r.y=await xl({queryObject:i,fieldToMatch:e}))}if(void 0!==e.query){let{where:a,groupByFieldsForStatistics:s,outStatistics:o}=e.query;if(s=await _l({fieldsList:s,queryObject:i}),void 0!==o&&(o=await Promise.all(o.map((async e=>{const t={...e};return t.onStatisticField=await xl({queryObject:i,fieldToMatch:e.onStatisticField}),t})))),void 0!==a&&t===Ps){const t=Hs(e.query?.where),r=Ks({where:e.query?.where,normalize:!1,escape:!1});a=`${await xl({queryObject:i,fieldToMatch:t})}=${r}`}void 0!==r.query&&(void 0!==a&&(r.query.where=a),void 0!==s&&(r.query.groupByFieldsForStatistics=s),void 0!==o&&(r.query.outStatistics=o))}return r}))),void 0!==r.series[0]?.query){const e=r.series[0].query;let{orderByFields:t}=e;void 0!==t&&t.length>0&&(t=await Il(t,i),t.length>0&&void 0!==e.orderByFields&&(r.series[0].query.orderByFields=t))}if(void 0!==r.orderOptions?.orderByFields){let{orderByFields:e}=r.orderOptions;void 0!==e&&e.length>0&&(e=await Il(e,i),e.length>0&&(r.orderOptions.orderByFields=e))}if(a===O&&void 0!==e.axes?.[0]){const{minimumFromField:t,maximumFromField:r}=e.axes[0];if(void 0!==t){const r="string"==typeof t?t:t.onStatisticField,a=await xl({queryObject:i,fieldToMatch:r});let s=t;"string"==typeof e.axes[0].minimumFromField?s=a:"object"==typeof t&&(s={...t,onStatisticField:a}),e.axes[0].minimumFromField=s}if(void 0!==r){const t="string"==typeof r?r:r.onStatisticField,a=await xl({queryObject:i,fieldToMatch:t});let s=r;"string"==typeof e.axes[0].maximumFromField?s=a:"object"==typeof r&&(s={...r,onStatisticField:a}),e.axes[0].maximumFromField=s}}}return r}(r,t),r=function(e){const t=Zr(e);if(!oi(e.series)&&qs(e.series)===D){const r=t.series[0];void 0!==r.showOutliers&&(void 0===e.showOutliers&&(t.showOutliers=r.showOutliers),delete r.showOutliers),void 0!==r.standardizeValues&&(void 0===e.standardizeValues&&(t.standardizeValues=r.standardizeValues),delete r.standardizeValues),void 0!==r.showMean&&(void 0===e.showMean&&(t.showMean=r.showMean),delete r.showMean)}return t}(r),r=function(e){const t=Zr(e);if(!oi(t.series)&&qs(e.series)===D){if(void 0===t.orderOptions?.data){const r=function(e){const t={orderType:W,orderBy:B},r=e.query?.orderByFields?.[0];if(void 0!==r){const{outStatisticFieldName:i,statisticType:a}=e.query?.outStatistics?.[0]??{},s=Rs(r);void 0!==i&&s.fieldToSort===i&&void 0!==a&&(a===u||"mean"===a?t.orderType=H:a===f&&(t.orderType=K)),t.orderBy=s.orderBy??B}return t}(e.series[0]);void 0!==r.orderType&&(t.orderOptions??={},t.orderOptions.data={orderType:r.orderType,orderBy:r.orderBy})}if(t.series=e.series.map((e=>{const t=e;return oi(t.x?.trim())&&(t.x=Di),delete t.query?.orderByFields,t})),function(e){let t=!1;const r=Array.from(new Set(e.series.map((e=>e.type))));if(2===r.length&&r.includes(D)&&r.includes(A)){const r=e.series.find((e=>e.type===A));t=void 0!==r?.query?.outStatistics?.[0]}return t}(t)){t.showMean=!0;const e=t.series.find((e=>e.type===D));t.series.forEach((t=>{t.type===A&&(delete t.query?.groupByFieldsForStatistics,delete t.query?.outStatistics,delete t.query?.orderByFields,e&&(t.y=e.y))}))}t.series=e.series.map((e=>{const t=e;return delete t.query?.outStatistics,t}))}return t}(r),r=function(e){const t=Zr(e);return void 0===t.legend||Number.isFinite(t.legend.maxHeight)||(t.legend.maxHeight=Number.NaN),t}(r),r=function(e){const t=Zr(e),r=new Set,i=t.id??"";return r.add(i),t.series.forEach((e=>{let t=e.id;r.has(t)&&(t=`${t}_${Date.now()}`,e.id=t),r.add(t)})),t}(r),r}function Ll(e){let t=Zr(e);return t=function(e){const t=Zr(e);if(!oi(e.series)&&void 0!==t.axes?.[0]&&qs(e.series)===O&&void 0!==e.axes?.[0]){const r=e.axes[0];void 0!==r.ticks&&Object.hasOwn(r.ticks,"spacing")&&delete r.ticks.spacing,t.axes[0]=r}return t}(t),t}function Dl(e){let t=Zr(e);return t=function(e){const t=Zr(e),{extent:r}=t.series[0]?.query??{};return void 0!==r&&(t.dataFilters={...t.dataFilters,geometry:r},t.series.forEach((e=>{"query"in e&&"extent"in e.query&&delete e.query.extent}))),t}(t),t}function ql(e){let t=Zr(e);return t=function(e){const t=Zr(e);return oi(e.series)||(function(e){const t=[T,A,$,D],r=qs(e?.series);return void 0!==r&&t.includes(r)}(e)&&void 0===e.rotated&&(t.rotated=e.series[0].rotated??!1),t.series.forEach((e=>{void 0!==e.rotated&&delete e.rotated}))),t}(t),t}function $l(e){let t=Zr(e);return t=function(e){const t=Zr(e),r=e.dataSource;return"dataSource"in t&&!oi(r)&&("featureLayer"===r.type&&void 0!==t.dataSource&&(t.dataSource.type="layer"),"featureLayer"in r&&(t.dataSource.layer=r.featureLayer,delete t.dataSource.featureLayer)),t}(t),t}function Ul(e){let t=Zr(e);return t=function(e){const t=Zr(e);if("dataSource"in e){const r=e.dataSource;if(void 0!==r.filter&&""!==r.filter.trim()){const e=ao([r.filter,t.dataFilters?.where]);t.dataFilters={...t.dataFilters,where:e},delete t.dataSource.filter}}return t}(t),t}function Bl(e){let t=Zr(e);return t=function(e){const t=Zr(e);if(!oi(e.series)&&qs(e.series)===I){const e=t.series[0];if("originalValue"===e.sortLabelsBy)t.sortLabelsBy=e.sortLabelsBy;else if(void 0!==e.sortLabelsBy&&void 0===t.orderOptions?.data){const e=Al(t);void 0!==e&&(t.orderOptions??={},t.orderOptions.data=e)}e.sortLabelsBy&&delete e.sortLabelsBy}return t}(t),t}function Ml(e){let t=Zr(e);return t=function(e){const t=Zr(e),r=e.sortOptions?.sortSeriesBy;return void 0===t.orderOptions&&"string"==typeof r&&(t.orderOptions??={},t.orderOptions.series={orderBy:"DESC"===r?M:B}),t}(t),t}function Rl(e){let t=Zr(e);return t=function(e){const t=Zr(e);return void 0===t.colorMatch&&void 0!==t.series[0].colorType&&(t.colorMatch="colorMatch"===t.series[0].colorType),t.series.forEach((e=>{void 0!==e.colorType&&delete e.colorType})),t}(t),t}function Nl(e){return function(e){const t=Zr(e);return t.axes?.forEach((e=>{void 0!==e&&void 0!==e.scrollbarVisible&&void 0===e.scrollbar?.visible&&(e.scrollbar={...e.scrollbar,visible:e.scrollbarVisible},delete e.scrollbarVisible)})),t}(e)}function zl(e){let t=Zr(e);return e.series[0]?.type===D&&(t=function(e){const t=Zr(e);if(void 0!==t.sortDataBy){if(void 0===t.orderOptions?.data){const r=e.sortDataBy,i=Ol(r?.sortType);void 0!==i&&(t.orderOptions??={},t.orderOptions.data={orderType:i,orderBy:r?.sortOrder??B})}delete t.sortDataBy}return t}(t)),t}function Vl(e){return function(e){const t=Zr(e);return oi(e.series)||(function(e){const t=[T,A,$,q],r=qs(e?.series);return void 0!==r&&t.includes(r)}(e)&&void 0===e.stackedType&&(t.stackedType=e.series[0].stackedType??"sideBySide"),t.series.forEach((e=>{"stackedType"in e&&delete e.stackedType}))),t}(e)}function Gl(e){return function(e){const t=Zr(e),r=e,i=e,a=e,s=e,o=e;if(t){if(void 0===t.orderOptions?.series&&void 0!==r.sortOptions?.sortSeriesBy&&(t.orderOptions??={},t.orderOptions.series={preferLabel:(n=i.sortLabelsBy??r.sortOptions.sortSeriesBy.sortType,"originalValue"!==n),orderBy:r.sortOptions.sortSeriesBy.sortOrder??B}),"originalValue"===i.sortLabelsBy||!1===s.orderOptions?.data?.preferDataLabel||!1===o.orderOptions?.data?.preferLabel)t.orderOptions?.data&&delete t.orderOptions.data;else if(void 0===t.orderOptions?.data)if(qs(t.series)===D){if(i.sortLabelsBy||void 0!==a.sortOptions?.sortDataBy){const e=Ol(a.sortOptions?.sortDataBy?.sortType);void 0!==e&&(t.orderOptions??={},t.orderOptions.data={orderType:e,orderBy:a.sortOptions?.sortDataBy?.sortOrder??B})}}else{const e=Al(t);void 0!==e&&(t.orderOptions??={},t.orderOptions.data=e)}"sortLabelsBy"in t&&delete t.sortLabelsBy,"sortOptions"in t&&delete t.sortOptions}var n;return t}(e)}function Ql(e){return function(e){const t=Zr(e);return"dataSource"in t&&t.dataSource.layer&&(t.iLayer=t.dataSource.layer,delete t.dataSource),t}(e)}function Hl(e){return function(e){const t=Zr(e);if(t){const e=Xs(t.series);if((e===_s||e===Es)&&void 0===t.orderOptions?.data&&void 0!==t.orderOptions?.orderByFields){const e=Al(t);void 0!==e&&(t.orderOptions??={},t.orderOptions.data=e,delete t.orderOptions.orderByFields)}}return t}(e)}function Kl(e){return function(e){const t=Zr(e);return t.horizontalAxisLabelsBehavior===kl.NONE&&(t.horizontalAxisLabelsBehavior=R),t.verticalAxisLabelsBehavior===kl.NONE&&(t.verticalAxisLabelsBehavior=R),t}(e)}function Wl(e){const{versionsToConvert:r=[],configToUpdate:i}=e;let a=Zr(i);return r.length>0&&void 0!==a&&(a=function(e){const t=Zr(e),r=t.series[0]?.query?.orderByFields;if(void 0!==r&&r.length>0&&void 0===t.orderOptions?.orderByFields){t.orderOptions??={};let i=!0;if(1===r.length){const{fieldToSort:a,orderBy:s}=Rs(r[0]);let o;a===e.series[0].x||a===X?o=W:"y"in e.series[0]&&a===e.series[0].y&&(o=Q),void 0!==o&&(i=!1,void 0===t.orderOptions.data&&(t.orderOptions.data={orderType:o,orderBy:"DESC"===s?.toUpperCase()?M:B}))}i&&(t.orderOptions.orderByFields=r)}return t.series.forEach((e=>{delete e.query?.orderByFields})),t}(a),r.includes(zs)||r.includes(Vs)?(a=function(e){let t=Zr(e);return t=function(e){const t=Zr(e);return void 0!==t?.orderOptions?.orderByFields&&Xs(e.series)===Es&&(t.orderOptions.orderByFields=e?.orderOptions?.orderByFields?.map((e=>{let t=Zr(e);return void 0!==e&&e.includes("arcgis_charts_pie_category_from_fields_name")&&(t=e.replace("arcgis_charts_pie_category_from_fields_name",X)),t}))),t}(t),t}(a),a=Ll(a),a=Dl(a),a=ql(a),a=$l(a),a=Ul(a),a=Bl(a),a=Ml(a),a=Rl(a),a=Nl(a),a=zl(a),a=Vl(a),a=Gl(a),a=Ql(a),a=Hl(a),a=Kl(a)):r.forEach((e=>{if(void 0!==a)switch(e){case"1.0.1":a=Ll(a);break;case"3.4.0":a=Dl(a);break;case"4.0.0":a=ql(a);break;case"4.0.1":a=$l(a);break;case"6.4.0":a=Ul(a);break;case"7.5.1":a=Bl(a);break;case"8.0.0":a=Ml(a);break;case"9.2.0":a=Rl(a);break;case"9.7.0":a=Nl(a);break;case"10.0.0":a=zl(a);break;case"11.0.0":a=Vl(a);break;case"14.0.1":a=Gl(a);break;case"16.0.0":a=Ql(a);break;case"16.1.0":a=Hl(a);break;case"18.0.0":a=Kl(a)}})),a.version=t),a}async function Xl(e,t){let r=e;if(e){const i=ro(t);r=await Tl(e,i);const a=e.version??zs,{versionStatus:s,versions:o}=function(e){let t=N,r=[];var i;if(void 0!==(i=e)&&/^([1-9]\d*|0)(\.(([1-9]\d*)|0)){2}$/u.test(i)&&void 0!==e){Ns.sort(Gs);const i=Gs(e,Ns[Ns.length-1]);if(1===i?t=z:-1===i&&(t=V),t===z||t===N)r.push(e);else{for(let t=Ns.length-2;t>=0;t-=1)if(Gs(e,Ns[t])>=0){r=Ns.slice(t,Ns.length);break}0===r.length&&r.push(zs)}}else t=G,r.push(Vs);return{versionStatus:t,versions:r}}(a);s!==V&&s!==G||(r=Wl({versionsToConvert:o,configToUpdate:r}))}return r}!function(e){e.NONE="none",e.ROTATE="rotate",e.STAGGER="stagger",e.WRAP="wrap"}(kl||(kl={}));const Yl=e=>e.title?.content.text??"",Jl=e=>e.footer?.content.text??"",Zl=e=>e.footer?.visible??!1;class ec extends EventTarget{constructor(){super(...arguments),this.setupFinished=new Promise((e=>{this.resolveSetup=e}))}isSameChartAs(e){const t=e?.getLayer();return void 0!==t&&this._config.id===e?.getChartId()&&this.layerInfo?.layer.id===t.id}getConfig(){return this._config}setConfig(e){this._config=e,this.emitConfigUpdate("setConfig")}getChartType(){return this._chartType}getLayer(){return this.layerInfo?.layer}getChartId(){return this._config.id}setChartId(e){this._config.id=e}getTitleText(){return Yl(this._config)}setTitleText(e){var t,r;t=e,void 0!==(r=this._config).title?r.title.content.text=t:void 0===r.title&&void 0!==t&&(r.title=zi({text:t,visible:!0,font:Ri(ee)})),this.emitConfigUpdate("setTitleText")}getDescriptionText(){return Jl(this._config)}setDescriptionText(e){var t,r;t=e,void 0!==(r=this._config).footer?r.footer.content.text=t:void 0===r.footer&&void 0!==t&&(r.footer=zi({text:t,visible:!0,font:Ri(ae)})),this.emitConfigUpdate("setDescriptionText")}getChartTitleVisibility(){return!!(e=this._config).title&&(e.title.visible??!0);var e}setChartTitleVisibility(e){((e,t)=>{void 0!==t.title?t.title.visible=e:void 0===t.title&&(t.title=zi({text:"",visible:e,font:Ri(ee)}))})(e,this._config),this.emitConfigUpdate("setChartTitleVisibility")}getDescriptionVisibility(){return Zl(this._config)}setDescriptionVisibility(e){((e,t)=>{void 0!==t.footer?t.footer.visible=e:void 0===t.footer&&e!==Zl(t)&&(t.footer=zi({text:"",visible:!0,font:Ri(ae)}))})(e,this._config),this.emitConfigUpdate("setDescriptionVisibility")}getTitleSymbol(){return e=this._config,e.title?.content;var e}setTitleSymbol(e){((e,t)=>{const r=Yl(t);void 0!==t.title&&void 0!==e||(t.title=zi({text:"",visible:!0,font:Ri(ee),type:ee})),void 0!==e&&(t.title.content=e),t.title.content.text=r})(e,this._config),this.emitConfigUpdate("setTitleSymbol")}getDescriptionSymbol(){return e=this._config,e.footer?.content;var e}setDescriptionSymbol(e){((e,t)=>{const r=Jl(t);void 0!==t.footer&&void 0!==e||(t.footer=zi({text:"",visible:!0,font:Ri(ae),type:ae})),void 0!==e&&(t.footer.content=e),t.footer.content.text=r})(e,this._config),this.emitConfigUpdate("setDescriptionSymbol")}getBackgroundColor(){return this._config.background}setBackgroundColor(e){((e,t)=>{t.background=e})(e,this._config),this.emitConfigUpdate("setBackgroundColor")}setSeriesVisibility(e){!function(e,t){if(void 0!==t){const{seriesId:r,overlayType:i,visible:a}=e.detail;let s;switch(i){case"Mean":t.series[0].type===L&&(s=t.series[0].overlays?.mean);break;case"Median":t.series[0].type===L&&(s=t.series[0].overlays?.median);break;case"Standard Deviation":t.series[0].type===L&&(s=t.series[0].overlays?.standardDeviation);break;case"Normal Distribution":t.series[0].type===L&&(s=t.series[0].overlays?.comparisonDistribution);break;case"Trendline":t.series[0].type===k&&(s=t.series[0].overlays?.trendLine);break;default:s=t.series.find((e=>e.id===r))}void 0!==s&&(s.visible=a)}}({detail:e},this._config),this.emitConfigUpdate("setSeriesVisibility")}getSeriesId(e){return((e,t)=>t.series[e]?.id)(e,this._config)}getSeriesIndex(e){return((e,t)=>t.series.findIndex((t=>t.id===e)))(e,this._config)}getSeriesLength(){return this._config.series.length??0}getChartSubType(){return Xs(this._config.series)}setFetchNULLValues(e){((e,t)=>{t.series.forEach((t=>{t.query&&(t.query.fetchNullValues=e)}))})(e,this._config)}getFetchNULLValues(){return this._config.series.some((e=>e.query?.fetchNullValues))}emitConfigUpdate(e){this.dispatchEvent(new CustomEvent("arcgisChartsModelConfigChange",{detail:{config:this._config,functionCalled:e}}))}async loadConfigFromLayer(e){const{layer:t,iLayer:r,config:i}=e;let a=t;if(!a&&r&&(a=await ml(r)),a){const e=await yl(a,!0),{objectIdField:t}=a;this.layerInfo={layer:a,layerFieldsInfo:e,objectIdField:t}}this._config=void 0!==i?await Xl(i):await this.generateDefaultConfig(),r&&(this._config.iLayer=r)}}const tc="esriFieldTypeString",rc="count",ic="sum",ac="no_aggregation",sc="esriSLS",oc="esriSFS",nc="gaugeAxisTick",lc="category",cc="date",uc="chartGuide",dc="scatterSeries",fc="pieSeries",hc="gaugeSeries",pc="lineSeries",gc="barSeries",mc="histogramSeries",yc="boxPlotSeries",vc="comboLineAndBarSeries",bc="none",wc="right",Sc="sideBySide",xc="stacked100",_c="ASC",Pc="DESC",Fc="null",jc="interpolate",Cc="statisticGauge",Ec="arcgis-charts-y-value",kc="arcgis-charts-mean",Ic="arcgis-charts-median",Oc="arcgis-charts-category",Ac="arcgis_charts_pie_from_fields_name",Tc="arcgis_charts_pie_from_fields_value",Lc="arcgis_charts_bar_line_from_fields_name",Dc=(e,t)=>t.series?.[e]?.hideOversizedStackedLabels,qc=(e,t,r)=>{void 0!==r.series?.[t]&&(r.series[t].hideOversizedStackedLabels=e)};async function $c(e){const{config:t,layer:r,xAxisField:i,splitByField:a,layerFieldsInfo:s,aggregationFields:o,aggregationType:n,fetchNullValues:l}=e,c=s.filter((e=>e.name===a)),u=c[0]?.type,d=!0!==l?`${a} IS NOT NULL`:"",f=i&&!0!==l?`${i} IS NOT NULL`:"",{where:h}=t?.dataFilters??{},p={where:ao([h,d,f]),orderByFields:Ms(a)?[]:[`${a} ${_c}`],geometry:t?.dataFilters?.geometry};let g=r;!g&&void 0!==t&&"iLayer"in t&&t.iLayer&&(g=await ml(t.iLayer));let m="";0===o.length?m=g?.objectIdField??"":[m]=o;const y=void 0!==n?`${n}_${m}`:"";let v=await po({queryObject:g,category:t?.series[0].x??"",splitByField:a,queryConfig:p});if(t){const e=t?.series.map((e=>Ks({where:e.query?.where})?.toString()??"")).filter((e=>void 0!==e&&""!==e));v=function(e,t){let r;if(0===t.length)r=e;else{const i=new Map;t.forEach(((e,t)=>{i.set(e,t)})),r=e.slice().sort(((e,t)=>{const r=i.get(e),a=i.get(t);let s=0;return s=void 0===r&&void 0===a?0:void 0===r?1:void 0===a?-1:r-a,s}))}return r}(v,e)}return{categoriesArray:v,fieldName:y,splitByFieldType:u,numericalField:m}}function Uc(e,t){let r=""===t;for(const i of e)if(t===i.name){r=!0;break}return r}function Bc(e,t){const r=wl(e);let i=0===t.length,a=0;for(let e=0;e<t.length;e+=1){for(let s=0;s<r.length;s+=1)if(t[e]===r[s]&&(a+=1),a===t.length){i=!0;break}if(i)break}return i}function Mc(e,t){t.forEach((t=>{Object.getOwnPropertyNames(t.prototype).forEach((r=>{Object.defineProperty(e.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r)||Object.create(null))}))}))}async function Rc(e){const{layerInfo:t,config:r,category:i}=e,{layer:a}=t,{where:s}=r?.dataFilters??{},{fetchNullValues:o}=r?.series?.[0]?.query??{},n={where:ao([s,!0!==o?`${i} IS NOT NULL`:""]),orderByFields:[],geometry:r?.dataFilters?.geometry};let l=a;!l&&void 0!==r&&"iLayer"in r&&r.iLayer&&(l=await ml(r.iLayer));const c=function(e){let t;if(void 0!==e){const r=ro(e);if(!eo(r)&&!Ms(r?.typeIdField)){const e=Sl(r,"types");void 0!==e&&(t={typeIdField:r.typeIdField??void 0,types:e})}if(!Ms(r?.subtypeField)){const e=to(r),i=Sl(e,"subtypes");void 0!==i&&(t={...t,subtypeField:e.subtypeField??void 0,subtypes:i})}}return t}(l),u=(await po({queryObject:l,category:i,queryConfig:n})).map((e=>{const r=String(e),a=function(e){const{fieldName:t,fieldValueToMatch:r,subtypeInfo:i,fieldList:a}=e;let s;if(!("string"==typeof r&&Ms(r)||Ms(t))&&(s=function(e){const{subtypeInfo:t,fieldName:r,fieldValueToMatch:i}=e;let a;const s=e=>`${e.id}`==`${i}`;return t?.subtypeField===r&&t.subtypes?a=t.subtypes.find(s)?.name:t?.typeIdField===r&&t.types&&(a=t.types.find(s)?.name),a}({subtypeInfo:i,fieldName:t,fieldValueToMatch:r}),void 0===s)){const e=function(e,t=[]){return t.find((t=>t.name===e))}(t,a);if(void 0!==i?.types){const t=i?.types;for(const i of t){const t=i.domains?.filter((t=>t.fieldName===e?.name))??[];for(const e of t)if(s=e?.codedValues?.find((e=>`${e.code}`===r))?.name,void 0!==s)break;if(void 0!==s)break}}void 0===s&&void 0!==e?.domain&&"codedValue"===e.domain.type&&(s=e.domain.codedValues?.find((e=>`${e.code}`==`${r}`))?.name)}return s}({fieldName:i,fieldValueToMatch:r,subtypeInfo:c,fieldList:t.layerFieldsInfo});return a??r}));return u}class Nc extends ec{getColorMatch(){return this._config.colorMatch??!0}setColorMatch(e){((e,t)=>{t.colorMatch=e})(e,this._config),this.emitConfigUpdate("setColorMatch")}}const zc=e=>e.legend?.title?.content.text??"";class Vc extends ec{getLegendVisibility(){return(e=>{let t=!1;return void 0!==e.legend&&(t=e.legend.visible??!0),t})(this._config)}setLegendVisibility(e){((e,t)=>{void 0===t.legend&&(t.legend=Ki()),t.legend.visible=e})(e,this._config),this.emitConfigUpdate("setLegendVisibility")}getLegendTitleText(){return zc(this._config)}setLegendTitleText(e){((e,t)=>{if(void 0!==t.legend?.title)t.legend.title.content.text=e;else if(void 0===t.legend&&void 0!==e){const r=Ki();void 0!==r.title&&(r.title.content.text=e,r.title.visible=!0,t.legend=r)}})(e,this._config),this.emitConfigUpdate("setLegendTitleText")}getLegendTitleVisibility(){return e=this._config,e.legend?.title?.visible??!1;var e}setLegendTitleVisibility(e){((e,t)=>{if(void 0!==t.legend?.title)t.legend.title.visible=e;else if(void 0!==t.legend&&void 0===t.legend?.title&&e)t.legend.title=zi({text:zc(t),visible:e,font:Ri(re),type:re});else if(void 0===t.legend){const r=Ki();r.title=zi({text:zc(t),visible:e,font:Ri(re),type:re}),t.legend=r}})(e,this._config),this.emitConfigUpdate("setLegendTitleVisibility")}getLegendPosition(){return e=this._config,e.legend?.position??wc;var e}setLegendPosition(e){((e,t)=>{if(void 0!==t.legend)t.legend.position=e;else if(void 0===t.legend){const r=Ki();r.position=e,t.legend=r}})(e,this._config),this.emitConfigUpdate("setLegendPosition")}getLegendTitleSymbol(){return e=this._config,e.legend?.title?.content;var e}setLegendTitleSymbol(e){var t,r;t=e,void 0===(r=this._config).legend&&(r.legend=Ki()),void 0!==r.legend.title&&void 0!==t||(r.legend.title=zi({text:"",visible:!0,font:Ri(re),type:re})),void 0!==t&&(r.legend.title.content=t),this.emitConfigUpdate("setLegendTitleSymbol")}getLegendTextSymbol(){return e=this._config,e.legend?.body;var e}setLegendTextSymbol(e){var t,r;t=e,void 0===(r=this._config).legend&&(r.legend=Ki()),r.legend.body=t??zi({text:"",visible:!0,font:Ri(ie),type:ie}).content,this.emitConfigUpdate("setLegendTextSymbol")}}async function Gc(e=Fi().locale){let t=await Promise.resolve().then((function(){return require("./messages.en-e811b5b5.js")}));switch(e){case se.Arabic:t=await Promise.resolve().then((function(){return require("./messages.ar-adc0ce85.js")}));break;case se.Bosnian:t=await Promise.resolve().then((function(){return require("./messages.bs-47fd9e97.js")}));break;case se.Bulgarian:t=await Promise.resolve().then((function(){return require("./messages.bg-78e02c29.js")}));break;case se.Catalan:t=await Promise.resolve().then((function(){return require("./messages.ca-bfc71880.js")}));break;case se.Czech:t=await Promise.resolve().then((function(){return require("./messages.cs-c4bbd55e.js")}));break;case se.Danish:t=await Promise.resolve().then((function(){return require("./messages.da-27d7c61c.js")}));break;case se.German:t=await Promise.resolve().then((function(){return require("./messages.de-c94b31c1.js")}));break;case se.Greek:t=await Promise.resolve().then((function(){return require("./messages.el-68f1178f.js")}));break;case se.EnglishUSA:t=await Promise.resolve().then((function(){return require("./messages.en-US-11a8fc8c.js")}));break;case se.Spanish:t=await Promise.resolve().then((function(){return require("./messages.es-a45fccc1.js")}));break;case se.Estonian:t=await Promise.resolve().then((function(){return require("./messages.et-e38043d9.js")}));break;case se.French:t=await Promise.resolve().then((function(){return require("./messages.fr-e2af241a.js")}));break;case se.Finnish:t=await Promise.resolve().then((function(){return require("./messages.fi-92760692.js")}));break;case se.Hebrew:t=await Promise.resolve().then((function(){return require("./messages.he-836eaaea.js")}));break;case se.Croatian:t=await Promise.resolve().then((function(){return require("./messages.hr-e036e98a.js")}));break;case se.Hungarian:t=await Promise.resolve().then((function(){return require("./messages.hu-e8586f3b.js")}));break;case se.Indonesian:t=await Promise.resolve().then((function(){return require("./messages.id-27350d99.js")}));break;case se.Italian:t=await Promise.resolve().then((function(){return require("./messages.it-cf67e579.js")}));break;case se.Japanese:t=await Promise.resolve().then((function(){return require("./messages.ja-8e727547.js")}));break;case se.Korean:t=await Promise.resolve().then((function(){return require("./messages.ko-3fb20422.js")}));break;case se.Lithuanian:t=await Promise.resolve().then((function(){return require("./messages.lt-ec60c9de.js")}));break;case se.Latvian:t=await Promise.resolve().then((function(){return require("./messages.lv-6039db0a.js")}));break;case se.NorwegianBokml:t=await Promise.resolve().then((function(){return require("./messages.no-997906c8.js")}));break;case se.Dutch:t=await Promise.resolve().then((function(){return require("./messages.nl-b50ef081.js")}));break;case se.Polish:t=await Promise.resolve().then((function(){return require("./messages.pl-1fe4573e.js")}));break;case se.PortugueseBrazil:t=await Promise.resolve().then((function(){return require("./messages.pt-BR-f8b3a21a.js")}));break;case se.PortuguesePortugal:t=await Promise.resolve().then((function(){return require("./messages.pt-PT-24031c80.js")}));break;case se.Romanian:t=await Promise.resolve().then((function(){return require("./messages.ro-0899c204.js")}));break;case se.Russian:t=await Promise.resolve().then((function(){return require("./messages.ru-ba8d2b74.js")}));break;case se.Serbian:t=await Promise.resolve().then((function(){return require("./messages.sr-692d484e.js")}));break;case se.Slovak:t=await Promise.resolve().then((function(){return require("./messages.sk-bb0c53bc.js")}));break;case se.Slovenian:t=await Promise.resolve().then((function(){return require("./messages.sl-d16fb5bb.js")}));break;case se.Swedish:t=await Promise.resolve().then((function(){return require("./messages.sv-10d1b922.js")}));break;case se.Thai:t=await Promise.resolve().then((function(){return require("./messages.th-41f57171.js")}));break;case se.Turkish:t=await Promise.resolve().then((function(){return require("./messages.tr-0d43e9c9.js")}));break;case se.Ukrainian:t=await Promise.resolve().then((function(){return require("./messages.uk-eeced884.js")}));break;case se.Vietnamese:t=await Promise.resolve().then((function(){return require("./messages.vi-8820902c.js")}));break;case se.ChineseChina:t=await Promise.resolve().then((function(){return require("./messages.zh-CN-7d0cfe28.js")}));break;case se.ChineseHongKong:t=await Promise.resolve().then((function(){return require("./messages.zh-HK-39693b61.js")}));break;case se.ChineseTaiwan:t=await Promise.resolve().then((function(){return require("./messages.zh-TW-0a87550b.js")}))}return t}function Qc(e,t,r){const i=e?.axes?.[t];void 0!==i?.title?i.title.content.text=r:void 0!==i&&(i.title=zi({text:r,visible:!0,font:Ri(Z)}))}async function Hc(e){const{config:t,layerInfo:r,numericFields:i,aggregationType:a}=e;let s="";if(t){const e=function(e){let t=e?.stackedType;if(void 0===t&&void 0!==e){const r=qs(e.series);r!==T&&r!==A&&r!==$&&r!==q||(t="sideBySide")}return t}(t)===xc,o=await Gc();if(e)s=o.axisLabels.percent;else{const e=await ma(a);if(1===i.length){const t=Bs(r.layerFieldsInfo,i[0]);s=a===ac?t:a===rc&&i[0]===r.objectIdField?o.axisLabels.count:xi(o.axisLabels.aggregationOfFieldName,{aggregation:e,fieldName:t})}else i.length>1&&(s=a===ac?o.axisLabels.values:xi(o.axisLabels.aggregationOfValues,{aggregation:e}))}}return s}const Kc=async(e,t)=>e.axes?.[t]??(await ia(e.type))[t],Wc=(e,t,r)=>{void 0!==e.axes&&(e.axes[r]=t)},Xc=(e,t,r)=>{let i=Number.NaN;return i=r?e.axes?.[t]?.maximum:e.axes?.[t]?.minimum,i??Number.NaN},Yc=async(e,t,r,i)=>{const a=e?.axes?.[r];i&&void 0!==a?a.maximum=t:i||void 0===a||(a.minimum=t)},Jc=async(e,t)=>{await Yc(e,t,1,!0)},Zc=async(e,t)=>{await Yc(e,t,1,!1)},eu=async(e,t)=>{await Yc(e,t,0,!0)},tu=async(e,t)=>{await Yc(e,t,0,!1)},ru=e=>e.axes?.[0]?.valueFormat??{type:"category",characterLimit:11},iu=async(e,t)=>{const r=await Kc(e,0);if(void 0!==r&&void 0!==t){const i={...r,valueFormat:t};Wc(e,i,0)}},au=e=>{let t;return function(e){return void 0!==e&&e.type===E}(e.axes?.[1]?.valueFormat)&&(t=e.axes?.[1]?.valueFormat),t},su=(e,t,r)=>{const i=e.axes?.[t];void 0!==i&&(i.integerOnlyValues=r)};var ou="object"==typeof global&&global&&global.Object===Object&&global,nu="object"==typeof self&&self&&self.Object===Object&&self,lu=ou||nu||Function("return this")(),cu=lu.Symbol,uu=Object.prototype,du=uu.hasOwnProperty,fu=uu.toString,hu=cu?cu.toStringTag:void 0;var pu=Object.prototype.toString;var gu=cu?cu.toStringTag:void 0;function mu(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":gu&&gu in Object(e)?function(e){var t=du.call(e,hu),r=e[hu];try{e[hu]=void 0;var i=!0}catch(e){}var a=fu.call(e);return i&&(t?e[hu]=r:delete e[hu]),a}(e):function(e){return pu.call(e)}(e)}function yu(e){return null!=e&&"object"==typeof e}var vu=Array.isArray;function bu(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function wu(e){if(!bu(e))return!1;var t=mu(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var Su,xu=lu["__core-js_shared__"],_u=(Su=/[^.]+$/.exec(xu&&xu.keys&&xu.keys.IE_PROTO||""))?"Symbol(src)_1."+Su:"";var Pu=Function.prototype.toString;function Fu(e){if(null!=e){try{return Pu.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var ju=/^\[object .+?Constructor\]$/,Cu=Function.prototype,Eu=Object.prototype,ku=Cu.toString,Iu=Eu.hasOwnProperty,Ou=RegExp("^"+ku.call(Iu).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Au(e){return!(!bu(e)||(t=e,_u&&_u in t))&&(wu(e)?Ou:ju).test(Fu(e));var t}function Tu(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Au(r)?r:void 0}var Lu=Tu(lu,"WeakMap"),Du=Object.create,qu=function(){function e(){}return function(t){if(!bu(t))return{};if(Du)return Du(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();var $u=function(){try{var e=Tu(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var Uu=/^(?:0|[1-9]\d*)$/;function Bu(e,t){var r=typeof e;return!!(t=t??9007199254740991)&&("number"==r||"symbol"!=r&&Uu.test(e))&&e>-1&&e%1==0&&e<t}function Mu(e,t,r){"__proto__"==t&&$u?$u(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Ru(e,t){return e===t||e!=e&&t!=t}var Nu=Object.prototype.hasOwnProperty;function zu(e,t,r){var i=e[t];Nu.call(e,t)&&Ru(i,r)&&(void 0!==r||t in e)||Mu(e,t,r)}function Vu(e,t,r,i){var a=!r;r||(r={});for(var s=-1,o=t.length;++s<o;){var n=t[s],l=i?i(r[n],e[n],n,r,e):void 0;void 0===l&&(l=e[n]),a?Mu(r,n,l):zu(r,n,l)}return r}function Gu(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Qu(e){return null!=e&&Gu(e.length)&&!wu(e)}var Hu=Object.prototype;function Ku(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Hu)}function Wu(e){return yu(e)&&"[object Arguments]"==mu(e)}var Xu=Object.prototype,Yu=Xu.hasOwnProperty,Ju=Xu.propertyIsEnumerable,Zu=Wu(function(){return arguments}())?Wu:function(e){return yu(e)&&Yu.call(e,"callee")&&!Ju.call(e,"callee")};var ed="object"==typeof exports&&exports&&!exports.nodeType&&exports,td=ed&&"object"==typeof module&&module&&!module.nodeType&&module,rd=td&&td.exports===ed?lu.Buffer:void 0,id=(rd?rd.isBuffer:void 0)||function(){return!1},ad={};function sd(e){return function(t){return e(t)}}ad["[object Float32Array]"]=ad["[object Float64Array]"]=ad["[object Int8Array]"]=ad["[object Int16Array]"]=ad["[object Int32Array]"]=ad["[object Uint8Array]"]=ad["[object Uint8ClampedArray]"]=ad["[object Uint16Array]"]=ad["[object Uint32Array]"]=!0,ad["[object Arguments]"]=ad["[object Array]"]=ad["[object ArrayBuffer]"]=ad["[object Boolean]"]=ad["[object DataView]"]=ad["[object Date]"]=ad["[object Error]"]=ad["[object Function]"]=ad["[object Map]"]=ad["[object Number]"]=ad["[object Object]"]=ad["[object RegExp]"]=ad["[object Set]"]=ad["[object String]"]=ad["[object WeakMap]"]=!1;var od="object"==typeof exports&&exports&&!exports.nodeType&&exports,nd=od&&"object"==typeof module&&module&&!module.nodeType&&module,ld=nd&&nd.exports===od&&ou.process,cd=function(){try{var e=nd&&nd.require&&nd.require("util").types;return e||ld&&ld.binding&&ld.binding("util")}catch(e){}}(),ud=cd&&cd.isTypedArray,dd=ud?sd(ud):function(e){return yu(e)&&Gu(e.length)&&!!ad[mu(e)]},fd=Object.prototype.hasOwnProperty;function hd(e,t){var r=vu(e),i=!r&&Zu(e),a=!r&&!i&&id(e),s=!r&&!i&&!a&&dd(e),o=r||i||a||s,n=o?function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}(e.length,String):[],l=n.length;for(var c in e)!t&&!fd.call(e,c)||o&&("length"==c||a&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Bu(c,l))||n.push(c);return n}function pd(e,t){return function(r){return e(t(r))}}var gd=pd(Object.keys,Object),md=Object.prototype.hasOwnProperty;function yd(e){if(!Ku(e))return gd(e);var t=[];for(var r in Object(e))md.call(e,r)&&"constructor"!=r&&t.push(r);return t}function vd(e){return Qu(e)?hd(e):yd(e)}var bd=Object.prototype.hasOwnProperty;function wd(e){if(!bu(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=Ku(e),r=[];for(var i in e)("constructor"!=i||!t&&bd.call(e,i))&&r.push(i);return r}function Sd(e){return Qu(e)?hd(e,!0):wd(e)}var xd=Tu(Object,"create");var _d=Object.prototype.hasOwnProperty;var Pd=Object.prototype.hasOwnProperty;function Fd(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function jd(e,t){for(var r=e.length;r--;)if(Ru(e[r][0],t))return r;return-1}Fd.prototype.clear=function(){this.__data__=xd?xd(null):{},this.size=0},Fd.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Fd.prototype.get=function(e){var t=this.__data__;if(xd){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return _d.call(t,e)?t[e]:void 0},Fd.prototype.has=function(e){var t=this.__data__;return xd?void 0!==t[e]:Pd.call(t,e)},Fd.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=xd&&void 0===t?"__lodash_hash_undefined__":t,this};var Cd=Array.prototype.splice;function Ed(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Ed.prototype.clear=function(){this.__data__=[],this.size=0},Ed.prototype.delete=function(e){var t=this.__data__,r=jd(t,e);return!(r<0)&&(r==t.length-1?t.pop():Cd.call(t,r,1),--this.size,!0)},Ed.prototype.get=function(e){var t=this.__data__,r=jd(t,e);return r<0?void 0:t[r][1]},Ed.prototype.has=function(e){return jd(this.__data__,e)>-1},Ed.prototype.set=function(e,t){var r=this.__data__,i=jd(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this};var kd=Tu(lu,"Map");function Id(e,t){var r,i,a=e.__data__;return("string"==(i=typeof(r=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==r:null===r)?a["string"==typeof t?"string":"hash"]:a.map}function Od(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Od.prototype.clear=function(){this.size=0,this.__data__={hash:new Fd,map:new(kd||Ed),string:new Fd}},Od.prototype.delete=function(e){var t=Id(this,e).delete(e);return this.size-=t?1:0,t},Od.prototype.get=function(e){return Id(this,e).get(e)},Od.prototype.has=function(e){return Id(this,e).has(e)},Od.prototype.set=function(e,t){var r=Id(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this};function Ad(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var i=arguments,a=t?t.apply(this,i):i[0],s=r.cache;if(s.has(a))return s.get(a);var o=e.apply(this,i);return r.cache=s.set(a,o)||s,o};return r.cache=new(Ad.Cache||Od),r}function Td(e,t){for(var r=-1,i=t.length,a=e.length;++r<i;)e[a+r]=t[r];return e}Ad.Cache=Od;var Ld=pd(Object.getPrototypeOf,Object);function Dd(e){var t=this.__data__=new Ed(e);this.size=t.size}Dd.prototype.clear=function(){this.__data__=new Ed,this.size=0},Dd.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Dd.prototype.get=function(e){return this.__data__.get(e)},Dd.prototype.has=function(e){return this.__data__.has(e)},Dd.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Ed){var i=r.__data__;if(!kd||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new Od(i)}return r.set(e,t),this.size=r.size,this};var qd="object"==typeof exports&&exports&&!exports.nodeType&&exports,$d=qd&&"object"==typeof module&&module&&!module.nodeType&&module,Ud=$d&&$d.exports===qd?lu.Buffer:void 0,Bd=Ud?Ud.allocUnsafe:void 0;function Md(){return[]}var Rd=Object.prototype.propertyIsEnumerable,Nd=Object.getOwnPropertySymbols,zd=Nd?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,i=null==e?0:e.length,a=0,s=[];++r<i;){var o=e[r];t(o,r,e)&&(s[a++]=o)}return s}(Nd(e),(function(t){return Rd.call(e,t)})))}:Md;var Vd=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Td(t,zd(e)),e=Ld(e);return t}:Md;function Gd(e,t,r){var i=t(e);return vu(e)?i:Td(i,r(e))}function Qd(e){return Gd(e,vd,zd)}function Hd(e){return Gd(e,Sd,Vd)}var Kd=Tu(lu,"DataView"),Wd=Tu(lu,"Promise"),Xd=Tu(lu,"Set"),Yd="[object Map]",Jd="[object Promise]",Zd="[object Set]",ef="[object WeakMap]",tf="[object DataView]",rf=Fu(Kd),af=Fu(kd),sf=Fu(Wd),of=Fu(Xd),nf=Fu(Lu),lf=mu;(Kd&&lf(new Kd(new ArrayBuffer(1)))!=tf||kd&&lf(new kd)!=Yd||Wd&&lf(Wd.resolve())!=Jd||Xd&&lf(new Xd)!=Zd||Lu&&lf(new Lu)!=ef)&&(lf=function(e){var t=mu(e),r="[object Object]"==t?e.constructor:void 0,i=r?Fu(r):"";if(i)switch(i){case rf:return tf;case af:return Yd;case sf:return Jd;case of:return Zd;case nf:return ef}return t});var cf=lf,uf=Object.prototype.hasOwnProperty;var df=lu.Uint8Array;function ff(e){var t=new e.constructor(e.byteLength);return new df(t).set(new df(e)),t}var hf=/\w*$/;var pf=cu?cu.prototype:void 0,gf=pf?pf.valueOf:void 0;function mf(e,t,r){var i,a,s,o=e.constructor;switch(t){case"[object ArrayBuffer]":return ff(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return function(e,t){var r=t?ff(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var r=t?ff(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,r);case"[object Map]":case"[object Set]":return new o;case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return(s=new(a=e).constructor(a.source,hf.exec(a))).lastIndex=a.lastIndex,s;case"[object Symbol]":return i=e,gf?Object(gf.call(i)):{}}}var yf=cd&&cd.isMap,vf=yf?sd(yf):function(e){return yu(e)&&"[object Map]"==cf(e)};var bf=cd&&cd.isSet,wf=bf?sd(bf):function(e){return yu(e)&&"[object Set]"==cf(e)},Sf="[object Arguments]",xf="[object Function]",_f="[object Object]",Pf={};function Ff(e,t,r,i,a,s){var o,n=1&t,l=2&t,c=4&t;if(r&&(o=a?r(e,i,a,s):r(e)),void 0!==o)return o;if(!bu(e))return e;var u=vu(e);if(u){if(o=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&uf.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!n)return function(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}(e,o)}else{var d=cf(e),f=d==xf||"[object GeneratorFunction]"==d;if(id(e))return function(e,t){if(t)return e.slice();var r=e.length,i=Bd?Bd(r):new e.constructor(r);return e.copy(i),i}(e,n);if(d==_f||d==Sf||f&&!a){if(o=l||f?{}:function(e){return"function"!=typeof e.constructor||Ku(e)?{}:qu(Ld(e))}(e),!n)return l?function(e,t){return Vu(e,Vd(e),t)}(e,function(e,t){return e&&Vu(t,Sd(t),e)}(o,e)):function(e,t){return Vu(e,zd(e),t)}(e,function(e,t){return e&&Vu(t,vd(t),e)}(o,e))}else{if(!Pf[d])return a?e:{};o=mf(e,d,n)}}s||(s=new Dd);var h=s.get(e);if(h)return h;s.set(e,o),wf(e)?e.forEach((function(i){o.add(Ff(i,t,r,i,e,s))})):vf(e)&&e.forEach((function(i,a){o.set(a,Ff(i,t,r,a,e,s))}));var p=u?void 0:(c?l?Hd:Qd:l?Sd:vd)(e);return function(e,t){for(var r=-1,i=null==e?0:e.length;++r<i&&!1!==t(e[r],r,e););}(p||e,(function(i,a){p&&(i=e[a=i]),zu(o,a,Ff(i,t,r,a,e,s))})),o}Pf[Sf]=Pf["[object Array]"]=Pf["[object ArrayBuffer]"]=Pf["[object DataView]"]=Pf["[object Boolean]"]=Pf["[object Date]"]=Pf["[object Float32Array]"]=Pf["[object Float64Array]"]=Pf["[object Int8Array]"]=Pf["[object Int16Array]"]=Pf["[object Int32Array]"]=Pf["[object Map]"]=Pf["[object Number]"]=Pf[_f]=Pf["[object RegExp]"]=Pf["[object Set]"]=Pf["[object String]"]=Pf["[object Symbol]"]=Pf["[object Uint8Array]"]=Pf["[object Uint8ClampedArray]"]=Pf["[object Uint16Array]"]=Pf["[object Uint32Array]"]=!0,Pf["[object Error]"]=Pf[xf]=Pf["[object WeakMap]"]=!1;function jf(e){return Ff(e,5)}function Cf(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Od;++t<r;)this.add(e[t])}function Ef(e,t){for(var r=-1,i=null==e?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}Cf.prototype.add=Cf.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Cf.prototype.has=function(e){return this.__data__.has(e)};function kf(e,t,r,i,a,s){var o=1&r,n=e.length,l=t.length;if(n!=l&&!(o&&l>n))return!1;var c=s.get(e),u=s.get(t);if(c&&u)return c==t&&u==e;var d=-1,f=!0,h=2&r?new Cf:void 0;for(s.set(e,t),s.set(t,e);++d<n;){var p=e[d],g=t[d];if(i)var m=o?i(g,p,d,t,e,s):i(p,g,d,e,t,s);if(void 0!==m){if(m)continue;f=!1;break}if(h){if(!Ef(t,(function(e,t){if(o=t,!h.has(o)&&(p===e||a(p,e,r,i,s)))return h.push(t);var o}))){f=!1;break}}else if(p!==g&&!a(p,g,r,i,s)){f=!1;break}}return s.delete(e),s.delete(t),f}function If(e){var t=-1,r=Array(e.size);return e.forEach((function(e,i){r[++t]=[i,e]})),r}function Of(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var Af=cu?cu.prototype:void 0,Tf=Af?Af.valueOf:void 0;var Lf=Object.prototype.hasOwnProperty;var Df="[object Arguments]",qf="[object Array]",$f="[object Object]",Uf=Object.prototype.hasOwnProperty;function Bf(e,t,r,i,a,s){var o=vu(e),n=vu(t),l=o?qf:cf(e),c=n?qf:cf(t),u=(l=l==Df?$f:l)==$f,d=(c=c==Df?$f:c)==$f,f=l==c;if(f&&id(e)){if(!id(t))return!1;o=!0,u=!1}if(f&&!u)return s||(s=new Dd),o||dd(e)?kf(e,t,r,i,a,s):function(e,t,r,i,a,s,o){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new df(e),new df(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ru(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var n=If;case"[object Set]":var l=1&i;if(n||(n=Of),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;i|=2,o.set(e,t);var u=kf(n(e),n(t),i,a,s,o);return o.delete(e),u;case"[object Symbol]":if(Tf)return Tf.call(e)==Tf.call(t)}return!1}(e,t,l,r,i,a,s);if(!(1&r)){var h=u&&Uf.call(e,"__wrapped__"),p=d&&Uf.call(t,"__wrapped__");if(h||p){var g=h?e.value():e,m=p?t.value():t;return s||(s=new Dd),a(g,m,r,i,s)}}return!!f&&(s||(s=new Dd),function(e,t,r,i,a,s){var o=1&r,n=Qd(e),l=n.length;if(l!=Qd(t).length&&!o)return!1;for(var c=l;c--;){var u=n[c];if(!(o?u in t:Lf.call(t,u)))return!1}var d=s.get(e),f=s.get(t);if(d&&f)return d==t&&f==e;var h=!0;s.set(e,t),s.set(t,e);for(var p=o;++c<l;){var g=e[u=n[c]],m=t[u];if(i)var y=o?i(m,g,u,t,e,s):i(g,m,u,e,t,s);if(!(void 0===y?g===m||a(g,m,r,i,s):y)){h=!1;break}p||(p="constructor"==u)}if(h&&!p){var v=e.constructor,b=t.constructor;v==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(h=!1)}return s.delete(e),s.delete(t),h}(e,t,r,i,a,s))}function Mf(e,t,r,i,a){return e===t||(null==e||null==t||!yu(e)&&!yu(t)?e!=e&&t!=t:Bf(e,t,r,i,Mf,a))}var Rf=Object.prototype.hasOwnProperty;function Nf(e){if(null==e)return!0;if(Qu(e)&&(vu(e)||"string"==typeof e||"function"==typeof e.splice||id(e)||dd(e)||Zu(e)))return!e.length;var t=cf(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(Ku(e))return!yd(e).length;for(var r in e)if(Rf.call(e,r))return!1;return!0}function zf(e,t){return Mf(e,t)}const Vf=(e,t)=>{const r=t.title?.content.text;void 0!==t.title&&void 0!==e||(t.title=zi({text:"",visible:!0,font:Ri(Z),type:Z})),void 0!==e&&(t.title.content=e),t.title.content.text=r},Gf=(e,t)=>t.axes?.[e]?.title?.content.text??"",Qf=(e,t,r)=>{const i=r.axes?.[t];void 0!==i?.title?i.title.content.text=e:void 0!==i&&void 0===i?.title&&(i.title=zi({text:e,visible:!0,font:Ri(Z)}))},Hf=(e,t)=>t.axes?.[e]?.title?.visible??!1,Kf=(e,t,r)=>{const i=r.axes?.[t];void 0!==i?.title?i.title.visible=e:void 0!==i&&void 0===i?.title&&(i.title=zi({text:Gf(t,r),visible:e,font:Ri(Z)}))};class Wf extends ec{getXAxisTitleText(){return Gf(0,this._config)}setXAxisTitleText(e){Qf(e,0,this._config),this.emitConfigUpdate("setXAxisTitleText")}getXAxisTitleVisibility(){return Hf(0,this._config)}setXAxisTitleVisibility(e){Kf(e,0,this._config),this.emitConfigUpdate("setXAxisTitleVisibility")}getMaxXBound(){return e=this._config,Xc(e,0,!0);var e}async setMaxXBound(e){await eu(this._config,e),this.emitConfigUpdate("setMaxXBound")}getMinXBound(){return e=this._config,Xc(e,0,!1);var e}async setMinXBound(e){await tu(this._config,e),this.emitConfigUpdate("setMinXBound")}getXAxisTitleSymbol(){return e=this._config,e.axes?.[0]?.title?.content;var e}setXAxisTitleSymbol(e){var t,r;t=e,r=this._config,void 0!==r.axes?.[0]&&Vf(t,r.axes[0]),this.emitConfigUpdate("setXAxisTitleSymbol")}getAxisLabelsSymbol(){return(e=>{for(const t of e.axes??[])if(void 0!==t?.labels)return t.labels.content})(this._config)}setAxisLabelsSymbol(e){((e,t)=>{for(const r of t.axes??[])if(void 0!==r){const t=r.labels?.content.text;void 0===e?r.labels=zi({text:"",visible:!0,font:Ri(Y),type:Y}):r.labels.content=jf(e),r.labels.content.text=t}})(e,this._config),this.emitConfigUpdate("setAxisLabelsSymbol")}getAxisLinesSymbol(){return(e=>{for(const t of e.axes??[])if(void 0!==t?.lineSymbol)return t.lineSymbol})(this._config)}setAxisLinesSymbol(e){((e,t)=>{for(const r of t.axes??[])void 0!==r&&(r.lineSymbol=jf(e)??Vi())})(e,this._config),this.emitConfigUpdate("setAxisLinesSymbol")}}class Xf extends Wf{getYAxisTitleText(){return Gf(1,this._config)}setYAxisTitleText(e){Qf(e,1,this._config),this.emitConfigUpdate("setYAxisTitleText")}getYAxisTitleVisibility(){return Hf(1,this._config)}setYAxisTitleVisibility(e){Kf(e,1,this._config),this.emitConfigUpdate("setYAxisTitleVisibility")}getMaxYBound(){return e=this._config,Xc(e,1,!0);var e}async setMaxYBound(e){await Jc(this._config,e),this.emitConfigUpdate("setMaxYBound")}getMinYBound(){return e=this._config,Xc(e,1,!1);var e}async setMinYBound(e){await Zc(this._config,e),this.emitConfigUpdate("setMinYBound")}getXAxisValueFormat(){return ru(this._config)}async setXAxisValueFormat(e){await iu(this._config,e),this.emitConfigUpdate("setXAxisValueFormat")}getYAxisValueFormat(){return au(this._config)}async setYAxisValueFormat(e){await(async(e,t)=>{const r=await Kc(e,1);if(void 0!==r&&void 0!==t){const i={...r,valueFormat:t};Wc(e,i,1)}})(this._config,e),this.emitConfigUpdate("setYAxisValueFormat")}getXLogarithmic(){return e=this._config,e.axes?.[0].isLogarithmic??!1;var e}async setXLogarithmic(e){await(async(e,t)=>{void 0!==e.axes?.[0]&&(e.axes[0].isLogarithmic=t,await eu(e,null),await tu(e,null))})(this._config,e),this.emitConfigUpdate("setXLogarithmic")}getYLogarithmic(){return e=this._config,e.axes?.[1]?.isLogarithmic??!1;var e}async setYLogarithmic(e){await(async(e,t)=>{void 0!==e.axes?.[1]&&(e.axes[1].isLogarithmic=t,await Jc(e,null),await Zc(e,null))})(this._config,e),this.emitConfigUpdate("setYLogarithmic")}getXAxisScrollbar(){return e=this._config,e.axes?.[0]?.scrollbar;var e}setXAxisScrollbar(e){((e,t)=>{void 0!==e.axes?.[0]&&(e.axes[0].scrollbar=t)})(this._config,e),this.emitConfigUpdate("setXAxisScrollbar")}getYAxisScrollbar(){return e=this._config,e.axes?.[1]?.scrollbar;var e}setYAxisScrollbar(e){((e,t)=>{void 0!==e.axes?.[1]&&(e.axes[1].scrollbar=t)})(this._config,e),this.emitConfigUpdate("setYAxisScrollbar")}getYAxisTitleSymbol(){return e=this._config,e.axes?.[1]?.title?.content;var e}setYAxisTitleSymbol(e){((e,t)=>{void 0!==t.axes?.[1]&&Vf(e,t.axes[1])})(e,this._config),this.emitConfigUpdate("setYAxisTitleSymbol")}getGridLinesSymbol(){return(e=>{for(const t of e.axes??[])if(void 0!==t?.grid)return t.grid})(this._config)}setGridLinesSymbol(e){((e,t)=>{for(const r of t.axes??[])void 0!==r&&(r.grid=jf(e))})(e,this._config),this.emitConfigUpdate("setGridLinesSymbol")}}Mc(Xf,[Wf]);class Yf extends ec{getRotatedState(){return $s(this._config)}setRotatedState(e){this._config=function(e,t){let r;return void 0!==t&&(r={...t,rotated:e}),r}(e,this._config)??this._config,this.emitConfigUpdate("setRotatedState")}}class Jf extends ec{getDataLabelsVisibility(){return e=this._config,e.series[0]?.dataLabels?.visible??!1;var e}setDataLabelsVisibility(e){((e,t)=>{t.series.forEach((t=>{void 0!==t.dataLabels?t.dataLabels.visible=e:t.dataLabels=zi({text:"",visible:e,font:Ri(te),type:te})}))})(e,this._config),this.emitConfigUpdate("setDataLabelsVisibility")}getDataLabelsSymbol(){return(e=>{for(const t of e.series)if(void 0!==t.dataLabels)return t.dataLabels.content})(this._config)}setDataLabelsSymbol(e){((e,t)=>{for(const r of t.series)void 0!==r.dataLabels&&void 0!==e||(r.dataLabels=zi({text:"",visible:!0,font:Ri(te),type:te})),void 0!==e&&(r.dataLabels.content=jf(e))})(e,this._config),this.emitConfigUpdate("setDataLabelsSymbol")}}const Zf={xAxisAsc:"xAxisAsc",xAxisDesc:"xAxisDesc",yAxisAsc:"yAxisAsc",yAxisDesc:"yAxisDesc",customSort:"customSort"},eh={xAxisAsc:"xAxisAsc",xAxisDesc:"xAxisDesc",meanAsc:"meanAsc",meanDesc:"meanDesc",medianAsc:"medianAsc",medianDesc:"medianDesc",customSort:"customSort"},th={labelAsc:"labelAsc",labelDesc:"labelDesc",valueAsc:"valueAsc",valueDesc:"valueDesc",customSort:"customSort"},rh={Category:"category",Fields:"fields"},ih={Value:"value",Percentage:"percentage",Both:"both"},ah={X:"x",Y:"y"};function sh(e){return{...e,axis:e.orientation===ah.X?e.config.axes?.[0]:e.config.axes?.[1],index:e.index??0,orientation:e.orientation??ah.Y}}const oh=e=>{const t=function(e,t){const r=null!==e?e.toString():null,i=null!=t?t.toString():null;return null!==i&&i!==r?_:S}(e.start,e.end);!function(e){return e?.type===S}(e.style)||t!==oc?function(e){return e?.type===_}(e.style)&&t===sc&&(e.style={type:sc,color:e.style.color}):e.style={type:oc,color:e.style.color}},nh=e=>{const{config:t,name:r,index:i,orientation:a}=e,s=a===ah.X?t.axes?.[0]:t.axes?.[1];if(void 0!==s){s.guides=s.guides??[];const e={type:uc,name:r,start:s.valueFormat.type===cc?"":0,style:Vi()};void 0!==i&&i<s.guides.length?s.guides.splice(i,0,e):s.guides.push(e)}},lh=e=>{const{config:t,index:r,orientation:i}=e,a=i===ah.X?t.axes?.[0]:t.axes?.[1];void 0!==a?.guides&&(void 0!==r&&r<a.guides.length?a.guides.splice(r,1):a.guides.pop())};class ch extends ec{getGuideLabelsSymbol(){return(e=>{for(const t of e.axes??[])for(const e of t?.guides??[])if(void 0!==e.label)return e.label})(this._config)}setGuideLabelsSymbol(e){((e,t)=>{for(const r of t.axes??[])for(const t of r?.guides??[]){const r=t.label?.text??"";t.label=jf(e),void 0!==t.label&&(t.label.text=r)}})(e,this._config),this.emitConfigUpdate("setGuideLabels")}getGuideVisibility(e,t){return(e=>{const{axis:t,index:r}=sh(e);return t?.guides?.[r]?.visible??!0})({config:this._config,index:e,orientation:t})}setGuideVisibility(e,t,r){(e=>{const{visible:t,axis:r,index:i}=sh(e);void 0!==r?.guides?.[i]&&(r.guides[i].visible=t)})({visible:e,config:this._config,index:t,orientation:r}),this.emitConfigUpdate("setGuideVisibility")}getGuideStart(e,t){return(e=>{const{axis:t,index:r}=sh(e);return t?.guides?.[r]?.start??null})({config:this._config,index:e,orientation:t})}setGuideStart(e,t,r){(e=>{const{start:t,axis:r,index:i}=sh(e);void 0!==r?.guides?.[i]&&(r.guides[i].start=t,oh(r.guides[i]))})({start:e,config:this._config,index:t,orientation:r}),this.emitConfigUpdate("setGuideStart")}getGuideEnd(e,t){return(e=>{const{axis:t,index:r}=sh(e);return t?.guides?.[r]?.end})({config:this._config,index:e,orientation:t})}setGuideEnd(e,t,r){(e=>{const{end:t,axis:r,index:i}=sh(e);void 0!==r?.guides?.[i]&&(r.guides[i].end=t,oh(r.guides[i]))})({end:e,config:this._config,index:t,orientation:r}),this.emitConfigUpdate("setGuideEnd")}getGuideName(e,t){return(e=>{const{axis:t,index:r}=sh(e);return t?.guides?.[r]?.name})({config:this._config,index:e,orientation:t})}setGuideName(e,t,r){(e=>{const{name:t,axis:r,index:i}=sh(e);void 0!==r?.guides?.[i]&&(r.guides[i].name=t)})({name:e,config:this._config,index:t,orientation:r}),this.emitConfigUpdate("setGuideName")}getGuideLabelText(e,t){return(e=>{const{axis:t,index:r}=sh(e);return t?.guides?.[r]?.label?.text})({config:this._config,index:e,orientation:t})}setGuideLabelText(e,t,r){(e=>{const{labelText:t,axis:r,index:i}=sh(e),a=r?.guides?.[i]?.label??Ni(t,Ri(J),J);void 0!==r?.guides?.[i]&&(r.guides[i].label={...a,text:t})})({labelText:e,config:this._config,index:t,orientation:r}),this.emitConfigUpdate("setGuideLabelText")}getGuideAbove(e,t){return(e=>{const{axis:t,index:r}=sh(e);return t?.guides?.[r]?.above??!1})({config:this._config,index:e,orientation:t})}setGuideAbove(e,t,r){(e=>{const{above:t,axis:r,index:i}=sh(e);void 0!==r?.guides?.[i]&&(r.guides[i].above=t)})({above:e,config:this._config,index:t,orientation:r}),this.emitConfigUpdate("setGuideAbove")}getGuideStyle(e,t){return(e=>{const{axis:t,index:r}=sh(e);return t?.guides?.[r]?.style})({config:this._config,index:e,orientation:t})}setGuideStyle(e,t,r){(e=>{const{style:t,axis:r,index:i}=sh(e);void 0!==r?.guides?.[i]&&(r.guides[i].style=t)})({style:e,config:this._config,index:t,orientation:r}),this.emitConfigUpdate("setGuideStyle")}}class uh extends ch{getXGuidesLength(){return this._config.axes?.[0]?.guides?.length}addXAxisGuide(e,t){nh({config:this._config,name:e,index:t,orientation:ah.X}),this.emitConfigUpdate("addXAxisGuide")}deleteXAxisGuide(e){lh({config:this._config,index:e,orientation:ah.X}),this.emitConfigUpdate("deleteXAxisGuide")}}Mc(uh,[ch]);class dh extends ch{getYGuidesLength(){return this._config.axes?.[1]?.guides?.length}addYAxisGuide(e,t){nh({config:this._config,name:e,index:t,orientation:ah.Y}),this.emitConfigUpdate("addYAxisGuide")}deleteYAxisGuide(e){lh({config:this._config,index:e,orientation:ah.Y}),this.emitConfigUpdate("deleteYAxisGuide")}}Mc(dh,[ch]);const fh=e=>"timeIntervalSize"in e.series[0]?e.series[0].timeIntervalSize:void 0,hh=e=>"timeIntervalUnits"in e.series[0]?e.series[0].timeIntervalUnits:void 0,ph=e=>"timeAggregationType"in e.series[0]?e.series[0].timeAggregationType:void 0,gh=e=>"trimIncompleteTimeInterval"in e.series[0]?e.series[0].trimIncompleteTimeInterval:void 0,mh=e=>"nullPolicy"in e.series[0]?e.series[0].nullPolicy:void 0,yh=(e,t)=>{t?.series?.forEach((t=>{t.type!==gc&&t.type!==pc||(t.timeIntervalSize=e)})),Zc(t,null),Jc(t,null)},vh=(e,t)=>{t?.series?.forEach((t=>{t.type!==gc&&t.type!==pc||(t.nullPolicy=e)})),Zc(t,null),Jc(t,null)};class bh extends ec{getTimeIntervalSize(){return fh(this._config)}setTimeIntervalSize(e){yh(e,this._config),this.emitConfigUpdate("setTimeIntervalSize")}getTimeIntervalUnits(){return hh(this._config)}setTimeIntervalUnits(e){((e,t)=>{t.series?.forEach((t=>{t.type!==gc&&t.type!==pc||(t.timeIntervalUnits=e)})),Zc(t,null),Jc(t,null)})(e,this._config),this.emitConfigUpdate("setTimeIntervalUnits")}getTimeAggregationType(){return ph(this._config)}setTimeAggregationType(e){((e,t)=>{t.series?.forEach((t=>{t.type!==gc&&t.type!==pc||(t.timeAggregationType=e)})),Zc(t,null),Jc(t,null)})(e,this._config),this.emitConfigUpdate("setTimeAggregationType")}getTrimIncompleteTimeInterval(){return gh(this._config)}setTrimIncompleteTimeInterval(e){((e,t)=>{t.series?.forEach((t=>{t.type!==gc&&t.type!==pc||(t.trimIncompleteTimeInterval=e)})),Zc(t,null),Jc(t,null)})(e,this._config),this.emitConfigUpdate("setTrimIncompleteTimeInterval")}getNullPolicy(){return mh(this._config)}setNullPolicy(e){vh(e,this._config),this.emitConfigUpdate("setNullPolicy")}resetTimeInterval(){var e;e=this._config,yh(0,e),this.emitConfigUpdate("resetTimeInterval")}}const wh=e=>{const t=qs(e.series);let r=!1;return t!==gc&&t!==pc||(r=(e=>{let t=Zf.xAxisAsc;const r=e.orderOptions?.data?.orderType??Oc,i=e.orderOptions?.data?.orderBy??_c;return t=r===Oc&&Array.isArray(i)?Zf.customSort:r===Oc?i===_c?Zf.xAxisAsc:Zf.xAxisDesc:i===_c?Zf.yAxisAsc:Zf.yAxisDesc,t})(e)===Zf.customSort),r},Sh=e=>{let t=[];const r=e.orderOptions?.data?.orderType;return wh(e)&&r===Oc&&(t=e.orderOptions?.data?.orderBy),t},xh=(e,t,r)=>{let i=Oc,a=_c;const s=qs(t.series);t.orderOptions??={},e===Zf.customSort&&void 0!==r?(a=[...r],t.orderOptions.data={orderType:i,orderBy:a}):s!==gc&&s!==pc||(i=e===Zf.xAxisAsc||e===Zf.xAxisDesc?Oc:Ec,a=e===Zf.xAxisAsc||e===Zf.yAxisAsc?_c:Pc,t.orderOptions.data={orderType:i,orderBy:a})},_h=e=>e?.series?.[0]?.x??"";async function Ph(e){const{seriesIndex:t,config:r,layerInfo:i}=e,{objectIdField:a}=i??{};let s;const o=r.series[t??0];let n=!1;if(void 0===o){n=r.series.slice(0,t).every((e=>jl(e)))}else n=jl(o);s=n?await oa({seriesIndex:t,objectIDField:a}):await la({seriesIndex:t,objectIDField:a});const l=_h(r),c=r.series[0]?.dataLabels?.visible??!1,u={...s,x:l,y:"",dataLabels:{...s?.dataLabels,visible:c},rotated:$s(r)},d=Ch(r);if(u.query={groupByFieldsForStatistics:[l]},d!==ac&&void 0!==a){const e=`${d}_${a}_0`.toUpperCase();u.y=e,u.query.outStatistics=[{statisticType:d,onStatisticField:a,outStatisticFieldName:e}]}if(jl(u)){let e;void 0!==r?.series?.[0]&&(e=Xs(r.series)),e!==ws&&e!==Fs&&(u.timeIntervalSize=fh(r),u.timeIntervalUnits=hh(r),u.timeAggregationType=ph(r),u.trimIncompleteTimeInterval=gh(r),u.nullPolicy=mh(r))}return jf(u)}async function Fh(e,t){const{layerFieldsInfo:r,objectIdField:i}=t,a=_h(e),s=Xs(e.series),o=kh(e),n=Ch(e),l=Eh(e),c=0===o.length||o.includes(i),u=await ma(n),d=c?"":o.map((e=>Bs(r??[],e))).join(", "),f=Bs(r??[],a),h=Bs(r??[],l),p=e.series.some((e=>Cl(e))),g=p?"category":"xAxisField",m=f;let y="";const v=await Gc();if(s===_s)y=xi(v.titleLabels.aggrTypeOfAggrFields,{aggregationType:u,aggregationFields:d});else if(n===ac){const e=c?i:d;if(""===l){const t=p?"aggrTypeCategory":"aggrTypeXAxisField";y=xi(v.titleLabels[t],{aggregationType:e,[g]:m})}else{const t=p?"aggrTypeCategoryBySplitBy":"aggrTypeXAxisFieldBySplitBy";y=xi(v.titleLabels[t],{aggregationType:e,[g]:m,splitByField:h})}}else if(n===rc)if(""===l){const e=p?"aggrTypeCategory":"aggrTypeXAxisField";y=xi(v.titleLabels[e],{aggregationType:u,[g]:m})}else{const e=p?"aggrTypeCategoryBySplitBy":"aggrTypeXAxisFieldBySplitBy";y=xi(v.titleLabels[e],{aggregationType:u,[g]:m,splitByField:h})}else if(""!==l){const e=p?"aggrTypeOfAggrFieldByCategoryBySplitByField":"aggrTypeOfAggrFieldByXAxisFieldBySplitByField";y=xi(v.titleLabels[e],{aggregationType:u,aggregationField:d,[g]:m,splitByField:h})}else if(o.length>0){const e=p?"aggrTypeOfAggrFieldsByCategory":"aggrTypeOfAggrFieldsByXAxisField";y=xi(v.titleLabels[e],{aggregationType:u,aggregationFields:d,[g]:m})}return y}const jh=e=>Ks({where:e.query?.where,normalize:!1,escape:!1})??"",Ch=e=>e?.series?.[0]?.query?.outStatistics?.[0]?.statisticType??ac,Eh=Ad((e=>{const t=e?.series?.[0]?.query?.where?.split("=")[0].trim()??"";return Ws(e?.series?.[0]?.query?.where)?"":t}),(e=>e?.series?.[0]?.query?.where)),kh=Ad((e=>{let t=[];if(""===Eh(e))t=e?.series.map((e=>{const t=e.query?.outStatistics?.map((e=>e.onStatisticField))??[];return t?.length>0?t:e.y})).flat()??[];else{const r=e?.series?.[0],i=r?.query?.outStatistics?.[0]?.onStatisticField??[r?.y].flat()[0];t=void 0!==i?[i]:[]}return[...new Set(t.filter((e=>""!==e)))]}),(e=>e?.series)),Ih=async(e,t,r)=>{const{objectIdField:i}=r;let a=Ch(t);0===e.length?(e.push(i),a=rc):a===rc&&e.length>=1&&!e.includes(i)&&(a=ic);const s=Eh(t);await Lh({splitByField:s,numericFields:e,aggregationType:a,config:t,layerInfo:r});Qc(t,1,await Hc({config:t,layerInfo:r,numericFields:kh(t),aggregationType:Ch(t)})),t.title&&(t.title.content.text=await Fh(t,r)),await Zc(t,null),await Jc(t,null),Oh(t,r)};function Oh(e,t){let r=!1;const i=Ch(e),a=kh(e);i===rc?r=!0:i===ac&&(r=a.every((e=>{const r=t.layerFieldsInfo.find((t=>t.name===e));return void 0!==r&&vl(r)}))),su(e,1,r);if(e.series.some((e=>jl(e)))){const r=_h(e),i=t.layerFieldsInfo.find((e=>e.name===r)),a=void 0!==i&&vl(i);su(e,0,a)}}const Ah=e=>{let t=Zf.xAxisAsc;const r=e.orderOptions?.data?.orderType??Oc,i=e.orderOptions?.data?.orderBy??_c;return t=r===Oc&&Array.isArray(i)?Zf.customSort:r===Oc?i===_c?Zf.xAxisAsc:Zf.xAxisDesc:i===_c?Zf.yAxisAsc:Zf.yAxisDesc,t};async function Th(e){const{numericFields:t,aggregationType:r,config:i,layerInfo:a}=e,{layerFieldsInfo:s,objectIdField:o}=a,n=[];let l=!1;const c=t.map(((e,t)=>`${r}_${e}_${t}`.toUpperCase()));for(let e=0;e<t.length;e+=1){const u=await Ph({config:i,layerInfo:a,seriesIndex:e}),d=c[e].toUpperCase(),f=t[e];let h={...u,query:{...u.query}};f!==o&&(h={...h,id:f,name:Bs(s,f)});let p=f;void 0!==h.query&&(r!==ac?(p=d,h.query.outStatistics=[{...u.query?.outStatistics?.[0]??{},onStatisticField:f,outStatisticFieldName:d,statisticType:r}]):delete h.query.outStatistics),h.y=p;const g=i.series.find((e=>e.query?.outStatistics?.[0]?.onStatisticField===f&&void 0===e.query.where));if(void 0!==g&&"string"==typeof g.y&&""!==g.y.trim()){i.colorMatch||(Cl(h)&&Cl(g)?h.fillSymbol=g.fillSymbol:jl(h)&&jl(g)&&(h.lineSymbol=g.lineSymbol,h.markerSymbol=g.markerSymbol),l=!0);const t=await Ph({config:i,layerInfo:a,seriesIndex:e});h.id=g.id,g.id!==t.id&&g.name!==t.name&&(h.id=g.id,h.name=g.name)}n.push(h)}return 1!==i.series.length||1!==n.length||i.colorMatch||(Cl(i.series[0])&&Cl(n[0])?n[0].fillSymbol=i.series[0].fillSymbol:jl(i.series[0])&&jl(n[0])&&(n[0].lineSymbol=i.series[0].lineSymbol,n[0].markerSymbol=i.series[0].markerSymbol),l=!0),i.colorMatch=!l,n}const Lh=async e=>{const{splitByField:t,numericFields:r,aggregationType:i,config:a,layerInfo:s}=e,{x:o}=a.series[0],n=Ah(a),l=Xs(a.series);""===t||r.length>1?o===Lc||void 0===o||""===o.trim()||l===_s?a.series=await async function(e){const{numericFields:t,aggregationType:r,config:i,layerInfo:a}=e;let s=!1;const o=await Ph({config:i,layerInfo:a,seriesIndex:0}),n=await Gc(),l={...o,id:`series_${Date.now()}`,name:n.axisLabels.values,x:Lc,y:"arcgis_charts_bar_line_from_fields_value"},c=[];for(const e of t)c.push({onStatisticField:e,outStatisticFieldName:`${e}_0`.toUpperCase(),statisticType:r});l.query={outStatistics:c};const u=i.series[0];return void 0!==u&&(l.id=u.id,i.colorMatch||(Cl(u)&&Cl(l)?l.fillSymbol=u.fillSymbol:jl(l)&&jl(u)&&(l.lineSymbol=u.lineSymbol,l.markerSymbol=u.markerSymbol),s=!0),l.id=u.id,u.name!==o.name&&(l.name=u.name)),1!==i.series.length||i.colorMatch||(Cl(l)?l.fillSymbol=i.series[0].fillSymbol:jl(l)&&(l.lineSymbol=i.series[0].lineSymbol,l.markerSymbol=i.series[0].markerSymbol),s=!0),i.colorMatch=!s,[l]}({config:a,layerInfo:s,numericFields:r,aggregationType:i}):a.series=await Th({config:a,layerInfo:s,numericFields:r,aggregationType:i}):a.series=await async function(e){const{splitByField:t,numericFields:r,aggregationType:i,config:a,layerInfo:s}=e,{layer:o,layerFieldsInfo:n}=s,{fetchNullValues:l}=a?.series?.[0]?.query??{},c=_h(a),u=c!==Lc?c:void 0,{categoriesArray:d,fieldName:f,splitByFieldType:h,numericalField:p}=await $c({config:a,layer:o,layerFieldsInfo:n,xAxisField:u,aggregationFields:r,aggregationType:i,splitByField:t,fetchNullValues:l});let g=[],m=!1;if(0===d.length){g=await Th({numericFields:r,aggregationType:i,config:a,layerInfo:s});for(const e of g)e.query&&(e.query.where=`${t}=''`)}else for(let e=0;e<d.length;e+=1){const r=d[e],o=`${f}_${e}`.toUpperCase(),n=await Ph({config:a,layerInfo:s,seriesIndex:e}),l=`${r}`,c={...n,id:l,name:l,y:o,query:{...n.query,where:`${t}=${h===tc&&null!==r?`'${r}'`:r}`,outStatistics:i!==ac?[{...n.query?.outStatistics?.[0]??{},onStatisticField:p,outStatisticFieldName:o,statisticType:i}]:void 0}};i===ac&&(void 0!==c.query&&(delete c.query.outStatistics,delete c.query.groupByFieldsForStatistics),c.y=p);const u=a.series.find((e=>String(jh(e)).trim().replace(/'/gu,"")===l));void 0!==u&&(a.colorMatch||(Cl(c)&&Cl(u)?c.fillSymbol=u.fillSymbol:jl(c)&&jl(u)&&(c.lineSymbol=u.lineSymbol,c.markerSymbol=u.markerSymbol),m=!0),c.id=u.id,c.name=u.name),g.push(c)}return a.colorMatch=!m,g}({config:a,layerInfo:s,splitByField:t,numericFields:r,aggregationType:i});const c=Sh(a);xh(n,a,c)},Dh=async(e,t,r)=>{const i=e.series?.[t],a=Eh(e);let s;const o=await Gc();if(Xs(e.series)===_s)s=o.axisLabels.values;else if(Nf(a)){const e=i.query?.outStatistics?.[0]?.onStatisticField;void 0!==e&&e!==r.objectIdField&&(s=Bs(r.layerFieldsInfo,e))}else s=String(jh(i)).trim().replace(/'/gu,"");return s??i.id},qh=(e,t)=>{t.orderOptions??={};const r=t.orderOptions?.data?.orderType;Ah(t)===Zf.customSort&&r===Oc&&(t.orderOptions.data={orderType:Oc,orderBy:[...e]})},$h=async(e,t)=>{const r=_h(e),i=ru(e)?.type,a=kh(e),s=Xs(e.series);let o=[];return i===lc&&(s===_s||r===Lc?o=a.map((e=>Bs(t?.layerFieldsInfo,e))):""!==r.trim()&&r!==Lc&&void 0!==t&&(o=await Rc({layerInfo:t,config:e,category:r}))),o},Uh=(e,t,r)=>{r.series?.[t]&&(r.series[t].name=e)},Bh=(e,t,r)=>{const i=r.series?.[t];i&&(Cl(i)?i.fillSymbol={...na(t),...i.fillSymbol,color:e}:jl(i)&&(i.lineSymbol={...ea(t),...i.lineSymbol,color:e}))},Mh=async e=>{const{newStackedType:t,config:r,layerInfo:i}=e;if(r.stackedType=t,void 0!==i){Qc(r,1,await Hc({config:r,layerInfo:i,numericFields:kh(r),aggregationType:Ch(r)}))}r.axes?.[1]&&(r.axes[1].valueFormat=t===xc?{type:E,intlOptions:{style:"percent",minimumFractionDigits:0,maximumFractionDigits:0}}:Gi()),await Zc(r,null),await Jc(r,null)};class Rh extends ec{getXAxisField(){return _h(this._config)}async setXAxisField(e){const t=""===e.trim();t||await(async(e,t,r)=>{const{layerFieldsInfo:i}=r??{},a=t?.series?.length??0,s=_h(t);let o;const n=t.series.some((e=>Cl(e))),l=El(t.series);if(void 0!==i){const r=bl(i);!r.includes(s)&&r.includes(e)?o={type:"date",intlOptions:{}}:r.includes(s)&&!r.includes(e)&&(o=n?{type:"category",characterLimit:11}:Gi());const a=i.find((t=>t.name===e));a?.type===tc&&(o={type:"category",characterLimit:11}),void 0!==o&&await iu(t,o)}if(0===a&&(t.series=[await Ph({config:t,layerInfo:r})]),t.series.forEach((t=>{t.x=e,void 0!==t.query&&(t.query.groupByFieldsForStatistics=[e])})),Qc(t,0,Bs(i,e)),void 0!==r){Qc(t,1,await Hc({config:t,layerInfo:r,numericFields:kh(t),aggregationType:Ch(t)})),t.title&&(t.title.content.text=await Fh(t,r)),Oh(t,r);const e=kh(t);await Ih(e,t,r)}await Zc(t,null),await Jc(t,null),l&&(await tu(t,null),await eu(t,null),yh(0,t),vh(o?.type===cc?Fc:jc,t))})(e,this._config,this.layerInfo);const r=kh(this._config),i=Xs(this._config.series)===_s,a=r.includes(this.layerInfo?.objectIdField??"");if(t||i&&a){await this.resetConfig();const e=1===r.length&&r[0]===this.layerInfo?.objectIdField;this.layerInfo&&r.length>0&&!e&&await Ih(r,this._config,this.layerInfo)}this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setXAxisField")}getAggregationType(){return Ch(this._config)}async setAggregationType(e){this.layerInfo&&(await(async(e,t,r)=>{const i=kh(t),a=Eh(t);await Lh({splitByField:a,numericFields:i,aggregationType:e,config:t,layerInfo:r}),Qc(t,1,await Hc({config:t,layerInfo:r,numericFields:kh(t),aggregationType:Ch(t)})),t.title&&(t.title.content.text=await Fh(t,r)),await Zc(t,null),await Jc(t,null),Oh(t,r)})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setAggregationType"))}getSplitByField(){return Eh(this._config)}async setSplitByField(e){this.layerInfo?.layerFieldsInfo&&Uc(this.layerInfo?.layerFieldsInfo,e)&&(await(async(e,t,r)=>{const i=kh(t),a=Ch(t);await Lh({splitByField:e,numericFields:i,aggregationType:a,config:t,layerInfo:r}),Qc(t,1,await Hc({config:t,layerInfo:r,numericFields:kh(t),aggregationType:Ch(t)})),t.title&&(t.title.content.text=await Fh(t,r)),await Zc(t,null),await Jc(t,null)})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setSplitByField"))}getNumericFields(){return kh(this._config)}async setNumericFields(e){"string"==typeof e&&(e=[e]);if(Bc(this.layerInfo?.layerFieldsInfo??[],e)&&this.layerInfo){await Ih(e,this._config,this.layerInfo);const t=kh(this._config);Xs(this._config.series)===_s&&t.some((e=>e===this.layerInfo?.objectIdField))&&await this.resetConfig(),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setNumericFields")}}getDataFilter(){return this._config.dataFilters}async setDataFilter(e){var t,r;t=e,r=this._config,void 0!==t?r.dataFilters=t:delete r.dataFilters;const i=Ah(this._config);if(i===Zf.customSort){const e=await $h(this._config,this.layerInfo);xh(i,this._config,e)}this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setDataFilter")}async getCustomSortValues(){return await $h(this._config,this.layerInfo)}getSortOrder(){return Ah(this._config)}setSortOrder(e,t){xh(e,this._config,t),this.emitConfigUpdate("setSortOrder")}getOrderByList(){return Sh(this._config)}setOrderByList(e){!Pl(this._config)&&(qh(e,this._config),this.emitConfigUpdate("setOrderByList"))}async updateSeriesFromLayerFilter(){void 0!==this.layerInfo&&(await Lh({splitByField:this.getSplitByField(),numericFields:this.getNumericFields(),aggregationType:this.getAggregationType(),config:this._config,layerInfo:this.layerInfo}),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("updateSeriesFromLayerFilter"))}getSeriesName(e){return((e,t)=>t.series?.[e]?.name)(e,this._config)}setSeriesName(e,t){Uh(e,t,this._config),this.emitConfigUpdate("setSeriesName")}getSeriesColor(e){return((e,t)=>{const r=t.series?.[e];let i;return Cl(r)?i=r.fillSymbol?.color:jl(r)&&(i=r.lineSymbol?.color),i})(e,this._config)}setSeriesColor(e,t){Bh(e,t,this._config),this.emitConfigUpdate("setSeriesColor")}getOrderOfSeries(){return this._config.series.map((e=>e.id))}setOrderOfSeries(e){var t,r;t=e,r=this._config,r.series?.sort(((e,r)=>t.findIndex((t=>e.id===t))-t.findIndex((e=>r.id===e)))),this.emitConfigUpdate("setOrderOfSeries")}getStackedType(){return this._config.stackedType??Sc}async setStackedType(e){await Mh({newStackedType:e,config:this._config,layerInfo:this.layerInfo}),this.emitConfigUpdate("setStackedType")}moveSeries(e,t){const r=this.getOrderOfSeries(),[i]=r.splice(e,1);r.splice(t,0,i),this.setOrderOfSeries(r),this.emitConfigUpdate("moveSeries")}moveCustomSortValuesInOrderByList(e,t){const r=Sh(this._config),[i]=r.splice(e,1);r.splice(t,0,i),qh(r,this._config),this.emitConfigUpdate("moveCustomSortValuesInOrderByList")}async resetConfig(){const e=this._config.id;this._config=await this.generateDefaultConfig(),this._config.id=e,this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("resetConfig")}}class Nh extends Rh{constructor(){super(...arguments),this._chartType=gc}async setup(e){await this.loadConfigFromLayer(e),void 0!==e.config&&await this.updateSeriesFromLayerFilter(),this.resolveSetup()}async generateDefaultConfig(){const e=await ha();return e.series=[await la({objectIDField:this.layerInfo?.objectIdField})],e}getSeriesHideOversizedStackedLabels(e){return Dc(e,this._config)}setSeriesHideOversizedStackedLabels(e,t){qc(e,t,this._config),this.emitConfigUpdate("setSeriesHideOversizedStackedLabels")}async resetSeriesStyling(){const e=this.getSeriesLength();for(let t=0;t<e;t+=1){const e=this.getSeriesId(t),r=Ui({colorIndex:t,opacity:Ii});if(Bh(r,t,this._config),void 0!==this.layerInfo){const r=await Dh(this._config,t,this.layerInfo);r!==this.layerInfo.objectIdField&&Uh(r??e,t,this._config)}}this._config.colorMatch=!0,this.emitConfigUpdate("resetSeriesStyling")}async resetAvailable(){const e=!this.getColorMatch();let t=!1;if(!e&&void 0!==this.layerInfo){const e=this.getSeriesLength();for(let r=0;r<e;r+=1){const e=await Dh(this._config,r,this.layerInfo),i=this.getSeriesName(r);if(void 0!==e&&e!==this.layerInfo.objectIdField&&e!==i){t=!0;break}}}return e||t}}Mc(Nh,[Xf,Vc,Nc,Yf,Jf,uh,dh,bh]);const zh=(e,t,r)=>{const i=r;void 0!==i?.series?.[t]&&(i.series[t].name=e)},Vh=e=>{const t=e.series[0];return!0===e.showMean&&Fl(t)?t.fillSymbol?.color:void 0},Gh=(e,t)=>{const r=t.series[0];!0===t.showMean&&Fl(r)&&(void 0!==r.fillSymbol?r.fillSymbol.color=e:r.fillSymbol={...Ji(),color:e})},Qh=(e,t,r)=>{const i=r,a=i?.series?.[t];a?.type===yc&&void 0!==a.fillSymbol?a.fillSymbol.color=e:a?.type===pc&&void 0!==a.lineSymbol&&(a.lineSymbol.color=e,void 0!==a.markerSymbol&&(a.markerSymbol.color=e))},Hh=e=>e.series.map((e=>e.id)),Kh=(e,t)=>{t?.series?.sort(((t,r)=>e.findIndex((e=>t.id===e))-e.findIndex((e=>r.id===e))))},Wh=e=>Qs(e)?.x??Di,Xh=Ad((e=>{const t=Qs(e),r=t?.query?.where?.split("=")[0].trim()??"";return Ws(t?.query?.where)?"":r}),(e=>Qs(e)?.query?.where)),Yh=Ad((e=>function(e,t){let r=[];const i=t??function(e){return e.map((e=>e.id)).filter((e=>"undefined"!==e))}(e),a=Xs(e);return r=e.filter((e=>i.includes(e.id))).map((e=>{let t="y"in e?e.y:void 0;return void 0!==t&&a===Fs&&(t=`${t.toString()}_${Ks({where:e.query?.where})}`),t})).filter((e=>void 0!==e)),Array.from(new Set(r.flat()))}(e?.series).filter((e=>""!==e))),(e=>e?.series)),Jh=async e=>{const{category:t,seriesIndex:r,y:i}=e;return jf({...await ca(r),x:void 0===t||""===t?Di:t,y:i,query:{}})},Zh=async e=>{const{category:t,seriesIndex:r,y:i}=e;return jf({...await oa({seriesIndex:r}),x:void 0===t||""===t?Di:t,y:i,query:{}})};async function ep(e){const{x:t,y:r,seriesTemplate:i}=e,{id:a,fillSymbol:s}=i??{},o=await ca(),n=a??`series_${Date.now()}`;return o.id=n,o.name=n,o.x=t,o.y=[...r],s?o.fillSymbol=s:o.fillSymbol&&(o.fillSymbol.color=ya,o.fillSymbol?.outline&&(o.fillSymbol.outline.color=ya)),o}async function tp(e){const{numericFields:t,config:r,layerInfo:i,category:a}=e,{layerFieldsInfo:s}=i,o=[],n=a??Wh(r);let l=!1;if(0===t.length){const e=await Jh({y:"",seriesIndex:0,category:n});o.push(e)}else if(n===Di){const e=await Gc(),a=t.length>1?t:t[0],s=await Jh({y:a,seriesIndex:0,category:n}),c=t.length>1?e.axisLabels.values:Bs(i.layerFieldsInfo,t[0]),u={...s,id:t[0],name:c,x:n},d=r.series.find((e=>zf(a,e.y)&&void 0===e.query?.where));void 0!==d&&(!r.colorMatch&&"fillSymbol"in d&&(u.fillSymbol=d.fillSymbol,l=!0),u.id=d.id,u.name=d.name),o.push(u)}else for(let e=0;e<t.length;e+=1){const i=t[e],a=await Jh({y:i,seriesIndex:e,category:n}),c=Bs(s,i),u={...a,id:i,name:c,x:n},d=r.series.find((e=>i===e.y));void 0!==d&&(!r.colorMatch&&"fillSymbol"in d&&(u.fillSymbol=d.fillSymbol,l=!0),u.id=d.id,u.name=d.name),o.push(u)}return 1===r.series.length&&1===o.length&&!r.colorMatch&&"fillSymbol"in r.series[0]&&(o[0].fillSymbol=r.series[0].fillSymbol,l=!0),r.colorMatch=!l,o}const rp=e=>e?.query?.where?.split("=")[1].trim().replace(/'/gu,"")??"";function ip(e){const{formerSeries:t,newSeries:r,showMean:i}=e;let a=r;const s=e=>e.type===(i?pc:yc),o=t.filter(s).map((e=>e.id)),n=r.filter(s).map((e=>e.id));return o.length===n.length&&JSON.stringify(o)!==JSON.stringify(n)&&(a=a.sort(((e,t)=>o.findIndex((t=>t===e.id))-o.findIndex((e=>e===t.id))))),a}async function ap(e){const{config:t,layerInfo:r,splitByField:i,numericFields:a,category:s}=e,{layer:o,layerFieldsInfo:n}=r,{fetchNullValues:l}=Qs(t)?.query??{},c=s??Wh(t),{categoriesArray:u,splitByFieldType:d}=await $c({config:t,layer:o,layerFieldsInfo:n,xAxisField:c!==Di?c:void 0,aggregationFields:a,splitByField:i,fetchNullValues:l});let f=[],h=!1;const p=(e=>e.series.some((e=>e.type===pc))&&e.series.some((e=>e.type===yc)))(t);if(0===u.length){f=await tp({numericFields:a,category:c,config:t,layerInfo:r});for(const e of f)e.query&&(e.query.where=`${i}=''`)}else for(let e=0;e<u.length;e+=1){const r=u[e],s={y:a,seriesIndex:e,category:c},o=p?await Zh(s):await Jh(s),n=`${r}`,l={...o,id:n,name:n,x:void 0===c||""===c?Di:c,query:{...o.query,where:`${i}=${d===tc&&null!==r?`'${r}'`:r}`}},g=t.series.find((e=>rp(e)===n));void 0!==g&&(t.colorMatch||(l.type===yc?Fl(g)?l.fillSymbol=g.fillSymbol:l.fillSymbol={...Ji(),color:g.lineSymbol?.color}:Fl(g)?(l.lineSymbol={...Vi({width:2}),...void 0!==g.fillSymbol?{color:g.fillSymbol.color}:{}},l.markerSymbol={...Zi(),...void 0!==g.fillSymbol?{color:g.fillSymbol.color}:{}}):(l.lineSymbol=g.lineSymbol,l.markerSymbol=g.markerSymbol),h=!0),l.id=g.id,l.name=g.name),f.push(l)}if(f=ip({formerSeries:t.series,newSeries:f,showMean:fp(t)}),t.colorMatch=!h,fp(t)){const e=t.series.find((e=>e.type===yc)),r=await ep({x:c,y:a,seriesTemplate:e});f.unshift(r)}return f}const sp=async e=>{const{splitByField:t,numericFields:r,category:i,config:a,layerInfo:s}=e,o=!(r.length>1&&i!==Di)&&""!==t;hp(!!o&&a.showMean,a),a.series=o?await ap({config:a,layerInfo:s,splitByField:t,numericFields:r,category:i}):await tp({numericFields:r,config:a,layerInfo:s,category:i})},op=e=>e?.standardizeValues??!1;async function np(e,t){const{layerFieldsInfo:r}=t,i=op(e),a=await Gc();let s=i?a.axisLabels.standardizedValues:a.axisLabels.values,o=e?.series?.map((e=>e.y)).flat();return o=[...new Set(o)],1===o.length&&(s=Bs(r,o[0])),s}async function lp(e,t){const{layerFieldsInfo:r}=t,i=Wh(e),a=Yh(e),s=Xh(e),o=a.map((e=>Bs(r??[],e))).join(", "),n=Bs(r??[],i);let l="";const c=await Gc();return a.length>0&&(l=i!==Di&&""!==s?xi(c.titleLabels.distributionOfFieldsByCategoryAndSplitBy,{valueFields:o,category:n,splitByField:s}):i!==Di?xi(c.titleLabels.distributionOfFieldsByCategory,{valueFields:o,category:n}):""!==s?xi(c.titleLabels.distributionOfFieldsByCategory,{valueFields:o,category:s}):xi(c.titleLabels.distributionOfField,{valueField:o})),l}const cp=(e,t,r,i)=>{let a="string"==typeof e.y?Bs(r.layerFieldsInfo,e.y):i.axisLabels.values;return Nf(t)||(a=rp(e)),a??e.id},up=e=>{let t=eh.xAxisAsc;const r=e.orderOptions?.data?.orderType??Oc,i=e.orderOptions?.data?.orderBy??_c;switch(r){case Oc:t=Array.isArray(i)?eh.customSort:i===_c?eh.xAxisAsc:eh.xAxisDesc;break;case kc:t=i===_c?eh.meanAsc:eh.meanDesc;break;case Ic:t=i===_c?eh.medianAsc:eh.medianDesc}return t},dp=(e,t,r)=>{let i=Oc,a=_c;if(t.orderOptions=t.orderOptions??{},e===eh.customSort&&void 0!==r)t.orderOptions.data={orderType:Oc,orderBy:r};else{switch(e){case eh.xAxisAsc:i=Oc,a=_c;break;case eh.xAxisDesc:i=Oc,a=Pc;break;case eh.meanAsc:i=kc,a=_c;break;case eh.meanDesc:i=kc,a=Pc;break;case eh.medianAsc:i=Ic,a=_c;break;case eh.medianDesc:i=Ic,a=Pc}t.orderOptions.data={orderType:i,orderBy:a}}},fp=e=>e.showMean??!1,hp=async(e=!1,t,r)=>{const i=e?r:Vh(t),a=(e??!1)!==(t.showMean??!1);if(t.showMean=e,a){let r;r=e?function(e){return e.every(Fl)}(t.series)?await async function(e,t){const r=[];return e.forEach((e=>{if(e.type===yc){const{type:t,fillSymbol:i,...a}=e;r.push({...a,type:pc,lineSymbol:{...Vi({width:2}),...void 0!==i?{color:i.color}:{}},markerSymbol:{...Zi(),...void 0!==i?{color:i.color}:{}}})}})),r.unshift(await ep({x:e[0].x,y:e[0].y,seriesTemplate:t})),r}(t.series):t.series:function(e){const t=e.slice(1),r=[];return t.forEach((e=>{if(e.type===pc){const{type:t,lineSymbol:i,markerSymbol:a,...s}=e,o=Ji();r.push({...s,type:yc,fillSymbol:{...o,color:i?.color}})}})),r}(t.series),r&&(r=ip({formerSeries:t.series,newSeries:r,showMean:e}),t.series=r)}return e&&void 0!==r&&Gh(r,t),{previousMeanLinesBoxColor:i}},pp=e=>{let t=[];const r=e.orderOptions?.data?.orderType;return up(e)===eh.customSort&&r===Oc&&(t=e.orderOptions?.data?.orderBy),t},gp=(e,t)=>{t.orderOptions??={};const r=t.orderOptions?.data?.orderType;up(t)===eh.customSort&&r===Oc&&(t.orderOptions.data={orderType:Oc,orderBy:e})},mp=e=>e.lineSymbol?.style,yp=(e,t)=>{t.lineSymbol??=ea(),t.lineSymbol.style=e},vp=e=>e.lineSymbol?.width,bp=(e,t)=>{t.lineSymbol??=ea(),t.lineSymbol.width=e};class wp extends ec{constructor(){super(...arguments),this._chartType=yc}async setup(e){await this.loadConfigFromLayer(e),this.commonStrings=await Gc(),void 0!==e.config&&await this.updateSeriesFromLayerFilter(),this.resolveSetup()}getCategory(){return Wh(this._config)}async setCategory(e){await(async(e,t,r)=>{const{layerFieldsInfo:i}=r,a=Wh(t),s=Xh(t),o=Yh(t),n=bl(i);let l;!n.includes(a)&&n.includes(e)?l={type:"date",intlOptions:{}}:n.includes(a)&&!n.includes(e)&&(l={type:"category",characterLimit:11}),void 0!==l&&iu(t,l),await sp({splitByField:s,numericFields:o,category:e,config:t,layerInfo:r}),Qc(t,0,e!==Di?Bs(i,e):""),Qc(t,1,await np(t,r)),void 0!==t?.title&&(t.title.content.text=await lp(t,r)),Zc(t,null),Jc(t,null)})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setCategory")}async getCustomSortValues(){const e=Wh(this._config),t=this.getXAxisValueFormat()?.type,r=this.getNumericFields();let i=[];return t===lc&&(i=e===Di?r.map((e=>Bs(this.layerInfo.layerFieldsInfo,e))):await Rc({layerInfo:this.layerInfo,config:this._config,category:e})),i}getNumericFields(){return Yh(this._config)}async setNumericFields(e){const{layerFieldsInfo:t}=this.layerInfo;"string"==typeof e&&(e=[e]);Bc(t,e)?(await(async(e,t,r)=>{const i=Wh(t),a=Xh(t);await sp({splitByField:a,numericFields:e,category:i,config:t,layerInfo:r}),Qc(t,1,await np(t,r)),void 0!==t?.title&&(t.title.content.text=await lp(t,r)),Zc(t,null),Jc(t,null)})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setNumericFields")):console.log("Invalid numericFields")}getSplitByField(){return Xh(this._config)}async setSplitByField(e){Uc(this.layerInfo.layerFieldsInfo,e)?(await(async(e,t,r)=>{const i=Wh(t),a=Yh(t);await sp({splitByField:e,numericFields:a,category:i,config:t,layerInfo:r}),Qc(t,1,await np(t,r)),void 0!==t?.title&&(t.title.content.text=await lp(t,r)),Zc(t,null),Jc(t,null)})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setSplitByField")):console.log("Invalid splitByField")}getShowOutliers(){return e=this._config,e?.showOutliers??!1;var e}async setShowOutliers(e){await(async(e,t,r)=>{t.showOutliers=e,Qc(t,1,await np(t,r))})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setShowOutliers")}getStandardizeValues(){return op(this._config)}async setStandardizeValues(e){await(async(e,t,r)=>{t.standardizeValues=e,Qc(t,1,await np(t,r))})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setStandardizeValues")}getSortOrder(){return up(this._config)}setSortOrder(e,t){dp(e,this._config,t),this.emitConfigUpdate("setSortOrder")}getOrderByList(){return pp(this._config)}setOrderByList(e){gp(e,this._config),this.emitConfigUpdate("setOrderByList")}async updateSeriesFromLayerFilter(){await sp({splitByField:this.getSplitByField(),numericFields:this.getNumericFields(),category:this.getCategory(),config:this._config,layerInfo:this.layerInfo}),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("updateSeriesFromLayerFilter")}getDataFilter(){return this._config.dataFilters}async setDataFilter(e){var t,r;t=e,r=this._config,void 0!==t?r.dataFilters=t:delete r.dataFilters;const i=up(this._config);if(i===eh.customSort){const e=await(async(e,t)=>{const r=Wh(e),i=ru(e)?.type,a=Yh(e);let s=[];return i===lc&&(r===Di?s=a:""!==r.trim()&&r!==Di&&(s=await Rc({layerInfo:t,config:e,category:r}))),s})(this._config,this.layerInfo);dp(i,this._config,e)}this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setDataFilter")}getShowMeanLines(){return fp(this._config)}async setShowMeanLines(e){const{previousMeanLinesBoxColor:t}=await hp(e,this._config,this.previousMeanLinesBoxColor);this.previousMeanLinesBoxColor=t,this.emitConfigUpdate("setShowMeanLines")}getMeanLinesBoxColor(){return Vh(this._config)}setMeanLinesBoxColor(e){Gh(e,this._config),this.emitConfigUpdate("setMeanLinesBoxColor")}async generateDefaultConfig(){const e=await async function(e=Yi()){return{version:t,type:P,id:e,rotated:!1,colorMatch:!0,orderOptions:{data:{orderType:W,orderBy:B}},title:zi({text:await Xi(),visible:!0,font:Ri(ee)}),subTitle:zi(),footer:zi({text:"",visible:!0,font:Ri(ae)}),background:[255,255,255,255],series:[],legend:Ki(),axes:await ia(D),standardizeValues:!0,showOutliers:!1}}();return e.series=[await ca()],e}getSeriesName(e){return((e,t)=>t?.series?.[e]?.name)(e,this._config)}setSeriesName(e,t){zh(e,t,this._config),this.emitConfigUpdate("setSeriesName")}getSeriesColor(e){return((e,t)=>{let r;const i=t.series?.[e];return i?.type===yc?r=i.fillSymbol?.color:i?.type===pc&&(r=i.lineSymbol?.color),r})(e,this._config)}setSeriesColor(e,t){Qh(e,t,this._config),this.emitConfigUpdate("setSeriesColor")}getSeriesLineStyle(e){const t=this._config.series[e];return!0===this.getShowMeanLines()&&jl(t)?mp(t):void 0}setSeriesLineStyle(e,t){const r=this._config.series[t];!0===this.getShowMeanLines()&&jl(r)&&yp(e,r),this.emitConfigUpdate("setSeriesLineStyle")}getSeriesLineWidth(e){const t=this._config.series[e];return!0===this.getShowMeanLines()&&jl(t)?vp(t):void 0}setSeriesLineWidth(e,t){const r=this._config.series[t];!0===this.getShowMeanLines()&&jl(r)&&bp(e,r),this.emitConfigUpdate("setSeriesLineWidth")}getOrderOfSeries(){return Hh(this._config)}setOrderOfSeries(e){Kh(e,this._config),this.emitConfigUpdate("setOrderOfSeries")}moveSeries(e,t){((e,t,r)=>{const i=Hh(r),[a]=i.splice(e,1);i.splice(t,0,a),Kh(i,r)})(e,t,this._config),this.emitConfigUpdate("moveSeries")}getBoxPlotSeriesIndexWhenMeanLinesShown(){return e=this._config,fp(e)?e.series.findIndex((e=>e.type===yc)):-1;var e}moveCustomSortValuesInOrderByList(e,t){const r=pp(this._config),[i]=r.splice(e,1);r.splice(t,0,i),gp(r,this._config),this.emitConfigUpdate("moveCustomSortValuesInOrderByList")}resetSeriesStyling(){const e=this.getSeriesLength(),t=this.getShowMeanLines();for(let r=!0===t?1:0;r<e;r+=1){const e=this.getSeriesId(r),i=Ui({colorIndex:r,opacity:Ii}),a=this._config.series[r];Qh(i,r,this._config);const s=cp(a,this.getSplitByField(),this.layerInfo,this.commonStrings);zh(s??e,r,this._config),!0===t&&jl(a)&&(yp(Ti,a),bp(2,a))}!0===t&&Gh(ya,this._config),this._config.colorMatch=!0,this.emitConfigUpdate("resetSeriesStyling")}resetAvailable(){const e=!this.getColorMatch(),t=this.getShowMeanLines(),r=!0===t&&this.getMeanLinesBoxColor()!==ya;let i=!1,a=!1;if(!e){const e=this.getSeriesLength();for(let r=!0===t?1:0;r<e;r+=1){const e=this._config.series[r],s=cp(e,this.getSplitByField(),this.layerInfo,this.commonStrings),o=this.getSeriesName(r);if(void 0!==s&&s!==o){i=!0;break}if(!0===t&&jl(e)){const e=this.getSeriesLineStyle(r),t=this.getSeriesLineWidth(r);if(e!==Ti||2!==t){a=!0;break}}}}return e||r||i||a}}Mc(wp,[Xf,Vc,Nc,Yf,Jf,dh]);const Sp=e=>e.series[0]?.featureIndex,xp=async(e,t,r)=>{const i=jp(t),a=Pp(t);null===e?delete t.series[0].featureIndex:void 0!==t.series[0]&&(t.series[0].featureIndex=e),await _p({config:t,layerInfo:r,field:i,aggregationType:a})},_p=async e=>{const{config:t,field:r,aggregationType:i}=e;void 0===t.series[0]&&(t.series=[fa({})]);const a=Fp(t.series[0]?.featureIndex);let s=a?r:`${i}_${r}`;a&&r.startsWith(`${i}_`)&&(s=r.replace(`${i}_`,"")),t.series[0].x=s,(e=>{const{config:t,field:r,aggregationType:i}=e,a=Sp(t),s=Fp(a)?{}:{outStatistics:[{statisticType:i,onStatisticField:r,outStatisticFieldName:`${i}_${r}`}]};t.series[0].query=s})({config:t,field:r,aggregationType:i}),await(async e=>{const{config:t,layerInfo:r,field:i,aggregationType:a}=e;t.title&&(t.title.content.text=await Hc({config:t,layerInfo:r,numericFields:[i],aggregationType:a}))})(e)},Pp=e=>e.series[0]?.query?.outStatistics?.[0]?.statisticType??rc,Fp=e=>"number"==typeof e&&e>=0,jp=e=>Fp(e.series[0]?.featureIndex)?e.series[0]?.x:e.series[0]?.query?.outStatistics?.[0]?.onStatisticField??"";class Cp extends ec{constructor(){super(...arguments),this._chartType=hc}async setup(e){await this.loadConfigFromLayer(e),this.resolveSetup()}getField(){return jp(this._config)}async setField(e){await(async(e,t,r)=>{const i=Pp(t);await _p({config:t,layerInfo:r,field:e,aggregationType:i})})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setField")}getAggregationType(){return Pp(this._config)}async setAggregationType(e){await(async(e,t,r)=>{const i=jp(t);await _p({config:t,layerInfo:r,field:i,aggregationType:e})})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setAggregationType")}getInnerRadius(){return this._config.innerRadius??50}setInnerRadius(e){((e,t)=>{t.innerRadius=e})(e,this._config),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setInnerRadius")}getStartAngle(){return this._config.startAngle??-90}setStartAngle(e){((e,t)=>{t.startAngle=e})(e,this._config),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setStartAngle")}getEndAngle(){return this._config.endAngle??270}setEndAngle(e){((e,t)=>{t.endAngle=e})(e,this._config),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setEndAngle")}getValueConversion(){return e=this._config,e.series[0]?.valueConversion;var e}setValueConversion(e){((e,t)=>{void 0!==t.series[0]&&(t.series[0].valueConversion=e)})(e,this._config),this.emitConfigUpdate("setValueConversion")}getFeatureIndex(){return Sp(this._config)}async setFeatureIndex(e){await xp(e,this._config,this.layerInfo),this.emitConfigUpdate("setFeatureIndex")}removeFeatureIndex(){xp(null,this._config,this.layerInfo),this.emitConfigUpdate("removeFeatureIndex")}getGaugeSubType(){return this._config.subType??Cc}getNeedleVisibility(){return e=this._config,e.axes[0].needle?.visible??!0;var e}setNeedleVisibility(e){var t,r;t=e,void 0===(r=this._config).axes[0].needle&&(r.axes[0].needle=aa()),r.axes[0].needle.visible=t,this.emitConfigUpdate("setNeedleVisibility")}getNeedleSymbol(){return e=this._config,e.axes[0].needle?.symbol;var e}setNeedleSymbol(e){var t,r;t=e,void 0===(r=this._config).axes[0].needle&&(r.axes[0].needle=aa()),r.axes[0].needle.symbol=t,this.emitConfigUpdate("setNeedleSymbol")}getNeedleStartWidth(){return e=this._config,e.axes[0].needle?.startWidth;var e}setNeedleStartWidth(e){var t,r;t=e,void 0===(r=this._config).axes[0].needle&&(r.axes[0].needle=aa()),r.axes[0].needle.startWidth=t,this.emitConfigUpdate("setNeedleStartWidth")}getNeedleEndWidth(){return e=this._config,e.axes[0].needle?.endWidth;var e}setNeedleEndWidth(e){var t,r;t=e,void 0===(r=this._config).axes[0].needle&&(r.axes[0].needle=aa()),r.axes[0].needle.endWidth=t,this.emitConfigUpdate("setNeedleEndWidth")}getNeedleInnerRadius(){return e=this._config,e.axes[0].needle?.innerRadius;var e}setNeedleInnerRadius(e){var t,r;t=e,void 0===(r=this._config).axes[0].needle&&(r.axes[0].needle=aa()),r.axes[0].needle.innerRadius=t,this.emitConfigUpdate("setNeedleInnerRadius")}getNeedleDisplayPin(){return e=this._config,e.axes[0].needle?.displayPin??!1;var e}setNeedleDisplayPin(e){var t,r;t=e,void 0===(r=this._config).axes[0].needle&&(r.axes[0].needle=aa()),r.axes[0].needle.displayPin=t,this.emitConfigUpdate("setNeedleDisplayPin")}getInnerLabelVisible(){return e=this._config,e.axes[0].innerLabel?.visible??!0;var e}setInnerLabelVisibility(e){var t,r;t=e,void 0===(r=this._config).axes[0].innerLabel&&(r.axes[0].innerLabel=zi()),r.axes[0].innerLabel.visible=t,this.emitConfigUpdate("setInnerLabelVisibility")}getInnerLabelContent(){return e=this._config,e.axes[0].innerLabel?.content;var e}setInnerLabelContent(e){var t,r;t=e,void 0===(r=this._config).axes[0].innerLabel&&(r.axes[0].innerLabel=zi()),void 0!==t&&(r.axes[0].innerLabel.content=t),this.emitConfigUpdate("setInnerLabelContent")}getAxisTickVisibility(){return e=this._config,e.axes[0].ticks?.visible??!0;var e}setAxisTickVisibility(e){var t,r;t=e,void 0===(r=this._config).axes[0].ticks&&(r.axes[0].ticks={type:nc}),r.axes[0].ticks.visible=t,this.emitConfigUpdate("setAxisTickVisibility")}getLabelsIncrement(){return this._config.axes[0].labelsIncrement}setLabelsIncrement(e){var t;t=e,this._config.axes[0].labelsIncrement=t,this.emitConfigUpdate("setLabelsIncrement")}getOnlyShowFirstAndLastLabels(){return this._config.axes[0].onlyShowFirstAndLastLabels??!1}setOnlyShowFirstAndLastLabels(e){var t;t=e,this._config.axes[0].onlyShowFirstAndLastLabels=t,this.emitConfigUpdate("setOnlyShowFirstAndLastLabels")}async generateDefaultConfig(){const e=await async function(e=Yi()){return{version:t,type:P,id:e,colorMatch:!0,title:zi({text:await Xi(),visible:!0,font:Ri(ee)}),series:[],axes:await sa()}}();return e.series=[fa({objectIDField:this.layerInfo?.objectIdField})],e}}Mc(Cp,[Wf,uh]);const Ep=e=>{tu(e,null),eu(e,null),Zc(e,null),Jc(e,null)},kp=e=>e.series[0]?.overlays?.comparisonDistribution?.symbol??ga().overlays.comparisonDistribution?.symbol??Vi(),Ip=e=>e.series[0]?.overlays?.mean?.symbol??ga().overlays.mean?.symbol??Vi(),Op=e=>e.series[0]?.overlays?.median?.symbol??ga().overlays.median?.symbol??Vi(),Ap=e=>e.series[0]?.overlays?.standardDeviation?.symbol??ga().overlays.standardDeviation?.symbol??Vi();class Tp extends ec{constructor(){super(...arguments),this._chartType=mc}async setup(e){await this.loadConfigFromLayer(e),this.resolveSetup()}getNumericField(){return e=this._config,e.series[0]?.x??"";var e}async setNumericField(e){await(async(e,t,r)=>{const{layerFieldsInfo:i}=r;Ep(t),t?.series?.[0]&&(t.series[0].x=e);const a=Bs(i,e);Qc(t,0,a);const s=xi((await Gc()).titleLabels.distributionOfField,{valueField:a});t?.title&&(t.title.content.text=s)})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setNumericField")}getBinCount(){return e=this._config,e.series[0]?.binCount??32;var e}setBinCount(e){((e,t)=>{Ep(t),t?.series?.[0]&&(t.series[0].binCount=e)})(e,this._config),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setBinCount")}getBinColor(){return e=this._config,e.series[0]?.fillSymbol??ga().fillSymbol;var e}setBinColor(e){((e,t)=>{t?.series?.[0]&&(t.series[0].fillSymbol={...t.series[0].fillSymbol,...e})})(e,this._config),this.emitConfigUpdate("setBinColor")}getDataTransformationType(){return e=this._config,e.series[0]?.dataTransformationType??bc;var e}setDataTransformationType(e){((e,t)=>{Ep(t),t?.series?.[0]&&(t.series[0].dataTransformationType=e)})(e,this._config),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setDataTransformationType")}getMeanColor(){return Ip(this._config)}setMeanColor(e){((e,t)=>{t.series[0].overlays??=pa(),t.series[0].overlays.mean??=Wi(1),t.series[0].overlays.mean.symbol={...t.series[0].overlays.mean.symbol,...e}})(e,this._config),this.emitConfigUpdate("setMeanColor")}getMedianColor(){return Op(this._config)}setMedianColor(e){((e,t)=>{t.series[0].overlays??=pa(),t.series[0].overlays.median??=Wi(2),t.series[0].overlays.median.symbol={...t.series[0].overlays.median.symbol,...e}})(e,this._config),this.emitConfigUpdate("setMedianColor")}getNormalDistColor(){return kp(this._config)}setNormalDistColor(e){((e,t)=>{t.series[0].overlays??=pa(),t.series[0].overlays.comparisonDistribution??=Wi(4),t.series[0].overlays.comparisonDistribution.symbol={...t.series[0].overlays.comparisonDistribution.symbol,...e}})(e,this._config),this.emitConfigUpdate("setNormalDistColor")}getStandardDevColor(){return Ap(this._config)}setStandardDevColor(e){((e,t)=>{t.series[0].overlays??=pa(),t.series[0].overlays.standardDeviation??=Wi(3),t.series[0].overlays.standardDeviation.symbol={...t.series[0].overlays.standardDeviation.symbol,...e}})(e,this._config),this.emitConfigUpdate("setStandardDevColor")}getShowNormalDistOverlay(){return e=this._config,e.series[0]?.overlays?.comparisonDistribution?.created??!1;var e}setShowNormalDistOverlay(e){((e,t)=>{const r=Wi(0);r.created=e,r.visible=e,r.symbol=kp(t),t?.series?.[0]?.overlays&&(t.series[0].overlays.comparisonDistribution=r)})(e,this._config),this.emitConfigUpdate("setShowNormalDistOverlay")}getShowMeanOverlay(){return e=this._config,e.series[0]?.overlays?.mean?.created??!1;var e}setShowMeanOverlay(e){((e,t)=>{const r=Wi(1);r.created=e,r.visible=e,r.symbol=Ip(t),t?.series?.[0]?.overlays&&(t.series[0].overlays.mean=r)})(e,this._config),this.emitConfigUpdate("setShowMeanOverlay")}getShowMedianOverlay(){return e=this._config,e.series[0]?.overlays?.median?.created??!1;var e}setShowMedianOverlay(e){((e,t)=>{const r=Wi(2);r.created=e,r.visible=e,r.symbol=Op(t),t?.series?.[0]?.overlays&&(t.series[0].overlays.median=r)})(e,this._config),this.emitConfigUpdate("setShowMedianOverlay")}getShowStandardDevOverlay(){return e=this._config,e.series[0]?.overlays?.standardDeviation?.created??!1;var e}setShowStandardDevOverlay(e){((e,t)=>{const r=Wi(3);r.created=e,r.visible=e,r.symbol=Ap(t),t?.series?.[0]?.overlays&&(t.series[0].overlays.standardDeviation=r)})(e,this._config),this.emitConfigUpdate("setShowStandardDevOverlay")}getSeriesOverlay(){return e=this._config,e?.series?.[0]?.overlays;var e}setSeriesOverlays(e){var t,r;t=e,r=this._config,void 0!==r?.series?.[0]&&(r.series[0].overlays=t),this.emitConfigUpdate("setSeriesOverlay")}async generateDefaultConfig(){const e=await async function(e=Yi()){return{version:t,type:P,id:e,colorMatch:!0,title:zi({text:await Xi(),visible:!0,font:Ri(ee)}),subTitle:zi(),footer:zi({text:"",visible:!0,font:Ri(ae)}),background:[255,255,255,255],axes:await ia(L),series:[ga()],legend:Ki()}}();return e}}Mc(Tp,[Xf,Vc,Nc,Jf,dh]);const Lp=(e,t)=>void 0!==t.series[e]?mp(t.series[e]):void 0,Dp=(e,t,r)=>{void 0!==r.series[t]&&yp(e,r.series[t])},qp=(e,t)=>void 0!==t.series[e]?vp(t.series[e]):void 0,$p=(e,t,r)=>{void 0!==r.series[t]&&bp(e,r.series[t])},Up=(e,t)=>t.series?.[e]?.markerSymbol?.color,Bp=(e,t,r)=>{if(void 0!==r.series?.[t]){const i=r.series[t];void 0===i.markerSymbol&&(i.markerSymbol=Zi()),i.markerSymbol.color=e}},Mp=(e,t)=>t.series?.[e]?.markerSymbol?.style,Rp=(e,t,r)=>{if(void 0!==r.series?.[t]){const i=r.series[t];void 0===i.markerSymbol&&(i.markerSymbol=Zi()),i.markerSymbol.style=e}},Np=(e,t)=>t.series?.[e]?.markerSymbol?.size,zp=(e,t,r)=>{if(void 0!==r.series?.[t]){const i=r.series[t];void 0===i.markerSymbol&&(i.markerSymbol=Zi()),i.markerSymbol.size=e}},Vp=(e,t)=>t.series?.[e]?.lineSmoothed??!1,Gp=e=>{const{smoothed:t,seriesIndex:r,config:i}=e;i.series?.[r]&&(i.series[r].lineSmoothed=t)},Qp=(e,t)=>t.series?.[e]?.showArea??!1,Hp=e=>{const{visible:t,seriesIndex:r,config:i}=e;i.series?.[r]&&(i.series[r].showArea=t)},Kp=(e,t)=>t.series?.[e]?.markerVisible??!0,Wp=e=>{const{visible:t,seriesIndex:r,config:i}=e;i.series?.[r]&&(i.series[r].markerVisible=t)},Xp=(e,t)=>t.series?.[e]?.areaColor,Yp=(e,t)=>t.series?.[e]?.stackNegativeValuesToBaseline??!0,Jp=e=>{const{stackNegativeValuesToBaseline:t,seriesIndex:r,config:i}=e;i.series?.[r]&&(i.series[r].stackNegativeValuesToBaseline=t)};class Zp extends Rh{constructor(){super(...arguments),this._chartType=pc}async setup(e){await this.loadConfigFromLayer(e),void 0!==e.config&&this.updateSeriesFromLayerFilter(),await this.initDefaultSeries(),this.resolveSetup()}async generateDefaultConfig(){const e=await async function(e=Yi()){return{version:t,type:P,id:e,colorMatch:!0,rotated:!1,orderOptions:{data:{orderType:W,orderBy:B}},title:zi({text:await Xi(),visible:!0,font:Ri(ee)}),subTitle:zi(),footer:zi({text:"",visible:!0,font:Ri(ae)}),background:[255,255,255,255],axes:await ia(A),series:[],legend:Ki()}}();return e.series=[await oa({objectIDField:this.layerInfo?.objectIdField})],e}async initDefaultSeries(){this.defaultSeries=await oa({objectIDField:this.layerInfo?.objectIdField})}getSeriesLineStyle(e){return Lp(e,this._config)}setSeriesLineStyle(e,t){Dp(e,t,this._config),this.emitConfigUpdate("setSeriesLineStyle")}getSeriesLineWidth(e){return qp(e,this._config)}setSeriesLineWidth(e,t){$p(e,t,this._config),this.emitConfigUpdate("setSeriesLineWidth")}getSeriesMarkerColor(e){return Up(e,this._config)}setSeriesMarkerColor(e,t){Bp(e,t,this._config),this.emitConfigUpdate("setSeriesMarkerColor")}getSeriesMarkerStyle(e){return Mp(e,this._config)}setSeriesMarkerStyle(e,t){Rp(e,t,this._config),this.emitConfigUpdate("setSeriesMarkerStyle")}getSeriesMarkerSize(e){return Np(e,this._config)}setSeriesMarkerSize(e,t){zp(e,t,this._config),this.emitConfigUpdate("setSeriesMarkerSize")}isLineSmoothed(e){return Vp(e,this._config)}setLineSmoothed(e,t){Gp({smoothed:e,seriesIndex:t,config:this._config}),this.emitConfigUpdate("setLineSmoothed")}isAreaVisible(e){return Qp(e,this._config)}setAreaVisible(e,t){Hp({visible:e,seriesIndex:t,config:this._config}),this.emitConfigUpdate("setAreaVisible")}isMarkerVisible(e){return Kp(e,this._config)}setMarkerVisible(e,t){Wp({visible:e,seriesIndex:t,config:this._config}),this.emitConfigUpdate("setMarkerVisible")}getAreaColor(e){return Xp(e,this._config)}setAreaColor(e,t){Hp({visible:!0,seriesIndex:t,config:this._config}),Bh(e,t,this._config),this.emitConfigUpdate("setAreaColor")}isNegativeValuesStackedToBaseline(e){return Yp(e,this._config)}setNegativeValuesStackedToBaseline(e,t){Jp({stackNegativeValuesToBaseline:e,seriesIndex:t,config:this._config}),this.emitConfigUpdate("setNegativeValuesStackedToBaseline")}async resetSeriesStyling(){const e=this.getSeriesLength();for(let t=0;t<e;t+=1){const e=Ui({colorIndex:t,opacity:Ii});if(Bh(e,t,this._config),Bp(e,t,this._config),void 0!==this.layerInfo){const e=this.getSeriesId(t),r=await Dh(this._config,t,this.layerInfo);r!==this.layerInfo.objectIdField&&Uh(r??e,t,this._config)}Dp(this.defaultSeries?.lineSymbol?.style,t,this._config),$p(this.defaultSeries?.lineSymbol?.width,t,this._config),Rp(this.defaultSeries?.markerSymbol?.style,t,this._config),zp(this.defaultSeries?.markerSymbol?.size,t,this._config)}this._config.colorMatch=!0,this.emitConfigUpdate("resetSeriesStyling")}async resetAvailable(){const e=!this.getColorMatch();let t=!1;if(!e){const e=this.getSeriesLength();for(let r=0;r<e;r+=1){if(void 0!==this.layerInfo){const e=await Dh(this._config,r,this.layerInfo),i=this.getSeriesName(r);void 0!==e&&e!==this.layerInfo.objectIdField&&e!==i&&(t=!0)}if(void 0!==this.defaultSeries?.lineSymbol?.style&&this.defaultSeries?.lineSymbol.style!==this.getSeriesLineStyle(r)||void 0!==this.defaultSeries?.lineSymbol?.width&&this.defaultSeries?.lineSymbol.width!==this.getSeriesLineWidth(r)||void 0!==this.defaultSeries?.markerSymbol?.style&&this.defaultSeries?.markerSymbol?.style!==this.getSeriesMarkerStyle(r)||void 0!==this.defaultSeries?.markerSymbol?.size&&this.defaultSeries?.markerSymbol?.size!==this.getSeriesMarkerSize(r)){t=!0;break}}}return e||t}}Mc(Zp,[Xf,Vc,Nc,Yf,Jf,uh,dh,bh]);const eg=(e,t)=>{t.series?.[0]?.slices?.sort(((t,r)=>e.findIndex((e=>t.sliceId===e))-e.findIndex((e=>r.sliceId===e))))},tg=(e,t)=>{t.series?.[0]&&(t.series[0].sliceGrouping=e)},rg=e=>e.series?.[0]?.sliceGrouping?.percentageThreshold,ig=(e,t)=>{t.series?.[0]&&(t.series[0].slices=e)},ag=e=>e.series?.[0]?.x??"";const sg=(e,t)=>{let r=th.valueDesc;const i=e.orderOptions?.data?.orderType??function(e,t){const r=e.series?.[0];return[`${t===rh.Category?r.y:Tc} ${Pc}`]}(e,t),a=e.orderOptions?.data?.orderBy??Pc;return r=i===Oc&&Array.isArray(a)?th.customSort:i===Oc?a===_c?th.labelAsc:th.labelDesc:a===_c?th.valueAsc:th.valueDesc,r},og=Ad((e=>{let t=[];return t=e.series?.[0]?.query?.outStatistics?.map((e=>e.onStatisticField))??[e.series?.[0]?.y??""],[...new Set(t.filter((e=>""!==e)))]}),(e=>e.series)),ng=(e,t)=>{const r=og(e);let i;return i=t===rh.Fields&&0===r.length?ic:e.series?.[0]?.query?.outStatistics?.[0]?.statisticType??ac,i};async function lg(e){const{config:t,layerInfo:r,mode:i}=e,{objectIdField:a}=r??{},s=await da(a),o=ag(t),n=t.series[0]?.dataLabels?.visible??!1,l={...s,x:i===rh.Category?o:Ac,slices:t.series?.[0]?.slices,dataLabels:{...s.dataLabels,visible:n},innerRadiusSize:t.series?.[0]?.innerRadius,sliceGrouping:t.series?.[0]?.sliceGrouping,dataLabelsCharacterLimit:t.series?.[0]?.dataLabelsCharacterLimit,numericValueFormat:t.series?.[0]?.numericValueFormat,percentValueFormat:t.series?.[0]?.percentValueFormat,displayNumericValueOnDataLabel:t.series?.[0]?.displayNumericValueOnDataLabel,displayPercentageOnDataLabel:t.series?.[0]?.displayPercentageOnDataLabel},c=ng(t,i);if(c!==ac&&void 0!==a){const e=`${c}_${a}_0`.toUpperCase();l.y=i===rh.Category?e:Tc,l.query={outStatistics:i===rh.Category?[{statisticType:c,onStatisticField:a,outStatisticFieldName:e}]:[]}}return i===rh.Category&&void 0!==l.query?l.query.groupByFieldsForStatistics=[o]:delete l.query?.groupByFieldsForStatistics,jf(l)}async function cg(e,t,r){const{layerFieldsInfo:i,objectIdField:a}=t,s=ag(e),o=og(e),n=ng(e,r),l=0===o.length||o.includes(a),c=await ma(n),u=l?"":o.map((e=>Bs(i??[],e))).join(", "),d=Bs(i??[],s);let f="";const h=await Gc();let p;return p=r===rh.Fields?0===o.length:""===s,p?f=h.chartType.pieChart:n===ac?f=xi(h.titleLabels.aggrFieldsByCategory,{aggregationFields:l?a:u,category:d}):n===rc?f=xi(h.titleLabels.aggrTypeCategory,{aggregationType:c,category:d}):o.length>0&&(f=d===Ac||Nf(d)||null===d?xi(h.titleLabels.aggrTypeOfAggrFields,{aggregationType:c,aggregationFields:u}):xi(h.titleLabels.aggrTypeOfAggrFieldsByCategory,{aggregationType:c,aggregationFields:u,category:d})),f}const ug=e=>{const{newSortOrderKind:t,config:r,orderByList:i}=e;r.orderOptions??={},r.orderOptions.data=t===th.customSort&&void 0!==i?{orderType:Oc,orderBy:[...i]}:{orderType:t===th.labelAsc||t===th.labelDesc?Oc:Ec,orderBy:t===th.labelAsc||t===th.valueAsc?_c:Pc}};async function dg(e){const{numericFields:t,aggregationType:r,config:i,layerInfo:a,mode:s}=e,o=sg(i,s),n=[],l=await lg({config:i,layerInfo:a,mode:s}),c={...l,query:{...l.query}};if(t.length<=1?c.query.where=l.query?.where:delete c.query.where,r!==ac)if(s===rh.Category){if(t.length>0){const e=t[0],i=`${r}_${t[0]}_0`.toUpperCase();c.y=i,c.query.outStatistics=[{...l.query?.outStatistics?.[0]??{},onStatisticField:e,outStatisticFieldName:i,statisticType:r}]}}else{c.y=Tc;for(let e=0;e<t.length;e+=1)c.query.outStatistics?.push({onStatisticField:t[e],outStatisticFieldName:t[e],statisticType:r})}else c.y=t[0],c.query={};const u=hg(i,s);ug({newSortOrderKind:o,config:i,orderByList:u}),n.push(c),i.series=n}const fg=async e=>{let{newNumericFields:t}=e;const{config:r,layerInfo:i,mode:a}=e,{objectIdField:s}=i??{};let o=ng(r,a);if(t=""===t?[]:t,t="string"==typeof t?[t]:t,void 0!==s&&(0===t.length&&a===rh.Category?(t.push(s),o=rc):o===rc&&t.length>=1&&!t.includes(s)&&(o=ic)),void 0!==i){await dg({config:r,layerInfo:i,numericFields:t,aggregationType:o,mode:a});Qc(r,1,await Hc({config:r,layerInfo:i,numericFields:og(r),aggregationType:ng(r,a)})),r.title&&(r.title.content.text=await cg(r,i,a))}else r.series.forEach((e=>{delete e.query,e.y=t[0]}))},hg=(e,t)=>{let r=[];const i=e.orderOptions?.data?.orderType,a=sg(e,t),s=e.orderOptions?.data?.orderBy;return a===th.customSort&&i===Oc&&Array.isArray(s)&&(r=s),r},pg=e=>{const{values:t,config:r,mode:i}=e;r.orderOptions??={};const a=r.orderOptions?.data?.orderType;sg(r,i)===th.customSort&&a===Oc&&(r.orderOptions.data={orderType:Oc,orderBy:[...t]})};class gg extends ec{constructor(){super(...arguments),this._chartType=fc,this._mode=rh.Category,this._groupedSliceIds=[]}async setup(e){await this.loadConfigFromLayer(e);const{config:t}=e;if(void 0!==t){const e=Xs(t.series);this._mode=e!==Es?rh.Category:rh.Fields}this.resolveSetup()}getCategory(){return ag(this._config)}async setCategory(e){(!Pl(this._config)||""!==e.trim())&&(await(async e=>{const{newCategory:t,config:r,layerInfo:i,mode:a}=e,s=r.series?.length??0,o=sg(r,a);if(r.series.forEach((e=>{e.x=a===rh.Category?t:Ac,void 0!==e.query&&t!==Ac?e.query.groupByFieldsForStatistics=[t]:delete e.query?.groupByFieldsForStatistics})),0===s){const e=[await lg({config:r,layerInfo:i,mode:a})];r.series=e}if(void 0!==o){const e=hg(r,a);ug({newSortOrderKind:o,config:r,orderByList:e})}if(void 0!==i){Qc(r,1,await Hc({config:r,layerInfo:i,numericFields:og(r),aggregationType:ng(r,a)})),r.title&&(r.title.content.text=await cg(r,i,a));const e=a===rh.Fields?og(r).filter((e=>e!==i.objectIdField)):og(r);await fg({newNumericFields:e,config:r,layerInfo:i,mode:a})}})({newCategory:e,config:this._config,layerInfo:this.layerInfo,mode:this._mode}),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setCategory"))}getNumericFields(){return og(this._config)}async setNumericFields(e){"string"==typeof e&&(e=[e]);void 0===this.layerInfo||Bc(this.layerInfo.layerFieldsInfo,e)?(await fg({newNumericFields:e,config:this._config,layerInfo:this.layerInfo,mode:this._mode}),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setNumericFields")):console.log("Invalid numericFields")}getAggregationType(){return ng(this._config,this._mode)}async setAggregationType(e){await(async e=>{const{newAggregationType:t,config:r,layerInfo:i,mode:a}=e,s=og(r);await dg({config:r,layerInfo:i,numericFields:s,aggregationType:t,mode:a}),Qc(r,1,await Hc({config:r,layerInfo:i,numericFields:og(r),aggregationType:ng(r,a)})),r.title&&(r.title.content.text=await cg(r,i,a));const o=r.series?.[0]?.displayNumericValueOnDataLabel,n=r.series?.[0]?.displayPercentageOnDataLabel;r.legend={...r.legend??Ki(),displayNumericValue:o,displayPercentage:n}})({newAggregationType:e,config:this._config,layerInfo:this.layerInfo,mode:this._mode}),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setAggregationType")}getSortOrder(){return sg(this._config,this._mode)}setSortOrder(e,t){ug({newSortOrderKind:e,config:this._config,orderByList:t}),this.emitConfigUpdate("setSortOrder")}getOrderByList(){return hg(this._config,this._mode)}setOrderByList(e){pg({values:e,config:this._config,mode:this._mode}),this.emitConfigUpdate("setOrderByList")}getMode(){return this._mode}setMode(e){this._mode=e,this.emitConfigUpdate("setMode")}async getCustomSortValues(){const e=ag(this._config),t=Xs(this._config.series),r=this.getNumericFields();let i=[];return t===Es?i=r:""!==e.trim()&&t===Cs&&(i=await Rc({category:e,config:this._config,layerInfo:this.layerInfo})),i}moveCustomSortValuesInOrderByList(e,t){const r=hg(this._config,this._mode),[i]=r.splice(e,1);r.splice(t,0,i),pg({values:r,config:this._config,mode:this._mode}),this.emitConfigUpdate("moveCustomSortValuesInOrderByList")}getLeaderLinesSymbol(){return(e=>{for(const t of e.series)if(void 0!==t.ticks?.lineSymbol)return t.ticks.lineSymbol})(this._config)}setLeaderLinesSymbol(e){((e,t)=>{for(const r of t.series)void 0!==r.ticks&&void 0!==e||(r.ticks=ua()),void 0!==e&&(r.ticks.lineSymbol=jf(e))})(e,this._config),this.emitConfigUpdate("setLeaderLinesSymbol")}getSlices(){return e=this._config,e.series?.[0]?.slices;var e}setSlices(e){ig(e,this._config),this.emitConfigUpdate("setSlices")}getGroupedSliceIds(){return this._groupedSliceIds}setGroupedSliceIds(e){this._groupedSliceIds=e,this.emitConfigUpdate("setGroupedSliceIds")}getSliceGrouping(){return e=this._config,e.series?.[0]?.sliceGrouping;var e}setSliceGrouping(e){tg(e,this._config),this.emitConfigUpdate("setSliceGrouping")}getInnerRadiusSize(){return e=this._config,e.series?.[0]?.innerRadius??0;var e}setInnerRadiusSize(e){((e,t)=>{t.series?.[0]&&(t.series[0].innerRadius=e)})(e,this._config),this.emitConfigUpdate("setInnerRadiusSize")}getGroupingThreshold(){return rg(this._config)??0}setGroupingThreshold(e){((e,t)=>{void 0!==t.series?.[0]?.sliceGrouping?t.series[0].sliceGrouping.percentageThreshold=e:t.series[0].sliceGrouping={sliceId:Li,percentageThreshold:e}})(e,this._config),this.emitConfigUpdate("setGroupingThreshold")}getLabelCharacterLimit(){return e=this._config,e.series?.[0]?.dataLabelsCharacterLimit??null;var e}setLabelCharacterLimit(e){((e,t)=>{t.series?.[0]&&(t.series[0].dataLabelsCharacterLimit=e)})(e,this._config),this.emitConfigUpdate("setLabelCharacterLimit")}getDecimalPlaces(){return e=this._config,e.series?.[0]?.numericValueFormat?.intlOptions?.minimumFractionDigits??1;var e}setDecimalPlaces(e){((e,t)=>{void 0!==t.series?.[0]?.numericValueFormat?(t.series[0].numericValueFormat.intlOptions.minimumFractionDigits=e,t.series[0].numericValueFormat.intlOptions.maximumFractionDigits=e):t.series[0].numericValueFormat={...Gi(),intlOptions:{minimumFractionDigits:e,maximumFractionDigits:e}},void 0!==t.series?.[0]?.percentValueFormat?(t.series[0].percentValueFormat.intlOptions.minimumFractionDigits=e,t.series[0].percentValueFormat.intlOptions.maximumFractionDigits=e):t.series[0].percentValueFormat={...Gi(),intlOptions:{minimumFractionDigits:e,maximumFractionDigits:e}}})(e,this._config),this.emitConfigUpdate("setDecimalPlaces")}getDisplayType(){return(e=>{let t;const r=e.series?.[0];return t=!0===r?.displayNumericValueOnDataLabel&&!0===r?.displayPercentageOnDataLabel?ih.Both:!0===r?.displayNumericValueOnDataLabel?ih.Value:ih.Percentage,t})(this._config)}setDisplayType(e){((e,t)=>{const r=e===ih.Value||e===ih.Both,i=e===ih.Percentage||e===ih.Both;t.series?.[0]&&(t.series[0].displayNumericValueOnDataLabel=r,t.series[0].displayPercentageOnDataLabel=i),t.legend&&(t.legend={...t.legend,displayNumericValue:r,displayPercentage:i})})(e,this._config),this.emitConfigUpdate("setDisplayType")}async generateDefaultConfig(){const e=await async function(e=Yi()){return{version:t,type:P,id:e,colorMatch:!0,orderOptions:{data:{orderType:Q,orderBy:M}},title:zi({text:await Xi(),visible:!0,font:Ri(ee)}),subTitle:zi(),footer:zi({text:"",visible:!0,font:Ri(ae)}),background:[255,255,255,255],series:[],legend:{...Ki(),displayNumericValue:!1,displayPercentage:!0}}}();return e.series=[await da(this.layerInfo?.objectIdField)],e}getOriginalSliceName(e){return((e,t)=>t.series?.[0]?.slices?.[e]?.originalLabel)(e,this._config)}getSliceName(e){return((e,t)=>t.series?.[0]?.slices?.[e]?.label)(e,this._config)}setSliceName(e,t){((e,t,r)=>{r.series?.[0]?.slices?.[t]&&(r.series[0].slices[t].label=e)})(e,t,this._config),this.emitConfigUpdate("setSliceName")}getSliceColor(e){return((e,t)=>t.series?.[0]?.slices?.[e]?.fillSymbol?.color)(e,this._config)}setSliceColor(e,t){((e,t,r)=>{const i=r.series?.[0]?.slices?.[t]?.fillSymbol;void 0!==i?(i.color=e,void 0!==i.outline?i.outline.color=e:i.outline={type:sc,color:e}):void 0!==r.series?.[0]?.slices?.[t]&&(r.series[0].slices[t].fillSymbol={type:oc,color:e,outline:{type:sc,color:e}})})(e,t,this._config),this.emitConfigUpdate("setSliceColor")}getOrderOfSlices(){return e=this._config,e.series?.[0]?.slices?.map((e=>e.sliceId));var e}setOrderOfSlices(e){eg(e,this._config),this.emitConfigUpdate("setOrderOfSlices")}moveSeries(e,t){const r=this.getOrderOfSlices();if(void 0!==r){const[i]=r.splice(e,1);r.splice(t,0,i),eg(r,this._config),this.emitConfigUpdate("moveSeries")}}getSliceId(e){return((e,t)=>t.series[0]?.slices?.[e]?.sliceId)(e,this._config)}getSliceIndex(e){return((e,t)=>t.series[0]?.slices?.findIndex((t=>t.sliceId===e)))(e,this._config)}getSlicesLength(){return e=this._config,e.series[0]?.slices?.length??0;var e}resetSlices(){var e;e=this._config,ig(void 0,e),tg({sliceId:Li,percentageThreshold:rg(e)??0},e),this.emitConfigUpdate("resetSlices")}resetAvailable(){const e=!this.getColorMatch();let t=!1;const r=this.getSlices()?.length??0;for(let e=0;e<r;e+=1){const r=this.getOriginalSliceName(e),i=this.getSliceName(e);if(void 0!==r&&r?.toString()!==i?.toString()){t=!0;break}}const i=this.getSliceGrouping();return void 0!==i?.originalLabel&&i?.label!==i.originalLabel&&(t=!0),e||t}}Mc(gg,[Vc,Nc,Jf]);const mg=e=>{tu(e,null),eu(e,null),Zc(e,null),Jc(e,null)},yg=e=>{const{name:t,axisIndex:r,config:i,layerInfo:a}=e,{layerFieldsInfo:s}=a,o=s.find((e=>e.name===t)),n=void 0!==o&&vl(o);su(i,r,n)},vg=async e=>{const{x:t,y:r,config:i,layerInfo:a}=e,{layerFieldsInfo:s}=a,o=Bs(s,t),n=Bs(s,r);if(Nf(t)||Qc(i,0,o),Nf(r)||Qc(i,1,n),!Nf(t)&&!Nf(r)){const e=xi((await Gc()).titleLabels.xAndY,{x:o,y:n});i.title?.content&&(i.title.content.text=e)}},bg=e=>e.series[0]?.x??"",wg=e=>e.series[0]?.y??"",Sg=(e,t)=>{!(t.series[0]?.overlays?.trendLine?.created??!1)&&e&&(t.series[0].overlays??=ra(),t.series[0].overlays.trendLine??=ra().trendLine,t.series[0].overlays.trendLine.created=e),((e,t)=>{t.series[0].overlays??=ra(),t.series[0].overlays.trendLine??=ra().trendLine,t.series[0].overlays.trendLine.visible=e})(e,t)},xg=e=>e.series[0]?.sizePolicy??{type:"sizeScale",field:"",scaleType:"linear",minSize:5,maxSize:30};class _g extends ec{constructor(){super(...arguments),this._chartType=dc}async setup(e){await this.loadConfigFromLayer(e),this.resolveSetup()}getXAxisField(){return bg(this._config)}async setXAxisField(e){await(async(e,t,r)=>{mg(t),t.series[0]&&(t.series[0].x=e),await vg({x:e,y:wg(t),config:t,layerInfo:r}),yg({name:e,axisIndex:0,config:t,layerInfo:r})})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setXAxisField")}getYAxisField(){return wg(this._config)}async setYAxisField(e){await(async(e,t,r)=>{mg(t),t.series[0]&&(t.series[0].y=e),await vg({x:bg(t),y:e,config:t,layerInfo:r}),yg({name:e,axisIndex:1,config:t,layerInfo:r})})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setYAxisField")}getShowLinearTrend(){return e=this._config,(e.series[0]?.overlays?.trendLine?.visible&&e.series[0]?.overlays?.trendLine?.created)??!1;var e}setShowLinearTrend(e){Sg(e,this._config),this.emitConfigUpdate("setShowLinearTrend")}getLinearTrendSymbol(){return e=this._config,e.series[0]?.overlays?.trendLine?.symbol??{};var e}setLinearTrendSymbol(e){((e,t)=>{t.series[0].overlays??=ra(),t.series[0].overlays.trendLine??=ra().trendLine,t.series[0].overlays.trendLine.symbol=e})(e,this._config),this.emitConfigUpdate("setLinearTrendSymbol")}getFixedMarkerSymbol(){return e=this._config,e.series[0]?.markerSymbol??{};var e}setFixedMarkerSymbol(e){((e,t)=>{t.series[0]&&(t.series[0].markerSymbol=e)})(e,this._config),this.emitConfigUpdate("setFixedMarkerSymbol")}getSizePolicy(){return xg(this._config)}setSizePolicy(e){zf(xg(this._config),e)||(((e,t)=>{t.series[0]&&(void 0!==e&&""!==e.field?.trim()?t.series[0].sizePolicy={...t.series[0].sizePolicy,...e}:t.series[0].sizePolicy=void 0)})(e,this._config),this.emitConfigUpdate("setSizePolicy"))}getSeriesOverlays(){return e=this._config,e?.series?.[0]?.overlays;var e}setSeriesOverlays(e){var t,r;t=e,r=this._config,void 0!==r?.series[0]&&(r.series[0].overlays=t),this.emitConfigUpdate("setSeriesOverlays")}async generateDefaultConfig(){const e=await async function(e=Yi()){return{version:t,type:P,id:e,colorMatch:!0,title:zi({text:await Xi(),visible:!0,font:Ri(ee)}),subTitle:zi(),footer:zi({text:"",visible:!0,font:Ri(ae)}),background:[255,255,255,255],axes:await ia(k),series:[{type:k,id:k,name:k,x:"",y:"",markerSymbol:ta(),overlays:ra(),dataLabels:zi({text:"",visible:!1,font:Ri(te)})}],legend:Ki()}}();return e}}Mc(_g,[Xf,Vc,Nc,Jf,uh,dh]);class Pg extends Rh{constructor(){super(...arguments),this._chartType=vc}getConfig(){return this._config}async setup(e){await this.loadConfigFromLayer(e),void 0!==e.config&&(El(e.config?.series)&&await this.initDefaultSeries(),await this.updateSeriesFromLayerFilter()),this.resolveSetup()}async generateDefaultConfig(){const e=await ha();return e.series=[await la({objectIDField:this.layerInfo?.objectIdField})],e}async initDefaultSeries(){this.defaultSeries=await oa({objectIDField:this.layerInfo?.objectIdField})}getSeriesLineStyle(e){return Lp(e,this._config)}setSeriesLineStyle(e,t){const r=this._config.series?.[t];jl(r)&&(Dp(e,t,this._config),this.emitConfigUpdate("setSeriesLineStyle"))}getSeriesLineWidth(e){return qp(e,this._config)}setSeriesLineWidth(e,t){const r=this._config.series?.[t];jl(r)&&($p(e,t,this._config),this.emitConfigUpdate("setSeriesLineWidth"))}getSeriesMarkerColor(e){return Up(e,this._config)}setSeriesMarkerColor(e,t){const r=this._config.series?.[t];jl(r)&&(Bp(e,t,this._config),this.emitConfigUpdate("setSeriesMarkerColor"))}getSeriesMarkerStyle(e){return Mp(e,this._config)}setSeriesMarkerStyle(e,t){const r=this._config.series?.[t];jl(r)&&(Rp(e,t,this._config),this.emitConfigUpdate("setSeriesMarkerStyle"))}getSeriesMarkerSize(e){return Np(e,this._config)}setSeriesMarkerSize(e,t){const r=this._config.series?.[t];jl(r)&&(zp(e,t,this._config),this.emitConfigUpdate("setSeriesMarkerSize"))}isLineSmoothed(e){return Vp(e,this._config)}setLineSmoothed(e,t){const r=this._config.series?.[t];jl(r)&&(Gp({smoothed:e,seriesIndex:t,config:this._config}),this.emitConfigUpdate("setLineSmoothed"))}isAreaVisible(e){return Qp(e,this._config)}setAreaVisible(e,t){const r=this._config.series?.[t];jl(r)&&(Hp({visible:e,seriesIndex:t,config:this._config}),this.emitConfigUpdate("setAreaVisible"))}isMarkerVisible(e){return Kp(e,this._config)}setMarkerVisible(e,t){const r=this._config.series?.[t];jl(r)&&(Wp({visible:e,seriesIndex:t,config:this._config}),this.emitConfigUpdate("setMarkerVisible"))}getAreaColor(e){return Xp(e,this._config)}setAreaColor(e,t){const r=this._config.series?.[t];jl(r)&&(Hp({visible:!0,seriesIndex:t,config:this._config}),Bh(e,t,this._config),this.emitConfigUpdate("setAreaColor"))}isNegativeValuesStackedToBaseline(e){return Yp(e,this._config)}setNegativeValuesStackedToBaseline(e,t){const r=this._config.series?.[t];jl(r)&&(Jp({stackNegativeValuesToBaseline:e,seriesIndex:t,config:this._config}),this.emitConfigUpdate("setNegativeValuesStackedToBaseline"))}getSeriesHideOversizedStackedLabels(e){return Dc(e,this._config)}setSeriesHideOversizedStackedLabels(e,t){const r=this._config.series?.[t];Cl(r)&&(qc(e,t,this._config),this.emitConfigUpdate("setSeriesHideOversizedStackedLabels"))}}function Fg(e,t){return void 0!==e&&e.getChartType()===t}Mc(Pg,[Xf,Vc,Nc,Yf,Jf,uh,dh,bh]),exports.BarChartModel=Nh,exports.BoxPlotDataSortingKinds=eh,exports.BoxPlotModel=wp,exports.ChartModel=ec,exports.ColorFormatKeys={Background:"background"},exports.ComboBarLineChartModel=Pg,exports.FormatKeys={TextElements:"textElements",XAxisTitle:"xAxisTitle",YAxisTitle:"yAxisTitle",AxisLabels:"axisLabels",GuideLabels:"guideLabels",Title:"title",LegendText:"legendText",LegendTitle:"legendTitle",Description:"description",DataLabels:"dataLabels",Background:"background",LeaderLines:"leaderLines",AxisLines:"axisLines",GridLines:"gridLines"},exports.GaugeModel=Cp,exports.GuideOrientation=ah,exports.HistogramModel=Tp,exports.LineChartModel=Zp,exports.LineFormatKeys={AxisLines:"axisLines",GridLines:"gridLines",LeaderLines:"leaderLines"},exports.ModelWithBasicXAxis=Wf,exports.ModelWithColorMatch=Nc,exports.ModelWithDataLabels=Jf,exports.ModelWithGuides=ch,exports.ModelWithLegend=Vc,exports.ModelWithRotation=Yf,exports.ModelWithTemporalBinning=bh,exports.ModelWithXGuides=uh,exports.ModelWithXYAxes=Xf,exports.ModelWithYGuides=dh,exports.PieChartDataModes=rh,exports.PieChartDataSortingKinds=th,exports.PieChartModel=gg,exports.PieChartSlicesDisplay=ih,exports.ScatterPlotModel=_g,exports.SerialChartDataSortingKinds=Zf,exports.SerialChartModel=Rh,exports.TextFormatKeys={Title:"title",XAxisTitle:"xAxisTitle",YAxisTitle:"yAxisTitle",AxisLabels:"axisLabels",GuideLabels:"guideLabels",LegendText:"legendText",LegendTitle:"legendTitle",Description:"description",DataLabels:"dataLabels"},exports.createModel=async function(e){const{config:t,layer:r}=e,i=e.chartType;let a;switch(i){case gc:a=new Nh;break;case pc:a=new Zp;break;case fc:a=new gg;break;case mc:a=new Tp;break;case dc:a=new _g;break;case yc:a=new wp;break;case hc:a=new Cp;break;default:a=void 0}return await(a?.setup({layer:r,config:t})),void 0!==i&&Fg(a,i)?a:void 0},exports.isBarChartModel=function(e){return void 0!==e&&e.getChartType()===gc},exports.isBoxPlotModel=function(e){return void 0!==e&&e.getChartType()===yc},exports.isChartModel=function(e){return void 0!==e&&"getConfig"in e},exports.isLineChartModel=function(e){return void 0!==e&&e.getChartType()===pc},exports.isModelOfType=Fg,exports.isModelWithBasicXAxis=function(e){return void 0!==e&&"getXAxisTitleText"in e},exports.isModelWithDataLabels=function(e){return void 0!==e&&"getDataLabelsVisibility"in e},exports.isModelWithGuides=function(e){return void 0!==e&&"getGuideVisibility"in e},exports.isModelWithLegend=function(e){return void 0!==e&&"getLegendVisibility"in e},exports.isModelWithRotation=function(e){return void 0!==e&&"getRotatedState"in e},exports.isModelWithTemporalBinning=function(e){return void 0!==e&&"getTimeIntervalSize"in e},exports.isModelWithXGuides=function(e){return void 0!==e&&"addXAxisGuide"in e},exports.isModelWithXYAxes=function(e){return void 0!==e&&[gc,yc,mc,dc,pc,vc].includes(e.getChartType())&&"getYAxisTitleText"in e},exports.isModelWithYGuides=function(e){return void 0!==e&&"addYAxisGuide"in e},exports.isPieChartModel=function(e){return void 0!==e&&e.getChartType()===fc},exports.isScatterPlotModel=function(e){return void 0!==e&&e.getChartType()===dc};
