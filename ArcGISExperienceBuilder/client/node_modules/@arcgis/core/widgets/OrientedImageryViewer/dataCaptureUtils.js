/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
*/
import e from"../../core/Error.js";import{or as o}from"../../layers/orientedImagery/transformations/utils.js";import{defaultImageGeometryField as t,defaultOIObjectIDField as r}from"./constants.js";import{dataCaptureFeatureSymbol as n}from"./symbols.js";function i(e,t,r){const n=e.toLowerCase(),i=t.toLowerCase()===n,l=r?.toLowerCase()===n;return o(i,l)}function l(e){return"point"===e||"polygon"===e||"polyline"===e}function a(e,o,t){return l(e.geometryType)&&2===e.fields.filter((({name:e,type:r,alias:n})=>i(t,e,n)||i(o,e,n)&&"blob"===r)).length}function y(e){return"feature"===e.type&&m(e)}function m(e){return"point"===e.geometryType||"polygon"===e.geometryType||"polyline"===e.geometryType}function s(e,o,t){if(e?.geometryType!==o||!e?.renderer)return;const{renderer:r}=e,i=n(o)?.(),l=("symbol"in r?r.symbol:"defaultSymbol"in r?r.defaultSymbol:r.getSymbol())??i;l&&(t[`${o}Symbol`]=l)}function f(o,n,l){const a=o.fields.find((({name:e,alias:o,type:r})=>i(n?.length?n:t,e,o)&&"blob"===r)),y=o.fields.find((({name:e,alias:o})=>i(l?.length?l:r,e,o)));if(!a||!y)throw new e("invalid-data-capture-layer","Data capture layer is not configured correctly.",{layer:o,imageGeometryField:a,oiObjectIdField:y});return{imageGeometryField:a,oiObjectIdField:y}}export{s as configureSketchTool,f as extractFieldsFromDataCaptureLayer,a as isValidDataCaptureLayer,y as isValidOverlayLayer,m as supportedDigitigedGeometryType};
