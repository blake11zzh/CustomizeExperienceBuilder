/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See LICENSE.md for details.
 * v4.32.1
 */
'use strict';

function _interopNamespace(e) {
	if (e && e.__esModule) return e;
	var n = Object.create(null);
	if (e) {
		Object.keys(e).forEach(function (k) {
			if (k !== 'default') {
				var d = Object.getOwnPropertyDescriptor(e, k);
				Object.defineProperty(n, k, d.get ? d : {
					enumerable: true,
					get: function () {
						return e[k];
					}
				});
			}
		});
	}
	n['default'] = e;
	return Object.freeze(n);
}

const e="18.1.0",t="esriFieldTypeDouble",r="esriFieldTypeInteger",i="esriFieldTypeSingle",a="esriFieldTypeSmallInteger",s="count",o="sum",n="min",l="max",c="avg",u="var",d="percentile_cont",f="percentile_disc",h="envelope-aggregate",p="no_aggregation",g="esriSLSSolid",m="esriSMSCircle",y="esriSFSSolid",v="center",b="middle",w="esriSLS",S="esriSMS",x="esriSFS",_="chart",F="chartOverlay",j="chartOverlays",P="chartAxis",C="number",E="scatterSeries",k="pieSeries",I="gaugeSeries",O="lineSeries",A="barSeries",T="histogramSeries",L="boxPlotSeries",D="radarSeries",$="comboLineAndBarSeries",U="none",B="ASC",R="DESC",N="hide",M="same",z="newer",V="older",q="unrecognized",G="arcgis-charts-y-value",Q="arcgis-charts-mean",H="arcgis-charts-median",K="arcgis-charts-category",X="arcgis_charts_pie_from_fields_name",W="axisLabels",Y="guideLabel",J="axisTitle",Z="chartTitle",ee="dataLabels",te="legendTitle",re="legendText",ie="descriptionText",ae={Arabic:"ar",ArabicLatin:"ar-u-nu-latn",Bosnian:"bs",Bulgarian:"bg",Catalan:"ca",Czech:"cs",Danish:"da",German:"de",Greek:"el",English:"en",EnglishUSA:"en-US",Spanish:"es",Estonian:"et",Finnish:"fi",French:"fr",Hebrew:"he",Croatian:"hr",Hungarian:"hu",Indonesian:"id",Italian:"it",Japanese:"ja",Korean:"ko",Lithuanian:"lt",Latvian:"lv",NorwegianBokml:"no",Dutch:"nl",Polish:"pl",PortugueseBrazil:"pt-BR",PortuguesePortugal:"pt-PT",Romanian:"ro",Russian:"ru",Serbian:"sr",Slovenian:"sl",Slovak:"sk",Swedish:"sv",Thai:"th",Turkish:"tr",Ukrainian:"uk",Vietnamese:"vi",ChineseChina:"zh-CN",ChineseHongKong:"zh-HK",ChineseTaiwan:"zh-TW"},se=[...Object.values(ae),"en-AU","en-GB","es-ES","es-MX","de-CH","de-DE","de-AT","it-CH","it-IT"];var oe="object"==typeof global&&global&&global.Object===Object&&global,ne="object"==typeof self&&self&&self.Object===Object&&self,le=oe||ne||Function("return this")(),ce=le.Symbol,ue=Object.prototype,de=ue.hasOwnProperty,fe=ue.toString,he=ce?ce.toStringTag:void 0,pe=Object.prototype.toString,ge=ce?ce.toStringTag:void 0;function me(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ge&&ge in Object(e)?function(e){var t=de.call(e,he),r=e[he];try{e[he]=void 0;var i=!0;}catch(e){}var a=fe.call(e);return i&&(t?e[he]=r:delete e[he]),a}(e):function(e){return pe.call(e)}(e)}function ye(e){return null!=e&&"object"==typeof e}function ve(e,t){for(var r=-1,i=null==e?0:e.length,a=Array(i);++r<i;)a[r]=t(e[r],r,e);return a}var be=Array.isArray,we=ce?ce.prototype:void 0,Se=we?we.toString:void 0;function xe(e){if("string"==typeof e)return e;if(be(e))return ve(e,xe)+"";if(function(e){return "symbol"==typeof e||ye(e)&&"[object Symbol]"==me(e)}(e))return Se?Se.call(e):"";var t=e+"";return "0"==t&&1/e==-1/0?"-0":t}function _e(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Fe(e){return e}function je(e){if(!_e(e))return !1;var t=me(e);return "[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var Pe,Ce=le["__core-js_shared__"],Ee=(Pe=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||""))?"Symbol(src)_1."+Pe:"",ke=Function.prototype.toString;function Ie(e){if(null!=e){try{return ke.call(e)}catch(e){}try{return e+""}catch(e){}}return ""}var Oe=/^\[object .+?Constructor\]$/,Ae=Function.prototype,Te=Object.prototype,Le=Ae.toString,De=Te.hasOwnProperty,$e=RegExp("^"+Le.call(De).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ue(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return !(!_e(e)||(t=e,Ee&&Ee in t))&&(je(e)?$e:Oe).test(Ie(e));var t;}(r)?r:void 0}var Be=Ue(le,"WeakMap"),Re=Object.create,Ne=function(){function e(){}return function(t){if(!_e(t))return {};if(Re)return Re(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),Me=Ne;function ze(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Ve,qe,Ge,Qe=Date.now,He=function(){try{var e=Ue(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Ke=He,Xe=Ke?function(e,t){return Ke(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r;}:Fe,We=(Ve=Xe,qe=0,Ge=0,function(){var e=Qe(),t=16-(e-Ge);if(Ge=e,t>0){if(++qe>=800)return arguments[0]}else qe=0;return Ve.apply(void 0,arguments)}),Ye=/^(?:0|[1-9]\d*)$/;function Je(e,t){var r=typeof e;return !!(t=t??9007199254740991)&&("number"==r||"symbol"!=r&&Ye.test(e))&&e>-1&&e%1==0&&e<t}function Ze(e,t,r){"__proto__"==t&&Ke?Ke(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r;}function et(e,t){return e===t||e!=e&&t!=t}var tt=Object.prototype.hasOwnProperty;function rt(e,t,r){var i=e[t];tt.call(e,t)&&et(i,r)&&(void 0!==r||t in e)||Ze(e,t,r);}function it(e,t,r,i){var a=!r;r||(r={});for(var s=-1,o=t.length;++s<o;){var n=t[s],l=i?i(r[n],e[n],n,r,e):void 0;void 0===l&&(l=e[n]),a?Ze(r,n,l):rt(r,n,l);}return r}var at=Math.max;function st(e,t){return We(function(e,t,r){return t=at(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,s=at(i.length-t,0),o=Array(s);++a<s;)o[a]=i[t+a];a=-1;for(var n=Array(t+1);++a<t;)n[a]=i[a];return n[t]=r(o),ze(e,this,n)}}(e,t,Fe),e+"")}function ot(e){return "number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function nt(e){return null!=e&&ot(e.length)&&!je(e)}function lt(e,t,r){if(!_e(r))return !1;var i=typeof t;return !!("number"==i?nt(r)&&Je(t,r.length):"string"==i&&t in r)&&et(r[t],e)}var ct=Object.prototype;function ut(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ct)}function dt(e){return ye(e)&&"[object Arguments]"==me(e)}var ft=Object.prototype,ht=ft.hasOwnProperty,pt=ft.propertyIsEnumerable,gt=dt(function(){return arguments}())?dt:function(e){return ye(e)&&ht.call(e,"callee")&&!pt.call(e,"callee")},mt="object"==typeof exports&&exports&&!exports.nodeType&&exports,yt=mt&&"object"==typeof module&&module&&!module.nodeType&&module,vt=yt&&yt.exports===mt?le.Buffer:void 0,bt=(vt?vt.isBuffer:void 0)||function(){return !1},wt={};function St(e){return function(t){return e(t)}}wt["[object Float32Array]"]=wt["[object Float64Array]"]=wt["[object Int8Array]"]=wt["[object Int16Array]"]=wt["[object Int32Array]"]=wt["[object Uint8Array]"]=wt["[object Uint8ClampedArray]"]=wt["[object Uint16Array]"]=wt["[object Uint32Array]"]=!0,wt["[object Arguments]"]=wt["[object Array]"]=wt["[object ArrayBuffer]"]=wt["[object Boolean]"]=wt["[object DataView]"]=wt["[object Date]"]=wt["[object Error]"]=wt["[object Function]"]=wt["[object Map]"]=wt["[object Number]"]=wt["[object Object]"]=wt["[object RegExp]"]=wt["[object Set]"]=wt["[object String]"]=wt["[object WeakMap]"]=!1;var xt="object"==typeof exports&&exports&&!exports.nodeType&&exports,_t=xt&&"object"==typeof module&&module&&!module.nodeType&&module,Ft=_t&&_t.exports===xt&&oe.process,jt=function(){try{return _t&&_t.require&&_t.require("util").types||Ft&&Ft.binding&&Ft.binding("util")}catch(e){}}(),Pt=jt&&jt.isTypedArray,Ct=Pt?St(Pt):function(e){return ye(e)&&ot(e.length)&&!!wt[me(e)]},Et=Object.prototype.hasOwnProperty;function kt(e,t){var r=be(e),i=!r&&gt(e),a=!r&&!i&&bt(e),s=!r&&!i&&!a&&Ct(e),o=r||i||a||s,n=o?function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}(e.length,String):[],l=n.length;for(var c in e)!t&&!Et.call(e,c)||o&&("length"==c||a&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Je(c,l))||n.push(c);return n}function It(e,t){return function(r){return e(t(r))}}var Ot=It(Object.keys,Object),At=Object.prototype.hasOwnProperty;function Tt(e){if(!ut(e))return Ot(e);var t=[];for(var r in Object(e))At.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Lt(e){return nt(e)?kt(e):Tt(e)}var Dt=Object.prototype.hasOwnProperty;function $t(e){return nt(e)?kt(e,!0):function(e){if(!_e(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=ut(e),r=[];for(var i in e)("constructor"!=i||!t&&Dt.call(e,i))&&r.push(i);return r}(e)}var Ut,Bt=(Ut=function(e,t,r,i){it(t,$t(t),e,i);},st((function(e,t){var r=-1,i=t.length,a=i>1?t[i-1]:void 0,s=i>2?t[2]:void 0;for(a=Ut.length>3&&"function"==typeof a?(i--,a):void 0,s&&lt(t[0],t[1],s)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var o=t[r];o&&Ut(e,o,0,a);}return e}))),Rt=Bt,Nt=Ue(Object,"create"),Mt=Object.prototype.hasOwnProperty,zt=Object.prototype.hasOwnProperty;function Vt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1]);}}function qt(e,t){for(var r=e.length;r--;)if(et(e[r][0],t))return r;return -1}Vt.prototype.clear=function(){this.__data__=Nt?Nt(null):{},this.size=0;},Vt.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Vt.prototype.get=function(e){var t=this.__data__;if(Nt){var r=t[e];return "__lodash_hash_undefined__"===r?void 0:r}return Mt.call(t,e)?t[e]:void 0},Vt.prototype.has=function(e){var t=this.__data__;return Nt?void 0!==t[e]:zt.call(t,e)},Vt.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Nt&&void 0===t?"__lodash_hash_undefined__":t,this};var Gt=Array.prototype.splice;function Qt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1]);}}Qt.prototype.clear=function(){this.__data__=[],this.size=0;},Qt.prototype.delete=function(e){var t=this.__data__,r=qt(t,e);return !(r<0||(r==t.length-1?t.pop():Gt.call(t,r,1),--this.size,0))},Qt.prototype.get=function(e){var t=this.__data__,r=qt(t,e);return r<0?void 0:t[r][1]},Qt.prototype.has=function(e){return qt(this.__data__,e)>-1},Qt.prototype.set=function(e,t){var r=this.__data__,i=qt(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this};var Ht=Ue(le,"Map");function Kt(e,t){var r=e.__data__;return function(e){var t=typeof e;return "string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function Xt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1]);}}function Wt(e){return null==e?"":xe(e)}function Yt(e,t){for(var r=-1,i=t.length,a=e.length;++r<i;)e[a+r]=t[r];return e}Xt.prototype.clear=function(){this.size=0,this.__data__={hash:new Vt,map:new(Ht||Qt),string:new Vt};},Xt.prototype.delete=function(e){var t=Kt(this,e).delete(e);return this.size-=t?1:0,t},Xt.prototype.get=function(e){return Kt(this,e).get(e)},Xt.prototype.has=function(e){return Kt(this,e).has(e)},Xt.prototype.set=function(e,t){var r=Kt(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this};var Jt=It(Object.getPrototypeOf,Object),Zt=Function.prototype,er=Object.prototype,tr=Zt.toString,rr=er.hasOwnProperty,ir=tr.call(Object);function ar(e){if(!ye(e))return !1;var t=me(e);return "[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!function(e){if(!ye(e)||"[object Object]"!=me(e))return !1;var t=Jt(e);if(null===t)return !0;var r=rr.call(t,"constructor")&&t.constructor;return "function"==typeof r&&r instanceof r&&tr.call(r)==ir}(e)}var sr=st((function(e,t){try{return ze(e,void 0,t)}catch(e){return ar(e)?e:new Error(e)}})),or=sr;function nr(e){var t=this.__data__=new Qt(e);this.size=t.size;}nr.prototype.clear=function(){this.__data__=new Qt,this.size=0;},nr.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},nr.prototype.get=function(e){return this.__data__.get(e)},nr.prototype.has=function(e){return this.__data__.has(e)},nr.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Qt){var i=r.__data__;if(!Ht||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new Xt(i);}return r.set(e,t),this.size=r.size,this};var lr="object"==typeof exports&&exports&&!exports.nodeType&&exports,cr=lr&&"object"==typeof module&&module&&!module.nodeType&&module,ur=cr&&cr.exports===lr?le.Buffer:void 0,dr=ur?ur.allocUnsafe:void 0;function fr(){return []}var hr=Object.prototype.propertyIsEnumerable,pr=Object.getOwnPropertySymbols,gr=pr?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,i=null==e?0:e.length,a=0,s=[];++r<i;){var o=e[r];t(o)&&(s[a++]=o);}return s}(pr(e),(function(t){return hr.call(e,t)})))}:fr,mr=gr,yr=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Yt(t,mr(e)),e=Jt(e);return t}:fr,vr=yr;function br(e,t,r){var i=t(e);return be(e)?i:Yt(i,r(e))}function wr(e){return br(e,Lt,mr)}function Sr(e){return br(e,$t,vr)}var xr=Ue(le,"DataView"),_r=Ue(le,"Promise"),Fr=Ue(le,"Set"),jr="[object Map]",Pr="[object Promise]",Cr="[object Set]",Er="[object WeakMap]",kr="[object DataView]",Ir=Ie(xr),Or=Ie(Ht),Ar=Ie(_r),Tr=Ie(Fr),Lr=Ie(Be),Dr=me;(xr&&Dr(new xr(new ArrayBuffer(1)))!=kr||Ht&&Dr(new Ht)!=jr||_r&&Dr(_r.resolve())!=Pr||Fr&&Dr(new Fr)!=Cr||Be&&Dr(new Be)!=Er)&&(Dr=function(e){var t=me(e),r="[object Object]"==t?e.constructor:void 0,i=r?Ie(r):"";if(i)switch(i){case Ir:return kr;case Or:return jr;case Ar:return Pr;case Tr:return Cr;case Lr:return Er}return t});var $r=Dr,Ur=Object.prototype.hasOwnProperty,Br=le.Uint8Array;function Rr(e){var t=new e.constructor(e.byteLength);return new Br(t).set(new Br(e)),t}var Nr=/\w*$/,Mr=ce?ce.prototype:void 0,zr=Mr?Mr.valueOf:void 0;var Vr=jt&&jt.isMap,qr=Vr?St(Vr):function(e){return ye(e)&&"[object Map]"==$r(e)},Gr=jt&&jt.isSet,Qr=Gr?St(Gr):function(e){return ye(e)&&"[object Set]"==$r(e)},Hr="[object Arguments]",Kr="[object Function]",Xr="[object Object]",Wr={};function Yr(e,t,r,i,a,s){var o,n=1&t,l=2&t,c=4&t;if(r&&(o=a?r(e,i,a,s):r(e)),void 0!==o)return o;if(!_e(e))return e;var u=be(e);if(u){if(o=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Ur.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!n)return function(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}(e,o)}else {var d=$r(e),f=d==Kr||"[object GeneratorFunction]"==d;if(bt(e))return function(e,t){if(t)return e.slice();var r=e.length,i=dr?dr(r):new e.constructor(r);return e.copy(i),i}(e,n);if(d==Xr||d==Hr||f&&!a){if(o=l||f?{}:function(e){return "function"!=typeof e.constructor||ut(e)?{}:Me(Jt(e))}(e),!n)return l?function(e,t){return it(e,vr(e),t)}(e,function(e,t){return e&&it(t,$t(t),e)}(o,e)):function(e,t){return it(e,mr(e),t)}(e,function(e,t){return e&&it(t,Lt(t),e)}(o,e))}else {if(!Wr[d])return a?e:{};o=function(e,t,r){var i,a,s,o=e.constructor;switch(t){case"[object ArrayBuffer]":return Rr(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return function(e,t){var r=t?Rr(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var r=t?Rr(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,r);case"[object Map]":case"[object Set]":return new o;case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return (s=new(a=e).constructor(a.source,Nr.exec(a))).lastIndex=a.lastIndex,s;case"[object Symbol]":return i=e,zr?Object(zr.call(i)):{}}}(e,d,n);}}s||(s=new nr);var h=s.get(e);if(h)return h;s.set(e,o),Qr(e)?e.forEach((function(i){o.add(Yr(i,t,r,i,e,s));})):qr(e)&&e.forEach((function(i,a){o.set(a,Yr(i,t,r,a,e,s));}));var p=u?void 0:(c?l?Sr:wr:l?$t:Lt)(e);return function(e,t){for(var r=-1,i=null==e?0:e.length;++r<i&&!1!==t(e[r],r););}(p||e,(function(i,a){p&&(i=e[a=i]),rt(o,a,Yr(i,t,r,a,e,s));})),o}function Jr(e){return Yr(e,5)}Wr[Hr]=Wr["[object Array]"]=Wr["[object ArrayBuffer]"]=Wr["[object DataView]"]=Wr["[object Boolean]"]=Wr["[object Date]"]=Wr["[object Float32Array]"]=Wr["[object Float64Array]"]=Wr["[object Int8Array]"]=Wr["[object Int16Array]"]=Wr["[object Int32Array]"]=Wr["[object Map]"]=Wr["[object Number]"]=Wr[Xr]=Wr["[object RegExp]"]=Wr["[object Set]"]=Wr["[object String]"]=Wr["[object Symbol]"]=Wr["[object Uint8Array]"]=Wr["[object Uint8ClampedArray]"]=Wr["[object Uint16Array]"]=Wr["[object Uint32Array]"]=!0,Wr["[object Error]"]=Wr[Kr]=Wr["[object WeakMap]"]=!1;var ei,ti=(ei={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},function(e){return null==ei?void 0:ei[e]}),ri=/[&<>"']/g,ii=RegExp(ri.source),ai=Object.prototype.hasOwnProperty;function si(e){if(null==e)return !0;if(nt(e)&&(be(e)||"string"==typeof e||"function"==typeof e.splice||bt(e)||Ct(e)||gt(e)))return !e.length;var t=$r(e);if("[object Map]"==t||"[object Set]"==t)return !e.size;if(ut(e))return !Tt(e).length;for(var r in e)if(ai.call(e,r))return !1;return !0}var oi=Object.prototype,ni=oi.hasOwnProperty;function li(e,t,r,i){return void 0===e||et(e,oi[r])&&!ni.call(i,r)?t:e}var ci={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function ui(e){return "\\"+ci[e]}var di=/<%=([\s\S]+?)%>/g,fi={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:di,variable:"",imports:{_:{escape:function(e){return (e=Wt(e))&&ii.test(e)?e.replace(ri,ti):e}}}},hi=/\b__p \+= '';/g,pi=/\b(__p \+=) '' \+/g,gi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mi=/[()=,{}\[\]\/\s]/,yi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,vi=/($^)/,bi=/['\n\r\u2028\u2029\\]/g,wi=Object.prototype.hasOwnProperty;function Si(e,t){return function(e,t,r){var i=fi.imports._.templateSettings||fi;r&&lt(e,t,r)&&(t=void 0),e=Wt(e),t=Rt({},t,i,li);var a,s,o=Rt({},t.imports,i.imports,li),n=Lt(o),l=function(e,t){return ve(t,(function(t){return e[t]}))}(o,n),c=0,u=t.interpolate||vi,d="__p += '",f=RegExp((t.escape||vi).source+"|"+u.source+"|"+(u===di?yi:vi).source+"|"+(t.evaluate||vi).source+"|$","g"),h=wi.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(f,(function(t,r,i,o,n,l){return i||(i=o),d+=e.slice(c,l).replace(bi,ui),r&&(a=!0,d+="' +\n__e("+r+") +\n'"),n&&(s=!0,d+="';\n"+n+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=l+t.length,t})),d+="';\n";var p=wi.call(t,"variable")&&t.variable;if(p){if(mi.test(p))throw new Error("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(s?d.replace(hi,""):d).replace(pi,"$1").replace(gi,"$1;"),d="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=or((function(){return Function(n,h+"return "+d).apply(void 0,l)}));if(g.source=d,ar(g))throw g;return g}(e)(t)}function xi(e,t){let r=ae.English;const i=function(e){let t=e;if(void 0!==e&&e.includes("-")){const[r,i]=e.split("-");t=`${r}-${i.toUpperCase()}`;}return t}(e);if(void 0!==i)if(t.includes(i))r=i;else {const e=function(e){const t=e?.match(/^([a-z]{2})-([A-Z]{2})$/u);let r=ae.English;return null!=t&&t?.length>1?r=t[1]:2===e?.length&&e.toLowerCase()===e&&(r=e),r}(i);t.includes(e)?r=e:"nb"===e&&(r="no");}return r}function _i(e,t){return function t(r){let i;return i=void 0===r||r===document||r===window?null:r.closest(e)||t(r.getRootNode().host),i}(t)}function Fi(e=document.documentElement){const t=_i("[lang]",e),r=t?.lang??window.navigator.language,i=Object.values(ae),a=Object.values(se),s=xi(r,i);let o=xi(r,a);return o="ar"===o?"ar-u-nu-latn":o,{locale:s,rtl:"rtl"===_i("[dir]",e)?.getAttribute("dir"),formatLocale:o}}async function ji(e=Fi().locale){let t=await Promise.resolve().then(function () { return require('./messages.en-0fffc776-346911f0-c34d0352.js'); });switch(e){case ae.Arabic:t=await Promise.resolve().then(function () { return require('./messages.ar-01382838-4fee603c-61dd772b.js'); });break;case ae.Bosnian:t=await Promise.resolve().then(function () { return require('./messages.bs-26dfc274-27769d05-bf12bb3b.js'); });break;case ae.Bulgarian:t=await Promise.resolve().then(function () { return require('./messages.bg-32cb6752-5123d508-21c6b0d2.js'); });break;case ae.Catalan:t=await Promise.resolve().then(function () { return require('./messages.ca-21b03272-f358f0a6-f9533fff.js'); });break;case ae.Czech:t=await Promise.resolve().then(function () { return require('./messages.cs-71896a8d-cfe54e1a-f84bfee8.js'); });break;case ae.Danish:t=await Promise.resolve().then(function () { return require('./messages.da-90739473-58c40af2-28af0c0d.js'); });break;case ae.German:t=await Promise.resolve().then(function () { return require('./messages.de-e2ce6e5c-5a57de61-ab5a2a29.js'); });break;case ae.Greek:t=await Promise.resolve().then(function () { return require('./messages.el-5582e711-ef34cef9-db584fac.js'); });break;case ae.EnglishUSA:t=await Promise.resolve().then(function () { return require('./messages.en-US-63042069-a61b2dae-4d209adc.js'); });break;case ae.Spanish:t=await Promise.resolve().then(function () { return require('./messages.es-907baf0a-96613cec-8925b54a.js'); });break;case ae.Estonian:t=await Promise.resolve().then(function () { return require('./messages.et-79ae70c6-41a51a41-bb815c18.js'); });break;case ae.Finnish:t=await Promise.resolve().then(function () { return require('./messages.fi-cc657f3a-74b0cfc9-a829961e.js'); });break;case ae.French:t=await Promise.resolve().then(function () { return require('./messages.fr-fb0dd043-2f029c2d-5ed9b657.js'); });break;case ae.Hebrew:t=await Promise.resolve().then(function () { return require('./messages.he-ca24a7af-157298dc-b6ea6d2f.js'); });break;case ae.Croatian:t=await Promise.resolve().then(function () { return require('./messages.hr-a0968519-d8bb0fb1-487bdc91.js'); });break;case ae.Hungarian:t=await Promise.resolve().then(function () { return require('./messages.hu-f801472e-8970409f-47065a28.js'); });break;case ae.Indonesian:t=await Promise.resolve().then(function () { return require('./messages.id-e0a138dd-f907de49-f52aadc6.js'); });break;case ae.Italian:t=await Promise.resolve().then(function () { return require('./messages.it-f3a3c18c-1323b2d8-0d8770da.js'); });break;case ae.Japanese:t=await Promise.resolve().then(function () { return require('./messages.ja-0a345b79-ae85c137-e0dc9fcc.js'); });break;case ae.Korean:t=await Promise.resolve().then(function () { return require('./messages.ko-2c82d42a-f915eb3f-5b93d267.js'); });break;case ae.Lithuanian:t=await Promise.resolve().then(function () { return require('./messages.lt-437315dc-a82a3944-8f9e8de4.js'); });break;case ae.Latvian:t=await Promise.resolve().then(function () { return require('./messages.lv-57b9e23e-d1641f6a-2aae7a8a.js'); });break;case ae.NorwegianBokml:t=await Promise.resolve().then(function () { return require('./messages.no-950d514a-73cd9d94-c965944c.js'); });break;case ae.Dutch:t=await Promise.resolve().then(function () { return require('./messages.nl-bf7731db-19e7cc57-fa8b698b.js'); });break;case ae.Polish:t=await Promise.resolve().then(function () { return require('./messages.pl-1ed04c02-b3939b63-5934fff5.js'); });break;case ae.PortugueseBrazil:t=await Promise.resolve().then(function () { return require('./messages.pt-BR-d65a99a9-68065110-49628689.js'); });break;case ae.PortuguesePortugal:t=await Promise.resolve().then(function () { return require('./messages.pt-PT-e9eb0f86-901ba69d-252215b8.js'); });break;case ae.Romanian:t=await Promise.resolve().then(function () { return require('./messages.ro-0cc0459a-be967c67-53eb1fcd.js'); });break;case ae.Russian:t=await Promise.resolve().then(function () { return require('./messages.ru-d76e79cf-aa12a208-5576997f.js'); });break;case ae.Serbian:t=await Promise.resolve().then(function () { return require('./messages.sr-b8d5fefe-168c93c6-e820f73b.js'); });break;case ae.Slovak:t=await Promise.resolve().then(function () { return require('./messages.sk-7e8fa059-ad0402e1-71317954.js'); });break;case ae.Slovenian:t=await Promise.resolve().then(function () { return require('./messages.sl-fc1a9dc6-201afbd5-fe7d74a7.js'); });break;case ae.Swedish:t=await Promise.resolve().then(function () { return require('./messages.sv-18b29f8a-32c2bb8c-a675630f.js'); });break;case ae.Thai:t=await Promise.resolve().then(function () { return require('./messages.th-c923afca-6295c3ff-3c877198.js'); });break;case ae.Turkish:t=await Promise.resolve().then(function () { return require('./messages.tr-7495cb63-38592cba-0ad25abf.js'); });break;case ae.Ukrainian:t=await Promise.resolve().then(function () { return require('./messages.uk-4083ab16-193b3cdc-a5d06f50.js'); });break;case ae.Vietnamese:t=await Promise.resolve().then(function () { return require('./messages.vi-087f5bf7-20bdf5b5-9baa765d.js'); });break;case ae.ChineseChina:t=await Promise.resolve().then(function () { return require('./messages.zh-CN-ac74cfc3-0dbf0125-d9839241.js'); });break;case ae.ChineseHongKong:t=await Promise.resolve().then(function () { return require('./messages.zh-HK-f7b7d981-51e6eee1-9321bd16.js'); });break;case ae.ChineseTaiwan:t=await Promise.resolve().then(function () { return require('./messages.zh-TW-34ee3824-7f1d4971-011fb2c0.js'); });}return t}const Pi=5,Ci=4,Ei=2e3,ki=.7,Ii=[156,156,156,255],Oi=[156,156,156,255],Ai=g,Ti="arcgis_charts_group_of_slices",Li="arcgis_charts_box_plot_category",Di=[[31,120,180,255],[166,206,227,255],[51,160,44,255],[178,223,138,255],[227,26,28,255],[251,154,153,255],[255,127,0,255],[253,191,111,255],[106,61,154,255],[202,178,214,255]],$i=[[104,104,104,255],[51,124,235,255],[132,0,168,255],[156,156,156,255]];function Ui(e){const{colorIndex:t,opacity:r,histogramOverlays:i}=e,a=Math.max(0,t??0),s=[...!0===i?$i:Di],[o,n,l,c]=s[a%s.length];return [o,n,l,void 0!==r?255*r:c]}function Bi(e){return [0,0,0,255*(e??ki)]}function Ri(e=1){return [Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random()),255*e]}function Ni(e){const t={family:"Arial, Helvetica, sans-serif",size:10};switch(e){case Z:t.size=18;break;case J:t.size=14;break;case re:t.size=12;break;case te:t.size=13;break;case ie:t.size=11;}return t}function Mi(e="",t=Ni(),r){let i=v;return r!==ee&&r!==Y||(i=void 0),{type:"esriTS",color:Bi(),text:e,font:t,horizontalAlignment:i}}function zi(e){const{text:t,visible:r,font:i,type:a}=e??{text:"",visible:!0,font:Ni()};return {type:"chartText",visible:r,content:Mi(t,i,a)}}function Vi(e){const t=e?.useRandomColor??!1,r=e?.useRampColor,i=e?.width??1,a=e?.isHistogramOverlay;let s=e?.color??Bi(1);return t?s=Ri():void 0!==r&&(s=Ui(!0===a?{colorIndex:r.colorIndex,histogramOverlays:a}:{colorIndex:r.colorIndex})),void 0!==e?.opacity&&(s[3]=e.opacity),{type:w,style:g,color:s,width:i}}function qi(){return {type:C,intlOptions:{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:3,useGrouping:!0}}}function Gi(e="Category Axis"){const t=zi({text:e,visible:!0,font:Ni(J)});t.content.horizontalAlignment=v,t.content.verticalAlignment=b;const r=zi({text:e,visible:!0,font:Ni(W)});return {type:P,visible:!0,title:t,labels:r,valueFormat:{type:"category",characterLimit:11},lineSymbol:Vi({color:Ii})}}function Qi(e="Value Axis"){const t=zi({text:e,visible:!0,font:Ni(J)}),r=zi({text:e,visible:!0,font:Ni(W)});return t.content.verticalAlignment=b,t.content.horizontalAlignment=v,{type:P,visible:!0,title:t,labels:r,valueFormat:qi(),lineSymbol:Vi({color:Ii})}}function Hi(){return {type:"chartLegend",visible:!0,title:zi({text:"",visible:!0,font:Ni(te)}),body:Mi("",Ni(re)),position:"right",maxHeight:Number.NaN}}function Ki(e){return {type:F,visible:!0,created:!1,symbol:Vi({useRampColor:{colorIndex:e},isHistogramOverlay:!0})}}async function Xi(){return (await ji()).defaultTitle}function Wi(){return `Chart ${Date.now()}`}function Yi(e,t=!1){return {type:x,style:y,color:t?Ri(ki):Ui({colorIndex:e??0,opacity:ki})}}function Ji(e=0){return {type:S,style:m,color:Ui({colorIndex:e,opacity:ki}),size:4}}function Zi(e){return {type:w,style:g,color:Ui({colorIndex:e,opacity:ki}),width:2}}function ea(e=!1){return {type:S,style:m,color:e?Ri(ki):Ui({colorIndex:0,opacity:ki}),size:7}}function ta(e=!1){return {type:j,trendLine:{type:F,created:!1,visible:!0,symbol:{type:w,style:g,color:e?Ri():Ui({colorIndex:1}),width:2}}}}async function ra(e){const t=await ji(),r=[],i=t.xAxis;let a;const s=Qi(t.statistics.count),o=Vi({opacity:25});switch(s.grid=o,e){case A:a=Gi(i);break;case E:a=Qi(i),a.grid=o;break;case O:case T:a=Qi(i);break;case L:a=Gi("");}return void 0!==a&&r.push(a,s),r}function ia(){return {type:"gaugeNeedle",symbol:{type:x,color:[0,0,0,200]}}}async function aa(){const e=[],t=Qi((await ji()).xAxis);return t.needle=ia(),e.push(t),e}async function sa(e){const t=e.objectIDField??"ObjectID",r=`${s}_${t}_0`.toUpperCase(),i=(await ji()).countSeries;return {type:O,id:i,name:i,query:{outStatistics:[{statisticType:s,onStatisticField:t,outStatisticFieldName:r}],groupByFieldsForStatistics:[]},x:"",y:r,lineSymbol:Zi(e.seriesIndex),markerSymbol:Ji(e.seriesIndex),dataLabels:zi({text:"",visible:!1,font:Ni(ee)}),timeIntervalSize:0,timeIntervalUnits:"esriTimeUnitsDays",timeAggregationType:"equalIntervalsFromStartTime",trimIncompleteTimeInterval:!0,nullPolicy:"interpolate"}}function oa(e){return {type:x,style:y,color:Ui({colorIndex:e,opacity:ki})}}async function na(e){const t=e.objectIDField??"ObjectID",r=`${s}_${t}_0`.toUpperCase(),i=(await ji()).countSeries;return {type:A,id:i,name:i,query:{outStatistics:[{statisticType:s,onStatisticField:t,outStatisticFieldName:r}],groupByFieldsForStatistics:[]},x:"",y:r,fillSymbol:oa(e.seriesIndex),dataLabels:zi({text:"",visible:!1,font:Ni(ee),type:ee})}}async function la(e){const t=(await ji()).countSeries;return {name:t,type:L,id:t,fillSymbol:{type:x,style:y,color:Ui({colorIndex:e,opacity:ki})},query:{},x:Li,y:""}}function ca(){return {type:"pieTick",visible:!0,lineSymbol:Vi({width:1,color:Oi})}}async function ua(e){const t=`${s}_${e}_0`.toUpperCase(),r=(await ji()).countSeries;return {type:k,id:r,name:r,query:{outStatistics:[{statisticType:s,onStatisticField:e??"ObjectID",outStatisticFieldName:t}],groupByFieldsForStatistics:[]},x:"",y:t,fillSymbol:{type:x,style:y},dataLabels:zi({text:"",visible:!1,font:Ni(ee),type:ee}),startAngle:-90,endAngle:270,dataLabelsCharacterLimit:11,displayNumericValueOnDataLabel:!1,displayPercentageOnDataLabel:!0,numericValueFormat:{...qi(),intlOptions:{minimumFractionDigits:1,maximumFractionDigits:1}},percentValueFormat:{...qi(),intlOptions:{minimumFractionDigits:1,maximumFractionDigits:1}},ticks:ca()}}function da(e){const t=e.objectIDField??"ObjectID",r=`${s}_${t}_0`.toUpperCase(),i="Series0";return {type:I,id:i,name:i,query:{outStatistics:[{statisticType:s,onStatisticField:t,outStatisticFieldName:r}]},x:""}}async function fa(t=Wi()){return {version:e,type:_,id:t,colorMatch:!0,rotated:!1,orderOptions:{data:{orderType:K,orderBy:B}},title:zi({text:await Xi(),visible:!0,font:Ni(Z)}),subTitle:zi(),footer:zi({text:"",visible:!0,font:Ni(ie)}),background:[255,255,255,255],axes:await ra(A),series:[],legend:Hi()}}function ha(){return {type:j,mean:Ki(1),median:Ki(2),standardDeviation:Ki(3),comparisonDistribution:Ki(4)}}function pa(){return {type:T,id:T,name:T,visible:!0,dataTooltipVisible:!0,dataTooltipReverseColor:!1,assignToSecondValueAxis:!1,x:"",binCount:32,overlays:ha(),dataTransformationType:U,fillSymbol:{type:x,style:y,color:Ui({colorIndex:0,opacity:ki})},dataLabels:zi({text:"",visible:!1,font:Ni(ee)})}}async function ga(e){const t=await ji();let r;switch(e){case c:r=t.statistics.mean;break;case d:r=t.statistics.median;break;case o:r=t.statistics.sum;break;case n:r=t.statistics.minimum;break;case l:r=t.statistics.maximum;break;case u:r=t.statistics.variance;break;case f:r=t.statistics.discretePercentile;break;case p:r=t.statistics.noAggregation;break;default:r=t.statistics.count;}return r}const ma=[210,210,210,178.5];var ya={exports:{}},va={},ba={exports:{}},wa={};function Sa(){return {"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}var xa=/javascript\s*\:/gim;wa.whiteList={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},wa.getDefaultWhiteList=Sa,wa.onAttr=function(e,t,r){},wa.onIgnoreAttr=function(e,t,r){},wa.safeAttrValue=function(e,t){return xa.test(t)?"":t};var _a=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},Fa=function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")},ja=wa,Pa=function(e,t){";"!==(e=Fa(e))[e.length-1]&&(e+=";");var r=e.length,i=!1,a=0,s=0,o="";function n(){if(!i){var r=_a(e.slice(a,s)),n=r.indexOf(":");if(-1!==n){var l=_a(r.slice(0,n)),c=_a(r.slice(n+1));if(l){var u=t(a,o.length,l,c,r);u&&(o+=u+"; ");}}}a=s+1;}for(;s<r;s++){var l=e[s];if("/"===l&&"*"===e[s+1]){var c=e.indexOf("*/",s+2);if(-1===c)break;a=(s=c+1)+1,i=!1;}else "("===l?i=!0:")"===l?i=!1:";"===l?i||n():"\n"===l&&n();}return _a(o)};function Ca(e){return null==e}function Ea(e){(e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{})).whiteList=e.whiteList||ja.whiteList,e.onAttr=e.onAttr||ja.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||ja.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||ja.safeAttrValue,this.options=e;}Ea.prototype.process=function(e){if(!(e=(e=e||"").toString()))return "";var t=this.options,r=t.whiteList,i=t.onAttr,a=t.onIgnoreAttr,s=t.safeAttrValue;return Pa(e,(function(e,t,o,n,l){var c=r[o],u=!1;if(!0===c?u=c:"function"==typeof c?u=c(n):c instanceof RegExp&&(u=c.test(n)),!0!==u&&(u=!1),n=s(o,n)){var d,f={position:t,sourcePosition:e,source:l,isWhite:u};return u?Ca(d=i(o,n,f))?o+":"+n:d:Ca(d=a(o,n,f))?void 0:d}}))};var ka=Ea;!function(e,t){var r=wa,i=ka;for(var a in (t=e.exports=function(e,t){return new i(t).process(e)}).FilterCSS=i,r)t[a]=r[a];}(ba,ba.exports);var Ia=ba.exports,Oa={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return -1},forEach:function(e,t,r){var i,a;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,a=e.length;i<a;i++)t.call(r,e[i],i,e);},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}},Aa=Ia.FilterCSS,Ta=Ia.getDefaultWhiteList,La=Oa;var Da=new Aa;function $a(e){return e.replace(Ua,"&lt;").replace(Ba,"&gt;")}var Ua=/</g,Ba=/>/g,Ra=/"/g,Na=/&quot;/g,Ma=/&#([a-zA-Z0-9]*);?/gim,za=/&colon;?/gim,Va=/&newline;?/gim,qa=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Ga=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Qa=/u\s*r\s*l\s*\(.*/gi;function Ha(e){return e.replace(Ra,"&quot;")}function Ka(e){return e.replace(Na,'"')}function Xa(e){return e.replace(Ma,(function(e,t){return "x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function Wa(e){return e.replace(za,":").replace(Va," ")}function Ya(e){for(var t="",r=0,i=e.length;r<i;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return La.trim(t)}function Ja(e){return Ya(e=Wa(e=Xa(e=Ka(e))))}function Za(e){return $a(e=Ha(e))}va.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},va.getDefaultWhiteList=function(){return {a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}},va.onTag=function(e,t,r){},va.onIgnoreTag=function(e,t,r){},va.onTagAttr=function(e,t,r){},va.onIgnoreTagAttr=function(e,t,r){},va.safeAttrValue=function(e,t,r,i){if(r=Ja(r),"href"===t||"src"===t){if("#"===(r=La.trim(r)))return "#";if("http://"!==r.substr(0,7)&&"https://"!==r.substr(0,8)&&"mailto:"!==r.substr(0,7)&&"tel:"!==r.substr(0,4)&&"data:image/"!==r.substr(0,11)&&"ftp://"!==r.substr(0,6)&&"./"!==r.substr(0,2)&&"../"!==r.substr(0,3)&&"#"!==r[0]&&"/"!==r[0])return ""}else if("background"===t){if(qa.lastIndex=0,qa.test(r))return ""}else if("style"===t){if(Ga.lastIndex=0,Ga.test(r))return "";if(Qa.lastIndex=0,Qa.test(r)&&(qa.lastIndex=0,qa.test(r)))return "";!1!==i&&(r=(i=i||Da).process(r));}return Za(r)},va.escapeHtml=$a,va.escapeQuote=Ha,va.unescapeQuote=Ka,va.escapeHtmlEntities=Xa,va.escapeDangerHtml5Entities=Wa,va.clearNonPrintableCharacter=Ya,va.friendlyAttrValue=Ja,va.escapeAttrValue=Za,va.onIgnoreTagStripAll=function(){return ""},va.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var r=!Array.isArray(e),i=[],a=!1;return {onIgnoreTag:function(s,o,n){if(function(t){return !!r||-1!==La.indexOf(e,t)}(s)){if(n.isClosing){var l=n.position+10;return i.push([!1!==a?a:n.position,l]),a=!1,"[/removed]"}return a||(a=n.position),"[removed]"}return t(s,o,n)},remove:function(e){var t="",r=0;return La.forEach(i,(function(i){t+=e.slice(r,i[0]),r=i[1];})),t+=e.slice(r)}}},va.stripCommentTag=function(e){for(var t="",r=0;r<e.length;){var i=e.indexOf("\x3c!--",r);if(-1===i){t+=e.slice(r);break}t+=e.slice(r,i);var a=e.indexOf("--\x3e",i);if(-1===a)break;r=a+3;}return t},va.stripBlankChar=function(e){var t=e.split("");return (t=t.filter((function(e){var t=e.charCodeAt(0);return !(127===t||t<=31&&10!==t&&13!==t)}))).join("")},va.cssFilter=Da,va.getDefaultCSSWhiteList=Ta;var es={},ts=Oa;function rs(e){var t,r=ts.spaceIndex(e);return t=-1===r?e.slice(1,-1):e.slice(1,r+1),"/"===(t=ts.trim(t).toLowerCase()).slice(0,1)&&(t=t.slice(1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),t}function is(e){return "</"===e.slice(0,2)}var as=/[^a-zA-Z0-9\\_:.-]/gim;function ss(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return "="===r?t:-1}}function os(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return "'"===r||'"'===r?t:-1}}function ns(e,t){for(;t>0;t--){var r=e[t];if(" "!==r)return "="===r?t:-1}}function ls(e){return function(e){return '"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}es.parseTag=function(e,t,r){var i="",a=0,s=!1,o=!1,n=0,l=e.length,c="",u="";e:for(n=0;n<l;n++){var d=e.charAt(n);if(!1===s){if("<"===d){s=n;continue}}else if(!1===o){if("<"===d){i+=r(e.slice(a,n)),s=n,a=n;continue}if(">"===d){i+=r(e.slice(a,s)),c=rs(u=e.slice(s,n+1)),i+=t(s,i.length,c,u,is(u)),a=n+1,s=!1;continue}if('"'===d||"'"===d)for(var f=1,h=e.charAt(n-f);""===h.trim()||"="===h;){if("="===h){o=d;continue e}h=e.charAt(n-++f);}}else if(d===o){o=!1;continue}}return a<e.length&&(i+=r(e.substr(a))),i},es.parseAttr=function(e,t){var r=0,i=0,a=[],s=!1,o=e.length;function n(e,r){if(!((e=(e=ts.trim(e)).replace(as,"").toLowerCase()).length<1)){var i=t(e,r||"");i&&a.push(i);}}for(var l=0;l<o;l++){var c,u=e.charAt(l);if(!1!==s||"="!==u)if(!1===s||l!==i){if(/\s|\n|\t/.test(u)){if(e=e.replace(/\s|\n|\t/g," "),!1===s){if(-1===(c=ss(e,l))){n(ts.trim(e.slice(r,l))),s=!1,r=l+1;continue}l=c-1;continue}if(-1===(c=ns(e,l-1))){n(s,ls(ts.trim(e.slice(r,l)))),s=!1,r=l+1;continue}}}else {if(-1===(c=e.indexOf(u,l+1)))break;n(s,ts.trim(e.slice(i+1,c))),s=!1,r=(l=c)+1;}else s=e.slice(r,l),r=l+1,i='"'===e.charAt(r)||"'"===e.charAt(r)?r:os(e,l+1);}return r<e.length&&(!1===s?n(e.slice(r)):n(s,ls(ts.trim(e.slice(r))))),ts.trim(a.join(" "))};var cs=Ia.FilterCSS,us=va,ds=es,fs=ds.parseTag,hs=ds.parseAttr,ps=Oa;function gs(e){return null==e}function ms(e){(e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=us.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=function(e){var t={};for(var r in e)Array.isArray(e[r])?t[r.toLowerCase()]=e[r].map((function(e){return e.toLowerCase()})):t[r.toLowerCase()]=e[r];return t}(e.whiteList||e.allowList):e.whiteList=us.whiteList,e.onTag=e.onTag||us.onTag,e.onTagAttr=e.onTagAttr||us.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||us.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||us.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||us.safeAttrValue,e.escapeHtml=e.escapeHtml||us.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new cs(e.css));}ms.prototype.process=function(e){if(!(e=(e=e||"").toString()))return "";var t=this.options,r=t.whiteList,i=t.onTag,a=t.onIgnoreTag,s=t.onTagAttr,o=t.onIgnoreTagAttr,n=t.safeAttrValue,l=t.escapeHtml,c=this.cssFilter;t.stripBlankChar&&(e=us.stripBlankChar(e)),t.allowCommentTag||(e=us.stripCommentTag(e));var u=!1;t.stripIgnoreTagBody&&(u=us.StripTagBody(t.stripIgnoreTagBody,a),a=u.onIgnoreTag);var d=fs(e,(function(e,t,u,d,f){var h={sourcePosition:e,position:t,isClosing:f,isWhite:Object.prototype.hasOwnProperty.call(r,u)},p=i(u,d,h);if(!gs(p))return p;if(h.isWhite){if(h.isClosing)return "</"+u+">";var g=function(e){var t=ps.spaceIndex(e);if(-1===t)return {html:"",closing:"/"===e[e.length-2]};var r="/"===(e=ps.trim(e.slice(t+1,-1)))[e.length-1];return r&&(e=ps.trim(e.slice(0,-1))),{html:e,closing:r}}(d),m=r[u],y=hs(g.html,(function(e,t){var r=-1!==ps.indexOf(m,e),i=s(u,e,t,r);return gs(i)?r?(t=n(u,e,t,c))?e+'="'+t+'"':e:gs(i=o(u,e,t,r))?void 0:i:i}));return d="<"+u,y&&(d+=" "+y),g.closing&&(d+=" /"),d+">"}return gs(p=a(u,d,h))?l(d):p}),l);return u&&(d=u.remove(d)),d};var ys=ms;!function(e,t){var r=va,i=es,a=ys;function s(e,t){return new a(t).process(e)}(t=e.exports=s).filterXSS=s,t.FilterXSS=a,function(){for(var e in r)t[e]=r[e];for(var a in i)t[a]=i[a];}(),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports);}(ya,ya.exports);const vs="nonSpecific",bs="barAndLineNoAggregation",ws="barAndLineMonoField",Ss="barAndLineMultiFields",xs="barAndLineFromFields",_s="barAndLineSplitBy",Fs="barAndLineSplitByNoAggregation",js="pieNoAggregation",Ps="pieFromCategory",Cs="pieFromFields",Es="boxPlotMonoField",ks="boxPlotMultiFields",Is="boxPlotMonoFieldAndCategory",Os="boxPlotMultiFieldsAndCategory",As="boxPlotMonoFieldAndSplitBy",Ts="boxPlotMultiFieldsAndSplitBy",Ls="boxPlotMonoFieldAndCategoryAndSplitBy";function Ds(e,t){let r;if(void 0!==e&&e.length>0)if(void 0!==t&&t>=0&&t<e.length)r=e[t].type;else {const t=new Set(e.map((e=>e.type))),i=function(e){return 2===e.size&&e.has(O)&&e.has(A)}(t),a=function(e){return 2===e.size&&e.has(O)&&e.has(L)||1===e.size&&e.has(L)}(t);r=!0===i?$:a?L:t.size>=2?void 0:e[0].type;}return r}function $s(e){let t=!1;if(void 0!==e){const r=Ds(e.series);r!==A&&r!==O&&r!==$&&r!==L||(t=e.rotated??!1);}return t}function Us(e){const{value:t,keepSurroundingQuotes:r,escape:i}=e;let a=t?.trim();if(!Rs(a)){let e="";a.startsWith("'")&&a.endsWith("'")&&(a=a.slice(1,-1),r&&(e="'")),!1!==i&&(a=function(e){let t=e;return t=t.replace(/'/gu,"''"),t=t.replace(/[/\\"|[\]\\]/gu,"\\$&"),t}(a)),a=`${e}${a}${e}`;}return a}function Bs(e=[],t){const r=e.find((e=>e.name===t))?.alias;return ""!==r?r??t:t}function Rs(e){return null==e||"string"==typeof e&&""===e.trim()}function Ns(e,t){let r={fieldToSort:""};if(!Rs(e)){const i=e.trim(),a=i.split(" "),s=a.at(-1)?.toUpperCase();s===B||s===R?r={fieldToSort:i.substring(0,i.lastIndexOf(" ")),orderBy:s}:(r={fieldToSort:i},!1!==t&&(r.orderBy=B));}return r}const Ms=["1.0.0","1.0.1","2.0.0","3.0.0","3.1.0","3.2.0","3.3.0","3.4.0","3.5.0","3.6.0","3.7.0","3.8.0","3.9.0","3.9.1","3.9.2","3.10.0","3.11.0","4.0.0","4.0.1","5.0.0","6.0.0","6.1.0","6.2.0","6.2.1","6.3.0","6.4.0","7.0.0","7.1.0","7.1.1","7.2.0","7.2.1","7.3.1","7.4.0","7.4.1","7.5.0","7.5.1","7.6.0","8.0.0","8.0.1","9.0.0","9.1.0","9.2.0","9.3.0","9.4.0","9.5.0","9.6.0","9.6.1","9.7.0","10.0.0","11.0.0","12.0.0","13.0.0","14.0.0","14.0.1","15.0.0","16.0.0","16.1.0","16.1.1","17.0.0","17.1.0","17.2.0","17.2.1","18.0.0","18.1.0"],zs="1.0.0",Vs="unrecognized.version";function qs(e,t){let r=0;if(e!==t){const i=e.split("."),a=t.split(".");for(let e=0;e<i.length;e+=1){const t=Number.parseInt(i[e],10),s=Number.parseInt(a[e],10);if(t>s||Number.isNaN(s)){r=1;break}if(t<s){r=-1;break}}}return r}function Gs(e){const{series:t}=e;let r=!0===("showMean"in e&&e.showMean)?t.find((e=>e.type===O)):t[0];return r??=t[0],r}function Qs(e,t){let r="";return void 0!==e&&e.includes("=")&&(r=!1!==t?Us({value:e.split("=")[0]}):e.split("=")[0].trim()),r}function Hs(e){const{where:t,normalize:r,keepSurroundingQuotes:i,escape:a}=e;let s="";return void 0!==t&&t.includes("=")&&(s=t.split("=").slice(1).join("=").trim(),"null"===s?s=null:""===s.trim()||Number.isNaN(Number(s))?!1===r?!0===a&&(s=function(e){let t=e,r="";e.startsWith("'")&&e.endsWith("'")&&(t=e.slice(1,-1),r="'"),t=t.replace(/'/gu,"''");let i="";return function(e){let t=!1;return "number"!=typeof e&&(t=[...e].some((e=>e.charCodeAt(0)>255))),t}(t)&&(i="N"),`${i}${r}${t}${r}`}(s)):s=Us({value:s,keepSurroundingQuotes:i,escape:a}):s=Number(s)),s}function Ks(e){let t=!1;return void 0===e||""===e?t=!0:e.includes("=")&&(t=Qs(e,!1)===`${Hs({where:e,normalize:!1})}`),t}function Xs(e){let t=vs;if(void 0!==e?.[0])switch(Ds(e)){case k:t=function(e){let t=Ps;return void 0===e[0].query?.outStatistics?t=js:void 0===e[0].query?.groupByFieldsForStatistics&&(t=Cs),t}(e);break;case D:case A:case O:case $:t=function(e){let t=ws;const r=e[0].query?.where;return void 0===e[0].query?.groupByFieldsForStatistics&&(e[0].query?.outStatistics??[]).length>0?t=xs:void 0===r&&void 0===e[0].query?.outStatistics?t=bs:Ks(r)?e.length>1&&(t=Ss):t=void 0===e[0].query?.outStatistics?Fs:_s,t}(e);break;case L:t=function(e){let t=Es;const r=1===e.length,i=e.find((e=>e.type===O))??e[0],{x:a}=i,s="y"in i?i.y:"",o=i.query?.where;return a===Li?"object"==typeof s&&s.length>1?Ks(o)?r&&(t=ks):t=Ts:r?t=Es:Ks(o)||(t=As):t=r?Is:Ks(o)?Os:Ls,t}(e);}return t}var Ws="undefined"!=typeof window&&"$arcgis"in window&&"object"==typeof window.$arcgis&&"import"in window.$arcgis&&!("forceESM"in window.$arcgis);function Ys(e){return void 0!==e.default}async function Js(){if(Ws)return await window.$arcgis.import("esri/geometry/support/jsonUtils");const e=await Promise.resolve().then(function () { return /*#__PURE__*/_interopNamespace(require('@arcgis/core/geometry/support/jsonUtils.js')); });return Ys(e)?e.default:e}function Zs(e){return void 0!==e&&"type"in e&&"subtype-sublayer"===e.type}function eo(e){return Zs(e)?e.parent:e}function to(e){let t;return t=function(e){return void 0!==e&&"layer"in e}(e)?e.layer:e,t}function ro(e){const t=eo(e)?.sourceJSON;let r=t?.maxRecordCount??Ei;return t?.advancedQueryCapabilities?.supportsMaxRecordCountFactor&&void 0!==t?.maxRecordCount&&(r=t.maxRecordCount*Pi),r}function io(e,t){let r;const i=Array.from(new Set(e)).filter((e=>null!=e&&""!==e&&!Ks(e)));return i.sort(((e,t)=>t.length-e.length)),1===i.length?[r]=i:i?.forEach((e=>{void 0!==e&&(Rs(r)?r=`(${e})`:r?.includes(`(${e})`)||(r=`${r} ${t??"AND"} (${e})`));})),r??"1=1"}async function ao(e){let t;return void 0!==e&&(t=await async function(e){return new(await async function(){if(Ws)return await window.$arcgis.import("esri/time/TimeExtent");const e=await Promise.resolve().then(function () { return /*#__PURE__*/_interopNamespace(require('@arcgis/core/time/TimeExtent.js')); });return Ys(e)?e.default:e}())(e)}({start:new Date(e[0]),end:new Date(e[1])})),t}async function so(e){const{queryObject:t,queryConfig:r,maxRecordCountFactor:i}=e,{where:a,groupByFieldsForStatistics:s,orderByFields:o,outStatistics:n,gdbVersion:l,geometry:c,distance:u,units:d,timeExtent:f,start:p,num:g,returnDistinctValues:m,outFields:y}=r??{},v=await async function(e){return new(await async function(){if(Ws)return await window.$arcgis.import("esri/rest/support/Query");const e=await Promise.resolve().then(function () { return /*#__PURE__*/_interopNamespace(require('@arcgis/core/rest/support/Query.js')); });return Ys(e)?e.default:e}())(e)}({});v.returnGeometry=!1;const b=to(t),w=eo(b),S=[a,w.definitionExpression];if(v.where=io(S),v.outFields=function(e){return void 0===e?["*"]:Array.from(new Set(e))}(y),v.groupByFieldsForStatistics=s??v.groupByFieldsForStatistics,v.orderByFields=o??[],v.returnDistinctValues=m??!1,void 0!==n){const e=function(e){let t=!1;const r=eo(e).sourceJSON?.advancedQueryCapabilities?.supportedSpatialAggregationStatistics??[],i=e.capabilities?.query.supportedSpatialAggregationStatistics??{};return t=r.includes("EnvelopeAggregate")||"envelope"in i&&void 0!==i.envelope&&null!==i.envelope,t}(b),t=await async function(){if(Ws)return await window.$arcgis.import("esri/rest/support/StatisticDefinition");const e=await Promise.resolve().then(function () { return /*#__PURE__*/_interopNamespace(require('@arcgis/core/rest/support/StatisticDefinition.js')); });return Ys(e)?e.default:e}();v.outStatistics=n.filter((t=>t.statisticType!==h||e)).map((e=>t.fromJSON(e)));}void 0!==i&&(v.maxRecordCountFactor=i),void 0!==l&&""!==l?v.gdbVersion=l:void 0!==w.gdbVersion&&""!==w.gdbVersion&&(v.gdbVersion=w.gdbVersion);const x=await async function(e){let t;return void 0!==e&&(t=(await Js()).fromJSON(e)),t}(c);void 0!==x&&(v.geometry=x,function(e){return e.capabilities?.query?.supportsDistance||!0===eo(e).sourceJSON?.advancedQueryCapabilities?.supportsQueryWithDistance}(b)&&(void 0!==u&&(v.distance=u),void 0!==d&&(v.units=d)));const _=await ao(f);return void 0!==_?v.timeExtent=_:void 0!==w.timeExtent&&(v.timeExtent=w.timeExtent),void 0!==g&&(v.num=g),void 0!==p&&(v.start=p,v.num=v.num??ro(b)),function(e){const t=!e.geometry,r=(e.where??"").toUpperCase(),i=!r.includes("CURRENT_TIMESTAMP")&&!r.includes("CURRENT_DATE")&&!r.includes("CURRENT_TIME");return t&&i}(v)&&(v.cacheHint=!0),v}const oo=new Map,no="queryFeaturesError";class lo extends Error{constructor(e,t,r){super(t),this.name=e,this.details=r;}}async function co(e=Fi().locale){let t=await Promise.resolve().then(function () { return require('./messages.en-2720bc04-32ab2557-37d3482a.js'); });switch(e){case ae.Arabic:t=await Promise.resolve().then(function () { return require('./messages.ar-2a516be4-e34e31f4-3ae697b4.js'); });break;case ae.Bosnian:t=await Promise.resolve().then(function () { return require('./messages.bs-ed521a4a-03c19b15-8840ded9.js'); });break;case ae.Bulgarian:t=await Promise.resolve().then(function () { return require('./messages.bg-32846a04-3cd3834e-2656a85a.js'); });break;case ae.Catalan:t=await Promise.resolve().then(function () { return require('./messages.ca-534a5a29-c530de18-eb34c5ef.js'); });break;case ae.Czech:t=await Promise.resolve().then(function () { return require('./messages.cs-f7dfa0ea-b1a79f2d-f83d9b24.js'); });break;case ae.Danish:t=await Promise.resolve().then(function () { return require('./messages.da-12df1d76-e0cbd6ce-4c87ca6e.js'); });break;case ae.German:t=await Promise.resolve().then(function () { return require('./messages.de-8ac83862-b326af6c-2674e94c.js'); });break;case ae.Greek:t=await Promise.resolve().then(function () { return require('./messages.el-d39d2cdb-633ed8c5-69964486.js'); });break;case ae.EnglishUSA:t=await Promise.resolve().then(function () { return require('./messages.en-US-d444015e-7fcc1245-74c8bf24.js'); });break;case ae.Spanish:t=await Promise.resolve().then(function () { return require('./messages.es-5242724e-fe3be8dc-59b33094.js'); });break;case ae.Estonian:t=await Promise.resolve().then(function () { return require('./messages.et-62f107f7-84b2a372-ca945fb7.js'); });break;case ae.Finnish:t=await Promise.resolve().then(function () { return require('./messages.fi-c0c48057-bbece429-2e535205.js'); });break;case ae.French:t=await Promise.resolve().then(function () { return require('./messages.fr-b992d801-89c0ef56-19a9ca74.js'); });break;case ae.Hebrew:t=await Promise.resolve().then(function () { return require('./messages.he-70d41af0-2741f049-aa0fa404.js'); });break;case ae.Croatian:t=await Promise.resolve().then(function () { return require('./messages.hr-5657371a-33d2d2e4-c30a4622.js'); });break;case ae.Hungarian:t=await Promise.resolve().then(function () { return require('./messages.hu-5bc9a465-4d85f300-ee8b51ae.js'); });break;case ae.Indonesian:t=await Promise.resolve().then(function () { return require('./messages.id-e1e1d374-103bf642-2d3970e5.js'); });break;case ae.Italian:t=await Promise.resolve().then(function () { return require('./messages.it-025c832d-1cf8cc7b-509bfeac.js'); });break;case ae.Japanese:t=await Promise.resolve().then(function () { return require('./messages.ja-4264bfb4-0db24230-2f33e08b.js'); });break;case ae.Korean:t=await Promise.resolve().then(function () { return require('./messages.ko-e9e78e29-af958923-12b2a28a.js'); });break;case ae.Lithuanian:t=await Promise.resolve().then(function () { return require('./messages.lt-21cd5fa8-372b323d-2ba99974.js'); });break;case ae.Latvian:t=await Promise.resolve().then(function () { return require('./messages.lv-90fae237-122c75a6-38f55f37.js'); });break;case ae.NorwegianBokml:t=await Promise.resolve().then(function () { return require('./messages.no-70efa82c-4de0550a-ab6adfcb.js'); });break;case ae.Dutch:t=await Promise.resolve().then(function () { return require('./messages.nl-417c9242-82f1f562-9ad48549.js'); });break;case ae.Polish:t=await Promise.resolve().then(function () { return require('./messages.pl-2dec17dd-b41cd665-19909208.js'); });break;case ae.PortugueseBrazil:t=await Promise.resolve().then(function () { return require('./messages.pt-BR-56a76dfb-d3f9be29-201ec83e.js'); });break;case ae.PortuguesePortugal:t=await Promise.resolve().then(function () { return require('./messages.pt-PT-67e158bf-3b71da00-2240a2ac.js'); });break;case ae.Romanian:t=await Promise.resolve().then(function () { return require('./messages.ro-fbedb46a-81832119-4eecf7c2.js'); });break;case ae.Russian:t=await Promise.resolve().then(function () { return require('./messages.ru-46c525de-2f76c6b0-3ddc31ef.js'); });break;case ae.Serbian:t=await Promise.resolve().then(function () { return require('./messages.sr-6eeefca3-a9298700-0fd8a3c7.js'); });break;case ae.Slovak:t=await Promise.resolve().then(function () { return require('./messages.sk-36f6b3f3-53db22a4-b699bae4.js'); });break;case ae.Slovenian:t=await Promise.resolve().then(function () { return require('./messages.sl-407c0dc1-5a9ccb44-2898b2ef.js'); });break;case ae.Swedish:t=await Promise.resolve().then(function () { return require('./messages.sv-8a49b669-29326c1b-4f678069.js'); });break;case ae.Thai:t=await Promise.resolve().then(function () { return require('./messages.th-63ead210-241edc8d-f7c8b633.js'); });break;case ae.Turkish:t=await Promise.resolve().then(function () { return require('./messages.tr-7c612534-d6e20594-cd42e893.js'); });break;case ae.Ukrainian:t=await Promise.resolve().then(function () { return require('./messages.uk-7a3e2f41-284ded4d-e128de5e.js'); });break;case ae.Vietnamese:t=await Promise.resolve().then(function () { return require('./messages.vi-7bf62f1e-b3a7504e-8c83375b.js'); });break;case ae.ChineseChina:t=await Promise.resolve().then(function () { return require('./messages.zh-CN-9407591c-9642a282-e318b14b.js'); });break;case ae.ChineseHongKong:t=await Promise.resolve().then(function () { return require('./messages.zh-HK-fc092e0a-82de2243-2a559ff8.js'); });break;case ae.ChineseTaiwan:t=await Promise.resolve().then(function () { return require('./messages.zh-TW-53165175-f4fa5e36-24d3e251.js'); });}return t}async function uo(e){const{queryObject:t,queryConfig:r,returnUniqueIdsOnly:i,abortKey:a}=e;let s=[];const o=to(t);if(void 0!==t){const n=function(e){return !0===eo(e)?.sourceJSON?.advancedQueryCapabilities?.supportsMaxRecordCountFactor?Pi:void 0}(o),l=await so({queryObject:t,queryConfig:r,maxRecordCountFactor:n});try{!0===i?"queryObjectIds"in t?s=await t.queryObjectIds(l):(l.outFields=[o.objectIdField],s=(await t.queryFeatures(l,{signal:void 0!==a?oo.get(a)?.signal:void 0})).features.map((e=>e.attributes[o.objectIdField]))):s=(await t.queryFeatures(l,{signal:void 0!==a?oo.get(a)?.signal:void 0})).features;}catch(e){if(!(await async function(){if(Ws)return await window.$arcgis.import("esri/core/promiseUtils");const e=await Promise.resolve().then(function () { return /*#__PURE__*/_interopNamespace(require('@arcgis/core/core/promiseUtils.js')); });return Ys(e)?e.default:e}()).isAbortError(e)){const t=await co();throw new lo(no,t.queryError,e)}}}return s}async function fo(e){const t=[],{featureCount:r,maxRecords:i,queryConfig:a}=e;let s=[],o=0,n=a?.start??0;for(;o<Ci&&n<r;){const s={...e};s.queryConfig={...a,start:n,num:Math.min(i,r-n)},t.push(uo(s)),n+=i,o+=1;}return s=(await Promise.all(t)).flat(),s}async function ho(e){const{queryObject:t,queryConfig:r,category:i,splitByField:a,chartLimits:o,abortKey:n}=e,l=void 0!==a,c=i!==Li?[i]:[];l&&c.push(a);const u=to(t),d={...r,groupByFieldsForStatistics:Array.from(new Set(c)),outStatistics:[{statisticType:s,onStatisticField:u.objectIdField,outStatisticFieldName:`${s}_OBJECTID`}],orderByFields:void 0,num:o?.maxBarThreePlusSeriesCountTotal},f=await async function(e){const{queryObject:t,queryConfig:r,returnUniqueIdsOnly:i,featureCount:a,noBatch:s,abortKey:o}=e;let n=[];const l=to(t);if(void 0!==t){const e=a??1,c=ro(l);if(!0!==s&&e>c&&l.capabilities?.query.supportsPagination){let a=0,s=0;const l=Math.ceil(e/c),u=Math.ceil(l/Ci),d=[];for(;s<u;){a=s*Ci*c;const n=fo({queryConfig:{...r,start:a},queryObject:t,maxRecords:c,featureCount:e,returnUniqueIdsOnly:i,abortKey:o});d.push(n),s+=1;}n=(await Promise.all(d)).flat();}else (Number.isNaN(e)||e>=0)&&(n=await uo({queryObject:t,queryConfig:r,returnUniqueIdsOnly:i,abortKey:o}));}return n}({queryObject:t,featureCount:1,queryConfig:d,abortKey:n});return Array.from(new Set(f.map((e=>e.attributes[l?a:i])))).sort(((e,t)=>"string"==typeof e&&"string"==typeof t?e.localeCompare(t):Number(e)-Number(t)))}function po(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var go,mo,yo,vo,bo,wo,So,xo,_o,Fo={exports:{}};function jo(){return go||(go=1,function(e){function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var i=t.length-1,a=1;a<i;++a)t[a]=t[a].slice(1,-1);return t[i]=t[i].slice(1),t.join("")}return t[0]}function r(e){return "(?:"+e+")"}function i(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function a(e){return e.toUpperCase()}function s(e){var i="[A-Za-z]",a="[0-9]",s=t(a,"[A-Fa-f]"),o=r(r("%[EFef]"+s+"%"+s+s+"%"+s+s)+"|"+r("%[89A-Fa-f]"+s+"%"+s+s)+"|"+r("%"+s+s)),n="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",l=t("[\\:\\/\\?\\#\\[\\]\\@]",n),c=e?"[\\uE000-\\uF8FF]":"[]",u=t(i,a,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]");r(i+t(i,a,"[\\+\\-\\.]")+"*"),r(r(o+"|"+t(u,n,"[\\:]"))+"*");var d=r(r("25[0-5]")+"|"+r("2[0-4]"+a)+"|"+r("1"+a+a)+"|"+r("0?[1-9]"+a)+"|0?0?"+a),f=r(d+"\\."+d+"\\."+d+"\\."+d),h=r(s+"{1,4}"),p=r(r(h+"\\:"+h)+"|"+f),g=r(r(h+"\\:")+"{6}"+p),m=r("\\:\\:"+r(h+"\\:")+"{5}"+p),y=r(r(h)+"?\\:\\:"+r(h+"\\:")+"{4}"+p),v=r(r(r(h+"\\:")+"{0,1}"+h)+"?\\:\\:"+r(h+"\\:")+"{3}"+p),b=r(r(r(h+"\\:")+"{0,2}"+h)+"?\\:\\:"+r(h+"\\:")+"{2}"+p),w=r(r(r(h+"\\:")+"{0,3}"+h)+"?\\:\\:"+h+"\\:"+p),S=r(r(r(h+"\\:")+"{0,4}"+h)+"?\\:\\:"+p),x=r(r(r(h+"\\:")+"{0,5}"+h)+"?\\:\\:"+h),_=r(r(r(h+"\\:")+"{0,6}"+h)+"?\\:\\:"),F=r([g,m,y,v,b,w,S,x,_].join("|")),j=r(r(u+"|"+o)+"+");r("[vV]"+s+"+\\."+t(u,n,"[\\:]")+"+"),r(r(o+"|"+t(u,n))+"*");var P=r(o+"|"+t(u,n,"[\\:\\@]"));return r(r(o+"|"+t(u,n,"[\\@]"))+"+"),r(r(P+"|"+t("[\\/\\?]",c))+"*"),{NOT_SCHEME:new RegExp(t("[^]",i,a,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",u,n),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",u,n),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",u,n),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",u,n),"g"),NOT_QUERY:new RegExp(t("[^\\%]",u,n,"[\\:\\@\\/\\?]",c),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",u,n,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",u,n),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",u,l),"g"),PCT_ENCODED:new RegExp(o,"g"),IPV4ADDRESS:new RegExp("^("+f+")$"),IPV6ADDRESS:new RegExp("^\\[?("+F+")"+r(r("\\%25|\\%(?!"+s+"{2})")+"("+j+")")+"?\\]?$")}}var o=s(!1),n=s(!0),l=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],i=!0,a=!1,s=void 0;try{for(var o,n=e[Symbol.iterator]();!(i=(o=n.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(e){a=!0,s=e;}finally{try{!i&&n.return&&n.return();}finally{if(a)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=2147483647,u=36,d=/^xn--/,f=/[^\0-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=Math.floor,m=String.fromCharCode;function y(e){throw new RangeError(p[e])}function v(e,t){var r=e.split("@"),i="";return r.length>1&&(i=r[0]+"@",e=r[1]),i+function(e,t){for(var r=[],i=e.length;i--;)r[i]=t(e[i]);return r}((e=e.replace(h,".")).split("."),t).join(".")}function b(e){for(var t=[],r=0,i=e.length;r<i;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<i){var s=e.charCodeAt(r++);56320==(64512&s)?t.push(((1023&a)<<10)+(1023&s)+65536):(t.push(a),r--);}else t.push(a);}return t}var w=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:u},S=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},x=function(e,t,r){var i=0;for(e=r?g(e/700):e>>1,e+=g(e/t);e>455;i+=u)e=g(e/35);return g(i+36*e/(e+38))},_=function(e){var t=[],r=e.length,i=0,a=128,s=72,o=e.lastIndexOf("-");o<0&&(o=0);for(var n=0;n<o;++n)e.charCodeAt(n)>=128&&y("not-basic"),t.push(e.charCodeAt(n));for(var l=o>0?o+1:0;l<r;){for(var d=i,f=1,h=u;;h+=u){l>=r&&y("invalid-input");var p=w(e.charCodeAt(l++));(p>=u||p>g((c-i)/f))&&y("overflow"),i+=p*f;var m=h<=s?1:h>=s+26?26:h-s;if(p<m)break;var v=u-m;f>g(c/v)&&y("overflow"),f*=v;}var b=t.length+1;s=x(i-d,b,0==d),g(i/b)>c-a&&y("overflow"),a+=g(i/b),i%=b,t.splice(i++,0,a);}return String.fromCodePoint.apply(String,t)},F=function(e){var t=[],r=(e=b(e)).length,i=128,a=0,s=72,o=!0,n=!1,l=void 0;try{for(var d,f=e[Symbol.iterator]();!(o=(d=f.next()).done);o=!0){var h=d.value;h<128&&t.push(m(h));}}catch(e){n=!0,l=e;}finally{try{!o&&f.return&&f.return();}finally{if(n)throw l}}var p=t.length,v=p;for(p&&t.push("-");v<r;){var w=c,_=!0,F=!1,j=void 0;try{for(var P,C=e[Symbol.iterator]();!(_=(P=C.next()).done);_=!0){var E=P.value;E>=i&&E<w&&(w=E);}}catch(e){F=!0,j=e;}finally{try{!_&&C.return&&C.return();}finally{if(F)throw j}}var k=v+1;w-i>g((c-a)/k)&&y("overflow"),a+=(w-i)*k,i=w;var I=!0,O=!1,A=void 0;try{for(var T,L=e[Symbol.iterator]();!(I=(T=L.next()).done);I=!0){var D=T.value;if(D<i&&++a>c&&y("overflow"),D==i){for(var $=a,U=u;;U+=u){var B=U<=s?1:U>=s+26?26:U-s;if($<B)break;var R=$-B,N=u-B;t.push(m(S(B+R%N,0))),$=g(R/N);}t.push(m(S($,0))),s=x(a,k,v==p),a=0,++v;}}}catch(e){O=!0,A=e;}finally{try{!I&&L.return&&L.return();}finally{if(O)throw A}}++a,++i;}return t.join("")},j=function(e){return v(e,(function(e){return f.test(e)?"xn--"+F(e):e}))},P=function(e){return v(e,(function(e){return d.test(e)?_(e.slice(4).toLowerCase()):e}))},C={};function E(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function k(e){for(var t="",r=0,i=e.length;r<i;){var a=parseInt(e.substr(r+1,2),16);if(a<128)t+=String.fromCharCode(a),r+=3;else if(a>=194&&a<224){if(i-r>=6){var s=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&a)<<6|63&s);}else t+=e.substr(r,6);r+=6;}else if(a>=224){if(i-r>=9){var o=parseInt(e.substr(r+4,2),16),n=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&a)<<12|(63&o)<<6|63&n);}else t+=e.substr(r,9);r+=9;}else t+=e.substr(r,3),r+=3;}return t}function I(e,t){function r(e){var r=k(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,E).replace(t.PCT_ENCODED,a)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,E).replace(t.PCT_ENCODED,a)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,E).replace(t.PCT_ENCODED,a)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,E).replace(t.PCT_ENCODED,a)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,E).replace(t.PCT_ENCODED,a)),e}function O(e){return e.replace(/^0*(.*)/,"$1")||"0"}function A(e,t){var r=e.match(t.IPV4ADDRESS)||[],i=l(r,2)[1];return i?i.split(".").map(O).join("."):e}function T(e,t){var r=e.match(t.IPV6ADDRESS)||[],i=l(r,3),a=i[1],s=i[2];if(a){for(var o=a.toLowerCase().split("::").reverse(),n=l(o,2),c=n[0],u=n[1],d=u?u.split(":").map(O):[],f=c.split(":").map(O),h=t.IPV4ADDRESS.test(f[f.length-1]),p=h?7:8,g=f.length-p,m=Array(p),y=0;y<p;++y)m[y]=d[y]||f[g+y]||"";h&&(m[p-1]=A(m[p-1],t));var v=m.reduce((function(e,t,r){if(!t||"0"===t){var i=e[e.length-1];i&&i.index+i.length===r?i.length++:e.push({index:r,length:1});}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],b=void 0;if(v&&v.length>1){var w=m.slice(0,v.index),S=m.slice(v.index+v.length);b=w.join(":")+"::"+S.join(":");}else b=m.join(":");return s&&(b+="%"+s),b}return e}var L=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,D=void 0==="".match(/(){0}/)[1];function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},i=!1!==t.iri?n:o;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var a=e.match(L);if(a){D?(r.scheme=a[1],r.userinfo=a[3],r.host=a[4],r.port=parseInt(a[5],10),r.path=a[6]||"",r.query=a[7],r.fragment=a[8],isNaN(r.port)&&(r.port=a[5])):(r.scheme=a[1]||void 0,r.userinfo=-1!==e.indexOf("@")?a[3]:void 0,r.host=-1!==e.indexOf("//")?a[4]:void 0,r.port=parseInt(a[5],10),r.path=a[6]||"",r.query=-1!==e.indexOf("?")?a[7]:void 0,r.fragment=-1!==e.indexOf("#")?a[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?a[4]:void 0)),r.host&&(r.host=T(A(r.host,i),i)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var s=C[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||s&&s.unicodeSupport)I(r,i);else {if(r.host&&(t.domainHost||s&&s.domainHost))try{r.host=j(r.host.replace(i.PCT_ENCODED,k).toLowerCase());}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e;}I(r,o);}s&&s.parse&&s.parse(r,t);}else r.error=r.error||"URI can not be parsed.";return r}var U=/^\.\.?\//,B=/^\/\.(\/|$)/,R=/^\/\.\.(\/|$)/,N=/^\/?(?:.|\n)*?(?=\/|$)/;function M(e){for(var t=[];e.length;)if(e.match(U))e=e.replace(U,"");else if(e.match(B))e=e.replace(B,"/");else if(e.match(R))e=e.replace(R,"/"),t.pop();else if("."===e||".."===e)e="";else {var r=e.match(N);if(!r)throw new Error("Unexpected dot segment condition");var i=r[0];e=e.slice(i.length),t.push(i);}return t.join("")}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?n:o,i=[],a=C[(t.scheme||e.scheme||"").toLowerCase()];if(a&&a.serialize&&a.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||a&&a.domainHost)try{e.host=t.iri?P(e.host):j(e.host.replace(r.PCT_ENCODED,k).toLowerCase());}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r;}I(e,r),"suffix"!==t.reference&&e.scheme&&(i.push(e.scheme),i.push(":"));var s=function(e,t){var r=!1!==t.iri?n:o,i=[];return void 0!==e.userinfo&&(i.push(e.userinfo),i.push("@")),void 0!==e.host&&i.push(T(A(String(e.host),r),r).replace(r.IPV6ADDRESS,(function(e,t,r){return "["+t+(r?"%25"+r:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(i.push(":"),i.push(String(e.port))),i.length?i.join(""):void 0}(e,t);if(void 0!==s&&("suffix"!==t.reference&&i.push("//"),i.push(s),e.path&&"/"!==e.path.charAt(0)&&i.push("/")),void 0!==e.path){var l=e.path;t.absolutePath||a&&a.absolutePath||(l=M(l)),void 0===s&&(l=l.replace(/^\/\//,"/%2F")),i.push(l);}return void 0!==e.query&&(i.push("?"),i.push(e.query)),void 0!==e.fragment&&(i.push("#"),i.push(e.fragment)),i.join("")}function V(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={};return arguments[3]||(e=$(z(e,r),r),t=$(z(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=M(t.path||""),i.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=M(t.path||""),i.query=t.query):(t.path?("/"===t.path.charAt(0)?i.path=M(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path:i.path="/"+t.path,i.path=M(i.path)),i.query=t.query):(i.path=e.path,void 0!==t.query?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function q(e,t){return e&&e.toString().replace(t&&t.iri?n.PCT_ENCODED:o.PCT_ENCODED,k)}var G={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var r="https"===String(e.scheme).toLowerCase();return e.port!==(r?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},Q={scheme:"https",domainHost:G.domainHost,parse:G.parse,serialize:G.serialize};function H(e){return "boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var K={scheme:"ws",domainHost:!0,parse:function(e,t){var r=e;return r.secure=H(r),r.resourceName=(r.path||"/")+(r.query?"?"+r.query:""),r.path=void 0,r.query=void 0,r},serialize:function(e,t){if(e.port!==(H(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var r=e.resourceName.split("?"),i=l(r,2),a=i[0],s=i[1];e.path=a&&"/"!==a?a:void 0,e.query=s,e.resourceName=void 0;}return e.fragment=void 0,e}},X={scheme:"wss",domainHost:K.domainHost,parse:K.parse,serialize:K.serialize},W={},Y="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",J="[0-9A-Fa-f]",Z=r(r("%[EFef]"+J+"%"+J+J+"%"+J+J)+"|"+r("%[89A-Fa-f]"+J+"%"+J+J)+"|"+r("%"+J+J)),ee=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),te=new RegExp(Y,"g"),re=new RegExp(Z,"g"),ie=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',ee),"g"),ae=new RegExp(t("[^]",Y,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),se=ae;function oe(e){var t=k(e);return t.match(te)?t:e}var ne={scheme:"mailto",parse:function(e,t){var r=e,i=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var a=!1,s={},o=r.query.split("&"),n=0,l=o.length;n<l;++n){var c=o[n].split("=");switch(c[0]){case"to":for(var u=c[1].split(","),d=0,f=u.length;d<f;++d)i.push(u[d]);break;case"subject":r.subject=q(c[1],t);break;case"body":r.body=q(c[1],t);break;default:a=!0,s[q(c[0],t)]=q(c[1],t);}}a&&(r.headers=s);}r.query=void 0;for(var h=0,p=i.length;h<p;++h){var g=i[h].split("@");if(g[0]=q(g[0]),t.unicodeSupport)g[1]=q(g[1],t).toLowerCase();else try{g[1]=j(q(g[1],t).toLowerCase());}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e;}i[h]=g.join("@");}return r},serialize:function(e,t){var r=e,i=function(e){return null!=e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}(e.to);if(i){for(var s=0,o=i.length;s<o;++s){var n=String(i[s]),l=n.lastIndexOf("@"),c=n.slice(0,l).replace(re,oe).replace(re,a).replace(ie,E),u=n.slice(l+1);try{u=t.iri?P(u):j(q(u,t).toLowerCase());}catch(e){r.error=r.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e;}i[s]=c+"@"+u;}r.path=i.join(",");}var d=e.headers=e.headers||{};e.subject&&(d.subject=e.subject),e.body&&(d.body=e.body);var f=[];for(var h in d)d[h]!==W[h]&&f.push(h.replace(re,oe).replace(re,a).replace(ae,E)+"="+d[h].replace(re,oe).replace(re,a).replace(se,E));return f.length&&(r.query=f.join("&")),r}},le=/^([^\:]+)\:(.*)/,ce={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(le),i=e;if(r){var a=t.scheme||i.scheme||"urn",s=r[1].toLowerCase(),o=r[2],n=a+":"+(t.nid||s),l=C[n];i.nid=s,i.nss=o,i.path=void 0,l&&(i=l.parse(i,t));}else i.error=i.error||"URN can not be parsed.";return i},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",i=e.nid,a=r+":"+(t.nid||i),s=C[a];s&&(e=s.serialize(e,t));var o=e,n=e.nss;return o.path=(i||t.nid)+":"+n,o}},ue=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,de={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(ue)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};C[G.scheme]=G,C[Q.scheme]=Q,C[K.scheme]=K,C[X.scheme]=X,C[ne.scheme]=ne,C[ce.scheme]=ce,C[de.scheme]=de,e.SCHEMES=C,e.pctEncChar=E,e.pctDecChars=k,e.parse=$,e.removeDotSegments=M,e.serialize=z,e.resolveComponents=V,e.resolve=function(e,t,r){var i=function(e,t){var r=e;if(t)for(var i in t)r[i]=t[i];return r}({scheme:"null"},r);return z(V($(e,i),$(t,i),i,!0),i)},e.normalize=function(e,t){return "string"==typeof e?e=z($(e,t),t):"object"===i(e)&&(e=$(z(e,t),t)),e},e.equal=function(e,t,r){return "string"==typeof e?e=z($(e,r),r):"object"===i(e)&&(e=z(e,r)),"string"==typeof t?t=z($(t,r),r):"object"===i(t)&&(t=z(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?n.ESCAPE:o.ESCAPE,E)},e.unescapeComponent=q,Object.defineProperty(e,"__esModule",{value:!0});}(Fo.exports)),Fo.exports}function Po(){return yo||(yo=1,mo=function e(t,r){if(t===r)return !0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return !1;var i,a,s;if(Array.isArray(t)){if((i=t.length)!=r.length)return !1;for(a=i;0!=a--;)if(!e(t[a],r[a]))return !1;return !0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((i=(s=Object.keys(t)).length)!==Object.keys(r).length)return !1;for(a=i;0!=a--;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return !1;for(a=i;0!=a--;){var o=s[a];if(!e(t[o],r[o]))return !1}return !0}return t!=t&&r!=r}),mo}function Co(){if(So)return wo;function e(e,t,r,i){var a=i?" !== ":" === ",s=i?" || ":" && ",o=i?"!":"",n=i?"":"!";switch(e){case"null":return t+a+"null";case"array":return o+"Array.isArray("+t+")";case"object":return "("+o+t+s+"typeof "+t+a+'"object"'+s+n+"Array.isArray("+t+"))";case"integer":return "(typeof "+t+a+'"number"'+s+n+"("+t+" % 1)"+s+t+a+t+(r?s+o+"isFinite("+t+")":"")+")";case"number":return "(typeof "+t+a+'"'+e+'"'+(r?s+o+"isFinite("+t+")":"")+")";default:return "typeof "+t+a+'"'+e+'"'}}So=1,wo={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:e,checkDataTypes:function(t,i,a){if(1===t.length)return e(t[0],i,a,!0);var s="",o=r(t);for(var n in o.array&&o.object&&(s=o.null?"(":"(!"+i+" || ",s+="typeof "+i+' !== "object")',delete o.null,delete o.array,delete o.object),o.number&&delete o.integer,o)s+=(s?" && ":"")+e(n,i,a,!0);return s},coerceToTypes:function(e,r){if(Array.isArray(r)){for(var i=[],a=0;a<r.length;a++){var s=r[a];(t[s]||"array"===e&&"array"===s)&&(i[i.length]=s);}if(i.length)return i}else {if(t[r])return [r];if("array"===e&&"array"===r)return ["array"]}},toHash:r,getProperty:s,escapeQuotes:o,equal:Po(),ucs2length:bo?vo:(bo=1,vo=function(e){for(var t,r=0,i=e.length,a=0;a<i;)r++,(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<i&&56320==(64512&(t=e.charCodeAt(a)))&&a++;return r}),varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},schemaHasRules:function(e,t){if("boolean"==typeof e)return !e;for(var r in e)if(t[r])return !0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return !e&&"not"!=r;for(var i in e)if(i!=r&&t[i])return !0},schemaUnknownRules:function(e,t){if("boolean"!=typeof e)for(var r in e)if(!t[r])return r},toQuotedString:n,getPathExpr:function(e,t,r,i){return u(e,r?"'/' + "+t+(i?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):i?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){return u(e,n(r?"/"+d(t):s(t)))},getData:function(e,t,r){var i,a,o,n;if(""===e)return "rootData";if("/"==e[0]){if(!l.test(e))throw new Error("Invalid JSON-pointer: "+e);a=e,o="rootData";}else {if(!(n=e.match(c)))throw new Error("Invalid JSON-pointer: "+e);if(i=+n[1],"#"==(a=n[2])){if(i>=t)throw new Error("Cannot access property/index "+i+" levels up, current level is "+t);return r[t-i]}if(i>t)throw new Error("Cannot access data "+i+" levels up, current level is "+t);if(o="data"+(t-i||""),!a)return o}for(var u=o,d=a.split("/"),h=0;h<d.length;h++){var p=d[h];p&&(u+=" && "+(o+=s(f(p))));}return u},unescapeFragment:function(e){return f(decodeURIComponent(e))},unescapeJsonPointer:f,escapeFragment:function(e){return encodeURIComponent(d(e))},escapeJsonPointer:d};var t=r(["string","number","integer","boolean","null"]);function r(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var i=/^[a-z$_][a-z$_0-9]*$/i,a=/'|\\/g;function s(e){return "number"==typeof e?"["+e+"]":i.test(e)?"."+e:"['"+o(e)+"']"}function o(e){return e.replace(a,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function n(e){return "'"+o(e)+"'"}var l=/^\/(?:[^~]|~0|~1)*$/,c=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function u(e,t){return '""'==e?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function d(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function f(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}return wo}function Eo(){if(_o)return xo;_o=1;var e=Co();return xo=function(t){e.copy(t,this);}}var ko,Io,Oo,Ao,To,Lo,Do,$o,Uo,Bo,Ro,No={exports:{}};function Mo(){if(Oo)return Io;Oo=1;var e=jo(),t=Po(),r=Co(),i=Eo(),a=function(){if(ko)return No.exports;ko=1;var e=No.exports=function(e,r,i){"function"==typeof r&&(i=r,r={}),t(r,"function"==typeof(i=r.cb||i)?i:i.pre||function(){},i.post||function(){},e,"",e);};function t(r,i,a,s,o,n,l,c,u,d){if(s&&"object"==typeof s&&!Array.isArray(s)){for(var f in i(s,o,n,l,c,u,d),s){var h=s[f];if(Array.isArray(h)){if(f in e.arrayKeywords)for(var p=0;p<h.length;p++)t(r,i,a,h[p],o+"/"+f+"/"+p,n,o,f,s,p);}else if(f in e.propsKeywords){if(h&&"object"==typeof h)for(var g in h)t(r,i,a,h[g],o+"/"+f+"/"+g.replace(/~/g,"~0").replace(/\//g,"~1"),n,o,f,s,g);}else (f in e.keywords||r.allKeys&&!(f in e.skipKeywords))&&t(r,i,a,h,o+"/"+f,n,o,f,s);}a(s,o,n,l,c,u,d);}}return e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0},No.exports}();function s(e,t,r){var a=this._refs[r];if("string"==typeof a){if(!this._refs[a])return s.call(this,e,t,a);a=this._refs[a];}if((a=a||this._schemas[r])instanceof i)return d(a.schema,this._opts.inlineRefs)?a.schema:a.validate||this._compile(a);var n,l,c,u=o.call(this,t,r);return u&&(n=u.schema,t=u.root,c=u.baseId),n instanceof i?l=n.validate||e.call(this,n.schema,t,void 0,c):void 0!==n&&(l=d(n,this._opts.inlineRefs)?n:e.call(this,n,t,void 0,c)),l}function o(t,r){var a=e.parse(r),s=g(a),o=p(this._getId(t.schema));if(0===Object.keys(t.schema).length||s!==o){var l=y(s),u=this._refs[l];if("string"==typeof u)return n.call(this,t,u,a);if(u instanceof i)u.validate||this._compile(u),t=u;else {if(!((u=this._schemas[l])instanceof i))return;if(u.validate||this._compile(u),l==y(r))return {schema:u,root:t,baseId:o};t=u;}if(!t.schema)return;o=p(this._getId(t.schema));}return c.call(this,a,o,t.schema,t)}function n(e,t,r){var i=o.call(this,e,t);if(i){var a=i.schema,s=i.baseId;e=i.root;var n=this._getId(a);return n&&(s=v(s,n)),c.call(this,r,s,a,e)}}Io=s,s.normalizeId=y,s.fullPath=p,s.url=v,s.ids=function(i){var s=y(this._getId(i)),o={"":s},n={"":p(s,!1)},l={},c=this;return a(i,{allKeys:!0},(function(i,a,s,u,d,f,h){if(""!==a){var p=c._getId(i),g=o[u],m=n[u]+"/"+d;if(void 0!==h&&(m+="/"+("number"==typeof h?h:r.escapeFragment(h))),"string"==typeof p){p=g=y(g?e.resolve(g,p):p);var v=c._refs[p];if("string"==typeof v&&(v=c._refs[v]),v&&v.schema){if(!t(i,v.schema))throw new Error('id "'+p+'" resolves to more than one schema')}else if(p!=y(m))if("#"==p[0]){if(l[p]&&!t(i,l[p]))throw new Error('id "'+p+'" resolves to more than one schema');l[p]=i;}else c._refs[p]=m;}o[a]=g,n[a]=m;}})),l},s.inlineRef=d,s.schema=o;var l=r.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function c(e,t,i,a){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var s=e.fragment.split("/"),n=1;n<s.length;n++){var c=s[n];if(c){if(void 0===(i=i[c=r.unescapeFragment(c)]))break;var u;if(!l[c]&&((u=this._getId(i))&&(t=v(t,u)),i.$ref)){var d=v(t,i.$ref),f=o.call(this,a,d);f&&(i=f.schema,a=f.root,t=f.baseId);}}}return void 0!==i&&i!==a.schema?{schema:i,root:a,baseId:t}:void 0}}var u=r.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function d(e,t){return !1!==t&&(void 0===t||!0===t?f(e):t?h(e)<=t:void 0)}function f(e){var t;if(Array.isArray(e)){for(var r=0;r<e.length;r++)if("object"==typeof(t=e[r])&&!f(t))return !1}else for(var i in e){if("$ref"==i)return !1;if("object"==typeof(t=e[i])&&!f(t))return !1}return !0}function h(e){var t,r=0;if(Array.isArray(e)){for(var i=0;i<e.length;i++)if("object"==typeof(t=e[i])&&(r+=h(t)),r==1/0)return 1/0}else for(var a in e){if("$ref"==a)return 1/0;if(u[a])r++;else if("object"==typeof(t=e[a])&&(r+=h(t)+1),r==1/0)return 1/0}return r}function p(t,r){return !1!==r&&(t=y(t)),g(e.parse(t))}function g(t){return e.serialize(t).split("#")[0]+"#"}var m=/#\/?$/;function y(e){return e?e.replace(m,""):""}function v(t,r){return r=y(r),e.resolve(t,r)}return Io}function zo(){if(To)return Ao;To=1;var e=Mo();function t(r,i,a){this.message=a||t.message(r,i),this.missingRef=e.url(r,i),this.missingSchema=e.normalizeId(e.fullPath(this.missingRef));}function r(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}return Ao={Validation:r((function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0;})),MissingRef:r(t)},t.message=function(e,t){return "can't resolve reference "+t+" from id "+e},Ao}function Vo(){return Do||(Do=1,Lo=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,i="boolean"==typeof t.cycles&&t.cycles,a=t.cmp&&(r=t.cmp,function(e){return function(t,i){var a={key:t,value:e[t]},s={key:i,value:e[i]};return r(a,s)}}),s=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var r,o;if(Array.isArray(t)){for(o="[",r=0;r<t.length;r++)r&&(o+=","),o+=e(t[r])||"null";return o+"]"}if(null===t)return "null";if(-1!==s.indexOf(t)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var n=s.push(t)-1,l=Object.keys(t).sort(a&&a(t));for(o="",r=0;r<l.length;r++){var c=l[r],u=e(t[c]);u&&(o&&(o+=","),o+=JSON.stringify(c)+":"+u);}return s.splice(n,1),"{"+o+"}"}}(e)}),Lo}function qo(){return Uo||(Uo=1,$o=function(e,t,r){var i="",a=!0===e.schema.$async,s=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),o=e.self._getId(e.schema);if(e.opts.strictKeywords){var n=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(n){var l="unknown keyword: "+n;if("log"!==e.opts.strictKeywords)throw new Error(l);e.logger.warn(l);}}if(e.isTop&&(i+=" var validate = ",a&&(e.async=!0,i+="async "),i+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",o&&(e.opts.sourceCode||e.opts.processCode)&&(i+=" /*# sourceURL="+o+" */ ")),"boolean"==typeof e.schema||!s&&!e.schema.$ref){t="false schema";var c=e.level,u=e.dataLevel,d=e.schema[t],f=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,g="data"+(u||""),m="valid"+c;if(!1===e.schema){e.isTop?p=!0:i+=" var "+m+" = false; ",(G=G||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'boolean schema is false' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),i+=" } "):i+=" {} ";var y=i;i=G.pop(),!e.compositeRule&&p?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";}else e.isTop?i+=a?" return data; ":" validate.errors = null; return true; ":i+=" var "+m+" = true; ";return e.isTop&&(i+=" }; return validate; "),i}if(e.isTop){var v=e.isTop;if(c=e.level=0,u=e.dataLevel=0,g="data",e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var b="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b);}i+=" var vErrors = null; ",i+=" var errors = 0;     ",i+=" if (rootData === undefined) rootData = data; ";}else {if(c=e.level,g="data"+((u=e.dataLevel)||""),o&&(e.baseId=e.resolve.url(e.baseId,o)),a&&!e.async)throw new Error("async schema in sync schema");i+=" var errs_"+c+" = errors;";}m="valid"+c,p=!e.opts.allErrors;var w="",S="",x=e.schema.type,_=Array.isArray(x);if(x&&e.opts.nullable&&!0===e.schema.nullable&&(_?-1==x.indexOf("null")&&(x=x.concat("null")):"null"!=x&&(x=[x,"null"],_=!0)),_&&1==x.length&&(x=x[0],_=!1),e.schema.$ref&&s){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(s=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'));}if(e.schema.$comment&&e.opts.$comment&&(i+=" "+e.RULES.all.$comment.code(e,"$comment")),x){if(e.opts.coerceTypes)var F=e.util.coerceToTypes(e.opts.coerceTypes,x);var j=e.RULES.types[x];if(F||_||!0===j||j&&!Y(j)){f=e.schemaPath+".type",h=e.errSchemaPath+"/type",f=e.schemaPath+".type",h=e.errSchemaPath+"/type";var P=_?"checkDataTypes":"checkDataType";if(i+=" if ("+e.util[P](x,g,e.opts.strictNumbers,!0)+") { ",F){var C="dataType"+c,E="coerced"+c;i+=" var "+C+" = typeof "+g+"; var "+E+" = undefined; ","array"==e.opts.coerceTypes&&(i+=" if ("+C+" == 'object' && Array.isArray("+g+") && "+g+".length == 1) { "+g+" = "+g+"[0]; "+C+" = typeof "+g+"; if ("+e.util.checkDataType(e.schema.type,g,e.opts.strictNumbers)+") "+E+" = "+g+"; } "),i+=" if ("+E+" !== undefined) ; ";var k=F;if(k)for(var I,O=-1,A=k.length-1;O<A;)"string"==(I=k[O+=1])?i+=" else if ("+C+" == 'number' || "+C+" == 'boolean') "+E+" = '' + "+g+"; else if ("+g+" === null) "+E+" = ''; ":"number"==I||"integer"==I?(i+=" else if ("+C+" == 'boolean' || "+g+" === null || ("+C+" == 'string' && "+g+" && "+g+" == +"+g+" ","integer"==I&&(i+=" && !("+g+" % 1)"),i+=")) "+E+" = +"+g+"; "):"boolean"==I?i+=" else if ("+g+" === 'false' || "+g+" === 0 || "+g+" === null) "+E+" = false; else if ("+g+" === 'true' || "+g+" === 1) "+E+" = true; ":"null"==I?i+=" else if ("+g+" === '' || "+g+" === 0 || "+g+" === false) "+E+" = null; ":"array"==e.opts.coerceTypes&&"array"==I&&(i+=" else if ("+C+" == 'string' || "+C+" == 'number' || "+C+" == 'boolean' || "+g+" == null) "+E+" = ["+g+"]; ");i+=" else {   ",(G=G||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",i+=_?""+x.join(","):""+x,i+="' } ",!1!==e.opts.messages&&(i+=" , message: 'should be ",i+=_?""+x.join(","):""+x,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),i+=" } "):i+=" {} ",y=i,i=G.pop(),!e.compositeRule&&p?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } if ("+E+" !== undefined) {  ";var T=u?"data"+(u-1||""):"parentData";i+=" "+g+" = "+E+"; ",u||(i+="if ("+T+" !== undefined)"),i+=" "+T+"["+(u?e.dataPathArr[u]:"parentDataProperty")+"] = "+E+"; } ";}else (G=G||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",i+=_?""+x.join(","):""+x,i+="' } ",!1!==e.opts.messages&&(i+=" , message: 'should be ",i+=_?""+x.join(","):""+x,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),i+=" } "):i+=" {} ",y=i,i=G.pop(),!e.compositeRule&&p?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";i+=" } ";}}if(e.schema.$ref&&!s)i+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",p&&(i+=" } if (errors === ",i+=v?"0":"errs_"+c,i+=") { ",S+="}");else {var L=e.RULES;if(L)for(var D=-1,$=L.length-1;D<$;)if(Y(j=L[D+=1])){if(j.type&&(i+=" if ("+e.util.checkDataType(j.type,g,e.opts.strictNumbers)+") { "),e.opts.useDefaults)if("object"==j.type&&e.schema.properties){d=e.schema.properties;var U=Object.keys(d);if(U)for(var B,R=-1,N=U.length-1;R<N;)if(void 0!==(V=d[B=U[R+=1]]).default){var M=g+e.util.getProperty(B);if(e.compositeRule){if(e.opts.strictDefaults){if(b="default is ignored for: "+M,"log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b);}}else i+=" if ("+M+" === undefined ","empty"==e.opts.useDefaults&&(i+=" || "+M+" === null || "+M+" === '' "),i+=" ) "+M+" = ","shared"==e.opts.useDefaults?i+=" "+e.useDefault(V.default)+" ":i+=" "+JSON.stringify(V.default)+" ",i+="; ";}}else if("array"==j.type&&Array.isArray(e.schema.items)){var z=e.schema.items;if(z){O=-1;for(var V,q=z.length-1;O<q;)if(void 0!==(V=z[O+=1]).default)if(M=g+"["+O+"]",e.compositeRule){if(e.opts.strictDefaults){if(b="default is ignored for: "+M,"log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b);}}else i+=" if ("+M+" === undefined ","empty"==e.opts.useDefaults&&(i+=" || "+M+" === null || "+M+" === '' "),i+=" ) "+M+" = ","shared"==e.opts.useDefaults?i+=" "+e.useDefault(V.default)+" ":i+=" "+JSON.stringify(V.default)+" ",i+="; ";}}var G,Q=j.rules;if(Q)for(var H,K=-1,X=Q.length-1;K<X;)if(J(H=Q[K+=1])){var W=H.code(e,H.keyword,j.type);W&&(i+=" "+W+" ",p&&(w+="}"));}if(p&&(i+=" "+w+" ",w=""),j.type&&(i+=" } ",x&&x===j.type&&!F))i+=" else { ",f=e.schemaPath+".type",h=e.errSchemaPath+"/type",(G=G||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",i+=_?""+x.join(","):""+x,i+="' } ",!1!==e.opts.messages&&(i+=" , message: 'should be ",i+=_?""+x.join(","):""+x,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),i+=" } "):i+=" {} ",y=i,i=G.pop(),!e.compositeRule&&p?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ";p&&(i+=" if (errors === ",i+=v?"0":"errs_"+c,i+=") { ",S+="}");}}function Y(e){for(var t=e.rules,r=0;r<t.length;r++)if(J(t[r]))return !0}function J(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,i=0;i<r.length;i++)if(void 0!==e.schema[r[i]])return !0}(t)}return p&&(i+=" "+S+" "),v?(a?(i+=" if (errors === 0) return data;           ",i+=" else throw new ValidationError(vErrors); "):(i+=" validate.errors = vErrors; ",i+=" return errors === 0;       "),i+=" }; return validate;"):i+=" var "+m+" = errors === errs_"+c+";",i}),$o}var Go,Qo,Ho,Ko,Xo,Wo,Yo,Jo,Zo,en,tn,rn,an,sn,on,nn,ln,cn,un,dn,fn,hn,pn,gn,mn,yn,vn,bn,wn,Sn,xn,_n,Fn,jn,Pn,Cn,En,kn,In,On,An,Tn,Ln,Dn,$n,Un,Bn,Rn,Nn,Mn,zn,Vn,qn,Gn,Qn,Hn,Kn,Xn,Wn,Yn={exports:{}};function Jn(){return vn||(vn=1,yn=function(e,t,r){var i,a=" ",s=e.level,o=e.dataLevel,n=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),f=e.opts.$data&&n&&n.$data;f?(a+=" var schema"+s+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",i="schema"+s):i=n;var h="maximum"==t,p=h?"exclusiveMaximum":"exclusiveMinimum",g=e.schema[p],m=e.opts.$data&&g&&g.$data,y=h?"<":">",v=h?">":"<",b=void 0;if(!f&&"number"!=typeof n&&void 0!==n)throw new Error(t+" must be number");if(!m&&void 0!==g&&"number"!=typeof g&&"boolean"!=typeof g)throw new Error(p+" must be number or boolean");if(m){var w,S=e.util.getData(g.$data,o,e.dataPathArr),x="exclusive"+s,_="exclType"+s,F="exclIsNumber"+s,j="' + "+(C="op"+s)+" + '";a+=" var schemaExcl"+s+" = "+S+"; ",a+=" var "+x+"; var "+_+" = typeof "+(S="schemaExcl"+s)+"; if ("+_+" != 'boolean' && "+_+" != 'undefined' && "+_+" != 'number') { ",b=p,(w=w||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(b||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: '"+p+" should be boolean' "),e.opts.verbose&&(a+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var P=a;a=w.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+P+"]); ":a+=" validate.errors = ["+P+"]; return false; ":a+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else if ( ",f&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),a+=" "+_+" == 'number' ? ( ("+x+" = "+i+" === undefined || "+S+" "+y+"= "+i+") ? "+d+" "+v+"= "+S+" : "+d+" "+v+" "+i+" ) : ( ("+x+" = "+S+" === true) ? "+d+" "+v+"= "+i+" : "+d+" "+v+" "+i+" ) || "+d+" !== "+d+") { var op"+s+" = "+x+" ? '"+y+"' : '"+y+"='; ",void 0===n&&(b=p,c=e.errSchemaPath+"/"+p,i=S,f=m);}else if(j=y,(F="number"==typeof g)&&f){var C="'"+j+"'";a+=" if ( ",f&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),a+=" ( "+i+" === undefined || "+g+" "+y+"= "+i+" ? "+d+" "+v+"= "+g+" : "+d+" "+v+" "+i+" ) || "+d+" !== "+d+") { ";}else F&&void 0===n?(x=!0,b=p,c=e.errSchemaPath+"/"+p,i=g,v+="="):(F&&(i=Math[h?"min":"max"](g,n)),g===(!F||i)?(x=!0,b=p,c=e.errSchemaPath+"/"+p,v+="="):(x=!1,j+="=")),C="'"+j+"'",a+=" if ( ",f&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),a+=" "+d+" "+v+" "+i+" || "+d+" !== "+d+") { ";return b=b||t,(w=w||[]).push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(b||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { comparison: "+C+", limit: "+i+", exclusive: "+x+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be "+j+" ",a+=f?"' + "+i:i+"'"),e.opts.verbose&&(a+=" , schema:  ",a+=f?"validate.schema"+l:""+n,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ",P=a,a=w.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+P+"]); ":a+=" validate.errors = ["+P+"]; return false; ":a+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",u&&(a+=" else { "),a}),yn}function Zn(){return wn||(wn=1,bn=function(e,t,r){var i,a=" ",s=e.level,o=e.dataLevel,n=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),f=e.opts.$data&&n&&n.$data;if(f?(a+=" var schema"+s+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",i="schema"+s):i=n,!f&&"number"!=typeof n)throw new Error(t+" must be number");a+="if ( ",f&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),a+=" "+d+".length "+("maxItems"==t?">":"<")+" "+i+") { ";var h=t,p=p||[];p.push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(h||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+i+" } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have ",a+="maxItems"==t?"more":"fewer",a+=" than ",a+=f?"' + "+i+" + '":""+n,a+=" items' "),e.opts.verbose&&(a+=" , schema:  ",a+=f?"validate.schema"+l:""+n,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var g=a;return a=p.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+g+"]); ":a+=" validate.errors = ["+g+"]; return false; ":a+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",u&&(a+=" else { "),a}),bn}function el(){return xn||(xn=1,Sn=function(e,t,r){var i,a=" ",s=e.level,o=e.dataLevel,n=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),f=e.opts.$data&&n&&n.$data;if(f?(a+=" var schema"+s+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",i="schema"+s):i=n,!f&&"number"!=typeof n)throw new Error(t+" must be number");var h="maxLength"==t?">":"<";a+="if ( ",f&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),!1===e.opts.unicode?a+=" "+d+".length ":a+=" ucs2length("+d+") ",a+=" "+h+" "+i+") { ";var p=t,g=g||[];g.push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(p||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+i+" } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT be ",a+="maxLength"==t?"longer":"shorter",a+=" than ",a+=f?"' + "+i+" + '":""+n,a+=" characters' "),e.opts.verbose&&(a+=" , schema:  ",a+=f?"validate.schema"+l:""+n,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var m=a;return a=g.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+m+"]); ":a+=" validate.errors = ["+m+"]; return false; ":a+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",u&&(a+=" else { "),a}),Sn}function tl(){return Fn||(Fn=1,_n=function(e,t,r){var i,a=" ",s=e.level,o=e.dataLevel,n=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),f=e.opts.$data&&n&&n.$data;if(f?(a+=" var schema"+s+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",i="schema"+s):i=n,!f&&"number"!=typeof n)throw new Error(t+" must be number");a+="if ( ",f&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),a+=" Object.keys("+d+").length "+("maxProperties"==t?">":"<")+" "+i+") { ";var h=t,p=p||[];p.push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(h||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+i+" } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have ",a+="maxProperties"==t?"more":"fewer",a+=" than ",a+=f?"' + "+i+" + '":""+n,a+=" properties' "),e.opts.verbose&&(a+=" , schema:  ",a+=f?"validate.schema"+l:""+n,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var g=a;return a=p.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+g+"]); ":a+=" validate.errors = ["+g+"]; return false; ":a+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",u&&(a+=" else { "),a}),_n}var rl,il,al,sl,ol={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};var nl,ll,cl,ul={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1},dl=function(){if(ll)return nl;ll=1;var e=function(){if(Ro)return Bo;Ro=1;var e=Mo(),t=Co(),r=zo(),i=Vo(),a=qo(),s=t.ucs2length,o=Po(),n=r.Validation;function l(e,t,r){var i=u.call(this,e,t,r);return i>=0?{index:i,compiling:!0}:(i=this._compilations.length,this._compilations[i]={schema:e,root:t,baseId:r},{index:i,compiling:!1})}function c(e,t,r){var i=u.call(this,e,t,r);i>=0&&this._compilations.splice(i,1);}function u(e,t,r){for(var i=0;i<this._compilations.length;i++){var a=this._compilations[i];if(a.schema==e&&a.root==t&&a.baseId==r)return i}return -1}function d(e,r){return "var pattern"+e+" = new RegExp("+t.toQuotedString(r[e])+");"}function f(e){return "var default"+e+" = defaults["+e+"];"}function h(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function p(e){return "var customRule"+e+" = customRules["+e+"];"}function g(e,t){if(!e.length)return "";for(var r="",i=0;i<e.length;i++)r+=t(i,e);return r}return Bo=function u(m,y,v,b){var w=this,S=this._opts,x=[void 0],_={},F=[],j={},P=[],C={},E=[];y=y||{schema:m,refVal:x,refs:_};var k=l.call(this,m,y,b),I=this._compilations[k.index];if(k.compiling)return I.callValidate=function e(){var t=I.validate,r=t.apply(this,arguments);return e.errors=t.errors,r};var O=this._formats,A=this.RULES;try{var T=D(m,y,v,b);I.validate=T;var L=I.callValidate;return L&&(L.schema=T.schema,L.errors=null,L.refs=T.refs,L.refVal=T.refVal,L.root=T.root,L.$async=T.$async,S.sourceCode&&(L.source=T.source)),T}finally{c.call(this,m,y,b);}function D(i,l,c,m){var v=!l||l&&l.schema==i;if(l.schema!=y.schema)return u.call(w,i,l,c,m);var b,j=!0===i.$async,C=a({isTop:!0,schema:i,isRoot:v,baseId:m,root:l,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:r.MissingRef,RULES:A,validate:a,util:t,resolve:e,resolveRef:$,usePattern:R,useDefault:N,useCustomRule:M,opts:S,formats:O,logger:w.logger,self:w});C=g(x,h)+g(F,d)+g(P,f)+g(E,p)+C,S.processCode&&(C=S.processCode(C,i));try{b=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",C)(w,A,O,y,x,P,E,o,s,n),x[0]=b;}catch(e){throw w.logger.error("Error compiling schema, function code:",C),e}return b.schema=i,b.errors=null,b.refs=_,b.refVal=x,b.root=v?b:l,j&&(b.$async=!0),!0===S.sourceCode&&(b.source={code:C,patterns:F,defaults:P}),b}function $(t,r,i){r=e.url(t,r);var a,s,o=_[r];if(void 0!==o)return B(a=x[o],s="refVal["+o+"]");if(!i&&y.refs){var n=y.refs[r];if(void 0!==n)return B(a=y.refVal[n],s=U(r,a))}s=U(r);var l=e.call(w,D,y,r);if(void 0===l){var c=v&&v[r];c&&(l=e.inlineRef(c,S.inlineRefs)?c:u.call(w,c,y,v,t));}if(void 0!==l)return function(e,t){var r=_[e];x[r]=t;}(r,l),B(l,s);!function(e){delete _[e];}(r);}function U(e,t){var r=x.length;return x[r]=t,_[e]=r,"refVal"+r}function B(e,t){return "object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function R(e){var t=j[e];return void 0===t&&(t=j[e]=F.length,F[t]=e),"pattern"+t}function N(e){switch(typeof e){case"boolean":case"number":return ""+e;case"string":return t.toQuotedString(e);case"object":if(null===e)return "null";var r=i(e),a=C[r];return void 0===a&&(a=C[r]=P.length,P[a]=e),"default"+a}}function M(e,t,r,i){if(!1!==w._opts.validateSchema){var a=e.definition.dependencies;if(a&&!a.every((function(e){return Object.prototype.hasOwnProperty.call(r,e)})))throw new Error("parent schema must have all required keywords: "+a.join(","));var s=e.definition.validateSchema;if(s&&!s(t)){var o="keyword schema is invalid: "+w.errorsText(s.errors);if("log"!=w._opts.validateSchema)throw new Error(o);w.logger.error(o);}}var n,l=e.definition.compile,c=e.definition.inline,u=e.definition.macro;if(l)n=l.call(w,t,r,i);else if(u)n=u.call(w,t,r,i),!1!==S.validateSchema&&w.validateSchema(n,!0);else if(c)n=c.call(w,i,e.keyword,t,r);else if(!(n=e.definition.validate))return;if(void 0===n)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var d=E.length;return E[d]=n,{code:"customRule"+d,validate:n}}},Bo}(),t=Mo(),r=function(){if(Go)return Yn.exports;Go=1;var e=Yn.exports=function(){this._cache={};};return e.prototype.put=function(e,t){this._cache[e]=t;},e.prototype.get=function(e){return this._cache[e]},e.prototype.del=function(e){delete this._cache[e];},e.prototype.clear=function(){this._cache={};},Yn.exports}(),i=Eo(),a=Vo(),s=function(){if(Ho)return Qo;Ho=1;var e=Co(),t=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,r=[0,31,28,31,30,31,30,31,31,30,31,30,31],i=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,a=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,s=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,o=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,n=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,l=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,c=/^(?:\/(?:[^~/]|~0|~1)*)*$/,u=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,d=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function f(t){return t="full"==t?"full":"fast",e.copy(f[t])}function h(e){var i=e.match(t);if(!i)return !1;var a=+i[1],s=+i[2],o=+i[3];return s>=1&&s<=12&&o>=1&&o<=(2==s&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(a)?29:r[s])}function p(e,t){var r=e.match(i);if(!r)return !1;var a=r[1],s=r[2],o=r[3],n=r[5];return (a<=23&&s<=59&&o<=59||23==a&&59==s&&60==o)&&(!t||n)}Qo=f,f.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":o,url:n,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:a,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:v,uuid:l,"json-pointer":c,"json-pointer-uri-fragment":u,"relative-json-pointer":d},f.full={date:h,time:p,"date-time":function(e){var t=e.split(g);return 2==t.length&&h(t[0])&&p(t[1],!0)},uri:function(e){return m.test(e)&&s.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":o,url:n,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:a,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:v,uuid:l,"json-pointer":c,"json-pointer-uri-fragment":u,"relative-json-pointer":d};var g=/t|\s/i,m=/\/|:/,y=/[^\\]\\Z/;function v(e){if(y.test(e))return !1;try{return !0}catch(e){return !1}}return Qo}(),o=function(){if(qn)return Vn;qn=1;var e=(zn||(zn=1,Mn={$ref:(Xo||(Xo=1,Ko=function(e,t,r){var i,a,s=" ",o=e.level,n=e.dataLevel,l=e.schema[t],c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),f="valid"+o;if("#"==l||"#/"==l)e.isRoot?(i=e.async,a="validate"):(i=!0===e.root.schema.$async,a="root.refVal[0]");else {var h=e.resolveRef(e.baseId,l,e.isRoot);if(void 0===h){var p=e.MissingRefError.message(e.baseId,l);if("fail"==e.opts.missingRefs){e.logger.error(p),(v=v||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { ref: '"+e.util.escapeQuotes(l)+"' } ",!1!==e.opts.messages&&(s+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(l)+"' "),e.opts.verbose&&(s+=" , schema: "+e.util.toQuotedString(l)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),s+=" } "):s+=" {} ";var g=s;s=v.pop(),!e.compositeRule&&u?e.async?s+=" throw new ValidationError(["+g+"]); ":s+=" validate.errors = ["+g+"]; return false; ":s+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(s+=" if (false) { ");}else {if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,l,p);e.logger.warn(p),u&&(s+=" if (true) { ");}}else if(h.inline){var m=e.util.copy(e);m.level++;var y="valid"+m.level;m.schema=h.schema,m.schemaPath="",m.errSchemaPath=l,s+=" "+e.validate(m).replace(/validate\.schema/g,h.code)+" ",u&&(s+=" if ("+y+") { ");}else i=!0===h.$async||e.async&&!1!==h.$async,a=h.code;}if(a){var v;(v=v||[]).push(s),s="",e.opts.passContext?s+=" "+a+".call(this, ":s+=" "+a+"( ",s+=" "+d+", (dataPath || '')",'""'!=e.errorPath&&(s+=" + "+e.errorPath);var b=s+=" , "+(n?"data"+(n-1||""):"parentData")+" , "+(n?e.dataPathArr[n]:"parentDataProperty")+", rootData)  ";if(s=v.pop(),i){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(s+=" var "+f+"; "),s+=" try { await "+b+"; ",u&&(s+=" "+f+" = true; "),s+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(s+=" "+f+" = false; "),s+=" } ",u&&(s+=" if ("+f+") { ");}else s+=" if (!"+b+") { if (vErrors === null) vErrors = "+a+".errors; else vErrors = vErrors.concat("+a+".errors); errors = vErrors.length; } ",u&&(s+=" else { ");}return s}),Ko),allOf:(Yo||(Yo=1,Wo=function(e,t,r){var i=" ",a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),o=e.errSchemaPath+"/"+t,n=!e.opts.allErrors,l=e.util.copy(e),c="";l.level++;var u="valid"+l.level,d=l.baseId,f=!0,h=a;if(h)for(var p,g=-1,m=h.length-1;g<m;)p=h[g+=1],(e.opts.strictKeywords?"object"==typeof p&&Object.keys(p).length>0||!1===p:e.util.schemaHasRules(p,e.RULES.all))&&(f=!1,l.schema=p,l.schemaPath=s+"["+g+"]",l.errSchemaPath=o+"/"+g,i+="  "+e.validate(l)+" ",l.baseId=d,n&&(i+=" if ("+u+") { ",c+="}"));return n&&(i+=f?" if (true) { ":" "+c.slice(0,-1)+" "),i}),Wo),anyOf:(Zo||(Zo=1,Jo=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+a,f="errs__"+a,h=e.util.copy(e),p="";h.level++;var g="valid"+h.level,m=o.every((function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0||!1===t:e.util.schemaHasRules(t,e.RULES.all)}));if(m){var y=h.baseId;i+=" var "+f+" = errors; var "+d+" = false;  ";var v=e.compositeRule;e.compositeRule=h.compositeRule=!0;var b=o;if(b)for(var w,S=-1,x=b.length-1;S<x;)w=b[S+=1],h.schema=w,h.schemaPath=n+"["+S+"]",h.errSchemaPath=l+"/"+S,i+="  "+e.validate(h)+" ",h.baseId=y,i+=" "+d+" = "+d+" || "+g+"; if (!"+d+") { ",p+="}";e.compositeRule=h.compositeRule=v,i+=" "+p+" if (!"+d+") {   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" } else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } ");}else c&&(i+=" if (true) { ");return i}),Jo),$comment:(tn||(tn=1,en=function(e,t,r){var i=" ",a=e.schema[t],s=e.errSchemaPath+"/"+t;var o=e.util.toQuotedString(a);return !0===e.opts.$comment?i+=" console.log("+o+");":"function"==typeof e.opts.$comment&&(i+=" self._opts.$comment("+o+", "+e.util.toQuotedString(s)+", validate.root.schema);"),i}),en),const:(an||(an=1,rn=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+a,f=e.opts.$data&&o&&o.$data;f&&(i+=" var schema"+a+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; "),f||(i+=" var schema"+a+" = validate.schema"+n+";"),i+="var "+d+" = equal("+u+", schema"+a+"); if (!"+d+") {   ";var h=h||[];h.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValue: schema"+a+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be equal to constant' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var p=i;return i=h.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+p+"]); ":i+=" validate.errors = ["+p+"]; return false; ":i+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",c&&(i+=" else { "),i}),rn),contains:(on||(on=1,sn=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+a,f="errs__"+a,h=e.util.copy(e);h.level++;var p="valid"+h.level,g="i"+a,m=h.dataLevel=e.dataLevel+1,y="data"+m,v=e.baseId,b=e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0||!1===o:e.util.schemaHasRules(o,e.RULES.all);if(i+="var "+f+" = errors;var "+d+";",b){var w=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=o,h.schemaPath=n,h.errSchemaPath=l,i+=" var "+p+" = false; for (var "+g+" = 0; "+g+" < "+u+".length; "+g+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);var S=u+"["+g+"]";h.dataPathArr[m]=g;var x=e.validate(h);h.baseId=v,e.util.varOccurences(x,y)<2?i+=" "+e.util.varReplace(x,y,S)+" ":i+=" var "+y+" = "+S+"; "+x+" ",i+=" if ("+p+") break; }  ",e.compositeRule=h.compositeRule=w,i+="  if (!"+p+") {";}else i+=" if ("+u+".length == 0) {";var _=_||[];_.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should contain a valid item' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var F=i;return i=_.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+F+"]); ":i+=" validate.errors = ["+F+"]; return false; ":i+=" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { ",b&&(i+="  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } "),e.opts.allErrors&&(i+=" } "),i}),sn),dependencies:(ln||(ln=1,nn=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="errs__"+a,f=e.util.copy(e),h="";f.level++;var p="valid"+f.level,g={},m={},y=e.opts.ownProperties;for(S in o)if("__proto__"!=S){var v=o[S],b=Array.isArray(v)?m:g;b[S]=v;}i+="var "+d+" = errors;";var w=e.errorPath;for(var S in i+="var missing"+a+";",m)if((b=m[S]).length){if(i+=" if ( "+u+e.util.getProperty(S)+" !== undefined ",y&&(i+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(S)+"') "),c){i+=" && ( ";var x=b;if(x)for(var _=-1,F=x.length-1;_<F;)I=x[_+=1],_&&(i+=" || "),i+=" ( ( "+(L=u+(T=e.util.getProperty(I)))+" === undefined ",y&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(I)+"') "),i+=") && (missing"+a+" = "+e.util.toQuotedString(e.opts.jsonPointers?I:T)+") ) ";i+=")) {  ";var j="missing"+a,P="' + "+j+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,j,!0):w+" + "+j);var C=C||[];C.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(S)+"', missingProperty: '"+P+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should have ",1==b.length?i+="property "+e.util.escapeQuotes(b[0]):i+="properties "+e.util.escapeQuotes(b.join(", ")),i+=" when property "+e.util.escapeQuotes(S)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var E=i;i=C.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";}else {i+=" ) { ";var k=b;if(k)for(var I,O=-1,A=k.length-1;O<A;){I=k[O+=1];var T=e.util.getProperty(I),L=(P=e.util.escapeQuotes(I),u+T);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,I,e.opts.jsonPointers)),i+=" if ( "+L+" === undefined ",y&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(I)+"') "),i+=") {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(S)+"', missingProperty: '"+P+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should have ",1==b.length?i+="property "+e.util.escapeQuotes(b[0]):i+="properties "+e.util.escapeQuotes(b.join(", ")),i+=" when property "+e.util.escapeQuotes(S)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } ";}}i+=" }   ",c&&(h+="}",i+=" else { ");}e.errorPath=w;var D=f.baseId;for(var S in g)v=g[S],(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0||!1===v:e.util.schemaHasRules(v,e.RULES.all))&&(i+=" "+p+" = true; if ( "+u+e.util.getProperty(S)+" !== undefined ",y&&(i+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(S)+"') "),i+=") { ",f.schema=v,f.schemaPath=n+e.util.getProperty(S),f.errSchemaPath=l+"/"+e.util.escapeFragment(S),i+="  "+e.validate(f)+" ",f.baseId=D,i+=" }  ",c&&(i+=" if ("+p+") { ",h+="}"));return c&&(i+="   "+h+" if ("+d+" == errors) {"),i}),nn),enum:(un||(un=1,cn=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+a,f=e.opts.$data&&o&&o.$data;f&&(i+=" var schema"+a+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ");var h="i"+a,p="schema"+a;f||(i+=" var "+p+" = validate.schema"+n+";"),i+="var "+d+";",f&&(i+=" if (schema"+a+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+a+")) "+d+" = false; else {"),i+=d+" = false;for (var "+h+"=0; "+h+"<"+p+".length; "+h+"++) if (equal("+u+", "+p+"["+h+"])) { "+d+" = true; break; }",f&&(i+="  }  "),i+=" if (!"+d+") {   ";var g=g||[];g.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValues: schema"+a+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var m=i;return i=g.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",c&&(i+=" else { "),i}),cn),format:(fn||(fn=1,dn=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||"");if(!1===e.opts.format)return c&&(i+=" if (true) { "),i;var d,f=e.opts.$data&&o&&o.$data;f?(i+=" var schema"+a+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ",d="schema"+a):d=o;var h=e.opts.unknownFormats,p=Array.isArray(h);if(f)i+=" var "+(g="format"+a)+" = formats["+d+"]; var "+(m="isObject"+a)+" = typeof "+g+" == 'object' && !("+g+" instanceof RegExp) && "+g+".validate; var "+(y="formatType"+a)+" = "+m+" && "+g+".type || 'string'; if ("+m+") { ",e.async&&(i+=" var async"+a+" = "+g+".async; "),i+=" "+g+" = "+g+".validate; } if (  ",f&&(i+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),i+=" (","ignore"!=h&&(i+=" ("+d+" && !"+g+" ",p&&(i+=" && self._opts.unknownFormats.indexOf("+d+") == -1 "),i+=") || "),i+=" ("+g+" && "+y+" == '"+r+"' && !(typeof "+g+" == 'function' ? ",e.async?i+=" (async"+a+" ? await "+g+"("+u+") : "+g+"("+u+")) ":i+=" "+g+"("+u+") ",i+=" : "+g+".test("+u+"))))) {";else {var g;if(!(g=e.formats[o])){if("ignore"==h)return e.logger.warn('unknown format "'+o+'" ignored in schema at path "'+e.errSchemaPath+'"'),c&&(i+=" if (true) { "),i;if(p&&h.indexOf(o)>=0)return c&&(i+=" if (true) { "),i;throw new Error('unknown format "'+o+'" is used in schema at path "'+e.errSchemaPath+'"')}var m,y=(m="object"==typeof g&&!(g instanceof RegExp)&&g.validate)&&g.type||"string";if(m){var v=!0===g.async;g=g.validate;}if(y!=r)return c&&(i+=" if (true) { "),i;if(v){if(!e.async)throw new Error("async format in sync schema");i+=" if (!(await "+(b="formats"+e.util.getProperty(o)+".validate")+"("+u+"))) { ";}else {i+=" if (! ";var b="formats"+e.util.getProperty(o);m&&(b+=".validate"),i+="function"==typeof g?" "+b+"("+u+") ":" "+b+".test("+u+") ",i+=") { ";}}var w=w||[];w.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { format:  ",i+=f?""+d:""+e.util.toQuotedString(o),i+="  } ",!1!==e.opts.messages&&(i+=" , message: 'should match format \"",i+=f?"' + "+d+" + '":""+e.util.escapeQuotes(o),i+="\"' "),e.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+n:""+e.util.toQuotedString(o),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var S=i;return i=w.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+S+"]); ":i+=" validate.errors = ["+S+"]; return false; ":i+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",c&&(i+=" else { "),i}),dn),if:(pn||(pn=1,hn=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+a,f="errs__"+a,h=e.util.copy(e);h.level++;var p="valid"+h.level,g=e.schema.then,m=e.schema.else,y=void 0!==g&&(e.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0||!1===g:e.util.schemaHasRules(g,e.RULES.all)),v=void 0!==m&&(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0||!1===m:e.util.schemaHasRules(m,e.RULES.all)),b=h.baseId;if(y||v){var w;h.createErrors=!1,h.schema=o,h.schemaPath=n,h.errSchemaPath=l,i+=" var "+f+" = errors; var "+d+" = true;  ";var S=e.compositeRule;e.compositeRule=h.compositeRule=!0,i+="  "+e.validate(h)+" ",h.baseId=b,h.createErrors=!0,i+="  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; }  ",e.compositeRule=h.compositeRule=S,y?(i+=" if ("+p+") {  ",h.schema=e.schema.then,h.schemaPath=e.schemaPath+".then",h.errSchemaPath=e.errSchemaPath+"/then",i+="  "+e.validate(h)+" ",h.baseId=b,i+=" "+d+" = "+p+"; ",y&&v?i+=" var "+(w="ifClause"+a)+" = 'then'; ":w="'then'",i+=" } ",v&&(i+=" else { ")):i+=" if (!"+p+") { ",v&&(h.schema=e.schema.else,h.schemaPath=e.schemaPath+".else",h.errSchemaPath=e.errSchemaPath+"/else",i+="  "+e.validate(h)+" ",h.baseId=b,i+=" "+d+" = "+p+"; ",y&&v?i+=" var "+(w="ifClause"+a)+" = 'else'; ":w="'else'",i+=" } "),i+=" if (!"+d+") {   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { failingKeyword: "+w+" } ",!1!==e.opts.messages&&(i+=" , message: 'should match \"' + "+w+" + '\" schema' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" }   ",c&&(i+=" else { ");}else c&&(i+=" if (true) { ");return i}),hn),items:(mn||(mn=1,gn=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+a,f="errs__"+a,h=e.util.copy(e),p="";h.level++;var g="valid"+h.level,m="i"+a,y=h.dataLevel=e.dataLevel+1,v="data"+y,b=e.baseId;if(i+="var "+f+" = errors;var "+d+";",Array.isArray(o)){var w=e.schema.additionalItems;if(!1===w){i+=" "+d+" = "+u+".length <= "+o.length+"; ";var S=l;l=e.errSchemaPath+"/additionalItems",i+="  if (!"+d+") {   ";var x=x||[];x.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+o.length+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have more than "+o.length+" items' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var _=i;i=x.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+_+"]); ":i+=" validate.errors = ["+_+"]; return false; ":i+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",l=S,c&&(p+="}",i+=" else { ");}var F=o;if(F)for(var j,P=-1,C=F.length-1;P<C;)if(j=F[P+=1],e.opts.strictKeywords?"object"==typeof j&&Object.keys(j).length>0||!1===j:e.util.schemaHasRules(j,e.RULES.all)){i+=" "+g+" = true; if ("+u+".length > "+P+") { ";var E=u+"["+P+"]";h.schema=j,h.schemaPath=n+"["+P+"]",h.errSchemaPath=l+"/"+P,h.errorPath=e.util.getPathExpr(e.errorPath,P,e.opts.jsonPointers,!0),h.dataPathArr[y]=P;var k=e.validate(h);h.baseId=b,e.util.varOccurences(k,v)<2?i+=" "+e.util.varReplace(k,v,E)+" ":i+=" var "+v+" = "+E+"; "+k+" ",i+=" }  ",c&&(i+=" if ("+g+") { ",p+="}");}"object"==typeof w&&(e.opts.strictKeywords?"object"==typeof w&&Object.keys(w).length>0||!1===w:e.util.schemaHasRules(w,e.RULES.all))&&(h.schema=w,h.schemaPath=e.schemaPath+".additionalItems",h.errSchemaPath=e.errSchemaPath+"/additionalItems",i+=" "+g+" = true; if ("+u+".length > "+o.length+") {  for (var "+m+" = "+o.length+"; "+m+" < "+u+".length; "+m+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0),E=u+"["+m+"]",h.dataPathArr[y]=m,k=e.validate(h),h.baseId=b,e.util.varOccurences(k,v)<2?i+=" "+e.util.varReplace(k,v,E)+" ":i+=" var "+v+" = "+E+"; "+k+" ",c&&(i+=" if (!"+g+") break; "),i+=" } }  ",c&&(i+=" if ("+g+") { ",p+="}"));}else (e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0||!1===o:e.util.schemaHasRules(o,e.RULES.all))&&(h.schema=o,h.schemaPath=n,h.errSchemaPath=l,i+="  for (var "+m+" = 0; "+m+" < "+u+".length; "+m+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0),E=u+"["+m+"]",h.dataPathArr[y]=m,k=e.validate(h),h.baseId=b,e.util.varOccurences(k,v)<2?i+=" "+e.util.varReplace(k,v,E)+" ":i+=" var "+v+" = "+E+"; "+k+" ",c&&(i+=" if (!"+g+") break; "),i+=" }");return c&&(i+=" "+p+" if ("+f+" == errors) {"),i}),gn),maximum:Jn(),minimum:Jn(),maxItems:Zn(),minItems:Zn(),maxLength:el(),minLength:el(),maxProperties:tl(),minProperties:tl(),multipleOf:(Pn||(Pn=1,jn=function(e,t,r){var i,a=" ",s=e.level,o=e.dataLevel,n=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),f=e.opts.$data&&n&&n.$data;if(f?(a+=" var schema"+s+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",i="schema"+s):i=n,!f&&"number"!=typeof n)throw new Error(t+" must be number");a+="var division"+s+";if (",f&&(a+=" "+i+" !== undefined && ( typeof "+i+" != 'number' || "),a+=" (division"+s+" = "+d+" / "+i+", ",e.opts.multipleOfPrecision?a+=" Math.abs(Math.round(division"+s+") - division"+s+") > 1e-"+e.opts.multipleOfPrecision+" ":a+=" division"+s+" !== parseInt(division"+s+") ",a+=" ) ",f&&(a+="  )  "),a+=" ) {   ";var h=h||[];h.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { multipleOf: "+i+" } ",!1!==e.opts.messages&&(a+=" , message: 'should be multiple of ",a+=f?"' + "+i:i+"'"),e.opts.verbose&&(a+=" , schema:  ",a+=f?"validate.schema"+l:""+n,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var p=a;return a=h.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+p+"]); ":a+=" validate.errors = ["+p+"]; return false; ":a+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",u&&(a+=" else { "),a}),jn),not:(En||(En=1,Cn=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="errs__"+a,f=e.util.copy(e);f.level++;var h="valid"+f.level;if(e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0||!1===o:e.util.schemaHasRules(o,e.RULES.all)){f.schema=o,f.schemaPath=n,f.errSchemaPath=l,i+=" var "+d+" = errors;  ";var p,g=e.compositeRule;e.compositeRule=f.compositeRule=!0,f.createErrors=!1,f.opts.allErrors&&(p=f.opts.allErrors,f.opts.allErrors=!1),i+=" "+e.validate(f)+" ",f.createErrors=!0,p&&(f.opts.allErrors=p),e.compositeRule=f.compositeRule=g,i+=" if ("+h+") {   ";var m=m||[];m.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var y=i;i=m.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } ");}else i+="  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(i+=" if (false) { ");return i}),Cn),oneOf:(In||(In=1,kn=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+a,f="errs__"+a,h=e.util.copy(e),p="";h.level++;var g="valid"+h.level,m=h.baseId,y="prevValid"+a,v="passingSchemas"+a;i+="var "+f+" = errors , "+y+" = false , "+d+" = false , "+v+" = null; ";var b=e.compositeRule;e.compositeRule=h.compositeRule=!0;var w=o;if(w)for(var S,x=-1,_=w.length-1;x<_;)S=w[x+=1],(e.opts.strictKeywords?"object"==typeof S&&Object.keys(S).length>0||!1===S:e.util.schemaHasRules(S,e.RULES.all))?(h.schema=S,h.schemaPath=n+"["+x+"]",h.errSchemaPath=l+"/"+x,i+="  "+e.validate(h)+" ",h.baseId=m):i+=" var "+g+" = true; ",x&&(i+=" if ("+g+" && "+y+") { "+d+" = false; "+v+" = ["+v+", "+x+"]; } else { ",p+="}"),i+=" if ("+g+") { "+d+" = "+y+" = true; "+v+" = "+x+"; }";return e.compositeRule=h.compositeRule=b,i+=p+"if (!"+d+") {   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { passingSchemas: "+v+" } ",!1!==e.opts.messages&&(i+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+="} else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; }",e.opts.allErrors&&(i+=" } "),i}),kn),pattern:(An||(An=1,On=function(e,t,r){var i,a=" ",s=e.level,o=e.dataLevel,n=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),f=e.opts.$data&&n&&n.$data;f?(a+=" var schema"+s+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",i="schema"+s):i=n,a+="if ( ",f&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'string') || "),a+=" !"+(f?"(new RegExp("+i+"))":e.usePattern(n))+".test("+d+") ) {   ";var h=h||[];h.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { pattern:  ",a+=f?""+i:""+e.util.toQuotedString(n),a+="  } ",!1!==e.opts.messages&&(a+=" , message: 'should match pattern \"",a+=f?"' + "+i+" + '":""+e.util.escapeQuotes(n),a+="\"' "),e.opts.verbose&&(a+=" , schema:  ",a+=f?"validate.schema"+l:""+e.util.toQuotedString(n),a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var p=a;return a=h.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+p+"]); ":a+=" validate.errors = ["+p+"]; return false; ":a+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",u&&(a+=" else { "),a}),On),properties:(Ln||(Ln=1,Tn=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="errs__"+a,f=e.util.copy(e),h="";f.level++;var p="valid"+f.level,g="key"+a,m="idx"+a,y=f.dataLevel=e.dataLevel+1,v="data"+y,b="dataProperties"+a,w=Object.keys(o||{}).filter(T),S=e.schema.patternProperties||{},x=Object.keys(S).filter(T),_=e.schema.additionalProperties,F=w.length||x.length,j=!1===_,P="object"==typeof _&&Object.keys(_).length,C=e.opts.removeAdditional,E=j||P||C,k=e.opts.ownProperties,I=e.baseId,O=e.schema.required;if(O&&(!e.opts.$data||!O.$data)&&O.length<e.opts.loopRequired)var A=e.util.toHash(O);function T(e){return "__proto__"!==e}if(i+="var "+d+" = errors;var "+p+" = true;",k&&(i+=" var "+b+" = undefined;"),E){if(i+=k?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+m+"=0; "+m+"<"+b+".length; "+m+"++) { var "+g+" = "+b+"["+m+"]; ":" for (var "+g+" in "+u+") { ",F){if(i+=" var isAdditional"+a+" = !(false ",w.length)if(w.length>8)i+=" || validate.schema"+n+".hasOwnProperty("+g+") ";else {var L=w;if(L)for(var D=-1,$=L.length-1;D<$;)X=L[D+=1],i+=" || "+g+" == "+e.util.toQuotedString(X)+" ";}if(x.length){var U=x;if(U)for(var B=-1,R=U.length-1;B<R;)se=U[B+=1],i+=" || "+e.usePattern(se)+".test("+g+") ";}i+=" ); if (isAdditional"+a+") { ";}if("all"==C)i+=" delete "+u+"["+g+"]; ";else {var N=e.errorPath,M="' + "+g+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers)),j)if(C)i+=" delete "+u+"["+g+"]; ";else {i+=" "+p+" = false; ";var z=l;l=e.errSchemaPath+"/additionalProperties",(re=re||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { additionalProperty: '"+M+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is an invalid additional property":i+="should NOT have additional properties",i+="' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var V=i;i=re.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+V+"]); ":i+=" validate.errors = ["+V+"]; return false; ":i+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=z,c&&(i+=" break; ");}else if(P)if("failing"==C){i+=" var "+d+" = errors;  ";var q=e.compositeRule;e.compositeRule=f.compositeRule=!0,f.schema=_,f.schemaPath=e.schemaPath+".additionalProperties",f.errSchemaPath=e.errSchemaPath+"/additionalProperties",f.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var G=u+"["+g+"]";f.dataPathArr[y]=g;var Q=e.validate(f);f.baseId=I,e.util.varOccurences(Q,v)<2?i+=" "+e.util.varReplace(Q,v,G)+" ":i+=" var "+v+" = "+G+"; "+Q+" ",i+=" if (!"+p+") { errors = "+d+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+u+"["+g+"]; }  ",e.compositeRule=f.compositeRule=q;}else f.schema=_,f.schemaPath=e.schemaPath+".additionalProperties",f.errSchemaPath=e.errSchemaPath+"/additionalProperties",f.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers),G=u+"["+g+"]",f.dataPathArr[y]=g,Q=e.validate(f),f.baseId=I,e.util.varOccurences(Q,v)<2?i+=" "+e.util.varReplace(Q,v,G)+" ":i+=" var "+v+" = "+G+"; "+Q+" ",c&&(i+=" if (!"+p+") break; ");e.errorPath=N;}F&&(i+=" } "),i+=" }  ",c&&(i+=" if ("+p+") { ",h+="}");}var H=e.opts.useDefaults&&!e.compositeRule;if(w.length){var K=w;if(K)for(var X,W=-1,Y=K.length-1;W<Y;){var J=o[X=K[W+=1]];if(e.opts.strictKeywords?"object"==typeof J&&Object.keys(J).length>0||!1===J:e.util.schemaHasRules(J,e.RULES.all)){var Z=e.util.getProperty(X),ee=(G=u+Z,H&&void 0!==J.default);if(f.schema=J,f.schemaPath=n+Z,f.errSchemaPath=l+"/"+e.util.escapeFragment(X),f.errorPath=e.util.getPath(e.errorPath,X,e.opts.jsonPointers),f.dataPathArr[y]=e.util.toQuotedString(X),Q=e.validate(f),f.baseId=I,e.util.varOccurences(Q,v)<2){Q=e.util.varReplace(Q,v,G);var te=G;}else te=v,i+=" var "+v+" = "+G+"; ";if(ee)i+=" "+Q+" ";else {if(A&&A[X]){i+=" if ( "+te+" === undefined ",k&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(X)+"') "),i+=") { "+p+" = false; ",N=e.errorPath,z=l;var re,ie=e.util.escapeQuotes(X);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(N,X,e.opts.jsonPointers)),l=e.errSchemaPath+"/required",(re=re||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+ie+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+ie+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",V=i,i=re.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+V+"]); ":i+=" validate.errors = ["+V+"]; return false; ":i+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=z,e.errorPath=N,i+=" } else { ";}else c?(i+=" if ( "+te+" === undefined ",k&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(X)+"') "),i+=") { "+p+" = true; } else { "):(i+=" if ("+te+" !== undefined ",k&&(i+=" &&   Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(X)+"') "),i+=" ) { ");i+=" "+Q+" } ";}}c&&(i+=" if ("+p+") { ",h+="}");}}if(x.length){var ae=x;if(ae)for(var se,oe=-1,ne=ae.length-1;oe<ne;)J=S[se=ae[oe+=1]],(e.opts.strictKeywords?"object"==typeof J&&Object.keys(J).length>0||!1===J:e.util.schemaHasRules(J,e.RULES.all))&&(f.schema=J,f.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(se),f.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(se),i+=k?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+m+"=0; "+m+"<"+b+".length; "+m+"++) { var "+g+" = "+b+"["+m+"]; ":" for (var "+g+" in "+u+") { ",i+=" if ("+e.usePattern(se)+".test("+g+")) { ",f.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers),G=u+"["+g+"]",f.dataPathArr[y]=g,Q=e.validate(f),f.baseId=I,e.util.varOccurences(Q,v)<2?i+=" "+e.util.varReplace(Q,v,G)+" ":i+=" var "+v+" = "+G+"; "+Q+" ",c&&(i+=" if (!"+p+") break; "),i+=" } ",c&&(i+=" else "+p+" = true; "),i+=" }  ",c&&(i+=" if ("+p+") { ",h+="}"));}return c&&(i+=" "+h+" if ("+d+" == errors) {"),i}),Tn),propertyNames:($n||($n=1,Dn=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="errs__"+a,f=e.util.copy(e);f.level++;var h="valid"+f.level;if(i+="var "+d+" = errors;",e.opts.strictKeywords?"object"==typeof o&&Object.keys(o).length>0||!1===o:e.util.schemaHasRules(o,e.RULES.all)){f.schema=o,f.schemaPath=n,f.errSchemaPath=l;var p="key"+a,g="idx"+a,m="i"+a,y="' + "+p+" + '",v="data"+(f.dataLevel=e.dataLevel+1),b="dataProperties"+a,w=e.opts.ownProperties,S=e.baseId;w&&(i+=" var "+b+" = undefined; "),i+=w?" "+b+" = "+b+" || Object.keys("+u+"); for (var "+g+"=0; "+g+"<"+b+".length; "+g+"++) { var "+p+" = "+b+"["+g+"]; ":" for (var "+p+" in "+u+") { ",i+=" var startErrs"+a+" = errors; ";var x=p,_=e.compositeRule;e.compositeRule=f.compositeRule=!0;var F=e.validate(f);f.baseId=S,e.util.varOccurences(F,v)<2?i+=" "+e.util.varReplace(F,v,x)+" ":i+=" var "+v+" = "+x+"; "+F+" ",e.compositeRule=f.compositeRule=_,i+=" if (!"+h+") { for (var "+m+"=startErrs"+a+"; "+m+"<errors; "+m+"++) { vErrors["+m+"].propertyName = "+p+"; }   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { propertyName: '"+y+"' } ",!1!==e.opts.messages&&(i+=" , message: 'property name \\'"+y+"\\' is invalid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),c&&(i+=" break; "),i+=" } }";}return c&&(i+="  if ("+d+" == errors) {"),i}),Dn),required:(Bn||(Bn=1,Un=function(e,t,r){var i=" ",a=e.level,s=e.dataLevel,o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+a,f=e.opts.$data&&o&&o.$data;f&&(i+=" var schema"+a+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ");var h="schema"+a;if(!f)if(o.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var p=[],g=o;if(g)for(var m,y=-1,v=g.length-1;y<v;){m=g[y+=1];var b=e.schema.properties[m];b&&(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0||!1===b:e.util.schemaHasRules(b,e.RULES.all))||(p[p.length]=m);}}else p=o;if(f||p.length){var w=e.errorPath,S=f||p.length>=e.opts.loopRequired,x=e.opts.ownProperties;if(c)if(i+=" var missing"+a+"; ",S){f||(i+=" var "+h+" = validate.schema"+n+"; ");var _="' + "+(k="schema"+a+"["+(C="i"+a)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,k,e.opts.jsonPointers)),i+=" var "+d+" = true; ",f&&(i+=" if (schema"+a+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+a+")) "+d+" = false; else {"),i+=" for (var "+C+" = 0; "+C+" < "+h+".length; "+C+"++) { "+d+" = "+u+"["+h+"["+C+"]] !== undefined ",x&&(i+=" &&   Object.prototype.hasOwnProperty.call("+u+", "+h+"["+C+"]) "),i+="; if (!"+d+") break; } ",f&&(i+="  }  "),i+="  if (!"+d+") {   ",(j=j||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+_+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+_+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var F=i;i=j.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+F+"]); ":i+=" validate.errors = ["+F+"]; return false; ":i+=" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { ";}else {i+=" if ( ";var j,P=p;if(P)for(var C=-1,E=P.length-1;C<E;)O=P[C+=1],C&&(i+=" || "),i+=" ( ( "+(D=u+(L=e.util.getProperty(O)))+" === undefined ",x&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(O)+"') "),i+=") && (missing"+a+" = "+e.util.toQuotedString(e.opts.jsonPointers?O:L)+") ) ";i+=") {  ",_="' + "+(k="missing"+a)+" + '",e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,k,!0):w+" + "+k),(j=j||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+_+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+_+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",F=i,i=j.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+F+"]); ":i+=" validate.errors = ["+F+"]; return false; ":i+=" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { ";}else if(S){var k;f||(i+=" var "+h+" = validate.schema"+n+"; "),_="' + "+(k="schema"+a+"["+(C="i"+a)+"]")+" + '",e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,k,e.opts.jsonPointers)),f&&(i+=" if ("+h+" && !Array.isArray("+h+")) {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+_+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+_+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+h+" !== undefined) { "),i+=" for (var "+C+" = 0; "+C+" < "+h+".length; "+C+"++) { if ("+u+"["+h+"["+C+"]] === undefined ",x&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", "+h+"["+C+"]) "),i+=") {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+_+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+_+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",f&&(i+="  }  ");}else {var I=p;if(I)for(var O,A=-1,T=I.length-1;A<T;){O=I[A+=1];var L=e.util.getProperty(O),D=(_=e.util.escapeQuotes(O),u+L);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,O,e.opts.jsonPointers)),i+=" if ( "+D+" === undefined ",x&&(i+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(O)+"') "),i+=") {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+_+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+_+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+n+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } ";}}e.errorPath=w;}else c&&(i+=" if (true) {");return i}),Un),uniqueItems:(Nn||(Nn=1,Rn=function(e,t,r){var i,a=" ",s=e.level,o=e.dataLevel,n=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),f="valid"+s,h=e.opts.$data&&n&&n.$data;if(h?(a+=" var schema"+s+" = "+e.util.getData(n.$data,o,e.dataPathArr)+"; ",i="schema"+s):i=n,(n||h)&&!1!==e.opts.uniqueItems){h&&(a+=" var "+f+"; if ("+i+" === false || "+i+" === undefined) "+f+" = true; else if (typeof "+i+" != 'boolean') "+f+" = false; else { "),a+=" var i = "+d+".length , "+f+" = true , j; if (i > 1) { ";var p=e.schema.items&&e.schema.items.type,g=Array.isArray(p);if(!p||"object"==p||"array"==p||g&&(p.indexOf("object")>=0||p.indexOf("array")>=0))a+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+d+"[i], "+d+"[j])) { "+f+" = false; break outer; } } } ";else {a+=" var itemIndices = {}, item; for (;i--;) { var item = "+d+"[i]; ";var m="checkDataType"+(g?"s":"");a+=" if ("+e.util[m](p,"item",e.opts.strictNumbers,!0)+") continue; ",g&&(a+=" if (typeof item == 'string') item = '\"' + item; "),a+=" if (typeof itemIndices[item] == 'number') { "+f+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } ";}a+=" } ",h&&(a+="  }  "),a+=" if (!"+f+") {   ";var y=y||[];y.push(a),a="",!1!==e.createErrors?(a+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(a+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(a+=" , schema:  ",a+=h?"validate.schema"+l:""+n,a+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),a+=" } "):a+=" {} ";var v=a;a=y.pop(),!e.compositeRule&&u?e.async?a+=" throw new ValidationError(["+v+"]); ":a+=" validate.errors = ["+v+"]; return false; ":a+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",u&&(a+=" else { ");}else u&&(a+=" if (true) { ");return a}),Rn),validate:qo()}),Mn),t=Co().toHash;return Vn=function(){var r=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],i=["type","$comment"];return r.all=t(i),r.types=t(["number","integer","string","array","object","boolean","null"]),r.forEach((function(t){t.rules=t.rules.map((function(t){var a;if("object"==typeof t){var s=Object.keys(t)[0];a=t[s],t=s,a.forEach((function(e){i.push(e),r.all[e]=!0;}));}return i.push(t),r.all[t]={keyword:t,code:e[t],implements:a}})),r.all.$comment={keyword:"$comment",code:e.$comment},t.type&&(r.types[t.type]=t);})),r.keywords=t(i.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),r.custom={},r},Vn}(),n=function(){if(Qn)return Gn;Qn=1;var e=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];return Gn=function(t,r){for(var i=0;i<r.length;i++){t=JSON.parse(JSON.stringify(t));var a,s=r[i].split("/"),o=t;for(a=1;a<s.length;a++)o=o[s[a]];for(a=0;a<e.length;a++){var n=e[a],l=o[n];l&&(o[n]={anyOf:[l,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]});}}return t}}(),l=Co();nl=p,p.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else {var i=this._addSchema(e);r=i.validate||this._compile(i);}var a=r(t);return !0!==r.$async&&(this.errors=r.errors),a},p.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},p.prototype.addSchema=function(e,r,i,a){if(Array.isArray(e)){for(var s=0;s<e.length;s++)this.addSchema(e[s],void 0,i,a);return this}var o=this._getId(e);if(void 0!==o&&"string"!=typeof o)throw new Error("schema id must be string");return w(this,r=t.normalizeId(r||o)),this._schemas[r]=this._addSchema(e,i,a,!0),this},p.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},p.prototype.validateSchema=function(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(r=r||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(d)?d:void 0,e._opts.defaultMeta}(this),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var i=this.validate(r,e);if(!i&&t){var a="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(a);this.logger.error(a);}return i},p.prototype.getSchema=function(r){var a=g(this,r);switch(typeof a){case"object":return a.validate||this._compile(a);case"string":return this.getSchema(a);case"undefined":return function(r,a){var s=t.schema.call(r,{schema:{}},a);if(s){var o=s.schema,n=s.root,l=s.baseId,c=e.call(r,o,n,void 0,l);return r._fragments[a]=new i({ref:a,fragment:!0,schema:o,root:n,baseId:l,validate:c}),c}}(this,r)}},p.prototype.removeSchema=function(e){if(e instanceof RegExp)return m(this,this._schemas,e),m(this,this._refs,e),this;switch(typeof e){case"undefined":return m(this,this._schemas),m(this,this._refs),this._cache.clear(),this;case"string":var r=g(this,e);return r&&this._cache.del(r.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var i=this._opts.serialize,a=i?i(e):e;this._cache.del(a);var s=this._getId(e);s&&(s=t.normalizeId(s),delete this._schemas[s],delete this._refs[s]);}return this},p.prototype.addFormat=function(e,t){return "string"==typeof t&&(t=new RegExp(t)),this._formats[e]=t,this},p.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return "No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,i=void 0===t.dataVar?"data":t.dataVar,a="",s=0;s<e.length;s++){var o=e[s];o&&(a+=i+o.dataPath+" "+o.message+r);}return a.slice(0,-r.length)},p.prototype._addSchema=function(e,r,a,s){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var o=this._opts.serialize,n=o?o(e):e,l=this._cache.get(n);if(l)return l;s=s||!1!==this._opts.addUsedSchema;var c=t.normalizeId(this._getId(e));c&&s&&w(this,c);var u,d=!1!==this._opts.validateSchema&&!r;d&&!(u=c&&c==t.normalizeId(e.$schema))&&this.validateSchema(e,!0);var f=t.ids.call(this,e),h=new i({id:c,schema:e,localRefs:f,cacheKey:n,meta:a});return "#"!=c[0]&&s&&(this._refs[c]=h),this._cache.put(n,h),d&&u&&this.validateSchema(e,!0),h},p.prototype._compile=function(t,r){if(t.compiling)return t.validate=s,s.schema=t.schema,s.errors=null,s.root=r||s,!0===t.schema.$async&&(s.$async=!0),s;var i,a;t.compiling=!0,t.meta&&(i=this._opts,this._opts=this._metaOpts);try{a=e.call(this,t.schema,r,t.localRefs);}catch(e){throw delete t.validate,e}finally{t.compiling=!1,t.meta&&(this._opts=i);}return t.validate=a,t.refs=a.refs,t.refVal=a.refVal,t.root=a.root,a;function s(){var e=t.validate,r=e.apply(this,arguments);return s.errors=e.errors,r}},p.prototype.compileAsync=function(){if(Kn)return Hn;Kn=1;var e=zo().MissingRef;return Hn=function t(r,i,a){var s=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof i&&(a=i,i=void 0);var o=n(r).then((function(){var e=s._addSchema(r,void 0,i);return e.validate||l(e)}));return a&&o.then((function(e){a(null,e);}),a),o;function n(e){var r=e.$schema;return r&&!s.getSchema(r)?t.call(s,{$ref:r},!0):Promise.resolve()}function l(t){try{return s._compile(t)}catch(r){if(r instanceof e)return function(e){var r=e.missingSchema;if(c(r))throw new Error("Schema "+r+" is loaded but "+e.missingRef+" cannot be resolved");var a=s._loadingSchemas[r];return a||(a=s._loadingSchemas[r]=s._opts.loadSchema(r)).then(o,o),a.then((function(e){if(!c(r))return n(e).then((function(){c(r)||s.addSchema(e,r,void 0,i);}))})).then((function(){return l(t)}));function o(){delete s._loadingSchemas[r];}function c(e){return s._refs[e]||s._schemas[e]}}(r);throw r}}},Hn}();var c=function(){if(sl)return al;sl=1;var e=/^[a-z_$][a-z0-9_$-]*$/i,t=(Wn||(Wn=1,Xn=function(e,t,r){var i,a,s=" ",o=e.level,n=e.dataLevel,l=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,f="data"+(n||""),h="valid"+o,p="errs__"+o,g=e.opts.$data&&l&&l.$data;g?(s+=" var schema"+o+" = "+e.util.getData(l.$data,n,e.dataPathArr)+"; ",a="schema"+o):a=l;var m,y,v,b,w,S=this,x="definition"+o,_=S.definition,F="";if(g&&_.$data){w="keywordValidate"+o;var j=_.validateSchema;s+=" var "+x+" = RULES.custom['"+t+"'].definition; var "+w+" = "+x+".validate;";}else {if(!(b=e.useCustomRule(S,l,e.schema,e)))return;a="validate.schema"+c,w=b.code,m=_.compile,y=_.inline,v=_.macro;}var P=w+".errors",C="i"+o,E="ruleErr"+o,k=_.async;if(k&&!e.async)throw new Error("async keyword in sync schema");if(y||v||(s+=P+" = null;"),s+="var "+p+" = errors;var "+h+";",g&&_.$data&&(F+="}",s+=" if ("+a+" === undefined) { "+h+" = true; } else { ",j&&(F+="}",s+=" "+h+" = "+x+".validateSchema("+a+"); if ("+h+") { ")),y)_.statements?s+=" "+b.validate+" ":s+=" "+h+" = "+b.validate+"; ";else if(v){var I=e.util.copy(e);F="",I.level++;var O="valid"+I.level;I.schema=b.validate,I.schemaPath="";var A=e.compositeRule;e.compositeRule=I.compositeRule=!0;var T=e.validate(I).replace(/validate\.schema/g,w);e.compositeRule=I.compositeRule=A,s+=" "+T;}else {(U=U||[]).push(s),s="",s+="  "+w+".call( ",e.opts.passContext?s+="this":s+="self",m||!1===_.schema?s+=" , "+f+" ":s+=" , "+a+" , "+f+" , validate.schema"+e.schemaPath+" ",s+=" , (dataPath || '')",'""'!=e.errorPath&&(s+=" + "+e.errorPath);var L=n?"data"+(n-1||""):"parentData",D=n?e.dataPathArr[n]:"parentDataProperty",$=s+=" , "+L+" , "+D+" , rootData )  ";s=U.pop(),!1===_.errors?(s+=" "+h+" = ",k&&(s+="await "),s+=$+"; "):s+=k?" var "+(P="customErrors"+o)+" = null; try { "+h+" = await "+$+"; } catch (e) { "+h+" = false; if (e instanceof ValidationError) "+P+" = e.errors; else throw e; } ":" "+P+" = null; "+h+" = "+$+"; ";}if(_.modifying&&(s+=" if ("+L+") "+f+" = "+L+"["+D+"];"),s+=""+F,_.valid)d&&(s+=" if (true) { ");else {var U;s+=" if ( ",void 0===_.valid?(s+=" !",s+=v?""+O:""+h):s+=" "+!_.valid+" ",s+=") { ",i=S.keyword,(U=U||[]).push(s),s="",(U=U||[]).push(s),s="",!1!==e.createErrors?(s+=" { keyword: '"+(i||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+S.keyword+"' } ",!1!==e.opts.messages&&(s+=" , message: 'should pass \""+S.keyword+"\" keyword validation' "),e.opts.verbose&&(s+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),s+=" } "):s+=" {} ";var B=s;s=U.pop(),!e.compositeRule&&d?e.async?s+=" throw new ValidationError(["+B+"]); ":s+=" validate.errors = ["+B+"]; return false; ":s+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var R=s;s=U.pop(),y?_.errors?"full"!=_.errors&&(s+="  for (var "+C+"="+p+"; "+C+"<errors; "+C+"++) { var "+E+" = vErrors["+C+"]; if ("+E+".dataPath === undefined) "+E+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+E+".schemaPath === undefined) { "+E+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(s+=" "+E+".schema = "+a+"; "+E+".data = "+f+"; "),s+=" } "):!1===_.errors?s+=" "+R+" ":(s+=" if ("+p+" == errors) { "+R+" } else {  for (var "+C+"="+p+"; "+C+"<errors; "+C+"++) { var "+E+" = vErrors["+C+"]; if ("+E+".dataPath === undefined) "+E+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+E+".schemaPath === undefined) { "+E+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(s+=" "+E+".schema = "+a+"; "+E+".data = "+f+"; "),s+=" } } "):v?(s+="   var err =   ",!1!==e.createErrors?(s+=" { keyword: '"+(i||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+S.keyword+"' } ",!1!==e.opts.messages&&(s+=" , message: 'should pass \""+S.keyword+"\" keyword validation' "),e.opts.verbose&&(s+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),s+=" } "):s+=" {} ",s+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?s+=" throw new ValidationError(vErrors); ":s+=" validate.errors = vErrors; return false; ")):!1===_.errors?s+=" "+R+" ":(s+=" if (Array.isArray("+P+")) { if (vErrors === null) vErrors = "+P+"; else vErrors = vErrors.concat("+P+"); errors = vErrors.length;  for (var "+C+"="+p+"; "+C+"<errors; "+C+"++) { var "+E+" = vErrors["+C+"]; if ("+E+".dataPath === undefined) "+E+".dataPath = (dataPath || '') + "+e.errorPath+";  "+E+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(s+=" "+E+".schema = "+a+"; "+E+".data = "+f+"; "),s+=" } } else { "+R+" } "),s+=" } ",d&&(s+=" else { ");}return s}),Xn),r=function(){if(il)return rl;il=1;var e=ol;return rl={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:e.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:e.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}}();return al={add:function(r,i){var a=this.RULES;if(a.keywords[r])throw new Error("Keyword "+r+" is already defined");if(!e.test(r))throw new Error("Keyword "+r+" is not a valid identifier");if(i){this.validateKeyword(i,!0);var s=i.type;if(Array.isArray(s))for(var o=0;o<s.length;o++)l(r,s[o],i);else l(r,s,i);var n=i.metaSchema;n&&(i.$data&&this._opts.$data&&(n={anyOf:[n,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),i.validateSchema=this.compile(n,!0));}function l(e,r,i){for(var s,o=0;o<a.length;o++){var n=a[o];if(n.type==r){s=n;break}}s||(s={type:r,rules:[]},a.push(s));var l={keyword:e,definition:i,custom:!0,code:t,implements:i.implements};s.rules.push(l),a.custom[e]=l;}return a.keywords[r]=a.all[r]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var i=t[r].rules,a=0;a<i.length;a++)if(i[a].keyword==e){i.splice(a,1);break}return this},validate:function e(t,i){e.errors=null;var a=this._validateKeyword=this._validateKeyword||this.compile(r,!0);if(a(t))return !0;if(e.errors=a.errors,i)throw new Error("custom keyword definition is invalid: "+this.errorsText(a.errors));return !1}},al}();p.prototype.addKeyword=c.add,p.prototype.getKeyword=c.get,p.prototype.removeKeyword=c.remove,p.prototype.validateKeyword=c.validate;var u=zo();p.ValidationError=u.Validation,p.MissingRefError=u.MissingRef,p.$dataMetaSchema=n;var d="http://json-schema.org/draft-07/schema",f=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],h=["/properties"];function p(e){if(!(this instanceof p))return new p(e);e=this._opts=l.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:S,warn:S,error:S};else {if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t;}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=s(e.format),this._cache=e.cache||new r,this._loadingSchemas={},this._compilations=[],this.RULES=o(),this._getId=function(e){switch(e.schemaId){case"auto":return b;case"id":return y;default:return v}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=a),this._metaOpts=function(e){for(var t=l.copy(e._opts),r=0;r<f.length;r++)delete t[f[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r);}}(this),e.keywords&&function(e){for(var t in e._opts.keywords){var r=e._opts.keywords[t];e.addKeyword(t,r);}}(this),function(e){var t;if(e._opts.$data&&(t=ul,e.addMetaSchema(t,t.$id,!0)),!1!==e._opts.meta){var r=ol;e._opts.$data&&(r=n(r,h)),e.addMetaSchema(r,d,!0),e._refs["http://json-schema.org/schema"]=d;}}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(t)if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r);}(this);}function g(e,r){return r=t.normalizeId(r),e._schemas[r]||e._refs[r]||e._fragments[r]}function m(e,t,r){for(var i in t){var a=t[i];a.meta||r&&!r.test(i)||(e._cache.del(a.cacheKey),delete t[i]);}}function y(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function v(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function b(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function w(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function S(){}return nl}(),fl=po(dl),hl={exports:{}},pl=function(){if(cl)return hl.exports;function e(e,t,r,i){var a,s=null==(a=i)||"number"==typeof a||"boolean"==typeof a?i:r(i),o=t.get(s);return void 0===o&&(o=e.call(this,i),t.set(s,o)),o}function t(e,t,r){var i=Array.prototype.slice.call(arguments,3),a=r(i),s=t.get(a);return void 0===s&&(s=e.apply(this,i),t.set(a,s)),s}function r(e,t,r,i,a){return r.bind(t,e,i,a)}function i(i,a){return r(i,this,1===i.length?e:t,a.cache.create(),a.serializer)}function a(){return JSON.stringify(arguments)}function s(){this.cache=Object.create(null);}cl=1,s.prototype.has=function(e){return e in this.cache},s.prototype.get=function(e){return this.cache[e]},s.prototype.set=function(e,t){this.cache[e]=t;};var o={create:function(){return new s}};return hl.exports=function(e,t){var r=t&&t.cache?t.cache:o,s=t&&t.serializer?t.serializer:a;return (t&&t.strategy?t.strategy:i)(e,{cache:r,serializer:s})},hl.exports.strategies={variadic:function(e,i){return r(e,this,t,i.cache.create(),i.serializer)},monadic:function(t,i){return r(t,this,e,i.cache.create(),i.serializer)}},hl.exports}();const gl=po(pl)((async e=>{const t=e.featureCollection;let r,i;if(void 0!==t?.layers?.[0]){const e=t.layers[0];r=e.featureSet,i=e.layerDefinition;}else i=e.layerDefinition;const a={};if(void 0!==r){const e=await async function(){if(Ws)return await window.$arcgis.import("esri/rest/support/FeatureSet");const e=await Promise.resolve().then(function () { return /*#__PURE__*/_interopNamespace(require('@arcgis/core/rest/support/FeatureSet.js')); });return Ys(e)?e.default:e}();if(a.source=e.fromJSON(r).features,void 0!==i?.fields){const e=await async function(){if(Ws)return await window.$arcgis.import("esri/layers/support/Field");const e=await Promise.resolve().then(function () { return /*#__PURE__*/_interopNamespace(require('@arcgis/core/layers/support/Field.js')); });return Ys(e)?e.default:e}();a.fields=i.fields.map((t=>e.fromJSON(t)));}void 0!==i?.objectIdField&&(a.objectIdField=i.objectIdField);const t=await Js();if(void 0!==i?.geometryType){const e=t.fromJSON({geometryType:i.geometryType});void 0!==e?.type&&"extent"!==e?.type&&(a.geometryType=e.type);}void 0!==i?.spatialReference&&(a.spatialReference=i.spatialReference);}else a.id=e.id,void 0!==i?.id&&(a.layerId=i.id),void 0!==e.url&&(a.url=e.url),void 0!==e.itemId&&void 0!==i?.id&&(a.portalItem={id:e.itemId});if(void 0!==i){const e=i.drawingInfo;if(void 0!==e?.renderer){const t=await async function(){if(Ws)return await window.$arcgis.import("esri/renderers/support/jsonUtils");const e=await Promise.resolve().then(function () { return /*#__PURE__*/_interopNamespace(require('@arcgis/core/renderers/support/jsonUtils.js')); });return Ys(e)?e.default:e}();a.renderer=t.fromJSON(e.renderer);}}return await async function(e){return new(await async function(){if(Ws)return await window.$arcgis.import("esri/layers/FeatureLayer");const e=await Promise.resolve().then(function () { return /*#__PURE__*/_interopNamespace(require('@arcgis/core/layers/FeatureLayer.js')); });return Ys(e)?e.default:e}())(e)}(a)}));async function ml(e,t){const r=to(e);let i=[];if(void 0!==r){await r.load();const e=!0===t&&void 0!==r?.popupTemplate?.fieldInfos;i=r.fields.map((t=>{const i=t.toJSON();if(e){const e=r.popupTemplate?.fieldInfos?.find((e=>e.fieldName?.toLowerCase()===t.name.toLowerCase()))?.label;void 0!==e&&e!==t.name&&(i.alias=e);}return i}));}return i}function yl(e){return [a,r].includes(e.type)}function vl(e){return e.filter((e=>"esriFieldTypeDate"===e.type)).map((e=>e.name))}function bl(e){return e.filter((e=>function(e){return [i,t,a,r].includes(e.type)}(e))).map((e=>e.name))}function wl(e,t){const r=[],i=function(e){return void 0!==e&&"type"in e&&"subtype-group"===e.type}(e)?e.subtypes:e[t];return void 0!==i?.[0]&&i.forEach((e=>{const{name:t,domains:i}=e;let a="id"in e?e.id:void 0;!a&&"code"in e&&(a=e.code);const s=Object.entries(i??{}),o=[],n=s?.filter((([e,t])=>"coded-value"===t?.type)),l=n?.map((([e,r])=>{let i={fieldName:e,name:t,codedValues:o};if(r&&"codedValues"in r){const t=r.codedValues.map((({code:e,name:t})=>({name:t,code:e})));i={fieldName:e,name:r.name,codedValues:t};}return i}));r.push({id:a??"",name:t,domains:l});})),0===r.length?void 0:r}async function Sl(e){const{queryObject:t,fieldToMatch:r,returnUndefinedIfNotFound:i}=e,a=await ml(t);let s=a.find((e=>r===e.name));s||(s=a.find((e=>r.toUpperCase()===e.name.toUpperCase())));const o=i?"":r;return s?.name??o}async function xl(e){const{fieldsList:t,queryObject:r,returnUndefinedIfNotFound:i}=e;let a=t;return void 0!==a&&(a=await Promise.all(a.map((async e=>await Sl({queryObject:r,fieldToMatch:e,returnUndefinedIfNotFound:i}))))),a}function _l(e){let t=!1;switch(Ds(e?.series)){case $:case T:t=0===(e?.series?.[0]?.x?.trim()?.length??0);break;case E:{const r=e?.series;t=0===(r?.[0]?.x?.length??0)||0===(r?.[0]?.y?.length??0);break}case k:{const r=e?.series;t=Xs(r)===Cs?0===(r?.[0]?.query?.outStatistics?.length??0):0===(r?.[0]?.x?.length??0)||r?.[0]?.x===X;break}case L:{const r=e?.series;t=0===[r?.[0]?.y].flat().length||""===r?.[0]?.y;break}case D:case A:case O:{const r=e?.series;t=Xs(r)===xs?0===(r?.[0]?.query?.outStatistics?.length??0):0===(r?.[0]?.x?.trim()?.length??0);break}}return t}function Fl(e){return e.type===L}function jl(e){return e.type===O}function Pl(e){return e.type===A}!function(){new fl({allErrors:!0});}();const Cl=e=>Ds(e)===O;var El;async function kl(e,t){const r=[];return await Promise.all(e.map((async e=>{if(!Rs(e)){const i=Ns(e,!1);if(void 0!==i.fieldToSort){const e=await Sl({queryObject:t,fieldToMatch:i.fieldToSort});void 0!==e&&r.push(void 0===i.orderBy?e:`${e} ${i.orderBy}`);}}}))),r}function Il(e){let t;switch(e){case"mean":t=Q;break;case"median":t=H;break;case"category":t=K;}return t}function Ol(e){let t,r=e.orderOptions?.orderByFields?.[0];if(e.series?.length>0){const i=Ds(e.series),a=Xs(e.series);if(i!==k&&a!==xs&&(r=r??e.series[0].x),r&&!Rs(r)){const{fieldToSort:i,orderBy:a}=Ns(r);let s;i===e.series[0].x||i===X?s=K:"y"in e.series[0]&&i===e.series[0].y&&(s=G),void 0!==s&&(t={orderType:s,orderBy:"DESC"===a?.toUpperCase()?R:B});}}return t}async function Al(e,t){let r=Jr(e);return r=function(e){const t=Jr(e);return si(e.axes)||(t.axes=e.axes?.map((e=>{const t=e;return delete t.calculateAutomaticMaximum,delete t.calculateAutomaticMinimum,void 0!==t.title?.content.font?.style&&(t.title.content.font.style=t.title.content.font.style.toLowerCase()),t}))),t}(r),r=function(e){const t=Jr(e);return si(e.series)||(t.series=e.series.map(((t,r)=>{const i=t;void 0===t.id&&(i.id=`Series ${Date.now()}-${r}`);const a=Ds(e.series,r);return a!==A&&a!==O&&a!==D||"median"!==i.query?.outStatistics?.[0]?.statisticType||(i.query.outStatistics[0].statisticType=d),a===A&&void 0!==i.multipleBarType&&(i.stackedType=i.multipleBarType,delete i.multipleBarType),a===k&&void 0!==i.sliceGrouping&&(i.sliceGrouping.sliceId=Ti,void 0!==i.sliceGrouping.groupName&&(i.sliceGrouping={...i.sliceGrouping,label:i.sliceGrouping.groupName},delete i.sliceGrouping.groupName),void 0!==i.sliceGrouping.groupSliceSymbol&&(i.sliceGrouping={...i.sliceGrouping,fillSymbol:i.sliceGrouping.groupSliceSymbol},delete i.sliceGrouping.groupSliceSymbol)),i}))),t}(r),r=await async function(e,t){const r={...e};let i=t;if(!i){const t=function(e){return e&&"iLayer"in e&&e.iLayer}(e)?e.iLayer:e.dataSource?.layer;t&&(i=await gl(t));}if(i){const t=Xs(r.series),a=Ds(r.series),s=r.series&&r.series.length>0&&""===r.series[0].x.trim()||a===I&&!function(e){return "featureGauge"===e.subType}(e)||t===Cs||t===xs||t===Es||t===As||t===ks||t===Ts,o=a===E||t===bs||t===Fs||t===Es||t===As||t===Is||t===Ls||t===js;if(r.series=await Promise.all(e.series.map((async e=>{const r={...e};if(s||(r.x=await Sl({queryObject:i,fieldToMatch:e.x})),"y"in r&&o){const e=r.y;if(Array.isArray(e)){const t=await xl({fieldsList:e,queryObject:i});void 0!==t&&"y"in r&&(r.y=t);}else "y"in r&&"string"==typeof e&&(r.y=await Sl({queryObject:i,fieldToMatch:e}));}if(void 0!==e.query){let{where:a,groupByFieldsForStatistics:s,outStatistics:o}=e.query;if(s=await xl({fieldsList:s,queryObject:i}),void 0!==o&&(o=await Promise.all(o.map((async e=>{const t={...e};return t.onStatisticField=await Sl({queryObject:i,fieldToMatch:e.onStatisticField}),t})))),void 0!==a&&t===_s){const t=Qs(e.query?.where),r=Hs({where:e.query?.where,normalize:!1,escape:!1});a=`${await Sl({queryObject:i,fieldToMatch:t})}=${r}`;}void 0!==r.query&&(void 0!==a&&(r.query.where=a),void 0!==s&&(r.query.groupByFieldsForStatistics=s),void 0!==o&&(r.query.outStatistics=o));}return r}))),void 0!==r.series[0]?.query){const e=r.series[0].query;let{orderByFields:t}=e;void 0!==t&&t.length>0&&(t=await kl(t,i),t.length>0&&void 0!==e.orderByFields&&(r.series[0].query.orderByFields=t));}if(void 0!==r.orderOptions?.orderByFields){let{orderByFields:e}=r.orderOptions;void 0!==e&&e.length>0&&(e=await kl(e,i),e.length>0&&(r.orderOptions.orderByFields=e));}if(a===I&&void 0!==e.axes?.[0]){const{minimumFromField:t,maximumFromField:r}=e.axes[0];if(void 0!==t){const r="string"==typeof t?t:t.onStatisticField,a=await Sl({queryObject:i,fieldToMatch:r});let s=t;"string"==typeof e.axes[0].minimumFromField?s=a:"object"==typeof t&&(s={...t,onStatisticField:a}),e.axes[0].minimumFromField=s;}if(void 0!==r){const t="string"==typeof r?r:r.onStatisticField,a=await Sl({queryObject:i,fieldToMatch:t});let s=r;"string"==typeof e.axes[0].maximumFromField?s=a:"object"==typeof r&&(s={...r,onStatisticField:a}),e.axes[0].maximumFromField=s;}}}return r}(r,t),r=function(e){const t=Jr(e);if(!si(e.series)&&Ds(e.series)===L){const r=t.series[0];void 0!==r.showOutliers&&(void 0===e.showOutliers&&(t.showOutliers=r.showOutliers),delete r.showOutliers),void 0!==r.standardizeValues&&(void 0===e.standardizeValues&&(t.standardizeValues=r.standardizeValues),delete r.standardizeValues),void 0!==r.showMean&&(void 0===e.showMean&&(t.showMean=r.showMean),delete r.showMean);}return t}(r),r=function(e){const t=Jr(e);if(!si(t.series)&&Ds(e.series)===L){if(void 0===t.orderOptions?.data){const r=function(e){const t={orderType:K,orderBy:B},r=e.query?.orderByFields?.[0];if(void 0!==r){const{outStatisticFieldName:i,statisticType:a}=e.query?.outStatistics?.[0]??{},s=Ns(r);void 0!==i&&s.fieldToSort===i&&void 0!==a&&(a===c||"mean"===a?t.orderType=Q:a===d&&(t.orderType=H)),t.orderBy=s.orderBy??B;}return t}(e.series[0]);void 0!==r.orderType&&(t.orderOptions??={},t.orderOptions.data={orderType:r.orderType,orderBy:r.orderBy});}if(t.series=e.series.map((e=>{const t=e;return si(t.x?.trim())&&(t.x=Li),delete t.query?.orderByFields,t})),function(e){let t=!1;const r=Array.from(new Set(e.series.map((e=>e.type))));if(2===r.length&&r.includes(L)&&r.includes(O)){const r=e.series.find((e=>e.type===O));t=void 0!==r?.query?.outStatistics?.[0];}return t}(t)){t.showMean=!0;const e=t.series.find((e=>e.type===L));t.series.forEach((t=>{t.type===O&&(delete t.query?.groupByFieldsForStatistics,delete t.query?.outStatistics,delete t.query?.orderByFields,e&&(t.y=e.y));}));}t.series=e.series.map((e=>{const t=e;return delete t.query?.outStatistics,t}));}return t}(r),r=function(e){const t=Jr(e);return void 0===t.legend||Number.isFinite(t.legend.maxHeight)||(t.legend.maxHeight=Number.NaN),t}(r),r=function(e){const t=Jr(e),r=new Set,i=t.id??"";return r.add(i),t.series.forEach((e=>{let t=e.id;r.has(t)&&(t=`${t}_${Date.now()}`,e.id=t),r.add(t);})),t}(r),r}function Tl(e){let t=Jr(e);return t=function(e){const t=Jr(e);if(!si(e.series)&&void 0!==t.axes?.[0]&&Ds(e.series)===I&&void 0!==e.axes?.[0]){const r=e.axes[0];void 0!==r.ticks&&Object.hasOwn(r.ticks,"spacing")&&delete r.ticks.spacing,t.axes[0]=r;}return t}(t),t}function Ll(e){let t=Jr(e);return t=function(e){const t=Jr(e),{extent:r}=t.series[0]?.query??{};return void 0!==r&&(t.dataFilters={...t.dataFilters,geometry:r},t.series.forEach((e=>{"query"in e&&"extent"in e.query&&delete e.query.extent;}))),t}(t),t}function Dl(e){let t=Jr(e);return t=function(e){const t=Jr(e);return si(e.series)||(function(e){const t=[A,O,$,L],r=Ds(e?.series);return void 0!==r&&t.includes(r)}(e)&&void 0===e.rotated&&(t.rotated=e.series[0].rotated??!1),t.series.forEach((e=>{void 0!==e.rotated&&delete e.rotated;}))),t}(t),t}function $l(e){let t=Jr(e);return t=function(e){const t=Jr(e),r=e.dataSource;return "dataSource"in t&&!si(r)&&("featureLayer"===r.type&&void 0!==t.dataSource&&(t.dataSource.type="layer"),"featureLayer"in r&&(t.dataSource.layer=r.featureLayer,delete t.dataSource.featureLayer)),t}(t),t}function Ul(e){let t=Jr(e);return t=function(e){const t=Jr(e);if("dataSource"in e){const r=e.dataSource;if(void 0!==r.filter&&""!==r.filter.trim()){const e=io([r.filter,t.dataFilters?.where]);t.dataFilters={...t.dataFilters,where:e},delete t.dataSource.filter;}}return t}(t),t}function Bl(e){let t=Jr(e);return t=function(e){const t=Jr(e);if(!si(e.series)&&Ds(e.series)===k){const e=t.series[0];if("originalValue"===e.sortLabelsBy)t.sortLabelsBy=e.sortLabelsBy;else if(void 0!==e.sortLabelsBy&&void 0===t.orderOptions?.data){const e=Ol(t);void 0!==e&&(t.orderOptions??={},t.orderOptions.data=e);}e.sortLabelsBy&&delete e.sortLabelsBy;}return t}(t),t}function Rl(e){let t=Jr(e);return t=function(e){const t=Jr(e),r=e.sortOptions?.sortSeriesBy;return void 0===t.orderOptions&&"string"==typeof r&&(t.orderOptions??={},t.orderOptions.series={orderBy:"DESC"===r?R:B}),t}(t),t}function Nl(e){let t=Jr(e);return t=function(e){const t=Jr(e);return void 0===t.colorMatch&&void 0!==t.series[0].colorType&&(t.colorMatch="colorMatch"===t.series[0].colorType),t.series.forEach((e=>{void 0!==e.colorType&&delete e.colorType;})),t}(t),t}function Ml(e){return function(e){const t=Jr(e);return t.axes?.forEach((e=>{void 0!==e&&void 0!==e.scrollbarVisible&&void 0===e.scrollbar?.visible&&(e.scrollbar={...e.scrollbar,visible:e.scrollbarVisible},delete e.scrollbarVisible);})),t}(e)}function zl(e){let t=Jr(e);return e.series[0]?.type===L&&(t=function(e){const t=Jr(e);if(void 0!==t.sortDataBy){if(void 0===t.orderOptions?.data){const r=e.sortDataBy,i=Il(r?.sortType);void 0!==i&&(t.orderOptions??={},t.orderOptions.data={orderType:i,orderBy:r?.sortOrder??B});}delete t.sortDataBy;}return t}(t)),t}function Vl(e){return function(e){const t=Jr(e);return si(e.series)||(function(e){const t=[A,O,$,D],r=Ds(e?.series);return void 0!==r&&t.includes(r)}(e)&&void 0===e.stackedType&&(t.stackedType=e.series[0].stackedType??"sideBySide"),t.series.forEach((e=>{"stackedType"in e&&delete e.stackedType;}))),t}(e)}function ql(e){return function(e){const t=Jr(e),r=e,i=e,a=e,s=e,o=e;if(t){if(void 0===t.orderOptions?.series&&void 0!==r.sortOptions?.sortSeriesBy&&(t.orderOptions??={},t.orderOptions.series={preferLabel:(n=i.sortLabelsBy??r.sortOptions.sortSeriesBy.sortType,"originalValue"!==n),orderBy:r.sortOptions.sortSeriesBy.sortOrder??B}),"originalValue"===i.sortLabelsBy||!1===s.orderOptions?.data?.preferDataLabel||!1===o.orderOptions?.data?.preferLabel)t.orderOptions?.data&&delete t.orderOptions.data;else if(void 0===t.orderOptions?.data)if(Ds(t.series)===L){if(i.sortLabelsBy||void 0!==a.sortOptions?.sortDataBy){const e=Il(a.sortOptions?.sortDataBy?.sortType);void 0!==e&&(t.orderOptions??={},t.orderOptions.data={orderType:e,orderBy:a.sortOptions?.sortDataBy?.sortOrder??B});}}else {const e=Ol(t);void 0!==e&&(t.orderOptions??={},t.orderOptions.data=e);}"sortLabelsBy"in t&&delete t.sortLabelsBy,"sortOptions"in t&&delete t.sortOptions;}var n;return t}(e)}function Gl(e){return function(e){const t=Jr(e);return "dataSource"in t&&t.dataSource.layer&&(t.iLayer=t.dataSource.layer,delete t.dataSource),t}(e)}function Ql(e){return function(e){const t=Jr(e);if(t){const e=Xs(t.series);if((e===xs||e===Cs)&&void 0===t.orderOptions?.data&&void 0!==t.orderOptions?.orderByFields){const e=Ol(t);void 0!==e&&(t.orderOptions??={},t.orderOptions.data=e,delete t.orderOptions.orderByFields);}}return t}(e)}function Hl(e){return function(e){const t=Jr(e);return t.horizontalAxisLabelsBehavior===El.NONE&&(t.horizontalAxisLabelsBehavior=N),t.verticalAxisLabelsBehavior===El.NONE&&(t.verticalAxisLabelsBehavior=N),t}(e)}function Kl(t){const{versionsToConvert:r=[],configToUpdate:i}=t;let a=Jr(i);return r.length>0&&void 0!==a&&(a=function(e){const t=Jr(e),r=t.series[0]?.query?.orderByFields;if(void 0!==r&&r.length>0&&void 0===t.orderOptions?.orderByFields){t.orderOptions??={};let i=!0;if(1===r.length){const{fieldToSort:a,orderBy:s}=Ns(r[0]);let o;a===e.series[0].x||a===X?o=K:"y"in e.series[0]&&a===e.series[0].y&&(o=G),void 0!==o&&(i=!1,void 0===t.orderOptions.data&&(t.orderOptions.data={orderType:o,orderBy:"DESC"===s?.toUpperCase()?R:B}));}i&&(t.orderOptions.orderByFields=r);}return t.series.forEach((e=>{delete e.query?.orderByFields;})),t}(a),r.includes(zs)||r.includes(Vs)?(a=function(e){let t=Jr(e);return t=function(e){const t=Jr(e);return void 0!==t?.orderOptions?.orderByFields&&Xs(e.series)===Cs&&(t.orderOptions.orderByFields=e?.orderOptions?.orderByFields?.map((e=>{let t=Jr(e);return void 0!==e&&e.includes("arcgis_charts_pie_category_from_fields_name")&&(t=e.replace("arcgis_charts_pie_category_from_fields_name",X)),t}))),t}(t),t}(a),a=Tl(a),a=Ll(a),a=Dl(a),a=$l(a),a=Ul(a),a=Bl(a),a=Rl(a),a=Nl(a),a=Ml(a),a=zl(a),a=Vl(a),a=ql(a),a=Gl(a),a=Ql(a),a=Hl(a)):r.forEach((e=>{if(void 0!==a)switch(e){case"1.0.1":a=Tl(a);break;case"3.4.0":a=Ll(a);break;case"4.0.0":a=Dl(a);break;case"4.0.1":a=$l(a);break;case"6.4.0":a=Ul(a);break;case"7.5.1":a=Bl(a);break;case"8.0.0":a=Rl(a);break;case"9.2.0":a=Nl(a);break;case"9.7.0":a=Ml(a);break;case"10.0.0":a=zl(a);break;case"11.0.0":a=Vl(a);break;case"14.0.1":a=ql(a);break;case"16.0.0":a=Gl(a);break;case"16.1.0":a=Ql(a);break;case"18.0.0":a=Hl(a);}})),a.version=e),a}async function Xl(e,t){let r=e;if(e){const i=to(t);r=await Al(e,i);const a=e.version??zs,{versionStatus:s,versions:o}=function(e){let t=M,r=[];var i;if(void 0!==(i=e)&&/^([1-9]\d*|0)(\.(([1-9]\d*)|0)){2}$/u.test(i)&&void 0!==e){Ms.sort(qs);const i=qs(e,Ms[Ms.length-1]);if(1===i?t=z:-1===i&&(t=V),t===z||t===M)r.push(e);else {for(let t=Ms.length-2;t>=0;t-=1)if(qs(e,Ms[t])>=0){r=Ms.slice(t,Ms.length);break}0===r.length&&r.push(zs);}}else t=q,r.push(Vs);return {versionStatus:t,versions:r}}(a);s!==V&&s!==q||(r=Kl({versionsToConvert:o,configToUpdate:r}));}return r}!function(e){e.NONE="none",e.ROTATE="rotate",e.STAGGER="stagger",e.WRAP="wrap";}(El||(El={}));const Wl=e=>e.title?.content.text??"",Yl=e=>e.footer?.content.text??"",Jl=e=>e.footer?.visible??!1;class Zl extends EventTarget{constructor(){super(...arguments),this.setupFinished=new Promise((e=>{this.resolveSetup=e;}));}isSameChartAs(e){const t=e?.getLayer();return void 0!==t&&this._config.id===e?.getChartId()&&this.layerInfo?.layer.id===t.id}getConfig(){return this._config}setConfig(e){this._config=e,this.emitConfigUpdate("setConfig");}getChartType(){return this._chartType}getLayer(){return this.layerInfo?.layer}getChartId(){return this._config.id}setChartId(e){this._config.id=e;}getTitleText(){return Wl(this._config)}setTitleText(e){var t,r;t=e,void 0!==(r=this._config).title?r.title.content.text=t:void 0===r.title&&void 0!==t&&(r.title=zi({text:t,visible:!0,font:Ni(Z)})),this.emitConfigUpdate("setTitleText");}getDescriptionText(){return Yl(this._config)}setDescriptionText(e){var t,r;t=e,void 0!==(r=this._config).footer?r.footer.content.text=t:void 0===r.footer&&void 0!==t&&(r.footer=zi({text:t,visible:!0,font:Ni(ie)})),this.emitConfigUpdate("setDescriptionText");}getChartTitleVisibility(){return !!(e=this._config).title&&(e.title.visible??!0);var e;}setChartTitleVisibility(e){((e,t)=>{void 0!==t.title?t.title.visible=e:void 0===t.title&&(t.title=zi({text:"",visible:e,font:Ni(Z)}));})(e,this._config),this.emitConfigUpdate("setChartTitleVisibility");}getDescriptionVisibility(){return Jl(this._config)}setDescriptionVisibility(e){((e,t)=>{void 0!==t.footer?t.footer.visible=e:void 0===t.footer&&e!==Jl(t)&&(t.footer=zi({text:"",visible:!0,font:Ni(ie)}));})(e,this._config),this.emitConfigUpdate("setDescriptionVisibility");}getTitleSymbol(){return e=this._config,e.title?.content;var e;}setTitleSymbol(e){((e,t)=>{const r=Wl(t);void 0!==t.title&&void 0!==e||(t.title=zi({text:"",visible:!0,font:Ni(Z),type:Z})),void 0!==e&&(t.title.content=e),t.title.content.text=r;})(e,this._config),this.emitConfigUpdate("setTitleSymbol");}getDescriptionSymbol(){return e=this._config,e.footer?.content;var e;}setDescriptionSymbol(e){((e,t)=>{const r=Yl(t);void 0!==t.footer&&void 0!==e||(t.footer=zi({text:"",visible:!0,font:Ni(ie),type:ie})),void 0!==e&&(t.footer.content=e),t.footer.content.text=r;})(e,this._config),this.emitConfigUpdate("setDescriptionSymbol");}getBackgroundColor(){return this._config.background}setBackgroundColor(e){((e,t)=>{t.background=e;})(e,this._config),this.emitConfigUpdate("setBackgroundColor");}setSeriesVisibility(e){!function(e,t){if(void 0!==t){const{seriesId:r,overlayType:i,visible:a}=e.detail;let s;switch(i){case"Mean":t.series[0].type===T&&(s=t.series[0].overlays?.mean);break;case"Median":t.series[0].type===T&&(s=t.series[0].overlays?.median);break;case"Standard Deviation":t.series[0].type===T&&(s=t.series[0].overlays?.standardDeviation);break;case"Normal Distribution":t.series[0].type===T&&(s=t.series[0].overlays?.comparisonDistribution);break;case"Trendline":t.series[0].type===E&&(s=t.series[0].overlays?.trendLine);break;default:s=t.series.find((e=>e.id===r));}void 0!==s&&(s.visible=a);}}({detail:e},this._config),this.emitConfigUpdate("setSeriesVisibility");}getSeriesId(e){return ((e,t)=>t.series[e]?.id)(e,this._config)}getSeriesIndex(e){return ((e,t)=>t.series.findIndex((t=>t.id===e)))(e,this._config)}getSeriesLength(){return this._config.series.length??0}getChartSubType(){return Xs(this._config.series)}setFetchNULLValues(e){((e,t)=>{t.series.forEach((t=>{t.query&&(t.query.fetchNullValues=e);}));})(e,this._config);}getFetchNULLValues(){return this._config.series.some((e=>e.query?.fetchNullValues))}emitConfigUpdate(e){this.dispatchEvent(new CustomEvent("arcgisChartsModelConfigChange",{detail:{config:this._config,functionCalled:e}}));}async loadConfigFromLayer(e){const{layer:t,iLayer:r,config:i}=e;let a=t;if(!a&&r&&(a=await gl(r)),a){const e=await ml(a,!0),{objectIdField:t}=a;this.layerInfo={layer:a,layerFieldsInfo:e,objectIdField:t};}this._config=void 0!==i?await Xl(i):await this.generateDefaultConfig(),r&&(this._config.iLayer=r);}}const ec="esriFieldTypeString",tc="count",rc="sum",ic="no_aggregation",ac="esriSLS",sc="esriSFS",oc="gaugeAxisTick",nc="category",lc="date",cc="chartGuide",uc="scatterSeries",dc="pieSeries",fc="gaugeSeries",hc="lineSeries",pc="barSeries",gc="histogramSeries",mc="boxPlotSeries",yc="comboLineAndBarSeries",vc="none",bc="right",wc="sideBySide",Sc="stacked100",xc="ASC",_c="DESC",Fc="null",jc="interpolate",Pc="statisticGauge",Cc="arcgis-charts-y-value",Ec="arcgis-charts-mean",kc="arcgis-charts-median",Ic="arcgis-charts-category",Oc="arcgis_charts_pie_from_fields_name",Ac="arcgis_charts_pie_from_fields_value",Tc="arcgis_charts_bar_line_from_fields_name",Lc=(e,t)=>t.series?.[e]?.hideOversizedStackedLabels,Dc=(e,t,r)=>{void 0!==r.series?.[t]&&(r.series[t].hideOversizedStackedLabels=e);};async function $c(e){const{config:t,layer:r,xAxisField:i,splitByField:a,layerFieldsInfo:s,aggregationFields:o,aggregationType:n,fetchNullValues:l}=e,c=s.filter((e=>e.name===a)),u=c[0]?.type,d=!0!==l?`${a} IS NOT NULL`:"",f=i&&!0!==l?`${i} IS NOT NULL`:"",{where:h}=t?.dataFilters??{},p={where:io([h,d,f]),orderByFields:Rs(a)?[]:[`${a} ${xc}`],geometry:t?.dataFilters?.geometry};let g=r;!g&&void 0!==t&&"iLayer"in t&&t.iLayer&&(g=await gl(t.iLayer));let m="";0===o.length?m=g?.objectIdField??"":[m]=o;const y=void 0!==n?`${n}_${m}`:"";let v=await ho({queryObject:g,category:t?.series[0].x??"",splitByField:a,queryConfig:p});if(t){const e=t?.series.map((e=>Hs({where:e.query?.where})?.toString()??"")).filter((e=>void 0!==e&&""!==e));v=function(e,t){let r;if(0===t.length)r=e;else {const i=new Map;t.forEach(((e,t)=>{i.set(e,t);})),r=e.slice().sort(((e,t)=>{const r=i.get(e),a=i.get(t);let s=0;return s=void 0===r&&void 0===a?0:void 0===r?1:void 0===a?-1:r-a,s}));}return r}(v,e);}return {categoriesArray:v,fieldName:y,splitByFieldType:u,numericalField:m}}function Uc(e,t){let r=""===t;for(const i of e)if(t===i.name){r=!0;break}return r}function Bc(e,t){const r=bl(e);let i=0===t.length,a=0;for(let e=0;e<t.length;e+=1){for(let s=0;s<r.length;s+=1)if(t[e]===r[s]&&(a+=1),a===t.length){i=!0;break}if(i)break}return i}function Rc(e,t){t.forEach((t=>{Object.getOwnPropertyNames(t.prototype).forEach((r=>{Object.defineProperty(e.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r)||Object.create(null));}));}));}async function Nc(e){const{layerInfo:t,config:r,category:i}=e,{layer:a}=t,{where:s}=r?.dataFilters??{},{fetchNullValues:o}=r?.series?.[0]?.query??{},n={where:io([s,!0!==o?`${i} IS NOT NULL`:""]),orderByFields:[],geometry:r?.dataFilters?.geometry};let l=a;!l&&void 0!==r&&"iLayer"in r&&r.iLayer&&(l=await gl(r.iLayer));const c=function(e){let t;if(void 0!==e){const r=to(e);if(!Zs(r)&&!Rs(r?.typeIdField)){const e=wl(r,"types");void 0!==e&&(t={typeIdField:r.typeIdField??void 0,types:e});}if(!Rs(r?.subtypeField)){const e=eo(r),i=wl(e,"subtypes");void 0!==i&&(t={...t,subtypeField:e.subtypeField??void 0,subtypes:i});}}return t}(l),u=(await ho({queryObject:l,category:i,queryConfig:n})).map((e=>{const r=String(e),a=function(e){const{fieldName:t,fieldValueToMatch:r,subtypeInfo:i,fieldList:a}=e;let s;if(!("string"==typeof r&&Rs(r)||Rs(t))&&(s=function(e){const{subtypeInfo:t,fieldName:r,fieldValueToMatch:i}=e;let a;const s=e=>`${e.id}`==`${i}`;return t?.subtypeField===r&&t.subtypes?a=t.subtypes.find(s)?.name:t?.typeIdField===r&&t.types&&(a=t.types.find(s)?.name),a}({subtypeInfo:i,fieldName:t,fieldValueToMatch:r}),void 0===s)){const e=function(e,t=[]){return t.find((t=>t.name===e))}(t,a);if(void 0!==i?.types){const t=i?.types;for(const i of t){const t=i.domains?.filter((t=>t.fieldName===e?.name))??[];for(const e of t)if(s=e?.codedValues?.find((e=>`${e.code}`===r))?.name,void 0!==s)break;if(void 0!==s)break}}void 0===s&&void 0!==e?.domain&&"codedValue"===e.domain.type&&(s=e.domain.codedValues?.find((e=>`${e.code}`==`${r}`))?.name);}return s}({fieldName:i,fieldValueToMatch:r,subtypeInfo:c,fieldList:t.layerFieldsInfo});return a??r}));return u}class Mc extends Zl{getColorMatch(){return this._config.colorMatch??!0}setColorMatch(e){((e,t)=>{t.colorMatch=e;})(e,this._config),this.emitConfigUpdate("setColorMatch");}}const zc=e=>e.legend?.title?.content.text??"";class Vc extends Zl{getLegendVisibility(){return (e=>{let t=!1;return void 0!==e.legend&&(t=e.legend.visible??!0),t})(this._config)}setLegendVisibility(e){((e,t)=>{void 0===t.legend&&(t.legend=Hi()),t.legend.visible=e;})(e,this._config),this.emitConfigUpdate("setLegendVisibility");}getLegendTitleText(){return zc(this._config)}setLegendTitleText(e){((e,t)=>{if(void 0!==t.legend?.title)t.legend.title.content.text=e;else if(void 0===t.legend&&void 0!==e){const r=Hi();void 0!==r.title&&(r.title.content.text=e,r.title.visible=!0,t.legend=r);}})(e,this._config),this.emitConfigUpdate("setLegendTitleText");}getLegendTitleVisibility(){return e=this._config,e.legend?.title?.visible??!1;var e;}setLegendTitleVisibility(e){((e,t)=>{if(void 0!==t.legend?.title)t.legend.title.visible=e;else if(void 0!==t.legend&&void 0===t.legend?.title&&e)t.legend.title=zi({text:zc(t),visible:e,font:Ni(te),type:te});else if(void 0===t.legend){const r=Hi();r.title=zi({text:zc(t),visible:e,font:Ni(te),type:te}),t.legend=r;}})(e,this._config),this.emitConfigUpdate("setLegendTitleVisibility");}getLegendPosition(){return e=this._config,e.legend?.position??bc;var e;}setLegendPosition(e){((e,t)=>{if(void 0!==t.legend)t.legend.position=e;else if(void 0===t.legend){const r=Hi();r.position=e,t.legend=r;}})(e,this._config),this.emitConfigUpdate("setLegendPosition");}getLegendTitleSymbol(){return e=this._config,e.legend?.title?.content;var e;}setLegendTitleSymbol(e){var t,r;t=e,void 0===(r=this._config).legend&&(r.legend=Hi()),void 0!==r.legend.title&&void 0!==t||(r.legend.title=zi({text:"",visible:!0,font:Ni(te),type:te})),void 0!==t&&(r.legend.title.content=t),this.emitConfigUpdate("setLegendTitleSymbol");}getLegendTextSymbol(){return e=this._config,e.legend?.body;var e;}setLegendTextSymbol(e){var t,r;t=e,void 0===(r=this._config).legend&&(r.legend=Hi()),r.legend.body=t??zi({text:"",visible:!0,font:Ni(re),type:re}).content,this.emitConfigUpdate("setLegendTextSymbol");}}async function qc(e=Fi().locale){let t=await Promise.resolve().then(function () { return require('./messages.en-1c84fd51-604e6ea4.js'); });switch(e){case ae.Arabic:t=await Promise.resolve().then(function () { return require('./messages.ar-2a9dc383-3aec02bc.js'); });break;case ae.Bosnian:t=await Promise.resolve().then(function () { return require('./messages.bs-1c2b8440-db774e19.js'); });break;case ae.Bulgarian:t=await Promise.resolve().then(function () { return require('./messages.bg-15c48c92-a11c480d.js'); });break;case ae.Catalan:t=await Promise.resolve().then(function () { return require('./messages.ca-865879cd-b0cf854b.js'); });break;case ae.Czech:t=await Promise.resolve().then(function () { return require('./messages.cs-a460e778-8e2a458a.js'); });break;case ae.Danish:t=await Promise.resolve().then(function () { return require('./messages.da-158d4933-3391b64f.js'); });break;case ae.German:t=await Promise.resolve().then(function () { return require('./messages.de-044f311f-f1002d44.js'); });break;case ae.Greek:t=await Promise.resolve().then(function () { return require('./messages.el-5cf68dfa-f9181114.js'); });break;case ae.EnglishUSA:t=await Promise.resolve().then(function () { return require('./messages.en-US-90da305f-6e4be153.js'); });break;case ae.Spanish:t=await Promise.resolve().then(function () { return require('./messages.es-b192087a-abc96bf0.js'); });break;case ae.Estonian:t=await Promise.resolve().then(function () { return require('./messages.et-1ffa1c8c-1e2b6e6a.js'); });break;case ae.French:t=await Promise.resolve().then(function () { return require('./messages.fr-fe67914b-2135d563.js'); });break;case ae.Finnish:t=await Promise.resolve().then(function () { return require('./messages.fi-314d0422-bd2735f9.js'); });break;case ae.Hebrew:t=await Promise.resolve().then(function () { return require('./messages.he-57bf1985-78aa7e7c.js'); });break;case ae.Croatian:t=await Promise.resolve().then(function () { return require('./messages.hr-bbd4f0c8-492aa4e1.js'); });break;case ae.Hungarian:t=await Promise.resolve().then(function () { return require('./messages.hu-7a0577ba-141341ae.js'); });break;case ae.Indonesian:t=await Promise.resolve().then(function () { return require('./messages.id-4aff5df9-a0f480de.js'); });break;case ae.Italian:t=await Promise.resolve().then(function () { return require('./messages.it-dcabc31d-31139803.js'); });break;case ae.Japanese:t=await Promise.resolve().then(function () { return require('./messages.ja-22b156dd-62e06e4d.js'); });break;case ae.Korean:t=await Promise.resolve().then(function () { return require('./messages.ko-cad75e53-275435e0.js'); });break;case ae.Lithuanian:t=await Promise.resolve().then(function () { return require('./messages.lt-337fff2b-57b5b81a.js'); });break;case ae.Latvian:t=await Promise.resolve().then(function () { return require('./messages.lv-94682d92-d9bbab5f.js'); });break;case ae.NorwegianBokml:t=await Promise.resolve().then(function () { return require('./messages.no-3ffa231d-64123f77.js'); });break;case ae.Dutch:t=await Promise.resolve().then(function () { return require('./messages.nl-9d586409-e27f1d31.js'); });break;case ae.Polish:t=await Promise.resolve().then(function () { return require('./messages.pl-5ab6167c-dc1ef525.js'); });break;case ae.PortugueseBrazil:t=await Promise.resolve().then(function () { return require('./messages.pt-BR-3ef0ea7c-752e6c92.js'); });break;case ae.PortuguesePortugal:t=await Promise.resolve().then(function () { return require('./messages.pt-PT-7a6e6251-da4ef737.js'); });break;case ae.Romanian:t=await Promise.resolve().then(function () { return require('./messages.ro-2e645856-37945c61.js'); });break;case ae.Russian:t=await Promise.resolve().then(function () { return require('./messages.ru-1da0558a-b8f24965.js'); });break;case ae.Serbian:t=await Promise.resolve().then(function () { return require('./messages.sr-d8409db5-bea1adaf.js'); });break;case ae.Slovak:t=await Promise.resolve().then(function () { return require('./messages.sk-d4190664-f7882b8c.js'); });break;case ae.Slovenian:t=await Promise.resolve().then(function () { return require('./messages.sl-00f83325-bb32e5f7.js'); });break;case ae.Swedish:t=await Promise.resolve().then(function () { return require('./messages.sv-3e86b591-22c49f0c.js'); });break;case ae.Thai:t=await Promise.resolve().then(function () { return require('./messages.th-0a8daf9a-221de71f.js'); });break;case ae.Turkish:t=await Promise.resolve().then(function () { return require('./messages.tr-3729a6c6-6a74c52b.js'); });break;case ae.Ukrainian:t=await Promise.resolve().then(function () { return require('./messages.uk-2b78bc29-9d8958e7.js'); });break;case ae.Vietnamese:t=await Promise.resolve().then(function () { return require('./messages.vi-1d669469-fba9e8d3.js'); });break;case ae.ChineseChina:t=await Promise.resolve().then(function () { return require('./messages.zh-CN-55cbb48e-5d0a0ff3.js'); });break;case ae.ChineseHongKong:t=await Promise.resolve().then(function () { return require('./messages.zh-HK-2286c763-6fce112e.js'); });break;case ae.ChineseTaiwan:t=await Promise.resolve().then(function () { return require('./messages.zh-TW-38c3fd78-911deff8.js'); });}return t}function Gc(e,t,r){const i=e?.axes?.[t];void 0!==i?.title?i.title.content.text=r:void 0!==i&&(i.title=zi({text:r,visible:!0,font:Ni(J)}));}async function Qc(e){const{config:t,layerInfo:r,numericFields:i,aggregationType:a}=e;let s="";if(t){const e=function(e){let t=e?.stackedType;if(void 0===t&&void 0!==e){const r=Ds(e.series);r!==A&&r!==O&&r!==$&&r!==D||(t="sideBySide");}return t}(t)===Sc,o=await qc();if(e)s=o.axisLabels.percent;else {const e=await ga(a);if(1===i.length){const t=Bs(r.layerFieldsInfo,i[0]);s=a===ic?t:a===tc&&i[0]===r.objectIdField?o.axisLabels.count:Si(o.axisLabels.aggregationOfFieldName,{aggregation:e,fieldName:t});}else i.length>1&&(s=a===ic?o.axisLabels.values:Si(o.axisLabels.aggregationOfValues,{aggregation:e}));}}return s}const Hc=async(e,t)=>e.axes?.[t]??(await ra(e.type))[t],Kc=(e,t,r)=>{void 0!==e.axes&&(e.axes[r]=t);},Xc=(e,t,r)=>{let i=Number.NaN;return i=r?e.axes?.[t]?.maximum:e.axes?.[t]?.minimum,i??Number.NaN},Wc=async(e,t,r,i)=>{const a=e?.axes?.[r];i&&void 0!==a?a.maximum=t:i||void 0===a||(a.minimum=t);},Yc=async(e,t)=>{await Wc(e,t,1,!0);},Jc=async(e,t)=>{await Wc(e,t,1,!1);},Zc=async(e,t)=>{await Wc(e,t,0,!0);},eu=async(e,t)=>{await Wc(e,t,0,!1);},tu=e=>e.axes?.[0]?.valueFormat??{type:"category",characterLimit:11},ru=async(e,t)=>{const r=await Hc(e,0);if(void 0!==r&&void 0!==t){const i={...r,valueFormat:t};Kc(e,i,0);}},iu=e=>{let t;return function(e){return void 0!==e&&e.type===C}(e.axes?.[1]?.valueFormat)&&(t=e.axes?.[1]?.valueFormat),t},au=(e,t,r)=>{const i=e.axes?.[t];void 0!==i&&(i.integerOnlyValues=r);};var su="object"==typeof global&&global&&global.Object===Object&&global,ou="object"==typeof self&&self&&self.Object===Object&&self,nu=su||ou||Function("return this")(),lu=nu.Symbol,cu=Object.prototype,uu=cu.hasOwnProperty,du=cu.toString,fu=lu?lu.toStringTag:void 0;var hu=Object.prototype.toString;var pu=lu?lu.toStringTag:void 0;function gu(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":pu&&pu in Object(e)?function(e){var t=uu.call(e,fu),r=e[fu];try{e[fu]=void 0;var i=!0;}catch(e){}var a=du.call(e);return i&&(t?e[fu]=r:delete e[fu]),a}(e):function(e){return hu.call(e)}(e)}function mu(e){return null!=e&&"object"==typeof e}var yu=Array.isArray;function vu(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function bu(e){if(!vu(e))return !1;var t=gu(e);return "[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var wu,Su=nu["__core-js_shared__"],xu=(wu=/[^.]+$/.exec(Su&&Su.keys&&Su.keys.IE_PROTO||""))?"Symbol(src)_1."+wu:"";var _u=Function.prototype.toString;function Fu(e){if(null!=e){try{return _u.call(e)}catch(e){}try{return e+""}catch(e){}}return ""}var ju=/^\[object .+?Constructor\]$/,Pu=Function.prototype,Cu=Object.prototype,Eu=Pu.toString,ku=Cu.hasOwnProperty,Iu=RegExp("^"+Eu.call(ku).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ou(e){return !(!vu(e)||(t=e,xu&&xu in t))&&(bu(e)?Iu:ju).test(Fu(e));var t;}function Au(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Ou(r)?r:void 0}var Tu=Au(nu,"WeakMap"),Lu=Object.create,Du=function(){function e(){}return function(t){if(!vu(t))return {};if(Lu)return Lu(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();var $u=function(){try{var e=Au(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var Uu=/^(?:0|[1-9]\d*)$/;function Bu(e,t){var r=typeof e;return !!(t=t??9007199254740991)&&("number"==r||"symbol"!=r&&Uu.test(e))&&e>-1&&e%1==0&&e<t}function Ru(e,t,r){"__proto__"==t&&$u?$u(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r;}function Nu(e,t){return e===t||e!=e&&t!=t}var Mu=Object.prototype.hasOwnProperty;function zu(e,t,r){var i=e[t];Mu.call(e,t)&&Nu(i,r)&&(void 0!==r||t in e)||Ru(e,t,r);}function Vu(e,t,r,i){var a=!r;r||(r={});for(var s=-1,o=t.length;++s<o;){var n=t[s],l=i?i(r[n],e[n],n,r,e):void 0;void 0===l&&(l=e[n]),a?Ru(r,n,l):zu(r,n,l);}return r}function qu(e){return "number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Gu(e){return null!=e&&qu(e.length)&&!bu(e)}var Qu=Object.prototype;function Hu(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Qu)}function Ku(e){return mu(e)&&"[object Arguments]"==gu(e)}var Xu=Object.prototype,Wu=Xu.hasOwnProperty,Yu=Xu.propertyIsEnumerable,Ju=Ku(function(){return arguments}())?Ku:function(e){return mu(e)&&Wu.call(e,"callee")&&!Yu.call(e,"callee")};var Zu="object"==typeof exports&&exports&&!exports.nodeType&&exports,ed=Zu&&"object"==typeof module&&module&&!module.nodeType&&module,td=ed&&ed.exports===Zu?nu.Buffer:void 0,rd=(td?td.isBuffer:void 0)||function(){return !1},id={};function ad(e){return function(t){return e(t)}}id["[object Float32Array]"]=id["[object Float64Array]"]=id["[object Int8Array]"]=id["[object Int16Array]"]=id["[object Int32Array]"]=id["[object Uint8Array]"]=id["[object Uint8ClampedArray]"]=id["[object Uint16Array]"]=id["[object Uint32Array]"]=!0,id["[object Arguments]"]=id["[object Array]"]=id["[object ArrayBuffer]"]=id["[object Boolean]"]=id["[object DataView]"]=id["[object Date]"]=id["[object Error]"]=id["[object Function]"]=id["[object Map]"]=id["[object Number]"]=id["[object Object]"]=id["[object RegExp]"]=id["[object Set]"]=id["[object String]"]=id["[object WeakMap]"]=!1;var sd="object"==typeof exports&&exports&&!exports.nodeType&&exports,od=sd&&"object"==typeof module&&module&&!module.nodeType&&module,nd=od&&od.exports===sd&&su.process,ld=function(){try{var e=od&&od.require&&od.require("util").types;return e||nd&&nd.binding&&nd.binding("util")}catch(e){}}(),cd=ld&&ld.isTypedArray,ud=cd?ad(cd):function(e){return mu(e)&&qu(e.length)&&!!id[gu(e)]},dd=Object.prototype.hasOwnProperty;function fd(e,t){var r=yu(e),i=!r&&Ju(e),a=!r&&!i&&rd(e),s=!r&&!i&&!a&&ud(e),o=r||i||a||s,n=o?function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}(e.length,String):[],l=n.length;for(var c in e)!t&&!dd.call(e,c)||o&&("length"==c||a&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Bu(c,l))||n.push(c);return n}function hd(e,t){return function(r){return e(t(r))}}var pd=hd(Object.keys,Object),gd=Object.prototype.hasOwnProperty;function md(e){if(!Hu(e))return pd(e);var t=[];for(var r in Object(e))gd.call(e,r)&&"constructor"!=r&&t.push(r);return t}function yd(e){return Gu(e)?fd(e):md(e)}var vd=Object.prototype.hasOwnProperty;function bd(e){if(!vu(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=Hu(e),r=[];for(var i in e)("constructor"!=i||!t&&vd.call(e,i))&&r.push(i);return r}function wd(e){return Gu(e)?fd(e,!0):bd(e)}var Sd=Au(Object,"create");var xd=Object.prototype.hasOwnProperty;var _d=Object.prototype.hasOwnProperty;function Fd(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1]);}}function jd(e,t){for(var r=e.length;r--;)if(Nu(e[r][0],t))return r;return -1}Fd.prototype.clear=function(){this.__data__=Sd?Sd(null):{},this.size=0;},Fd.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Fd.prototype.get=function(e){var t=this.__data__;if(Sd){var r=t[e];return "__lodash_hash_undefined__"===r?void 0:r}return xd.call(t,e)?t[e]:void 0},Fd.prototype.has=function(e){var t=this.__data__;return Sd?void 0!==t[e]:_d.call(t,e)},Fd.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Sd&&void 0===t?"__lodash_hash_undefined__":t,this};var Pd=Array.prototype.splice;function Cd(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1]);}}Cd.prototype.clear=function(){this.__data__=[],this.size=0;},Cd.prototype.delete=function(e){var t=this.__data__,r=jd(t,e);return !(r<0)&&(r==t.length-1?t.pop():Pd.call(t,r,1),--this.size,!0)},Cd.prototype.get=function(e){var t=this.__data__,r=jd(t,e);return r<0?void 0:t[r][1]},Cd.prototype.has=function(e){return jd(this.__data__,e)>-1},Cd.prototype.set=function(e,t){var r=this.__data__,i=jd(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this};var Ed=Au(nu,"Map");function kd(e,t){var r,i,a=e.__data__;return ("string"==(i=typeof(r=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==r:null===r)?a["string"==typeof t?"string":"hash"]:a.map}function Id(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1]);}}Id.prototype.clear=function(){this.size=0,this.__data__={hash:new Fd,map:new(Ed||Cd),string:new Fd};},Id.prototype.delete=function(e){var t=kd(this,e).delete(e);return this.size-=t?1:0,t},Id.prototype.get=function(e){return kd(this,e).get(e)},Id.prototype.has=function(e){return kd(this,e).has(e)},Id.prototype.set=function(e,t){var r=kd(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this};function Od(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var i=arguments,a=t?t.apply(this,i):i[0],s=r.cache;if(s.has(a))return s.get(a);var o=e.apply(this,i);return r.cache=s.set(a,o)||s,o};return r.cache=new(Od.Cache||Id),r}function Ad(e,t){for(var r=-1,i=t.length,a=e.length;++r<i;)e[a+r]=t[r];return e}Od.Cache=Id;var Td=hd(Object.getPrototypeOf,Object);function Ld(e){var t=this.__data__=new Cd(e);this.size=t.size;}Ld.prototype.clear=function(){this.__data__=new Cd,this.size=0;},Ld.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Ld.prototype.get=function(e){return this.__data__.get(e)},Ld.prototype.has=function(e){return this.__data__.has(e)},Ld.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Cd){var i=r.__data__;if(!Ed||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new Id(i);}return r.set(e,t),this.size=r.size,this};var Dd="object"==typeof exports&&exports&&!exports.nodeType&&exports,$d=Dd&&"object"==typeof module&&module&&!module.nodeType&&module,Ud=$d&&$d.exports===Dd?nu.Buffer:void 0,Bd=Ud?Ud.allocUnsafe:void 0;function Rd(){return []}var Nd=Object.prototype.propertyIsEnumerable,Md=Object.getOwnPropertySymbols,zd=Md?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,i=null==e?0:e.length,a=0,s=[];++r<i;){var o=e[r];t(o,r,e)&&(s[a++]=o);}return s}(Md(e),(function(t){return Nd.call(e,t)})))}:Rd;var Vd=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Ad(t,zd(e)),e=Td(e);return t}:Rd;function qd(e,t,r){var i=t(e);return yu(e)?i:Ad(i,r(e))}function Gd(e){return qd(e,yd,zd)}function Qd(e){return qd(e,wd,Vd)}var Hd=Au(nu,"DataView"),Kd=Au(nu,"Promise"),Xd=Au(nu,"Set"),Wd="[object Map]",Yd="[object Promise]",Jd="[object Set]",Zd="[object WeakMap]",ef="[object DataView]",tf=Fu(Hd),rf=Fu(Ed),af=Fu(Kd),sf=Fu(Xd),of=Fu(Tu),nf=gu;(Hd&&nf(new Hd(new ArrayBuffer(1)))!=ef||Ed&&nf(new Ed)!=Wd||Kd&&nf(Kd.resolve())!=Yd||Xd&&nf(new Xd)!=Jd||Tu&&nf(new Tu)!=Zd)&&(nf=function(e){var t=gu(e),r="[object Object]"==t?e.constructor:void 0,i=r?Fu(r):"";if(i)switch(i){case tf:return ef;case rf:return Wd;case af:return Yd;case sf:return Jd;case of:return Zd}return t});var lf=nf,cf=Object.prototype.hasOwnProperty;var uf=nu.Uint8Array;function df(e){var t=new e.constructor(e.byteLength);return new uf(t).set(new uf(e)),t}var ff=/\w*$/;var hf=lu?lu.prototype:void 0,pf=hf?hf.valueOf:void 0;function gf(e,t,r){var i,a,s,o=e.constructor;switch(t){case"[object ArrayBuffer]":return df(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return function(e,t){var r=t?df(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var r=t?df(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,r);case"[object Map]":case"[object Set]":return new o;case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return (s=new(a=e).constructor(a.source,ff.exec(a))).lastIndex=a.lastIndex,s;case"[object Symbol]":return i=e,pf?Object(pf.call(i)):{}}}var mf=ld&&ld.isMap,yf=mf?ad(mf):function(e){return mu(e)&&"[object Map]"==lf(e)};var vf=ld&&ld.isSet,bf=vf?ad(vf):function(e){return mu(e)&&"[object Set]"==lf(e)},wf="[object Arguments]",Sf="[object Function]",xf="[object Object]",_f={};function Ff(e,t,r,i,a,s){var o,n=1&t,l=2&t,c=4&t;if(r&&(o=a?r(e,i,a,s):r(e)),void 0!==o)return o;if(!vu(e))return e;var u=yu(e);if(u){if(o=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&cf.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!n)return function(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}(e,o)}else {var d=lf(e),f=d==Sf||"[object GeneratorFunction]"==d;if(rd(e))return function(e,t){if(t)return e.slice();var r=e.length,i=Bd?Bd(r):new e.constructor(r);return e.copy(i),i}(e,n);if(d==xf||d==wf||f&&!a){if(o=l||f?{}:function(e){return "function"!=typeof e.constructor||Hu(e)?{}:Du(Td(e))}(e),!n)return l?function(e,t){return Vu(e,Vd(e),t)}(e,function(e,t){return e&&Vu(t,wd(t),e)}(o,e)):function(e,t){return Vu(e,zd(e),t)}(e,function(e,t){return e&&Vu(t,yd(t),e)}(o,e))}else {if(!_f[d])return a?e:{};o=gf(e,d,n);}}s||(s=new Ld);var h=s.get(e);if(h)return h;s.set(e,o),bf(e)?e.forEach((function(i){o.add(Ff(i,t,r,i,e,s));})):yf(e)&&e.forEach((function(i,a){o.set(a,Ff(i,t,r,a,e,s));}));var p=u?void 0:(c?l?Qd:Gd:l?wd:yd)(e);return function(e,t){for(var r=-1,i=null==e?0:e.length;++r<i&&!1!==t(e[r],r,e););}(p||e,(function(i,a){p&&(i=e[a=i]),zu(o,a,Ff(i,t,r,a,e,s));})),o}_f[wf]=_f["[object Array]"]=_f["[object ArrayBuffer]"]=_f["[object DataView]"]=_f["[object Boolean]"]=_f["[object Date]"]=_f["[object Float32Array]"]=_f["[object Float64Array]"]=_f["[object Int8Array]"]=_f["[object Int16Array]"]=_f["[object Int32Array]"]=_f["[object Map]"]=_f["[object Number]"]=_f[xf]=_f["[object RegExp]"]=_f["[object Set]"]=_f["[object String]"]=_f["[object Symbol]"]=_f["[object Uint8Array]"]=_f["[object Uint8ClampedArray]"]=_f["[object Uint16Array]"]=_f["[object Uint32Array]"]=!0,_f["[object Error]"]=_f[Sf]=_f["[object WeakMap]"]=!1;function jf(e){return Ff(e,5)}function Pf(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Id;++t<r;)this.add(e[t]);}function Cf(e,t){for(var r=-1,i=null==e?0:e.length;++r<i;)if(t(e[r],r,e))return !0;return !1}Pf.prototype.add=Pf.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Pf.prototype.has=function(e){return this.__data__.has(e)};function Ef(e,t,r,i,a,s){var o=1&r,n=e.length,l=t.length;if(n!=l&&!(o&&l>n))return !1;var c=s.get(e),u=s.get(t);if(c&&u)return c==t&&u==e;var d=-1,f=!0,h=2&r?new Pf:void 0;for(s.set(e,t),s.set(t,e);++d<n;){var p=e[d],g=t[d];if(i)var m=o?i(g,p,d,t,e,s):i(p,g,d,e,t,s);if(void 0!==m){if(m)continue;f=!1;break}if(h){if(!Cf(t,(function(e,t){if(o=t,!h.has(o)&&(p===e||a(p,e,r,i,s)))return h.push(t);var o;}))){f=!1;break}}else if(p!==g&&!a(p,g,r,i,s)){f=!1;break}}return s.delete(e),s.delete(t),f}function kf(e){var t=-1,r=Array(e.size);return e.forEach((function(e,i){r[++t]=[i,e];})),r}function If(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e;})),r}var Of=lu?lu.prototype:void 0,Af=Of?Of.valueOf:void 0;var Tf=Object.prototype.hasOwnProperty;var Lf="[object Arguments]",Df="[object Array]",$f="[object Object]",Uf=Object.prototype.hasOwnProperty;function Bf(e,t,r,i,a,s){var o=yu(e),n=yu(t),l=o?Df:lf(e),c=n?Df:lf(t),u=(l=l==Lf?$f:l)==$f,d=(c=c==Lf?$f:c)==$f,f=l==c;if(f&&rd(e)){if(!rd(t))return !1;o=!0,u=!1;}if(f&&!u)return s||(s=new Ld),o||ud(e)?Ef(e,t,r,i,a,s):function(e,t,r,i,a,s,o){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return !1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return !(e.byteLength!=t.byteLength||!s(new uf(e),new uf(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Nu(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var n=kf;case"[object Set]":var l=1&i;if(n||(n=If),e.size!=t.size&&!l)return !1;var c=o.get(e);if(c)return c==t;i|=2,o.set(e,t);var u=Ef(n(e),n(t),i,a,s,o);return o.delete(e),u;case"[object Symbol]":if(Af)return Af.call(e)==Af.call(t)}return !1}(e,t,l,r,i,a,s);if(!(1&r)){var h=u&&Uf.call(e,"__wrapped__"),p=d&&Uf.call(t,"__wrapped__");if(h||p){var g=h?e.value():e,m=p?t.value():t;return s||(s=new Ld),a(g,m,r,i,s)}}return !!f&&(s||(s=new Ld),function(e,t,r,i,a,s){var o=1&r,n=Gd(e),l=n.length;if(l!=Gd(t).length&&!o)return !1;for(var c=l;c--;){var u=n[c];if(!(o?u in t:Tf.call(t,u)))return !1}var d=s.get(e),f=s.get(t);if(d&&f)return d==t&&f==e;var h=!0;s.set(e,t),s.set(t,e);for(var p=o;++c<l;){var g=e[u=n[c]],m=t[u];if(i)var y=o?i(m,g,u,t,e,s):i(g,m,u,e,t,s);if(!(void 0===y?g===m||a(g,m,r,i,s):y)){h=!1;break}p||(p="constructor"==u);}if(h&&!p){var v=e.constructor,b=t.constructor;v==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(h=!1);}return s.delete(e),s.delete(t),h}(e,t,r,i,a,s))}function Rf(e,t,r,i,a){return e===t||(null==e||null==t||!mu(e)&&!mu(t)?e!=e&&t!=t:Bf(e,t,r,i,Rf,a))}var Nf=Object.prototype.hasOwnProperty;function Mf(e){if(null==e)return !0;if(Gu(e)&&(yu(e)||"string"==typeof e||"function"==typeof e.splice||rd(e)||ud(e)||Ju(e)))return !e.length;var t=lf(e);if("[object Map]"==t||"[object Set]"==t)return !e.size;if(Hu(e))return !md(e).length;for(var r in e)if(Nf.call(e,r))return !1;return !0}function zf(e,t){return Rf(e,t)}const Vf=(e,t)=>{const r=t.title?.content.text;void 0!==t.title&&void 0!==e||(t.title=zi({text:"",visible:!0,font:Ni(J),type:J})),void 0!==e&&(t.title.content=e),t.title.content.text=r;},qf=(e,t)=>t.axes?.[e]?.title?.content.text??"",Gf=(e,t,r)=>{const i=r.axes?.[t];void 0!==i?.title?i.title.content.text=e:void 0!==i&&void 0===i?.title&&(i.title=zi({text:e,visible:!0,font:Ni(J)}));},Qf=(e,t)=>t.axes?.[e]?.title?.visible??!1,Hf=(e,t,r)=>{const i=r.axes?.[t];void 0!==i?.title?i.title.visible=e:void 0!==i&&void 0===i?.title&&(i.title=zi({text:qf(t,r),visible:e,font:Ni(J)}));};class Kf extends Zl{getXAxisTitleText(){return qf(0,this._config)}setXAxisTitleText(e){Gf(e,0,this._config),this.emitConfigUpdate("setXAxisTitleText");}getXAxisTitleVisibility(){return Qf(0,this._config)}setXAxisTitleVisibility(e){Hf(e,0,this._config),this.emitConfigUpdate("setXAxisTitleVisibility");}getMaxXBound(){return e=this._config,Xc(e,0,!0);var e;}async setMaxXBound(e){await Zc(this._config,e),this.emitConfigUpdate("setMaxXBound");}getMinXBound(){return e=this._config,Xc(e,0,!1);var e;}async setMinXBound(e){await eu(this._config,e),this.emitConfigUpdate("setMinXBound");}getXAxisTitleSymbol(){return e=this._config,e.axes?.[0]?.title?.content;var e;}setXAxisTitleSymbol(e){var t,r;t=e,r=this._config,void 0!==r.axes?.[0]&&Vf(t,r.axes[0]),this.emitConfigUpdate("setXAxisTitleSymbol");}getAxisLabelsSymbol(){return (e=>{for(const t of e.axes??[])if(void 0!==t?.labels)return t.labels.content})(this._config)}setAxisLabelsSymbol(e){((e,t)=>{for(const r of t.axes??[])if(void 0!==r){const t=r.labels?.content.text;void 0===e?r.labels=zi({text:"",visible:!0,font:Ni(W),type:W}):r.labels.content=jf(e),r.labels.content.text=t;}})(e,this._config),this.emitConfigUpdate("setAxisLabelsSymbol");}getAxisLinesSymbol(){return (e=>{for(const t of e.axes??[])if(void 0!==t?.lineSymbol)return t.lineSymbol})(this._config)}setAxisLinesSymbol(e){((e,t)=>{for(const r of t.axes??[])void 0!==r&&(r.lineSymbol=jf(e)??Vi());})(e,this._config),this.emitConfigUpdate("setAxisLinesSymbol");}}class Xf extends Kf{getYAxisTitleText(){return qf(1,this._config)}setYAxisTitleText(e){Gf(e,1,this._config),this.emitConfigUpdate("setYAxisTitleText");}getYAxisTitleVisibility(){return Qf(1,this._config)}setYAxisTitleVisibility(e){Hf(e,1,this._config),this.emitConfigUpdate("setYAxisTitleVisibility");}getMaxYBound(){return e=this._config,Xc(e,1,!0);var e;}async setMaxYBound(e){await Yc(this._config,e),this.emitConfigUpdate("setMaxYBound");}getMinYBound(){return e=this._config,Xc(e,1,!1);var e;}async setMinYBound(e){await Jc(this._config,e),this.emitConfigUpdate("setMinYBound");}getXAxisValueFormat(){return tu(this._config)}async setXAxisValueFormat(e){await ru(this._config,e),this.emitConfigUpdate("setXAxisValueFormat");}getYAxisValueFormat(){return iu(this._config)}async setYAxisValueFormat(e){await(async(e,t)=>{const r=await Hc(e,1);if(void 0!==r&&void 0!==t){const i={...r,valueFormat:t};Kc(e,i,1);}})(this._config,e),this.emitConfigUpdate("setYAxisValueFormat");}getXLogarithmic(){return e=this._config,e.axes?.[0].isLogarithmic??!1;var e;}async setXLogarithmic(e){await(async(e,t)=>{void 0!==e.axes?.[0]&&(e.axes[0].isLogarithmic=t,await Zc(e,null),await eu(e,null));})(this._config,e),this.emitConfigUpdate("setXLogarithmic");}getYLogarithmic(){return e=this._config,e.axes?.[1]?.isLogarithmic??!1;var e;}async setYLogarithmic(e){await(async(e,t)=>{void 0!==e.axes?.[1]&&(e.axes[1].isLogarithmic=t,await Yc(e,null),await Jc(e,null));})(this._config,e),this.emitConfigUpdate("setYLogarithmic");}getXAxisScrollbar(){return e=this._config,e.axes?.[0]?.scrollbar;var e;}setXAxisScrollbar(e){((e,t)=>{void 0!==e.axes?.[0]&&(e.axes[0].scrollbar=t);})(this._config,e),this.emitConfigUpdate("setXAxisScrollbar");}getYAxisScrollbar(){return e=this._config,e.axes?.[1]?.scrollbar;var e;}setYAxisScrollbar(e){((e,t)=>{void 0!==e.axes?.[1]&&(e.axes[1].scrollbar=t);})(this._config,e),this.emitConfigUpdate("setYAxisScrollbar");}getYAxisTitleSymbol(){return e=this._config,e.axes?.[1]?.title?.content;var e;}setYAxisTitleSymbol(e){((e,t)=>{void 0!==t.axes?.[1]&&Vf(e,t.axes[1]);})(e,this._config),this.emitConfigUpdate("setYAxisTitleSymbol");}getGridLinesSymbol(){return (e=>{for(const t of e.axes??[])if(void 0!==t?.grid)return t.grid})(this._config)}setGridLinesSymbol(e){((e,t)=>{for(const r of t.axes??[])void 0!==r&&(r.grid=jf(e));})(e,this._config),this.emitConfigUpdate("setGridLinesSymbol");}}Rc(Xf,[Kf]);class Wf extends Zl{getRotatedState(){return $s(this._config)}setRotatedState(e){this._config=function(e,t){let r;return void 0!==t&&(r={...t,rotated:e}),r}(e,this._config)??this._config,this.emitConfigUpdate("setRotatedState");}}class Yf extends Zl{getDataLabelsVisibility(){return e=this._config,e.series[0]?.dataLabels?.visible??!1;var e;}setDataLabelsVisibility(e){((e,t)=>{t.series.forEach((t=>{void 0!==t.dataLabels?t.dataLabels.visible=e:t.dataLabels=zi({text:"",visible:e,font:Ni(ee),type:ee});}));})(e,this._config),this.emitConfigUpdate("setDataLabelsVisibility");}getDataLabelsSymbol(){return (e=>{for(const t of e.series)if(void 0!==t.dataLabels)return t.dataLabels.content})(this._config)}setDataLabelsSymbol(e){((e,t)=>{for(const r of t.series)void 0!==r.dataLabels&&void 0!==e||(r.dataLabels=zi({text:"",visible:!0,font:Ni(ee),type:ee})),void 0!==e&&(r.dataLabels.content=jf(e));})(e,this._config),this.emitConfigUpdate("setDataLabelsSymbol");}}const Jf={xAxisAsc:"xAxisAsc",xAxisDesc:"xAxisDesc",yAxisAsc:"yAxisAsc",yAxisDesc:"yAxisDesc",customSort:"customSort"},Zf={xAxisAsc:"xAxisAsc",xAxisDesc:"xAxisDesc",meanAsc:"meanAsc",meanDesc:"meanDesc",medianAsc:"medianAsc",medianDesc:"medianDesc",customSort:"customSort"},eh={labelAsc:"labelAsc",labelDesc:"labelDesc",valueAsc:"valueAsc",valueDesc:"valueDesc",customSort:"customSort"},th={Category:"category",Fields:"fields"},rh={Value:"value",Percentage:"percentage",Both:"both"},ih={TextElements:"textElements",XAxisTitle:"xAxisTitle",YAxisTitle:"yAxisTitle",AxisLabels:"axisLabels",GuideLabels:"guideLabels",Title:"title",LegendText:"legendText",LegendTitle:"legendTitle",Description:"description",DataLabels:"dataLabels",Background:"background",LeaderLines:"leaderLines",AxisLines:"axisLines",GridLines:"gridLines"},ah={AxisLines:"axisLines",GridLines:"gridLines",LeaderLines:"leaderLines"},oh={Background:"background"},nh={X:"x",Y:"y"};function lh(e){return {...e,axis:e.orientation===nh.X?e.config.axes?.[0]:e.config.axes?.[1],index:e.index??0,orientation:e.orientation??nh.Y}}const ch=e=>{const t=function(e,t){const r=null!==e?e.toString():null,i=null!=t?t.toString():null;return null!==i&&i!==r?x:w}(e.start,e.end);!function(e){return e?.type===w}(e.style)||t!==sc?function(e){return e?.type===x}(e.style)&&t===ac&&(e.style={type:ac,color:e.style.color}):e.style={type:sc,color:e.style.color};},uh=e=>{const{config:t,name:r,index:i,orientation:a}=e,s=a===nh.X?t.axes?.[0]:t.axes?.[1];if(void 0!==s){s.guides=s.guides??[];const e={type:cc,name:r,start:s.valueFormat.type===lc?"":0,style:Vi()};void 0!==i&&i<s.guides.length?s.guides.splice(i,0,e):s.guides.push(e);}},dh=e=>{const{config:t,index:r,orientation:i}=e,a=i===nh.X?t.axes?.[0]:t.axes?.[1];void 0!==a?.guides&&(void 0!==r&&r<a.guides.length?a.guides.splice(r,1):a.guides.pop());};class fh extends Zl{getGuideLabelsSymbol(){return (e=>{for(const t of e.axes??[])for(const e of t?.guides??[])if(void 0!==e.label)return e.label})(this._config)}setGuideLabelsSymbol(e){((e,t)=>{for(const r of t.axes??[])for(const t of r?.guides??[]){const r=t.label?.text??"";t.label=jf(e),void 0!==t.label&&(t.label.text=r);}})(e,this._config),this.emitConfigUpdate("setGuideLabels");}getGuideVisibility(e,t){return (e=>{const{axis:t,index:r}=lh(e);return t?.guides?.[r]?.visible??!0})({config:this._config,index:e,orientation:t})}setGuideVisibility(e,t,r){(e=>{const{visible:t,axis:r,index:i}=lh(e);void 0!==r?.guides?.[i]&&(r.guides[i].visible=t);})({visible:e,config:this._config,index:t,orientation:r}),this.emitConfigUpdate("setGuideVisibility");}getGuideStart(e,t){return (e=>{const{axis:t,index:r}=lh(e);return t?.guides?.[r]?.start??null})({config:this._config,index:e,orientation:t})}setGuideStart(e,t,r){(e=>{const{start:t,axis:r,index:i}=lh(e);void 0!==r?.guides?.[i]&&(r.guides[i].start=t,ch(r.guides[i]));})({start:e,config:this._config,index:t,orientation:r}),this.emitConfigUpdate("setGuideStart");}getGuideEnd(e,t){return (e=>{const{axis:t,index:r}=lh(e);return t?.guides?.[r]?.end})({config:this._config,index:e,orientation:t})}setGuideEnd(e,t,r){(e=>{const{end:t,axis:r,index:i}=lh(e);void 0!==r?.guides?.[i]&&(r.guides[i].end=t,ch(r.guides[i]));})({end:e,config:this._config,index:t,orientation:r}),this.emitConfigUpdate("setGuideEnd");}getGuideName(e,t){return (e=>{const{axis:t,index:r}=lh(e);return t?.guides?.[r]?.name})({config:this._config,index:e,orientation:t})}setGuideName(e,t,r){(e=>{const{name:t,axis:r,index:i}=lh(e);void 0!==r?.guides?.[i]&&(r.guides[i].name=t);})({name:e,config:this._config,index:t,orientation:r}),this.emitConfigUpdate("setGuideName");}getGuideLabelText(e,t){return (e=>{const{axis:t,index:r}=lh(e);return t?.guides?.[r]?.label?.text})({config:this._config,index:e,orientation:t})}setGuideLabelText(e,t,r){(e=>{const{labelText:t,axis:r,index:i}=lh(e),a=r?.guides?.[i]?.label??Mi(t,Ni(Y),Y);void 0!==r?.guides?.[i]&&(r.guides[i].label={...a,text:t});})({labelText:e,config:this._config,index:t,orientation:r}),this.emitConfigUpdate("setGuideLabelText");}getGuideAbove(e,t){return (e=>{const{axis:t,index:r}=lh(e);return t?.guides?.[r]?.above??!1})({config:this._config,index:e,orientation:t})}setGuideAbove(e,t,r){(e=>{const{above:t,axis:r,index:i}=lh(e);void 0!==r?.guides?.[i]&&(r.guides[i].above=t);})({above:e,config:this._config,index:t,orientation:r}),this.emitConfigUpdate("setGuideAbove");}getGuideStyle(e,t){return (e=>{const{axis:t,index:r}=lh(e);return t?.guides?.[r]?.style})({config:this._config,index:e,orientation:t})}setGuideStyle(e,t,r){(e=>{const{style:t,axis:r,index:i}=lh(e);void 0!==r?.guides?.[i]&&(r.guides[i].style=t);})({style:e,config:this._config,index:t,orientation:r}),this.emitConfigUpdate("setGuideStyle");}}class hh extends fh{getXGuidesLength(){return this._config.axes?.[0]?.guides?.length}addXAxisGuide(e,t){uh({config:this._config,name:e,index:t,orientation:nh.X}),this.emitConfigUpdate("addXAxisGuide");}deleteXAxisGuide(e){dh({config:this._config,index:e,orientation:nh.X}),this.emitConfigUpdate("deleteXAxisGuide");}}Rc(hh,[fh]);class ph extends fh{getYGuidesLength(){return this._config.axes?.[1]?.guides?.length}addYAxisGuide(e,t){uh({config:this._config,name:e,index:t,orientation:nh.Y}),this.emitConfigUpdate("addYAxisGuide");}deleteYAxisGuide(e){dh({config:this._config,index:e,orientation:nh.Y}),this.emitConfigUpdate("deleteYAxisGuide");}}Rc(ph,[fh]);const gh=e=>"timeIntervalSize"in e.series[0]?e.series[0].timeIntervalSize:void 0,mh=e=>"timeIntervalUnits"in e.series[0]?e.series[0].timeIntervalUnits:void 0,yh=e=>"timeAggregationType"in e.series[0]?e.series[0].timeAggregationType:void 0,vh=e=>"trimIncompleteTimeInterval"in e.series[0]?e.series[0].trimIncompleteTimeInterval:void 0,bh=e=>"nullPolicy"in e.series[0]?e.series[0].nullPolicy:void 0,wh=(e,t)=>{t?.series?.forEach((t=>{t.type!==pc&&t.type!==hc||(t.timeIntervalSize=e);})),Jc(t,null),Yc(t,null);},Sh=(e,t)=>{t?.series?.forEach((t=>{t.type!==pc&&t.type!==hc||(t.nullPolicy=e);})),Jc(t,null),Yc(t,null);};class xh extends Zl{getTimeIntervalSize(){return gh(this._config)}setTimeIntervalSize(e){wh(e,this._config),this.emitConfigUpdate("setTimeIntervalSize");}getTimeIntervalUnits(){return mh(this._config)}setTimeIntervalUnits(e){((e,t)=>{t.series?.forEach((t=>{t.type!==pc&&t.type!==hc||(t.timeIntervalUnits=e);})),Jc(t,null),Yc(t,null);})(e,this._config),this.emitConfigUpdate("setTimeIntervalUnits");}getTimeAggregationType(){return yh(this._config)}setTimeAggregationType(e){((e,t)=>{t.series?.forEach((t=>{t.type!==pc&&t.type!==hc||(t.timeAggregationType=e);})),Jc(t,null),Yc(t,null);})(e,this._config),this.emitConfigUpdate("setTimeAggregationType");}getTrimIncompleteTimeInterval(){return vh(this._config)}setTrimIncompleteTimeInterval(e){((e,t)=>{t.series?.forEach((t=>{t.type!==pc&&t.type!==hc||(t.trimIncompleteTimeInterval=e);})),Jc(t,null),Yc(t,null);})(e,this._config),this.emitConfigUpdate("setTrimIncompleteTimeInterval");}getNullPolicy(){return bh(this._config)}setNullPolicy(e){Sh(e,this._config),this.emitConfigUpdate("setNullPolicy");}resetTimeInterval(){var e;e=this._config,wh(0,e),this.emitConfigUpdate("resetTimeInterval");}}const _h=e=>{const t=Ds(e.series);let r=!1;return t!==pc&&t!==hc||(r=(e=>{let t=Jf.xAxisAsc;const r=e.orderOptions?.data?.orderType??Ic,i=e.orderOptions?.data?.orderBy??xc;return t=r===Ic&&Array.isArray(i)?Jf.customSort:r===Ic?i===xc?Jf.xAxisAsc:Jf.xAxisDesc:i===xc?Jf.yAxisAsc:Jf.yAxisDesc,t})(e)===Jf.customSort),r},Fh=e=>{let t=[];const r=e.orderOptions?.data?.orderType;return _h(e)&&r===Ic&&(t=e.orderOptions?.data?.orderBy),t},jh=(e,t,r)=>{let i=Ic,a=xc;const s=Ds(t.series);t.orderOptions??={},e===Jf.customSort&&void 0!==r?(a=[...r],t.orderOptions.data={orderType:i,orderBy:a}):s!==pc&&s!==hc||(i=e===Jf.xAxisAsc||e===Jf.xAxisDesc?Ic:Cc,a=e===Jf.xAxisAsc||e===Jf.yAxisAsc?xc:_c,t.orderOptions.data={orderType:i,orderBy:a});},Ph=e=>e?.series?.[0]?.x??"";async function Ch(e){const{seriesIndex:t,config:r,layerInfo:i}=e,{objectIdField:a}=i??{};let s;const o=r.series[t??0];let n=!1;if(void 0===o){n=r.series.slice(0,t).every((e=>jl(e)));}else n=jl(o);s=n?await sa({seriesIndex:t,objectIDField:a}):await na({seriesIndex:t,objectIDField:a});const l=Ph(r),c=r.series[0]?.dataLabels?.visible??!1,u={...s,x:l,y:"",dataLabels:{...s?.dataLabels,visible:c},rotated:$s(r)},d=Ih(r);if(u.query={groupByFieldsForStatistics:[l]},d!==ic&&void 0!==a){const e=`${d}_${a}_0`.toUpperCase();u.y=e,u.query.outStatistics=[{statisticType:d,onStatisticField:a,outStatisticFieldName:e}];}if(jl(u)){let e;void 0!==r?.series?.[0]&&(e=Xs(r.series)),e!==bs&&e!==Fs&&(u.timeIntervalSize=gh(r),u.timeIntervalUnits=mh(r),u.timeAggregationType=yh(r),u.trimIncompleteTimeInterval=vh(r),u.nullPolicy=bh(r));}return jf(u)}async function Eh(e,t){const{layerFieldsInfo:r,objectIdField:i}=t,a=Ph(e),s=Xs(e.series),o=Ah(e),n=Ih(e),l=Oh(e),c=0===o.length||o.includes(i),u=await ga(n),d=c?"":o.map((e=>Bs(r??[],e))).join(", "),f=Bs(r??[],a),h=Bs(r??[],l),p=e.series.some((e=>Pl(e))),g=p?"category":"xAxisField",m=f;let y="";const v=await qc();if(s===xs)y=Si(v.titleLabels.aggrTypeOfAggrFields,{aggregationType:u,aggregationFields:d});else if(n===ic){const e=c?i:d;if(""===l){const t=p?"aggrTypeCategory":"aggrTypeXAxisField";y=Si(v.titleLabels[t],{aggregationType:e,[g]:m});}else {const t=p?"aggrTypeCategoryBySplitBy":"aggrTypeXAxisFieldBySplitBy";y=Si(v.titleLabels[t],{aggregationType:e,[g]:m,splitByField:h});}}else if(n===tc)if(""===l){const e=p?"aggrTypeCategory":"aggrTypeXAxisField";y=Si(v.titleLabels[e],{aggregationType:u,[g]:m});}else {const e=p?"aggrTypeCategoryBySplitBy":"aggrTypeXAxisFieldBySplitBy";y=Si(v.titleLabels[e],{aggregationType:u,[g]:m,splitByField:h});}else if(""!==l){const e=p?"aggrTypeOfAggrFieldByCategoryBySplitByField":"aggrTypeOfAggrFieldByXAxisFieldBySplitByField";y=Si(v.titleLabels[e],{aggregationType:u,aggregationField:d,[g]:m,splitByField:h});}else if(o.length>0){const e=p?"aggrTypeOfAggrFieldsByCategory":"aggrTypeOfAggrFieldsByXAxisField";y=Si(v.titleLabels[e],{aggregationType:u,aggregationFields:d,[g]:m});}return y}const kh=e=>Hs({where:e.query?.where,normalize:!1,escape:!1})??"",Ih=e=>e?.series?.[0]?.query?.outStatistics?.[0]?.statisticType??ic,Oh=Od((e=>{const t=e?.series?.[0]?.query?.where?.split("=")[0].trim()??"";return Ks(e?.series?.[0]?.query?.where)?"":t}),(e=>e?.series?.[0]?.query?.where)),Ah=Od((e=>{let t=[];if(""===Oh(e))t=e?.series.map((e=>{const t=e.query?.outStatistics?.map((e=>e.onStatisticField))??[];return t?.length>0?t:e.y})).flat()??[];else {const r=e?.series?.[0],i=r?.query?.outStatistics?.[0]?.onStatisticField??[r?.y].flat()[0];t=void 0!==i?[i]:[];}return [...new Set(t.filter((e=>""!==e)))]}),(e=>e?.series)),Th=async(e,t,r)=>{const{objectIdField:i}=r;let a=Ih(t);0===e.length?(e.push(i),a=tc):a===tc&&e.length>=1&&!e.includes(i)&&(a=rc);const s=Oh(t);await Uh({splitByField:s,numericFields:e,aggregationType:a,config:t,layerInfo:r});Gc(t,1,await Qc({config:t,layerInfo:r,numericFields:Ah(t),aggregationType:Ih(t)})),t.title&&(t.title.content.text=await Eh(t,r)),await Jc(t,null),await Yc(t,null),Lh(t,r);};function Lh(e,t){let r=!1;const i=Ih(e),a=Ah(e);i===tc?r=!0:i===ic&&(r=a.every((e=>{const r=t.layerFieldsInfo.find((t=>t.name===e));return void 0!==r&&yl(r)}))),au(e,1,r);if(e.series.some((e=>jl(e)))){const r=Ph(e),i=t.layerFieldsInfo.find((e=>e.name===r)),a=void 0!==i&&yl(i);au(e,0,a);}}const Dh=e=>{let t=Jf.xAxisAsc;const r=e.orderOptions?.data?.orderType??Ic,i=e.orderOptions?.data?.orderBy??xc;return t=r===Ic&&Array.isArray(i)?Jf.customSort:r===Ic?i===xc?Jf.xAxisAsc:Jf.xAxisDesc:i===xc?Jf.yAxisAsc:Jf.yAxisDesc,t};async function $h(e){const{numericFields:t,aggregationType:r,config:i,layerInfo:a}=e,{layerFieldsInfo:s,objectIdField:o}=a,n=[];let l=!1;const c=t.map(((e,t)=>`${r}_${e}_${t}`.toUpperCase()));for(let e=0;e<t.length;e+=1){const u=await Ch({config:i,layerInfo:a,seriesIndex:e}),d=c[e].toUpperCase(),f=t[e];let h={...u,query:{...u.query}};f!==o&&(h={...h,id:f,name:Bs(s,f)});let p=f;void 0!==h.query&&(r!==ic?(p=d,h.query.outStatistics=[{...u.query?.outStatistics?.[0]??{},onStatisticField:f,outStatisticFieldName:d,statisticType:r}]):delete h.query.outStatistics),h.y=p;const g=i.series.find((e=>e.query?.outStatistics?.[0]?.onStatisticField===f&&void 0===e.query.where));if(void 0!==g&&"string"==typeof g.y&&""!==g.y.trim()){i.colorMatch||(Pl(h)&&Pl(g)?h.fillSymbol=g.fillSymbol:jl(h)&&jl(g)&&(h.lineSymbol=g.lineSymbol,h.markerSymbol=g.markerSymbol),l=!0);const t=await Ch({config:i,layerInfo:a,seriesIndex:e});h.id=g.id,g.id!==t.id&&g.name!==t.name&&(h.id=g.id,h.name=g.name);}n.push(h);}return 1!==i.series.length||1!==n.length||i.colorMatch||(Pl(i.series[0])&&Pl(n[0])?n[0].fillSymbol=i.series[0].fillSymbol:jl(i.series[0])&&jl(n[0])&&(n[0].lineSymbol=i.series[0].lineSymbol,n[0].markerSymbol=i.series[0].markerSymbol),l=!0),i.colorMatch=!l,n}const Uh=async e=>{const{splitByField:t,numericFields:r,aggregationType:i,config:a,layerInfo:s}=e,{x:o}=a.series[0],n=Dh(a),l=Xs(a.series);""===t||r.length>1?o===Tc||void 0===o||""===o.trim()||l===xs?a.series=await async function(e){const{numericFields:t,aggregationType:r,config:i,layerInfo:a}=e;let s=!1;const o=await Ch({config:i,layerInfo:a,seriesIndex:0}),n=await qc(),l={...o,id:`series_${Date.now()}`,name:n.axisLabels.values,x:Tc,y:"arcgis_charts_bar_line_from_fields_value"},c=[];for(const e of t)c.push({onStatisticField:e,outStatisticFieldName:`${e}_0`.toUpperCase(),statisticType:r});l.query={outStatistics:c};const u=i.series[0];return void 0!==u&&(l.id=u.id,i.colorMatch||(Pl(u)&&Pl(l)?l.fillSymbol=u.fillSymbol:jl(l)&&jl(u)&&(l.lineSymbol=u.lineSymbol,l.markerSymbol=u.markerSymbol),s=!0),l.id=u.id,u.name!==o.name&&(l.name=u.name)),1!==i.series.length||i.colorMatch||(Pl(l)?l.fillSymbol=i.series[0].fillSymbol:jl(l)&&(l.lineSymbol=i.series[0].lineSymbol,l.markerSymbol=i.series[0].markerSymbol),s=!0),i.colorMatch=!s,[l]}({config:a,layerInfo:s,numericFields:r,aggregationType:i}):a.series=await $h({config:a,layerInfo:s,numericFields:r,aggregationType:i}):a.series=await async function(e){const{splitByField:t,numericFields:r,aggregationType:i,config:a,layerInfo:s}=e,{layer:o,layerFieldsInfo:n}=s,{fetchNullValues:l}=a?.series?.[0]?.query??{},c=Ph(a),u=c!==Tc?c:void 0,{categoriesArray:d,fieldName:f,splitByFieldType:h,numericalField:p}=await $c({config:a,layer:o,layerFieldsInfo:n,xAxisField:u,aggregationFields:r,aggregationType:i,splitByField:t,fetchNullValues:l});let g=[],m=!1;if(0===d.length){g=await $h({numericFields:r,aggregationType:i,config:a,layerInfo:s});for(const e of g)e.query&&(e.query.where=`${t}=''`);}else for(let e=0;e<d.length;e+=1){const r=d[e],o=`${f}_${e}`.toUpperCase(),n=await Ch({config:a,layerInfo:s,seriesIndex:e}),l=`${r}`,c={...n,id:l,name:l,y:o,query:{...n.query,where:`${t}=${h===ec&&null!==r?`'${r}'`:r}`,outStatistics:i!==ic?[{...n.query?.outStatistics?.[0]??{},onStatisticField:p,outStatisticFieldName:o,statisticType:i}]:void 0}};i===ic&&(void 0!==c.query&&(delete c.query.outStatistics,delete c.query.groupByFieldsForStatistics),c.y=p);const u=a.series.find((e=>String(kh(e)).trim().replace(/'/gu,"")===l));void 0!==u&&(a.colorMatch||(Pl(c)&&Pl(u)?c.fillSymbol=u.fillSymbol:jl(c)&&jl(u)&&(c.lineSymbol=u.lineSymbol,c.markerSymbol=u.markerSymbol),m=!0),c.id=u.id,c.name=u.name),g.push(c);}return a.colorMatch=!m,g}({config:a,layerInfo:s,splitByField:t,numericFields:r,aggregationType:i});const c=Fh(a);jh(n,a,c);},Bh=async(e,t,r)=>{const i=e.series?.[t],a=Oh(e);let s;const o=await qc();if(Xs(e.series)===xs)s=o.axisLabels.values;else if(Mf(a)){const e=i.query?.outStatistics?.[0]?.onStatisticField;void 0!==e&&e!==r.objectIdField&&(s=Bs(r.layerFieldsInfo,e));}else s=String(kh(i)).trim().replace(/'/gu,"");return s??i.id},Rh=(e,t)=>{t.orderOptions??={};const r=t.orderOptions?.data?.orderType;Dh(t)===Jf.customSort&&r===Ic&&(t.orderOptions.data={orderType:Ic,orderBy:[...e]});},Nh=async(e,t)=>{const r=Ph(e),i=tu(e)?.type,a=Ah(e),s=Xs(e.series);let o=[];return i===nc&&(s===xs||r===Tc?o=a.map((e=>Bs(t?.layerFieldsInfo,e))):""!==r.trim()&&r!==Tc&&void 0!==t&&(o=await Nc({layerInfo:t,config:e,category:r}))),o},Mh=(e,t,r)=>{r.series?.[t]&&(r.series[t].name=e);},zh=(e,t,r)=>{const i=r.series?.[t];i&&(Pl(i)?i.fillSymbol={...oa(t),...i.fillSymbol,color:e}:jl(i)&&(i.lineSymbol={...Zi(t),...i.lineSymbol,color:e}));},Vh=async e=>{const{newStackedType:t,config:r,layerInfo:i}=e;if(r.stackedType=t,void 0!==i){Gc(r,1,await Qc({config:r,layerInfo:i,numericFields:Ah(r),aggregationType:Ih(r)}));}r.axes?.[1]&&(r.axes[1].valueFormat=t===Sc?{type:C,intlOptions:{style:"percent",minimumFractionDigits:0,maximumFractionDigits:0}}:qi()),await Jc(r,null),await Yc(r,null);};class qh extends Zl{getXAxisField(){return Ph(this._config)}async setXAxisField(e){const t=""===e.trim();t||await(async(e,t,r)=>{const{layerFieldsInfo:i}=r??{},a=t?.series?.length??0,s=Ph(t);let o;const n=t.series.some((e=>Pl(e))),l=Cl(t.series);if(void 0!==i){const r=vl(i);!r.includes(s)&&r.includes(e)?o={type:"date",intlOptions:{}}:r.includes(s)&&!r.includes(e)&&(o=n?{type:"category",characterLimit:11}:qi());const a=i.find((t=>t.name===e));a?.type===ec&&(o={type:"category",characterLimit:11}),void 0!==o&&await ru(t,o);}if(0===a&&(t.series=[await Ch({config:t,layerInfo:r})]),t.series.forEach((t=>{t.x=e,void 0!==t.query&&(t.query.groupByFieldsForStatistics=[e]);})),Gc(t,0,Bs(i,e)),void 0!==r){Gc(t,1,await Qc({config:t,layerInfo:r,numericFields:Ah(t),aggregationType:Ih(t)})),t.title&&(t.title.content.text=await Eh(t,r)),Lh(t,r);const e=Ah(t);await Th(e,t,r);}await Jc(t,null),await Yc(t,null),l&&(await eu(t,null),await Zc(t,null),wh(0,t),Sh(o?.type===lc?Fc:jc,t));})(e,this._config,this.layerInfo);const r=Ah(this._config),i=Xs(this._config.series)===xs,a=r.includes(this.layerInfo?.objectIdField??"");if(t||i&&a){await this.resetConfig();const e=1===r.length&&r[0]===this.layerInfo?.objectIdField;this.layerInfo&&r.length>0&&!e&&await Th(r,this._config,this.layerInfo);}this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setXAxisField");}getAggregationType(){return Ih(this._config)}async setAggregationType(e){this.layerInfo&&(await(async(e,t,r)=>{const i=Ah(t),a=Oh(t);await Uh({splitByField:a,numericFields:i,aggregationType:e,config:t,layerInfo:r}),Gc(t,1,await Qc({config:t,layerInfo:r,numericFields:Ah(t),aggregationType:Ih(t)})),t.title&&(t.title.content.text=await Eh(t,r)),await Jc(t,null),await Yc(t,null),Lh(t,r);})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setAggregationType"));}getSplitByField(){return Oh(this._config)}async setSplitByField(e){this.layerInfo?.layerFieldsInfo&&Uc(this.layerInfo?.layerFieldsInfo,e)&&(await(async(e,t,r)=>{const i=Ah(t),a=Ih(t);await Uh({splitByField:e,numericFields:i,aggregationType:a,config:t,layerInfo:r}),Gc(t,1,await Qc({config:t,layerInfo:r,numericFields:Ah(t),aggregationType:Ih(t)})),t.title&&(t.title.content.text=await Eh(t,r)),await Jc(t,null),await Yc(t,null);})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setSplitByField"));}getNumericFields(){return Ah(this._config)}async setNumericFields(e){"string"==typeof e&&(e=[e]);if(Bc(this.layerInfo?.layerFieldsInfo??[],e)&&this.layerInfo){await Th(e,this._config,this.layerInfo);const t=Ah(this._config);Xs(this._config.series)===xs&&t.some((e=>e===this.layerInfo?.objectIdField))&&await this.resetConfig(),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setNumericFields");}}getDataFilter(){return this._config.dataFilters}async setDataFilter(e){var t,r;t=e,r=this._config,void 0!==t?r.dataFilters=t:delete r.dataFilters;const i=Dh(this._config);if(i===Jf.customSort){const e=await Nh(this._config,this.layerInfo);jh(i,this._config,e);}this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setDataFilter");}async getCustomSortValues(){return await Nh(this._config,this.layerInfo)}getSortOrder(){return Dh(this._config)}setSortOrder(e,t){jh(e,this._config,t),this.emitConfigUpdate("setSortOrder");}getOrderByList(){return Fh(this._config)}setOrderByList(e){!_l(this._config)&&(Rh(e,this._config),this.emitConfigUpdate("setOrderByList"));}async updateSeriesFromLayerFilter(){void 0!==this.layerInfo&&(await Uh({splitByField:this.getSplitByField(),numericFields:this.getNumericFields(),aggregationType:this.getAggregationType(),config:this._config,layerInfo:this.layerInfo}),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("updateSeriesFromLayerFilter"));}getSeriesName(e){return ((e,t)=>t.series?.[e]?.name)(e,this._config)}setSeriesName(e,t){Mh(e,t,this._config),this.emitConfigUpdate("setSeriesName");}getSeriesColor(e){return ((e,t)=>{const r=t.series?.[e];let i;return Pl(r)?i=r.fillSymbol?.color:jl(r)&&(i=r.lineSymbol?.color),i})(e,this._config)}setSeriesColor(e,t){zh(e,t,this._config),this.emitConfigUpdate("setSeriesColor");}getOrderOfSeries(){return this._config.series.map((e=>e.id))}setOrderOfSeries(e){var t,r;t=e,r=this._config,r.series?.sort(((e,r)=>t.findIndex((t=>e.id===t))-t.findIndex((e=>r.id===e)))),this.emitConfigUpdate("setOrderOfSeries");}getStackedType(){return this._config.stackedType??wc}async setStackedType(e){await Vh({newStackedType:e,config:this._config,layerInfo:this.layerInfo}),this.emitConfigUpdate("setStackedType");}moveSeries(e,t){const r=this.getOrderOfSeries(),[i]=r.splice(e,1);r.splice(t,0,i),this.setOrderOfSeries(r),this.emitConfigUpdate("moveSeries");}moveCustomSortValuesInOrderByList(e,t){const r=Fh(this._config),[i]=r.splice(e,1);r.splice(t,0,i),Rh(r,this._config),this.emitConfigUpdate("moveCustomSortValuesInOrderByList");}async resetConfig(){const e=this._config.id;this._config=await this.generateDefaultConfig(),this._config.id=e,this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("resetConfig");}}class Gh extends qh{constructor(){super(...arguments),this._chartType=pc;}async setup(e){await this.loadConfigFromLayer(e),void 0!==e.config&&await this.updateSeriesFromLayerFilter(),this.resolveSetup();}async generateDefaultConfig(){const e=await fa();return e.series=[await na({objectIDField:this.layerInfo?.objectIdField})],e}getSeriesHideOversizedStackedLabels(e){return Lc(e,this._config)}setSeriesHideOversizedStackedLabels(e,t){Dc(e,t,this._config),this.emitConfigUpdate("setSeriesHideOversizedStackedLabels");}async resetSeriesStyling(){const e=this.getSeriesLength();for(let t=0;t<e;t+=1){const e=this.getSeriesId(t),r=Ui({colorIndex:t,opacity:ki});if(zh(r,t,this._config),void 0!==this.layerInfo){const r=await Bh(this._config,t,this.layerInfo);r!==this.layerInfo.objectIdField&&Mh(r??e,t,this._config);}}this._config.colorMatch=!0,this.emitConfigUpdate("resetSeriesStyling");}async resetAvailable(){const e=!this.getColorMatch();let t=!1;if(!e&&void 0!==this.layerInfo){const e=this.getSeriesLength();for(let r=0;r<e;r+=1){const e=await Bh(this._config,r,this.layerInfo),i=this.getSeriesName(r);if(void 0!==e&&e!==this.layerInfo.objectIdField&&e!==i){t=!0;break}}}return e||t}}Rc(Gh,[Xf,Vc,Mc,Wf,Yf,hh,ph,xh]);const Qh=(e,t,r)=>{const i=r;void 0!==i?.series?.[t]&&(i.series[t].name=e);},Hh=e=>{const t=e.series[0];return !0===e.showMean&&Fl(t)?t.fillSymbol?.color:void 0},Kh=(e,t)=>{const r=t.series[0];!0===t.showMean&&Fl(r)&&(void 0!==r.fillSymbol?r.fillSymbol.color=e:r.fillSymbol={...Yi(),color:e});},Xh=(e,t,r)=>{const i=r,a=i?.series?.[t];a?.type===mc&&void 0!==a.fillSymbol?a.fillSymbol.color=e:a?.type===hc&&void 0!==a.lineSymbol&&(a.lineSymbol.color=e,void 0!==a.markerSymbol&&(a.markerSymbol.color=e));},Wh=e=>e.series.map((e=>e.id)),Yh=(e,t)=>{t?.series?.sort(((t,r)=>e.findIndex((e=>t.id===e))-e.findIndex((e=>r.id===e))));},Jh=e=>Gs(e)?.x??Li,Zh=Od((e=>{const t=Gs(e),r=t?.query?.where?.split("=")[0].trim()??"";return Ks(t?.query?.where)?"":r}),(e=>Gs(e)?.query?.where)),ep=Od((e=>function(e,t){let r=[];const i=t??function(e){return e.map((e=>e.id)).filter((e=>"undefined"!==e))}(e),a=Xs(e);return r=e.filter((e=>i.includes(e.id))).map((e=>{let t="y"in e?e.y:void 0;return void 0!==t&&a===Fs&&(t=`${t.toString()}_${Hs({where:e.query?.where})}`),t})).filter((e=>void 0!==e)),Array.from(new Set(r.flat()))}(e?.series).filter((e=>""!==e))),(e=>e?.series)),tp=async e=>{const{category:t,seriesIndex:r,y:i}=e;return jf({...await la(r),x:void 0===t||""===t?Li:t,y:i,query:{}})},rp=async e=>{const{category:t,seriesIndex:r,y:i}=e;return jf({...await sa({seriesIndex:r}),x:void 0===t||""===t?Li:t,y:i,query:{}})};async function ip(e){const{x:t,y:r,seriesTemplate:i}=e,{id:a,fillSymbol:s}=i??{},o=await la(),n=a??`series_${Date.now()}`;return o.id=n,o.name=n,o.x=t,o.y=[...r],s?o.fillSymbol=s:o.fillSymbol&&(o.fillSymbol.color=ma,o.fillSymbol?.outline&&(o.fillSymbol.outline.color=ma)),o}async function ap(e){const{numericFields:t,config:r,layerInfo:i,category:a}=e,{layerFieldsInfo:s}=i,o=[],n=a??Jh(r);let l=!1;if(0===t.length){const e=await tp({y:"",seriesIndex:0,category:n});o.push(e);}else if(n===Li){const e=await qc(),a=t.length>1?t:t[0],s=await tp({y:a,seriesIndex:0,category:n}),c=t.length>1?e.axisLabels.values:Bs(i.layerFieldsInfo,t[0]),u={...s,id:t[0],name:c,x:n},d=r.series.find((e=>zf(a,e.y)&&void 0===e.query?.where));void 0!==d&&(!r.colorMatch&&"fillSymbol"in d&&(u.fillSymbol=d.fillSymbol,l=!0),u.id=d.id,u.name=d.name),o.push(u);}else for(let e=0;e<t.length;e+=1){const i=t[e],a=await tp({y:i,seriesIndex:e,category:n}),c=Bs(s,i),u={...a,id:i,name:c,x:n},d=r.series.find((e=>i===e.y));void 0!==d&&(!r.colorMatch&&"fillSymbol"in d&&(u.fillSymbol=d.fillSymbol,l=!0),u.id=d.id,u.name=d.name),o.push(u);}return 1===r.series.length&&1===o.length&&!r.colorMatch&&"fillSymbol"in r.series[0]&&(o[0].fillSymbol=r.series[0].fillSymbol,l=!0),r.colorMatch=!l,o}const sp=e=>e?.query?.where?.split("=")[1].trim().replace(/'/gu,"")??"";function op(e){const{formerSeries:t,newSeries:r,showMean:i}=e;let a=r;const s=e=>e.type===(i?hc:mc),o=t.filter(s).map((e=>e.id)),n=r.filter(s).map((e=>e.id));return o.length===n.length&&JSON.stringify(o)!==JSON.stringify(n)&&(a=a.sort(((e,t)=>o.findIndex((t=>t===e.id))-o.findIndex((e=>e===t.id))))),a}async function np(e){const{config:t,layerInfo:r,splitByField:i,numericFields:a,category:s}=e,{layer:o,layerFieldsInfo:n}=r,{fetchNullValues:l}=Gs(t)?.query??{},c=s??Jh(t),{categoriesArray:u,splitByFieldType:d}=await $c({config:t,layer:o,layerFieldsInfo:n,xAxisField:c!==Li?c:void 0,aggregationFields:a,splitByField:i,fetchNullValues:l});let f=[],h=!1;const p=(e=>e.series.some((e=>e.type===hc))&&e.series.some((e=>e.type===mc)))(t);if(0===u.length){f=await ap({numericFields:a,category:c,config:t,layerInfo:r});for(const e of f)e.query&&(e.query.where=`${i}=''`);}else for(let e=0;e<u.length;e+=1){const r=u[e],s={y:a,seriesIndex:e,category:c},o=p?await rp(s):await tp(s),n=`${r}`,l={...o,id:n,name:n,x:void 0===c||""===c?Li:c,query:{...o.query,where:`${i}=${d===ec&&null!==r?`'${r}'`:r}`}},g=t.series.find((e=>sp(e)===n));void 0!==g&&(t.colorMatch||(l.type===mc?Fl(g)?l.fillSymbol=g.fillSymbol:l.fillSymbol={...Yi(),color:g.lineSymbol?.color}:Fl(g)?(l.lineSymbol={...Vi({width:2}),...void 0!==g.fillSymbol?{color:g.fillSymbol.color}:{}},l.markerSymbol={...Ji(),...void 0!==g.fillSymbol?{color:g.fillSymbol.color}:{}}):(l.lineSymbol=g.lineSymbol,l.markerSymbol=g.markerSymbol),h=!0),l.id=g.id,l.name=g.name),f.push(l);}if(f=op({formerSeries:t.series,newSeries:f,showMean:gp(t)}),t.colorMatch=!h,gp(t)){const e=t.series.find((e=>e.type===mc)),r=await ip({x:c,y:a,seriesTemplate:e});f.unshift(r);}return f}const lp=async e=>{const{splitByField:t,numericFields:r,category:i,config:a,layerInfo:s}=e,o=!(r.length>1&&i!==Li)&&""!==t;mp(!!o&&a.showMean,a),a.series=o?await np({config:a,layerInfo:s,splitByField:t,numericFields:r,category:i}):await ap({numericFields:r,config:a,layerInfo:s,category:i});},cp=e=>e?.standardizeValues??!1;async function up(e,t){const{layerFieldsInfo:r}=t,i=cp(e),a=await qc();let s=i?a.axisLabels.standardizedValues:a.axisLabels.values,o=e?.series?.map((e=>e.y)).flat();return o=[...new Set(o)],1===o.length&&(s=Bs(r,o[0])),s}async function dp(e,t){const{layerFieldsInfo:r}=t,i=Jh(e),a=ep(e),s=Zh(e),o=a.map((e=>Bs(r??[],e))).join(", "),n=Bs(r??[],i);let l="";const c=await qc();return a.length>0&&(l=i!==Li&&""!==s?Si(c.titleLabels.distributionOfFieldsByCategoryAndSplitBy,{valueFields:o,category:n,splitByField:s}):i!==Li?Si(c.titleLabels.distributionOfFieldsByCategory,{valueFields:o,category:n}):""!==s?Si(c.titleLabels.distributionOfFieldsByCategory,{valueFields:o,category:s}):Si(c.titleLabels.distributionOfField,{valueField:o})),l}const fp=(e,t,r,i)=>{let a="string"==typeof e.y?Bs(r.layerFieldsInfo,e.y):i.axisLabels.values;return Mf(t)||(a=sp(e)),a??e.id},hp=e=>{let t=Zf.xAxisAsc;const r=e.orderOptions?.data?.orderType??Ic,i=e.orderOptions?.data?.orderBy??xc;switch(r){case Ic:t=Array.isArray(i)?Zf.customSort:i===xc?Zf.xAxisAsc:Zf.xAxisDesc;break;case Ec:t=i===xc?Zf.meanAsc:Zf.meanDesc;break;case kc:t=i===xc?Zf.medianAsc:Zf.medianDesc;}return t},pp=(e,t,r)=>{let i=Ic,a=xc;if(t.orderOptions=t.orderOptions??{},e===Zf.customSort&&void 0!==r)t.orderOptions.data={orderType:Ic,orderBy:r};else {switch(e){case Zf.xAxisAsc:i=Ic,a=xc;break;case Zf.xAxisDesc:i=Ic,a=_c;break;case Zf.meanAsc:i=Ec,a=xc;break;case Zf.meanDesc:i=Ec,a=_c;break;case Zf.medianAsc:i=kc,a=xc;break;case Zf.medianDesc:i=kc,a=_c;}t.orderOptions.data={orderType:i,orderBy:a};}},gp=e=>e.showMean??!1,mp=async(e=!1,t,r)=>{const i=e?r:Hh(t),a=(e??!1)!==(t.showMean??!1);if(t.showMean=e,a){let r;r=e?function(e){return e.every(Fl)}(t.series)?await async function(e,t){const r=[];return e.forEach((e=>{if(e.type===mc){const{type:t,fillSymbol:i,...a}=e;r.push({...a,type:hc,lineSymbol:{...Vi({width:2}),...void 0!==i?{color:i.color}:{}},markerSymbol:{...Ji(),...void 0!==i?{color:i.color}:{}}});}})),r.unshift(await ip({x:e[0].x,y:e[0].y,seriesTemplate:t})),r}(t.series):t.series:function(e){const t=e.slice(1),r=[];return t.forEach((e=>{if(e.type===hc){const{type:t,lineSymbol:i,markerSymbol:a,...s}=e,o=Yi();r.push({...s,type:mc,fillSymbol:{...o,color:i?.color}});}})),r}(t.series),r&&(r=op({formerSeries:t.series,newSeries:r,showMean:e}),t.series=r);}return e&&void 0!==r&&Kh(r,t),{previousMeanLinesBoxColor:i}},yp=e=>{let t=[];const r=e.orderOptions?.data?.orderType;return hp(e)===Zf.customSort&&r===Ic&&(t=e.orderOptions?.data?.orderBy),t},vp=(e,t)=>{t.orderOptions??={};const r=t.orderOptions?.data?.orderType;hp(t)===Zf.customSort&&r===Ic&&(t.orderOptions.data={orderType:Ic,orderBy:e});},bp=e=>e.lineSymbol?.style,wp=(e,t)=>{t.lineSymbol??=Zi(),t.lineSymbol.style=e;},Sp=e=>e.lineSymbol?.width,xp=(e,t)=>{t.lineSymbol??=Zi(),t.lineSymbol.width=e;};class _p extends Zl{constructor(){super(...arguments),this._chartType=mc;}async setup(e){await this.loadConfigFromLayer(e),this.commonStrings=await qc(),void 0!==e.config&&await this.updateSeriesFromLayerFilter(),this.resolveSetup();}getCategory(){return Jh(this._config)}async setCategory(e){await(async(e,t,r)=>{const{layerFieldsInfo:i}=r,a=Jh(t),s=Zh(t),o=ep(t),n=vl(i);let l;!n.includes(a)&&n.includes(e)?l={type:"date",intlOptions:{}}:n.includes(a)&&!n.includes(e)&&(l={type:"category",characterLimit:11}),void 0!==l&&ru(t,l),await lp({splitByField:s,numericFields:o,category:e,config:t,layerInfo:r}),Gc(t,0,e!==Li?Bs(i,e):""),Gc(t,1,await up(t,r)),void 0!==t?.title&&(t.title.content.text=await dp(t,r)),Jc(t,null),Yc(t,null);})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setCategory");}async getCustomSortValues(){const e=Jh(this._config),t=this.getXAxisValueFormat()?.type,r=this.getNumericFields();let i=[];return t===nc&&(i=e===Li?r.map((e=>Bs(this.layerInfo.layerFieldsInfo,e))):await Nc({layerInfo:this.layerInfo,config:this._config,category:e})),i}getNumericFields(){return ep(this._config)}async setNumericFields(e){const{layerFieldsInfo:t}=this.layerInfo;"string"==typeof e&&(e=[e]);Bc(t,e)?(await(async(e,t,r)=>{const i=Jh(t),a=Zh(t);await lp({splitByField:a,numericFields:e,category:i,config:t,layerInfo:r}),Gc(t,1,await up(t,r)),void 0!==t?.title&&(t.title.content.text=await dp(t,r)),Jc(t,null),Yc(t,null);})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setNumericFields")):console.log("Invalid numericFields");}getSplitByField(){return Zh(this._config)}async setSplitByField(e){Uc(this.layerInfo.layerFieldsInfo,e)?(await(async(e,t,r)=>{const i=Jh(t),a=ep(t);await lp({splitByField:e,numericFields:a,category:i,config:t,layerInfo:r}),Gc(t,1,await up(t,r)),void 0!==t?.title&&(t.title.content.text=await dp(t,r)),Jc(t,null),Yc(t,null);})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setSplitByField")):console.log("Invalid splitByField");}getShowOutliers(){return e=this._config,e?.showOutliers??!1;var e;}async setShowOutliers(e){await(async(e,t,r)=>{t.showOutliers=e,Gc(t,1,await up(t,r));})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setShowOutliers");}getStandardizeValues(){return cp(this._config)}async setStandardizeValues(e){await(async(e,t,r)=>{t.standardizeValues=e,Gc(t,1,await up(t,r));})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setStandardizeValues");}getSortOrder(){return hp(this._config)}setSortOrder(e,t){pp(e,this._config,t),this.emitConfigUpdate("setSortOrder");}getOrderByList(){return yp(this._config)}setOrderByList(e){vp(e,this._config),this.emitConfigUpdate("setOrderByList");}async updateSeriesFromLayerFilter(){await lp({splitByField:this.getSplitByField(),numericFields:this.getNumericFields(),category:this.getCategory(),config:this._config,layerInfo:this.layerInfo}),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("updateSeriesFromLayerFilter");}getDataFilter(){return this._config.dataFilters}async setDataFilter(e){var t,r;t=e,r=this._config,void 0!==t?r.dataFilters=t:delete r.dataFilters;const i=hp(this._config);if(i===Zf.customSort){const e=await(async(e,t)=>{const r=Jh(e),i=tu(e)?.type,a=ep(e);let s=[];return i===nc&&(r===Li?s=a:""!==r.trim()&&r!==Li&&(s=await Nc({layerInfo:t,config:e,category:r}))),s})(this._config,this.layerInfo);pp(i,this._config,e);}this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setDataFilter");}getShowMeanLines(){return gp(this._config)}async setShowMeanLines(e){const{previousMeanLinesBoxColor:t}=await mp(e,this._config,this.previousMeanLinesBoxColor);this.previousMeanLinesBoxColor=t,this.emitConfigUpdate("setShowMeanLines");}getMeanLinesBoxColor(){return Hh(this._config)}setMeanLinesBoxColor(e){Kh(e,this._config),this.emitConfigUpdate("setMeanLinesBoxColor");}async generateDefaultConfig(){const t=await async function(t=Wi()){return {version:e,type:_,id:t,rotated:!1,colorMatch:!0,orderOptions:{data:{orderType:K,orderBy:B}},title:zi({text:await Xi(),visible:!0,font:Ni(Z)}),subTitle:zi(),footer:zi({text:"",visible:!0,font:Ni(ie)}),background:[255,255,255,255],series:[],legend:Hi(),axes:await ra(L),standardizeValues:!0,showOutliers:!1}}();return t.series=[await la()],t}getSeriesName(e){return ((e,t)=>t?.series?.[e]?.name)(e,this._config)}setSeriesName(e,t){Qh(e,t,this._config),this.emitConfigUpdate("setSeriesName");}getSeriesColor(e){return ((e,t)=>{let r;const i=t.series?.[e];return i?.type===mc?r=i.fillSymbol?.color:i?.type===hc&&(r=i.lineSymbol?.color),r})(e,this._config)}setSeriesColor(e,t){Xh(e,t,this._config),this.emitConfigUpdate("setSeriesColor");}getSeriesLineStyle(e){const t=this._config.series[e];return !0===this.getShowMeanLines()&&jl(t)?bp(t):void 0}setSeriesLineStyle(e,t){const r=this._config.series[t];!0===this.getShowMeanLines()&&jl(r)&&wp(e,r),this.emitConfigUpdate("setSeriesLineStyle");}getSeriesLineWidth(e){const t=this._config.series[e];return !0===this.getShowMeanLines()&&jl(t)?Sp(t):void 0}setSeriesLineWidth(e,t){const r=this._config.series[t];!0===this.getShowMeanLines()&&jl(r)&&xp(e,r),this.emitConfigUpdate("setSeriesLineWidth");}getOrderOfSeries(){return Wh(this._config)}setOrderOfSeries(e){Yh(e,this._config),this.emitConfigUpdate("setOrderOfSeries");}moveSeries(e,t){((e,t,r)=>{const i=Wh(r),[a]=i.splice(e,1);i.splice(t,0,a),Yh(i,r);})(e,t,this._config),this.emitConfigUpdate("moveSeries");}getBoxPlotSeriesIndexWhenMeanLinesShown(){return e=this._config,gp(e)?e.series.findIndex((e=>e.type===mc)):-1;var e;}moveCustomSortValuesInOrderByList(e,t){const r=yp(this._config),[i]=r.splice(e,1);r.splice(t,0,i),vp(r,this._config),this.emitConfigUpdate("moveCustomSortValuesInOrderByList");}resetSeriesStyling(){const e=this.getSeriesLength(),t=this.getShowMeanLines();for(let r=!0===t?1:0;r<e;r+=1){const e=this.getSeriesId(r),i=Ui({colorIndex:r,opacity:ki}),a=this._config.series[r];Xh(i,r,this._config);const s=fp(a,this.getSplitByField(),this.layerInfo,this.commonStrings);Qh(s??e,r,this._config),!0===t&&jl(a)&&(wp(Ai,a),xp(2,a));}!0===t&&Kh(ma,this._config),this._config.colorMatch=!0,this.emitConfigUpdate("resetSeriesStyling");}resetAvailable(){const e=!this.getColorMatch(),t=this.getShowMeanLines(),r=!0===t&&this.getMeanLinesBoxColor()!==ma;let i=!1,a=!1;if(!e){const e=this.getSeriesLength();for(let r=!0===t?1:0;r<e;r+=1){const e=this._config.series[r],s=fp(e,this.getSplitByField(),this.layerInfo,this.commonStrings),o=this.getSeriesName(r);if(void 0!==s&&s!==o){i=!0;break}if(!0===t&&jl(e)){const e=this.getSeriesLineStyle(r),t=this.getSeriesLineWidth(r);if(e!==Ai||2!==t){a=!0;break}}}}return e||r||i||a}}Rc(_p,[Xf,Vc,Mc,Wf,Yf,ph]);const Fp=e=>e.series[0]?.featureIndex,jp=async(e,t,r)=>{const i=kp(t),a=Cp(t);null===e?delete t.series[0].featureIndex:void 0!==t.series[0]&&(t.series[0].featureIndex=e),await Pp({config:t,layerInfo:r,field:i,aggregationType:a});},Pp=async e=>{const{config:t,field:r,aggregationType:i}=e;void 0===t.series[0]&&(t.series=[da({})]);const a=Ep(t.series[0]?.featureIndex);let s=a?r:`${i}_${r}`;a&&r.startsWith(`${i}_`)&&(s=r.replace(`${i}_`,"")),t.series[0].x=s,(e=>{const{config:t,field:r,aggregationType:i}=e,a=Fp(t),s=Ep(a)?{}:{outStatistics:[{statisticType:i,onStatisticField:r,outStatisticFieldName:`${i}_${r}`}]};t.series[0].query=s;})({config:t,field:r,aggregationType:i}),await(async e=>{const{config:t,layerInfo:r,field:i,aggregationType:a}=e;t.title&&(t.title.content.text=await Qc({config:t,layerInfo:r,numericFields:[i],aggregationType:a}));})(e);},Cp=e=>e.series[0]?.query?.outStatistics?.[0]?.statisticType??tc,Ep=e=>"number"==typeof e&&e>=0,kp=e=>Ep(e.series[0]?.featureIndex)?e.series[0]?.x:e.series[0]?.query?.outStatistics?.[0]?.onStatisticField??"";class Ip extends Zl{constructor(){super(...arguments),this._chartType=fc;}async setup(e){await this.loadConfigFromLayer(e),this.resolveSetup();}getField(){return kp(this._config)}async setField(e){await(async(e,t,r)=>{const i=Cp(t);await Pp({config:t,layerInfo:r,field:e,aggregationType:i});})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setField");}getAggregationType(){return Cp(this._config)}async setAggregationType(e){await(async(e,t,r)=>{const i=kp(t);await Pp({config:t,layerInfo:r,field:i,aggregationType:e});})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setAggregationType");}getInnerRadius(){return this._config.innerRadius??50}setInnerRadius(e){((e,t)=>{t.innerRadius=e;})(e,this._config),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setInnerRadius");}getStartAngle(){return this._config.startAngle??-90}setStartAngle(e){((e,t)=>{t.startAngle=e;})(e,this._config),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setStartAngle");}getEndAngle(){return this._config.endAngle??270}setEndAngle(e){((e,t)=>{t.endAngle=e;})(e,this._config),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setEndAngle");}getValueConversion(){return e=this._config,e.series[0]?.valueConversion;var e;}setValueConversion(e){((e,t)=>{void 0!==t.series[0]&&(t.series[0].valueConversion=e);})(e,this._config),this.emitConfigUpdate("setValueConversion");}getFeatureIndex(){return Fp(this._config)}async setFeatureIndex(e){await jp(e,this._config,this.layerInfo),this.emitConfigUpdate("setFeatureIndex");}removeFeatureIndex(){jp(null,this._config,this.layerInfo),this.emitConfigUpdate("removeFeatureIndex");}getGaugeSubType(){return this._config.subType??Pc}getNeedleVisibility(){return e=this._config,e.axes[0].needle?.visible??!0;var e;}setNeedleVisibility(e){var t,r;t=e,void 0===(r=this._config).axes[0].needle&&(r.axes[0].needle=ia()),r.axes[0].needle.visible=t,this.emitConfigUpdate("setNeedleVisibility");}getNeedleSymbol(){return e=this._config,e.axes[0].needle?.symbol;var e;}setNeedleSymbol(e){var t,r;t=e,void 0===(r=this._config).axes[0].needle&&(r.axes[0].needle=ia()),r.axes[0].needle.symbol=t,this.emitConfigUpdate("setNeedleSymbol");}getNeedleStartWidth(){return e=this._config,e.axes[0].needle?.startWidth;var e;}setNeedleStartWidth(e){var t,r;t=e,void 0===(r=this._config).axes[0].needle&&(r.axes[0].needle=ia()),r.axes[0].needle.startWidth=t,this.emitConfigUpdate("setNeedleStartWidth");}getNeedleEndWidth(){return e=this._config,e.axes[0].needle?.endWidth;var e;}setNeedleEndWidth(e){var t,r;t=e,void 0===(r=this._config).axes[0].needle&&(r.axes[0].needle=ia()),r.axes[0].needle.endWidth=t,this.emitConfigUpdate("setNeedleEndWidth");}getNeedleInnerRadius(){return e=this._config,e.axes[0].needle?.innerRadius;var e;}setNeedleInnerRadius(e){var t,r;t=e,void 0===(r=this._config).axes[0].needle&&(r.axes[0].needle=ia()),r.axes[0].needle.innerRadius=t,this.emitConfigUpdate("setNeedleInnerRadius");}getNeedleDisplayPin(){return e=this._config,e.axes[0].needle?.displayPin??!1;var e;}setNeedleDisplayPin(e){var t,r;t=e,void 0===(r=this._config).axes[0].needle&&(r.axes[0].needle=ia()),r.axes[0].needle.displayPin=t,this.emitConfigUpdate("setNeedleDisplayPin");}getInnerLabelVisible(){return e=this._config,e.axes[0].innerLabel?.visible??!0;var e;}setInnerLabelVisibility(e){var t,r;t=e,void 0===(r=this._config).axes[0].innerLabel&&(r.axes[0].innerLabel=zi()),r.axes[0].innerLabel.visible=t,this.emitConfigUpdate("setInnerLabelVisibility");}getInnerLabelContent(){return e=this._config,e.axes[0].innerLabel?.content;var e;}setInnerLabelContent(e){var t,r;t=e,void 0===(r=this._config).axes[0].innerLabel&&(r.axes[0].innerLabel=zi()),void 0!==t&&(r.axes[0].innerLabel.content=t),this.emitConfigUpdate("setInnerLabelContent");}getAxisTickVisibility(){return e=this._config,e.axes[0].ticks?.visible??!0;var e;}setAxisTickVisibility(e){var t,r;t=e,void 0===(r=this._config).axes[0].ticks&&(r.axes[0].ticks={type:oc}),r.axes[0].ticks.visible=t,this.emitConfigUpdate("setAxisTickVisibility");}getLabelsIncrement(){return this._config.axes[0].labelsIncrement}setLabelsIncrement(e){var t;t=e,this._config.axes[0].labelsIncrement=t,this.emitConfigUpdate("setLabelsIncrement");}getOnlyShowFirstAndLastLabels(){return this._config.axes[0].onlyShowFirstAndLastLabels??!1}setOnlyShowFirstAndLastLabels(e){var t;t=e,this._config.axes[0].onlyShowFirstAndLastLabels=t,this.emitConfigUpdate("setOnlyShowFirstAndLastLabels");}async generateDefaultConfig(){const t=await async function(t=Wi()){return {version:e,type:_,id:t,colorMatch:!0,title:zi({text:await Xi(),visible:!0,font:Ni(Z)}),series:[],axes:await aa()}}();return t.series=[da({objectIDField:this.layerInfo?.objectIdField})],t}}Rc(Ip,[Kf,hh]);const Op=e=>{eu(e,null),Zc(e,null),Jc(e,null),Yc(e,null);},Ap=e=>e.series[0]?.overlays?.comparisonDistribution?.symbol??pa().overlays.comparisonDistribution?.symbol??Vi(),Tp=e=>e.series[0]?.overlays?.mean?.symbol??pa().overlays.mean?.symbol??Vi(),Lp=e=>e.series[0]?.overlays?.median?.symbol??pa().overlays.median?.symbol??Vi(),Dp=e=>e.series[0]?.overlays?.standardDeviation?.symbol??pa().overlays.standardDeviation?.symbol??Vi();class $p extends Zl{constructor(){super(...arguments),this._chartType=gc;}async setup(e){await this.loadConfigFromLayer(e),this.resolveSetup();}getNumericField(){return e=this._config,e.series[0]?.x??"";var e;}async setNumericField(e){await(async(e,t,r)=>{const{layerFieldsInfo:i}=r;Op(t),t?.series?.[0]&&(t.series[0].x=e);const a=Bs(i,e);Gc(t,0,a);const s=Si((await qc()).titleLabels.distributionOfField,{valueField:a});t?.title&&(t.title.content.text=s);})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setNumericField");}getBinCount(){return e=this._config,e.series[0]?.binCount??32;var e;}setBinCount(e){((e,t)=>{Op(t),t?.series?.[0]&&(t.series[0].binCount=e);})(e,this._config),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setBinCount");}getBinColor(){return e=this._config,e.series[0]?.fillSymbol??pa().fillSymbol;var e;}setBinColor(e){((e,t)=>{t?.series?.[0]&&(t.series[0].fillSymbol={...t.series[0].fillSymbol,...e});})(e,this._config),this.emitConfigUpdate("setBinColor");}getDataTransformationType(){return e=this._config,e.series[0]?.dataTransformationType??vc;var e;}setDataTransformationType(e){((e,t)=>{Op(t),t?.series?.[0]&&(t.series[0].dataTransformationType=e);})(e,this._config),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setDataTransformationType");}getMeanColor(){return Tp(this._config)}setMeanColor(e){((e,t)=>{t.series[0].overlays??=ha(),t.series[0].overlays.mean??=Ki(1),t.series[0].overlays.mean.symbol={...t.series[0].overlays.mean.symbol,...e};})(e,this._config),this.emitConfigUpdate("setMeanColor");}getMedianColor(){return Lp(this._config)}setMedianColor(e){((e,t)=>{t.series[0].overlays??=ha(),t.series[0].overlays.median??=Ki(2),t.series[0].overlays.median.symbol={...t.series[0].overlays.median.symbol,...e};})(e,this._config),this.emitConfigUpdate("setMedianColor");}getNormalDistColor(){return Ap(this._config)}setNormalDistColor(e){((e,t)=>{t.series[0].overlays??=ha(),t.series[0].overlays.comparisonDistribution??=Ki(4),t.series[0].overlays.comparisonDistribution.symbol={...t.series[0].overlays.comparisonDistribution.symbol,...e};})(e,this._config),this.emitConfigUpdate("setNormalDistColor");}getStandardDevColor(){return Dp(this._config)}setStandardDevColor(e){((e,t)=>{t.series[0].overlays??=ha(),t.series[0].overlays.standardDeviation??=Ki(3),t.series[0].overlays.standardDeviation.symbol={...t.series[0].overlays.standardDeviation.symbol,...e};})(e,this._config),this.emitConfigUpdate("setStandardDevColor");}getShowNormalDistOverlay(){return e=this._config,e.series[0]?.overlays?.comparisonDistribution?.created??!1;var e;}setShowNormalDistOverlay(e){((e,t)=>{const r=Ki(0);r.created=e,r.visible=e,r.symbol=Ap(t),t?.series?.[0]?.overlays&&(t.series[0].overlays.comparisonDistribution=r);})(e,this._config),this.emitConfigUpdate("setShowNormalDistOverlay");}getShowMeanOverlay(){return e=this._config,e.series[0]?.overlays?.mean?.created??!1;var e;}setShowMeanOverlay(e){((e,t)=>{const r=Ki(1);r.created=e,r.visible=e,r.symbol=Tp(t),t?.series?.[0]?.overlays&&(t.series[0].overlays.mean=r);})(e,this._config),this.emitConfigUpdate("setShowMeanOverlay");}getShowMedianOverlay(){return e=this._config,e.series[0]?.overlays?.median?.created??!1;var e;}setShowMedianOverlay(e){((e,t)=>{const r=Ki(2);r.created=e,r.visible=e,r.symbol=Lp(t),t?.series?.[0]?.overlays&&(t.series[0].overlays.median=r);})(e,this._config),this.emitConfigUpdate("setShowMedianOverlay");}getShowStandardDevOverlay(){return e=this._config,e.series[0]?.overlays?.standardDeviation?.created??!1;var e;}setShowStandardDevOverlay(e){((e,t)=>{const r=Ki(3);r.created=e,r.visible=e,r.symbol=Dp(t),t?.series?.[0]?.overlays&&(t.series[0].overlays.standardDeviation=r);})(e,this._config),this.emitConfigUpdate("setShowStandardDevOverlay");}getSeriesOverlay(){return e=this._config,e?.series?.[0]?.overlays;var e;}setSeriesOverlays(e){var t,r;t=e,r=this._config,void 0!==r?.series?.[0]&&(r.series[0].overlays=t),this.emitConfigUpdate("setSeriesOverlay");}async generateDefaultConfig(){const t=await async function(t=Wi()){return {version:e,type:_,id:t,colorMatch:!0,title:zi({text:await Xi(),visible:!0,font:Ni(Z)}),subTitle:zi(),footer:zi({text:"",visible:!0,font:Ni(ie)}),background:[255,255,255,255],axes:await ra(T),series:[pa()],legend:Hi()}}();return t}}Rc($p,[Xf,Vc,Mc,Yf,ph]);const Up=(e,t)=>void 0!==t.series[e]?bp(t.series[e]):void 0,Bp=(e,t,r)=>{void 0!==r.series[t]&&wp(e,r.series[t]);},Rp=(e,t)=>void 0!==t.series[e]?Sp(t.series[e]):void 0,Np=(e,t,r)=>{void 0!==r.series[t]&&xp(e,r.series[t]);},Mp=(e,t)=>t.series?.[e]?.markerSymbol?.color,zp=(e,t,r)=>{if(void 0!==r.series?.[t]){const i=r.series[t];void 0===i.markerSymbol&&(i.markerSymbol=Ji()),i.markerSymbol.color=e;}},Vp=(e,t)=>t.series?.[e]?.markerSymbol?.style,qp=(e,t,r)=>{if(void 0!==r.series?.[t]){const i=r.series[t];void 0===i.markerSymbol&&(i.markerSymbol=Ji()),i.markerSymbol.style=e;}},Gp=(e,t)=>t.series?.[e]?.markerSymbol?.size,Qp=(e,t,r)=>{if(void 0!==r.series?.[t]){const i=r.series[t];void 0===i.markerSymbol&&(i.markerSymbol=Ji()),i.markerSymbol.size=e;}},Hp=(e,t)=>t.series?.[e]?.lineSmoothed??!1,Kp=e=>{const{smoothed:t,seriesIndex:r,config:i}=e;i.series?.[r]&&(i.series[r].lineSmoothed=t);},Xp=(e,t)=>t.series?.[e]?.showArea??!1,Wp=e=>{const{visible:t,seriesIndex:r,config:i}=e;i.series?.[r]&&(i.series[r].showArea=t);},Yp=(e,t)=>t.series?.[e]?.markerVisible??!0,Jp=e=>{const{visible:t,seriesIndex:r,config:i}=e;i.series?.[r]&&(i.series[r].markerVisible=t);},Zp=(e,t)=>t.series?.[e]?.areaColor,eg=(e,t)=>t.series?.[e]?.stackNegativeValuesToBaseline??!0,tg=e=>{const{stackNegativeValuesToBaseline:t,seriesIndex:r,config:i}=e;i.series?.[r]&&(i.series[r].stackNegativeValuesToBaseline=t);};class rg extends qh{constructor(){super(...arguments),this._chartType=hc;}async setup(e){await this.loadConfigFromLayer(e),void 0!==e.config&&this.updateSeriesFromLayerFilter(),await this.initDefaultSeries(),this.resolveSetup();}async generateDefaultConfig(){const t=await async function(t=Wi()){return {version:e,type:_,id:t,colorMatch:!0,rotated:!1,orderOptions:{data:{orderType:K,orderBy:B}},title:zi({text:await Xi(),visible:!0,font:Ni(Z)}),subTitle:zi(),footer:zi({text:"",visible:!0,font:Ni(ie)}),background:[255,255,255,255],axes:await ra(O),series:[],legend:Hi()}}();return t.series=[await sa({objectIDField:this.layerInfo?.objectIdField})],t}async initDefaultSeries(){this.defaultSeries=await sa({objectIDField:this.layerInfo?.objectIdField});}getSeriesLineStyle(e){return Up(e,this._config)}setSeriesLineStyle(e,t){Bp(e,t,this._config),this.emitConfigUpdate("setSeriesLineStyle");}getSeriesLineWidth(e){return Rp(e,this._config)}setSeriesLineWidth(e,t){Np(e,t,this._config),this.emitConfigUpdate("setSeriesLineWidth");}getSeriesMarkerColor(e){return Mp(e,this._config)}setSeriesMarkerColor(e,t){zp(e,t,this._config),this.emitConfigUpdate("setSeriesMarkerColor");}getSeriesMarkerStyle(e){return Vp(e,this._config)}setSeriesMarkerStyle(e,t){qp(e,t,this._config),this.emitConfigUpdate("setSeriesMarkerStyle");}getSeriesMarkerSize(e){return Gp(e,this._config)}setSeriesMarkerSize(e,t){Qp(e,t,this._config),this.emitConfigUpdate("setSeriesMarkerSize");}isLineSmoothed(e){return Hp(e,this._config)}setLineSmoothed(e,t){Kp({smoothed:e,seriesIndex:t,config:this._config}),this.emitConfigUpdate("setLineSmoothed");}isAreaVisible(e){return Xp(e,this._config)}setAreaVisible(e,t){Wp({visible:e,seriesIndex:t,config:this._config}),this.emitConfigUpdate("setAreaVisible");}isMarkerVisible(e){return Yp(e,this._config)}setMarkerVisible(e,t){Jp({visible:e,seriesIndex:t,config:this._config}),this.emitConfigUpdate("setMarkerVisible");}getAreaColor(e){return Zp(e,this._config)}setAreaColor(e,t){Wp({visible:!0,seriesIndex:t,config:this._config}),zh(e,t,this._config),this.emitConfigUpdate("setAreaColor");}isNegativeValuesStackedToBaseline(e){return eg(e,this._config)}setNegativeValuesStackedToBaseline(e,t){tg({stackNegativeValuesToBaseline:e,seriesIndex:t,config:this._config}),this.emitConfigUpdate("setNegativeValuesStackedToBaseline");}async resetSeriesStyling(){const e=this.getSeriesLength();for(let t=0;t<e;t+=1){const e=Ui({colorIndex:t,opacity:ki});if(zh(e,t,this._config),zp(e,t,this._config),void 0!==this.layerInfo){const e=this.getSeriesId(t),r=await Bh(this._config,t,this.layerInfo);r!==this.layerInfo.objectIdField&&Mh(r??e,t,this._config);}Bp(this.defaultSeries?.lineSymbol?.style,t,this._config),Np(this.defaultSeries?.lineSymbol?.width,t,this._config),qp(this.defaultSeries?.markerSymbol?.style,t,this._config),Qp(this.defaultSeries?.markerSymbol?.size,t,this._config);}this._config.colorMatch=!0,this.emitConfigUpdate("resetSeriesStyling");}async resetAvailable(){const e=!this.getColorMatch();let t=!1;if(!e){const e=this.getSeriesLength();for(let r=0;r<e;r+=1){if(void 0!==this.layerInfo){const e=await Bh(this._config,r,this.layerInfo),i=this.getSeriesName(r);void 0!==e&&e!==this.layerInfo.objectIdField&&e!==i&&(t=!0);}if(void 0!==this.defaultSeries?.lineSymbol?.style&&this.defaultSeries?.lineSymbol.style!==this.getSeriesLineStyle(r)||void 0!==this.defaultSeries?.lineSymbol?.width&&this.defaultSeries?.lineSymbol.width!==this.getSeriesLineWidth(r)||void 0!==this.defaultSeries?.markerSymbol?.style&&this.defaultSeries?.markerSymbol?.style!==this.getSeriesMarkerStyle(r)||void 0!==this.defaultSeries?.markerSymbol?.size&&this.defaultSeries?.markerSymbol?.size!==this.getSeriesMarkerSize(r)){t=!0;break}}}return e||t}}Rc(rg,[Xf,Vc,Mc,Wf,Yf,hh,ph,xh]);const ig=(e,t)=>{t.series?.[0]?.slices?.sort(((t,r)=>e.findIndex((e=>t.sliceId===e))-e.findIndex((e=>r.sliceId===e))));},ag=(e,t)=>{t.series?.[0]&&(t.series[0].sliceGrouping=e);},sg=e=>e.series?.[0]?.sliceGrouping?.percentageThreshold,og=(e,t)=>{t.series?.[0]&&(t.series[0].slices=e);},ng=e=>e.series?.[0]?.x??"";const lg=(e,t)=>{let r=eh.valueDesc;const i=e.orderOptions?.data?.orderType??function(e,t){const r=e.series?.[0];return [`${t===th.Category?r.y:Ac} ${_c}`]}(e,t),a=e.orderOptions?.data?.orderBy??_c;return r=i===Ic&&Array.isArray(a)?eh.customSort:i===Ic?a===xc?eh.labelAsc:eh.labelDesc:a===xc?eh.valueAsc:eh.valueDesc,r},cg=Od((e=>{let t=[];return t=e.series?.[0]?.query?.outStatistics?.map((e=>e.onStatisticField))??[e.series?.[0]?.y??""],[...new Set(t.filter((e=>""!==e)))]}),(e=>e.series)),ug=(e,t)=>{const r=cg(e);let i;return i=t===th.Fields&&0===r.length?rc:e.series?.[0]?.query?.outStatistics?.[0]?.statisticType??ic,i};async function dg(e){const{config:t,layerInfo:r,mode:i}=e,{objectIdField:a}=r??{},s=await ua(a),o=ng(t),n=t.series[0]?.dataLabels?.visible??!1,l={...s,x:i===th.Category?o:Oc,slices:t.series?.[0]?.slices,dataLabels:{...s.dataLabels,visible:n},innerRadiusSize:t.series?.[0]?.innerRadius,sliceGrouping:t.series?.[0]?.sliceGrouping,dataLabelsCharacterLimit:t.series?.[0]?.dataLabelsCharacterLimit,numericValueFormat:t.series?.[0]?.numericValueFormat,percentValueFormat:t.series?.[0]?.percentValueFormat,displayNumericValueOnDataLabel:t.series?.[0]?.displayNumericValueOnDataLabel,displayPercentageOnDataLabel:t.series?.[0]?.displayPercentageOnDataLabel},c=ug(t,i);if(c!==ic&&void 0!==a){const e=`${c}_${a}_0`.toUpperCase();l.y=i===th.Category?e:Ac,l.query={outStatistics:i===th.Category?[{statisticType:c,onStatisticField:a,outStatisticFieldName:e}]:[]};}return i===th.Category&&void 0!==l.query?l.query.groupByFieldsForStatistics=[o]:delete l.query?.groupByFieldsForStatistics,jf(l)}async function fg(e,t,r){const{layerFieldsInfo:i,objectIdField:a}=t,s=ng(e),o=cg(e),n=ug(e,r),l=0===o.length||o.includes(a),c=await ga(n),u=l?"":o.map((e=>Bs(i??[],e))).join(", "),d=Bs(i??[],s);let f="";const h=await qc();let p;return p=r===th.Fields?0===o.length:""===s,p?f=h.chartType.pieChart:n===ic?f=Si(h.titleLabels.aggrFieldsByCategory,{aggregationFields:l?a:u,category:d}):n===tc?f=Si(h.titleLabels.aggrTypeCategory,{aggregationType:c,category:d}):o.length>0&&(f=d===Oc||Mf(d)||null===d?Si(h.titleLabels.aggrTypeOfAggrFields,{aggregationType:c,aggregationFields:u}):Si(h.titleLabels.aggrTypeOfAggrFieldsByCategory,{aggregationType:c,aggregationFields:u,category:d})),f}const hg=e=>{const{newSortOrderKind:t,config:r,orderByList:i}=e;r.orderOptions??={},r.orderOptions.data=t===eh.customSort&&void 0!==i?{orderType:Ic,orderBy:[...i]}:{orderType:t===eh.labelAsc||t===eh.labelDesc?Ic:Cc,orderBy:t===eh.labelAsc||t===eh.valueAsc?xc:_c};};async function pg(e){const{numericFields:t,aggregationType:r,config:i,layerInfo:a,mode:s}=e,o=lg(i,s),n=[],l=await dg({config:i,layerInfo:a,mode:s}),c={...l,query:{...l.query}};if(t.length<=1?c.query.where=l.query?.where:delete c.query.where,r!==ic)if(s===th.Category){if(t.length>0){const e=t[0],i=`${r}_${t[0]}_0`.toUpperCase();c.y=i,c.query.outStatistics=[{...l.query?.outStatistics?.[0]??{},onStatisticField:e,outStatisticFieldName:i,statisticType:r}];}}else {c.y=Ac;for(let e=0;e<t.length;e+=1)c.query.outStatistics?.push({onStatisticField:t[e],outStatisticFieldName:t[e],statisticType:r});}else c.y=t[0],c.query={};const u=mg(i,s);hg({newSortOrderKind:o,config:i,orderByList:u}),n.push(c),i.series=n;}const gg=async e=>{let{newNumericFields:t}=e;const{config:r,layerInfo:i,mode:a}=e,{objectIdField:s}=i??{};let o=ug(r,a);if(t=""===t?[]:t,t="string"==typeof t?[t]:t,void 0!==s&&(0===t.length&&a===th.Category?(t.push(s),o=tc):o===tc&&t.length>=1&&!t.includes(s)&&(o=rc)),void 0!==i){await pg({config:r,layerInfo:i,numericFields:t,aggregationType:o,mode:a});Gc(r,1,await Qc({config:r,layerInfo:i,numericFields:cg(r),aggregationType:ug(r,a)})),r.title&&(r.title.content.text=await fg(r,i,a));}else r.series.forEach((e=>{delete e.query,e.y=t[0];}));},mg=(e,t)=>{let r=[];const i=e.orderOptions?.data?.orderType,a=lg(e,t),s=e.orderOptions?.data?.orderBy;return a===eh.customSort&&i===Ic&&Array.isArray(s)&&(r=s),r},yg=e=>{const{values:t,config:r,mode:i}=e;r.orderOptions??={};const a=r.orderOptions?.data?.orderType;lg(r,i)===eh.customSort&&a===Ic&&(r.orderOptions.data={orderType:Ic,orderBy:[...t]});};class vg extends Zl{constructor(){super(...arguments),this._chartType=dc,this._mode=th.Category,this._groupedSliceIds=[];}async setup(e){await this.loadConfigFromLayer(e);const{config:t}=e;if(void 0!==t){const e=Xs(t.series);this._mode=e!==Cs?th.Category:th.Fields;}this.resolveSetup();}getCategory(){return ng(this._config)}async setCategory(e){(!_l(this._config)||""!==e.trim())&&(await(async e=>{const{newCategory:t,config:r,layerInfo:i,mode:a}=e,s=r.series?.length??0,o=lg(r,a);if(r.series.forEach((e=>{e.x=a===th.Category?t:Oc,void 0!==e.query&&t!==Oc?e.query.groupByFieldsForStatistics=[t]:delete e.query?.groupByFieldsForStatistics;})),0===s){const e=[await dg({config:r,layerInfo:i,mode:a})];r.series=e;}if(void 0!==o){const e=mg(r,a);hg({newSortOrderKind:o,config:r,orderByList:e});}if(void 0!==i){Gc(r,1,await Qc({config:r,layerInfo:i,numericFields:cg(r),aggregationType:ug(r,a)})),r.title&&(r.title.content.text=await fg(r,i,a));const e=a===th.Fields?cg(r).filter((e=>e!==i.objectIdField)):cg(r);await gg({newNumericFields:e,config:r,layerInfo:i,mode:a});}})({newCategory:e,config:this._config,layerInfo:this.layerInfo,mode:this._mode}),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setCategory"));}getNumericFields(){return cg(this._config)}async setNumericFields(e){"string"==typeof e&&(e=[e]);void 0===this.layerInfo||Bc(this.layerInfo.layerFieldsInfo,e)?(await gg({newNumericFields:e,config:this._config,layerInfo:this.layerInfo,mode:this._mode}),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setNumericFields")):console.log("Invalid numericFields");}getAggregationType(){return ug(this._config,this._mode)}async setAggregationType(e){await(async e=>{const{newAggregationType:t,config:r,layerInfo:i,mode:a}=e,s=cg(r);await pg({config:r,layerInfo:i,numericFields:s,aggregationType:t,mode:a}),Gc(r,1,await Qc({config:r,layerInfo:i,numericFields:cg(r),aggregationType:ug(r,a)})),r.title&&(r.title.content.text=await fg(r,i,a));const o=r.series?.[0]?.displayNumericValueOnDataLabel,n=r.series?.[0]?.displayPercentageOnDataLabel;r.legend={...r.legend??Hi(),displayNumericValue:o,displayPercentage:n};})({newAggregationType:e,config:this._config,layerInfo:this.layerInfo,mode:this._mode}),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setAggregationType");}getSortOrder(){return lg(this._config,this._mode)}setSortOrder(e,t){hg({newSortOrderKind:e,config:this._config,orderByList:t}),this.emitConfigUpdate("setSortOrder");}getOrderByList(){return mg(this._config,this._mode)}setOrderByList(e){yg({values:e,config:this._config,mode:this._mode}),this.emitConfigUpdate("setOrderByList");}getMode(){return this._mode}setMode(e){this._mode=e,this.emitConfigUpdate("setMode");}async getCustomSortValues(){const e=ng(this._config),t=Xs(this._config.series),r=this.getNumericFields();let i=[];return t===Cs?i=r:""!==e.trim()&&t===Ps&&(i=await Nc({category:e,config:this._config,layerInfo:this.layerInfo})),i}moveCustomSortValuesInOrderByList(e,t){const r=mg(this._config,this._mode),[i]=r.splice(e,1);r.splice(t,0,i),yg({values:r,config:this._config,mode:this._mode}),this.emitConfigUpdate("moveCustomSortValuesInOrderByList");}getLeaderLinesSymbol(){return (e=>{for(const t of e.series)if(void 0!==t.ticks?.lineSymbol)return t.ticks.lineSymbol})(this._config)}setLeaderLinesSymbol(e){((e,t)=>{for(const r of t.series)void 0!==r.ticks&&void 0!==e||(r.ticks=ca()),void 0!==e&&(r.ticks.lineSymbol=jf(e));})(e,this._config),this.emitConfigUpdate("setLeaderLinesSymbol");}getSlices(){return e=this._config,e.series?.[0]?.slices;var e;}setSlices(e){og(e,this._config),this.emitConfigUpdate("setSlices");}getGroupedSliceIds(){return this._groupedSliceIds}setGroupedSliceIds(e){this._groupedSliceIds=e,this.emitConfigUpdate("setGroupedSliceIds");}getSliceGrouping(){return e=this._config,e.series?.[0]?.sliceGrouping;var e;}setSliceGrouping(e){ag(e,this._config),this.emitConfigUpdate("setSliceGrouping");}getInnerRadiusSize(){return e=this._config,e.series?.[0]?.innerRadius??0;var e;}setInnerRadiusSize(e){((e,t)=>{t.series?.[0]&&(t.series[0].innerRadius=e);})(e,this._config),this.emitConfigUpdate("setInnerRadiusSize");}getGroupingThreshold(){return sg(this._config)??0}setGroupingThreshold(e){((e,t)=>{void 0!==t.series?.[0]?.sliceGrouping?t.series[0].sliceGrouping.percentageThreshold=e:t.series[0].sliceGrouping={sliceId:Ti,percentageThreshold:e};})(e,this._config),this.emitConfigUpdate("setGroupingThreshold");}getLabelCharacterLimit(){return e=this._config,e.series?.[0]?.dataLabelsCharacterLimit??null;var e;}setLabelCharacterLimit(e){((e,t)=>{t.series?.[0]&&(t.series[0].dataLabelsCharacterLimit=e);})(e,this._config),this.emitConfigUpdate("setLabelCharacterLimit");}getDecimalPlaces(){return e=this._config,e.series?.[0]?.numericValueFormat?.intlOptions?.minimumFractionDigits??1;var e;}setDecimalPlaces(e){((e,t)=>{void 0!==t.series?.[0]?.numericValueFormat?(t.series[0].numericValueFormat.intlOptions.minimumFractionDigits=e,t.series[0].numericValueFormat.intlOptions.maximumFractionDigits=e):t.series[0].numericValueFormat={...qi(),intlOptions:{minimumFractionDigits:e,maximumFractionDigits:e}},void 0!==t.series?.[0]?.percentValueFormat?(t.series[0].percentValueFormat.intlOptions.minimumFractionDigits=e,t.series[0].percentValueFormat.intlOptions.maximumFractionDigits=e):t.series[0].percentValueFormat={...qi(),intlOptions:{minimumFractionDigits:e,maximumFractionDigits:e}};})(e,this._config),this.emitConfigUpdate("setDecimalPlaces");}getDisplayType(){return (e=>{let t;const r=e.series?.[0];return t=!0===r?.displayNumericValueOnDataLabel&&!0===r?.displayPercentageOnDataLabel?rh.Both:!0===r?.displayNumericValueOnDataLabel?rh.Value:rh.Percentage,t})(this._config)}setDisplayType(e){((e,t)=>{const r=e===rh.Value||e===rh.Both,i=e===rh.Percentage||e===rh.Both;t.series?.[0]&&(t.series[0].displayNumericValueOnDataLabel=r,t.series[0].displayPercentageOnDataLabel=i),t.legend&&(t.legend={...t.legend,displayNumericValue:r,displayPercentage:i});})(e,this._config),this.emitConfigUpdate("setDisplayType");}async generateDefaultConfig(){const t=await async function(t=Wi()){return {version:e,type:_,id:t,colorMatch:!0,orderOptions:{data:{orderType:G,orderBy:R}},title:zi({text:await Xi(),visible:!0,font:Ni(Z)}),subTitle:zi(),footer:zi({text:"",visible:!0,font:Ni(ie)}),background:[255,255,255,255],series:[],legend:{...Hi(),displayNumericValue:!1,displayPercentage:!0}}}();return t.series=[await ua(this.layerInfo?.objectIdField)],t}getOriginalSliceName(e){return ((e,t)=>t.series?.[0]?.slices?.[e]?.originalLabel)(e,this._config)}getSliceName(e){return ((e,t)=>t.series?.[0]?.slices?.[e]?.label)(e,this._config)}setSliceName(e,t){((e,t,r)=>{r.series?.[0]?.slices?.[t]&&(r.series[0].slices[t].label=e);})(e,t,this._config),this.emitConfigUpdate("setSliceName");}getSliceColor(e){return ((e,t)=>t.series?.[0]?.slices?.[e]?.fillSymbol?.color)(e,this._config)}setSliceColor(e,t){((e,t,r)=>{const i=r.series?.[0]?.slices?.[t]?.fillSymbol;void 0!==i?(i.color=e,void 0!==i.outline?i.outline.color=e:i.outline={type:ac,color:e}):void 0!==r.series?.[0]?.slices?.[t]&&(r.series[0].slices[t].fillSymbol={type:sc,color:e,outline:{type:ac,color:e}});})(e,t,this._config),this.emitConfigUpdate("setSliceColor");}getOrderOfSlices(){return e=this._config,e.series?.[0]?.slices?.map((e=>e.sliceId));var e;}setOrderOfSlices(e){ig(e,this._config),this.emitConfigUpdate("setOrderOfSlices");}moveSeries(e,t){const r=this.getOrderOfSlices();if(void 0!==r){const[i]=r.splice(e,1);r.splice(t,0,i),ig(r,this._config),this.emitConfigUpdate("moveSeries");}}getSliceId(e){return ((e,t)=>t.series[0]?.slices?.[e]?.sliceId)(e,this._config)}getSliceIndex(e){return ((e,t)=>t.series[0]?.slices?.findIndex((t=>t.sliceId===e)))(e,this._config)}getSlicesLength(){return e=this._config,e.series[0]?.slices?.length??0;var e;}resetSlices(){var e;e=this._config,og(void 0,e),ag({sliceId:Ti,percentageThreshold:sg(e)??0},e),this.emitConfigUpdate("resetSlices");}resetAvailable(){const e=!this.getColorMatch();let t=!1;const r=this.getSlices()?.length??0;for(let e=0;e<r;e+=1){const r=this.getOriginalSliceName(e),i=this.getSliceName(e);if(void 0!==r&&r?.toString()!==i?.toString()){t=!0;break}}const i=this.getSliceGrouping();return void 0!==i?.originalLabel&&i?.label!==i.originalLabel&&(t=!0),e||t}}Rc(vg,[Vc,Mc,Yf]);const bg=e=>{eu(e,null),Zc(e,null),Jc(e,null),Yc(e,null);},wg=e=>{const{name:t,axisIndex:r,config:i,layerInfo:a}=e,{layerFieldsInfo:s}=a,o=s.find((e=>e.name===t)),n=void 0!==o&&yl(o);au(i,r,n);},Sg=async e=>{const{x:t,y:r,config:i,layerInfo:a}=e,{layerFieldsInfo:s}=a,o=Bs(s,t),n=Bs(s,r);if(Mf(t)||Gc(i,0,o),Mf(r)||Gc(i,1,n),!Mf(t)&&!Mf(r)){const e=Si((await qc()).titleLabels.xAndY,{x:o,y:n});i.title?.content&&(i.title.content.text=e);}},xg=e=>e.series[0]?.x??"",_g=e=>e.series[0]?.y??"",Fg=(e,t)=>{!(t.series[0]?.overlays?.trendLine?.created??!1)&&e&&(t.series[0].overlays??=ta(),t.series[0].overlays.trendLine??=ta().trendLine,t.series[0].overlays.trendLine.created=e),((e,t)=>{t.series[0].overlays??=ta(),t.series[0].overlays.trendLine??=ta().trendLine,t.series[0].overlays.trendLine.visible=e;})(e,t);},jg=e=>e.series[0]?.sizePolicy??{type:"sizeScale",field:"",scaleType:"linear",minSize:5,maxSize:30};class Pg extends Zl{constructor(){super(...arguments),this._chartType=uc;}async setup(e){await this.loadConfigFromLayer(e),this.resolveSetup();}getXAxisField(){return xg(this._config)}async setXAxisField(e){await(async(e,t,r)=>{bg(t),t.series[0]&&(t.series[0].x=e),await Sg({x:e,y:_g(t),config:t,layerInfo:r}),wg({name:e,axisIndex:0,config:t,layerInfo:r});})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setXAxisField");}getYAxisField(){return _g(this._config)}async setYAxisField(e){await(async(e,t,r)=>{bg(t),t.series[0]&&(t.series[0].y=e),await Sg({x:xg(t),y:e,config:t,layerInfo:r}),wg({name:e,axisIndex:1,config:t,layerInfo:r});})(e,this._config,this.layerInfo),this.dispatchEvent(new CustomEvent("arcgisChartsModelDataChange")),this.emitConfigUpdate("setYAxisField");}getShowLinearTrend(){return e=this._config,(e.series[0]?.overlays?.trendLine?.visible&&e.series[0]?.overlays?.trendLine?.created)??!1;var e;}setShowLinearTrend(e){Fg(e,this._config),this.emitConfigUpdate("setShowLinearTrend");}getLinearTrendSymbol(){return e=this._config,e.series[0]?.overlays?.trendLine?.symbol??{};var e;}setLinearTrendSymbol(e){((e,t)=>{t.series[0].overlays??=ta(),t.series[0].overlays.trendLine??=ta().trendLine,t.series[0].overlays.trendLine.symbol=e;})(e,this._config),this.emitConfigUpdate("setLinearTrendSymbol");}getFixedMarkerSymbol(){return e=this._config,e.series[0]?.markerSymbol??{};var e;}setFixedMarkerSymbol(e){((e,t)=>{t.series[0]&&(t.series[0].markerSymbol=e);})(e,this._config),this.emitConfigUpdate("setFixedMarkerSymbol");}getSizePolicy(){return jg(this._config)}setSizePolicy(e){zf(jg(this._config),e)||(((e,t)=>{t.series[0]&&(void 0!==e&&""!==e.field?.trim()?t.series[0].sizePolicy={...t.series[0].sizePolicy,...e}:t.series[0].sizePolicy=void 0);})(e,this._config),this.emitConfigUpdate("setSizePolicy"));}getSeriesOverlays(){return e=this._config,e?.series?.[0]?.overlays;var e;}setSeriesOverlays(e){var t,r;t=e,r=this._config,void 0!==r?.series[0]&&(r.series[0].overlays=t),this.emitConfigUpdate("setSeriesOverlays");}async generateDefaultConfig(){const t=await async function(t=Wi()){return {version:e,type:_,id:t,colorMatch:!0,title:zi({text:await Xi(),visible:!0,font:Ni(Z)}),subTitle:zi(),footer:zi({text:"",visible:!0,font:Ni(ie)}),background:[255,255,255,255],axes:await ra(E),series:[{type:E,id:E,name:E,x:"",y:"",markerSymbol:ea(),overlays:ta(),dataLabels:zi({text:"",visible:!1,font:Ni(ee)})}],legend:Hi()}}();return t}}Rc(Pg,[Xf,Vc,Mc,Yf,hh,ph]);class Cg extends qh{constructor(){super(...arguments),this._chartType=yc;}getConfig(){return this._config}async setup(e){await this.loadConfigFromLayer(e),void 0!==e.config&&(Cl(e.config?.series)&&await this.initDefaultSeries(),await this.updateSeriesFromLayerFilter()),this.resolveSetup();}async generateDefaultConfig(){const e=await fa();return e.series=[await na({objectIDField:this.layerInfo?.objectIdField})],e}async initDefaultSeries(){this.defaultSeries=await sa({objectIDField:this.layerInfo?.objectIdField});}getSeriesLineStyle(e){return Up(e,this._config)}setSeriesLineStyle(e,t){const r=this._config.series?.[t];jl(r)&&(Bp(e,t,this._config),this.emitConfigUpdate("setSeriesLineStyle"));}getSeriesLineWidth(e){return Rp(e,this._config)}setSeriesLineWidth(e,t){const r=this._config.series?.[t];jl(r)&&(Np(e,t,this._config),this.emitConfigUpdate("setSeriesLineWidth"));}getSeriesMarkerColor(e){return Mp(e,this._config)}setSeriesMarkerColor(e,t){const r=this._config.series?.[t];jl(r)&&(zp(e,t,this._config),this.emitConfigUpdate("setSeriesMarkerColor"));}getSeriesMarkerStyle(e){return Vp(e,this._config)}setSeriesMarkerStyle(e,t){const r=this._config.series?.[t];jl(r)&&(qp(e,t,this._config),this.emitConfigUpdate("setSeriesMarkerStyle"));}getSeriesMarkerSize(e){return Gp(e,this._config)}setSeriesMarkerSize(e,t){const r=this._config.series?.[t];jl(r)&&(Qp(e,t,this._config),this.emitConfigUpdate("setSeriesMarkerSize"));}isLineSmoothed(e){return Hp(e,this._config)}setLineSmoothed(e,t){const r=this._config.series?.[t];jl(r)&&(Kp({smoothed:e,seriesIndex:t,config:this._config}),this.emitConfigUpdate("setLineSmoothed"));}isAreaVisible(e){return Xp(e,this._config)}setAreaVisible(e,t){const r=this._config.series?.[t];jl(r)&&(Wp({visible:e,seriesIndex:t,config:this._config}),this.emitConfigUpdate("setAreaVisible"));}isMarkerVisible(e){return Yp(e,this._config)}setMarkerVisible(e,t){const r=this._config.series?.[t];jl(r)&&(Jp({visible:e,seriesIndex:t,config:this._config}),this.emitConfigUpdate("setMarkerVisible"));}getAreaColor(e){return Zp(e,this._config)}setAreaColor(e,t){const r=this._config.series?.[t];jl(r)&&(Wp({visible:!0,seriesIndex:t,config:this._config}),zh(e,t,this._config),this.emitConfigUpdate("setAreaColor"));}isNegativeValuesStackedToBaseline(e){return eg(e,this._config)}setNegativeValuesStackedToBaseline(e,t){const r=this._config.series?.[t];jl(r)&&(tg({stackNegativeValuesToBaseline:e,seriesIndex:t,config:this._config}),this.emitConfigUpdate("setNegativeValuesStackedToBaseline"));}getSeriesHideOversizedStackedLabels(e){return Lc(e,this._config)}setSeriesHideOversizedStackedLabels(e,t){const r=this._config.series?.[t];Pl(r)&&(Dc(e,t,this._config),this.emitConfigUpdate("setSeriesHideOversizedStackedLabels"));}}function Eg(e){return void 0!==e&&"getConfig"in e}function kg(e){return void 0!==e&&e.getChartType()===pc}function Ig(e){return void 0!==e&&e.getChartType()===hc}function Og(e){return void 0!==e&&e.getChartType()===dc}function Tg(e){return void 0!==e&&e.getChartType()===uc}function Lg(e){return void 0!==e&&"getXAxisTitleText"in e}function Dg(e){return void 0!==e&&[pc,mc,gc,uc,hc,yc].includes(e.getChartType())&&"getYAxisTitleText"in e}function $g(e){return void 0!==e&&"getRotatedState"in e}function Ug(e){return void 0!==e&&"getDataLabelsVisibility"in e}function Bg(e){return void 0!==e&&"getGuideVisibility"in e}function Rg(e){return void 0!==e&&"addXAxisGuide"in e}function Ng(e){return void 0!==e&&"addYAxisGuide"in e}function Mg(e){return void 0!==e&&"getLegendVisibility"in e}function Vg(e,t){return void 0!==e&&e.getChartType()===t}async function qg(e){const{config:t,layer:r}=e,i=e.chartType;let a;switch(i){case pc:a=new Gh;break;case hc:a=new rg;break;case dc:a=new vg;break;case gc:a=new $p;break;case uc:a=new Pg;break;case mc:a=new _p;break;case fc:a=new Ip;break;default:a=void 0;}return await(a?.setup({layer:r,config:t})),void 0!==i&&Vg(a,i)?a:void 0}Rc(Cg,[Xf,Vc,Mc,Wf,Yf,hh,ph,xh]);

exports.$g = $g;
exports.Bg = Bg;
exports.Dg = Dg;
exports.Eg = Eg;
exports.Ig = Ig;
exports.Jf = Jf;
exports.Lg = Lg;
exports.Mg = Mg;
exports.Ng = Ng;
exports.Og = Og;
exports.Rg = Rg;
exports.Tg = Tg;
exports.Ug = Ug;
exports.Zf = Zf;
exports.ah = ah;
exports.eh = eh;
exports.ih = ih;
exports.kg = kg;
exports.nh = nh;
exports.oh = oh;
exports.qg = qg;
exports.rh = rh;
exports.th = th;
