/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See LICENSE.md for details.
 * v4.32.1
 */
import{r as t,c as i,g as s,h as e,H as a,a as r}from"./p-ccd1c88c.js";import{u as h,M as c,a5 as n,C as o,ad as l,Z as d,r as g,ae as m}from"./p-33adbadb.js";import{H as b,d as f,e as p}from"./p-e3e7b132.js";import{m as v,s as u,j as x,U as k,f as y,D as w,b as C}from"./p-13fd0548.js";import{d as j,s as D}from"./p-0a7e5e35.js";import{d as L}from"./p-1da73821.js";import{b as S}from"./p-5a099bb2.js";import"./p-247471b0.js";import"./p-d49d148b.js";import"./p-1383309b.js";const P="label",M="section-label",$="arcgis-charts-rtl",O=class{constructor(s){t(this,s),this.arcgisChartsConfigHistogramDataPopoverChange=i(this,"arcgisChartsConfigHistogramDataPopoverChange",7),this.arcgisChartsConfigPopoverOpenChange=i(this,"arcgisChartsConfigPopoverOpenChange",7),this.arcgisChartsConfigDataChangeError=i(this,"arcgisChartsConfigDataChangeError",7),this.histogramPopover=null,this.onBinCountChange=L((()=>{const{value:t}=this.binInputElement;void 0!==t&&y(t,this.binInputElement.min,this.binInputElement.max)?this.binCountChange(t):v({inputElement:this.binInputElement,status:C.INVALID})}),k.DebounceTimer),this.onBinCountSliderChange=L((()=>{this.binCountChange(this.binSliderElement.value?.toString()??"")}),k.DebounceTimer),this.binCountChange=t=>{const i=Number.parseInt(t);this.model.getBinCount()!==i&&(this.model.setBinCount(i),v({inputElement:this.binInputElement,status:C.IDLE}))},this.onColorElementSelect=(t,i,s)=>{t.type===h.SFS?(this.selectedOverlaySymbol=void 0,this.selectedBinColorSymbol=t,this.contentKind=b.fillSymbol):(this.selectedBinColorSymbol=void 0,this.selectedOverlaySymbol=t,this.overlaySectionElement=s,this.contentKind=b.lineSymbol),this.popoverHeading=i,this.setupPopover()},this.onNumericFieldSelect=()=>{this.selectedNumericalField=this.model.getNumericField(),this.contentKind=b.numericFields,this.setupPopover()},this.onTransformationSelect=()=>{this.selectedTransformationType=this.model.getDataTransformationType(),this.contentKind=b.transformation,this.setupPopover()},this.onBinColorSelect=()=>{this.onColorElementSelect(this.model.getBinColor(),this.strings.binColor)},this.onNormalDistColorSelect=()=>{this.onColorElementSelect(this.model.getNormalDistColor(),this.strings.normalDistStyle,this.normalDistOverlayElement)},this.onMeanColorSelect=()=>{this.onColorElementSelect(this.model.getMeanColor(),this.strings.meanStyle,this.meanOverlayElement)},this.onMedianColorSelect=()=>{this.onColorElementSelect(this.model.getMedianColor(),this.strings.medianStyle,this.medianOverlayElement)},this.onStandardDevColorSelect=()=>{this.onColorElementSelect(this.model.getStandardDevColor(),this.strings.standardDevStyle,this.standardDevOverlayElement)},this.onBinColorChange=t=>{this.model.setColorMatch(!1),this.model.setBinColor(t.detail)},this.onMeanStyleChange=t=>{this.model.setMeanColor(t.detail)},this.onMedianStyleChange=t=>{this.model.setMedianColor(t.detail)},this.onStandardDevStyleChange=t=>{this.model.setStandardDevColor(t.detail)},this.onNormalDistStyleChange=t=>{this.model.setNormalDistColor(t.detail)},this.onShowDataLabelsChange=t=>{this.model.setDataLabelsVisibility(t.target.checked)},this.onOverlayListChange=t=>{const i=t.target.selectedItems.map((t=>t.value)),s=i.includes(f.Mean),e=i.includes(f.Median),a=i.includes(f.StandardDev),r=i.includes(f.NormalDist);this.meanOverlayVisible!==s&&(this.model.setShowMeanOverlay(s),this.meanOverlayVisible=s),this.medianOverlayVisible!==e&&(this.model.setShowMedianOverlay(e),this.medianOverlayVisible=e),this.standardDevOverlayVisible!==a&&(this.model.setShowStandardDevOverlay(a),this.standardDevOverlayVisible=a),this.normalDistOverlayVisible!==r&&(this.model.setShowNormalDistOverlay(r),this.normalDistOverlayVisible=r)},this.onModelConfigChange=()=>{this.updatesOccurred=this.updatesOccurred+1},this.openChange=t=>{this.arcgisChartsConfigPopoverOpenChange.emit(t.detail)},this.updateProps=async t=>{try{if(null!=t.detail){const{contentKind:i}=t.detail,{value:s}=t.detail;switch(j(D),i){case b.transformation:this.model.setDataTransformationType(s??S.None);break;case b.numericFields:await this.model.setNumericField(s??"")}}}catch(t){throw this.arcgisChartsConfigDataChangeError.emit({error:t,model:this.model}),t}this.removeHistogramDataPopover(),this.updatesOccurred=this.updatesOccurred+1},this.updateSymbolProps=t=>{if(void 0!==this.selectedBinColorSymbol)this.onBinColorChange(t);else switch(this.selectedOverlayKind){case f.Mean:this.onMeanStyleChange(t);break;case f.Median:this.onMedianStyleChange(t);break;case f.StandardDev:this.onStandardDevStyleChange(t);break;case f.NormalDist:this.onNormalDistStyleChange(t)}},this.popoverClose=()=>{this.selectedOverlaySymbol=void 0,this.selectedBinColorSymbol=void 0,this.selectedNumericalField=void 0,this.selectedTransformationType=void 0},this.model=void 0,this.meanValue=void 0,this.medianValue=void 0,this.standardDevValue=void 0,this.minValue=void 0,this.maxValue=void 0,this.sumValue=void 0,this.nullsValue=void 0,this.countValue=void 0,this.layerFieldsInfo=void 0,this.open=!0,this.selectedBinColorSymbol=void 0,this.selectedOverlaySymbol=void 0,this.selectedNumericalField=void 0,this.selectedTransformationType=void 0,this.updatesOccurred=0}modelChange(t,i){i?.removeEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange),t?.addEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange)}disconnectedCallback(){this.removeHistogramDataPopover(),this.model.removeEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange)}async componentWillLoad(){({strings:this.strings,direction:this.direction}=await c(this.hostElement,s("."))),this.modelChange(this.model),this.onModelConfigChange()}removeHistogramDataPopover(){null!==this.histogramPopover&&(this.histogramPopover.open=!1,this.histogramPopover=n(this.histogramPopover)),this.histogramPopoverChange(!1)}renderFieldSelect(){return e("arcgis-charts-config-field-select",{label:o(this.layerFieldsInfo,this.model.getNumericField()),ref:t=>{this.numericalFieldSelectionElement=t},onClick:this.onNumericFieldSelect})}renderDataTransformationType(){return e("arcgis-charts-config-field-select",{label:this.getDataTransformationLabel(),ref:t=>{this.transformationSelectionElement=t},onClick:this.onTransformationSelect})}getDataTransformationLabel(){let t;switch(this.model.getDataTransformationType()){case S.None:t=this.strings.none;break;case S.Log:t=this.strings.log;break;case S.Sqrt:t=this.strings.sqRt;break;default:t=this.strings.none}return t}renderColorListItem(t){const{textLabel:i,key:s,value:a,selected:r,ref:h,colorAction:c,color:n}=t,[o,l,d,g]=[...n??m()];return e("calcite-list-item",{label:i??"",key:s,value:a,selected:r,ref:h??void 0},e("calcite-action",{text:"color",slot:"actions-end",appearance:"transparent",onClick:c},e("calcite-icon",{icon:"line-solid",style:void 0!==o?{color:`rgba(${o},${l},${d},${(g??0)/255})`}:{}})))}renderBinColorElement(){const[t,i,s,a]=[...this.model.getBinColor()?.color??l(0)];return e("calcite-list",{label:"",selectionMode:"single",selectionAppearance:"border"},e("calcite-list-item",{label:this.strings.binColor,value:"selectTrendLine",ref:t=>{this.binColorSectionElement=t},onClick:this.onBinColorSelect},e("calcite-icon",{slot:"content-end",icon:"square-f",style:{color:`rgba(${t},${i},${s},${a/255})`},class:"icon-select"})))}renderNormalDistOverlay(){return this.normalDistOverlayVisible=this.model.getShowNormalDistOverlay(),this.renderColorListItem({textLabel:this.strings.normalDist,color:this.model.getNormalDistColor()?.color,key:f.NormalDist,value:f.NormalDist,selected:this.model.getShowNormalDistOverlay(),ref:t=>{this.normalDistOverlayElement=t},colorAction:this.onNormalDistColorSelect})}renderMeanOverlay(){return this.meanOverlayVisible=this.model.getShowMeanOverlay(),this.renderColorListItem({textLabel:this.strings.mean,textDescription:this.meanValue,color:this.model.getMeanColor()?.color,key:f.Mean,value:f.Mean,selected:this.model.getShowMeanOverlay(),ref:t=>{this.meanOverlayElement=t},colorAction:this.onMeanColorSelect})}renderStandardDevOverlay(){return this.standardDevOverlayVisible=this.model.getShowStandardDevOverlay(),this.renderColorListItem({textLabel:this.strings.standardDev,textDescription:this.standardDevValue,color:this.model.getStandardDevColor()?.color,key:f.StandardDev,value:f.StandardDev,selected:this.model.getShowStandardDevOverlay(),ref:t=>{this.standardDevOverlayElement=t},colorAction:this.onStandardDevColorSelect})}renderMedianOverlay(){return this.medianOverlayVisible=this.model.getShowMedianOverlay(),this.renderColorListItem({textLabel:this.strings.median,textDescription:this.medianValue,color:this.model.getMedianColor()?.color,key:f.Median,value:f.Median,selected:this.model.getShowMedianOverlay(),ref:t=>{this.medianOverlayElement=t},colorAction:this.onMedianColorSelect})}renderOverlayList(){return e("calcite-list",{label:"",selectionMode:"multiple",onCalciteListChange:this.onOverlayListChange},this.renderNormalDistOverlay(),this.renderMeanOverlay(),this.renderMedianOverlay(),this.renderStandardDevOverlay())}renderStatItem(t){return e("calcite-list-item",{label:this.strings[t],description:this.getStatValue(t),key:t,value:t})}renderStats(){const t=Object.values(p);return e("calcite-list",{label:"",class:"histogram-stats-list"},t.map((t=>this.renderStatItem(t))))}renderShowDataLabels(){return e("div",{class:"row"},e("calcite-label",{class:P,layout:"inline-space-between"},this.strings.showDataLabels,e("calcite-switch",{checked:this.model.getDataLabelsVisibility(),onCalciteSwitchChange:this.onShowDataLabelsChange})))}renderBinsSection(){return e("div",{class:"bin-count-container"},e("calcite-slider",{labelHandles:!0,min:1,max:64,step:1,snap:!0,value:this.model.getBinCount(),ref:t=>{this.binSliderElement=t},onCalciteSliderChange:this.onBinCountSliderChange}),e("calcite-input",{type:"number",min:1,max:64,step:1,value:u(this.model.getBinCount()),onCalciteInputInput:this.onBinCountChange,ref:t=>{this.binInputElement=t}}))}render(){const t=this.renderFieldSelect(),i=this.renderDataTransformationType();return e(a,{key:"437ac8257c7316b1a29f8bb2ffb91311c7a1a42b",class:{[$]:"rtl"===this.direction}},e("div",{key:"0c5c164d9362be063d5533b925e4cf69b8e69f28",class:M},this.strings.variables),e("calcite-label",{key:"8ee73ae612e7e52d03d2afaf839c701e36febbad",class:P},this.strings.number,t),e("calcite-label",{key:"07fd6197abe0dbbb3ef43808a12cef53b49d078c",class:P},this.strings.withTransformation,i),e("div",{key:"c6bd23a4f4a24143f94fa5f668d1d5d8a09c942b",class:M},this.strings.bins),e("p",{key:"058f0ea15093c1c2d8ae07c633ac3401cb7de01d",class:"bin-text-padding"},this.strings.numberOfBins),this.renderBinsSection(),this.renderBinColorElement(),e("div",{key:"d48ec21d02b4c6a89ecb088191b0e4634078fcc6",class:M},this.strings.overlays),this.renderOverlayList(),this.renderShowDataLabels(),e("div",{key:"bb7cd7facaf52137b6104a9065ac0597d17c2535",class:M},this.strings.statistics),this.renderStats())}getStatValue(t){let i;switch(t){case p.Min:i=this.minValue;break;case p.Max:i=this.maxValue;break;case p.Sum:i=this.sumValue;break;case p.Nulls:i=this.nullsValue;break;case p.Count:i=this.countValue+this.nullsValue;break;case p.CountExcludingNulls:i=this.countValue;break;case p.Mean:i=this.meanValue;break;case p.Median:i=this.medianValue;break;case p.StandardDev:i=this.standardDevValue;break;default:i=void 0}return i=x(i,w),i}histogramPopoverChange(t){this.arcgisChartsConfigHistogramDataPopoverChange.emit({open:t,element:this.histogramPopover})}setupPopover(){if(this.removeHistogramDataPopover(),this.histogramPopover=d(g.HistogramDataPopover,{layerFieldsInfo:this.layerFieldsInfo,updateProps:this.updateProps,updateSymbolProps:this.updateSymbolProps,popoverClose:this.popoverClose,openChange:this.openChange}),null!=this.histogramPopover){switch(this.contentKind){case b.transformation:this.histogramPopover.selectedTransformationType=this.selectedTransformationType,this.histogramPopover.referenceElement=this.transformationSelectionElement,this.histogramPopover.placement="trailing",this.histogramPopover.selectedBinColor=void 0,this.histogramPopover.selectedOverlaySymbol=void 0,this.histogramPopover.selectedNumericField=void 0;break;case b.numericFields:this.histogramPopover.selectedNumericField=this.selectedNumericalField,this.histogramPopover.referenceElement=this.numericalFieldSelectionElement,this.histogramPopover.placement="trailing",this.histogramPopover.selectedBinColor=void 0,this.histogramPopover.selectedOverlaySymbol=void 0,this.histogramPopover.selectedTransformationType=void 0;break;case b.fillSymbol:this.histogramPopover.referenceElement=this.binColorSectionElement,this.histogramPopover.selectedBinColor=this.selectedBinColorSymbol,this.histogramPopover.headingTitle=this.popoverHeading,this.histogramPopover.placement="leading",this.histogramPopover.selectedOverlaySymbol=void 0,this.histogramPopover.selectedTransformationType=void 0,this.histogramPopover.selectedNumericField=void 0;break;case b.lineSymbol:this.selectedOverlayKind=this.overlaySectionElement.value,this.histogramPopover.referenceElement=this.overlaySectionElement,this.histogramPopover.selectedOverlaySymbol=this.selectedOverlaySymbol,this.histogramPopover.headingTitle=this.popoverHeading,this.histogramPopover.placement="leading",this.histogramPopover.selectedBinColor=void 0,this.histogramPopover.selectedTransformationType=void 0,this.histogramPopover.selectedNumericField=void 0}this.histogramPopover.contentKind=this.contentKind,this.histogramPopover.open=!0,this.addPopover()}}addPopover(){null!=this.histogramPopover&&(document.body.contains(this.histogramPopover)||document.body.appendChild(this.histogramPopover))}static get assetsDirs(){return["assets"]}get hostElement(){return r(this)}static get watchers(){return{model:["modelChange"]}}};O.style=".hide{display:none}.am5-modal{width:100%;height:100%;position:absolute;z-index:100000;top:0px;left:0px}.am5-modal-curtain{top:0px;left:0px;width:100%;height:100%;position:absolute;background:rgba(255, 255, 255, 0.5);z-index:100}.am5-modal-wrapper{top:0px;left:0px;width:100%;height:100%;position:absolute;display:flex;align-items:center;justify-content:center;white-space:nowrap;background:rgba(255, 255, 255, 0.5);z-index:101}.am5-modal-content{display:inline-block;padding:1.2em;vertical-align:middle;text-align:left;white-space:normal;background:rgb(255, 255, 255);border-radius:4px;box-shadow:rgba(0, 0, 0, 0.45) 0px 0px 36px 0px;color:rgb(0, 0, 0)}.arcgis-charts-modal{box-shadow:none !important}.arcgis-charts-modal-header{background-color:rgba(0, 0, 0, 0.05);font-weight:bold;padding:4px 4px 4px 4px}.show{display:block}.notifyPanel{flex:0 1 auto}.disable-interactions{pointer-events:none}.dim-text{color:var(--arcgis-charts-dim-text)}:host{display:flex;flex-direction:column;width:var(--arcgis-charts-config-calcite-block-default-width);margin:var(--arcgis-charts-config-calcite-block-default-margin)}calcite-list-item{margin-left:var(--arcgis-charts-config-margin-minor);margin-right:var(--arcgis-charts-config-margin-minor)}.label{display:flex;margin-left:var(--arcgis-charts-config-margin-minor);margin-right:var(--arcgis-charts-config-margin-minor);margin-bottom:var(--arcgis-charts-config-margin-minor);justify-content:space-between}.text{display:flex;margin-left:var(--arcgis-charts-config-margin-minor);width:calc(100% - 1.5rem);height:2rem;margin-bottom:var(--arcgis-charts-config-margin-minor);justify-content:space-between}.row{padding-top:1rem}.bin-count-container{display:flex;flex-wrap:wrap;padding:var(--arcgis-charts-config-margin-minor)}.bin-count-container>calcite-slider{flex-grow:10;min-width:50%}.bin-count-container>calcite-input{margin-bottom:0.5rem;margin-top:var(--arcgis-charts-config-margin-minor);margin-left:var(--arcgis-charts-config-margin-minor);width:5rem}.section-label{display:flex;margin:var(--arcgis-charts-config-margin-major) var(--arcgis-charts-config-margin-minor);justify-content:space-between;align-items:center;font-weight:var(--calcite-font-weight-medium);font-size:var(--calcite-font-size-0)}.bin-text-padding{margin-left:var(--arcgis-charts-config-margin-minor)}:host(.arcgis-charts-rtl) .text{margin-left:0rem;margin-right:var(--arcgis-charts-config-margin-minor)}:host(.arcgis-charts-rtl) .bin-count-container>calcite-input{margin-left:0rem;margin-right:var(--arcgis-charts-config-margin-minor)}:host(.arcgis-charts-rtl) .heading-text{margin-left:0rem;margin-right:var(--arcgis-charts-config-margin-minor)}:host(.arcgis-charts-rtl) .bin-text-padding{margin-left:0rem;margin-right:var(--arcgis-charts-config-margin-minor)}.histogram-stats-list{pointer-events:none;margin-bottom:var(--arcgis-charts-config-margin-minor)}";export{O as arcgis_charts_config_histogram_data}