/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See LICENSE.md for details.
 * v4.32.1
 */
import{r as e,c as t,g as i,h as s,H as o,a as r}from"./p-ccd1c88c.js";import{u as a,M as l,A as n,I as c,C as h,L as p}from"./p-33adbadb.js";import{U as d,g as m}from"./p-13fd0548.js";import{H as g}from"./p-e3e7b132.js";import{b}from"./p-5a099bb2.js";const f="color-picker",y="js-app-flyout",v="header",u="pick-list-item-label",C="arcgis-chart-rtl",x=class{constructor(i){e(this,i),this.arcgisChartsConfigHistogramPopoverSymbolChange=t(this,"arcgisChartsConfigHistogramPopoverSymbolChange",7),this.arcgisChartsConfigHistogramPopoverChange=t(this,"arcgisChartsConfigHistogramPopoverChange",7),this.arcgisChartsConfigPopoverClose=t(this,"arcgisChartsConfigPopoverClose",7),this.arcgisChartsConfigPopoverOpenChange=t(this,"arcgisChartsConfigPopoverOpenChange",7),this.closePopover=()=>{(this.open||!1===this.popoverElement?.open)&&(this.open=!1,this.arcgisChartsConfigPopoverClose.emit())},this.overlaySymbolChange=e=>{this.arcgisChartsConfigHistogramPopoverSymbolChange.emit(e.detail)},this.fillColorChange=e=>{const t=e.detail,[i,s,o]=t;this.arcgisChartsConfigHistogramPopoverSymbolChange.emit({type:a.SFS,color:[i,s,o,255*p]})},this.onPickListChange=e=>{null!==e.target&&(this.arcgisChartsConfigHistogramPopoverChange.emit({contentKind:this.contentKind,value:e.target.selectedItems[0].value}),this.open=!1)},this.layerFieldsInfo=void 0,this.headingTitle=void 0,this.selectedNumericField=void 0,this.selectedTransformationType=void 0,this.selectedOverlaySymbol=void 0,this.selectedBinColor=void 0,this.referenceElement=void 0,this.contentKind=void 0,this.placement=void 0,this.open=void 0}openChange(){this.arcgisChartsConfigPopoverOpenChange.emit({open:this.open})}async reposition(){await(this.popoverElement?.reposition())}async componentWillLoad(){({strings:this.strings,direction:this.direction}=await l(this.hostElement,i(".")))}componentDidLoad(){this.openChange()}componentDidRender(){setTimeout((async()=>{await(this.picklist?.setFocus())}),d.PopoverTimer),n(this.popoverElement,this.open)}componentDidUpdate(){setTimeout((()=>{this.popoverElement?.reposition()}),d.PopoverTimer)}renderFillColor(){return s("arcgis-charts-config-color-style",{class:f,header:this.headingTitle??this.strings.fillColor,enableClose:!0,open:this.open,selectedColor:this.selectedBinColor?.color,onArcgisChartsConfigColorStyleChange:this.fillColorChange,onArcgisChartsConfigColorStyleClose:this.closePopover})}renderOverlayStyle(){return s("arcgis-charts-config-line-style",{class:f,open:this.open,enableClose:!0,header:this.headingTitle??this.strings.lineStyle,lineStyle:this.selectedOverlaySymbol,onArcgisChartsConfigLineStyleClose:this.closePopover,onArcgisChartsConfigLineStyleChange:this.overlaySymbolChange})}renderFieldSelect(){const e=this.buildPickListItems(g.numericFields);return s("calcite-panel",{class:"field-select-panel",closable:!0,closed:!this.open,onCalcitePanelClose:this.closePopover},s("div",{slot:"header-content",class:v},this.strings.numericalFieldHeader),s("calcite-list",{label:"",selectionMode:"single",selectionAppearance:"border",class:u,filterEnabled:!0,onCalciteListChange:this.onPickListChange,ref:e=>{this.picklist=e}},e))}renderTransformationSelect(){const e=this.buildPickListItems(g.transformation);return s("calcite-panel",{class:"transformation-panel",closable:!0,closed:!this.open,onCalcitePanelClose:this.closePopover},s("div",{slot:"header-content",class:v},this.strings.transformationHeader),s("calcite-list",{label:"",selectionMode:"single",selectionAppearance:"border",class:u,filterEnabled:!1,onCalciteListChange:this.onPickListChange},e))}buildPickListItems(e){const t=[];if(e===g.numericFields)for(let e=0;e<this.layerFieldsInfo?.length;e+=1){const i=this.layerFieldsInfo[e];c(i)&&t.push(s("calcite-list-item",{key:i.name,label:h(this.layerFieldsInfo,i.name),value:i.name,selected:this.selectedNumericField===i.name}))}else{const e=[s("calcite-list-item",{label:this.strings.none,key:b.None,value:b.None,selected:this.selectedTransformationType===b.None}),s("calcite-list-item",{label:this.strings.log,key:b.Log,value:b.Log,selected:this.selectedTransformationType===b.Log}),s("calcite-list-item",{label:this.strings.sqRt,key:b.Sqrt,value:b.Sqrt,selected:this.selectedTransformationType===b.Sqrt})];t.push(...e)}return t}render(){return s(o,{key:"82938fb4fd825c30c06d053a9ae2a82f1746a53a",class:{[C]:"rtl"===this.direction,[y]:!0}},s("calcite-popover",{key:"17948d475aeacf7b2c09995f41a465a425e69939",class:this.getPopoverClass(),referenceElement:this.referenceElement,placement:this.placement,onCalcitePopoverClose:this.closePopover,open:this.open,offsetDistance:m(this.placement),ref:e=>{this.popoverElement=e},label:""},this.renderContentType()))}getPopoverClass(){return this.contentKind===g.fillSymbol||this.contentKind===g.lineSymbol?"symbol-property-popover":""}renderContentType(){switch(this.contentKind){case g.fillSymbol:return this.renderFillColor();case g.lineSymbol:return this.renderOverlayStyle();case g.numericFields:return this.renderFieldSelect();case g.transformation:return this.renderTransformationSelect();default:return}}static get assetsDirs(){return["assets"]}get hostElement(){return r(this)}static get watchers(){return{open:["openChange"]}}};x.style=".hide{display:none}.am5-modal{width:100%;height:100%;position:absolute;z-index:100000;top:0px;left:0px}.am5-modal-curtain{top:0px;left:0px;width:100%;height:100%;position:absolute;background:rgba(255, 255, 255, 0.5);z-index:100}.am5-modal-wrapper{top:0px;left:0px;width:100%;height:100%;position:absolute;display:flex;align-items:center;justify-content:center;white-space:nowrap;background:rgba(255, 255, 255, 0.5);z-index:101}.am5-modal-content{display:inline-block;padding:1.2em;vertical-align:middle;text-align:left;white-space:normal;background:rgb(255, 255, 255);border-radius:4px;box-shadow:rgba(0, 0, 0, 0.45) 0px 0px 36px 0px;color:rgb(0, 0, 0)}.arcgis-charts-modal{box-shadow:none !important}.arcgis-charts-modal-header{background-color:rgba(0, 0, 0, 0.05);font-weight:bold;padding:4px 4px 4px 4px}.show{display:block}.notifyPanel{flex:0 1 auto}.disable-interactions{pointer-events:none}.dim-text{color:var(--arcgis-charts-dim-text)}.right{display:block;text-align:right}.inline{display:inline-flex;flex-wrap:wrap}.symbol-property-popover{min-width:300px}.symbol-property-popover .inline{align-items:center;margin-bottom:1rem;padding:0 1rem}.symbol-property-popover .inline calcite-action{margin-left:0.2rem}.symbol-property-popover .inline input,.symbol-property-popover .inline select{width:4rem;margin-left:0.5rem;height:24px}.symbol-property-popover .inline select{width:6rem}.symbol-property-popover .color calcite-icon{margin-left:0.5rem}.symbol-property-popover .color .color-picker{padding:1rem}.header{margin:0;font-weight:bolder}.pick-list-item-label{font-size:small}.field-select-panel{max-height:60vh}.transformation-panel{width:calc(var(--calcite-panel-width-multiplier) * 12vw);max-width:calc(var(--calcite-panel-width-multiplier) * 300px);min-width:calc(var(--calcite-panel-width-multiplier) * 150px);min-width:calc(var(--calcite-panel-width-multiplier) * 170px)}:host(.arcgis-charts-rtl) .symbol-property-popover .inline calcite-action{margin-left:0rem;margin-right:0.2rem}:host(.arcgis-charts-rtl) .symbol-property-popover .inline input,:host(.arcgis-charts-rtl) .symbol-property-popover .inline select{margin-left:0rem;margin-right:0.5rem}:host(.arcgis-charts-rtl) .symbol-property-popover .color calcite-icon{margin-left:0rem;margin-right:0.5rem}";export{x as A}