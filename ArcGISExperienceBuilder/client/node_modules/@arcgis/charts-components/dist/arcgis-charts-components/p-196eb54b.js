/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See LICENSE.md for details.
 * v4.32.1
 */
import{r as i,c as t,h as s,H as h,g as e,a as c}from"./p-ccd1c88c.js";import{V as a,U as o,z as l,G as n,M as d}from"./p-33adbadb.js";import{S as r}from"./p-e3e7b132.js";import{d as v,c as u,g as b}from"./p-2ab1655a.js";import{f}from"./p-93c0b1f3.js";const g=class{constructor(s){i(this,s),this.arcgisDefaultActionSelect=t(this,"arcgisDefaultActionSelect",7),this.arcgisActionBarToggle=t(this,"arcgisActionBarToggle",7),this.expandAction=null,this.onDefaultActionClick=i=>{const t=i.target,s={actionId:t.id,actionActive:!1};switch(t.id){case a.EditChart:this.editChartToggle=this.editChartToggle===o.Active?o.Inactive:o.Active,s.actionActive=this.editChartToggle===o.Active;break;case a.Legend:this.legendToggle=this.legendToggle===o.Active?o.Inactive:o.Active,s.actionActive=this.legendToggle===o.Active,void 0!==this.chartElement&&(this.chartElement.legendVisibility=s.actionActive);break;case a.RotateChart:this.rotateChartToggle=this.rotateChartToggle===o.Active?o.Inactive:o.Active,s.actionActive=this.rotateChartToggle===o.Active,void 0!==this.chartElement&&(this.chartElement.rotation=s.actionActive);break;case a.FilterBySelection:this.filterBySelectionToggle=this.filterBySelectionToggle===o.Active?o.Inactive:o.Active,s.actionActive=this.filterBySelectionToggle===o.Active,void 0!==this.chartElement&&(this.chartElement.filterBySelection=s.actionActive);break;case a.FilterByExtent:this.filterByExtentToggle=this.filterByExtentToggle===o.Active?o.Inactive:o.Active,s.actionActive=this.filterByExtentToggle===o.Active,void 0!==this.chartElement&&(this.chartElement.filterByExtent=s.actionActive);break;case a.Selection:this.selectionToggle=o.Active,this.zoomToggle=o.Inactive,s.actionActive=this.selectionToggle===o.Active,void 0!==this.chartElement&&(this.chartElement.actionMode=this.actionBarSelectionMode);break;case a.Zoom:this.zoomToggle=o.Active,this.selectionToggle=o.Inactive,s.actionActive=this.zoomToggle===o.Active,void 0!==this.chartElement&&(this.chartElement.actionMode=l.Zoom);break;case a.ClearSelection:s.actionActive=this.clearSelectionToggle===o.Active,this.chartElement?.clearSelection();break;case a.FullExtent:s.actionActive=this.fullExtentToggle===o.Active,this.chartElement?.resetZoom();break;case a.SwitchSelection:s.actionActive=this.switchSelectionToggle===o.Active,this.chartElement?.switchSelection()}this.arcgisDefaultActionSelect.emit(s)},this.handleCalciteActionBarToggle=()=>{this.expanded=this.calciteActionBar.expanded,this.setCustomActionsExpanded(),this.arcgisActionBarToggle.emit(this.expanded)},this.handleMouseOver=i=>{if(this.calciteActionBar.expanded)this.actionTooltip=v(this.actionTooltip);else{const t=i.target;let s;void 0!==this.actionTooltip&&(this.actionTooltip=v(this.actionTooltip)),"CALCITE-ACTION"===t?.tagName?s=t:"DIV"===t?.tagName&&(s=t.firstChild),void 0!==s&&(this.actionTooltip=u(s.text,s),this.actionTooltip.open=!0)}},this.handleMouseOut=()=>{null!==this.actionTooltip&&(this.actionTooltip=v(this.actionTooltip))},this.handleSlotChange=i=>{const t=i.target.assignedElements();for(const i of t)i.onmouseover=this.handleMouseOver},this.chartType=void 0,this.chartElement=void 0,this.forceDisableActions=!1,this.editChartToggle=o.Inactive,this.editChartState=n.Disabled,this.editChartTitle=void 0,this.legendToggle=o.Inactive,this.legendState=n.Enabled,this.legendTitle=void 0,this.rotateChartToggle=o.Inactive,this.rotateChartState=n.Enabled,this.rotateChartTitle=void 0,this.filterBySelectionToggle=o.Inactive,this.filterBySelectionState=n.Enabled,this.filterBySelectionTitle=void 0,this.filterByExtentToggle=o.Inactive,this.filterByExtentState=n.Enabled,this.filterByExtentTitle=void 0,this.actionBarSelectionMode=l.MultiSelectionWithCtrlKey,this.selectionToggle=o.Inactive,this.selectionState=n.Enabled,this.selectionTitle=void 0,this.zoomToggle=o.Inactive,this.zoomState=n.Enabled,this.zoomTitle=void 0,this.fullExtentToggle=o.Inactive,this.fullExtentState=n.Enabled,this.fullExtentTitle=void 0,this.clearSelectionToggle=o.Inactive,this.clearSelectionState=n.Enabled,this.clearSelectionTitle=void 0,this.switchSelectionToggle=o.Inactive,this.switchSelectionState=n.Enabled,this.switchSelectionTitle=void 0,this.expanded=!1,this.hiddenActions=[a.EditChart],this.actionTooltip=null}renderDefaultActions(){const i=b(this.chartType).filter((i=>!this.hiddenActions?.includes(i))),t=i.includes(a.EditChart),h=i.includes(a.Legend),e=i.includes(a.RotateChart),c=i.includes(a.FilterBySelection),l=i.includes(a.FilterByExtent)&&!this.chartElement?.layer?.isTable,d=i.includes(a.Zoom),r=i.includes(a.Selection),v=i.includes(a.ClearSelection),u=i.includes(a.FullExtent),f=i.includes(a.SwitchSelection);return[h||e?s("calcite-action-group",null,t?s("div",{onMouseOver:this.handleMouseOver},s("calcite-action",{id:a.EditChart,icon:"gear",text:this.commonStrings?.actions.editChart,active:this.editChartToggle===o.Active,disabled:this.editChartState===n.Disabled||this.forceDisableActions,onClick:this.onDefaultActionClick})):null,h?s("div",{onMouseOver:this.handleMouseOver},s("calcite-action",{id:a.Legend,text:this.legendTitle??this.strings?.legend,active:this.legendToggle===o.Active,disabled:this.legendState===n.Disabled||this.forceDisableActions,onClick:this.onDefaultActionClick},s("calcite-icon",{icon:"legend",scale:"s",flipRtl:!0}))):null,e?s("div",{onMouseOver:this.handleMouseOver},s("calcite-action",{id:a.RotateChart,icon:"rotate",text:this.rotateChartTitle??this.strings?.rotateChart,active:this.rotateChartToggle===o.Active,disabled:this.rotateChartState===n.Disabled||this.forceDisableActions,onClick:this.onDefaultActionClick})):null):null,c||l?s("calcite-action-group",null,c?s("div",{onMouseOver:this.handleMouseOver},s("calcite-action",{id:a.FilterBySelection,icon:"selection-filter",text:this.filterBySelectionTitle??this.strings?.filterBySelection,active:this.filterBySelectionToggle===o.Active,disabled:this.filterBySelectionState===n.Disabled||this.forceDisableActions,onClick:this.onDefaultActionClick})):null,l?s("div",{onMouseOver:this.handleMouseOver},s("calcite-action",{id:a.FilterByExtent,icon:"extent-filter",text:this.filterByExtentTitle??this.strings?.filterByExtent,active:this.filterByExtentToggle===o.Active,disabled:this.filterByExtentState===n.Disabled||this.forceDisableActions,onClick:this.onDefaultActionClick})):null):null,r||d||u||v||f?s("calcite-action-group",null,d?s("div",{onMouseOver:this.handleMouseOver},s("calcite-action",{id:a.Zoom,icon:"magnifying-glass",text:this.zoomTitle??this.strings?.zoom,active:this.zoomToggle===o.Active,disabled:this.zoomState===n.Disabled||this.forceDisableActions,onClick:this.onDefaultActionClick})):null,r?s("div",{onMouseOver:this.handleMouseOver},s("calcite-action",{id:a.Selection,icon:"cursor-selection",text:this.selectionTitle??this.strings?.selection,active:this.selectionToggle===o.Active,disabled:this.selectionState===n.Disabled||this.forceDisableActions,onClick:this.onDefaultActionClick})):null,v?s("div",{onMouseOver:this.handleMouseOver},s("calcite-action",{id:a.ClearSelection,icon:"erase",text:this.clearSelectionTitle??this.strings?.clearSelection,active:this.clearSelectionToggle===o.Active,disabled:this.clearSelectionState===n.Disabled||this.forceDisableActions,onClick:this.onDefaultActionClick})):null,u?s("div",{onMouseOver:this.handleMouseOver},s("calcite-action",{id:a.FullExtent,icon:"zoom-out-fixed",text:this.fullExtentTitle??this.strings?.fullExtent,active:this.fullExtentToggle===o.Active,disabled:this.fullExtentState===n.Disabled||this.forceDisableActions,onClick:this.onDefaultActionClick})):null,f?s("div",{onMouseOver:this.handleMouseOver},s("calcite-action",{id:a.SwitchSelection,icon:"arrow-right-left",text:this.switchSelectionTitle??this.strings?.switchSelection,active:this.switchSelectionToggle===o.Active,disabled:this.switchSelectionState===n.Disabled||this.forceDisableActions,onClick:this.onDefaultActionClick})):null):null]}setCustomActionsExpanded(){this.el.querySelectorAll("calcite-action").forEach((i=>{i.textEnabled=this.expanded}))}render(){return s(h,{key:"7866dc987a9a9c0418078e3768b7dcf73ec3ad30"},s("calcite-action-bar",{key:"178e184337330b8b55f4bd2c9db4e44c2f451f4b",class:"action-bar",onCalciteActionBarToggle:this.handleCalciteActionBarToggle,onMouseOut:this.handleMouseOut,expanded:this.expanded,ref:i=>{this.calciteActionBar=i},messageOverrides:{expand:this.strings.expand,collapse:this.strings.collapse},"overflow-actions-disabled":!0},s("slot",{key:"a4bcab94d4c7065083a9007749d163eb93920bac",name:r.customActionTop,onSlotchange:this.handleSlotChange}),this.renderDefaultActions(),s("slot",{key:"18170b43997487ca9e6c295b2556be1e442afd4f",name:r.customActionBelow,onSlotchange:this.handleSlotChange})))}async componentWillLoad(){var i;this.commonStrings=await f(this.el),({strings:this.strings}=await d(this.el,e("."),!0)),this.chartElement=(i=this.el.parentElement,"arcgis-chart"===i?.tagName.toLowerCase()?this.el.parentElement:void 0)}componentDidRender(){this.handleExpandTooltip()}disconnectedCallback(){this.actionTooltip?.remove()}handleExpandTooltip(){null===this.expandAction&&(this.expandAction=this.calciteActionBar.shadowRoot?.querySelector("calcite-action")??null,null!==this.expandAction&&(this.expandAction.addEventListener("mouseenter",(()=>{this.calciteActionBar?.expanded||null===this.expandAction||document.body.contains(this.actionTooltip)||(this.actionTooltip=u(this.strings.expand,this.expandAction),this.actionTooltip.open=!0)})),this.expandAction.addEventListener("mouseleave",(()=>{this.calciteActionBar?.expanded||null===this.actionTooltip||(this.actionTooltip=v(this.actionTooltip))})),this.expandAction.addEventListener("click",(()=>{this.calciteActionBar?.expanded&&null!==this.actionTooltip&&(this.actionTooltip=v(this.actionTooltip))}))))}static get assetsDirs(){return["assets"]}get el(){return c(this)}};g.style=".action-bar{display:flex;flex-direction:column;height:100%;border-right:1px solid var(--calcite-color-border-2);overflow-x:hidden}";export{g as A}