/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See LICENSE.md for details.
 * v4.32.1
 */
export{A as arcgis_charts_config_bar_chart,a as arcgis_charts_config_box_plot,b as arcgis_charts_config_histogram,e as arcgis_charts_config_line_chart,d as arcgis_charts_config_pie_chart,c as arcgis_charts_config_scatter_plot}from"./p-8ff57358.js";import{r as t,c as i,g as s,h,H as o,a as r}from"./p-ccd1c88c.js";import{M as n,a4 as l,O as p,Z as g,r as m,a5 as f}from"./p-33adbadb.js";import"./p-e3e7b132.js";import"./p-7f5c1ec3.js";import"./p-0f852d31.js";import"./p-76417cef.js";import"./p-d49d148b.js";import"./p-2d6b2c24.js";import"./p-a2f87a76.js";import"./p-bb01c887.js";import"./p-9333f322.js";const C=class{constructor(s){t(this,s),this.arcgisChartsConfigViewChartSelect=i(this,"arcgisChartsConfigViewChartSelect",7),this.arcgisChartsConfigViewChartDelete=i(this,"arcgisChartsConfigViewChartDelete",7),this.arcgisChartsConfigViewChartEdit=i(this,"arcgisChartsConfigViewChartEdit",7),this.arcgisChartsConfigViewChartAddChart=i(this,"arcgisChartsConfigViewChartAddChart",7),this.chartRenamePopover=null,this.onAddChartClick=t=>{this.arcgisChartsConfigViewChartAddChart.emit({referenceElement:t.target,layerId:this.layer?.id.toString()})},this.onChartSelect=t=>{const i=t.currentTarget;let s;"calcite-list-item"===i?.localName?s=i.value:"calcite-icon"===i?.localName&&(s=i.parentNode.value),this.arcgisChartsConfigViewChartSelect.emit({chartId:s})},this.chartEditSelect=()=>{this.disableEditing||(this.arcgisChartsConfigViewChartEdit.emit({chartId:this.selectedActionChartId}),this.chartActionClosed(this.selectedActionChartId))},this.chartRenameSelect=t=>{if(!this.disableEditing){const i=t.target.closest("calcite-list-item"),s=this.modelList?.find((t=>t.getChartId()===this.selectedActionChartId));null!==i&&(this.renameReferenceElement=i),this.arcgisChartsConfigViewChartSelect.emit({chartId:this.selectedActionChartId}),this.chartTitle=s?.getTitleText()??"",this.renameOpen=!0,this.setupRenamePopover()}},this.chartDeleteSelect=()=>{this.disableEditing||(this.arcgisChartsConfigViewChartDelete.emit({chartId:this.selectedActionChartId}),this.selectedActionChartId="")},this.chartActionClosed=t=>{t!==this.selectedActionChartId||this.renameOpen||(this.selectedActionChartId="")},this.chartActionOpened=t=>{this.selectedActionChartId=t},this.popoverClose=()=>{const t=this.modelList?.find((t=>t.getChartId()===this.selectedChartId));this.chartTitle=t?.getTitleText()??"",this.selectedActionChartId="",this.renameOpen=!1,this.removeChartRenamePopover()},this.onChartRename=t=>{if(!this.disableEditing){this.chartTitle=t.detail.name;const i=this.modelList?.find((t=>t.getChartId()===this.selectedActionChartId));i?.setTitleText(this.chartTitle),this.selectedActionChartId="",this.renameOpen=!1,this.removeChartRenamePopover()}},this.onModelConfigChange=()=>{this.updatesOccurred=this.updatesOccurred+1},this.selectedChartId=void 0,this.layer=void 0,this.modelList=void 0,this.noGroup=!1,this.disableEditing=!1,this.chartTitle=void 0,this.renameOpen=void 0,this.selectedActionChartId=void 0,this.updatesOccurred=0}async modelListChange(t,i){i.forEach((t=>{t.removeEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange)})),t.forEach((t=>{t.addEventListener("arcgisChartsModelConfigChange",this.onModelConfigChange)}))}async componentWillLoad(){({strings:this.strings}=await n(this.hostElement,s(".")))}disconnectedCallback(){this.removeChartRenamePopover()}render(){return h(o,{key:"ffcb1017f90767e00a29624a19765210cd13b802",class:"view-chart-component"},this.buildChartList())}buildChartList(){const t=this.modelList?.map(((t,i)=>{const s=t.getChartId(),e=t.getTitleText(),a=l(t.getConfig());return h("calcite-list-item",{label:e??s??p(this.strings.chartTitle,{index:i.toString()}),selected:this.selectedChartId===(s?.toString()??i.toString()),value:s??i.toString(),onClick:this.onChartSelect},h("calcite-icon",{slot:"content-start",icon:a}),this.disableEditing?null:h("calcite-dropdown",{slot:"actions-end",overlayPositioning:"fixed",placement:"bottom-end",onCalciteDropdownClose:()=>this.chartActionClosed(s??""),onCalciteDropdownOpen:()=>this.chartActionOpened(s??""),class:"dropdown-popup"},h("calcite-action",{scale:"l",text:this.strings.chartActions,color:"dark",slot:"trigger",active:s===this.selectedActionChartId},h("calcite-icon",{icon:"ellipsis"})),h("calcite-dropdown-group",{selectionMode:"none"},h("calcite-dropdown-item",{accessKey:"edit",onCalciteDropdownItemSelect:this.chartEditSelect},this.strings.edit),h("calcite-dropdown-item",{accessKey:"rename",onCalciteDropdownItemSelect:this.chartRenameSelect},this.strings.rename),h("calcite-dropdown-item",{accessKey:"delete",onCalciteDropdownItemSelect:this.chartDeleteSelect},this.strings.delete))))}))??null;return this.layer?h("calcite-list",{label:"",selectionMode:"single-persist",selectionAppearance:"border"},this.noGroup?t:h("calcite-list-item-group",{key:this.layer.id,heading:this.layer.title??this.layer.id.toString()},t),this.disableEditing?null:h("div",{class:"add-chart-container"},h("calcite-fab",{slot:"fab",appearance:"outline-fill",kind:"neutral",hidden:!1,textEnabled:!0,text:this.strings.addChart,label:this.strings.addChart,onClick:this.onAddChartClick,scale:"s"}))):null}setupRenamePopover(){null===this.chartRenamePopover&&(this.chartRenamePopover=g(m.ChartRenamePopover,{name:this.chartTitle,popoverReferenceElement:this.renameReferenceElement,onChartRename:this.onChartRename,popoverClose:this.popoverClose}),document.body.appendChild(this.chartRenamePopover)),null!==this.chartRenamePopover&&(this.chartRenamePopover.open=this.renameOpen,this.chartRenamePopover.name=this.chartTitle,this.chartRenamePopover.popoverReferenceElement=this.renameReferenceElement)}removeChartRenamePopover(){null!==this.chartRenamePopover&&(this.chartRenamePopover.open=!1,this.chartRenamePopover=f(this.chartRenamePopover))}static get assetsDirs(){return["assets"]}get hostElement(){return r(this)}static get watchers(){return{modelList:["modelListChange"]}}};C.style=".view-chart-component{width:var(--arcgis-charts-config-panel-width);height:var(--arcgis-charts-config-panel-height)}.add-chart-container{display:flex;justify-content:center;padding:2rem 0;background-color:var(--calcite-color-background)}.header{margin:0}.dropdown-popup{position:relative}";export{C as arcgis_charts_config_view_charts}