"use strict";(self.webpackChunkarcgis_experience_builder_design_system=self.webpackChunkarcgis_experience_builder_design_system||[]).push([[3230],{"./stories/jimu-core/expression-resolver-component/expression-resolver-component.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:()=>Basic,default:()=>__WEBPACK_DEFAULT_EXPORT__});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_storybook_decorators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./.storybook/decorators/index.tsx"),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const __WEBPACK_DEFAULT_EXPORT__={title:"Components/jimu-core/ExpressionResolverComponent",component:jimu_core__WEBPACK_IMPORTED_MODULE_0__.zT_,decorators:[_storybook_decorators__WEBPACK_IMPORTED_MODULE_1__.QY,_storybook_decorators__WEBPACK_IMPORTED_MODULE_1__.Xx],argTypes:{}},expression=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.J3Z)({name:"{POP2000}",parts:[{dataSourceId:"ds1",exp:"{POP2000}",isFromRepeatedDataSourceContext:!1,jimuFieldName:"POP2000",type:jimu_core__WEBPACK_IMPORTED_MODULE_0__.une.Field}]}),Basic=(args=>{const{displayName,__docgenInfo}=args,expressionBuilderProps=__rest(args,["displayName","__docgenInfo"]),[result,setResult]=jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.useState(null),[dispatchDs,setDispatchDs]=jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.useState(!1);return jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.useEffect((()=>((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Vp3)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.tRc.updateStoreState((0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Vp3)().getState().merge({appConfig:{dataSources:{ds1:{id:"ds1",type:jimu_core__WEBPACK_IMPORTED_MODULE_0__.hg5.FeatureLayer,url:"https://sampleserver6.arcgisonline.com/arcgis/rest/services/Census/MapServer/1"}},widgets:{w1:{id:"w1"}}}},{deep:!0}))),setDispatchDs(!0),()=>{jimu_core__WEBPACK_IMPORTED_MODULE_0__.zAk.getInstance().destroyAllDataSources()})),[]),jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.Fragment,null,dispatchDs&&jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(jimu_core__WEBPACK_IMPORTED_MODULE_0__.CMH,Object.assign({},expressionBuilderProps,{onChange:setResult}),jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("h4",null,"Expression is: ",expression.name),jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("h4",null,"Result is: ",(null==result?void 0:result.isSuccessful)?result.value:"")))}).bind({});Basic.args={useDataSources:(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.J3Z)([{dataSourceId:"ds1",mainDataSourceId:"ds1"}]),expression,widgetId:"w1"},Basic.parameters={docs:{source:{type:"code"}}},Basic.parameters={...Basic.parameters,docs:{...Basic.parameters?.docs,source:{originalSource:"args => {\n  // eslint-disable-next-line\n  const {\n    displayName,\n    __docgenInfo,\n    ...expressionBuilderProps\n  } = args;\n  const [result, setResult] = React.useState<SingleExpressionResolveResult>(null);\n  const [dispatchDs, setDispatchDs] = React.useState<boolean>(false);\n  React.useEffect(() => {\n    getAppStore().dispatch(appActions.updateStoreState(getAppStore().getState().merge({\n      appConfig: {\n        dataSources: {\n          ds1: {\n            id: 'ds1',\n            type: DataSourceTypes.FeatureLayer,\n            url: 'https://sampleserver6.arcgisonline.com/arcgis/rest/services/Census/MapServer/1'\n          }\n        },\n        widgets: {\n          w1: {\n            id: 'w1'\n          }\n        }\n      }\n    } as any, {\n      deep: true\n    })));\n    setDispatchDs(true);\n    return () => {\n      DataSourceManager.getInstance().destroyAllDataSources();\n    };\n  }, []);\n  return <>\r\n    {dispatchDs && <ExpressionResolverComponent {...expressionBuilderProps} onChange={setResult as any}>\r\n        <h4>Expression is: {expression.name}</h4>\r\n        <h4>Result is: {result?.isSuccessful ? result.value : ''}</h4>\r\n      </ExpressionResolverComponent>}\r\n  </>;\n}",...Basic.parameters?.docs?.source}}}}}]);