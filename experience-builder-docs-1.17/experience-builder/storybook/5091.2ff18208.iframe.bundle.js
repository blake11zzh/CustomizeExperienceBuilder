"use strict";(self.webpackChunkarcgis_experience_builder_design_system=self.webpackChunkarcgis_experience_builder_design_system||[]).push([[5091],{"../jimu-arcgis/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Rv:()=>mapview_manager_MapViewManager});var jimu_core=__webpack_require__("../jimu-core/index.tsx");function convertSubtypeGrouplayerRecordsToSubtypeSublayerRecords(subtypeGroupLayerDataSource,subtypeGrouplayerRecords){var _a;const result={};if(subtypeGroupLayerDataSource.type!==jimu_core.hg5.SubtypeGroupLayer)return result;const allRecords={},subtypeFieldName=subtypeGroupLayerDataSource.getSubtypeField();subtypeGrouplayerRecords.forEach((subtypeGrouplayerRecord=>{const subtypeCode=subtypeGrouplayerRecord.getFieldValue(subtypeFieldName);null!=subtypeCode&&(allRecords[subtypeCode]||(allRecords[subtypeCode]=[]),allRecords[subtypeCode].push(subtypeGrouplayerRecord))}));let subtypeSublayerDataSources=null===(_a=subtypeGroupLayerDataSource.getChildDataSources)||void 0===_a?void 0:_a.call(subtypeGroupLayerDataSource);return subtypeSublayerDataSources||(subtypeSublayerDataSources=[]),subtypeSublayerDataSources.forEach((subtypeSublayerDataSource=>{if(subtypeSublayerDataSource.type!==jimu_core.hg5.SubtypeSublayer)return;const subtypeCode=subtypeSublayerDataSource.getSubtypeCode(),subtypeSublayerRecords=(allRecords[subtypeCode]||[]).map((subtypeGrouplayerRecord=>{const subtypeSublayerRecord=subtypeGrouplayerRecord.clone();return subtypeSublayerRecord.dataSource=subtypeSublayerDataSource,subtypeSublayerRecord}));result[subtypeSublayerDataSource.id]=subtypeSublayerRecords})),result}function publishSelectionChangeMessage(jimuLayerView,records){const mapWidgetId=jimuLayerView.getMapWidgetId(),message=new jimu_core.w5X(mapWidgetId,records,[jimuLayerView.layerDataSourceId]);jimu_core.BXF.getInstance().publishMessage(message),jimuLayerView.type===jimu_core.iy2.SubtypeGroupLayer?function publishSelectionChangeMessageForSubtypeSublayerWhenSubtypeGroupLayerSelectionChange(mapWidgetId,jimuLayerView,newSelectedSubtypeGrouplayerRecords){const subtypeGroupLayerDataSource=jimuLayerView.getLayerDataSource();if(!subtypeGroupLayerDataSource)return;const subtypeRecordsObj=convertSubtypeGrouplayerRecordsToSubtypeSublayerRecords(subtypeGroupLayerDataSource,newSelectedSubtypeGrouplayerRecords),messageManager=jimu_core.BXF.getInstance();Object.keys(subtypeRecordsObj).forEach((subtypeSublayerDataSourceId=>{const subtypeSublayerRecords=subtypeRecordsObj[subtypeSublayerDataSourceId];if(subtypeSublayerRecords.length>0){const message=new jimu_core.w5X(mapWidgetId,subtypeSublayerRecords,[subtypeSublayerDataSourceId]);messageManager.publishMessage(message)}}))}(mapWidgetId,jimuLayerView,records):jimuLayerView.type===jimu_core.iy2.SubtypeSublayer&&function publishSelectionChangeMessageForSubtypeGroupLayerWhenSubtypeSublayerSelectionChange(mapWidgetId,jimuLayerView,newSelectedSubtypeSublayerRecordsOfSublayer){const subtypeSublayerDataSource=jimuLayerView.getLayerDataSource();if(!subtypeSublayerDataSource)return;const subtypeGroupLayerDataSource=subtypeSublayerDataSource.parentDataSource;if(!subtypeGroupLayerDataSource)return;const subtypeFieldName=getSubtypeField(jimuLayerView.layer),subtypeCodeOfCurrentSubtypeLayer=jimuLayerView.layer.subtypeCode,newSelectedSubtypeGrouplayerRecords=subtypeGroupLayerDataSource.getSelectedRecords().filter((subtypeGrouplayerRecord=>subtypeGrouplayerRecord.getFieldValue(subtypeFieldName)!==subtypeCodeOfCurrentSubtypeLayer)),newSelectedSubtypeGrouplayerRecordsForThisSublayer=function convertSubtypeSublayerRecordsToSubtypeGrouplayerRecords(subtypeGroupLayerDataSource,subtypeSublayerRecords){return subtypeSublayerRecords.map((subtypeSublayerRecord=>{const subtypeGrouplayerRecord=subtypeSublayerRecord.clone();return subtypeGrouplayerRecord.dataSource=subtypeGroupLayerDataSource,subtypeGrouplayerRecord}))}(subtypeGroupLayerDataSource,newSelectedSubtypeSublayerRecordsOfSublayer);newSelectedSubtypeGrouplayerRecords.push(...newSelectedSubtypeGrouplayerRecordsForThisSublayer);const message=new jimu_core.w5X(mapWidgetId,newSelectedSubtypeGrouplayerRecords,[subtypeGroupLayerDataSource.id]);jimu_core.BXF.getInstance().publishMessage(message)}(mapWidgetId,jimuLayerView,records)}function getSubtypeField(layer){if(!layer)return null;const subtypeField=layer.subtypeField;if(subtypeField){const fieldInfo=layer.getField(subtypeField);if(fieldInfo&&fieldInfo.name)return fieldInfo.name}return subtypeField}function sortJimuLayerViewsByLayerOrder(jimuLayerViews){return(jimuLayerViews=(jimuLayerViews=jimuLayerViews||[]).slice()).length>=2&&jimuLayerViews.sort(((jimuLayerView1,jimuLayerView2)=>{const hierarchyLevel1=null==jimuLayerView1?void 0:jimuLayerView1.hierarchyLevel,hierarchyLevel2=null==jimuLayerView2?void 0:jimuLayerView2.hierarchyLevel;return hierarchyLevel1&&hierarchyLevel2?function compareVersion(version1,version2){const nums1=version1.split(".").map((item=>parseInt(item))),nums2=version2.split(".").map((item=>parseInt(item)));for(;nums1.length>0&&nums2.length>0;){const num1=nums1.shift(),num2=nums2.shift();if(num1<num2)return-1;if(num1>num2)return 1}if(nums1.length>0)return 1;if(nums2.length>0)return-1;return 0}(hierarchyLevel1,hierarchyLevel2):0})),jimuLayerViews}var __awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};function arcgis_js_api_module_loader_loadArcGISJSAPIModules(modules){return __awaiter(this,void 0,void 0,(function*(){return yield(0,jimu_core.e$n)(modules)}))}var zoomto_utils_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};let TileInfo=null;function zoomTo(view,target,options){return zoomto_utils_awaiter(this,void 0,void 0,(function*(){if(!view)return yield Promise.reject(new Error("Invalid target."));if(!target)return yield Promise.reject(new Error("Invalid target."));let Graphic,Extent,Layer;options||(options={});const modules=yield arcgis_js_api_module_loader_loadArcGISJSAPIModules(["esri/Graphic","esri/geometry/Extent","esri/layers/Layer","esri/layers/support/TileInfo"]);[Graphic,Extent,Layer,TileInfo]=modules;const padding=options.padding;padding&&view.padding&&(view.padding.left=padding.left||0,view.padding.right=padding.right||0,view.padding.top=padding.top||0,view.padding.bottom=padding.bottom||0);let error=null;try{function isLayerLike(layer){return!!layer&&(layer instanceof Layer||"esri.layers.buildingSublayers.BuildingComponentSublayer"===layer.declaredClass||"esri.layers.support.SubtypeSublayer"===layer.declaredClass)}target instanceof Extent?yield zoomToExtent(view,target,options.scale):Array.isArray(target)&&target.length&&target[0]instanceof Graphic?yield zoomToGraphics(view,target,options.scale):Array.isArray(target)&&target.length&&target[0]instanceof Array&&target[0][0]instanceof Graphic?yield function zoomToArrayGraphics(view,arrayGraphics,scale){return zoomto_utils_awaiter(this,void 0,void 0,(function*(){if(0===arrayGraphics.length)return Promise.resolve();if(1===arrayGraphics.length)return zoomToGraphics(view,arrayGraphics[0],scale);{const promises=[];arrayGraphics.forEach((graphics=>{promises.push(graphicsExtent(view,graphics).catch((()=>null)))}));let fullExtent=null;return Promise.all(promises).then((extents=>(extents.forEach((extent=>{extent&&(fullExtent=fullExtent?fullExtent.union(extent):extent)})),zoomToExtent(view,fullExtent,scale))))}}))}(view,target,options.scale):isLayerLike(target)?yield zoomToLayer(view,target,null,null,options):target.layer&&isLayerLike(target.layer)&&target.extent&&target.extent instanceof Extent?yield zoomToLayer(view,target.layer,null,target.extent,options):target.layer&&isLayerLike(target.layer)&&Array.isArray(target.graphics)?0===target.graphics.length?yield zoomToLayer(view,target.layer,null,null,options):target.graphics.length&&target.graphics[0]instanceof Graphic&&(yield zoomToLayer(view,target.layer,target.graphics,null,options)):Array.isArray(target)&&target.length&&isLayerLike(target[0])?yield function zoomToLayers(view,layers,options){return zoomto_utils_awaiter(this,void 0,void 0,(function*(){if(1===(null==layers?void 0:layers.length))return zoomToLayer(view,layers[0],null,null,options);{let fullExtent=null;const layerExtentPromises=[];return layers.forEach((layer=>layerExtentPromises.push(layerExtent(view,layer,null==options?void 0:options.queryParams)))),Promise.all(layerExtentPromises).then((extents=>(extents.forEach((extent=>{extent&&(fullExtent=fullExtent?fullExtent.union(extent):extent)})),goTo(view,fullExtent))))}}))}(view,target,options):error=new Error("Invalid target.")}catch(err){error=err}return view.padding&&(view.padding.left=0,view.padding.right=0,view.padding.top=0,view.padding.bottom=0),error?(console.warn("zoomTo warning",error),Promise.reject(error)):Promise.resolve()}))}function zoomToGraphics(view,graphics,scale){return zoomto_utils_awaiter(this,void 0,void 0,(function*(){return"3d"!==view.type||scale?graphicsExtent(view,graphics).then((extent=>zoomto_utils_awaiter(this,void 0,void 0,(function*(){return zoomToExtent(view,extent,scale)})))).catch((e=>zoomto_utils_awaiter(this,void 0,void 0,(function*(){return Promise.reject(new Error(e))})))):view.goTo(graphics)}))}function zoomToLayer(view,layer,graphics,extent,options){return zoomto_utils_awaiter(this,void 0,void 0,(function*(){let targetExtent,scale=null==options?void 0:options.scale;if(targetExtent=extent&&isValidExtent(extent)?extent:graphics&&graphics.length>0?yield graphicsExtent(view,graphics):yield layerExtent(view,layer,null==options?void 0:options.queryParams),!isValidExtent(targetExtent))return Promise.reject(new Error("Invalid extent."));const resultExtents=yield projectToSpatialReference([targetExtent],view.spatialReference);if(targetExtent=resultExtents[0],scale)return getExtentForScaleByView(view,targetExtent,scale).then((extent=>goTo(view,extent)));if("3d"===view.type)return view.goTo(targetExtent);{let minScale=layer.minScale||0,maxScale=layer.maxScale||0;if(isSinglePointExtent(targetExtent)){let targetScale=getTargetScale(view,minScale,maxScale,3);return targetScale?(targetExtent=adjustExtentToAspectRatio(view,targetExtent),getExtentForScaleByView(view,targetExtent,targetScale).then((extent=>goTo(view,extent)))):goTo(view,targetExtent)}return targetExtent=adjustExtentToAspectRatio(view,targetExtent),function getScaleForExtent(view,extent){return zoomto_utils_awaiter(this,void 0,void 0,(function*(){return yield arcgis_js_api_module_loader_loadArcGISJSAPIModules(["esri/config","esri/geometry/support/WKIDUnitConversion"]).then((modules=>{let esriConfig,WKIDUnitConversion,scale;[esriConfig,WKIDUnitConversion]=modules;const mapWidth=view.size[0],inchesPerMeter=39.37,decDegToMeters=20015077/180,lookup=WKIDUnitConversion;let wkid,wkt,sr=extent.spatialReference;sr&&(wkid=sr.wkid,wkt=sr.wkt);let unitValue=null;if(wkid)unitValue=lookup.values[lookup[wkid]];else if(wkt&&-1!==wkt.search(/^PROJCS/i)){const result=/UNIT\[([^\]]+)\]\]$/i.exec(wkt);result&&result[1]&&(unitValue=parseFloat(result[1].split(",")[1]))}return scale=extent.width/mapWidth*(unitValue||decDegToMeters)*inchesPerMeter*(esriConfig.screenDPI||96),scale})).catch((e=>zoomto_utils_awaiter(this,void 0,void 0,(function*(){return yield Promise.reject(new Error(null))}))))}))}(view,targetExtent).then((expectScale=>minScale>0&&expectScale>minScale?(minScale=getScaleForNextTileLevel(view,minScale,!0),getExtentForScaleByView(view,targetExtent,minScale).then((extent=>goTo(view,extent)))):expectScale<maxScale?(maxScale=getScaleForNextTileLevel(view,maxScale,!1),getExtentForScaleByView(view,targetExtent,maxScale).then((extent=>goTo(view,extent)))):goTo(view,targetExtent)))}}))}function zoomToExtent(view,extent,scale){return zoomto_utils_awaiter(this,void 0,void 0,(function*(){return isValidExtent(extent=extent.clone())?projectToSpatialReference([extent],view.spatialReference).then((resultExtents=>{let resultExtent=resultExtents&&resultExtents[0];return resultExtent||(resultExtent=extent),isSinglePointExtent(resultExtent)?function convertSinglePointExtent(view,extent){return zoomto_utils_awaiter(this,void 0,void 0,(function*(){const targetScale=getTargetScale(view,0,0,3);return targetScale?yield getExtentForScaleByView(view,extent,targetScale):yield Promise.reject(new Error(null))}))}(view,resultExtent):resultExtent})).then((extent=>scale?getExtentForScaleByView(view,extent,scale,!1):extent)).then((extent=>goTo(view,extent))).catch((e=>zoomto_utils_awaiter(this,void 0,void 0,(function*(){return Promise.reject(new Error(e))})))):Promise.reject(new Error("Invalid extent."))}))}function goTo(view,extent){return new Promise(((resolve,reject)=>{setTimeout((()=>{view.goTo(extent).then((()=>{resolve()})).catch((()=>{reject(new Error(null))}))}),400)}))}function isValidExtent(extent){return extent&&isValidValue(extent.xmin)&&isValidValue(extent.ymin)&&isValidValue(extent.xmax)&&isValidValue(extent.ymax)}function isValidValue(e){return 0===e||!!e}var SinglePointOffSet;function isSinglePointExtent(extent){return extent.xmin+SinglePointOffSet.X===extent.xmax-SinglePointOffSet.X&&extent.ymin+SinglePointOffSet.Y===extent.ymax-SinglePointOffSet.Y}function graphicsExtent(view_1,graphicsParam_1){return zoomto_utils_awaiter(this,arguments,void 0,(function*(view,graphicsParam,option={}){let layer=graphicsParam&&graphicsParam[0]&&graphicsParam[0].layer;return layer&&"scene"===layer.type?yield function graphicsExtentForSceneLayer(graphicsParam,sceneLayer,factor){return zoomto_utils_awaiter(this,void 0,void 0,(function*(){return yield arcgis_js_api_module_loader_loadArcGISJSAPIModules(["esri/rest/support/Query"]).then((modules=>zoomto_utils_awaiter(this,void 0,void 0,(function*(){const[Query]=modules;if(sceneLayer){const query=new Query;return query.objectIds=graphicsParam.map((graphic=>graphic.attributes[sceneLayer.objectIdField])),query.returnGeometry=!0,sceneLayer.queryExtent(query).then((result=>1===result.count?result.extent.expand(3.5):result.extent.expand(2)))}return Promise.reject(new Error(null))})))).catch((e=>zoomto_utils_awaiter(this,void 0,void 0,(function*(){return yield Promise.reject(new Error(e))}))))}))}(graphicsParam,layer,option.factor):"3d"===view.type?yield graphicsExtentBase(graphicsParam,3):yield graphicsExtentBase(graphicsParam)}))}function graphicsExtentBase(graphicsParam,factor){return zoomto_utils_awaiter(this,void 0,void 0,(function*(){return yield arcgis_js_api_module_loader_loadArcGISJSAPIModules(["esri/Graphic","esri/geometry/Extent","esri/geometry/Point"]).then((modules=>{let Graphic,Extent,Point,ext=null,graphics=graphicsParam;[Graphic,Extent,Point]=modules;try{if(graphics&&1===graphics.length&&graphics[0].geometry&&"esri.geometry.Multipoint"===graphics[0].geometry.declaredClass&&1===graphics[0].geometry.points.length){const mPoint=graphics[0].geometry.points[0];graphics=[new Graphic({geometry:new Point({x:mPoint[0],y:mPoint[1],spatialReference:graphics[0].geometry.spatialReference})})]}if(graphics&&1===graphics.length&&graphics[0].geometry&&"esri.geometry.Point"===graphics[0].geometry.declaredClass){const geometry=graphics[0].geometry;ext=new Extent({xmin:geometry.x-SinglePointOffSet.X,ymin:geometry.y-SinglePointOffSet.Y,xmax:geometry.x+SinglePointOffSet.X,ymax:geometry.y+SinglePointOffSet.Y,spatialReference:geometry.spatialReference})}else graphics&&graphics.length>0&&(ext=function _graphicsExtentBase(graphics,Extent){if(!graphics||!graphics.length)return null;let index,fullExtent=null,numGraphics=graphics.length;for(index=0;index<numGraphics;index++){const geometry=graphics[index].geometry;if(!geometry)continue;let extent=geometry.extent;extent||"point"!==geometry.type||null==geometry.x||null==geometry.y||(extent=new Extent({xmin:geometry.x,ymin:geometry.y,xmax:geometry.x,ymax:geometry.y,spatialReference:geometry.spatialReference})),extent&&(fullExtent=fullExtent?fullExtent.union(extent):extent)}if(!fullExtent||fullExtent.width<0||fullExtent.height<0)return null;return fullExtent}(graphics,Extent),ext&&factor&&factor>0&&(ext=ext.expand(factor)));return ext}catch(e){return Promise.reject(new Error(e))}})).catch((e=>zoomto_utils_awaiter(this,void 0,void 0,(function*(){return yield Promise.reject(new Error(e))}))))}))}function getMapLods(view){var _a;let lods=[];const baseLayers=null===(_a=view.map.basemap)||void 0===_a?void 0:_a.baseLayers;return null==baseLayers||baseLayers.forEach((baseLayer=>{baseLayer&&baseLayer.tileInfo&&baseLayer.tileInfo.lods&&lods.length<baseLayer.tileInfo.lods.length&&(lods=baseLayer.tileInfo.lods)})),lods&&0!==lods.length?lods:TileInfo.create().lods}function getTargetScale(view,minScale,maxScale,factor){const mapLods=getMapLods(view);let targetScale,migrationParam=1;if(mapLods){const visibleScales=[],lessThanMaxScales=[];let targetIndex;mapLods.forEach((mapLod=>{minScale>0&&mapLod.scale>minScale||(mapLod.scale<maxScale?lessThanMaxScales.push(mapLod.scale):visibleScales.push(mapLod.scale))})),visibleScales.reverse(),visibleScales.length>=1?(migrationParam=lessThanMaxScales.length?lessThanMaxScales.length/mapLods.length:1,targetIndex=Math.floor((visibleScales.length-1)/(factor/migrationParam)),targetScale=visibleScales[targetIndex]):targetScale=null}else targetScale=0===minScale?null:(minScale-maxScale)/factor;return targetScale}function getScaleForNextTileLevel(view,scale,zoomIn){let i;const mapLods=getMapLods(view);if(mapLods){if(zoomIn){for(i=0;i<mapLods.length;i++)if(mapLods[i].scale<scale)return mapLods[i].scale-1;return mapLods[mapLods.length-1].scale-1}for(i=mapLods.length-1;i>=0;i--)if(mapLods[i].scale>scale)return mapLods[i].scale+1;return mapLods[0].scale+1}return zoomIn?scale-1:scale+1}function adjustExtentToAspectRatio(view,extent){const mapRatio=view.size[0]/view.size[1],extentRatio=extent.width/extent.height,centerX=extent.center.x,centerY=extent.center.y;if(extentRatio>mapRatio){const yBuf=extent.width/mapRatio/2;extent.ymin=centerY-yBuf,extent.ymax=centerY+yBuf}else if(extentRatio<mapRatio){const xBuf=extent.height*mapRatio/2;extent.xmin=centerX-xBuf,extent.xmax=centerX+xBuf}return extent}function getExtentForScaleByView(view_1,extent_1,scale_1){return zoomto_utils_awaiter(this,arguments,void 0,(function*(view,extent,scale,needToAdjustHeightToAspectRatio=!0){return _getExtentFromScale({width:view.size[0],height:view.size[1]},extent,scale,needToAdjustHeightToAspectRatio)}))}function _getExtentFromScale(viewSize_1,extent_1,scale_1){return zoomto_utils_awaiter(this,arguments,void 0,(function*(viewSize,extent,scale,needToAdjustHeightToAspectRatio=!0){return needToAdjustHeightToAspectRatio&&(extent=function adjustHeightToAspectRatio(viewSize,extent){const buf=extent.width*(viewSize.height/viewSize.width)/5,centerY=extent.center.y;return extent.ymin=centerY-buf,extent.ymax=centerY+buf,extent}(viewSize,extent.clone())),yield arcgis_js_api_module_loader_loadArcGISJSAPIModules(["esri/config","esri/geometry/support/WKIDUnitConversion"]).then((modules=>{let esriConfig,WKIDUnitConversion;[esriConfig,WKIDUnitConversion]=modules;const mapWidth=viewSize.width,lookup=WKIDUnitConversion;let wkid,wkt,sr=extent.spatialReference;sr&&(wkid=sr.wkid,wkt=sr.wkt);let unitValue=null;if(wkid)unitValue=lookup.values[lookup[wkid]];else if(wkt&&-1!==wkt.search(/^PROJCS/i)){const result=/UNIT\[([^\]]+)\]\]$/i.exec(wkt);result&&result[1]&&(unitValue=parseFloat(result[1].split(",")[1]))}return extent.expand(scale*mapWidth/(39.37*(unitValue||20015077/180)*(esriConfig.screenDPI||96))/extent.width)})).catch((e=>zoomto_utils_awaiter(this,void 0,void 0,(function*(){return yield Promise.reject(new Error(null))}))))}))}function layerExtent(view,layer,queryParams){return zoomto_utils_awaiter(this,void 0,void 0,(function*(){var _a;!layer.loaded&&layer.load&&(yield layer.load());const isSubtypeGroupLayer="esri.layers.SubtypeGroupLayer"===layer.declaredClass;let fullExtent=layer.fullExtent||layer.initialExtent;if(layer.sublayers&&!isSubtypeGroupLayer||layer.type===jimu_core.iy2.GroupLayer){if(fullExtent)return Promise.resolve(null==fullExtent?void 0:fullExtent.clone());{const sublayerExtentPromises=[];return(layer.type===jimu_core.iy2.GroupLayer?layer.layers:layer.sublayers).forEach((sublayer=>sublayerExtentPromises.push(layerExtent(view,sublayer,queryParams)))),Promise.all(sublayerExtentPromises).then((extents=>{var _a;return extents.forEach((extent=>{extent&&(fullExtent=fullExtent?fullExtent.union(extent):extent)})),fullExtent||(null===(_a=layer.fullExtent)||void 0===_a?void 0:_a.clone())}))}}return(null===(_a=layer.capabilities)||void 0===_a?void 0:_a.query)?yield function queriableLayerExtent(view,layer,queryParams){return zoomto_utils_awaiter(this,void 0,void 0,(function*(){var _a,_b;const defaultExtent=(null===(_a=layer.fullExtent)||void 0===_a?void 0:_a.clone())||(null===(_b=layer.initialExtent)||void 0===_b?void 0:_b.clone()),queryCapabilities=layer.capabilities.query;return queryCapabilities?yield arcgis_js_api_module_loader_loadArcGISJSAPIModules(["esri/rest/support/Query","esri/geometry/Extent"]).then((modules=>{let Query,Extent;[Query,Extent]=modules;const query=new Query;if(query.where=(null==queryParams?void 0:queryParams.where)||(null==layer?void 0:layer.definitionExpression)||"1=1",query.outSpatialReference=view.spatialReference,query.returnGeometry=!0,queryCapabilities.supportsExtent){const isSubtypeSublayer="esri.layers.support.SubtypeSublayer"===layer.declaredClass;return!layer.queryExtent&&isSubtypeSublayer?function queryExtentForSubtypeSublayer(subtypeSublayer,query){return zoomto_utils_awaiter(this,void 0,void 0,(function*(){const subtypeGroupLayer=subtypeSublayer.parent;if(subtypeGroupLayer){const finalQuery=query.clone(),extraWhere=`${getSubtypeField(subtypeSublayer)} = ${subtypeSublayer.subtypeCode}`;finalQuery.where?finalQuery.where=`(${finalQuery.where}) AND (${extraWhere})`:finalQuery.where=extraWhere;const queryResult=yield subtypeGroupLayer.queryExtent(finalQuery);if(queryResult)return queryResult.extent}return null}))}(layer,query):layer.queryExtent(query).then((result=>{var _a,_b;if("3d"===view.type)return result.extent;if(1===result.count&&"point"===layer.geometryType&&(null===(_a=null==result?void 0:result.extent)||void 0===_a?void 0:_a.center)){const center=null===(_b=null==result?void 0:result.extent)||void 0===_b?void 0:_b.center;return new Extent({xmin:center.x-SinglePointOffSet.X,ymin:center.y-SinglePointOffSet.Y,xmax:center.x+SinglePointOffSet.X,ymax:center.y+SinglePointOffSet.Y,spatialReference:view.spatialReference})}return result.extent})).catch((e=>zoomto_utils_awaiter(this,void 0,void 0,(function*(){return yield Promise.resolve(defaultExtent)}))))}return defaultExtent?Promise.resolve(defaultExtent):layer.queryFeatures?layer.queryFeatures(query).then((featureSet=>zoomto_utils_awaiter(this,void 0,void 0,(function*(){return graphicsExtent(view,featureSet.features)})))).catch((e=>zoomto_utils_awaiter(this,void 0,void 0,(function*(){return yield Promise.resolve(defaultExtent)})))):void 0})).catch((e=>zoomto_utils_awaiter(this,void 0,void 0,(function*(){return yield Promise.resolve(defaultExtent)})))):Promise.resolve(defaultExtent)}))}(view,layer,queryParams):yield Promise.resolve(null==fullExtent?void 0:fullExtent.clone())}))}function projectToSpatialReference(geometries,spatialReference){return zoomto_utils_awaiter(this,void 0,void 0,(function*(){return yield arcgis_js_api_module_loader_loadArcGISJSAPIModules(["esri/geometry/Extent"]).then((modules=>{let Extent;return[Extent]=modules,jimu_core.upB.projectToSpatialReference(geometries,spatialReference).then((resultGeometries=>resultGeometries.map((geometry=>{if("extent"!==geometry.type||0!==geometry.width&&0!==geometry.height)return geometry;return new Extent({xmin:geometry.xmin-SinglePointOffSet.X,ymin:geometry.ymin-SinglePointOffSet.Y,xmax:geometry.xmax+SinglePointOffSet.X,ymax:geometry.ymax+SinglePointOffSet.Y,spatialReference:geometry.spatialReference})}))))})).catch((e=>zoomto_utils_awaiter(this,void 0,void 0,(function*(){return yield Promise.reject(new Error(null))}))))}))}!function(SinglePointOffSet){SinglePointOffSet[SinglePointOffSet.X=1e-4]="X",SinglePointOffSet[SinglePointOffSet.Y=1e-4]="Y"}(SinglePointOffSet||(SinglePointOffSet={}));(function portal_utils_getItemQueryStringByTypes(itemTypes){let queryStr="";const allTypes=function getAllItemTypes(){let allTypes=[];const maps1=["Web Map","Web Scene","CityEngine Web Scene"],layers1=["Feature Service","Map Service","Image Service","KML","WMS","Feature Collection","Feature Collection Template","Geodata Service","Globe Service"],tools1=["Geometry Service","Geocoding Service","Network Analysis Service","Geoprocessing Service"],applications1=["Web Mapping Application","Mobile Application","Code Attachment","Operations Dashboard Add In","Operation View"],datafiles1=["Symbol Set","Color Set","Shapefile","CSV","Service Definition","Document Link","Microsoft Word","Microsoft PowerPoint","Microsoft Excel","PDF","Image","Visio Document"],maps2=["Map Document","Map Package","Tile Package","ArcPad Package","Explorer Map","Globe Document","Scene Document","Published Map","Map Template","Windows Mobile Package"],layers2=["Layer","Layer Package","Explorer Layer"],tools2=["Geoprocessing Package","Geoprocessing Sample","Locator Package","Rule Package"],applications2=["Workflow Manager Package","Desktop Application","Desktop Application Template","Code Sample","Desktop Add In","Explorer Add In"];return allTypes=allTypes.concat(maps1).concat(layers1).concat(tools1).concat(applications1).concat(datafiles1),allTypes=allTypes.concat(maps2).concat(layers2).concat(tools2).concat(applications2),allTypes}();if(itemTypes&&itemTypes.length>0&&itemTypes.length>0){let validStr="";for(let i=0;i<itemTypes.length;i++){validStr+=' type:"'+itemTypes[i]+'" ',i!==itemTypes.length-1&&(validStr+=" OR ")}queryStr=" ( "+validStr+" ) ";const removedTypes=itemTypes.concat(allTypes).filter((removedType=>itemTypes.every((itemType=>!itemType.toLowerCase().includes(removedType.toLowerCase())))));for(let i=0;i<removedTypes.length;i++){queryStr+=' -type:"'+removedTypes[i]+'" '}}return queryStr})(["Web Map"]);var BasemapGroupType;!function(BasemapGroupType){BasemapGroupType.EsriDefault="ESRI_DEFAULT",BasemapGroupType.EsriDefault3d="ESRI_DEFAULT_3D",BasemapGroupType.OrgDefault="ORG_DEFAULT"}(BasemapGroupType||(BasemapGroupType={}));const supportedLayerTypes=[jimu_core.iy2.BuildingSceneLayer,jimu_core.iy2.CSVLayer,jimu_core.iy2.FeatureLayer,jimu_core.iy2.GeoJSONLayer,jimu_core.iy2.GraphicsLayer,jimu_core.iy2.MapNotesLayer,jimu_core.iy2.SceneLayer,jimu_core.iy2.SubtypeSublayer];function getAllSnappingLayerItems(jimuMapViews){var _a,_b;const res=[];for(const mapView of jimuMapViews){const layerViews=mapView.getAllJimuLayerViews(),rootDs=getDataSourceById(mapView.dataSourceId);for(const layerView of layerViews){const layer=layerView.layer,layerDsId=dataSourceUtils.getDataSourceIdByJSAPILayer(rootDs,layer),supported=supportedLayerTypes.includes(null===(_a=layerView.layer)||void 0===_a?void 0:_a.type);layerDsId&&supported&&res.push({value:layerDsId,label:layer.title||(null===(_b=layer.sourceJSON)||void 0===_b?void 0:_b.name)})}}return res}const getDataSourceById=dsId=>DataSourceManager.getInstance().getDataSource(dsId);try{getAllSnappingLayerItems.displayName="getAllSnappingLayerItems",getAllSnappingLayerItems.__docgenInfo={description:"",displayName:"getAllSnappingLayerItems",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-arcgis/lib/utils/snapping-utils.tsx#getAllSnappingLayerItems"]={docgenInfo:getAllSnappingLayerItems.__docgenInfo,name:"getAllSnappingLayerItems",path:"../jimu-arcgis/lib/utils/snapping-utils.tsx#getAllSnappingLayerItems"})}catch(__react_docgen_typescript_loader_error){}var jimu_layer_view_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};class jimu_layer_view_JimuLayerView{constructor(options){this.runTimeIsHidden=!1,this.removeableByMapTool=!1,this.id=options.id,this.mapViewManager=options.mapViewManager,this.type=options.type,this.layerDataSourceId=options.layerDataSourceId,this.jimuMapViewId=options.jimuMapViewId,this.jimuLayerId=options.jimuLayerId,this.layer=options.layer,this.parentJimuLayerViewId=options.parentJimuLayerViewId,this.index=options.index,this.fromRuntime=options.fromRuntime,this.isLoaded=!1;let parentLevel="";if(this.parentJimuLayerViewId){const parentJimuLayerView=this.getParentJimuLayerView();parentJimuLayerView&&(parentLevel=parentJimuLayerView.hierarchyLevel)}if(this.hierarchyLevel=parentLevel?`${parentLevel}.${this.index}`:this.index.toString(),this.layer&&(this.originalLayerVisible=this.layer.visible,options.urlHashLayersVisibility&&!this.fromRuntime)){const urlHashVisible=options.urlHashLayersVisibility[this.id];"boolean"==typeof urlHashVisible&&this.layer.visible!==urlHashVisible&&(this.layer.visible=urlHashVisible)}const dsJson=jimu_core.VbA.getDataSourceJsonById(this.getAppConfig(),this.layerDataSourceId);if(dsJson){const initIsHidden=dsJson.isHidden,label=dsJson.label;label&&label!==this.layer.title&&(this.layer.title=label),this.runTimeIsHidden=initIsHidden,initIsHidden&&(this.layer.visible=!initIsHidden)}this.initListenToDataSourceJsonChange(),this.initListenToDataSourceInfoChange(),(this.isLayerUsedByFilter()||this.isLayerUsedBySelection())&&this.createLayerDataSource(),this.watchLayerVisibleChange()}ready(){return jimu_layer_view_awaiter(this,void 0,void 0,(function*(){return Promise.resolve(this)}))}getReactiveUtils(){return jimu_layer_view_awaiter(this,void 0,void 0,(function*(){return this.reactiveUtils||(this.reactiveUtils=yield(0,jimu_core.p8A)("esri/core/reactiveUtils")),this.reactiveUtils}))}whenViewLoaded(){return jimu_layer_view_awaiter(this,void 0,void 0,(function*(){if(!this.view&&!this.isLoaded)try{const jimuMapView=this.getJimuMapView();yield jimuMapView.whenJimuLayerViewLoaded(this.id)}catch(e){console.error(`whenViewLoaded error, jimuLayerViewId: ${this.id}`,e)}}))}validateDataSource(layerDs){return!0}getLayerDataSource(){let layerDs=jimu_core.zAk.getInstance().getDataSource(this.layerDataSourceId);return layerDs&&!this.validateDataSource(layerDs)&&(console.error(`JimuLayerView ${this.id} gets wrong data source type ${layerDs.type}, data source id: ${this.layerDataSourceId}`),layerDs=null),layerDs}createLayerDataSource(){return jimu_layer_view_awaiter(this,void 0,void 0,(function*(){let layerDs=jimu_core.zAk.getInstance().getDataSource(this.layerDataSourceId);if(!layerDs)try{const mapDs=this.getMapDataSource();if(mapDs)layerDs=yield mapDs.createDataSourceByLayer(this.layer);else{layerDs=jimu_core.zAk.getInstance().getDataSource(this.layerDataSourceId);const parentJimuLayerView=this.getParentJimuLayerView();if(parentJimuLayerView){const parentDataSource=parentJimuLayerView.getLayerDataSource();(null==parentDataSource?void 0:parentDataSource.isDataSourceSet())&&parentDataSource.createDataSourceById&&(layerDs=yield parentDataSource.createDataSourceById(this.layerDataSourceId))}}}catch(e){console.error(`JimuLayerView ${this.id} create layer data source failed:`,e),layerDs=null}return layerDs&&!this.validateDataSource(layerDs)&&(console.error(`JimuLayerView ${this.id} gets wrong data source type ${layerDs.type}, data source id: ${this.layerDataSourceId}`),layerDs=null),layerDs}))}getOrCreateLayerDataSource(){return jimu_layer_view_awaiter(this,void 0,void 0,(function*(){let dataSource=this.getLayerDataSource();if(!dataSource)try{dataSource=yield this.createLayerDataSource()}catch(e){dataSource=null,console.error(`JimuLayerView ${this.id} createLayerDataSource error`,e)}return dataSource}))}getParentJimuLayerView(){const jimuMapView=this.getJimuMapView();return jimuMapView&&this.parentJimuLayerViewId?jimuMapView.jimuLayerViews[this.parentJimuLayerViewId]:null}getAllAncestorJimuLayerViews(){let ancestorJimuLayerViews=[];const jimuMapView=this.getJimuMapView();return jimuMapView&&(ancestorJimuLayerViews=jimuMapView.getParentJimuLayerViews(this.id)),ancestorJimuLayerViews}isLayerUsedByFilter(){const dataSourcesJson=(0,jimu_core.Vp3)().getState().appConfig.dataSources||{},queue=Object.values(dataSourcesJson);for(;queue.length>0;){const currDsJson=queue.shift();if(currDsJson.id===this.layerDataSourceId)return!!currDsJson.query;if(this.layerDataSourceId.startsWith(currDsJson.id)&&currDsJson.childDataSourceJsons){const childDataSourceJsons=Object.values(currDsJson.childDataSourceJsons);queue.push(...childDataSourceJsons)}}return!1}isLayerUsedBySelection(){if(this.layerDataSourceId){if(this.isLayerDataSourceUsedBySelection(this.layerDataSourceId))return!0;const associatedLayerDataSourceId=this.layerDataSourceId+"-associated_data_source";if(this.isLayerDataSourceUsedBySelection(associatedLayerDataSourceId))return!0}return!1}isLayerDataSourceUsedBySelection(layerDataSourceId){var _a,_b;if(layerDataSourceId){let dsInfo=null===(_a=(0,jimu_core.Vp3)().getState().dataSourcesInfo)||void 0===_a?void 0:_a[layerDataSourceId];if(!dsInfo){const dataSourceInfosFromUrl=jimu_core.v6q.getDataSourceInfosFromUrlParams(jimu_core.V08.getInstance().getQueryObject(),jimu_core.V08.getInstance().getHashObject()),dsInfoFromUrl=null==dataSourceInfosFromUrl?void 0:dataSourceInfosFromUrl[layerDataSourceId];Array.isArray(null==dsInfoFromUrl?void 0:dsInfoFromUrl.selection)?dsInfo={selectedIds:null==dsInfoFromUrl?void 0:dsInfoFromUrl.selection}:(null==dsInfoFromUrl?void 0:dsInfoFromUrl.selection)&&(dsInfo={selectOptions:null==dsInfoFromUrl?void 0:dsInfoFromUrl.selection})}if(dsInfo&&(dsInfo.selectOptions||(null===(_b=dsInfo.selectedIds)||void 0===_b?void 0:_b.length)>0))return!0}return!1}isLayerVisible(){return[this,...this.mapViewManager.getJimuMapViewById(this.jimuMapViewId).getParentJimuLayerViews(this.id)].every((jimuLayerView=>jimuLayerView.layer.visible))}isLayerVisibleForRendering(){if(!this.isLayerVisible())return!1;const jimuMapView=this.mapViewManager.getJimuMapViewById(this.jimuMapViewId),jimuLayerViews=[this,...jimuMapView.getParentJimuLayerViews(this.id)],mapScale=jimuMapView.view.scale;return jimuLayerViews.every((jimuLayerView=>{const layer=jimuLayerView.layer;if(layer){const minScale=layer.minScale,maxScale=layer.maxScale;return("number"!=typeof maxScale||0===maxScale||mapScale>=maxScale)&&("number"!=typeof minScale||0===minScale||mapScale<=minScale)}return!1}))}getMapSceneView(){const jimuMapView=this.mapViewManager.getJimuMapViewById(this.jimuMapViewId);return jimuMapView&&jimuMapView.view}getMapDataSource(){const mapDsId=this.mapViewManager.getJimuMapViewById(this.jimuMapViewId).dataSourceId;return jimu_core.zAk.getInstance().getDataSource(mapDsId)}onLayerDataSourceInfoChange(preDsInfo,dsInfo){var _a;const newTitle=null===(_a=this.getLayerDataSource())||void 0===_a?void 0:_a.getLabel();if(newTitle&&newTitle!==this.layer.title){const jimuMapView=this.mapViewManager.getJimuMapViewById(this.jimuMapViewId),newTitleWithSuffix=jimu_core.Ruy.getIntl().formatMessage({id:"action_addedData",defaultMessage:jimu_core.kgw.action_addedData},{label:newTitle});this.layer.title=newTitle,jimu_core.vbm.getInstance().updateStateValue(jimuMapView.mapWidgetId,`addToMapDatas.${this.layer.id}.title`,newTitleWithSuffix)}}getJimuMapView(){return this.mapViewManager.getJimuMapViewById(this.jimuMapViewId)}destroy(){this.watchLayerVisibleChangeHandle&&(this.watchLayerVisibleChangeHandle.remove(),this.watchLayerVisibleChangeHandle=null),this.dataSourceInfoObserver&&this.dataSourceInfoObserver(),this.dataSourceJsonObserver&&this.dataSourceJsonObserver()}getAppConfig(){var _a;return window.jimuConfig.isBuilder?null===(_a=(0,jimu_core.Vp3)().getState().appStateInBuilder)||void 0===_a?void 0:_a.appConfig:(0,jimu_core.Vp3)().getState().appConfig}initListenToDataSourceJsonChange(){const mapDsId=this.mapViewManager.getJimuMapViewById(this.jimuMapViewId).dataSourceId;this.dataSourceJsonObserver=(0,jimu_core.Yzm)(this.onLayerDatasourceJsonChange.bind(this),["appConfig","dataSources",mapDsId])}initListenToDataSourceInfoChange(){this.dataSourceInfoObserver=(0,jimu_core.Yzm)(this.onLayerDataSourceInfoChange.bind(this),["dataSourcesInfo",this.layerDataSourceId])}onLayerDatasourceJsonChange(preDsJson,dsJson){if(!jimu_core.VbA.getDataSourceJsonById(this.getAppConfig(),this.layerDataSourceId))return;const currentRuntimeIsHidden=jimu_core.VbA.getDataSourceJsonById(this.getAppConfig(),this.layerDataSourceId).isHidden;this.runTimeIsHidden!==currentRuntimeIsHidden&&(this.runTimeIsHidden=currentRuntimeIsHidden,this.layer.visible=!currentRuntimeIsHidden)}watchLayerVisibleChange(){return jimu_layer_view_awaiter(this,void 0,void 0,(function*(){const layer=this.layer;if(!layer)return;const reactiveUtils=yield this.getReactiveUtils();this.watchLayerVisibleChangeHandle&&(this.watchLayerVisibleChangeHandle.remove(),this.watchLayerVisibleChangeHandle=null),this.watchLayerVisibleChangeHandle=reactiveUtils.watch((()=>layer.visible),(newValue=>{const jimuMapView=this.getJimuMapView();if(!jimuMapView)return;this.fromRuntime||jimuMapView&&jimuMapView.updateUrlHashLayerVisibility();jimuMapView.getAllChildJimuLayerViews(this.id).forEach((childLayerView=>{childLayerView.onParentLayerVisibleChange(newValue)})),jimuMapView.onJimuLayerViewSelfVisibleChange(this)}))}))}onParentLayerVisibleChange(parentNewVisible){}getMapWidgetId(){const jimuMapView=this.getJimuMapView();return(null==jimuMapView?void 0:jimuMapView.mapWidgetId)||""}setRemoveableByMapTool(value){var _a;this.removeableByMapTool=value;const mapWidgetId=this.getMapWidgetId(),layerId=null===(_a=this.layer)||void 0===_a?void 0:_a.id,jimuMapView=this.getJimuMapView();if(mapWidgetId&&layerId&&jimuMapView){const jimuMapViewId=jimuMapView.id,removeableLayerIdsInfo=(jimu_core.vbm.getInstance().getStateValue([mapWidgetId])||{}).removeableLayerIdsInfo||{},removeableLayerIds=[];Object.values(jimuMapView.jimuLayerViews).forEach((jimuLayerView=>{jimuLayerView.removeableByMapTool&&jimuLayerView.layer&&removeableLayerIds.push(jimuLayerView.layer.id)})),removeableLayerIdsInfo[jimuMapViewId]=removeableLayerIds,jimu_core.vbm.getInstance().updateStateValue(mapWidgetId,"removeableLayerIdsInfo",removeableLayerIdsInfo)}}supportTime(){return this.layer&&jimu_core.ZkX.doesJSAPILayerSupportTime(this.layer)}}var jimu_group_layer_view_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};class jimu_group_layer_view_JimuGroupLayerView extends jimu_layer_view_JimuLayerView{constructor(options){super(options),this.url=null,this.url=options.url}ready(){return jimu_group_layer_view_awaiter(this,void 0,void 0,(function*(){var _a,_b,_c,_d;const layers=(null===(_b=null===(_a=this.layer.layers)||void 0===_a?void 0:_a.toArray())||void 0===_b?void 0:_b.reverse())||(null===(_d=null===(_c=this.layer.sublayers)||void 0===_c?void 0:_c.toArray())||void 0===_d?void 0:_d.reverse());if(layers&&layers.length>0)for(let k=0;k<layers.length;k++)yield this.mapViewManager.getJimuMapViewById(this.jimuMapViewId).createJimuLayerView(layers[k],this.jimuLayerId,k,null,this.fromRuntime);return this}))}}var jimu_mapservice_layer_view_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};class jimu_mapservice_layer_view_JimuMapServiceLayerView extends jimu_layer_view_JimuLayerView{constructor(options){super(options),this.url=null,this.url=options.url}ready(){return jimu_mapservice_layer_view_awaiter(this,void 0,void 0,(function*(){var _a,_b;yield this.layer.loadAll?this.layer.loadAll():this.layer.load();const subLayers=null===(_b=null===(_a=this.layer.sublayers)||void 0===_a?void 0:_a.toArray())||void 0===_b?void 0:_b.reverse();if(subLayers&&subLayers.length>0)for(let k=0;k<subLayers.length;k++)yield this.mapViewManager.getJimuMapViewById(this.jimuMapViewId).createJimuLayerView(subLayers[k],this.jimuLayerId,k,null,this.fromRuntime);return this}))}}class jimu_mapimage_layer_view_JimuMapImageLayerView extends jimu_mapservice_layer_view_JimuMapServiceLayerView{constructor(options){super(options),this.url=null,this.originalGdbVersion=null,this.originalGdbVersion=this.layer.gdbVersion}onLayerDataSourceInfoChange(preDsInfo,dsInfo){const layer=this.layer,layerDataSource=this.getLayerDataSource();if(layerDataSource){const timeExtent=layerDataSource.getTimeExtent();layer.useViewTime=null==timeExtent,layer.timeExtent=jimu_core.ZkX.changeJimuTimeToJSAPITimeExtent(timeExtent)}(null==dsInfo?void 0:dsInfo.gdbVersion)&&(layer.gdbVersion=dsInfo.gdbVersion),!(null==dsInfo?void 0:dsInfo.gdbVersion)&&this.originalGdbVersion&&(layer.gdbVersion=this.originalGdbVersion)}validateDataSource(layerDs){return(null==layerDs?void 0:layerDs.type)===jimu_core.hg5.MapService}getLayerDataSource(){return super.getLayerDataSource()}createLayerDataSource(){return super.createLayerDataSource()}}class jimu_tile_layer_view_JimuTileLayerView extends jimu_mapservice_layer_view_JimuMapServiceLayerView{}class jimu_imagery_tile_layer_view_JimuImageryTileLayerView extends jimu_layer_view_JimuLayerView{constructor(options){super(options)}onLayerDataSourceInfoChange(preDsInfo,dsInfo){super.onLayerDataSourceInfoChange(preDsInfo,dsInfo);const layerDs=this.getLayerDataSource();if(layerDs&&layerDs.getCurrentQueryParams){let timeExtent=null;const queryParams=layerDs.getCurrentQueryParams();(null==queryParams?void 0:queryParams.time)&&(timeExtent=jimu_core.ZkX.changeJimuTimeToJSAPITimeExtent(queryParams.time)),this.layer.timeExtent=timeExtent}}getLayerDataSource(){return super.getLayerDataSource()}createLayerDataSource(){return super.createLayerDataSource()}}var jimu_queriable_layer_view_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};const EXB_OID=jimu_core.yC0.EXB_OID;class jimu_queriable_layer_view_JimuQueriableLayerView extends jimu_layer_view_JimuLayerView{constructor(options){super(options),this.highlightFeatureLayer=null,this.highlightFeatureLayerView=null,this.isHighlightFeatureLayerDirty=!1,this.localDefinitionExpression="",this.originalGdbVersion=null,this.selectByQueryAbortController=null,this.selectByQueryProgress=1,this.onMapViewRestore=()=>{var _a;if(this.isHighlightFeatureLayerDirty){this.isHighlightFeatureLayerDirty=!1;let selectedIds=null;const dataSourcesInfo=(0,jimu_core.Vp3)().getState().dataSourcesInfo;if(dataSourcesInfo){const dsInfo=dataSourcesInfo[this.layerDataSourceId];selectedIds=null==dsInfo?void 0:dsInfo.selectedIds}const highlightFeatureLayer=this.highlightFeatureLayer;if(this.highLightLayerCreationPromise=null,this.highlightFeatureLayer=null,this.highlightFeatureLayerView=null,highlightFeatureLayer){const jimuMapView=this.getJimuMapView(),map=null===(_a=null==jimuMapView?void 0:jimuMapView.view)||void 0===_a?void 0:_a.map;map&&map.remove(highlightFeatureLayer)}this.updateHighlightBySelectedIds(selectedIds)}},this.latestHighlightIds||(this.latestHighlightIds=[]),this.originalGdbVersion=this.layer.gdbVersion}ready(){return jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){return this.watchHighlightOptions(),this.watchLayerVisible(),this.watchPopupSelectFeature(),this.watchPopupVisible(),this.watchMapViewRestore(),Promise.resolve(this)}))}destroy(){this.popupSelectFeatureWatchHandle&&(this.popupSelectFeatureWatchHandle.remove(),this.popupSelectFeatureWatchHandle=null),this.releasePopupVisibleWatchHandle(),this.layerVisibleWatchHandle&&(this.layerVisibleWatchHandle.remove(),this.layerVisibleWatchHandle=null),this.highlightOptionsWatchHandle&&(this.highlightOptionsWatchHandle.remove(),this.highlightOptionsWatchHandle=null);const jimuMapView=this.getJimuMapView();jimuMapView&&jimuMapView.removeRestoreListener(this.onMapViewRestore),super.destroy()}isFeatureLayer(){var _a;return"esri.layers.FeatureLayer"===(null===(_a=this.layer)||void 0===_a?void 0:_a.declaredClass)}isSceneLayer(){var _a;return"esri.layers.SceneLayer"===(null===(_a=this.layer)||void 0===_a?void 0:_a.declaredClass)}isBuildingComponentSublayer(){var _a;return"esri.layers.buildingSublayers.BuildingComponentSublayer"===(null===(_a=this.layer)||void 0===_a?void 0:_a.declaredClass)}isImageryLayer(){var _a;return"esri.layers.ImageryLayer"===(null===(_a=this.layer)||void 0===_a?void 0:_a.declaredClass)}isOrientedImageryLayer(){var _a;return"esri.layers.OrientedImageryLayer"===(null===(_a=this.layer)||void 0===_a?void 0:_a.declaredClass)}isSubtypeGroupLayer(){var _a;return"esri.layers.SubtypeGroupLayer"===(null===(_a=this.layer)||void 0===_a?void 0:_a.declaredClass)}getSelectedFeatureCount(){var _a;let count=0;const ds=this.getLayerDataSource();return ds&&(count=ds.getSelectedRecordIds().length),0===count&&(null===(_a=this.latestHighlightIds)||void 0===_a?void 0:_a.length)>0&&(count=this.latestHighlightIds.length),count}getSelectedFeatures(){return jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){var _a;let selectedGraphics=[];const ds=this.getLayerDataSource();let dsSelectedRecords=[];if(ds&&(dsSelectedRecords=ds.getSelectedRecords()),dsSelectedRecords.length>0){const recordFeatures=dsSelectedRecords.map((record=>null==record?void 0:record.feature)),needsClone=!1;selectedGraphics=yield this.getApiGraphicsByRecordFeatures(recordFeatures,needsClone)}else(null===(_a=this.latestHighlightIds)||void 0===_a?void 0:_a.length)>0&&(selectedGraphics=yield this.querySelectedFeaturesFromClient());return selectedGraphics.forEach((graphic=>{graphic.jimuLayerViewId=this.id})),selectedGraphics}))}getApiGraphicsByRecordFeatures(recordFeatures,needsClone){return jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){const[Graphic]=yield(0,jimu_core.e$n)(["esri/Graphic"]),apiGraphics=[];return recordFeatures.forEach((recordFeature=>{let graphic=null;recordFeature&&(graphic="esri.Graphic"===recordFeature.declaredClass?needsClone?recordFeature.clone():recordFeature:Graphic.fromJSON(recordFeature)),graphic&&apiGraphics.push(graphic)})),apiGraphics}))}querySelectedFeaturesFromClient(){return jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){var _a;let features=[];if((null===(_a=this.latestHighlightIds)||void 0===_a?void 0:_a.length)>0){const query={objectIds:this.latestHighlightIds,returnGeometry:!0};features=this.highlightFeatureLayer?yield this.queryFeaturesFromClientHighlightLayer(this.latestHighlightIds):yield this.queryFeaturesFromClient(query)}return features}))}queryFeaturesFromClient(query){return jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){return new Promise((resolve=>jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){const layerView=this.view;if(!layerView||!layerView.queryFeatures)return void resolve([]);yield this.whenCurrentLayerViewNotUpdating();let features=null,queryErr=null;try{const featureSet=yield layerView.queryFeatures(query);features=null==featureSet?void 0:featureSet.features}catch(err){console.error("Query feature from view error.",this.id,err),queryErr=err,features=[]}const is3DLayer="esri.views.3d.layers.SceneLayerView3D"===this.view.declaredClass||"esri.views.3d.layers.BuildingComponentSublayerView3D"===this.view.declaredClass;if(queryErr&&is3DLayer&&query.returnGeometry){const newQuery=Object.assign({},query,{returnGeometry:!1});try{const featureSet=yield layerView.queryFeatures(newQuery);features=null==featureSet?void 0:featureSet.features}catch(err){console.error("Query feature from view error.",this.id,err),features=[]}}features||(features=[]),resolve(features)}))))}))}queryFeaturesFromClientHighlightLayer(objectIds){return jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){return new Promise((resolve=>jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){const layerView=this.highlightFeatureLayerView;if(objectIds||(objectIds=[]),!layerView||0===objectIds.length)return void resolve([]);yield this.whenHighlightLayerViewNotUpdating();this.highlightFeatureLayer.queryFeatures({where:"1=1",returnGeometry:!0}).then((featureSet=>{var _a;const featuresMap={},resultFeatures=[];(null===(_a=featureSet.features)||void 0===_a?void 0:_a.length)>0&&(featureSet.features.forEach((feature=>{const oid=feature.getAttribute(EXB_OID);featuresMap[oid]=feature})),objectIds.forEach((oid=>{const feature=featuresMap[oid];feature&&resultFeatures.push(feature)}))),resolve(resultFeatures)}),(err=>{console.error("Query feature from highlightFeatureLayer error.",err),resolve([])}))}))))}))}selectFeatureById(id,record){return jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){const layerDs=yield this.getOrCreateLayerDataSource();if(layerDs){if(!id&&0===layerDs.getSelectedRecordIds().length)return;if(id){let featureDataRecord=null;featureDataRecord=record&&"esri.Graphic"===record.declaredClass?layerDs.buildRecord(record):record,layerDs.selectRecordById(id+"",featureDataRecord)}else layerDs.selectRecordById(null)}else null!=id?this.highLightFeatures([id]):this.clearHighLight()}))}selectFeaturesByIds(ids,records){return jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){let layerDs=null;if(layerDs=ids.length>0?yield this.getOrCreateLayerDataSource():this.getLayerDataSource(),layerDs){if(0===ids.length&&0===layerDs.getSelectedRecordIds().length)return;layerDs.selectRecordsByIds(ids.map((id=>id+"")),records)}else if(ids.length>0){const numIds=ids.map((id=>Number(id)));this.highLightFeatures(numIds)}else this.clearHighLight()}))}beforeSelectFeaturesByQuery(query){return query}selectFeaturesByQuery(query,selectionMode){selectionMode!==jimu_core.XzR.AddToCurrent&&selectionMode!==jimu_core.XzR.RemoveFromCurrent&&selectionMode!==jimu_core.XzR.SelectFromCurrent&&(selectionMode=jimu_core.XzR.New),query.geometry=query.geometry.toJSON?query.geometry.toJSON():query.geometry,query=jimu_core.CM0.cloneDeep(query);const newQuery=this.beforeSelectFeaturesByQuery(query);newQuery&&(query=newQuery);const abortController=new AbortController;this.cancelSelectByQuery(!1),this.selectByQueryAbortController=abortController;const prevSelectPromise=this.selectQueryPromise||Promise.resolve([]);return this.selectByQueryProgress=0,this.selectQueryPromise=new Promise((resolve=>{prevSelectPromise.finally((()=>jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){let layerDs=null,finalFeatureDataRecords=[];const mapWidgetId=this.mapViewManager.getJimuMapViewById(this.jimuMapViewId).mapWidgetId;try{if(layerDs=yield this.getOrCreateLayerDataSource(),layerDs){const signal=abortController.signal,queryResult=yield jimu_core.ZkX.selectBySelectionMode({widgetId:mapWidgetId,ds:layerDs,query,selectionMode,signal,checkLayerVisibility:!0,jimuLayerView:this,progressCallback:process=>{this.setSelectQueryProgress(abortController,process)},updateSelectionIfAborted:()=>{let shouldUpdate=!1;return abortController&&(shouldUpdate=this.isFreshAbortController(abortController)&&!abortController.notUpdateSelection),shouldUpdate}});(null==queryResult?void 0:queryResult.records)&&(finalFeatureDataRecords=queryResult.records)}}catch(e){finalFeatureDataRecords=[]}const finalFeatures=finalFeatureDataRecords.map((r=>r.feature));publishSelectionChangeMessage(this,finalFeatureDataRecords),this.setSelectQueryProgress(abortController,1),this.isFreshAbortController(abortController)&&(this.selectQueryPromise=null,this.selectByQueryAbortController=null),resolve(finalFeatures)}))))})),this.selectQueryPromise}cancelSelectByQuery(updateSelection){return jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){this.selectByQueryAbortController&&(this.selectByQueryAbortController.notUpdateSelection=!updateSelection,this.selectByQueryAbortController.abort()),this.selectQueryPromise&&(yield this.selectQueryPromise)}))}isFreshAbortController(abortController){return abortController&&abortController===this.selectByQueryAbortController}getOrCreateLocalDataSource(localDsId){return jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){const layerDs=yield this.getOrCreateLayerDataSource();return layerDs?layerDs.dataSourceManager.createLocalDataSource(layerDs,localDsId):null}))}getSelectQueryProgress(){if(this.selectQueryPromise){const progress=this.selectByQueryProgress,minProgress=.01;return"number"==typeof progress?Math.max(progress,minProgress):minProgress}return 1}setSelectQueryProgress(abortController,progress){if(this.isFreshAbortController(abortController)){const minProgress=0,maxProgress=1;this.selectByQueryProgress=Math.max(minProgress,Math.min(progress,maxProgress));const jimuMapView=this.getJimuMapView();jimuMapView&&jimuMapView.onSelectByQueryProgressChange()}}whenClientQueryReady(queryParams,queryType){return jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){var _a;if(!queryParams)throw new Error(`query param is null, ${this.id} not ready for client query`);if(queryParams.disableClientQuery)return console.debug(`disableClientQuery is true, ${this.id} not ready for client query`),null;const apiQuery=yield this.getApiQueryForClientQuery(queryParams,queryType);if(!apiQuery)throw new Error(`can't convert queryParams to API query instance, ${this.id} not ready for client query`);if("esri.layers.FeatureLayer"!==(null===(_a=this.layer)||void 0===_a?void 0:_a.declaredClass))return console.debug(`layer is not a real FeatureLayer, ${this.id} not ready for client query`),null;const jimuMapView=this.getJimuMapView();if(jimuMapView.isDestroyed())return console.debug(`JimuMapView is destroyed, ${this.id} not ready for client query`),null;if(jimuMapView.isCached())return console.debug(`JimuMapView is cached, ${this.id} not ready for client query`),null;if(yield jimuMapView.whenJimuMapViewLoaded(),this.view||(yield jimuMapView.whenJimuLayerViewLoaded(this.id)),!this.view)return console.debug(`layerView is not available, ${this.id} not ready for client query`),null;const layerView=this.view,ds=yield this.getOrCreateLayerDataSource();if(!ds)throw new Error(`layer data source is not available, ${this.id} not ready for client query`);const dsRuntimeQueryParams=ds.getCurrentQueryParams&&ds.getCurrentQueryParams(),dsRuntimeWhere=(null==dsRuntimeQueryParams?void 0:dsRuntimeQueryParams.where)||"",queryWhere=queryParams.where||"",layerWhere=this.layer.definitionExpression||"";if(queryWhere&&dsRuntimeWhere&&queryWhere.includes(dsRuntimeWhere)){if(layerWhere!==dsRuntimeWhere)return console.debug(`layer.definitionExpression is not same with data source runtime where, ${this.id} not ready for client query`),null}else{if(!this.isSqlEmpty(layerWhere))return console.debug(`query data from global data scope but layer.definitionExpression is not empty, ${this.id} not ready for client query`),null}let isGeometryPass=yield this.checkGeometryForClientQuery(apiQuery);if(!isGeometryPass)return null;if(!this.updateLayerOutFieldsForClientQuery(queryParams,apiQuery,queryType,ds))return null;if(yield this.whenCurrentLayerViewNotUpdating(),isGeometryPass=yield this.checkGeometryForClientQuery(apiQuery),!isGeometryPass)return null;if(this.view.updating)throw new Error(`layerView.updating is still true after pass all checks, ${this.id} not ready for client query`);if("feature"===queryType){if(queryParams.returnGeometry&&queryParams.returnFullGeometry&&!layerView.hasFullGeometries)return console.debug(`layerView.hasFullGeometries is false, ${this.id} not ready for client query`),null}return apiQuery}))}checkGeometryForClientQuery(apiQuery){return jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){try{const layerView=this.view;if(layerView.hasAllFeatures)return!0;const mapView=this.getJimuMapView().view,geometry=apiQuery.geometry;let geoExtent=null;return geometry&&(geometry.extent?geoExtent=geometry.extent:"point"===geometry.type&&(geoExtent=geometry)),geoExtent?mapView.extent.contains(geoExtent)?(yield this.whenCurrentLayerViewNotUpdating(),mapView.extent.contains(geoExtent)?(layerView.hasAllFeaturesInView||console.debug(`layerView.hasAllFeaturesInView is false, ${this.id} not ready for client query`),layerView.hasAllFeaturesInView):(console.debug(`current map extent does not contain geometry, ${this.id} not ready for client query`),!1)):(console.debug(`current map extent does not contain geometry, ${this.id} not ready for client query`),!1):(yield this.whenCurrentLayerViewNotUpdating(),layerView.hasAllFeatures||console.debug(`layerView.hasAllFeatures is false, ${this.id} not ready for client query`),layerView.hasAllFeatures)}catch(e){console.error("check geometry error for client query",e)}return!1}))}updateLayerOutFieldsForClientQuery(queryParams,apiQuery,queryType,ds){if(!(this.layer.outFields&&this.layer.outFields.includes("*"))){const requiredFieldsByUtils=jimu_core.ZkX.getUsedFieldsFromFeatureLayerQueryParams(queryParams.asMutable({deep:!0}),ds,queryType)||[],outFieldsFromApiQuery=apiQuery.outFields||[],requiredFields=Array.from(new Set([...requiredFieldsByUtils,...outFieldsFromApiQuery]));let{added:newAddedFields}=jimu_core.WpD.diffArrays(!0,this.view.availableFields,requiredFields);if(newAddedFields.includes("*")&&(newAddedFields=["*"]),newAddedFields.length>0){if(queryParams.notAddFieldsToClient)return console.debug(`don't add new fields to layer.outFields for client query because notAddFieldsToClient is true: ${newAddedFields}, view id: ${this.id}, query type:${queryType}`),!1;if(!this.isLayerVisibleForRendering())return console.debug(`layer is not visible for rendering, so can't add new fields to layer.outFields for client query: ${newAddedFields}, view id: ${this.id}, query type:${queryType}`),!1;if(console.debug(`add new fields to layer.outFields for client query: ${newAddedFields}, view id: ${this.id}, query type:${queryType}`),newAddedFields.includes("*"))this.layer.outFields=["*"];else{const newOutFields=(this.layer.outFields||[]).concat(newAddedFields);this.layer.outFields=newOutFields}}}return!0}whenCurrentLayerViewNotUpdating(){return this.view?this.whenLayerViewNotUpdating(this.view):Promise.resolve()}whenHighlightLayerViewNotUpdating(){return this.highlightFeatureLayerView?this.whenLayerViewNotUpdating(this.highlightFeatureLayerView):Promise.resolve()}whenLayerViewNotUpdating(layerView){return new Promise((resolve=>{setTimeout((()=>jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){if(layerView.updating){let handle=(yield this.getReactiveUtils()).watch((()=>layerView.updating),(val=>{val||handle&&(handle.remove(),handle=null,resolve())}))}else resolve()}))),0)}))}clientQueryFeatures(queryParams){return jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){let result=null;try{const apiQuery=yield this.whenClientQueryReady(queryParams,"feature");if(apiQuery){const data=yield this.view.queryFeatures(apiQuery);console.debug(`Query from client-side. view id: ${this.id}`),result={success:!0,data,hasFullGeometry:!!this.view.hasFullGeometries}}}catch(e){result=null,console.error(`clientQueryFeatures err for ${this.id}`,e)}return result||(result={success:!1,data:null,hasFullGeometry:!1}),result}))}clientQueryObjectIds(queryParams){return jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){let result=null;try{const apiQuery=yield this.whenClientQueryReady(queryParams,"id");if(apiQuery){let data=yield this.view.queryObjectIds(apiQuery);data||(data=[]),console.debug(`Query objectIds from client-side. view id: ${this.id}`),result={success:!0,data}}}catch(e){result=null,console.error(`clientQueryObjectIds err for ${this.id}`,e)}return result||(result={success:!1,data:null}),result}))}clientQueryFeatureCount(queryParams){return jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){let result=null;try{const apiQuery=yield this.whenClientQueryReady(queryParams,"count");if(apiQuery){const data=yield this.view.queryFeatureCount(apiQuery);console.debug(`Query feature count from client-side. view id: ${this.id}`),result={success:!0,data}}}catch(err){result=null,console.error(`clientQueryFeatureCount err for ${this.id}`,err)}return result||(result={success:!1,data:null}),result}))}clientQueryExtent(queryParams){return jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){let result=null;try{const apiQuery=yield this.whenClientQueryReady(queryParams,"extent");if(apiQuery){const data=yield this.view.queryExtent(apiQuery);console.debug(`Query extent from client-side. view id: ${this.id}`),result={success:!0,data}}}catch(err){result=null,console.error(`clientQueryExtent err for ${this.id}`,err)}return result||(result={success:!1,data:null}),result}))}getApiQueryForClientQuery(queryParams,queryType){return jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){let apiQuery=null;const layerDs=yield this.getOrCreateLayerDataSource(),apiQueryOrProperties=yield jimu_core.ZkX.changeJimuArcGISQueryToJSAPIQuery(layerDs,queryParams);if("esri.rest.support.Query"===apiQueryOrProperties.declaredClass)apiQuery=apiQueryOrProperties;else{apiQuery=new(yield(0,jimu_core.p8A)("esri/rest/support/Query"))(apiQueryOrProperties)}if(!layerDs.isSqlCaseSensitive){const isOriginalWhereEmpty=this.isSqlEmpty(queryParams.where),selectionView=layerDs.getMainDataSource().getDataView(jimu_core.aH5.W7),sqlResult=jimu_core.ZkX.getArcGISSQL(queryParams.sqlExpression,selectionView),finalSql=(null==sqlResult?void 0:sqlResult.sql)||"",isEmptySql=this.isSqlEmpty(finalSql);if(!isOriginalWhereEmpty&&isEmptySql)return null;apiQuery.where=finalSql}return"id"!==queryType&&"count"!==queryType&&"extent"!==queryType||(apiQuery.outFields=[]),apiQuery}))}isSqlEmpty(sql){return sql&&(sql=sql.replace(/[()\s]/g,"")),!sql||"1=1"===sql}setDefinitionExpression(localDefinitionExpression){this.localDefinitionExpression=localDefinitionExpression,this.setDefinitionExpressionToLayer()}validateDataSource(layerDs){const dsType=null==layerDs?void 0:layerDs.type,validDsTypes=[jimu_core.hg5.FeatureLayer,jimu_core.hg5.SceneLayer,jimu_core.hg5.BuildingComponentSubLayer,jimu_core.hg5.ImageryLayer,jimu_core.hg5.OrientedImageryLayer,jimu_core.hg5.SubtypeGroupLayer,jimu_core.hg5.SubtypeSublayer];return dsType&&validDsTypes.includes(dsType)}getLayerDataSource(){return super.getLayerDataSource()}createLayerDataSource(){return super.createLayerDataSource()}getOrCreateLayerDataSource(){return super.getOrCreateLayerDataSource()}getHighlightLayerLayer(){return this.highlightFeatureLayer}getExcludePairsForBuildingExplorer(){var _a;const excludePairs=[],widgets=null===(_a=(0,jimu_core.Vp3)().getState().appConfig)||void 0===_a?void 0:_a.widgets;return widgets&&Object.values(widgets).forEach((widgetJson=>{if("widgets/arcgis/building-explorer/"===widgetJson.uri){const excludePair={dataSourceId:this.layerDataSourceId,widgetId:widgetJson.id};excludePairs.push(excludePair)}})),excludePairs}getCurrentQueryParamsWithoutBuildingExplorer(){const layerDs=this.getLayerDataSource();if(layerDs&&layerDs.getCurrentQueryParams){const excludePairs=this.getExcludePairsForBuildingExplorer();return layerDs.getCurrentQueryParams({exclude:excludePairs})}return null}shouldWatchMapViewRestore(){return!0}watchMapViewRestore(){if(!this.shouldWatchMapViewRestore())return;const jimuMapView=this.getJimuMapView();jimuMapView&&jimuMapView.addRestoreListener(this.onMapViewRestore)}onLayerDataSourceInfoChange(preDsInfo,dsInfo){var _a;super.onLayerDataSourceInfoChange(preDsInfo,dsInfo);const preSelectedIds=(null==preDsInfo?void 0:preDsInfo.selectedIds)||null,currSelectedIds=(null==dsInfo?void 0:dsInfo.selectedIds)||null;if(preSelectedIds!==currSelectedIds){if(this.highlightFeatureLayer){const jimuMapView=this.getJimuMapView();(null==jimuMapView?void 0:jimuMapView.isCached())&&(this.isHighlightFeatureLayerDirty=!0)}this.updateHighlightBySelectedIds(currSelectedIds)}const layerDs=this.getLayerDataSource();layerDs?this.setDefinitionExpressionToLayer():(null===(_a=null==dsInfo?void 0:dsInfo.widgetQueries)||void 0===_a?void 0:_a._filterInUrl)&&this.createLayerDataSource().then((()=>{this.setDefinitionExpressionToLayer()})),this.view&&((null==dsInfo?void 0:dsInfo.gdbVersion)&&(this.layer.gdbVersion=dsInfo.gdbVersion),!(null==dsInfo?void 0:dsInfo.gdbVersion)&&this.originalGdbVersion&&(this.layer.gdbVersion=this.originalGdbVersion)),layerDs&&layerDs.getAutoRefreshInterval&&this.setRefreshIntervalForLayer(layerDs.getAutoRefreshInterval()),(null==preDsInfo?void 0:preDsInfo.sourceVersion)!==(null==dsInfo?void 0:dsInfo.sourceVersion)&&this.refreshLayer()}shouldWatchPopupSelectFeature(){return!0}watchPopupSelectFeature(){return jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){if(!this.shouldWatchPopupSelectFeature())return;const reactiveUtils=yield this.getReactiveUtils();this.popupSelectFeatureWatchHandle&&(this.popupSelectFeatureWatchHandle.remove(),this.popupSelectFeatureWatchHandle=null),this.popupSelectFeatureWatchHandle=reactiveUtils.watch((()=>{var _a,_b;return null===(_b=null===(_a=this.getMapSceneView())||void 0===_a?void 0:_a.popup)||void 0===_b?void 0:_b.selectedFeature}),(graphic=>jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){var _a,_b;const jimuMapView=this.mapViewManager.getJimuMapViewById(this.jimuMapViewId);if(jimuMapView&&jimuMapView.isPopupFeaturesFromSelection())return;if(!graphic)return;if(this.shouldUsePopupSelectedFeatureToUpdateSelection()){if(!graphic)return;const selectedFeatureId=graphic.getObjectId();if(null==selectedFeatureId)return;const layerDataSource=yield this.getOrCreateLayerDataSource();if((null===(_b=null===(_a=jimuMapView.view)||void 0===_a?void 0:_a.popup)||void 0===_b?void 0:_b.selectedFeature)!==graphic)return;if(!layerDataSource)return void this.selectFeatureById(selectedFeatureId);if(layerDataSource.getSelectedRecordIds().includes(selectedFeatureId+""))return;layerDataSource.queryById(selectedFeatureId+"").then((record=>{var _a,_b;(null===(_b=null===(_a=jimuMapView.view)||void 0===_a?void 0:_a.popup)||void 0===_b?void 0:_b.selectedFeature)===graphic&&(this.selectFeatureById(Number(selectedFeatureId),record),publishSelectionChangeMessage(this,[record]))}))}else{this.getSelectedFeatureCount()>0&&(this.selectFeatureById(null),publishSelectionChangeMessage(this,[]))}}))))}))}releasePopupVisibleWatchHandle(){this.popupVisibleWatchHandle&&(this.popupVisibleWatchHandle.remove(),this.popupVisibleWatchHandle=null)}watchPopupVisible(){return jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){this.releasePopupVisibleWatchHandle();const reactiveUtils=yield this.getReactiveUtils();this.releasePopupVisibleWatchHandle(),this.popupVisibleWatchHandle=reactiveUtils.watch((()=>{var _a,_b;return null===(_b=null===(_a=this.getMapSceneView())||void 0===_a?void 0:_a.popup)||void 0===_b?void 0:_b.visible}),(visible=>{var _a;const popup=null===(_a=this.getMapSceneView())||void 0===_a?void 0:_a.popup;!visible&&popup&&this.isPopupSelectCurrentLayerFeature()&&(popup.features=[],publishSelectionChangeMessage(this,[]),this.selectFeatureById(null))}))}))}isPopupSelectCurrentLayerFeature(){var _a;const popup=null===(_a=this.getMapSceneView())||void 0===_a?void 0:_a.popup;return popup&&popup.selectedFeature&&this.getLayerFromFeature(popup.selectedFeature)===this.layer}shouldUsePopupSelectedFeatureToUpdateSelection(){return this.isPopupSelectCurrentLayerFeature()}onParentLayerVisibleChange(parentNewVisible){this.onLayerFinalVisibleChange()}watchLayerVisible(){return jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){this.layerVisibleWatchHandle&&(this.layerVisibleWatchHandle.remove(),this.layerVisibleWatchHandle=null);const reactiveUtils=yield this.getReactiveUtils();this.layerVisibleWatchHandle=reactiveUtils.watch((()=>{var _a;return null===(_a=this.layer)||void 0===_a?void 0:_a.visible}),(()=>{this.onLayerFinalVisibleChange()}))}))}onLayerFinalVisibleChange(){var _a;const finalLayerVisible=this.isLayerVisible();this.highlightFeatureLayer&&(this.highlightFeatureLayer.visible=finalLayerVisible);const popup=null===(_a=this.getMapSceneView())||void 0===_a?void 0:_a.popup;popup&&this.isPopupSelectCurrentLayerFeature()&&popup.visible!==finalLayerVisible&&(this.releasePopupVisibleWatchHandle(),popup.visible=finalLayerVisible,this.watchPopupVisible())}watchHighlightOptions(){return jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){this.highlightOptionsWatchHandle&&(this.highlightOptionsWatchHandle.remove(),this.highlightOptionsWatchHandle=null);const reactiveUtils=yield this.getReactiveUtils();this.highlightOptionsWatchHandle=reactiveUtils.watch((()=>{const highlightOptions=this.getHighlightOptions();return[null==highlightOptions?void 0:highlightOptions.color,null==highlightOptions?void 0:highlightOptions.haloColor]}),(a=>{this.highlightFeatureLayer&&(this.highlightFeatureLayer.renderer=this.getRendererForHighlightLayer(this.highlightFeatureLayer.geometryType))}))}))}getLayerFromFeature(feature){const layer=feature.layer,sourceLayer=feature.sourceLayer;let result=layer||sourceLayer;return"esri.layers.BuildingSceneLayer"===(null==layer?void 0:layer.declaredClass)&&"esri.layers.buildingSublayers.BuildingComponentSublayer"===(null==sourceLayer?void 0:sourceLayer.declaredClass)&&(result=sourceLayer),result}setRefreshIntervalForLayer(refreshInterval){if(!this.view||null==refreshInterval)return;(0,jimu_core.Vp3)().getState().appRuntimeInfo.appMode===jimu_core.$0N.Design?this.layer.refreshInterval=0:this.layer.refreshInterval=refreshInterval/60}getLocalDefinitionExpressionToMerge(){return this.localDefinitionExpression||""}setDefinitionExpressionToLayer(){return jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){var _a,_b,_c,_d;const currentQuery=this.getCurrentQueryParamsWithoutBuildingExplorer();if(currentQuery&&this.layer){const isFeatureLayer=this.isFeatureLayer(),isSceneLayer=this.isSceneLayer(),isBuildingComponentSublayer=this.isBuildingComponentSublayer(),isImageryLayer=this.isImageryLayer(),isOrientedImageryLayer=this.isOrientedImageryLayer(),isSubtypeGroupLayer=this.isSubtypeGroupLayer(),layerDs=this.getLayerDataSource(),localQuery={outFields:["*"],where:this.getLocalDefinitionExpressionToMerge(),returnGeometry:!0};let realQueryParams=null;if(layerDs&&layerDs.getRealQueryParams){const queryOptions={excludeQuery:this.getExcludePairsForBuildingExplorer()};realQueryParams=layerDs.getRealQueryParams(localQuery,"query",queryOptions)}const mergedQuery=realQueryParams||currentQuery,supportSqlExpression="esri.layers.support.Sublayer"===this.layer.declaredClass&&(null===(_c=null===(_b=null===(_a=this.layer.layer)||void 0===_a?void 0:_a.capabilities)||void 0===_b?void 0:_b.exportMap)||void 0===_c?void 0:_c.supportsSublayerDefinitionExpression)||isFeatureLayer||isSceneLayer||isBuildingComponentSublayer||isImageryLayer||isOrientedImageryLayer||isSubtypeGroupLayer||this.view;if(mergedQuery&&supportSqlExpression&&mergedQuery.where!==this.layer.definitionExpression&&(this.layer.definitionExpression=mergedQuery.where),isFeatureLayer||isImageryLayer||isSubtypeGroupLayer){const layer=this.layer;null!=(null==mergedQuery?void 0:mergedQuery.time)?layer.useViewTime=!1:layer.useViewTime=!0,layer.timeExtent=jimu_core.ZkX.changeJimuTimeToJSAPITimeExtent(null==mergedQuery?void 0:mergedQuery.time)}yield this.whenViewLoaded();const ignoreSpatialFilter=null===(_d=this.layer)||void 0===_d?void 0:_d[jimu_core.yC0.EXB_LAYER_VIEW_IGNORE_SPATIAL_FILTER];if(this.view&&!isImageryLayer&&!ignoreSpatialFilter){const layerView=this.view;if(currentQuery.geometry){if(layerView.filter&&layerView.filter.geometry===currentQuery.geometry)return;(0,jimu_core.e$n)(["esri/geometry/support/jsonUtils"]).then((modules=>{const jsonUtils=modules[0];layerView.filter={geometry:jsonUtils.fromJSON(currentQuery.geometry)}}))}else layerView.filter&&(layerView.filter=null)}}}))}refreshLayer(){var _a,_b;(this.isFeatureLayer()||this.isSubtypeGroupLayer())&&(null===(_b=(_a=this.layer).refresh)||void 0===_b||_b.call(_a))}updateHighlightBySelectedIds(selectedIds){(null==selectedIds?void 0:selectedIds.length)>0?this.highLightSelectedRecords():this.clearHighLight()}highLightSelectedRecords(){if(0===this.getSelectedRecordIds().length)return;const recordIds=this.getSelectedRecordIds().map((id=>parseInt(id)));this.highLightFeatures(recordIds)}tryCreateHighLightFeatureLayer(){return jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){if(yield this.whenViewLoaded(),this.view||this.type!==jimu_core.iy2.FeatureLayer||!this.isLoaded)return;yield this.getJimuMapView().whenJimuLayerViewLoaded(this.id);if(!(this.getLayerDataSource()||(yield this.createLayerDataSource())))return;if(this.highLightLayerCreationPromise)return this.highLightLayerCreationPromise;const layer=this.layer,objectIdFieldInFeaturelayer=this.getObjectIdField(layer.fields,layer.objectIdField),exbOidFieldInfo={name:EXB_OID,type:"integer",alias:EXB_OID,description:""},layerFieldInfos=objectIdFieldInFeaturelayer?[objectIdFieldInFeaturelayer,exbOidFieldInfo]:[exbOidFieldInfo];return this.highLightLayerCreationPromise=(0,jimu_core.e$n)(["esri/layers/FeatureLayer"]).then((modules=>{var _a,_b;const FeatureLayer=modules[0],view=this.mapViewManager.getJimuMapViewById(this.jimuMapViewId).view,hasZ=(null===(_b=null===(_a=this.layer)||void 0===_a?void 0:_a.sourceJSON)||void 0===_b?void 0:_b.hasZ)||!1;return this.highlightFeatureLayer=new FeatureLayer({title:`${layer.title}-highlight`,geometryType:layer.geometryType,spatialReference:layer.spatialReference,source:[],fields:layerFieldInfos,objectIdField:layer.objectIdField,renderer:this.getRendererForHighlightLayer(layer.geometryType),listMode:"hide",legendEnabled:!1,popupEnabled:!1,visible:this.isLayerVisible(),hasZ}),view.map.add(this.highlightFeatureLayer),new Promise(((resolve,reject)=>{this.highlightFeatureLayer.on("layerview-create",(event=>{this.highlightFeatureLayerView=event.layerView,resolve()}))}))})),this.highLightLayerCreationPromise}))}addFeaturesToHighlightFeatureLayer(ids){return jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){const ds=this.getLayerDataSource(),idField=ds.getIdField(),selectedRecords=ds.getSelectedRecords(),recordFeatures=ids.map((id=>{var _a;return null===(_a=selectedRecords.find((r=>r.getId()===id+"")))||void 0===_a?void 0:_a.feature})).filter((f=>!!f));if(0===recordFeatures.length)return;const addFeatures=yield this.getApiGraphicsByRecordFeatures(recordFeatures,!0);0!==addFeatures.length&&(addFeatures.forEach((apiGraphic=>{const objectIdFieldValue=apiGraphic.attributes&&apiGraphic.attributes[idField];apiGraphic.attributes={},apiGraphic.attributes[idField]=objectIdFieldValue,apiGraphic.attributes[EXB_OID]=objectIdFieldValue})),yield this.highlightFeatureLayer.applyEdits({addFeatures}))}))}removeFeaturesFromHighlightFeatureLayer(){return jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){const allFeatures=(yield this.highlightFeatureLayer.queryFeatures({where:"1=1"})).features||[];allFeatures.length>0&&(yield this.highlightFeatureLayer.applyEdits({deleteFeatures:allFeatures}))}))}highlightFeatureById(id){"number"==typeof id&&this.highLightFeatures([id])}highLightFeatures(ids){return jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){if(this.latestHighlightIds=ids,this.releaseHighLightHandle(),yield this.tryCreateHighLightFeatureLayer(),this.view){const view=this.view;let rasterFeatures=[];const isImageryLayer=this.isImageryLayer();isImageryLayer&&(rasterFeatures=yield this.queryRasterFeatures(ids)),view.when((()=>jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){if(yield this.whenLayerViewNotUpdating(view),isImageryLayer)this.latestHighlightIds===ids&&(this.releaseHighLightHandle(),this.highLightHandle=view.highlight(rasterFeatures),this.onSelectedFeaturesChange(!1));else{this.releaseHighLightHandle();const highlightIds=this.latestHighlightIds||[];this.highLightHandle=view.highlight(highlightIds),this.onSelectedFeaturesChange(!1)}}))))}else this.highlightFeatureLayerView?(yield this.removeFeaturesFromHighlightFeatureLayer(),yield this.addFeaturesToHighlightFeatureLayer(ids),this.onSelectedFeaturesChange(!1)):this.onSelectedFeaturesChange(!1)}))}queryRasterFeatures(objectIds){return jimu_queriable_layer_view_awaiter(this,void 0,void 0,(function*(){let rasterFeatures=[];if(this.isImageryLayer()&&objectIds.length>0){const layer=this.layer;try{const featureSet=yield layer.queryRasters({objectIds,returnGeometry:!0,outFields:[]});rasterFeatures=null==featureSet?void 0:featureSet.features}catch(e){console.error(`JimuImageryLayerView ${this.id} can not query rasters`,e)}}return rasterFeatures||(rasterFeatures=[]),rasterFeatures}))}clearHighLight(){var _a,_b;this.latestHighlightIds=[],this.releaseHighLightHandle(),this.highlightFeatureLayerView&&this.removeFeaturesFromHighlightFeatureLayer();const mapSceneView=this.getMapSceneView();if(mapSceneView){if(this.shouldClosePopupWhenClearHighlight()){(null===(_b=null===(_a=mapSceneView.popup)||void 0===_a?void 0:_a.selectedFeature)||void 0===_b?void 0:_b.isAggregate)||mapSceneView.closePopup()}}this.onSelectedFeaturesChange(!0)}shouldClosePopupWhenClearHighlight(){return this.isPopupSelectCurrentLayerFeature()}releaseHighLightHandle(){this.highLightHandle&&(this.highLightHandle.remove(),this.highLightHandle=null)}onSelectedFeaturesChange(isClear){const jimuMapView=this.getJimuMapView();jimuMapView&&jimuMapView.onJimuLayerViewSelectedFeaturesChange(this,isClear)}getSelectedRecordIds(){return this.getLayerDataSource()?this.getLayerDataSource().getSelectedRecordIds().filter((id=>!!id)):[]}getObjectIdField(fields,objectIdFieldName){let objectIdField=null;for(let i=0;i<fields.length;i++)if(fields[i].name===objectIdFieldName)return objectIdField=fields[i],objectIdField;return objectIdField}getHighlightOptions(){var _a;let highlightOptions=null;const jimuMapView=this.getJimuMapView(),view=null==jimuMapView?void 0:jimuMapView.view;return(null===(_a=view.highlights)||void 0===_a?void 0:_a.length)>0&&(highlightOptions=view.highlights.find((item=>"default"===item.name))),highlightOptions}getRendererForHighlightLayer(geometryType){var _a,_b;const highlightOptions=this.getHighlightOptions(),highlightColor=(null===(_a=null==highlightOptions?void 0:highlightOptions.color)||void 0===_a?void 0:_a.clone())||"#00FFFF",highlightHaloColor=(null===(_b=null==highlightOptions?void 0:highlightOptions.haloColor)||void 0===_b?void 0:_b.clone())||"#00FFFF";return["point","multipoint"].includes(geometryType)?{type:"simple",symbol:{type:"simple-marker",style:"circle",color:highlightColor,size:"16px",outline:{color:highlightHaloColor,width:1}}}:["polyline"].includes(geometryType)?{type:"simple",symbol:{type:"simple-line",color:highlightColor,width:1,style:"solid"}}:["polygon","extent"].includes(geometryType)?{type:"simple",symbol:{type:"simple-fill",color:[0,255,255,0],style:"solid",outline:{color:highlightHaloColor,width:1}}}:["mesh"].includes(geometryType)?{type:"simple",symbol:{type:"mesh-3d",symbolLayers:[{type:"fill",material:{color:highlightColor}}]}}:null}}class jimu_feature_layer_view_JimuFeatureLayerView extends jimu_queriable_layer_view_JimuQueriableLayerView{getLayerDataSource(){return super.getLayerDataSource()}createLayerDataSource(){return super.createLayerDataSource()}}class jimu_scene_layer_view_JimuSceneLayerView extends jimu_queriable_layer_view_JimuQueriableLayerView{getLayerDataSource(){return super.getLayerDataSource()}createLayerDataSource(){return super.createLayerDataSource()}}var jimu_building_scene_layer_view_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};class jimu_building_scene_layer_view_JimuBuildingSceneLayerView extends jimu_layer_view_JimuLayerView{constructor(options){super(options)}ready(){return jimu_building_scene_layer_view_awaiter(this,void 0,void 0,(function*(){var _a,_b;yield this.layer.loadAll();const subLayers=null===(_b=null===(_a=this.layer.sublayers)||void 0===_a?void 0:_a.toArray())||void 0===_b?void 0:_b.reverse();if(subLayers&&subLayers.length>0){const promises=subLayers.map(((sublayer,index)=>{const anySubLayer=sublayer;return anySubLayer.parent||(anySubLayer.parent=this.layer),this.mapViewManager.getJimuMapViewById(this.jimuMapViewId).createJimuLayerView(anySubLayer,this.jimuLayerId,index,null,this.fromRuntime)}));yield Promise.all(promises)}return this}))}}var jimu_building_group_sublayer_view_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};class jimu_building_group_sublayer_view_JimuBuildingGroupSublayer extends jimu_layer_view_JimuLayerView{constructor(options){super(options)}ready(){return jimu_building_group_sublayer_view_awaiter(this,void 0,void 0,(function*(){var _a,_b;yield this.layer.loadAll();const sublayers=null===(_b=null===(_a=this.layer.sublayers)||void 0===_a?void 0:_a.toArray())||void 0===_b?void 0:_b.reverse();if(sublayers&&sublayers.length>0){const promises=sublayers.map(((sublayer,index)=>{const anySubLayer=sublayer;return anySubLayer.parent||(anySubLayer.parent=this.layer),this.mapViewManager.getJimuMapViewById(this.jimuMapViewId).createJimuLayerView(anySubLayer,this.jimuLayerId,index,null,this.fromRuntime)}));yield Promise.all(promises)}return this}))}}class jimu_building_component_sublayer_view_JimuBuildingComponentSublayerView extends jimu_queriable_layer_view_JimuQueriableLayerView{getLayerDataSource(){return super.getLayerDataSource()}createLayerDataSource(){return super.createLayerDataSource()}}class jimu_imagery_layer_view_JimuImageryLayerView extends jimu_queriable_layer_view_JimuQueriableLayerView{getLayerDataSource(){return super.getLayerDataSource()}createLayerDataSource(){return super.createLayerDataSource()}}class jimu_oriented_imagery_layer_view_JimuOrientedImageryLayerView extends jimu_queriable_layer_view_JimuQueriableLayerView{getLayerDataSource(){return super.getLayerDataSource()}createLayerDataSource(){return super.createLayerDataSource()}}var jimu_subtype_group_layer_view_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};class jimu_subtype_group_layer_view_JimuSubtypeGroupLayerView extends jimu_queriable_layer_view_JimuQueriableLayerView{ready(){const _super=Object.create(null,{ready:{get:()=>super.ready}});return jimu_subtype_group_layer_view_awaiter(this,void 0,void 0,(function*(){return yield _super.ready.call(this),yield this.createSubLayerViews(),this}))}createSubLayerViews(){return jimu_subtype_group_layer_view_awaiter(this,void 0,void 0,(function*(){var _a,_b;const sublayers=null===(_b=null===(_a=this.layer.sublayers)||void 0===_a?void 0:_a.toArray())||void 0===_b?void 0:_b.reverse();if(sublayers&&sublayers.length>0){const promises=[];for(let k=0;k<sublayers.length;k++){const sublayer=sublayers[k],promise=this.mapViewManager.getJimuMapViewById(this.jimuMapViewId).createJimuLayerView(sublayer,this.jimuLayerId,k,null,this.fromRuntime);promises.push(promise)}yield Promise.all(promises)}}))}getLayerDataSource(){return super.getLayerDataSource()}createLayerDataSource(){return super.createLayerDataSource()}shouldClosePopupWhenClearHighlight(){const isPopupSelectCurrentLayerFeature=this.isPopupSelectCurrentLayerFeature(),isPopupSelectChildSubtypeSublayerFeature=this.isPopupSelectChildSubtypeSublayerFeature();return isPopupSelectCurrentLayerFeature||isPopupSelectChildSubtypeSublayerFeature}shouldUsePopupSelectedFeatureToUpdateSelection(){const isPopupSelectCurrentLayerFeature=this.isPopupSelectCurrentLayerFeature(),isPopupSelectChildSubtypeSublayerFeature=this.isPopupSelectChildSubtypeSublayerFeature();return isPopupSelectCurrentLayerFeature||isPopupSelectChildSubtypeSublayerFeature}isPopupSelectChildSubtypeSublayerFeature(){var _a;const popup=null===(_a=this.getMapSceneView())||void 0===_a?void 0:_a.popup;if(popup&&popup.selectedFeature){const layerOfPopupSelectedFeature=this.getLayerFromFeature(popup.selectedFeature);if(layerOfPopupSelectedFeature&&"esri.layers.support.SubtypeSublayer"===layerOfPopupSelectedFeature.declaredClass&&layerOfPopupSelectedFeature.parent===this.layer)return!0}return!1}getLocalDefinitionExpressionToMerge(){const jimuMapView=this.getJimuMapView(),subtypeFieldName=getSubtypeField(this.layer),subtypeGroupLayerWhereClause=this.localDefinitionExpression||"",subtypeSublayerWhereClauses={};if(jimuMapView){jimuMapView.getChildJimuLayerViews(this.id).filter((childJimuLayerView=>childJimuLayerView.type===jimu_core.iy2.SubtypeSublayer&&childJimuLayerView.getLocalDefinitionExpressionToMerge)).forEach((childJimuLayerView=>{var _a;const sublayerLocalDefinitionExpression=childJimuLayerView.getLocalDefinitionExpressionToMerge(),subtypeCode=null===(_a=childJimuLayerView.layer)||void 0===_a?void 0:_a.subtypeCode;sublayerLocalDefinitionExpression&&"number"==typeof subtypeCode&&(subtypeSublayerWhereClauses[subtypeCode]=sublayerLocalDefinitionExpression)}))}let result="";return(subtypeGroupLayerWhereClause||Object.keys(subtypeSublayerWhereClauses).length>0)&&(result=jimu_core.ZkX.mergeSubtypeSublayerWhereClausesToSubtypeGroupLayer(subtypeFieldName,subtypeGroupLayerWhereClause,subtypeSublayerWhereClauses)),result||(result=""),result}beforeSelectFeaturesByQuery(query){var _a;let newQuery=query;if(this.layer){const subtypeField=getSubtypeField(this.layer),sublayers=null===(_a=this.layer.sublayers)||void 0===_a?void 0:_a.toArray();if(subtypeField&&(null==sublayers?void 0:sublayers.length)>0){const invisibleSubtypeCodes=[];if(sublayers.forEach((sublayer=>{sublayer.visible||invisibleSubtypeCodes.push(sublayer.subtypeCode)})),invisibleSubtypeCodes.length>0){const extraWhere=`${subtypeField} NOT IN (${invisibleSubtypeCodes.join(",")})`,oldWhere=query.where;let newWhere=query.where;newWhere=oldWhere?`((${oldWhere}) AND (${extraWhere}))`:`(${extraWhere})`,newQuery=Object.assign({},query),newQuery.where=newWhere}}}return newQuery}}var jimu_subtype_sublayer_view_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};class jimu_subtype_sublayer_view_JimuSubtypeSublayerView extends jimu_queriable_layer_view_JimuQueriableLayerView{constructor(options){super(options)}getLayerDataSource(){return super.getLayerDataSource()}createLayerDataSource(){return super.createLayerDataSource()}onLayerDataSourceInfoChange(preDsInfo,dsInfo){jimu_layer_view_JimuLayerView.prototype.onLayerDataSourceInfoChange.apply(this,[preDsInfo,dsInfo])}shouldWatchPopupSelectFeature(){return!1}shouldWatchMapViewRestore(){return!1}getLocalDefinitionExpressionToMerge(){return this.localDefinitionExpression||""}setDefinitionExpression(localDefinitionExpression){this.localDefinitionExpression=localDefinitionExpression;const parentJimuLayerView=this.getParentJimuLayerView();parentJimuLayerView&&parentJimuLayerView.type===jimu_core.iy2.SubtypeGroupLayer&&parentJimuLayerView.setDefinitionExpressionToLayer&&parentJimuLayerView.setDefinitionExpressionToLayer()}setDefinitionExpressionToLayer(){return jimu_subtype_sublayer_view_awaiter(this,void 0,void 0,(function*(){console.warn("JimuSubtypeSublayerView.setDefinitionExpressionToLayer() doesn't work because SubtypeSublayer doesn't support layer.definitionExpression")}))}}var show_on_map_utils_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};function createSimpleRenderer(symbol){return show_on_map_utils_awaiter(this,void 0,void 0,(function*(){let result=null;const modules=yield arcgis_js_api_module_loader_loadArcGISJSAPIModules(["esri/renderers/SimpleRenderer"]),[SimpleRenderer]=modules;return symbol&&(result=new SimpleRenderer({symbol})),result}))}function createDefaultSimpleRenderer(symbolsSupportJsonUtils,symbolGeometryType){return show_on_map_utils_awaiter(this,void 0,void 0,(function*(){let result=null;const symbol=show_on_map_utils_getDefaultSymbol(symbolsSupportJsonUtils,symbolGeometryType);if(symbol){if("esri.symbols.SimpleLineSymbol"===symbol.declaredClass){symbol.width=2}result=yield createSimpleRenderer(symbol)}return result}))}function show_on_map_utils_getDefaultSymbol(symbolsSupportJsonUtils,symbolGeometryType){let symbol=null;const symbolJson=function getDefaultSymbol(type){let symbol=null;switch(type){case"point":symbol={type:"esriSMS",color:[255,255,0,150],outline:{color:[255,255,0,150],width:1}};break;case"polyline":symbol={type:"esriSLS",color:[255,255,0,150],width:.75};break;case"polygon":symbol={type:"esriSFS",color:[255,255,0,150],outline:{color:[255,255,0,150],width:1}}}return symbol}(symbolGeometryType);return symbolJson&&(symbol=symbolsSupportJsonUtils.fromJSON(symbolJson)),symbol}function createRendererByLayerDefinedSymbol(rawDataSource,layer,layerRenderer,view,rawFeatureSet,objectIdFieldName,symbolGeometryType,symbolUtils,symbolsSupportJsonUtils,rendererSupportJsonUtils,UniqueValueRenderer){return show_on_map_utils_awaiter(this,void 0,void 0,(function*(){let resultRenderer=null;try{if(layerRenderer){const layerSourceMapType=function getLayerSourceMapType(dataSource,layer){let sourceFrom=null;if(layer){let current=layer;for(;current&&current.parent;)current=current.parent;current&&("esri.WebMap"===current.declaredClass?sourceFrom="2d":"esri.WebScene"===current.declaredClass&&(sourceFrom="3d"))}if(sourceFrom)return sourceFrom;if(dataSource){let rootDs=dataSource.getRootDataSource();if(!rootDs&&dataSource.getOriginDataSources){const originalDataSources=dataSource.getOriginDataSources();if((null==originalDataSources?void 0:originalDataSources.length)>0){const originalDataSource=originalDataSources[0];originalDataSource&&(rootDs=originalDataSource.getRootDataSource())}}rootDs&&(rootDs.type===jimu_core.hg5.WebMap?sourceFrom="2d":rootDs.type===jimu_core.hg5.WebScene&&(sourceFrom="3d"))}return sourceFrom}(rawDataSource,layer),canUseLayerRendererDirectly=view.type===layerSourceMapType&&function isLikeFeatureLayer(layer){if(layer)return["esri.layers.FeatureLayer","esri.layers.OrientedImageryLayer","esri.layers.support.SubtypeSublayer"].includes(layer.declaredClass);return!1}(layer)||function isRendererCanBeUsedInMap(_renderer,is2DView){if(_renderer){const symbols=[];if("esri.renderers.SimpleRenderer"===_renderer.declaredClass){const renderer=_renderer;renderer.symbol&&symbols.push(renderer.symbol)}else if("esri.renderers.ClassBreaksRenderer"===_renderer.declaredClass){const renderer=_renderer;renderer.defaultSymbol&&symbols.push(renderer.defaultSymbol),renderer.backgroundFillSymbol&&symbols.push(renderer.backgroundFillSymbol);const classBreakInfos=renderer.classBreakInfos;if(classBreakInfos&&classBreakInfos.length>0)for(let i=0;i<classBreakInfos.length;i++){const classBreakInfo=classBreakInfos[i];classBreakInfo&&classBreakInfo.symbol&&symbols.push(classBreakInfo.symbol)}}else{if("esri.renderers.UniqueValueRenderer"!==_renderer.declaredClass)return!1;{const renderer=_renderer;renderer.defaultSymbol&&symbols.push(renderer.defaultSymbol),renderer.backgroundFillSymbol&&symbols.push(renderer.backgroundFillSymbol);const uniqueValueGroups=renderer.uniqueValueGroups;if(uniqueValueGroups&&uniqueValueGroups.length>0)for(let i=0;i<uniqueValueGroups.length;i++){const uniqueValueGroup=uniqueValueGroups[i];if(uniqueValueGroup){const uniqueValueGroupClasses=uniqueValueGroup.classes;if(uniqueValueGroupClasses&&uniqueValueGroupClasses.length>0)for(let j=0;j<uniqueValueGroupClasses.length;j++){const uniqueValueGroupClass=uniqueValueGroupClasses[j];uniqueValueGroupClass&&uniqueValueGroupClass.symbol&&symbols.push(uniqueValueGroupClass.symbol)}}}const uniqueValueInfos=renderer.uniqueValueInfos;if(uniqueValueInfos&&uniqueValueInfos.length>0)for(let i=0;i<uniqueValueInfos.length;i++){const uniqueValueInfo=uniqueValueInfos[i];uniqueValueInfo&&uniqueValueInfo.symbol&&symbols.push(uniqueValueInfo.symbol)}}}const supportedSymbolTypes=function getFeatureLayerSupportedSymbolTypes(is2DView){const commonSymbolTypes=["esri.symbols.SimpleMarkerSymbol","esri.symbols.PictureMarkerSymbol","esri.symbols.SimpleLineSymbol","esri.symbols.SimpleFillSymbol"],symbolTypesOnlyFor2D=["esri.symbols.PictureFillSymbol"],symbolTypesOnlyFor3D=["esri.symbols.LineSymbol3D","esri.symbols.PointSymbol3D","esri.symbols.PolygonSymbol3D"],supportedSymbolTypes=is2DView?commonSymbolTypes.concat(symbolTypesOnlyFor2D):commonSymbolTypes.concat(symbolTypesOnlyFor3D);return supportedSymbolTypes}(is2DView);return!(symbols.length>0&&symbols.some((symbol=>symbol&&symbol.declaredClass&&!supportedSymbolTypes.includes(symbol.declaredClass))))}return!1}(layerRenderer,"2d"===view.type);if(canUseLayerRendererDirectly){if(resultRenderer=rendererSupportJsonUtils.fromJSON(layerRenderer.toJSON()),resultRenderer){const defaultSymbol=show_on_map_utils_getDefaultSymbol(symbolsSupportJsonUtils,symbolGeometryType);if("esri.renderers.ClassBreaksRenderer"===resultRenderer.declaredClass){const classBreaksRenderer=resultRenderer;classBreaksRenderer.defaultSymbol||(classBreaksRenderer.defaultSymbol=defaultSymbol)}else if("esri.renderers.SimpleRenderer"===resultRenderer.declaredClass){const simpleRenderer=resultRenderer;simpleRenderer.symbol||(simpleRenderer.symbol=defaultSymbol)}else if("esri.renderers.UniqueValueRenderer"===resultRenderer.declaredClass){const uniqueValueRenderer=resultRenderer;uniqueValueRenderer.defaultSymbol||(uniqueValueRenderer.defaultSymbol=defaultSymbol)}}}else resultRenderer=yield function createUniqueValueRendererByLayerDefinedSymbol(view,rawFeatureSet,objectIdFieldName,symbolGeometryType,symbolUtils,symbolsSupportJsonUtils,UniqueValueRenderer){return show_on_map_utils_awaiter(this,void 0,void 0,(function*(){const defaultSymbol=show_on_map_utils_getDefaultSymbol(symbolsSupportJsonUtils,symbolGeometryType),renderer=new UniqueValueRenderer({valueExpression:`$feature.${objectIdFieldName}`,valueExpressionTitle:objectIdFieldName,defaultSymbol}),features=null==rawFeatureSet?void 0:rawFeatureSet.features,symbolObj={};if((null==features?void 0:features.length)>0){const promises=features.map((feature=>show_on_map_utils_awaiter(this,void 0,void 0,(function*(){var _a;if(feature)try{const objectId=feature.getObjectId()||(null===(_a=feature.attributes)||void 0===_a?void 0:_a[objectIdFieldName]);if(null!=objectId){const displayedSymbol=yield function getGraphicDisplaySymbolByRenderer(view,graphic,symbolUtils,jsonUtils){return show_on_map_utils_awaiter(this,void 0,void 0,(function*(){var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,_l;let resultSymbol=null,displayedSymbol=null;try{displayedSymbol=yield symbolUtils.getDisplayedSymbol(graphic)}catch(e){displayedSymbol=null,resultSymbol=null}if(displayedSymbol){resultSymbol=displayedSymbol;if(view&&"esri.views.MapView"===view.declaredClass)if("esri.symbols.PointSymbol3D"===displayedSymbol.declaredClass){const symbolJson={type:"esriSMS",color:[255,255,0,150],outline:{color:[255,255,0,150],width:1}},symbolLayers=displayedSymbol.symbolLayers.toArray();if(symbolLayers.length>0){const color=null===(_b=null===(_a=symbolLayers[0].material)||void 0===_a?void 0:_a.color)||void 0===_b?void 0:_b.toJSON();color&&(symbolJson.color=color,symbolJson.outline.color=color)}resultSymbol=jsonUtils.fromJSON(symbolJson)}else if("esri.symbols.LineSymbol3D"===displayedSymbol.declaredClass){const symbolJson={type:"esriSLS",color:[255,255,0,150],width:1},symbolLayers=displayedSymbol.symbolLayers.toArray();if(symbolLayers.length>0){const lineSymbol3DLayer=symbolLayers.find((symbolLayer=>"esri.symbols.LineSymbol3DLayer"===symbolLayer.declaredClass));if(lineSymbol3DLayer){const color=null===(_d=null===(_c=lineSymbol3DLayer.material)||void 0===_c?void 0:_c.color)||void 0===_d?void 0:_d.toJSON();color&&(symbolJson.color=color),lineSymbol3DLayer.size>0&&(symbolJson.width=lineSymbol3DLayer.size)}else{const color=null===(_f=null===(_e=symbolLayers[0].material)||void 0===_e?void 0:_e.color)||void 0===_f?void 0:_f.toJSON();color&&(symbolJson.color=color)}}resultSymbol=jsonUtils.fromJSON(symbolJson)}else if("esri.symbols.PolygonSymbol3D"===displayedSymbol.declaredClass){const symbolJson={type:"esriSFS",color:[255,255,0,150],outline:{color:[255,255,0,150],width:1}},symbolLayers=displayedSymbol.symbolLayers.toArray();if(symbolLayers.length>0){const fillSymbol3DLayer=symbolLayers.find((symbolLayer=>"esri.symbols.FillSymbol3DLayer"===symbolLayer.declaredClass)),extrudeSymbol3DLayer=symbolLayers.find((symbolLayer=>"esri.symbols.ExtrudeSymbol3DLayer"===symbolLayer.declaredClass));if(fillSymbol3DLayer){const color=null===(_h=null===(_g=fillSymbol3DLayer.material)||void 0===_g?void 0:_g.color)||void 0===_h?void 0:_h.toJSON();if(color&&(symbolJson.color=color,symbolJson.outline.color=color),fillSymbol3DLayer.outline){const outlineColor=null===(_j=fillSymbol3DLayer.outline.color)||void 0===_j?void 0:_j.toJSON();outlineColor&&(symbolJson.outline.color=outlineColor),fillSymbol3DLayer.outline.size>0&&(symbolJson.outline.width=fillSymbol3DLayer.outline.size)}}else if(extrudeSymbol3DLayer){const color=null===(_l=null===(_k=extrudeSymbol3DLayer.material)||void 0===_k?void 0:_k.color)||void 0===_l?void 0:_l.toJSON();color&&(symbolJson.color=color,symbolJson.outline.color=color)}}resultSymbol=jsonUtils.fromJSON(symbolJson)}}return resultSymbol}))}(view,feature,symbolUtils,symbolsSupportJsonUtils);displayedSymbol&&(symbolObj[objectId]=displayedSymbol)}}catch(e){console.error("getGraphicDisplaySymbolByRenderer error",e)}}))));yield Promise.all(promises)}return Object.keys(symbolObj).forEach((strObjectId=>{const objectId=Number(strObjectId),symbol=symbolObj[objectId];symbol&&renderer.addUniqueValueInfo(objectId,symbol)})),renderer}))}(view,rawFeatureSet,objectIdFieldName,symbolGeometryType,symbolUtils,symbolsSupportJsonUtils,UniqueValueRenderer)}}catch(e){resultRenderer=null,console.error("createRendererByUserDefinedSymbol error",e)}return resultRenderer}))}var ActionType,DataChangeType,DataChangeStatus,jimu_map_view_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};!function(ActionType){ActionType.DataAction="DATA_ACTION",ActionType.MessageAction="MESSAGE_ACTION"}(ActionType||(ActionType={})),function(DataChangeType){DataChangeType.Create="CREATE",DataChangeType.Creating="CREATING",DataChangeType.Created="CREATED",DataChangeType.Remove="REMOVE"}(DataChangeType||(DataChangeType={})),function(DataChangeStatus){DataChangeStatus.Fulfilled="FULFILLED",DataChangeStatus.Pending="PENDING",DataChangeStatus.Rejected="REJECTED",DataChangeStatus.RejectedAndKnown="REJECTEDANDKNOWN"}(DataChangeStatus||(DataChangeStatus={}));const SelectableJimuLayerViewTypes=[jimu_core.iy2.FeatureLayer,jimu_core.iy2.SceneLayer,jimu_core.iy2.BuildingComponentSublayer,jimu_core.iy2.OrientedImageryLayer,jimu_core.iy2.ImageryLayer,jimu_core.iy2.SubtypeGroupLayer];class jimu_map_view_JimuMapView{constructor(options){this.clickHighlightEnabled=!0,this.cacheListeners=[],this.restoreListeners=[],this.selectedFeaturesChangeListeners=[],this.jimuLayerViewCreatedListeners=[],this.jimuLayerViewRemovedListeners=[],this.jimuLayerViewsVisibleChangedListeners=[],this.selectByQueryProgressChangeListeners=[],this.watchHandles=[],this.popupFeaturesFromSelection=!1,this.showPopupUponSelection=!1,this.forcePopupEnabledLayers=[],this.mapClickCount=0,this.getJimuLayerViewIdByJimuLayerId=jimulayerId=>`${this.id}-${jimulayerId}`,this.getJimuLayerViewIdByAPILayer=layerOrSubLayer=>this.getJimuLayerViewIdByJimuLayerId(jimu_core.ZkX.getJimuLayerIdByJSAPILayer(layerOrSubLayer)),this.id=options.mapWidgetId+"-"+options.dataSourceId,this.mapWidgetId=options.mapWidgetId,this.isActive=options.isActive,this.dataSourceId=options.dataSourceId,this.view=options.view,this.mapViewManager=options.mapViewManager,this.jimuLayerViews={},this.jimuTables={},this.jimuTableArray=[],this.finalLayerVisibles={},this.status=jimu_core.FT5.Loading,this.view&&(this.view.popupEnabled=void 0===options.isEnablePopup||null===options.isEnablePopup||options.isEnablePopup),this.showOnMapDatas={},this.jimuMapTools=[],this.jimuLayerViewLoadPromises={},this.storeUnsubscribes=[],options.useUrlHashLayersVisibility&&(this.urlHashLayersVisibility=this.parseLayersVisibilityFromUrlHash()),this.initView(this.view);const unsubscribe=(0,jimu_core.Yzm)(this.onStoreChange.bind(this),["dataSourcesInfo"]);this.storeUnsubscribes.push(unsubscribe),this.watchLayersChange(),this.watchPopupFeaturesAndSelectedFeature()}watchLayersChange(){var _a,_b;const layerCollection=null===(_b=null===(_a=this.view)||void 0===_a?void 0:_a.map)||void 0===_b?void 0:_b.layers;layerCollection&&(this.watchAddLayerHandle&&(this.watchAddLayerHandle.remove(),this.watchAddLayerHandle=null),this.watchRemoveLayerHandle&&(this.watchRemoveLayerHandle.remove(),this.watchRemoveLayerHandle=null),this.watchAddLayerHandle=layerCollection.on("before-add",(evt=>{const addedLayer=null==evt?void 0:evt.item;addedLayer&&(addedLayer[jimu_core.yC0.EXB_LAYER_FROM_RUNTIME]=!0)})),this.watchRemoveLayerHandle=layerCollection.on("after-remove",(evt=>{const removedLayer=evt.item;setTimeout((()=>{if(!this.isDestroyed()&&removedLayer){if(layerCollection.find((item=>item===removedLayer)))return;const jimuLayerViewToRemove=this.getJimuLayerViewByAPILayer(removedLayer);jimuLayerViewToRemove&&this.removeJimuLayerView(jimuLayerViewToRemove)}}),50)})))}watchPopupFeaturesAndSelectedFeature(){return jimu_map_view_awaiter(this,void 0,void 0,(function*(){const reactiveUtils=yield(0,jimu_core.p8A)("esri/core/reactiveUtils");this.watchPopupFeaturesHandle&&(this.watchPopupFeaturesHandle.remove(),this.watchPopupFeaturesHandle=null),this.watchPopupSelectedHandle&&(this.watchPopupSelectedHandle.remove(),this.watchPopupSelectedHandle=null),this.watchPopupFeaturesHandle=reactiveUtils.watch((()=>{var _a;return null===(_a=this.view.popup)||void 0===_a?void 0:_a.features}),(features=>{this.popupFeaturesFromSelection=null==features?void 0:features.fromSelection})),this.watchPopupSelectedHandle=reactiveUtils.watch((()=>{var _a;return null===(_a=this.view.popup)||void 0===_a?void 0:_a.selectedFeature}),(()=>{var _a,_b;if(!this.popupFeaturesFromSelection)return;const popup=null===(_a=this.view)||void 0===_a?void 0:_a.popup;if(popup&&popup.selectedFeature){const geometry=popup.selectedFeature.geometry;let location=null;geometry&&(location="esri.geometry.Point"===geometry.declaredClass?geometry.clone():null===(_b=geometry.extent)||void 0===_b?void 0:_b.center),location&&(popup.location=location)}}))}))}handlePopupOnSelectionChange(triggedJimuLayerView,triggedByClear){return jimu_map_view_awaiter(this,void 0,void 0,(function*(){var _a;const popup=null===(_a=this.view)||void 0===_a?void 0:_a.popup;if(!popup)return;const isMapWidgetActive=this.isMapWidgetActive();if(this.isAutoShowPopupWhenSelectFeatures()&&!isMapWidgetActive)yield this.updatePopupFeaturesWhenSelectionChange(popup,triggedJimuLayerView,triggedByClear);else if(popup.visible&&!isMapWidgetActive){const selectedFeature=popup.selectedFeature;if(selectedFeature){const selectedFeatureId=selectedFeature.getObjectId();if(null!=selectedFeatureId){const strSelectedFeatureId=String(selectedFeatureId);if(triggedJimuLayerView.layer&&selectedFeature.layer===triggedJimuLayerView.layer||triggedJimuLayerView.layer&&selectedFeature.sourceLayer===triggedJimuLayerView.layer||triggedJimuLayerView.id&&selectedFeature.jimuLayerViewId===triggedJimuLayerView.id){const layerDs=triggedJimuLayerView.getLayerDataSource();if(layerDs){layerDs.getSelectedRecordIds().some((recordId=>recordId===strSelectedFeatureId))||this.closePopup()}}}}}}))}isFeaturePopupEnabledByCurrentMapPopupSetting(feature){const layer=feature.layer||feature.sourceLayer;if(layer){const jimuLayerView=this.getJimuLayerViewByThisOrOtherMapAPILayer(layer);if(jimuLayerView&&jimuLayerView.layer){return!1!==jimuLayerView.layer.popupEnabled}}return!0}updatePopupFeaturesWhenSelectionChange(popup,triggedJimuLayerView,triggedByClear){return jimu_map_view_awaiter(this,void 0,void 0,(function*(){if(!popup)return;if(!popup.visible&&triggedByClear)return void(this.popupFeaturesFromSelection&&this.closePopup());let selectedFeatures=yield this.getSelectedFeatures();selectedFeatures=selectedFeatures.filter((feature=>this.isFeaturePopupEnabledByCurrentMapPopupSetting(feature)));const currentPopupSelectedFeature=popup.selectedFeature,currentPopupSelectedFeatureJimuLayerViewId=currentPopupSelectedFeature&&currentPopupSelectedFeature.jimuLayerViewId;let firstBatchShowJimuLayerViewId=null;if(triggedByClear?currentPopupSelectedFeatureJimuLayerViewId&&(firstBatchShowJimuLayerViewId=currentPopupSelectedFeatureJimuLayerViewId):firstBatchShowJimuLayerViewId=triggedJimuLayerView.id,firstBatchShowJimuLayerViewId){const features1=[],features2=[];selectedFeatures.forEach((feature=>{feature.jimuLayerViewId===firstBatchShowJimuLayerViewId?features1.push(feature):features2.push(feature)})),selectedFeatures=[...features1,...features2]}if(currentPopupSelectedFeature&&selectedFeatures.length>0&&(currentPopupSelectedFeatureJimuLayerViewId&&currentPopupSelectedFeatureJimuLayerViewId===firstBatchShowJimuLayerViewId||!firstBatchShowJimuLayerViewId)){let index=selectedFeatures.indexOf(currentPopupSelectedFeature);if(index<0){const selectedFeatureObjectId=currentPopupSelectedFeature.getObjectId();if(null!=selectedFeatureObjectId){const count=selectedFeatures.length;for(let i=0;i<count;i++){if(selectedFeatures[i].getObjectId()===selectedFeatureObjectId){index=i;break}}}}index>=0&&(selectedFeatures.splice(index,1),selectedFeatures.unshift(currentPopupSelectedFeature))}selectedFeatures.length>0?this.openPopup(selectedFeatures):this.closePopup()}))}openPopup(features){this.view&&(features.fromSelection=!0,this.view.openPopup({features}))}closePopup(){if(this.view){const popup=this.view.popup;popup&&(popup.features=[]),this.view.closePopup()}}isAutoShowPopupWhenSelectFeatures(){return this.view.popupEnabled&&this.showPopupUponSelection}setShowPopupUponSelection(showPopupUponSelection){this.showPopupUponSelection=!!showPopupUponSelection}isPopupFeaturesFromSelection(){return this.popupFeaturesFromSelection}getSelectedFeatures(){return jimu_map_view_awaiter(this,void 0,void 0,(function*(){const selectedGraphics=[],jimuLayerViews=Object.values(this.jimuLayerViews),promises=[];if(jimuLayerViews.forEach((jimuLayerView=>{const jimuQueriableLayerView=jimuLayerView;if(jimuQueriableLayerView.getSelectedFeatures&&jimuQueriableLayerView.type!==jimu_core.iy2.SubtypeSublayer){const p=jimuQueriableLayerView.getSelectedFeatures();promises.push(p)}})),promises.length>0){const results=yield Promise.all(promises);results.length>0&&results.forEach((graphics=>{graphics&&graphics.length>0&&graphics.forEach((graphic=>{selectedGraphics.push(graphic)}))}))}return selectedGraphics}))}getSelectedFeatureCount(){let allCount=0;return Object.values(this.jimuLayerViews).forEach((jimuLayerView=>{const jimuQueriableLayerView=jimuLayerView;jimuQueriableLayerView.getSelectedFeatureCount&&jimuQueriableLayerView.type!==jimu_core.iy2.SubtypeSublayer&&(allCount+=jimuQueriableLayerView.getSelectedFeatureCount())})),allCount}addJimuMapTool(tool){this.jimuMapTools.find((t=>t.name===tool.name))||this.jimuMapTools.push(tool)}deleteJimuMapTool(toolName){this.jimuMapTools.find((t=>t.name===toolName))&&(this.jimuMapTools=this.jimuMapTools.filter((t=>t.name!==toolName)))}enableClickOpenPopup(){this.view.popupEnabled=!0}disableClickOpenPopup(){this.view.popupEnabled=!1}isClickOpenPopupEnabled(){return this.view.popupEnabled}enableClickHighlight(){this.clickHighlightEnabled=!0}disableClickHighlight(){this.clickHighlightEnabled=!1}isClickHighlightEnabled(){return this.clickHighlightEnabled}setIsActive(isActive){this.isActive=isActive,this.mapViewManager.setJimuMapView(this)}setMapWidgetState(widgetState){this.mapWidgetState=widgetState}isMapWidgetActive(){return this.mapWidgetState===jimu_core.YGz.Active}initView(view){view&&view.when((()=>{view.on("click",this.onClick.bind(this))}))}onClick(event){const screenPoint={x:event.x,y:event.y},mapPoint=this.view.toMap(screenPoint);mapPoint&&(jimu_core.BXF.getInstance().publishMessage(new jimu_core.Raz(this.mapWidgetId,mapPoint.toJSON())),this.view.hitTest(screenPoint).then((response=>{if(!this.isClickHighlightEnabled())return;const graphicResults=response.results.filter((r=>"graphic"===r.type));this.selectDataSourceOrFeatureByFeatures(this.isClickOpenPopupEnabled(),graphicResults.map((r=>r.graphic)),mapPoint)}),(()=>{this.isClickOpenPopupEnabled()||this.clearAllJimuLayerViewsSelectRecord()})))}getLayerDataSourceIdsWithSelection(){var _a,_b;const layerDataSourceIds=[],allJimuLayerViews=this.getAllJimuLayerViews(),isPopupVisible=null===(_b=null===(_a=this.view)||void 0===_a?void 0:_a.popup)||void 0===_b?void 0:_b.visible;return allJimuLayerViews.forEach((jimuLayerView=>{if(jimuLayerView&&jimuLayerView.layerDataSourceId&&jimuLayerView instanceof jimu_queriable_layer_view_JimuQueriableLayerView&&jimuLayerView.getSelectedFeatureCount){if(jimuLayerView.getSelectedFeatureCount()>0){isPopupVisible&&jimuLayerView.isPopupSelectCurrentLayerFeature()||layerDataSourceIds.push(jimuLayerView.layerDataSourceId)}}})),layerDataSourceIds}publishEmptySelectionChangeMessage(layerDataSourceIds){if(layerDataSourceIds.length>0){const messageManager=jimu_core.BXF.getInstance(),message=new jimu_core.w5X(this.mapWidgetId,[],layerDataSourceIds);messageManager.publishMessage(message)}}selectDataSourceOrFeatureByFeatures(isPopupOpen,features,mapPoint){return jimu_map_view_awaiter(this,void 0,void 0,(function*(){var _a;const layerDataSourceIdsWithSelection=this.getLayerDataSourceIdsWithSelection();if(yield this.clearAllJimuLayerViewsSelectRecord(),this.publishEmptySelectionChangeMessage(layerDataSourceIdsWithSelection),isPopupOpen)return;const firstFeature=features.find((feature=>{var _a;const layer=feature.layer;return!(!layer||layer.type!==jimu_core.iy2.FeatureLayer&&layer.type!==jimu_core.iy2.SceneLayer&&layer.type!==jimu_core.iy2.OrientedImageryLayer)&&(layer.popupEnabled||(null===(_a=this.forcePopupEnabledLayers)||void 0===_a?void 0:_a.includes(layer)))}));if(!firstFeature)return void this.tryIdentifyClickedFeature(mapPoint);const jimuLayerViewId=this.getJimuLayerViewIdByAPILayer(firstFeature.layer),jimuLayerView=this.jimuLayerViews[jimuLayerViewId];if(!jimuLayerView)return;const oId=firstFeature.getObjectId();if("number"==typeof oId){jimuLayerView.highlightFeatureById(oId),this.mapClickCount++;const mapClickCount=this.mapClickCount,layerDs=yield jimuLayerView.getOrCreateLayerDataSource();let record;layerDs&&(record=yield layerDs.queryById(oId+""));mapClickCount===this.mapClickCount&&(record&&publishSelectionChangeMessage(jimuLayerView,[record]),yield jimuLayerView.selectFeatureById(oId,record))}firstFeature.layer&&(null===(_a=this.forcePopupEnabledLayers)||void 0===_a?void 0:_a.includes(firstFeature.layer))&&this.view.openPopup({features:[firstFeature],location:mapPoint})}))}isMapServiceLayerPopupEnabled(layer){var _a;if(layer.popupEnabled){const subLayers=null===(_a=layer.sublayers)||void 0===_a?void 0:_a.toArray();if(subLayers&&subLayers.length>0){return subLayers.some((subLayer=>subLayer.popupEnabled))}}return!1}tryIdentifyClickedFeature(mapPoint){var _a,_b;let firstMapServiceLayerView=null;const layers=this.view.map.layers.toArray().reverse(),allJimuLayerViews=Object.values(this.jimuLayerViews);for(let i=0;i<layers.length;i++){const layer=layers[i];if(layer.type===jimu_core.iy2.MapImageLayer||layer.type===jimu_core.iy2.TileLayer){const mapServiceLayer=layer;if((null===(_b=null===(_a=mapServiceLayer.capabilities)||void 0===_a?void 0:_a.operations)||void 0===_b?void 0:_b.supportsIdentify)&&this.isMapServiceLayerPopupEnabled(mapServiceLayer)){const currJimuLayerView=allJimuLayerViews.find((jimuLayerView=>jimuLayerView.layer===layer));if(currJimuLayerView){firstMapServiceLayerView=currJimuLayerView;break}}}}if(firstMapServiceLayerView)return arcgis_js_api_module_loader_loadArcGISJSAPIModules(["esri/rest/identify","esri/rest/support/IdentifyParameters"]).then((([identify,IdentifyParameters])=>{const identifyLayerIds=this.getAllChildJimuLayerViews(firstMapServiceLayerView.id).filter((lv=>lv.layer.popupEnabled)).map((lv=>lv.layer.id)),params=new IdentifyParameters;params.tolerance=3,params.layerIds=identifyLayerIds,params.layerOption="top",params.width=this.view.width,params.height=this.view.height,params.geometry=mapPoint,params.mapExtent=this.view.extent,params.returnFieldName=!0,params.returnGeometry=!0,params.returnUnformattedValues=!0,identify.identify(firstMapServiceLayerView.layer.url,params).then((response=>jimu_map_view_awaiter(this,void 0,void 0,(function*(){const firstResult=response.results[0];if(!firstResult)return;const jimuLayerViewId=`${firstMapServiceLayerView.id}-${firstResult.layerId}`,jimuLayerView=this.jimuLayerViews[jimuLayerViewId];if(!jimuLayerView)return;const layerDs=yield jimuLayerView.getOrCreateLayerDataSource();if(layerDs){const record=layerDs.buildRecord(firstResult.feature);jimuLayerView.selectFeatureById(Number(record.getId()),record),publishSelectionChangeMessage(jimuLayerView,[record])}else jimuLayerView.selectFeatureById(firstResult.feature.attributes[jimuLayerView.layer.objectIdField],firstResult.feature)}))))}))}getMapDataSource(){let dataSource=null;return this.dataSourceId&&(dataSource=jimu_core.zAk.getInstance().getDataSource(this.dataSourceId)),dataSource}getJimuLayerViewByThisOrOtherMapAPILayer(targetLayer){let resultJimuLayerView=this.getJimuLayerViewByAPILayer(targetLayer);if(resultJimuLayerView)return resultJimuLayerView;const allJimuLayerViews=this.getAllJimuLayerViews(),mapDs=this.getMapDataSource();if(mapDs){const layerDSId=jimu_core.ZkX.getDataSourceIdByJSAPILayer(mapDs,targetLayer);layerDSId&&(resultJimuLayerView=allJimuLayerViews.find((jimuLayerView=>jimuLayerView.layerDataSourceId===layerDSId)))}return resultJimuLayerView}getJimuLayerViewByAPILayer(layerOrSubLayer){return Object.values(this.jimuLayerViews).find((jimuLayerView=>jimuLayerView.layer===layerOrSubLayer))}getJimuLayerViewByDataSourceId(dataSourceId){const allJimuLayerViews=this.getAllJimuLayerViews();let result=allJimuLayerViews.filter((jimuLayerView=>!jimuLayerView.fromRuntime)).find((jimuLayerView=>jimuLayerView.layerDataSourceId===dataSourceId));if(result)return result;if(!result){result=allJimuLayerViews.filter((jimuLayerView=>jimuLayerView.fromRuntime)).find((jimuLayerView=>jimuLayerView.layerDataSourceId===dataSourceId))}return result}getDataSourceIdByAPILayer(layerOrSubLayer){const jimuLayerView=this.getJimuLayerViewByAPILayer(layerOrSubLayer);if(jimuLayerView)return jimuLayerView.layerDataSourceId;const mapDataSource=this.getMapDataSource();return mapDataSource?jimu_core.ZkX.getDataSourceIdByJSAPILayer(mapDataSource,layerOrSubLayer):null}clearAllJimuLayerViewsSelectRecord(){return jimu_map_view_awaiter(this,void 0,void 0,(function*(){const jimuLayerViews=this.jimuLayerViews,jimuLayerViewKeys=Object.keys(jimuLayerViews),promises=[];for(let i=0;i<jimuLayerViewKeys.length;i++){const tempJimuLayerView=jimuLayerViews[jimuLayerViewKeys[i]];if(SelectableJimuLayerViewTypes.includes(tempJimuLayerView.type)&&tempJimuLayerView.selectFeaturesByIds){const promise=tempJimuLayerView.selectFeaturesByIds([]);promises.push(promise)}}promises.length>0&&(yield Promise.all(promises))}))}addJimuLayerView(jimuLayerView){this.jimuLayerViews[jimuLayerView.id]=jimuLayerView}whenJimuMapViewLoaded(){return jimu_map_view_awaiter(this,void 0,void 0,(function*(){return this.jimuMapViewLoadPromise?this.jimuMapViewLoadPromise:this.view?(this.jimuMapViewLoadPromise=this.view.when().then((()=>jimu_map_view_awaiter(this,void 0,void 0,(function*(){return this.startCreateJimuLayerViews(),this.createJimuTablesAndWatchTableDataSourcesInfoChange(),this.tryGoToSelectionsByUrlHash(),this.status=jimu_core.FT5.Loaded,this.mapViewManager.setJimuMapView(this),Promise.resolve(this)}))),(error=>jimu_map_view_awaiter(this,void 0,void 0,(function*(){return console.error(error),this.status=jimu_core.FT5.Failed,this.mapViewManager.setJimuMapView(this),Promise.reject(this)})))),this.jimuMapViewLoadPromise):(this.status=jimu_core.FT5.Failed,this.mapViewManager.setJimuMapView(this),this.jimuMapViewLoadPromise=Promise.reject(this),this.jimuMapViewLoadPromise)}))}whenJimuLayerViewLoaded(jimuLayerViewId){return jimu_map_view_awaiter(this,void 0,void 0,(function*(){if(this.jimuLayerViewLoadPromises[jimuLayerViewId])return this.jimuLayerViewLoadPromises[jimuLayerViewId];try{yield this.makeSureParentLayerViewsLoaded(jimuLayerViewId)}catch(err){console.log(err)}return this.jimuLayerViewLoadPromises[jimuLayerViewId]?this.jimuLayerViewLoadPromises[jimuLayerViewId]:Promise.reject(Error("Bad jimuLayerViewId:"+jimuLayerViewId))}))}whenJimuLayerViewLoadedByDataSource(ds){return jimu_map_view_awaiter(this,void 0,void 0,(function*(){let jimuLayerViewId="";if(ds.type===jimu_core.hg5.BuildingComponentSubLayer||ds.type===jimu_core.hg5.BuildingGroupSubLayer)jimuLayerViewId=`${this.mapWidgetId}-${ds.id}`;else{const jimuLayerId=ds.jimuLayerId;if(!jimuLayerId)return console.error("Can not find jimuLayerId in data source.",ds.id),Promise.resolve(null);jimuLayerViewId=this.getJimuLayerViewIdByJimuLayerId(jimuLayerId)}return this.whenJimuLayerViewLoaded(jimuLayerViewId)}))}makeSureParentLayerViewsLoaded(jimuLayerViewId){return jimu_map_view_awaiter(this,void 0,void 0,(function*(){const promiseCount=Object.keys(this.jimuLayerViewLoadPromises).length,parentPromises=[];Object.keys(this.jimuLayerViewLoadPromises).forEach((id=>{const promise=this.jimuLayerViewLoadPromises[id];promise&&jimuLayerViewId.startsWith(id)&&parentPromises.push(promise)})),yield Promise.all(parentPromises),Object.keys(this.jimuLayerViewLoadPromises).length>promiseCount&&(yield this.makeSureParentLayerViewsLoaded(jimuLayerViewId))}))}whenAllJimuLayerViewLoaded(){return jimu_map_view_awaiter(this,void 0,void 0,(function*(){const loadedJimuLayerViews={};return yield this.whenChildJimuLayerViewLoaded(null,loadedJimuLayerViews),loadedJimuLayerViews}))}whenChildJimuLayerViewLoaded(jlvId,loadedJimuLayerViews){return jimu_map_view_awaiter(this,void 0,void 0,(function*(){const childJimuLayerViews=yield Promise.all(this.getChildJimuLayerViewIds(jlvId).map((lvId=>this.whenJimuLayerViewLoaded(lvId).then((jlv=>(loadedJimuLayerViews[lvId]=jlv,jlv))).catch((err=>(console.error("JimuLayerView fails.",lvId,err),null))))));yield Promise.all(childJimuLayerViews.filter((lv=>lv)).map((lv=>this.whenChildJimuLayerViewLoaded(lv.id,loadedJimuLayerViews))))}))}getAllJimuLayerViews(){let jimuLayerViews=Object.values(this.jimuLayerViews);return jimuLayerViews=this.sortJimuLayerViewsByLayerOrder(jimuLayerViews),jimuLayerViews}getParentJimuLayerViews(jimuLayerViewId){const parentJimuLayerViews=[];let currentJimuLayerView=this.jimuLayerViews[jimuLayerViewId];for(;null==currentJimuLayerView?void 0:currentJimuLayerView.parentJimuLayerViewId;){const parentJimuLayerView=this.jimuLayerViews[currentJimuLayerView.parentJimuLayerViewId];parentJimuLayerView&&parentJimuLayerViews.push(parentJimuLayerView),currentJimuLayerView=parentJimuLayerView}return parentJimuLayerViews}getAllChildJimuLayerViews(jimuLayerViewId){const childLayerViews=[];return this.findChildLayerView(jimuLayerViewId,childLayerViews),childLayerViews}getChildJimuLayerViews(jimuLayerViewId){const childJimuLayerViews=[];return Object.values(this.jimuLayerViews).forEach((jimuLayerView=>{jimuLayerView&&jimuLayerView.parentJimuLayerViewId===jimuLayerViewId&&childJimuLayerViews.push(jimuLayerView)})),childJimuLayerViews}getChildJimuLayerViewIds(jimuLayerViewId){return Object.keys(this.jimuLayerViews).filter((lvId=>this.jimuLayerViews[lvId].parentJimuLayerViewId===jimuLayerViewId))}findChildLayerView(parentJimuLayerViewId,childLayerViews){const layerViews=this.jimuLayerViews,layerViewsKeys=Object.keys(layerViews);for(let i=0;i<layerViewsKeys.length;i++){if(layerViews[layerViewsKeys[i]].parentJimuLayerViewId===parentJimuLayerViewId){const jimuLayerView=layerViews[layerViewsKeys[i]];childLayerViews.push(jimuLayerView),this.findChildLayerView(jimuLayerView.id,childLayerViews)}}}sortJimuLayerViewsByLayerOrder(jimuLayerViews){return sortJimuLayerViewsByLayerOrder(jimuLayerViews)}startCreateJimuLayerViews(){Object.keys(this.jimuLayerViewLoadPromises).length>0||this.view.map.layers.toArray().reverse().forEach(((layer,index)=>{try{this.createJimuLayerView(layer,null,index)}catch(e){console.log("Create JimuLayerViews error.",e)}}))}createJimuLayerView(layerOrSubLayer,parentJimuLayerId,index,runtimeAddedDataSource,fromRuntime){return jimu_map_view_awaiter(this,void 0,void 0,(function*(){var _a,_b,_c;let jimuLayerView=null;const rootDs=jimu_core.zAk.getInstance().getDataSource(this.dataSourceId),layerId=layerOrSubLayer.id+"",jimuLayerId=jimu_core.ZkX.getJimuLayerIdByJSAPILayer(layerOrSubLayer),jimuLayerViewId=this.getJimuLayerViewIdByJimuLayerId(jimuLayerId),parentJimuLayerViewId=parentJimuLayerId?this.getJimuLayerViewIdByJimuLayerId(parentJimuLayerId):null;let layerDSId;if(fromRuntime){if(runtimeAddedDataSource)layerDSId=runtimeAddedDataSource.id;else if(parentJimuLayerViewId){const parentJimuLayerView=this.jimuLayerViews[parentJimuLayerViewId],parentDataSource=parentJimuLayerView&&parentJimuLayerView.getLayerDataSource();layerDSId=jimu_core.ZkX.getDataSourceIdByJSAPILayer(parentDataSource,layerOrSubLayer)}}else layerDSId=jimu_core.ZkX.getDataSourceIdByJSAPILayer(rootDs,layerOrSubLayer);layerDSId||(layerDSId="");const jimuLayerViewConstructorOptions={id:jimuLayerViewId,jimuLayerId,layerDataSourceId:layerDSId,jimuMapViewId:this.id,parentJimuLayerViewId,mapViewManager:this.mapViewManager,index,fromRuntime,urlHashLayersVisibility:this.urlHashLayersVisibility};if("esri.layers.support.Sublayer"===layerOrSubLayer.declaredClass){const subLayer=layerOrSubLayer,layerType=(null===(_a=subLayer.sourceJSON)||void 0===_a?void 0:_a.layerType)||(null===(_b=subLayer.sourceJSON)||void 0===_b?void 0:_b.type);layerType===jimu_core.OhU.GroupLayer?(null===(_c=subLayer.sublayers)||void 0===_c?void 0:_c.length)>0&&(Object.assign(jimuLayerViewConstructorOptions,{type:jimu_core.iy2.GroupLayer,layer:subLayer}),jimuLayerView=new jimu_group_layer_view_JimuGroupLayerView(jimuLayerViewConstructorOptions)):layerType===jimu_core.OhU.FeatureLayer?(Object.assign(jimuLayerViewConstructorOptions,{type:jimu_core.iy2.FeatureLayer,layer:subLayer}),jimuLayerView=new jimu_feature_layer_view_JimuFeatureLayerView(jimuLayerViewConstructorOptions)):"Raster Layer"===layerType?(Object.assign(jimuLayerViewConstructorOptions,{type:subLayer.type,layer:subLayer}),jimuLayerView=new jimu_layer_view_JimuLayerView(jimuLayerViewConstructorOptions)):console.log("Unsupported sub layer type.",layerId)}else{const layer=layerOrSubLayer;switch(layer.type){case jimu_core.iy2.SceneLayer:Object.assign(jimuLayerViewConstructorOptions,{type:layer.type,layer}),jimuLayerView=new jimu_scene_layer_view_JimuSceneLayerView(jimuLayerViewConstructorOptions);break;case jimu_core.iy2.FeatureLayer:Object.assign(jimuLayerViewConstructorOptions,{type:layer.type,layer}),jimuLayerView=new jimu_feature_layer_view_JimuFeatureLayerView(jimuLayerViewConstructorOptions);break;case jimu_core.iy2.MapImageLayer:case jimu_core.iy2.TileLayer:Object.assign(jimuLayerViewConstructorOptions,{type:layer.type,layer}),layer.type===jimu_core.iy2.MapImageLayer&&(jimuLayerView=new jimu_mapimage_layer_view_JimuMapImageLayerView(jimuLayerViewConstructorOptions)),layer.type===jimu_core.iy2.TileLayer&&(jimuLayerView=new jimu_tile_layer_view_JimuTileLayerView(jimuLayerViewConstructorOptions));break;case jimu_core.iy2.GroupLayer:Object.assign(jimuLayerViewConstructorOptions,{view:null,type:layer.type,layer}),jimuLayerView=new jimu_group_layer_view_JimuGroupLayerView(jimuLayerViewConstructorOptions);break;case jimu_core.iy2.SubtypeGroupLayer:Object.assign(jimuLayerViewConstructorOptions,{type:layer.type,layer}),jimuLayerView=new jimu_subtype_group_layer_view_JimuSubtypeGroupLayerView(jimuLayerViewConstructorOptions);break;case jimu_core.iy2.SubtypeSublayer:Object.assign(jimuLayerViewConstructorOptions,{type:layer.type,layer}),jimuLayerView=new jimu_subtype_sublayer_view_JimuSubtypeSublayerView(jimuLayerViewConstructorOptions);break;case jimu_core.iy2.BuildingSceneLayer:Object.assign(jimuLayerViewConstructorOptions,{type:layer.type,layer}),jimuLayerView=new jimu_building_scene_layer_view_JimuBuildingSceneLayerView(jimuLayerViewConstructorOptions);break;case jimu_core.iy2.BuildingGroupSublayer:Object.assign(jimuLayerViewConstructorOptions,{type:layer.type,layer}),jimuLayerView=new jimu_building_group_sublayer_view_JimuBuildingGroupSublayer(jimuLayerViewConstructorOptions);break;case jimu_core.iy2.BuildingComponentSublayer:Object.assign(jimuLayerViewConstructorOptions,{type:layer.type,layer}),jimuLayerView=new jimu_building_component_sublayer_view_JimuBuildingComponentSublayerView(jimuLayerViewConstructorOptions);break;case jimu_core.iy2.ImageryLayer:Object.assign(jimuLayerViewConstructorOptions,{type:layer.type,layer}),jimuLayerView=new jimu_imagery_layer_view_JimuImageryLayerView(jimuLayerViewConstructorOptions);break;case jimu_core.iy2.ImageryTileLayer:Object.assign(jimuLayerViewConstructorOptions,{type:layer.type,layer}),jimuLayerView=new jimu_imagery_tile_layer_view_JimuImageryTileLayerView(jimuLayerViewConstructorOptions);break;case jimu_core.iy2.OrientedImageryLayer:Object.assign(jimuLayerViewConstructorOptions,{type:layer.type,layer}),jimuLayerView=new jimu_oriented_imagery_layer_view_JimuOrientedImageryLayerView(jimuLayerViewConstructorOptions);break;default:Object.assign(jimuLayerViewConstructorOptions,{type:layer.type,layer}),jimuLayerView=new jimu_layer_view_JimuLayerView(jimuLayerViewConstructorOptions)}}return jimuLayerView?(this.addJimuLayerView(jimuLayerView),this.finalLayerVisibles[jimuLayerView.id]=jimuLayerView.isLayerVisible(),this.jimuLayerViewLoadPromises[jimuLayerViewId]=this.whenLayerView(jimuLayerView).then((view=>(jimuLayerView.view=view,jimuLayerView.ready()))).then((lv=>(lv.isLoaded=!0,setTimeout((()=>{this.onJimuLayerViewCreated(lv)}),0),lv))),jimuLayerView):Promise.resolve(null)}))}whenLayerView(jimuLayerView){return jimu_map_view_awaiter(this,void 0,void 0,(function*(){var _a,_b;const layer=jimuLayerView.layer;if("esri.layers.support.Sublayer"===layer.declaredClass||jimuLayerView.type===jimu_core.iy2.GroupLayer||"esri.layers.support.SubtypeSublayer"===layer.declaredClass||"esri.layers.buildingSublayers.BuildingGroupSublayer"===layer.declaredClass)return null;if("esri.layers.buildingSublayers.BuildingComponentSublayer"===layer.declaredClass){const buildingComponentSublayer=layer;let buildingSceneLayer=null,buildingComponentSublayerView=null;if("esri.layers.BuildingSceneLayer"===(null===(_a=buildingComponentSublayer.layer)||void 0===_a?void 0:_a.declaredClass))buildingSceneLayer=buildingComponentSublayer.layer;else{const ancestorJimuLayerViews=this.getParentJimuLayerViews(jimuLayerView.id);for(let i=0;i<ancestorJimuLayerViews.length;i++){const ancestorJimuLayer=ancestorJimuLayerViews[i].layer;if("esri.layers.BuildingSceneLayer"===ancestorJimuLayer.declaredClass){buildingSceneLayer=ancestorJimuLayer;break}}}if(buildingSceneLayer){const buildingSceneLayerView=yield this.view.whenLayerView(buildingSceneLayer);(null===(_b=null==buildingSceneLayerView?void 0:buildingSceneLayerView.sublayerViews)||void 0===_b?void 0:_b.length)>0&&(buildingComponentSublayerView=buildingSceneLayerView.sublayerViews.find((sublayerView=>sublayerView.sublayer===buildingComponentSublayer)))}else console.error(`BuildingComponentSublayer ${jimuLayerView.id} can not get the related BuildingSceneLayer`);return buildingComponentSublayerView}return this.view.whenLayerView(layer)}))}onStoreChange(preDsInfo,dsInfo){Object.keys(dsInfo||{}).forEach((dsId=>{if(dsInfo[dsId].instanceStatus===jimu_core.e3_.Created&&(!(null==preDsInfo?void 0:preDsInfo[dsId])||preDsInfo[dsId].instanceStatus!==jimu_core.e3_.Created)){const ds=jimu_core.zAk.getInstance().getDataSource(dsId),jlvId=Object.keys(this.jimuLayerViews).find((jlvId=>!this.jimuLayerViews[jlvId].layerDataSourceId&&this.jimuLayerViews[jlvId].jimuLayerId===(null==ds?void 0:ds.jimuLayerId)));jlvId&&(this.jimuLayerViews[jlvId].layerDataSourceId=ds.id)}}))}getJimuTables(){return(this.jimuTableArray||[]).slice()}createJimuTablesAndWatchTableDataSourcesInfoChange(){var _a,_b,_c,_d;const mapDataSource=this.getMapDataSource(),tables=null===(_d=null===(_c=null===(_b=null===(_a=this.view)||void 0===_a?void 0:_a.map)||void 0===_b?void 0:_b.tables)||void 0===_c?void 0:_c.toArray())||void 0===_d?void 0:_d.reverse();tables&&tables.length>0&&tables.forEach((table=>{const jimuLayerId=jimu_core.ZkX.getJimuLayerIdByJSAPILayer(table),jimuLayerViewId=this.getJimuLayerViewIdByJimuLayerId(jimuLayerId);this.jimuTables[jimuLayerViewId]=table;const jimuTable={jimuTableId:jimuLayerViewId,table};if(this.jimuTableArray.push(jimuTable),!mapDataSource)return;if("esri.layers.FeatureLayer"!==table.declaredClass)return;const tableDataSourceId=jimu_core.ZkX.getDataSourceIdByJSAPILayer(mapDataSource,table);if(tableDataSourceId){const unsubscribe=(0,jimu_core.Yzm)(((preDsInfo,dsInfo)=>{this.onTableDataSourceInfoChange(table,tableDataSourceId)}),["dataSourcesInfo",tableDataSourceId]);this.storeUnsubscribes.push(unsubscribe)}}))}onTableDataSourceInfoChange(table,tableDataSourceId){const tableDs=jimu_core.zAk.getInstance().getDataSource(tableDataSourceId);if(tableDs&&tableDs.getRealQueryParams){const localQuery={outFields:["*"],where:"",returnGeometry:!0},realQueryParams=tableDs.getRealQueryParams(localQuery,"query");realQueryParams&&table.definitionExpression!==realQueryParams.where&&(table.definitionExpression=realQueryParams.where)}}clearSelectedFeatures(){const layerDataSourceIdsWithSelection=this.getLayerDataSourceIdsWithSelection();this.clearAllJimuLayerViewsSelectRecord(),this.publishEmptySelectionChangeMessage(layerDataSourceIdsWithSelection)}selectFeaturesByGraphic(graphic,spatialRelationship,selectionMode,options){return jimu_map_view_awaiter(this,void 0,void 0,(function*(){const geometryEngine=(yield arcgis_js_api_module_loader_loadArcGISJSAPIModules(["esri/geometry/geometryEngine"]))[0];let geometry=graphic.geometry;if("point"===geometry.type||"polyline"===geometry.type){const resolution=2.54*this.view.scale/9600;geometry=geometryEngine.buffer(geometry,10*resolution,"meters")}const query={geometry,returnGeometry:!0,outFields:[],returnZ:!0};query.spatialRelationship=spatialRelationship;let filterJimuLayerView=null;options&&(options.returnAllFields&&(query.outFields=["*"]),options.returnFullGeometry&&(query.returnFullGeometry=!0),"function"==typeof options.filterJimuLayerView&&(filterJimuLayerView=options.filterJimuLayerView));const jimuLayerViews=this.jimuLayerViews,jimuLayerViewKeys=Object.keys(jimuLayerViews),allSelectPromises=[],result={},selectFeaturesByQuery=jimuLayerView=>jimu_map_view_awaiter(this,void 0,void 0,(function*(){const features=yield jimuLayerView.selectFeaturesByQuery(query,selectionMode);if(result[jimuLayerView.id]=features,jimuLayerView.type===jimu_core.iy2.SubtypeGroupLayer){const subtypeGrouplayerDataSource=jimuLayerView.getLayerDataSource();if(subtypeGrouplayerDataSource){const subtypeGrouplayerRecords=subtypeGrouplayerDataSource.getSelectedRecords(),subtypeRecordsObj=convertSubtypeGrouplayerRecordsToSubtypeSublayerRecords(subtypeGrouplayerDataSource,subtypeGrouplayerRecords);Object.keys(subtypeRecordsObj).forEach((subtypeSublayerDataSourceId=>{const jimuSubtypeSublayerView=this.getJimuLayerViewByDataSourceId(subtypeSublayerDataSourceId),jimuSubtypeSublayerViewId=null==jimuSubtypeSublayerView?void 0:jimuSubtypeSublayerView.id;if(jimuSubtypeSublayerViewId){const subtypeSublayerFeatures=subtypeRecordsObj[subtypeSublayerDataSourceId].map((record=>record.feature));result[jimuSubtypeSublayerViewId]=subtypeSublayerFeatures}}))}}}));for(let i=0;i<jimuLayerViewKeys.length;i++){const tempJimuLayerView=jimuLayerViews[jimuLayerViewKeys[i]];if(SelectableJimuLayerViewTypes.includes(tempJimuLayerView.type)&&tempJimuLayerView.selectFeaturesByQuery){if(filterJimuLayerView&&filterJimuLayerView(tempJimuLayerView)||!filterJimuLayerView){const tempSelectPromise=selectFeaturesByQuery(tempJimuLayerView);allSelectPromises.push(tempSelectPromise)}}}return this.onSelectByQueryProgressChange(),yield Promise.all(allSelectPromises),result}))}cancelSelectByQuery(updateSelection){return jimu_map_view_awaiter(this,void 0,void 0,(function*(){const jimuLayerViews=this.jimuLayerViews,jimuLayerViewKeys=Object.keys(jimuLayerViews),promises=[];for(let i=0;i<jimuLayerViewKeys.length;i++){const jimuLayerView=jimuLayerViews[jimuLayerViewKeys[i]];if(SelectableJimuLayerViewTypes.includes(jimuLayerView.type)&&jimuLayerView.cancelSelectByQuery){const promise=jimuLayerView.cancelSelectByQuery(updateSelection);promises.push(promise)}}yield Promise.all(promises)}))}getSelectByQueryProgress(){const jimuLayerViewProgresses=[],jimuLayerViews=this.jimuLayerViews,jimuLayerViewKeys=Object.keys(jimuLayerViews);for(let i=0;i<jimuLayerViewKeys.length;i++){const jimuLayerView=jimuLayerViews[jimuLayerViewKeys[i]];if(SelectableJimuLayerViewTypes.includes(jimuLayerView.type)&&jimuLayerView.getSelectQueryProgress){const jimuLayerViewProgress=jimuLayerView.getSelectQueryProgress();jimuLayerViewProgresses.push(jimuLayerViewProgress)}}if(0===jimuLayerViewProgresses.length)return 1;{let allProgress=jimuLayerViewProgresses.reduce(((acc,jimuLayerViewProgress)=>acc+jimuLayerViewProgress));return allProgress/=jimuLayerViewProgresses.length,allProgress=Math.max(0,Math.min(allProgress,1)),allProgress}}destroy(){var _a,_b;this.cacheListeners=[],this.restoreListeners=[],this.selectedFeaturesChangeListeners=[],this.jimuLayerViewCreatedListeners=[],this.jimuLayerViewRemovedListeners=[],this.jimuLayerViewsVisibleChangedListeners=[],this.selectByQueryProgressChangeListeners=[],this.forcePopupEnabledLayers=[],(null===(_a=this.watchHandles)||void 0===_a?void 0:_a.length)>0&&(this.watchHandles.forEach((handle=>{handle&&handle.remove()})),this.watchHandles=[]),this.watchAddLayerHandle&&(this.watchAddLayerHandle.remove(),this.watchAddLayerHandle=null),this.watchRemoveLayerHandle&&(this.watchRemoveLayerHandle.remove(),this.watchRemoveLayerHandle=null),this.watchPopupFeaturesHandle&&(this.watchPopupFeaturesHandle.remove(),this.watchPopupFeaturesHandle=null),this.watchPopupSelectedHandle&&(this.watchPopupSelectedHandle.remove(),this.watchPopupSelectedHandle=null),(null===(_b=this.storeUnsubscribes)||void 0===_b?void 0:_b.length)>0&&this.storeUnsubscribes.forEach((unsubscribe=>{unsubscribe()})),this.storeUnsubscribes=[];const targetJimuMapViewId=this.id,mutableState=jimu_core.vbm.getInstance().getStateValue([this.mapWidgetId])||{},addToMapDatas=mutableState.addToMapDatas,showOnMapDatas=mutableState.showOnMapDatas;if(addToMapDatas){Object.keys(addToMapDatas).forEach((layerId=>{const addToMapData=addToMapDatas[layerId];addToMapData&&addToMapData.mapWidgetId===this.mapWidgetId&&addToMapData.jimuMapViewId===targetJimuMapViewId&&delete addToMapDatas[layerId]}))}if(showOnMapDatas){Object.keys(showOnMapDatas).forEach((layerId=>{const showOnMapData=showOnMapDatas[layerId];showOnMapData&&showOnMapData.mapWidgetId===this.mapWidgetId&&showOnMapData.jimuMapViewId===targetJimuMapViewId&&delete showOnMapDatas[layerId]}))}const jimuLayerViews=this.jimuLayerViews,jimuLayerViewIds=Object.keys(jimuLayerViews);for(let i=0;i<jimuLayerViewIds.length;i++){jimuLayerViews[jimuLayerViewIds[i]].destroy()}this.view&&(this.view.destroyed||(this.view.graphics&&this.view.graphics.destroyed&&this.view.graphics.destroy(),this.view.container=null,this.view.allLayerViews&&this.view.allLayerViews.destroyed&&this.view.allLayerViews.destroy(),this.view.layerViews&&this.view.layerViews.destroyed&&this.view.layerViews.destroy(),this.jimuMapTools=[],this.view.destroy(),this.view=null))}_getDefaultJimuMapViewId(){const jimuMapViewsInfo=(0,jimu_core.Vp3)().getState().jimuMapViewsInfo;return Object.keys(jimuMapViewsInfo||{}).find((viewId=>jimuMapViewsInfo[viewId].mapWidgetId===this.mapWidgetId))}handleShowOnMapAction(newShowOnMapDatas){const dataActionPromises=[];Object.entries(newShowOnMapDatas).forEach((entry=>{const layerId=entry[0],newShowOnMapData=entry[1];let jimuMapViewId=newShowOnMapData.jimuMapViewId;if(jimuMapViewId||newShowOnMapData.mapWidgetId!==this.mapWidgetId||(jimuMapViewId=this._getDefaultJimuMapViewId()),jimuMapViewId===this.id){let promise=null;promise=this.showOnMapDatas[layerId]?this.tryUpdateFeatureLayerForShowOnMapAction(layerId,newShowOnMapData):this.createFeatureLayerForShowOnMapAction(layerId,newShowOnMapData),newShowOnMapData.type===ActionType.DataAction&&dataActionPromises.push(promise),this.showOnMapDatas[layerId]=newShowOnMapData}})),Object.entries(this.showOnMapDatas).forEach((entry=>{const layerId=entry[0];if(!newShowOnMapDatas[layerId]){const layer=this.view.map.findLayerById(layerId);delete this.showOnMapDatas[layerId],layer&&this.view.map.remove(layer)}})),dataActionPromises.length>0&&Promise.all(dataActionPromises).then((graphicsArray=>{const graphics=graphicsArray.flat();graphics.length>0&&zoomTo(this.view,graphics,{padding:{left:50,right:50,top:50,bottom:50}})}))}createFeatureLayerForShowOnMapAction(layerId,showOnMapData){return jimu_map_view_awaiter(this,void 0,void 0,(function*(){var _a,_b,_c,_d,_e;let resultFeatures=[];try{const{dataSet,title,symbolOption}=showOnMapData,modules=yield arcgis_js_api_module_loader_loadArcGISJSAPIModules(["esri/symbols/support/jsonUtils","esri/symbols/support/symbolUtils","esri/renderers/support/jsonUtils","esri/renderers/UniqueValueRenderer"]),[symbolsSupportJsonUtils,symbolUtils,rendererSupportJsonUtils,UniqueValueRenderer]=modules,rawDataSource=dataSet.dataSource;let records=dataSet.records||[];records=records.filter((record=>record&&record.getGeometry()));const objectIdFieldName=rawDataSource.getIdField(),rawFeatureSet=yield function convertDataRecordSetToFeatureSet(dsSet){return(0,jimu_core.e$n)(["esri/Graphic","esri/rest/support/FeatureSet"]).then((modules=>{const[Graphic,FeatureSet]=modules,featureSet=new FeatureSet,geometryType=jimu_core.ZkX.changeRestAPIGeometryTypeToJSAPIGeometryType(dsSet.dataSource.getGeometryType());return featureSet.geometryType=geometryType,featureSet.features=dsSet.records.map((record=>{let graphic;const recordFeature=record.feature;return"esri.Graphic"===(null==recordFeature?void 0:recordFeature.declaredClass)?graphic=recordFeature.clone():(recordFeature.geometry&&(recordFeature.geometry.type=geometryType),graphic=new Graphic({geometry:recordFeature.geometry,attributes:recordFeature.attributes})),graphic})),featureSet})).catch((e=>(console.warn(e),null)))}(dataSet);(null===(_a=null==rawFeatureSet?void 0:rawFeatureSet.features)||void 0===_a?void 0:_a.length)>0&&(resultFeatures=rawFeatureSet.features.filter((feature=>!!feature.geometry)));let originalLayer=null,originalLayerRenderer=null;if(records.length>0){const firstGraphic=records[0].getFeature();firstGraphic&&(originalLayer=firstGraphic.layer||firstGraphic.sourceLayer)}originalLayer&&originalLayer.renderer&&"function"==typeof(null===(_b=originalLayer.renderer)||void 0===_b?void 0:_b.clone)&&(originalLayerRenderer=null===(_c=originalLayer.renderer)||void 0===_c?void 0:_c.clone());let shouldCreateNewDataSource=!0;if(showOnMapData.type===ActionType.DataAction)shouldCreateNewDataSource=!0;else if(showOnMapData.type===ActionType.MessageAction){shouldCreateNewDataSource=!!this.getJimuLayerViewByDataSourceId(rawDataSource.id)}let dataSource=null,layer=null;if(shouldCreateNewDataSource){const uid=(0,jimu_core.nms)(),schema=null===(_d=rawDataSource.getSchema())||void 0===_d?void 0:_d.asMutable({deep:!0}),outputDataSourceJson={id:`${this.mapWidgetId}_show_on_map_${uid}`,type:jimu_core.hg5.FeatureLayer,label:title||rawDataSource.getLabel(),isOutputFromWidget:!0,originDataSources:null,url:null,itemId:null,portalUrl:null,schema},dsManager=jimu_core.zAk.getInstance(),ds=yield dsManager.createDataSource((0,jimu_core.J3Z)(outputDataSourceJson));let features=yield jimu_core.ZkX.changeJimuRecordsToJSAPIGraphics(records);features||(features=[]),features=features.filter((feature=>!!feature)),yield ds.setSourceFeatures(features),ds.setStatus(jimu_core.e3_.Unloaded),ds.setCountStatus(jimu_core.e3_.Unloaded),dataSource=ds,layer=ds.layer}else{dataSource=rawDataSource;const res=yield jimu_core.ZkX.createJSAPIFeatureLayerByRecords(dataSource,records);layer=null==res?void 0:res.layer}if(layer){if(layer[jimu_core.yC0.EXB_DATA_SOURCE]=dataSource,layer[jimu_core.yC0.EXB_DATA_SET]=dataSet,layer[jimu_core.yC0.EXB_LAYER_VIEW_IGNORE_SPATIAL_FILTER]=!0,layer.id=layerId,!layer.geometryType&&records.length>0){const firstRecord=records[0],firstGeometry=null===(_e=null==firstRecord?void 0:firstRecord.feature)||void 0===_e?void 0:_e.geometry;if(firstGeometry&&firstGeometry.declaredClass){let geometryType=firstGeometry.type;geometryType&&("extent"===geometryType&&(geometryType="polygon"),layer.geometryType=geometryType)}}title&&(layer.title=title);const fieldInfos=layer.fields;fieldInfos&&fieldInfos.forEach((fieldInfo=>{fieldInfo.editable=!1})),showOnMapData.isOperationalLayer?(layer.listMode="show",layer.legendEnabled=!0,layer.popupEnabled=!0):(layer.listMode="hide",layer.legendEnabled=!1,layer.popupEnabled=!1),layer.editingEnabled=!0;const existingObjectIds=yield layer.queryObjectIds({where:"1=1"}),existingObjectIdObj={};existingObjectIds.forEach((objectId=>{existingObjectIdObj[objectId]=!0}));const missedRecords=records.filter((record=>{const recordId=record.getId();return recordId&&!existingObjectIdObj[recordId]}));if(missedRecords.length>0){let missedFeatures=yield jimu_core.ZkX.changeJimuRecordsToJSAPIGraphics(missedRecords);missedFeatures||(missedFeatures=[]),missedFeatures=missedFeatures.filter((feature=>!!feature)),yield layer.applyEdits({addFeatures:missedFeatures})}const jsAPIGeometryType=layer.geometryType;let symbolGeometryType;if("point"===jsAPIGeometryType||"polyline"===jsAPIGeometryType||"polygon"===jsAPIGeometryType?symbolGeometryType=jsAPIGeometryType:"multipoint"===jsAPIGeometryType&&(symbolGeometryType="point"),!symbolGeometryType)throw new Error(`invalid geometry type ${jsAPIGeometryType}`);let renderer=null;symbolOption?renderer=yield function createSimpleRendererBySymbolOption(symbolsSupportJsonUtils,symbolOption,symbolGeometryType){return show_on_map_utils_awaiter(this,void 0,void 0,(function*(){let result=null,symbol=null;return symbolOption&&(symbolOption.pointSymbol&&"point"===symbolGeometryType?symbol=symbolsSupportJsonUtils.fromJSON(symbolOption.pointSymbol):symbolOption.polylineSymbol&&"polyline"===symbolGeometryType?symbol=symbolsSupportJsonUtils.fromJSON(symbolOption.polylineSymbol):symbolOption.polygonSymbol&&"polygon"===symbolGeometryType&&(symbol=symbolsSupportJsonUtils.fromJSON(symbolOption.polygonSymbol))),symbol&&(result=yield createSimpleRenderer(symbol)),result}))}(symbolsSupportJsonUtils,symbolOption,symbolGeometryType):void 0===symbolOption?renderer=yield createDefaultSimpleRenderer(symbolsSupportJsonUtils,symbolGeometryType):null===symbolOption&&originalLayerRenderer&&(renderer=yield createRendererByLayerDefinedSymbol(rawDataSource,originalLayer,originalLayerRenderer,this.view,rawFeatureSet,objectIdFieldName,symbolGeometryType,symbolUtils,symbolsSupportJsonUtils,rendererSupportJsonUtils,UniqueValueRenderer)),renderer||(renderer=yield createDefaultSimpleRenderer(symbolsSupportJsonUtils,symbolGeometryType)),layer.renderer=renderer,yield this.addLayerAndCreateJimuLayerView(layer,dataSource)}}catch(e){console.warn("drawDataRecordSet error",e),resultFeatures=[]}return resultFeatures||(resultFeatures=[]),resultFeatures}))}tryUpdateFeatureLayerForShowOnMapAction(layerId,showOnMapData){return jimu_map_view_awaiter(this,void 0,void 0,(function*(){const{dataSet}=showOnMapData,layer=this.view.map.findLayerById(layerId);let graphics=[];if(layer){if(layer[jimu_core.yC0.EXB_DATA_SET]===dataSet)return graphics=[],graphics;{const jimuLayerView=this.getJimuLayerViewByAPILayer(layer);jimuLayerView?this.removeJimuLayerView(jimuLayerView):this.view.map.remove(layer),graphics=yield this.createFeatureLayerForShowOnMapAction(layerId,showOnMapData)}}return graphics}))}handleAddToMapAction(newAddToMapDatas){Object.entries(newAddToMapDatas).forEach((entry=>{const addToMapDataId=entry[0],addToMapData=entry[1];let jimuMapViewId=addToMapData.jimuMapViewId;if(jimuMapViewId||addToMapData.mapWidgetId!==this.mapWidgetId||(jimuMapViewId=this._getDefaultJimuMapViewId()),jimuMapViewId===this.id&&addToMapData.dataChangeType===DataChangeType.Create){if(addToMapData.dataChangeType===DataChangeType.Create){addToMapData.dataChangeType=DataChangeType.Creating;const targetLayerId=addToMapDataId;this.addLayerToMap(addToMapData.dataSourceId,addToMapDataId).then((()=>{const addToMapData=jimu_core.vbm.getInstance().getStateValue([this.mapWidgetId,"addToMapDatas",`${targetLayerId}`]);jimu_core.vbm.getInstance().updateStateValue(this.mapWidgetId,`addToMapDatas.${targetLayerId}`,Object.assign(Object.assign({},addToMapData),{dataChangeType:DataChangeType.Created,dataChangeStatus:DataChangeStatus.Fulfilled}))})).catch((err=>{jimu_core.vbm.getInstance().updateStateValue(this.mapWidgetId,`addToMapDatas.${targetLayerId}.dataChangeStatus`,DataChangeStatus.Rejected),setTimeout((()=>{jimu_core.vbm.getInstance().updateStateValue(this.mapWidgetId,`addToMapDatas.${targetLayerId}.dataChangeStatus`,DataChangeStatus.RejectedAndKnown)}),3e3)}))}}else jimuMapViewId===this.id&&addToMapData.dataChangeType===DataChangeType.Remove&&(this.removeLayerFromMap(addToMapDataId),delete newAddToMapDatas[addToMapDataId])}))}addLayerToMap(dataSourceId,targetLayerId){return jimu_map_view_awaiter(this,void 0,void 0,(function*(){const dataSource=jimu_core.zAk.getInstance().getDataSource(dataSourceId);if(!dataSource)throw new Error(`can't get data source for ${dataSourceId}`);const layer=yield null==dataSource?void 0:dataSource.createJSAPILayerByDataSource();if(!layer)throw new Error(`data source ${dataSourceId} can't create layer`);layer.id=targetLayerId;return yield this.addLayerAndCreateJimuLayerView(layer,dataSource)}))}addLayerAndCreateJimuLayerView(layer,dataSource){return jimu_map_view_awaiter(this,void 0,void 0,(function*(){layer[jimu_core.yC0.EXB_LAYER_FROM_RUNTIME]=!0,this.view.map.add(layer);const layerIndex=this.getNewMinLayerIndexOfRootLayers();return yield this.createJimuLayerView(layer,null,layerIndex,dataSource,!0)}))}getNewMinLayerIndexOfRootLayers(){let currentMinIndex=null;return Object.values(this.jimuLayerViews).forEach((jimuLayerView=>{jimuLayerView&&!jimuLayerView.parentJimuLayerViewId&&(currentMinIndex="number"==typeof currentMinIndex?Math.min(currentMinIndex,jimuLayerView.index):jimuLayerView.index)})),"number"==typeof currentMinIndex?currentMinIndex-1:0}removeJimuLayerView(jimuLayerView){if(!jimuLayerView)return;if(jimuLayerView.getJimuMapView()===this&&this.jimuLayerViews[jimuLayerView.id]===jimuLayerView&&jimuLayerView.fromRuntime){const childJimuLayerViews=this.getChildJimuLayerViewIds(jimuLayerView.id).map((childJimuLayerViewId=>this.jimuLayerViews[childJimuLayerViewId]));delete this.jimuLayerViews[jimuLayerView.id],this.jimuLayerViewLoadPromises&&delete this.jimuLayerViewLoadPromises[jimuLayerView.id];const layer=jimuLayerView.layer;if(this.onJimuLayerViewRemoved(jimuLayerView),layer){const map=this.view.map;map.layers.toArray().includes(layer)&&map.remove(layer)}jimuLayerView.destroy(),childJimuLayerViews.forEach((childJimuLayerView=>{this.removeJimuLayerView(childJimuLayerView)}))}}removeLayerFromMap(targetLayerId){console.warn("jimuMapView.removeLayerFromMap() is deprecated, please use jimuMapView.removeJimuLayerView() instead.");const layerInMap=this.view.map.findLayerById(targetLayerId);layerInMap&&this.view.map.remove(layerInMap)}parseLayersVisibilityFromUrlHash(){let urlHashLayersVisibility=null;try{const appState=(0,jimu_core.Vp3)().getState();if(appState.urlHashObject){const widgetUrlParams=appState.urlHashObject[this.mapWidgetId];if(widgetUrlParams&&widgetUrlParams.layer_visibility){const mapsLayerVisibility=JSON.parse(widgetUrlParams.layer_visibility);if(mapsLayerVisibility){const currMapLayerVisibility=mapsLayerVisibility[this.id];currMapLayerVisibility&&"object"==typeof currMapLayerVisibility&&(urlHashLayersVisibility=currMapLayerVisibility)}}}}catch(e){urlHashLayersVisibility=null,console.error("parse layers visibility from url hash error",e)}return urlHashLayersVisibility}getCurrentLayersVisibilityForUrlHash(){const layerVisibilityObjForOneMap={};return Object.values(this.jimuLayerViews).forEach((jimuLayerView=>{jimuLayerView.layer&&!jimuLayerView.fromRuntime&&jimuLayerView.layer.visible!==jimuLayerView.originalLayerVisible&&(layerVisibilityObjForOneMap[jimuLayerView.id]=jimuLayerView.layer.visible)})),layerVisibilityObjForOneMap}updateUrlHashLayerVisibility(){const mapsLayerVisibility={};if(mapsLayerVisibility[this.id]=this.getCurrentLayersVisibilityForUrlHash(),this.jimuMapViewGroup){this.jimuMapViewGroup.getAllJimuMapViews().forEach((jimuMapView=>{jimuMapView!==this&&(mapsLayerVisibility[jimuMapView.id]=jimuMapView.getCurrentLayersVisibilityForUrlHash())}))}const urlManager=jimu_core.V08.getInstance();Object.keys(mapsLayerVisibility).forEach((jimuMapViewId=>{const urlHashLayersVisibility=mapsLayerVisibility[jimuMapViewId];urlHashLayersVisibility&&0!==Object.keys(urlHashLayersVisibility).length||delete mapsLayerVisibility[jimuMapViewId]}));let layerVisibilityStr=null;Object.keys(mapsLayerVisibility).length>0&&(layerVisibilityStr=JSON.stringify(mapsLayerVisibility)),urlManager.setWidgetUrlParams(this.mapWidgetId,{layer_visibility:layerVisibilityStr})}tryGoToSelectionsByUrlHash(){return jimu_map_view_awaiter(this,void 0,void 0,(function*(){var _a,_b,_c;if(!this.view)return;const anyView=this.view,initUrlHashMapOptions=anyView.initUrlHashMapOptions;if(initUrlHashMapOptions&&Object.keys(initUrlHashMapOptions).length>0)return;yield this.whenJimuMapViewLoaded();const urlManager=jimu_core.V08.getInstance(),urlQueryObject=urlManager.getQueryObject(),urlHashObject=urlManager.getHashObject(),appState=(0,jimu_core.Vp3)().getState(),dataSelectionUrlConfig=null===(_c=null===(_b=null===(_a=null==appState?void 0:appState.appConfig)||void 0===_a?void 0:_a.urlParams)||void 0===_b?void 0:_b.general)||void 0===_c?void 0:_c.dataSelection,isZoomToSelectionByConfig=dataSelectionUrlConfig&&dataSelectionUrlConfig.isEnable&&dataSelectionUrlConfig.zoomToSelection,isZoomToSelection="true"===(null==urlHashObject?void 0:urlHashObject.zoom_to_selection)||isZoomToSelectionByConfig,dataSourceInfosFromUrl=jimu_core.v6q.getDataSourceInfosFromUrlParams(urlQueryObject,urlHashObject),mapDataSource=this.getMapDataSource(),extentPromises=[];if(dataSourceInfosFromUrl&&mapDataSource&&Object.keys(dataSourceInfosFromUrl).forEach((layerDataSourceId=>{if(layerDataSourceId.startsWith(`${this.dataSourceId}-`)){const dsInfoFromUrl=dataSourceInfosFromUrl[layerDataSourceId];if(dsInfoFromUrl){const selection=dsInfoFromUrl.selection;if(selection){let queryOptions=null;if(Array.isArray(selection))selection.length>0&&(queryOptions={objectIds:selection});else{const ids=selection.ids;Array.isArray(ids)&&ids.length>0?queryOptions={objectIds:ids}:selection.queryParams&&(queryOptions=selection.queryParams)}if(queryOptions){queryOptions.disableClientQuery=!0;const promise=this.queryExtentByDataSource(mapDataSource,layerDataSourceId,queryOptions);extentPromises.push(promise)}}}}})),extentPromises.length>0){const validExtents=(yield Promise.all(extentPromises)).filter((extent=>!!extent));if(validExtents.length>0){const projectPromises=validExtents.map((extent=>jimu_map_view_awaiter(this,void 0,void 0,(function*(){let projectExtent=null;try{const projectExtents=yield jimu_core.upB.projectToSpatialReference([extent],this.view.spatialReference);projectExtents&&projectExtents.length>0&&(projectExtent=projectExtents[0])}catch(e){console.error("projectToSpatialReference error",e),projectExtent=null}return projectExtent}))));let projectedValidExtents=yield Promise.all(projectPromises);projectedValidExtents=projectedValidExtents.filter((extent=>!!extent));let unionExtent=null;if(projectedValidExtents&&projectedValidExtents.length>0&&projectedValidExtents.forEach((extent=>{unionExtent?unionExtent.union(extent):unionExtent=extent.clone()})),unionExtent){const centerPoint=unionExtent.center;if(isZoomToSelection||!isZoomToSelection&&centerPoint){if(anyView.extentChangeRelatedWidgetIds=[],anyView.receiveMessageTimeOfLastViewUpdate=Date.now(),isZoomToSelection){const zoomToOptions={padding:{left:50,right:50,top:50,bottom:50}},[Polygon,Graphic]=yield arcgis_js_api_module_loader_loadArcGISJSAPIModules(["esri/geometry/Polygon","esri/Graphic"]),graphic=new Graphic({geometry:Polygon.fromExtent(unionExtent)});yield zoomTo(this.view,[graphic],zoomToOptions)}else centerPoint&&(yield this.view.goTo(centerPoint,{animate:!1}));if(anyView.publishExtentChangeMessage){anyView.extentChangeRelatedWidgetIds=[],anyView.receiveMessageTimeOfLastViewUpdate=Date.now();const stationary=!0,interactive=!0;anyView.publishExtentChangeMessage(stationary,interactive)}}}}}}))}queryExtentByDataSource(mapDataSource,dataSourceId,queryOptions){return jimu_map_view_awaiter(this,void 0,void 0,(function*(){var _a,_b,_c;let result=null;try{const ds=yield mapDataSource.createDataSourceById(dataSourceId);let isOnlyOneFeature=!1,firstObjectId=null;(null===(_a=queryOptions.objectIds)||void 0===_a?void 0:_a.length)>0&&(isOnlyOneFeature=1===(null===(_b=queryOptions.objectIds)||void 0===_b?void 0:_b.length),firstObjectId=queryOptions.objectIds[0]);try{const res=yield ds.queryExtent(queryOptions);if(res){const extent=res.extent;if(extent)if("esri.geometry.Extent"===extent.declaredClass)result=extent;else{result=(yield(0,jimu_core.p8A)("esri/geometry/Extent")).fromJSON(extent)}try{if("number"==typeof res.count&&!isOnlyOneFeature&&(isOnlyOneFeature=1===res.count,isOnlyOneFeature&&null==firstObjectId)){const queryOptions2=Object.assign({},queryOptions),queryIdsResult=yield ds.queryIds(queryOptions2);queryIdsResult&&1===(null===(_c=queryIdsResult.ids)||void 0===_c?void 0:_c.length)&&(firstObjectId=queryIdsResult.ids[0])}}catch(e){console.error("ds.queryIds() error",e)}}}catch(e){result=null,console.warn(`ds.queryExtent() error for ${ds.id}`,e)}if((!result||isOnlyOneFeature)&&null!=firstObjectId){const firstRecord=yield ds.queryById(firstObjectId,[]),firstRecordFeature=null==firstRecord?void 0:firstRecord.feature;if(firstRecordFeature){let firstFeature=null;if("esri.Graphic"===firstRecordFeature.declaredClass)firstFeature=firstRecordFeature;else{firstFeature=new(yield(0,jimu_core.p8A)("esri/Graphic"))({geometry:firstRecordFeature.geometry,attributes:firstRecordFeature.attributes})}const geometry=null==firstFeature?void 0:firstFeature.geometry;if(geometry&&(result=geometry.extent,!result&&"esri.geometry.Point"===geometry.declaredClass)){const point=geometry;if("number"==typeof point.x&&"number"==typeof point.y){result=new(yield(0,jimu_core.p8A)("esri/geometry/Extent"))({xmin:point.x,xmax:point.x,ymin:point.y,ymax:point.y,spatialReference:point.spatialReference})}}}}}catch(e){console.error("dataSourceQueryExtent error",e),result=null}return result}))}isDestroyed(){return!this.view||this.view.destroyed}isCached(){var _a;const viewContainer=null===(_a=this.view)||void 0===_a?void 0:_a.container;return viewContainer&&!document.body.contains(viewContainer)}addCacheListener(listener){this.cacheListeners.includes(listener)||this.cacheListeners.push(listener)}removeCacheListener(listener){const index=this.cacheListeners.indexOf(listener);index>=0&&this.cacheListeners.splice(index,1)}onCache(){this.cacheListeners.forEach((listener=>{try{listener(this)}catch(e){console.error("JimuMapView onCache listener error",this.id,listener,e)}}))}addRestoreListener(listener){this.restoreListeners.includes(listener)||this.restoreListeners.push(listener)}removeRestoreListener(listener){const index=this.restoreListeners.indexOf(listener);index>=0&&this.restoreListeners.splice(index,1)}onRestore(){this.restoreListeners.forEach((listener=>{try{listener(this)}catch(e){console.error("JimuMapView onRestore listener error",this.id,listener,e)}}))}addJimuLayerViewSelectedFeaturesChangeListener(listener){this.selectedFeaturesChangeListeners.includes(listener)||this.selectedFeaturesChangeListeners.push(listener)}removeJimuLayerViewSelectedFeaturesChangeListener(listener){const index=this.selectedFeaturesChangeListeners.indexOf(listener);index>=0&&this.selectedFeaturesChangeListeners.splice(index,1)}onJimuLayerViewSelectedFeaturesChange(jimuLayerView,isClear){return jimu_map_view_awaiter(this,void 0,void 0,(function*(){this.selectedFeaturesChangeListeners.forEach((listener=>{try{listener(jimuLayerView)}catch(e){console.error("onJimuLayerViewSelectedFeaturesChange listener error",this.id,listener,e)}})),yield this.handlePopupOnSelectionChange(jimuLayerView,isClear)}))}addSelectByQueryProgressChangeListener(listener){this.selectByQueryProgressChangeListeners.includes(listener)||this.selectByQueryProgressChangeListeners.push(listener)}removeSelectByQueryProgressChangeListener(listener){const index=this.selectByQueryProgressChangeListeners.indexOf(listener);index>=0&&this.selectByQueryProgressChangeListeners.splice(index,1)}onSelectByQueryProgressChange(){const progress=this.getSelectByQueryProgress();this.selectByQueryProgressChangeListeners.forEach((listener=>{try{listener(progress)}catch(e){console.error("onSelectByQueryProgressChange listener error",this.id,listener,e)}}))}addJimuLayerViewCreatedListener(listener){this.jimuLayerViewCreatedListeners.includes(listener)||this.jimuLayerViewCreatedListeners.push(listener)}removeJimuLayerViewCreatedListener(listener){const index=this.jimuLayerViewCreatedListeners.indexOf(listener);index>=0&&this.jimuLayerViewCreatedListeners.splice(index,1)}onJimuLayerViewCreated(jimuLayerView){this.jimuLayerViewCreatedListeners.forEach((listener=>{try{listener(jimuLayerView)}catch(e){console.error("onJimuLayerViewCreated listener error",this.id,listener,e)}}))}addJimuLayerViewRemovedListener(listener){this.jimuLayerViewRemovedListeners.includes(listener)||this.jimuLayerViewRemovedListeners.push(listener)}removeJimuLayerViewRemovedListener(listener){const index=this.jimuLayerViewRemovedListeners.indexOf(listener);index>=0&&this.jimuLayerViewRemovedListeners.splice(index,1)}onJimuLayerViewRemoved(jimuLayerView){this.jimuLayerViewRemovedListeners.forEach((listener=>{try{listener(jimuLayerView)}catch(e){console.error("onJimuLayerViewRemoved listener error",this.id,listener,e)}}))}addJimuLayerViewsVisibleChangeListener(listener){this.jimuLayerViewsVisibleChangedListeners.includes(listener)||this.jimuLayerViewsVisibleChangedListeners.push(listener)}removeJimuLayerViewsVisibleChangeListener(listener){const index=this.jimuLayerViewsVisibleChangedListeners.indexOf(listener);index>=0&&this.jimuLayerViewsVisibleChangedListeners.splice(index,1)}onJimuLayerViewSelfVisibleChange(jimuLayerView){const visibleChangedJimuLayerViews=[jimuLayerView,...this.getAllChildJimuLayerViews(jimuLayerView.id)].filter((jimuLayerView=>{const jimuLayerViewId=jimuLayerView.id,oldVisible=this.finalLayerVisibles[jimuLayerViewId],newVisible=jimuLayerView.isLayerVisible();return this.finalLayerVisibles[jimuLayerViewId]=newVisible,oldVisible!==newVisible}));visibleChangedJimuLayerViews.length>0&&this.jimuLayerViewsVisibleChangedListeners.forEach((listener=>{try{listener(visibleChangedJimuLayerViews.slice())}catch(e){console.error("onJimuLayerViewSelfVisibleChange listener error",e)}}))}watch(getValue,callback,options){return jimu_map_view_awaiter(this,void 0,void 0,(function*(){const handle=(yield(0,jimu_core.p8A)("esri/core/reactiveUtils")).watch(getValue,callback,options);return this.watchHandles.push(handle),handle}))}enableLayerPopup(layer,force){layer&&(layer.popupEnabled=!0,force&&(this.forcePopupEnabledLayers||(this.forcePopupEnabledLayers=[]),this.forcePopupEnabledLayers.includes(layer)||this.forcePopupEnabledLayers.push(layer)))}disableLayerPopup(layer){var _a,_b;if(!layer)return;layer.popupEnabled=!1,(null===(_a=this.forcePopupEnabledLayers)||void 0===_a?void 0:_a.includes(layer))&&(this.forcePopupEnabledLayers=this.forcePopupEnabledLayers.filter((item=>item!==layer)));const popup=null===(_b=this.view)||void 0===_b?void 0:_b.popup;if(!popup)return;const popupFeatures=(null==popup?void 0:popup.features)||[];if(popupFeatures.length>0){const filteredPopupFeatures=popupFeatures.filter((feature=>(feature.layer||feature.sourceLayer)!==layer&&this.isFeaturePopupEnabledByCurrentMapPopupSetting(feature)));filteredPopupFeatures.length<popupFeatures.length&&(0===filteredPopupFeatures.length?this.closePopup():popup.features=filteredPopupFeatures)}}getSnappingLayers(){var _a,_b;const layers=[],view=this.view;if(!view)return layers;const supportedCommonLayerTypes=["esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.WFSLayer","esri.layers.CSVLayer"],supported2DLayerTypes=["esri.layers.support.SubtypeSublayer","esri.layers.MapNotesLayer"],supported3DLayerTypes=["esri.layers.SceneLayer","esri.layers.BuildingSceneLayer"];let supportedLayerTypes=supportedCommonLayerTypes;"2d"===view.type?supportedLayerTypes=supportedCommonLayerTypes.concat(supported2DLayerTypes):"3d"===view.type&&(supportedLayerTypes=supportedCommonLayerTypes.concat(supported3DLayerTypes));this.getAllJimuLayerViews().forEach((jimuLayerView=>{const layer=null==jimuLayerView?void 0:jimuLayerView.layer;layer&&supportedLayerTypes.includes(layer.declaredClass)&&layers.push(layer)}));const mapLayers=null===(_b=null===(_a=view.map)||void 0===_a?void 0:_a.allLayers)||void 0===_b?void 0:_b.toArray();return(null==mapLayers?void 0:mapLayers.length)>0&&mapLayers.forEach((layer=>{var _a;if("esri.layers.GraphicsLayer"===(null==layer?void 0:layer.declaredClass)){const graphicsLayer=layer;(null===(_a=graphicsLayer.graphics)||void 0===_a?void 0:_a.length)>0&&layers.push(graphicsLayer)}})),layers}}var jimu_map_view_group_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};class JimuMapViewGroup{constructor(mapWidgetId){this.switchMap=(...args_1)=>jimu_map_view_group_awaiter(this,[...args_1],void 0,(function*(ignoreSwitchAnimation=!1){if(this.mapWidgetInstance)return yield this.mapWidgetInstance.switchMap(ignoreSwitchAnimation);yield Promise.resolve()})),this.fullScreenMap=()=>{this.mapWidgetInstance&&this.mapWidgetInstance.fullScreenMap()},this.mapWidgetId=mapWidgetId,this.jimuMapViews={}}setMapWidgetInstance(mapWidgetInstance){this.mapWidgetInstance=mapWidgetInstance}addJimuMapView(jimuMapView){this.jimuMapViews[jimuMapView.id]=jimuMapView,jimuMapView.jimuMapViewGroup=this}setJimuMapView(jimuMapView){this.jimuMapViews[jimuMapView.id]=jimuMapView,jimuMapView.jimuMapViewGroup=this}removeJimuMapView(jimuMapView){delete this.jimuMapViews[jimuMapView.id],jimuMapView.jimuMapViewGroup===this&&(jimuMapView.jimuMapViewGroup=null)}getActiveJimuMapView(){const jimuMapViewIds=Object.keys(this.jimuMapViews);for(let i=0;i<jimuMapViewIds.length;i++)if(this.jimuMapViews[jimuMapViewIds[i]].isActive)return this.jimuMapViews[jimuMapViewIds[i]];return null}showMapTools(){this.getAllJimuMapViews().forEach((jimuMapView=>{const anyView=jimuMapView.view;anyView&&anyView.showMapTools&&anyView.showMapTools()}))}hideMapTools(){this.getAllJimuMapViews().forEach((jimuMapView=>{const anyView=jimuMapView.view;anyView&&anyView.hideMapTools&&anyView.hideMapTools()}))}getAllJimuMapViews(){return Object.keys(this.jimuMapViews).map((jimuMapViewId=>this.jimuMapViews[jimuMapViewId]))}}var mapview_manager_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};class mapview_manager_MapViewManager{constructor(){this.jimuMapViewGroups={}}static getInstance(){return window.jimuConfig.isBuilder?window._appWindow&&window._appWindow._mapViewManager:(mapview_manager_MapViewManager._instance||(mapview_manager_MapViewManager._instance=new mapview_manager_MapViewManager,window._mapViewManager=mapview_manager_MapViewManager._instance),mapview_manager_MapViewManager._instance)}getJimuMapViewById(id){const mapWidgetIds=Object.keys(this.jimuMapViewGroups);if(0===mapWidgetIds.length)return null;for(let i=0;i<mapWidgetIds.length;i++){const tempMapWidgetId=mapWidgetIds[i];if(Object.keys(this.jimuMapViewGroups[tempMapWidgetId].jimuMapViews).includes(id))return this.jimuMapViewGroups[tempMapWidgetId].jimuMapViews[id]}return null}getJimuMapViewGroup(mapWidgetId){return this.jimuMapViewGroups[mapWidgetId]?this.jimuMapViewGroups[mapWidgetId]:null}createJimuMapView(jimuMapViewConstructorOptions){return mapview_manager_awaiter(this,void 0,void 0,(function*(){const jimuMapViewId=jimuMapViewConstructorOptions.mapWidgetId+"-"+jimuMapViewConstructorOptions.dataSourceId;if(this.getJimuMapViewById(jimuMapViewId))return yield Promise.resolve(this.getJimuMapViewById(jimuMapViewId));const jimuMapView=new jimu_map_view_JimuMapView(jimuMapViewConstructorOptions);return this.addJimuMapView(jimuMapView),yield jimuMapView.whenJimuMapViewLoaded()}))}addJimuMapView(jimuMapView){if(this.jimuMapViewGroups[jimuMapView.mapWidgetId])this.jimuMapViewGroups[jimuMapView.mapWidgetId].addJimuMapView(jimuMapView);else{const jimuMapViewGroup=new JimuMapViewGroup(jimuMapView.mapWidgetId);jimuMapViewGroup.addJimuMapView(jimuMapView),this.jimuMapViewGroups[jimuMapView.mapWidgetId]=jimuMapViewGroup}(0,jimu_core.Vp3)().dispatch(jimu_core.tRc.jimuMapViewAdded(jimuMapView.id,(0,jimu_core.J3Z)({id:jimuMapView.id,mapWidgetId:jimuMapView.mapWidgetId,dataSourceId:jimuMapView.dataSourceId,status:jimuMapView.status})))}setJimuMapView(jimuMapView){if(this.jimuMapViewGroups[jimuMapView.mapWidgetId])this.jimuMapViewGroups[jimuMapView.mapWidgetId].setJimuMapView(jimuMapView);else{const jimuMapViewGroup=new JimuMapViewGroup(jimuMapView.mapWidgetId);jimuMapViewGroup.addJimuMapView(jimuMapView),this.jimuMapViewGroups[jimuMapView.mapWidgetId]=jimuMapViewGroup}(0,jimu_core.Vp3)().dispatch(jimu_core.tRc.jimuMapViewUpdated(jimuMapView.id,(0,jimu_core.J3Z)({id:jimuMapView.id,mapWidgetId:jimuMapView.mapWidgetId,dataSourceId:jimuMapView.dataSourceId,isActive:jimuMapView.isActive,status:jimuMapView.status})))}destroyJimuMapView(jimuMapViewId){const removeJimuMapView=this.getJimuMapViewById(jimuMapViewId);removeJimuMapView&&removeJimuMapView.destroy();const mapWidgetIds=Object.keys(this.jimuMapViewGroups);if(0===mapWidgetIds.length);else for(let i=0;i<mapWidgetIds.length;i++){const tempMapWidgetId=mapWidgetIds[i];if(Object.keys(this.jimuMapViewGroups[tempMapWidgetId].jimuMapViews).includes(jimuMapViewId)){delete this.jimuMapViewGroups[tempMapWidgetId].jimuMapViews[jimuMapViewId],0===Object.keys(this.jimuMapViewGroups[tempMapWidgetId].jimuMapViews).length&&delete this.jimuMapViewGroups[tempMapWidgetId],(0,jimu_core.Vp3)().dispatch(jimu_core.tRc.jimuMapViewRemoved(jimuMapViewId));break}}}getAllJimuMapViewIds(){const ids=[];return Object.keys(this.jimuMapViewGroups).forEach((mapWidgetId=>{Object.keys(this.jimuMapViewGroups[mapWidgetId].jimuMapViews).forEach((mapViewId=>{ids.push(mapViewId)}))})),ids}getAllJimuMapViews(){const allJimuMapViews=[];return Object.keys(this.jimuMapViewGroups).forEach((mapWidgetId=>{const jimuMapViews=Object.values(this.jimuMapViewGroups[mapWidgetId].jimuMapViews);allJimuMapViews.push(...jimuMapViews)})),allJimuMapViews}destroyAllJimuMapViews(){this.getAllJimuMapViewIds().forEach((mapViewId=>{this.destroyJimuMapView(mapViewId)}))}getJimuLayerViewForClientQuery(layerDs){var _a,_b,_c;if(!layerDs||![jimu_core.hg5.FeatureLayer,jimu_core.hg5.SceneLayer].includes(layerDs.type))return null;const layerDsId=layerDs.id,rootDsId=null===(_a=layerDs.getRootDataSource())||void 0===_a?void 0:_a.id;if(!rootDsId)return null;const widgetsJson=null===(_c=null===(_b=(0,jimu_core.Vp3)().getState())||void 0===_b?void 0:_b.appConfig)||void 0===_c?void 0:_c.widgets;if(!widgetsJson)return null;const jimuMapViews=this.getAllJimuMapViews().filter((jimuMapView=>{var _a;return"2d"===(null===(_a=jimuMapView.view)||void 0===_a?void 0:_a.type)&&jimuMapView.dataSourceId===rootDsId}));for(const jimuMapView of jimuMapViews){const widgetJson=widgetsJson[jimuMapView.mapWidgetId];if(widgetJson){const mapWidgetConfig=widgetJson.config||{},clientQueryDataSourceIds=(null==mapWidgetConfig?void 0:mapWidgetConfig.clientQueryDataSourceIds)||[],useDataSources=widgetJson.useDataSources,useDataSourceIds=[];if(useDataSources&&useDataSources.length>0&&useDataSources.forEach((useDataSource=>{const dataSourceId=null==useDataSource?void 0:useDataSource.dataSourceId;dataSourceId&&useDataSourceIds.push(dataSourceId)})),clientQueryDataSourceIds.includes(rootDsId)&&useDataSourceIds.includes(rootDsId)){const jimuLayerView=jimuMapView.getJimuLayerViewByDataSourceId(layerDsId);return jimuLayerView&&jimuLayerView.clientQueryFeatures&&(jimuLayerView.type===jimu_core.iy2.FeatureLayer||jimuLayerView.type===jimu_core.iy2.SceneLayer)?jimuLayerView:null}}}return null}}try{mapview_manager_MapViewManager.displayName="MapViewManager",mapview_manager_MapViewManager.__docgenInfo={description:"The `MapViewManager` is used to manage `JimuMapView`, including creating, getting, setting and destroying the `JimuMapView` instance.\nPlease always use `MapViewManager.getInstance()` to use this class. For example, to get a `JimuMapView`, you can use `MapViewManager.getInstance().getJimuMapViewById(dsId)`.\nFor widget development, `MapViewManager.getInstance()` in both the widget and the widget's setting return the same instance.\n\nWhen needing to make use of the `JimuMapView`, for ease of use, it is recommended to use the `JimuMapViewComponent` React component.",displayName:"MapViewManager",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-arcgis/lib/mapview-manager.tsx#MapViewManager"]={docgenInfo:mapview_manager_MapViewManager.__docgenInfo,name:"MapViewManager",path:"../jimu-arcgis/lib/mapview-manager.tsx#MapViewManager"})}catch(__react_docgen_typescript_loader_error){}try{_instance.displayName="MapViewManager._instance",_instance.__docgenInfo={description:"The `MapViewManager` is used to manage `JimuMapView`, including creating, getting, setting and destroying the `JimuMapView` instance.\nPlease always use `MapViewManager.getInstance()` to use this class. For example, to get a `JimuMapView`, you can use `MapViewManager.getInstance().getJimuMapViewById(dsId)`.\nFor widget development, `MapViewManager.getInstance()` in both the widget and the widget's setting return the same instance.\n\nWhen needing to make use of the `JimuMapView`, for ease of use, it is recommended to use the `JimuMapViewComponent` React component.",displayName:"MapViewManager._instance",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-arcgis/lib/mapview-manager.tsx#MapViewManager._instance"]={docgenInfo:mapview_manager_MapViewManager._instance.__docgenInfo,name:"MapViewManager._instance",path:"../jimu-arcgis/lib/mapview-manager.tsx#MapViewManager._instance"})}catch(__react_docgen_typescript_loader_error){}class _JimuMapViewComponent extends jimu_core.q_G.PureComponent{constructor(){super(...arguments),this.viewManager=mapview_manager_MapViewManager.getInstance(),this.onViewsCreate=views=>{this.props.onViewsCreate&&this.props.onViewsCreate(views)},this.onViewGroupCreate=()=>{if(this.props.onViewGroupCreate&&this.viewManager&&this.props.useMapWidgetId){const jimuMapViewGroup=this.viewManager.getJimuMapViewGroup(this.props.useMapWidgetId);this.props.onViewGroupCreate(jimuMapViewGroup)}},this.onViewsChange=viewIds=>{if(this.props.onViewsChange){const views=this.getViews(viewIds);this.props.onViewsChange(views)}},this.onActiveViewChange=previousActiveViewId=>{if(!this.props.onActiveViewChange)return;let activeJimuMapView=null;if(this.viewManager){const currActiveJimuMapViewId=this.getActiveViewId(this.props.useMapWidgetId,this.props.viewInfos);currActiveJimuMapViewId&&(activeJimuMapView=this.viewManager.getJimuMapViewById(currActiveJimuMapViewId))}this.props.onActiveViewChange(activeJimuMapView,previousActiveViewId)},this.getActiveViewId=(mapWidgetId,infos)=>{let activeViewId="";return mapWidgetId&&infos&&(activeViewId=infos&&Object.keys(infos).find((viewId=>infos[viewId].mapWidgetId===mapWidgetId&&infos[viewId].isActive&&infos[viewId].status===jimu_core.FT5.Loaded))),activeViewId||(activeViewId=""),activeViewId},this.getWhetherAllViewsCreated=(viewIds,infos,widgetUseDataSources)=>!((null==viewIds?void 0:viewIds.length)<(null==widgetUseDataSources?void 0:widgetUseDataSources.length))&&((null==viewIds?void 0:viewIds.length)>0&&!viewIds.some((vId=>!this.getWhetherViewCreated(vId,infos)))),this.getWhetherViewCreated=(viewId,infos)=>!!(viewId&&infos&&infos[viewId]&&infos[viewId].status&&infos[viewId].status===jimu_core.FT5.Loaded),this.getViewIdsFromMapWidgetId=(mapWidgetId,infos)=>infos?Object.keys(infos).filter((viewId=>infos[viewId].mapWidgetId===mapWidgetId)):[],this.getCreatedViewIdsFromMapWidgetId=(mapWidgetId,infos)=>this.getViewIdsFromMapWidgetId(mapWidgetId,infos).filter((viewId=>this.getWhetherViewCreated(viewId,infos))),this.getViews=viewIds=>{if(!viewIds)return null;const views={};return this.viewManager&&viewIds.forEach((vId=>{views[vId]=this.viewManager.getJimuMapViewById(vId)})),views}}componentDidMount(){this.checkPropCallbacksForCurrentMapWidgetId([],"")}componentDidUpdate(prevProps){const prevMapWidgetId=prevProps.useMapWidgetId||"",currMapWidgetId=this.props.useMapWidgetId||"",preViewIds=this.getViewIdsFromMapWidgetId(prevProps.useMapWidgetId,prevProps.viewInfos),preCreatedViewIds=this.getCreatedViewIdsFromMapWidgetId(prevProps.useMapWidgetId,prevProps.viewInfos),preActiveViewId=this.getActiveViewId(prevProps.useMapWidgetId,prevProps.viewInfos);if(currMapWidgetId===prevMapWidgetId){const viewIds=this.getViewIdsFromMapWidgetId(this.props.useMapWidgetId,this.props.viewInfos);if(0===preViewIds.length&&viewIds.length>0&&this.onViewGroupCreate(),!this.getWhetherAllViewsCreated(preViewIds,prevProps.viewInfos,prevProps.useDataSources)&&this.getWhetherAllViewsCreated(viewIds,this.props.viewInfos,this.props.useDataSources)){const views=this.getViews(viewIds);this.onViewsCreate(views)}const createdViewIds=this.getCreatedViewIdsFromMapWidgetId(this.props.useMapWidgetId,this.props.viewInfos),{isEqual}=jimu_core.WpD.diffArrays(!0,preCreatedViewIds,createdViewIds);isEqual||this.onViewsChange(viewIds);preActiveViewId!==this.getActiveViewId(this.props.useMapWidgetId,this.props.viewInfos)&&this.onActiveViewChange(preActiveViewId)}else this.checkPropCallbacksForCurrentMapWidgetId(preCreatedViewIds,preActiveViewId)}checkPropCallbacksForCurrentMapWidgetId(preCreatedViewIds,preActiveViewId){const{useMapWidgetId,viewInfos,useDataSources}=this.props,viewIds=this.getViewIdsFromMapWidgetId(useMapWidgetId,viewInfos);if(viewIds.length>0&&this.onViewGroupCreate(),this.getWhetherAllViewsCreated(viewIds,viewInfos,useDataSources)){const views=this.getViews(viewIds);this.onViewsCreate(views)}const createdViewIds=this.getCreatedViewIdsFromMapWidgetId(useMapWidgetId,viewInfos),{isEqual}=jimu_core.WpD.diffArrays(!0,preCreatedViewIds,createdViewIds);isEqual||this.onViewsChange(viewIds);preActiveViewId!==this.getActiveViewId(useMapWidgetId,viewInfos)&&this.onActiveViewChange(preActiveViewId)}render(){if(!this.props.useMapWidgetId||!this.props.viewInfos||!this.props.children)return null;const viewIds=this.getViewIdsFromMapWidgetId(this.props.useMapWidgetId,this.props.viewInfos),views=this.getViews(viewIds);return"function"==typeof this.props.children?this.props.children(views):this.props.children}}const JimuMapViewComponent=jimu_core.E_S.connect(((state,ownProps)=>{var _a,_b,_c;const s=null!==(_a=state.appStateInBuilder)&&void 0!==_a?_a:state;return{viewInfos:s.jimuMapViewsInfo,useDataSources:null===(_c=null===(_b=s.appConfig)||void 0===_b?void 0:_b.widgets[ownProps.useMapWidgetId])||void 0===_c?void 0:_c.useDataSources}}))(_JimuMapViewComponent);try{JimuMapViewComponent.displayName="JimuMapViewComponent",JimuMapViewComponent.__docgenInfo={description:"A React component that makes it easy to use the `JimuMapView` instance from the map widget.\nIn most cases, you can pass in `useMapWidgetIds`, and use `onViewsCreate`, `onActiveViewChange` to get callback from the `JimuMapViewComponent`.",displayName:"JimuMapViewComponent",props:{children:{defaultValue:null,description:"@ignore",name:"children",required:!1,type:{name:"ReactNode | ViewRenderFunction"}},useMapWidgetId:{defaultValue:null,description:"The map widget id selected within the `MapWidgetSelector` component.",name:"useMapWidgetId",required:!0,type:{name:"string"}},onViewGroupCreate:{defaultValue:null,description:"The `JimuMapViewGroup` is created once the first view is added. Views in the groups may be still not loaded after a group is created.",name:"onViewGroupCreate",required:!1,type:{name:"(viewGroup: JimuMapViewGroup) => void"}},onViewsCreate:{defaultValue:null,description:'This function is called once all of the `JimuMapView` instances have a `JimuMapViewStatus` of `"LOADED"`.',name:"onViewsCreate",required:!1,type:{name:"(views: { [viewId: string]: JimuMapView; }) => void"}},onViewsChange:{defaultValue:null,description:"This function is called When a view is destroyed or created. Note that the views in the callback function are not the changed views, but the latest views currently owned by the map widget.",name:"onViewsChange",required:!1,type:{name:"(views: { [viewId: string]: JimuMapView; }) => void"}},onActiveViewChange:{defaultValue:null,description:"This function is called when the current active view of the map widget is changed.\nFor example, it is called when clicking on the switch-map tool for multi-source maps or changing the `DataSource` for the map widget.",name:"onActiveViewChange",required:!1,type:{name:"(activeView: JimuMapView, previousActiveViewId: string) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-arcgis/lib/components/jimu-map-view-component.tsx#JimuMapViewComponent"]={docgenInfo:JimuMapViewComponent.__docgenInfo,name:"JimuMapViewComponent",path:"../jimu-arcgis/lib/components/jimu-map-view-component.tsx#JimuMapViewComponent"})}catch(__react_docgen_typescript_loader_error){}function jimu_layer_view_component_JimuLayerViewComponent(props){const[,setIsJimuLayerViewLoaded]=React.useState(!1);if(React.useEffect((()=>{if(this.getJimuLayerView())setIsJimuLayerViewLoaded(!0);else{MapViewManager.getInstance().getJimuMapViewById(this.props.jimuMapViewId).whenJimuLayerViewLoaded(this.props.jimuLayerViewId).then((()=>{setIsJimuLayerViewLoaded(!0)}))}}),[]),!props.jimuLayerViewId||!props.children)return null;const jimuLayerView=(()=>{const jimuMapView=MapViewManager.getInstance().getJimuMapViewById(props.jimuMapViewId);return null==jimuMapView?void 0:jimuMapView.jimuLayerViews[props.jimuLayerViewId]})();return jimuLayerView?"function"==typeof props.children?props.children(jimuLayerView):props.children:null}try{jimu_layer_view_component_JimuLayerViewComponent.displayName="JimuLayerViewComponent",jimu_layer_view_component_JimuLayerViewComponent.__docgenInfo={description:"A react component that makes it easy to use JimuLayerView from the map widget.\nIn most cases, you can pass in `useMapWidgetIds` & `jimuLayerViewInfo`, and use `onLayerViewCreated` & `onLayerViewFailed` to get a callback from the JimuLayerViewComponent.",displayName:"JimuLayerViewComponent",props:{jimuMapViewId:{defaultValue:null,description:"The JimuMapView id",name:"jimuMapViewId",required:!0,type:{name:"string"}},jimuLayerViewId:{defaultValue:null,description:"The JimuLayerView id",name:"jimuLayerViewId",required:!0,type:{name:"string"}},onJimuLayerViewLoaded:{defaultValue:null,description:"The function will be called when the LayerView is loaded.",name:"onJimuLayerViewLoaded",required:!1,type:{name:"(jimuLayerView: JimuLayerView) => void"}},onJimuLayerViewFailed:{defaultValue:null,description:"The function will be called when the JimuLayerView instance creation fails.",name:"onJimuLayerViewFailed",required:!1,type:{name:"(err: any) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-arcgis/lib/components/jimu-layer-view-component.tsx#JimuLayerViewComponent"]={docgenInfo:jimu_layer_view_component_JimuLayerViewComponent.__docgenInfo,name:"JimuLayerViewComponent",path:"../jimu-arcgis/lib/components/jimu-layer-view-component.tsx#JimuLayerViewComponent"})}catch(__react_docgen_typescript_loader_error){}try{JimuMapViewComponentProps.displayName="JimuMapViewComponentProps",JimuMapViewComponentProps.__docgenInfo={description:"`JimuMapViewComponentProps` provides information about the `JimuMapViewComponent`.",displayName:"JimuMapViewComponentProps",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-arcgis/index.tsx#JimuMapViewComponentProps"]={docgenInfo:JimuMapViewComponentProps.__docgenInfo,name:"JimuMapViewComponentProps",path:"../jimu-arcgis/index.tsx#JimuMapViewComponentProps"})}catch(__react_docgen_typescript_loader_error){}try{JimuLayerViewComponent.displayName="JimuLayerViewComponent",JimuLayerViewComponent.__docgenInfo={description:"A react component that makes it easy to use JimuLayerView from the map widget.\nIn most cases, you can pass in `useMapWidgetIds` & `jimuLayerViewInfo`, and use `onLayerViewCreated` & `onLayerViewFailed` to get a callback from the JimuLayerViewComponent.",displayName:"JimuLayerViewComponent",props:{jimuMapViewId:{defaultValue:null,description:"The JimuMapView id",name:"jimuMapViewId",required:!0,type:{name:"string"}},jimuLayerViewId:{defaultValue:null,description:"The JimuLayerView id",name:"jimuLayerViewId",required:!0,type:{name:"string"}},onJimuLayerViewLoaded:{defaultValue:null,description:"The function will be called when the LayerView is loaded.",name:"onJimuLayerViewLoaded",required:!1,type:{name:"(jimuLayerView: JimuLayerView) => void"}},onJimuLayerViewFailed:{defaultValue:null,description:"The function will be called when the JimuLayerView instance creation fails.",name:"onJimuLayerViewFailed",required:!1,type:{name:"(err: any) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-arcgis/index.tsx#JimuLayerViewComponent"]={docgenInfo:JimuLayerViewComponent.__docgenInfo,name:"JimuLayerViewComponent",path:"../jimu-arcgis/index.tsx#JimuLayerViewComponent"})}catch(__react_docgen_typescript_loader_error){}try{JimuLayerView.displayName="JimuLayerView",JimuLayerView.__docgenInfo={description:"`JimuLayerView` is the wrapper class for ArcGIS Maps SDK for JavaScript [Layer](https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-Layer.html) and [`LayerView`](https://developers.arcgis.com/javascript/latest/api-reference/esri-views-layers-LayerView.html).\nIt is created by a `JimuMapView` using a layer [`DataSource`](https://developers.arcgis.com/experience-builder/api-reference/jimu-core/DataSource).\n\nA layer view may have a related data source. If it has the data source, the feature selection will be synced to data source selection and will use the data source URL params.\nIf it does not have the data source, the feature selection will use the feature_selection URL param.",displayName:"JimuLayerView",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-arcgis/index.tsx#JimuLayerView"]={docgenInfo:JimuLayerView.__docgenInfo,name:"JimuLayerView",path:"../jimu-arcgis/index.tsx#JimuLayerView"})}catch(__react_docgen_typescript_loader_error){}try{JimuGroupLayerView.displayName="JimuGroupLayerView",JimuGroupLayerView.__docgenInfo={description:"`JimuGroupLayerView` is the wrapper of [`GroupLayer`](https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-GroupLayer.html).",displayName:"JimuGroupLayerView",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-arcgis/index.tsx#JimuGroupLayerView"]={docgenInfo:JimuGroupLayerView.__docgenInfo,name:"JimuGroupLayerView",path:"../jimu-arcgis/index.tsx#JimuGroupLayerView"})}catch(__react_docgen_typescript_loader_error){}try{JimuMapServiceLayerView.displayName="JimuMapServiceLayerView",JimuMapServiceLayerView.__docgenInfo={description:"`JimuMapServiceLayerView` is the base class of `JimuMapImageLayerView` and `JimuTileLayerView`.",displayName:"JimuMapServiceLayerView",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-arcgis/index.tsx#JimuMapServiceLayerView"]={docgenInfo:JimuMapServiceLayerView.__docgenInfo,name:"JimuMapServiceLayerView",path:"../jimu-arcgis/index.tsx#JimuMapServiceLayerView"})}catch(__react_docgen_typescript_loader_error){}try{JimuMapImageLayerView.displayName="JimuMapImageLayerView",JimuMapImageLayerView.__docgenInfo={description:"`JimuMapImageLayerView` is the wrapper of [`MapImageLayer`](https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-MapImageLayer.html).",displayName:"JimuMapImageLayerView",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-arcgis/index.tsx#JimuMapImageLayerView"]={docgenInfo:JimuMapImageLayerView.__docgenInfo,name:"JimuMapImageLayerView",path:"../jimu-arcgis/index.tsx#JimuMapImageLayerView"})}catch(__react_docgen_typescript_loader_error){}try{JimuTileLayerView.displayName="JimuTileLayerView",JimuTileLayerView.__docgenInfo={description:"`JimuTileLayerView` is the wrapper of [`TileLayer`](https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-TileLayer.html).",displayName:"JimuTileLayerView",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-arcgis/index.tsx#JimuTileLayerView"]={docgenInfo:JimuTileLayerView.__docgenInfo,name:"JimuTileLayerView",path:"../jimu-arcgis/index.tsx#JimuTileLayerView"})}catch(__react_docgen_typescript_loader_error){}try{JimuImageryTileLayerView.displayName="JimuImageryTileLayerView",JimuImageryTileLayerView.__docgenInfo={description:"`JimuImageryTileLayerView` is the wrapper of [`ImageryTileLayer`](https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-ImageryTileLayer.html).\nIt is used to synchronize state with `ImageryTileLayerDataSource`.",displayName:"JimuImageryTileLayerView",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-arcgis/index.tsx#JimuImageryTileLayerView"]={docgenInfo:JimuImageryTileLayerView.__docgenInfo,name:"JimuImageryTileLayerView",path:"../jimu-arcgis/index.tsx#JimuImageryTileLayerView"})}catch(__react_docgen_typescript_loader_error){}try{JimuQueriableLayerView.displayName="JimuQueriableLayerView",JimuQueriableLayerView.__docgenInfo={description:"`JimuQueriableLayerView` is an abstract class, which is the base class of the following classes:\n`JimuFeatureLayerView`, `JimuSceneLayerView`, `JimuBuildingComponentSublayerView`, `JimuImageryLayerView`, `JimuOrientedImageryLayerView`, `JimuSubtypeGroupLayerView` and `JimuSubtypeSublayerView`.\n`JimuQueriableLayerView` is the wrapper of queryable layers. A queryable layer is a layer that can query features, having a specific `JimuQueriableLayerView` and `ArcGISQueriableDataSource` corresponding to it.\n`JimuQueriableLayerView` is used to synchronize state with `ArcGISQueriableDataSource`. For example, `FeatureLayer` is corresponding to `JimuFeatureLayerView` and `FeatureLayerDataSource`.\nWhen a widget updates the feature selection of `FeatureLayerDataSource`, `JimuFeatureLayerView` will highlight these selected features on the map.",displayName:"JimuQueriableLayerView",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-arcgis/index.tsx#JimuQueriableLayerView"]={docgenInfo:JimuQueriableLayerView.__docgenInfo,name:"JimuQueriableLayerView",path:"../jimu-arcgis/index.tsx#JimuQueriableLayerView"})}catch(__react_docgen_typescript_loader_error){}try{JimuFeatureLayerView.displayName="JimuFeatureLayerView",JimuFeatureLayerView.__docgenInfo={description:"`JimuFeatureLayerView` is the wrapper of [`FeatureLayer`](https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-FeatureLayer.html) and\n [`FeatureLayerView`](https://developers.arcgis.com/javascript/latest/api-reference/esri-views-layers-FeatureLayerView.html).\n It is used to synchronize state with [`FeatureLayerDataSource`](https://developers.arcgis.com/experience-builder/api-reference/jimu-core/FeatureLayerDataSource/).",displayName:"JimuFeatureLayerView",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-arcgis/index.tsx#JimuFeatureLayerView"]={docgenInfo:JimuFeatureLayerView.__docgenInfo,name:"JimuFeatureLayerView",path:"../jimu-arcgis/index.tsx#JimuFeatureLayerView"})}catch(__react_docgen_typescript_loader_error){}try{JimuSceneLayerView.displayName="JimuSceneLayerView",JimuSceneLayerView.__docgenInfo={description:"`JimuSceneLayerView` is the wrapper of [`SceneLayer`](https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-SceneLayer.html) and\n [`SceneLayerView`](https://developers.arcgis.com/javascript/latest/api-reference/esri-views-layers-SceneLayerView.html).\n It is used to synchronize state with [`SceneLayerDataSource`](https://developers.arcgis.com/experience-builder/api-reference/jimu-core/SceneLayerDataSource/).",displayName:"JimuSceneLayerView",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-arcgis/index.tsx#JimuSceneLayerView"]={docgenInfo:JimuSceneLayerView.__docgenInfo,name:"JimuSceneLayerView",path:"../jimu-arcgis/index.tsx#JimuSceneLayerView"})}catch(__react_docgen_typescript_loader_error){}try{JimuBuildingSceneLayerView.displayName="JimuBuildingSceneLayerView",JimuBuildingSceneLayerView.__docgenInfo={description:"`JimuBuildingSceneLayerView` is the wrapper of [`BuildingSceneLayer`](https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-BuildingSceneLayer.html)\n and [`BuildingSceneLayerView`](https://developers.arcgis.com/javascript/latest/api-reference/esri-views-layers-BuildingSceneLayerView.html).",displayName:"JimuBuildingSceneLayerView",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-arcgis/index.tsx#JimuBuildingSceneLayerView"]={docgenInfo:JimuBuildingSceneLayerView.__docgenInfo,name:"JimuBuildingSceneLayerView",path:"../jimu-arcgis/index.tsx#JimuBuildingSceneLayerView"})}catch(__react_docgen_typescript_loader_error){}try{JimuBuildingGroupSublayer.displayName="JimuBuildingGroupSublayer",JimuBuildingGroupSublayer.__docgenInfo={description:"`JimuBuildingGroupSublayer` is the wrapper of [`BuildingGroupSublayer`](https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-buildingSublayers-BuildingGroupSublayer.html).",displayName:"JimuBuildingGroupSublayer",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-arcgis/index.tsx#JimuBuildingGroupSublayer"]={docgenInfo:JimuBuildingGroupSublayer.__docgenInfo,name:"JimuBuildingGroupSublayer",path:"../jimu-arcgis/index.tsx#JimuBuildingGroupSublayer"})}catch(__react_docgen_typescript_loader_error){}try{JimuBuildingComponentSublayerView.displayName="JimuBuildingComponentSublayerView",JimuBuildingComponentSublayerView.__docgenInfo={description:"`JimuBuildingComponentSublayerView` is the wrapper of [`BuildingComponentSublayer`](https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-buildingSublayers-BuildingComponentSublayer.html)\n and [`BuildingComponentSublayerView`](https://developers.arcgis.com/javascript/latest/api-reference/esri-views-layers-BuildingComponentSublayerView.html).\n It is used to synchronize state with `BuildingComponentSubLayerDataSource`.",displayName:"JimuBuildingComponentSublayerView",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-arcgis/index.tsx#JimuBuildingComponentSublayerView"]={docgenInfo:JimuBuildingComponentSublayerView.__docgenInfo,name:"JimuBuildingComponentSublayerView",path:"../jimu-arcgis/index.tsx#JimuBuildingComponentSublayerView"})}catch(__react_docgen_typescript_loader_error){}try{JimuImageryLayerView.displayName="JimuImageryLayerView",JimuImageryLayerView.__docgenInfo={description:"`JimuImageryLayerView` is the wrapper of [`ImageryLayer`](https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-ImageryLayer.html)\nand [`ImageryLayerView`](https://developers.arcgis.com/javascript/latest/api-reference/esri-views-layers-ImageryLayerView.html).\nIt is used to synchronize state with `ImageryLayerDataSource`.",displayName:"JimuImageryLayerView",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-arcgis/index.tsx#JimuImageryLayerView"]={docgenInfo:JimuImageryLayerView.__docgenInfo,name:"JimuImageryLayerView",path:"../jimu-arcgis/index.tsx#JimuImageryLayerView"})}catch(__react_docgen_typescript_loader_error){}try{JimuOrientedImageryLayerView.displayName="JimuOrientedImageryLayerView",JimuOrientedImageryLayerView.__docgenInfo={description:"`JimuOrientedImageryLayerView` is the wrapper of [`OrientedImageryLayer`](https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-OrientedImageryLayer.html).\nIt is used to synchronize state with `OrientedImageryLayerDataSource`.",displayName:"JimuOrientedImageryLayerView",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-arcgis/index.tsx#JimuOrientedImageryLayerView"]={docgenInfo:JimuOrientedImageryLayerView.__docgenInfo,name:"JimuOrientedImageryLayerView",path:"../jimu-arcgis/index.tsx#JimuOrientedImageryLayerView"})}catch(__react_docgen_typescript_loader_error){}try{JimuSubtypeGroupLayerView.displayName="JimuSubtypeGroupLayerView",JimuSubtypeGroupLayerView.__docgenInfo={description:"`JimuSubtypeGroupLayerView` is the wrapper of [`SubtypeGroupLayer`](https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-SubtypeGroupLayer.html).\nIt is used to synchronize state with `SubtypeGroupLayerDataSource`.",displayName:"JimuSubtypeGroupLayerView",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-arcgis/index.tsx#JimuSubtypeGroupLayerView"]={docgenInfo:JimuSubtypeGroupLayerView.__docgenInfo,name:"JimuSubtypeGroupLayerView",path:"../jimu-arcgis/index.tsx#JimuSubtypeGroupLayerView"})}catch(__react_docgen_typescript_loader_error){}try{JimuSubtypeSublayerView.displayName="JimuSubtypeSublayerView",JimuSubtypeSublayerView.__docgenInfo={description:"`JimuSubtypeSublayerView` is the wrapper of [`SubtypeSublayer`](https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-support-SubtypeSublayer.html).\nIt is used to synchronize state with `SubtypeSublayerDataSource`.",displayName:"JimuSubtypeSublayerView",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-arcgis/index.tsx#JimuSubtypeSublayerView"]={docgenInfo:JimuSubtypeSublayerView.__docgenInfo,name:"JimuSubtypeSublayerView",path:"../jimu-arcgis/index.tsx#JimuSubtypeSublayerView"})}catch(__react_docgen_typescript_loader_error){}try{JimuMapView.displayName="JimuMapView",JimuMapView.__docgenInfo={description:"`JimuMapView` is the `view` for developers to develop the map-related functions.\nFor example, developers can use the `view` property of the `JimuMapView` instance to get the original [ArcGIS Maps SDK for JavaScript `View`](https://developers.arcgis.com/javascript/latest/api-reference/esri-views-View.html),\nthen use the original `view` to develop the map-related functions. At the same time, `JimuMapView` also provides\nproperties such as `isActive` and `status` to indicate the current status in the map widget.\n\n`JimuMapView` is a wrapper class for the ArcGIS Maps SDK for JavaScript [`View`](https://developers.arcgis.com/javascript/latest/api-reference/esri-views-View.html).\nIt is created by a map widget using a map [`DataSource`](https://developers.arcgis.com/experience-builder/api-reference/jimu-core/DataSource).\n\n```typescript\nimport { JimuMapView } from 'jimu-arcgis';\n\n// Add the State interface\ninterface State {\n extent: __esri.Extent\n}\n\n// On an active view change, set the extent State property\nonActiveViewChange = (jimuMapView: JimuMapView) => {\n if(!this.extentWatch){\n  this.extentWatch = jimuMapView.view.watch('extent', extent => {\n    this.setState({\n      extent\n    })\n  });\n }\n}\n\n// Use the `JimuMapView` instance from the map widget through the `JimuMapViewComponent` React component\n<JimuMapViewComponent useMapWidgetId={this.props.useMapWidgetIds[0]} onActiveViewChange={this.onActiveViewChange}></JimuMapViewComponent>\n```",displayName:"JimuMapView",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-arcgis/index.tsx#JimuMapView"]={docgenInfo:JimuMapView.__docgenInfo,name:"JimuMapView",path:"../jimu-arcgis/index.tsx#JimuMapView"})}catch(__react_docgen_typescript_loader_error){}try{MapViewManager.displayName="MapViewManager",MapViewManager.__docgenInfo={description:"The `MapViewManager` is used to manage `JimuMapView`, including creating, getting, setting and destroying the `JimuMapView` instance.\nPlease always use `MapViewManager.getInstance()` to use this class. For example, to get a `JimuMapView`, you can use `MapViewManager.getInstance().getJimuMapViewById(dsId)`.\nFor widget development, `MapViewManager.getInstance()` in both the widget and the widget's setting return the same instance.\n\nWhen needing to make use of the `JimuMapView`, for ease of use, it is recommended to use the `JimuMapViewComponent` React component.",displayName:"MapViewManager",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-arcgis/index.tsx#MapViewManager"]={docgenInfo:MapViewManager.__docgenInfo,name:"MapViewManager",path:"../jimu-arcgis/index.tsx#MapViewManager"})}catch(__react_docgen_typescript_loader_error){}try{_instance.displayName="MapViewManager._instance",_instance.__docgenInfo={description:"The `MapViewManager` is used to manage `JimuMapView`, including creating, getting, setting and destroying the `JimuMapView` instance.\nPlease always use `MapViewManager.getInstance()` to use this class. For example, to get a `JimuMapView`, you can use `MapViewManager.getInstance().getJimuMapViewById(dsId)`.\nFor widget development, `MapViewManager.getInstance()` in both the widget and the widget's setting return the same instance.\n\nWhen needing to make use of the `JimuMapView`, for ease of use, it is recommended to use the `JimuMapViewComponent` React component.",displayName:"MapViewManager._instance",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-arcgis/index.tsx#MapViewManager._instance"]={docgenInfo:MapViewManager._instance.__docgenInfo,name:"MapViewManager._instance",path:"../jimu-arcgis/index.tsx#MapViewManager._instance"})}catch(__react_docgen_typescript_loader_error){}try{loadArcGISJSAPIModules.displayName="loadArcGISJSAPIModules",loadArcGISJSAPIModules.__docgenInfo={description:"",displayName:"loadArcGISJSAPIModules",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-arcgis/index.tsx#loadArcGISJSAPIModules"]={docgenInfo:loadArcGISJSAPIModules.__docgenInfo,name:"loadArcGISJSAPIModules",path:"../jimu-arcgis/index.tsx#loadArcGISJSAPIModules"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/filled/brand/arcgis-enterprise.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{N:()=>ArcgisEnterpriseFilled});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_filled_brand_arcgis_enterprise_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/filled/brand/arcgis-enterprise.svg"),_svg_filled_brand_arcgis_enterprise_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_filled_brand_arcgis_enterprise_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const ArcgisEnterpriseFilled=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_filled_brand_arcgis_enterprise_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{ArcgisEnterpriseFilled.displayName="ArcgisEnterpriseFilled",ArcgisEnterpriseFilled.__docgenInfo={description:"",displayName:"ArcgisEnterpriseFilled",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/filled/brand/arcgis-enterprise.tsx#ArcgisEnterpriseFilled"]={docgenInfo:ArcgisEnterpriseFilled.__docgenInfo,name:"ArcgisEnterpriseFilled",path:"../jimu-icons/filled/brand/arcgis-enterprise.tsx#ArcgisEnterpriseFilled"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/filled/data/geocoding.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{S:()=>GeocodingFilled});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_filled_data_geocoding_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/filled/data/geocoding.svg"),_svg_filled_data_geocoding_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_filled_data_geocoding_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const GeocodingFilled=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_filled_data_geocoding_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{GeocodingFilled.displayName="GeocodingFilled",GeocodingFilled.__docgenInfo={description:"",displayName:"GeocodingFilled",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/filled/data/geocoding.tsx#GeocodingFilled"]={docgenInfo:GeocodingFilled.__docgenInfo,name:"GeocodingFilled",path:"../jimu-icons/filled/data/geocoding.tsx#GeocodingFilled"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/filled/data/geoenrichment.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{d:()=>GeoenrichmentFilled});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_filled_data_geoenrichment_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/filled/data/geoenrichment.svg"),_svg_filled_data_geoenrichment_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_filled_data_geoenrichment_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const GeoenrichmentFilled=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_filled_data_geoenrichment_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{GeoenrichmentFilled.displayName="GeoenrichmentFilled",GeoenrichmentFilled.__docgenInfo={description:"",displayName:"GeoenrichmentFilled",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/filled/data/geoenrichment.tsx#GeoenrichmentFilled"]={docgenInfo:GeoenrichmentFilled.__docgenInfo,name:"GeoenrichmentFilled",path:"../jimu-icons/filled/data/geoenrichment.tsx#GeoenrichmentFilled"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/filled/data/geometry.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$:()=>GeometryFilled});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_filled_data_geometry_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/filled/data/geometry.svg"),_svg_filled_data_geometry_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_filled_data_geometry_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const GeometryFilled=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_filled_data_geometry_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{GeometryFilled.displayName="GeometryFilled",GeometryFilled.__docgenInfo={description:"",displayName:"GeometryFilled",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/filled/data/geometry.tsx#GeometryFilled"]={docgenInfo:GeometryFilled.__docgenInfo,name:"GeometryFilled",path:"../jimu-icons/filled/data/geometry.tsx#GeometryFilled"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/filled/data/printing.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>PrintingFilled});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_filled_data_printing_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/filled/data/printing.svg"),_svg_filled_data_printing_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_filled_data_printing_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const PrintingFilled=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_filled_data_printing_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{PrintingFilled.displayName="PrintingFilled",PrintingFilled.__docgenInfo={description:"",displayName:"PrintingFilled",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/filled/data/printing.tsx#PrintingFilled"]={docgenInfo:PrintingFilled.__docgenInfo,name:"PrintingFilled",path:"../jimu-icons/filled/data/printing.tsx#PrintingFilled"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/filled/data/routing.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{x:()=>RoutingFilled});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_filled_data_routing_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/filled/data/routing.svg"),_svg_filled_data_routing_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_filled_data_routing_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const RoutingFilled=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_filled_data_routing_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{RoutingFilled.displayName="RoutingFilled",RoutingFilled.__docgenInfo={description:"",displayName:"RoutingFilled",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/filled/data/routing.tsx#RoutingFilled"]={docgenInfo:RoutingFilled.__docgenInfo,name:"RoutingFilled",path:"../jimu-icons/filled/data/routing.tsx#RoutingFilled"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/filled/data/utility-group.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U:()=>UtilityGroupFilled});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_filled_data_utility_group_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/filled/data/utility-group.svg"),_svg_filled_data_utility_group_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_filled_data_utility_group_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const UtilityGroupFilled=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_filled_data_utility_group_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{UtilityGroupFilled.displayName="UtilityGroupFilled",UtilityGroupFilled.__docgenInfo={description:"",displayName:"UtilityGroupFilled",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/filled/data/utility-group.tsx#UtilityGroupFilled"]={docgenInfo:UtilityGroupFilled.__docgenInfo,name:"UtilityGroupFilled",path:"../jimu-icons/filled/data/utility-group.tsx#UtilityGroupFilled"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/filled/data/utility.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{N:()=>UtilityFilled});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_filled_data_utility_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/filled/data/utility.svg"),_svg_filled_data_utility_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_filled_data_utility_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const UtilityFilled=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_filled_data_utility_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{UtilityFilled.displayName="UtilityFilled",UtilityFilled.__docgenInfo={description:"",displayName:"UtilityFilled",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/filled/data/utility.tsx#UtilityFilled"]={docgenInfo:UtilityFilled.__docgenInfo,name:"UtilityFilled",path:"../jimu-icons/filled/data/utility.tsx#UtilityFilled"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/filled/editor/plus-circle.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{v:()=>PlusCircleFilled});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_filled_editor_plus_circle_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/filled/editor/plus-circle.svg"),_svg_filled_editor_plus_circle_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_filled_editor_plus_circle_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const PlusCircleFilled=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_filled_editor_plus_circle_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{PlusCircleFilled.displayName="PlusCircleFilled",PlusCircleFilled.__docgenInfo={description:"",displayName:"PlusCircleFilled",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/filled/editor/plus-circle.tsx#PlusCircleFilled"]={docgenInfo:PlusCircleFilled.__docgenInfo,name:"PlusCircleFilled",path:"../jimu-icons/filled/editor/plus-circle.tsx#PlusCircleFilled"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/outlined/application/more-vertical.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{S:()=>MoreVerticalOutlined});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_outlined_application_more_vertical_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/outlined/application/more-vertical.svg"),_svg_outlined_application_more_vertical_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_outlined_application_more_vertical_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const MoreVerticalOutlined=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_outlined_application_more_vertical_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{MoreVerticalOutlined.displayName="MoreVerticalOutlined",MoreVerticalOutlined.__docgenInfo={description:"",displayName:"MoreVerticalOutlined",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/outlined/application/more-vertical.tsx#MoreVerticalOutlined"]={docgenInfo:MoreVerticalOutlined.__docgenInfo,name:"MoreVerticalOutlined",path:"../jimu-icons/outlined/application/more-vertical.tsx#MoreVerticalOutlined"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/outlined/data/link-tilted.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{f:()=>LinkTiltedOutlined});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_outlined_data_link_tilted_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/outlined/data/link-tilted.svg"),_svg_outlined_data_link_tilted_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_outlined_data_link_tilted_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const LinkTiltedOutlined=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_outlined_data_link_tilted_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{LinkTiltedOutlined.displayName="LinkTiltedOutlined",LinkTiltedOutlined.__docgenInfo={description:"",displayName:"LinkTiltedOutlined",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/outlined/data/link-tilted.tsx#LinkTiltedOutlined"]={docgenInfo:LinkTiltedOutlined.__docgenInfo,name:"LinkTiltedOutlined",path:"../jimu-icons/outlined/data/link-tilted.tsx#LinkTiltedOutlined"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/outlined/directional/horizontal.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>HorizontalOutlined});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_outlined_directional_horizontal_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/outlined/directional/horizontal.svg"),_svg_outlined_directional_horizontal_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_outlined_directional_horizontal_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const HorizontalOutlined=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_outlined_directional_horizontal_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{HorizontalOutlined.displayName="HorizontalOutlined",HorizontalOutlined.__docgenInfo={description:"",displayName:"HorizontalOutlined",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/outlined/directional/horizontal.tsx#HorizontalOutlined"]={docgenInfo:HorizontalOutlined.__docgenInfo,name:"HorizontalOutlined",path:"../jimu-icons/outlined/directional/horizontal.tsx#HorizontalOutlined"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/outlined/directional/vertical.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{N:()=>VerticalOutlined});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_outlined_directional_vertical_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/outlined/directional/vertical.svg"),_svg_outlined_directional_vertical_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_outlined_directional_vertical_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const VerticalOutlined=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_outlined_directional_vertical_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{VerticalOutlined.displayName="VerticalOutlined",VerticalOutlined.__docgenInfo={description:"",displayName:"VerticalOutlined",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/outlined/directional/vertical.tsx#VerticalOutlined"]={docgenInfo:VerticalOutlined.__docgenInfo,name:"VerticalOutlined",path:"../jimu-icons/outlined/directional/vertical.tsx#VerticalOutlined"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/outlined/editor/reset.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{w:()=>ResetOutlined});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_outlined_editor_reset_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/outlined/editor/reset.svg"),_svg_outlined_editor_reset_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_outlined_editor_reset_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const ResetOutlined=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_outlined_editor_reset_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{ResetOutlined.displayName="ResetOutlined",ResetOutlined.__docgenInfo={description:"",displayName:"ResetOutlined",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/outlined/editor/reset.tsx#ResetOutlined"]={docgenInfo:ResetOutlined.__docgenInfo,name:"ResetOutlined",path:"../jimu-icons/outlined/editor/reset.tsx#ResetOutlined"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/outlined/editor/select-option.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{i:()=>SelectOptionOutlined});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_outlined_editor_select_option_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/outlined/editor/select-option.svg"),_svg_outlined_editor_select_option_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_outlined_editor_select_option_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const SelectOptionOutlined=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_outlined_editor_select_option_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{SelectOptionOutlined.displayName="SelectOptionOutlined",SelectOptionOutlined.__docgenInfo={description:"",displayName:"SelectOptionOutlined",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/outlined/editor/select-option.tsx#SelectOptionOutlined"]={docgenInfo:SelectOptionOutlined.__docgenInfo,name:"SelectOptionOutlined",path:"../jimu-icons/outlined/editor/select-option.tsx#SelectOptionOutlined"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/outlined/suggested/help.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{k:()=>HelpOutlined});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_outlined_suggested_help_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/outlined/suggested/help.svg"),_svg_outlined_suggested_help_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_outlined_suggested_help_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const HelpOutlined=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_outlined_suggested_help_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{HelpOutlined.displayName="HelpOutlined",HelpOutlined.__docgenInfo={description:"",displayName:"HelpOutlined",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/outlined/suggested/help.tsx#HelpOutlined"]={docgenInfo:HelpOutlined.__docgenInfo,name:"HelpOutlined",path:"../jimu-icons/outlined/suggested/help.tsx#HelpOutlined"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-ui/advanced/setting-components.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ByFieldSeriesX:()=>ByFieldSeriesX,ByFieldSeriesY:()=>ByFieldSeriesY,CardLayout:()=>CardLayout,CardLayoutSetting:()=>card_layout_setting_CardLayoutSetting,CollapsableCheckbox:()=>collapse_CollapsableCheckbox,CollapsableRadio:()=>collapse_CollapsableRadio,CollapsableResetPanel:()=>collapsable_reset_panel_CollapsableResetPanel,CollapsableToggle:()=>collapse_CollapsableToggle,DEFAULT_GEOCODE_KEY:()=>DEFAULT_GEOCODE_KEY,DEFAULT_MAX_SUGGESTION:()=>DEFAULT_MAX_SUGGESTION,DefaultAddress:()=>DefaultAddress,DefaultAddressAlias:()=>DefaultAddressAlias,DefaultGeocodeLabel:()=>DefaultGeocodeLabel,DefaultGeocodeURL:()=>DefaultGeocodeURL,DirectionSelector:()=>direction_selector_DirectionSelector,JimuLayerViewSelector:()=>selector_JimuLayerViewSelector,JimuLayerViewSelectorComponent:()=>selector_JimuLayerViewSelectorComponent,JimuLayerViewSelectorDeprecated:()=>jimu_layer_view_selector_deprecated_JimuLayerViewSelectorDeprecated,JimuLayerViewSelectorDropdown:()=>dropdown_JimuLayerViewSelectorDropdown,JimuLayerViewSelectorDropdownComponent:()=>dropdown_JimuLayerViewSelectorDropdownComponent,JimuMapViewSelector:()=>jimu_map_view_selector_JimuMapViewSelector,JimuMapViewSelectorComponent:()=>jimu_map_view_selector_JimuMapViewSelectorComponent,LabelReset:()=>collapsable_reset_panel_LabelReset,LinkSelector:()=>components_link_selector_LinkSelector,LinkSelectorContent:()=>components_link_selector_content_LinkSelectorContent,LinkSelectorSidePopper:()=>components_link_selector_side_popper_LinkSelectorSidePopper,LinkSetting:()=>link_selector_content_LinkSetting,LinkSettingPopup:()=>link_selector_side_popper_LinkSettingPopup,MAX_RECENT_SEARCHES:()=>MAX_RECENT_SEARCHES,MAX_SUGGESTION:()=>MAX_SUGGESTION,MIN_SCALE:()=>MIN_SCALE,MapWidgetSelector:()=>map_widget_selector_MapWidgetSelector,MapWidgetSelectorComponent:()=>map_widget_selector_MapWidgetSelectorComponent,MaxCategories:()=>MaxCategories,MaxPieces:()=>MaxPieces,MaxSeries:()=>MaxSeries,MultipleJimuMapConfig:()=>multiple_jimu_map_config_MultipleJimuMapConfig,ObjectIdSchema:()=>ObjectIdSchema,OutStatisticFieldNameSplit:()=>OutStatisticFieldNameSplit,OutputDsAddress:()=>OutputDsAddress,OutputDsObjectField:()=>OutputDsObjectField,PageTemplatePopper:()=>page_template_popper_PageTemplatePopper,ProxySetting:()=>setting_ProxySetting,ProxySettingPopup:()=>ProxySettingPopup,QuickStylePopper:()=>quick_style_popper_QuickStylePopper,RadioGroup:()=>radio_group_RadioGroup,SearchDataSetting:()=>dataSetting_SearchDataSetting,SearchDataType:()=>SearchDataType,SearchGeneralSetting:()=>general_search_setting_SearchGeneralSetting,SearchServiceType:()=>SearchServiceType,SearchSuggestionSetting:()=>search_suggestion_setting_SearchSuggestionSetting,SettingCollapse:()=>collapse_SettingCollapse,SettingLayout:()=>layout_namespaceObject,SettingRow:()=>row_SettingRow,SettingSection:()=>section_SettingSection,SidePopper:()=>SidePopper,SizeMode:()=>SizeMode,SizeModeSelector:()=>size_mode_select_SizeModeSelector,SortSetting:()=>sort_setting_SortSetting,SortTree:()=>sort_tree_SortTree,SortTreePopper:()=>sort_tree_popper_SortTreePopper,Status:()=>Status,StylePicker:()=>style_picker_StylePicker,TemplateList:()=>template_list_TemplateList,TemplateSelector:()=>template_selector_TemplateSelector,UnControlledSettingCollapse:()=>collapse_UnControlledSettingCollapse,WidgetList:()=>widget_list_WidgetList,WidgetListPopper:()=>widget_list_popper_WidgetListPopper,WindowTemplatePopper:()=>window_template_popper_WindowTemplatePopper,_LinkSelector:()=>link_selector_LinkSelector,_LinkSelectorContent:()=>link_selector_content_LinkSelectorContent,_LinkSelectorSidePopper:()=>link_selector_side_popper_LinkSelectorSidePopper,_SidePopper:()=>side_popper_SidePopper,changeCurrentDialog:()=>changeCurrentDialog,changeCurrentPage:()=>changeCurrentPage,checkIsTableDs:()=>util_checkIsTableDs,checkIsUseDsChanged:()=>checkIsUseDsChanged,checkIsWidgetJsonDsChanged:()=>util_checkIsWidgetJsonDsChanged,getAddressFieldsSchemaAndDefaultFieldName:()=>util_getAddressFieldsSchemaAndDefaultFieldName,getAllDataSourceBySearchDataConfig:()=>util_getAllDataSourceBySearchDataConfig,getAllDsByDataConfigWithMapCentric:()=>util_getAllDsByDataConfigWithMapCentric,getConfigIdList:()=>util_getConfigIdList,getDefaultField:()=>util_getDefaultField,getDefaultGeocodeConfig:()=>geocode_utils_getDefaultGeocodeConfig,getDsInWidgetJson:()=>util_getDsInWidgetJson,getDsJsonOfOriginDs:()=>util_getDsJsonOfOriginDs,getInitOutDataSource:()=>util_getInitOutDataSource,getInitSchema:()=>util_getInitSchema,getNameOfDefaultAddressField:()=>getNameOfDefaultAddressField,getNewConfigId:()=>util_getNewConfigId,getNewDataSourceConfig:()=>util_getNewDataSourceConfig,getNewDsConfigItem:()=>util_getNewDsConfigItem,getOutputDataSourceId:()=>getOutputDataSourceId,getOutputDsJson:()=>getOutputDsJson,getOutputJsonOriginDs:()=>util_getOutputJsonOriginDs,getWhetherDsInUseDataSources:()=>getWhetherDsInUseDataSources,handelDialogInfos:()=>handelDialogInfos,initNewDatasourceConfigByField:()=>util_initNewDatasourceConfigByField,isDsInDataSources:()=>isDsInDataSources,proxySettingUtils:()=>proxy_setting_utils_namespaceObject,setLayoutAuto:()=>utils_setLayoutAuto,setLayoutCustom:()=>utils_setLayoutCustom});var styles_namespaceObject={};__webpack_require__.r(styles_namespaceObject),__webpack_require__.d(styles_namespaceObject,{JimuLayerViewSelector:()=>JimuLayerViewSelectorStyles,JimuLayerViewSelectorDeprecated:()=>JimuLayerViewSelectorDeprecatedStyles,JimuLayerViewSelectorDropdown:()=>JimuLayerViewSelectorDropdownStyles,LinkSelectorContent:()=>linkSelectorContentStyles,ProxySetting:()=>proxySettingStyles,ProxySettingPopup:()=>proxySettingPopupStyles,RadioGroup:()=>radioGroupStyle,SettingCollapse:()=>settingCollapseStyles,SidePopper:()=>sidePopperStyles,SortSetting:()=>sortSettingStyle,StylePicker:()=>stylePickerStyles,WidgetSelector:()=>widgetSelectorStyles});var layout_namespaceObject={};__webpack_require__.r(layout_namespaceObject),__webpack_require__.d(layout_namespaceObject,{SettingRow:()=>row_SettingRow,SettingSection:()=>section_SettingSection});var proxy_setting_utils_namespaceObject={};__webpack_require__.r(proxy_setting_utils_namespaceObject),__webpack_require__.d(proxy_setting_utils_namespaceObject,{deleteProxies:()=>deleteProxies,getCreateProxyUrl:()=>getCreateProxyUrl,getDeleteProxyUrl:()=>getDeleteProxyUrl,getNeedProxyDataSources:()=>getNeedProxyDataSources,getNeedProxyItems:()=>getNeedProxyItems,getNeedProxyUtilities:()=>getNeedProxyUtilities,getProxyJsonFromSourceUrl:()=>getProxyJsonFromSourceUrl,getProxyRootUrl:()=>getProxyRootUrl,isRegisteredApp:()=>isRegisteredApp,isSameProxy:()=>isSameProxy,needToConfigProxy:()=>needToConfigProxy,traverseToGetNeedProxyDataSources:()=>traverseToGetNeedProxyDataSources});var jimu_core=__webpack_require__("../jimu-core/index.tsx");const widgetSelectorStyles=props=>{const theme=props.theme;return jimu_core.AHW`
    .component-choose-widget-popup{
      .widget-card-active-btn{
        outline: none;
      }
    }
    div.component-choose-widget-popup-modal{
      width: 850px;
      max-width: 850px;
      height: 600px;
      background: ${theme.ref.palette.white};
      border-radius: 4px;
      position: absolute;
      margin: auto;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      .component-choose-widget-clear-border{
        border: 0;
        padding: 0;
      }
      .modal-content{
        border: 0;
        padding: 20px 10px 20px 40px;
        position: static;
      }
      .component-choose-widget-modal-header{
        .choose-widget-popup-close{
          width: 50px;
          height: 50px;
          display: inline-block;
          right: 28px;
          position: absolute;
          top: 10px;
          &:hover{
            cursor: pointer;
          }
        }
        .choose-widget-popup-close:after{
          content: '';
          display: inline-block;
          width: 16px;
          height: 16px;
          background-image: url(${"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAsElEQVQ4jaWSLQ7EIBhEv2LxnAzP1cBzAU6DhKCpZneaQHYpP2k6omreCzA9yjf0IgyfGCMZY+g8zy2ADrpgmsA5R977raTC6IJpAiklCSEopTSVVBgddME0AeeclFJTSQ+jCwY5fh9xVERm8E0wkiAzeCjoJcgMbm/wJjdBf4XdOmwF49irdf4Es6l2E7MVXLOSXAJr7XKqkQTMFcwYQiha65JzLruggy4YZPgfPMkHXzQME+F7oHYAAAAASUVORK5CYII="});
          position: relative;
          left: 18px;
          top: 12px;
        }
      }
      .component-choose-widget-modal-body{
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -ms-flex-wrap: wrap;
        flex-wrap: wrap;
        -webkit-box-pack: start;
        -ms-flex-pack: start;
        justify-content: flex-start;
        margin: 40px 0 10px 0;
        .widget-card-item{
          width: 70px;
          height: 120px;
          border: 0;
          margin: 0 30px 0 0;
          &:hover{
            cursor: pointer;
          }
          .widget-card-image{
            width: 70px;
            height: 70px;
            border: 1px solid #ccc;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-align: center;
            -ms-flex-align: center;
            align-items: center;
            -webkit-box-pack: center;
            -ms-flex-pack: center;
            justify-content: center;
            >div{
              width: 30px;
              height: 30px;
              position: relative;
              &:after{
                display: none;
              }
            }
          }
          .widget-card-content{
            font-size: 12px;
            color: #000;
            letter-spacing: 0.33px;
            padding: 2px;
            text-align: center;
            line-height: 14px;
          }
        }
        .widget-card-selected{
          .widget-card-image{
            border: 2px solid #0C5CB6;
            >div:after{
              content: '';
              display: block;
              width: 16px;
              height: 16px;
              position: absolute;
              top: -20px;
              right: -20px;
              background-image: url(${"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA20lEQVQ4jWPkidn2n4ECwESJ5iFgABsLI8PBRiuGS732DKJ8bKQbwMHKzKAqyc0gK8zBIMDNilUNI6FYkBBgBxrExPDg9Xes8iy4NIZYSDJ4GYkx/Pj1j6F25Q2cFuD0wo2nXxi42ZkZYu1lGMItpUg34Mrjzwx//0HYT9//IN0AFiZGBjstIaAh/xkOXntLugHGyvwM/FysDBcefGT48PUP6QaI8ELinZ2FicFGQ4iBnRW7UmY2vegGbBIPXn1j+P//P8OXn38ZPn77zXDxwSesBhBMB4QAxXkBAMaDOywJrob4AAAAAElFTkSuQmCC"});
            }
          }
        }
      }
      .component-choose-widget-modal-footer{
        position: absolute;
        bottom: 20px;
        right: 40px;
        >button{
          font-size: 14px;
          letter-spacing: 0.39px;
          text-align: center;
          vertical-align: middle;
        }
        button:first-of-type {
          background-color: #0075D0;
          border: 1px solid  #0075D0;
          border-radius: 3px;
          color: #ffffff;
        }
        button:last-of-type{
          background-color: #ffffff;
          border: 1px solid #CCCCCC;
          border-radius: 3px;
          color: #000000;
        }
      }
    }
  `},sortSettingStyle=props=>{const theme=props.theme;return jimu_core.AHW`
    width:100%;
    &.single-row-item {
        .select-con {
            padding: ${jimu_core.PLL.rem(10)} ${jimu_core.PLL.rem(0)};
            .option-name-con {
                margin-bottom: 0;
                .close-con>span {
                    margin-left: ${jimu_core.PLL.rem(10)};
                }
            }
        }
    }
    .padding-0 {
        padding: 0;
    }
    .jimu-tree-item {
        margin-bottom:${jimu_core.PLL.rem(10)};
    }
    .jimu-tree-item__draggable {
        box-shadow: 0 0 0 2px ${jimu_core.PLL.rgba(theme.ref.palette.white,.3)};
    }
    .add-option-btn {
        & {
            color:${theme.sys.color.primary.light};
            margin-top:${jimu_core.PLL.rem(10)};
            margin-bottom: ${jimu_core.PLL.rem(17)};
            cursor: pointer;
            font-size:13px;
            overflow: hidden;
            padding: 0;
        }
        .add-option-icon{
            margin-right: 4px;
        }
    }
    .no-sort-remind {
        margin: 70px auto 0;
        color: ${theme.ref.palette.neutral[700]};
        font-size: 13px;
        text-align: center;
    }
    .select-con {
        & {
            box-sizing:border-box;
            padding-right: ${jimu_core.PLL.rem(10)};
            padding: ${jimu_core.PLL.rem(8)} ${jimu_core.PLL.rem(10)} ${jimu_core.PLL.rem(10)} ${jimu_core.PLL.rem(6)};
        }
        .option-name-con {
            & {
              display: flex;
              align-items: center;
              margin-bottom:${jimu_core.PLL.rem(5)};
              width: 100%;
            }
            .option-name {
              font-size: 13px;
              line-height: 13px;
              color: ${theme.ref.palette.neutral[1100]};
              height: ${jimu_core.PLL.rem(30)};
              line-height: ${jimu_core.PLL.rem(25)};
              cursor: pointer;
              overflow: hidden;
              width: 0;
              padding-right: ${jimu_core.PLL.rem(4)};
              .edit-input {
                max-width: 88%;
                input {
                    width: 80px;
                }
                input:placeholder-shown {
                    text-overflow: ellipsis;
                }
              }
            }
            .option-name input {
                display:inline-block;
                width: auto;
                height: 100%;
            }
            .jimu-input {
                line-height: ${jimu_core.PLL.rem(30)};
                vertical-align: middle;
            }
            .input-wrapper {
                vertical-align: middle;
            }
            .option-name-icon-con {
                margin-left: ${jimu_core.PLL.rem(5)};
                svg {
                    margin-top:  ${jimu_core.PLL.rem(5)};
                }
            }
            .option-name-icon {
                color: ${theme.ref.palette.neutral[900]};
                cursor: pointer;
            }
            .option-name span {
                display: inline-block;
                text-overflow: ellipsis;
                overflow:hidden;
            }
            .close-con {
                svg {
                    margin: 0;
                    margin-top:  ${jimu_core.PLL.rem(2)};
                }
            }
            .close-con>span {
                margin-right: ${jimu_core.PLL.rem(10)};
                color: ${theme.ref.palette.black};
                cursor: pointer;
            }
        }

        .select-down-con {
            & {
                display: flex;
                align-items: center;
                height: ${jimu_core.PLL.rem(34)};
            }
            .sort-arrow-down-icon {
                margin-right: 0;
            }
            .select-input {
                flex-grow:1;
                color: ${theme.ref.palette.neutral[1200]};
            }
            .sort-button {
                margin-left: 5px;
                cursor: pointer;
                border:none;
            }
            .sort-field-selector {
                & {
                    background:${theme.sys.color.secondary.light};
                    border-radius: 2px;
                    flex-grow: 1;
                    width: 0;
                }
            }
        }
    }


  `},stylePickerStyles=props=>{const theme=props.theme;return jimu_core.AHW`
    .widget-setting--stylepicker {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      grid-gap: 10px;
    }

    .widget-setting--stylepicker-item {
      height: 93px;
      border: 1px solid ${theme.ref.palette.neutral[500]};
      background-color: ${theme.ref.palette.white};
      background-repeat: no-repeat;
      background-position: center;
      &:hover {
        border-color: ${theme.sys.color.primary.main};
      }
      &.active {
        border: 2px solid ${theme.sys.color.primary.main};
      }
      &.full-width {
        grid-column-start: 1;
        grid-column-end: 3;
      }
    }
  `},settingCollapseStyles=props=>{var _a,_b,_c,_d,_e,_f;const isOpen=null==props?void 0:props.isOpen,type=null!==(_a=null==props?void 0:props.type)&&void 0!==_a?_a:"default",theme=props.theme,light500=null===(_c=null===(_b=null==theme?void 0:theme.ref.palette)||void 0===_b?void 0:_b.neutral)||void 0===_c?void 0:_c[500],light800=null===(_e=null===(_d=null==theme?void 0:theme.ref.palette)||void 0===_d?void 0:_d.neutral)||void 0===_e?void 0:_e[700],primary=null===(_f=null==theme?void 0:theme.sys.color)||void 0===_f?void 0:_f.primary.main;return"primary"!==type?jimu_core.AHW`
    .dividing-line {
      background-color: ${light800};
    }
    `:jimu_core.AHW`
    .handle {
      border-top: 2px solid ${isOpen?primary:light500};
      background-color: ${light500};
      .title {
        padding-left: 8px;
        padding-right: 8px;
      }
    }
    .dividing-line {
      background-color: ${light800};
    }
    `};function linkSelectorContentStyles(props){var _a,_b,_c,_d,_e;const theme=props.theme,gray=null!==(_c=null===(_b=null===(_a=null==theme?void 0:theme.ref)||void 0===_a?void 0:_a.palette)||void 0===_b?void 0:_b.neutral[500])&&void 0!==_c?_c:"#ccc",cyan=null!==(_e=null===(_d=null==theme?void 0:theme.sys)||void 0===_d?void 0:_d.color.primary.main)&&void 0!==_e?_e:"blue",settingColor=jimu_core.PLL.rgba(gray,.5);return window.jimuConfig.isInBuilder?jimu_core.AHW`
    .widget-builder-link-selector {
      .collapse-btn{
        margin-right: ${jimu_core.PLL.rem(-16)};
      }
      .option-name{
        font-size: ${jimu_core.PLL.rem(13)};
        color: ${theme.ref.palette.neutral[900]};
      }
      .link-selector-list {
        .view-border{
          border-width: 1px;
          border-style: solid;
        }
        .link-selector-list-item {
          height: ${jimu_core.PLL.rem(30)};
          cursor: pointer;

          &:hover {
            background-color: ${settingColor};
          }
        }

        .link-selector-list-select {
          background-color: ${settingColor};
        }
      }

      select {
        padding-top: ${jimu_core.PLL.rem(2)} !important;
      }

      .item-selected {
        background-color: ${cyan} !important;
      }

      .form-check-input {
        span {
          background: #00A6B6 !important;
        }
      }

      .form-check-input:hover {
        border-color: gray;
      }

      input[type='radio'].form-check-input {
        -webkit-appearance: none;
        -moz-appearance: none;
        background: transparent;
        border: 1px solid #000;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        transition: all 0.2s ease;
        &:before {
        content: '';
        display: block;
        position: absolute;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: #00A6B6 !important;
        margin: 8px;
        transition: all 0.2s ease-out;
        }
        &:hover {
        border-color: #00A6B6 !important;
        }
        &:checked {
        &:before {
            width: 8px;
            height: 8px;
            margin: 3px;
        }
        }
      }
      .link-setting-cursor-pointer{
        cursor: pointer;
      }
      .open-type-label{
        width: 100%;
        display: block;
      }
    }
    .url-error-container{
      *{
        color: ${theme.sys.color.error.main};
      }
      div{
        width: calc(100% - 20px);
        margin-left: 4px;
        overflow: hidden;
        text-overflow: ellipsis;
      }
    }
  `:jimu_core.AHW`
    .widget-builder-link-selector {
      .collapse-btn{
        position: absolute;
        right: ${jimu_core.PLL.rem(-4)};
      }
      .option-name{
        font-size: ${jimu_core.PLL.rem(13)};
        color: ${theme.ref.palette.neutral[900]};
        font-weight: 500;
      }
      .item-common{
        background: ${theme.ref.palette.white};
      }
      .view-border{
        border: 1px solid ${theme.ref.palette.neutral[500]};
      }
      .link-selector-list {

        .link-selector-list-item {
          height: ${jimu_core.PLL.rem(30)};
          cursor: pointer;

          &:hover {
            background-color: ${settingColor};
          }
        }

        .link-selector-list-select {
          background-color: ${settingColor};
        }
      }

      select {
        padding-top: ${jimu_core.PLL.rem(2)} !important;
      }

      .item-selected {
        background-color: ${cyan} !important;
      }
      .link-setting-cursor-pointer{
        cursor: pointer;
      }
      .open-type-label{
        width: 100%;
        display: block;
      }
      .url-error-container{
        *{
          color: ${theme.sys.color.error.main};
        }
        div{
          width: calc(100% - 20px);
          margin-left: 4px;
          overflow: hidden;
          text-overflow: ellipsis;
        }
      }
    }
  `}function proxySettingStyles(props){const theme=props.theme;return jimu_core.AHW`
    color: ${theme.ref.palette.neutral[1e3]};
    .font-size-13{
      font-size: ${jimu_core.PLL.rem(13)} !important;
    }
    .subscriber-warning{
      font-size: ${jimu_core.PLL.rem(13)};
    }
    .secondary-title{
      font-size: ${jimu_core.PLL.rem(14)};
    }
    .content-table{
      font-size: ${jimu_core.PLL.rem(13)};
      color: ${theme.ref.palette.neutral[1100]};
    }
    .content-table-header{
      height: ${jimu_core.PLL.rem(32)};
      background-color: ${theme.ref.palette.neutral[500]};
      display: block;
      line-height: ${jimu_core.PLL.rem(30)};
    }
    .content-table-tr{
      height: ${jimu_core.PLL.rem(39)};
      line-height: ${jimu_core.PLL.rem(39)};
      border-bottom: 1px solid ${theme.ref.palette.neutral[500]};
    }
    .col-4, .col-2{
      height: 100%;
    }
    .request-limit{
      margin-top: ${jimu_core.PLL.rem(6)};
    }
    .request-interval{
      display: block;
      margin-top: ${jimu_core.PLL.rem(-3)};
    }
  `}function proxySettingPopupStyles(props){const theme=props.theme;return jimu_core.AHW`
    max-width: ${jimu_core.PLL.rem(960)} !important;
    .header{
      font-size: ${jimu_core.PLL.rem(16)};
      color: ${theme.ref.palette.neutral[1e3]};
    }
    .proxy-setting-container{
      width: ${jimu_core.PLL.rem(960)};
      height: ${jimu_core.PLL.rem(640)};
      border: 0;
      color: ${theme.ref.palette.neutral[1e3]};
    }
    .px-30{
      padding-right: ${jimu_core.PLL.rem(30)};
      padding-left: ${jimu_core.PLL.rem(30)};
    }
  `}const radioGroupStyle=props=>{const theme=props.theme,gutter=props.gutter;return jimu_core.AHW`
    margin-bottom: 0;
    label {
      display: inline-flex;
      align-items: center;
      margin-right: ${gutter||theme.sys.spacing(4)};
      .jimu-radio {
        margin-right: 8px;
      }
    }
  `};function sidePopperStyles(props){const theme=props.theme;return jimu_core.AHW`
    width: ${jimu_core.PLL.rem(260)};
    height: calc(100vh - 70px);
    padding: 0;
    overflow: hidden;
    border-radius: 0;
    box-shadow: 0 0 0;
    border-left: 1px solid ${theme.ref.palette.neutral[700]};
    border-right: 1px solid ${theme.ref.palette.neutral[700]};
    border-top: 0;
    border-bottom: 0;
    margin: 0 !important;
  `}const JimuLayerViewSelectorDeprecatedStyles=props=>{const theme=props.theme;return jimu_core.AHW`
    .dropdown-menu--inner {
      background-color: ${theme.sys.color.secondary.light};
      padding: 0;
    }

    .dropdown-toggle-content {
      width: 100%;
    }

    .layerviewselector-input {
      width: 100%;
      height: 30px !important;
      background-color: ${theme.sys.color.secondary.light};
      &:hover {
        background-color: ${theme.sys.color.secondary.light};
      }
      flex-direction: unset !important;
    }

    .layerviewselector-input-text {
      max-width: calc(100% - 13px);
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .layerviewselector-bg {
      max-height: 270px;
      overflow-y: auto;
      background-color: ${theme.sys.color.secondary.light};
    }

    .layerviewselector-item-bg {
      cursor: pointer;
    }

    .layerviewselector-item-bg:hover {
      background-color: ${theme.sys.color.primary.main};
    }

    .layerviewselector-ds-item {
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      width: 100%;
    }

    .layerviewselector-ds-item:hover {
      background-color: ${theme.sys.color.primary.main};
    }

    .layerviewselector-ds-item-selected {
      background-color: ${theme.sys.color.primary.main};
    }
  `};var jimu_theme=__webpack_require__("../jimu-theme/index.ts");function getInputSizingStyles(inputVars,size){const inputVarsBySize=inputVars.sizes[size];return`\n    height: ${"auto"!==inputVarsBySize.height?inputVarsBySize.height:function getInputHeight(inputVarsBySize,inputBorderWidth){const heightInner=jimu_core.PLL.math(`\n    ${inputVarsBySize.fontSize} * ${inputVarsBySize.lineHeight} +\n    ${inputVarsBySize.paddingY} * 2`);return"0"===inputBorderWidth.toString()?heightInner:`calc(${heightInner} + ${inputBorderWidth} * 2)`}(inputVarsBySize,inputVars.border.width)};\n    padding: ${inputVarsBySize.paddingY} ${inputVarsBySize.paddingX};\n    font-size: ${inputVarsBySize.fontSize};\n    line-height: ${inputVarsBySize.lineHeight};\n    border-radius: ${inputVarsBySize.borderRadius};\n  `}const JimuLayerViewSelectorDropdownStyles=props=>{var _a,_b;const theme=props.theme,buttonProps=null==props?void 0:props.buttonProps,inputVars=null===(_a=null==theme?void 0:theme.components)||void 0===_a?void 0:_a.input;return jimu_core.AHW`
    width: 100%;
      > .dropdown{
        > .dropdown-button {
          text-align: start;
        }
      }
      ${null!==(_b=null==buttonProps?void 0:buttonProps.type)&&void 0!==_b?_b:jimu_core.AHW`
      /* Button override */
        > .dropdown{
          > .dropdown-button {
            &,
            &:hover {
              color: ${inputVars.color};
              background-color: ${inputVars.bg};
              background-clip: padding-box;
              box-shadow: ${inputVars.boxShadow};
              transition: ${inputVars.transition};
              text-decoration: none;
              ${getInputSizingStyles(inputVars,"sm")}
              ${(0,jimu_theme.mZ)(inputVars)}
            }
            &[aria-expanded="true"] {
              color: ${inputVars.color};
              background-color: ${inputVars.focus.bg};
              border-color: ${inputVars.focus.borderColor};
              text-decoration: none;
              box-shadow: ${inputVars.boxShadow}, ${inputVars.focus.boxShadow};
            }
          }
        }
      `}

  `},JimuLayerViewSelectorStyles=props=>{const height=props.isInDropdown?"366px":"calc(100% - 34px)";return jimu_core.AHW`
    .button-container {
      display: flex;
      justify-content: space-between;
      .search-input {
        width: calc(100% - 32px);
      }
      .layer-label {
        font-size: 14px;
        color: ${props.theme.sys.color.surface.paperHint};
        font-weight: 600;
        margin-left: 2px;
      }
      .right-buttons {
        display: flex;
        gap: var(--sys-spacing-1);
      }
    }
    .tree-container{
      margin-top: 16px;
      height: ${height};
    }
    `};var jimu_for_builder=__webpack_require__("../jimu-for-builder/index.tsx"),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const Root=(0,jimu_theme.I4)("div")((({theme})=>({padding:theme.sys.spacing(4),borderBottom:`1px solid ${theme.sys.color.divider.secondary}`,"&:last-child":{borderBottom:"none"},"&:nth-of-type(1):nth-last-of-type(1)":{borderBottom:"none"},".jimu-widget-setting--section-header":{"> h6":{color:theme.sys.color.surface.paperText,marginBottom:0},"+ *":{marginTop:theme.sys.spacing(4)},"&.row":{marginLeft:0,marginRight:0}}}))),section_SettingSection=jimu_core.q_G.forwardRef(((props,ref)=>{const{className,title,children}=props,otherProps=__rest(props,["className","title","children"]),classes=(0,jimu_core.xWm)(className,"jimu-widget-setting--section");return jimu_core.q_G.createElement(Root,Object.assign({styleState:props,className:classes,ref},otherProps),title&&jimu_core.q_G.createElement("div",{className:"jimu-widget-setting--section-header"},"string"==typeof title?jimu_core.q_G.createElement("h6",{className:"w-100 title2 hint-paper"},title):jimu_core.q_G.createElement("div",{className:"w-100 text-truncate title2 hint-paper"},title)),children)}));try{section_SettingSection.displayName="SettingSection",section_SettingSection.__docgenInfo={description:"The `SettingSection` component allows users to display setting content as a section.\nUse this component to wrap `SettingRow` component(s).\n\n```ts\nimport { SettingSection } from 'jimu-ui/advanced/setting-components'\n```",displayName:"SettingSection",props:{role:{defaultValue:null,description:"To provide a role for section",name:"role",required:!1,type:{name:"string"}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.\nBy default, the accessible name is computed from any text content inside the element.\nIf lacking, provide an aria-label.",name:"aria-label",required:!1,type:{name:"string"}},"aria-describedby":{defaultValue:null,description:"The aria-describedby attribute lists the ids of the elements that describe the object. It is used to establish a relationship between widgets or groups and the text that describes them.\n@ignore",name:"aria-describedby",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"Defines the title text for the setting section.",name:"title",required:!1,type:{name:"ReactNode"}},children:{defaultValue:null,description:"The children of this component.",name:"children",required:!1,type:{name:"ReactNode"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/layout/section.tsx#SettingSection"]={docgenInfo:section_SettingSection.__docgenInfo,name:"SettingSection",path:"../jimu-ui/advanced/lib/setting-components/components/layout/section.tsx#SettingSection"})}catch(__react_docgen_typescript_loader_error){}const row_Root=(0,jimu_theme.I4)("div")((({theme,styleState})=>{const flow=styleState.flow,level=styleState.level,typography=1===level?theme.sys.typography.title2:theme.sys.typography.title3;return{margin:0,"+ .jimu-widget-setting--row":{marginTop:theme.sys.spacing(4)},"&.bottom-line":{paddingBottom:theme.sys.spacing(4),borderBottom:`1px solid ${theme.sys.color.divider.secondary}`},"> .jimu-widget-setting--row-label":{display:"inline-block",marginBottom:"wrap"===flow?theme.sys.spacing(2):0,marginRight:theme.sys.spacing(5),fontFamily:typography.fontFamily,fontSize:typography.fontSize,fontWeight:typography.fontWeight,lineHeight:typography.lineHeight,color:1===level?theme.sys.color.surface.paperHint:2===level?theme.sys.color.surface.backgroundText:theme.sys.color.surface.backgroundHint},"> input":{'[type="number"]':{width:"50px",flexShrink:0,"&::-webkit-inner-spin-button, &::-webkit-outer-spin-button":{WebkitAppearance:"none",margin:0}}},"&.form-inline":{flexWrap:"nowrap",".jimu-widget-setting--row-label":{maxWidth:"80%","+ *":{flexShrink:0}}}}})),row_SettingRow=jimu_core.q_G.forwardRef(((props,ref)=>{const{flow,truncateLabel=!1,label,role,indented,className,level=3,"aria-label":ariaLabel,bottomLine=!1,tag="div",children}=props,styleState=Object.assign({level,truncateLabel},props),title="string"==typeof label?label:"",classes=(0,jimu_core.xWm)(className,"jimu-widget-setting--row row form-group align-items-center",{"form-inline":"wrap"!==flow,"bottom-line":bottomLine,"pl-5":indented}),LabelTag="div"===tag?"label":"span";return jimu_core.q_G.createElement(row_Root,{ref,styleState,as:tag,className:classes,role,"aria-label":ariaLabel},label&&jimu_core.q_G.createElement(LabelTag,{title,className:(0,jimu_core.xWm)("jimu-widget-setting--row-label justify-content-start flex-grow-1 text-break",{"w-100 mr-0":"wrap"===flow,"text-truncate":truncateLabel})},label),children)}));try{row_SettingRow.displayName="SettingRow",row_SettingRow.__docgenInfo={description:"The `SettingRow` component allows users to display setting content in a row.\nUse this component inside of the `SettingSection` component.\n\n```ts\nimport { SettingRow } from 'jimu-ui/advanced/setting-components'\n```",displayName:"SettingRow",props:{role:{defaultValue:null,description:"To provide a role for row",name:"role",required:!1,type:{name:"string"}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.\nBy default, the accessible name is computed from any text content inside the element.\nIf lacking, provide an aria-label.",name:"aria-label",required:!1,type:{name:"string"}},level:{defaultValue:{value:"3"},description:"@ignore Three different levels of label",name:"level",required:!1,type:{name:"enum",value:[{value:"1"},{value:"2"},{value:"3"}]}},label:{defaultValue:null,description:"Defines the label text for the setting row.",name:"label",required:!1,type:{name:"ReactNode"}},tag:{defaultValue:{value:"div"},description:"The tag of the component.\nIf the tag is 'label', clicking on the label will trigger the form child element.",name:"tag",required:!1,type:{name:"enum",value:[{value:'"div"'},{value:'"label"'}]}},flow:{defaultValue:null,description:"Indicates whether the children should flow to the next line.\n'wrap' - the children will flow to the next line.\n'no-wrap' - the children will stay in the line as the label.",name:"flow",required:!1,type:{name:"enum",value:[{value:'"wrap"'},{value:'"no-wrap"'}]}},indented:{defaultValue:null,description:"Indicates whether to indent the row.",name:"indented",required:!1,type:{name:"boolean"}},truncateLabel:{defaultValue:null,description:"Indicates whether to truncate long label text.",name:"truncateLabel",required:!1,type:{name:"boolean"}},children:{defaultValue:null,description:"The children of this component.",name:"children",required:!1,type:{name:"ReactNode"}},bottomLine:{defaultValue:{value:"false"},description:"Whether to show the bottom line.",name:"bottomLine",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/layout/row.tsx#SettingRow"]={docgenInfo:row_SettingRow.__docgenInfo,name:"SettingRow",path:"../jimu-ui/advanced/lib/setting-components/components/layout/row.tsx#SettingRow"})}catch(__react_docgen_typescript_loader_error){}var jimu_ui=__webpack_require__("../jimu-ui/index.tsx"),layout_runtime=__webpack_require__("../jimu-layouts/layout-runtime.tsx");const divider={label:"divider",divider:!0},getBreakList=(breaker,selectLists)=>{var _a,_b;let pageList=[],dialogList=[];for(let i=1;i<selectLists.length;i++)if("dialogs"===selectLists[i].type){breaker=i;break}return 1===breaker&&"dialogs"===(null===(_a=selectLists[1])||void 0===_a?void 0:_a.type)?dialogList=selectLists.slice(1):1===breaker&&"pages"===(null===(_b=selectLists[1])||void 0===_b?void 0:_b.type)?pageList=selectLists.slice(1):(pageList=selectLists.slice(1,breaker),dialogList=selectLists.slice(breaker)),{pageList,dialogList}};var LabelType;!function(LabelType){LabelType.Page="pages",LabelType.Dialog="dialogs",LabelType.Widget="widgets"}(LabelType||(LabelType={}));const sortByLabel=(items,appConfig,type)=>items.sort(((a,b)=>{const labelA=type===LabelType.Widget?appConfig[type][a].label:appConfig[type][a.id].label,labelB=type===LabelType.Widget?appConfig[type][b].label:appConfig[type][b.id].label;return labelA.localeCompare(labelB,null===window||void 0===window?void 0:window.locale,{numeric:!0,sensitivity:"base"})})),{useState}=jimu_core.q_G,map_widget_selector_MapWidgetSelectorComponent=props=>{var _a;const{autoSelect=!0,onSelect,showLabel=!1,warningMessage="",isNeedConfirmBeforeChange}=props,translate=jimu_core.JLE.useTranslation(jimu_ui.defaultMessages),[confirmDialogOpen,setConfirmDialogOpen]=useState(!1),[selectedValue,setSelectedValue]=useState(null),noneMapWidget={id:"none",label:translate("none")},appConfig=jimu_core.E_S.useSelector((state=>{var _a,_b;return(null===(_a=null===window||void 0===window?void 0:window.jimuConfig)||void 0===_a?void 0:_a.isBuilder)?null===(_b=state.appStateInBuilder)||void 0===_b?void 0:_b.appConfig:state.appConfig})),browserSizeMode=jimu_core.E_S.useSelector((state=>{var _a;return null===(_a=state.appStateInBuilder)||void 0===_a?void 0:_a.browserSizeMode})),currentPageId=jimu_core.E_S.useSelector((state=>{var _a;return null===(_a=state.appStateInBuilder)||void 0===_a?void 0:_a.appRuntimeInfo.currentPageId})),currentDialogId=jimu_core.E_S.useSelector((state=>{var _a;return null===(_a=state.appStateInBuilder)||void 0===_a?void 0:_a.appRuntimeInfo.currentDialogId})),currentContainerType=currentDialogId?jimu_core.Kk5.Dialog:jimu_core.Kk5.Page,currentId=currentDialogId||currentPageId,mapWidgetJsons=jimu_core.q_G.useMemo((()=>((selectLists,appConfig,currentContainerType,translate)=>{const OptionList=[];if(selectLists[0].maps.length>0){OptionList.push(divider);const currentHeader={header:!0,label:currentContainerType===jimu_core.Kk5.Dialog?translate("currentWindow"):translate("currentPage")};OptionList.push(currentHeader),sortByLabel(selectLists[0].maps,appConfig,LabelType.Widget).forEach((id=>{const currentOption={id,label:appConfig.widgets[id].label,headerLabel:currentContainerType===jimu_core.Kk5.Dialog?translate("currentWindow"):translate("currentPage")};OptionList.push(currentOption)}))}const breakList=getBreakList(1,selectLists);let pageDivider=!1;const sortedPageList=sortByLabel(breakList.pageList,appConfig,LabelType.Page);for(let i=0;i<breakList.pageList.length;i++)if(breakList.pageList[i].maps.length>0){pageDivider||(OptionList.push(divider),pageDivider=!0);const otherHeader={header:!0,label:appConfig.pages[sortedPageList[i].id].label};OptionList.push(otherHeader),sortByLabel(sortedPageList[i].maps,appConfig,LabelType.Widget).forEach((id=>{const otherOption={id,label:appConfig.widgets[id].label,headerLabel:appConfig.pages[sortedPageList[i].id].label};OptionList.push(otherOption)}))}if(breakList.dialogList){let dialogDivider=!1;const sortedDialogList=sortByLabel(breakList.dialogList,appConfig,LabelType.Dialog);for(let i=0;i<breakList.dialogList.length;i++)if(breakList.dialogList[i].maps.length>0){dialogDivider||(OptionList.push(divider),dialogDivider=!0);const otherHeader={header:!0,label:appConfig.dialogs[sortedDialogList[i].id].label};OptionList.push(otherHeader),sortByLabel(sortedDialogList[i].maps,appConfig,LabelType.Widget).forEach((id=>{const otherOption={id,label:appConfig.widgets[id].label,headerLabel:appConfig.dialogs[sortedDialogList[i].id].label};OptionList.push(otherOption)}))}}return OptionList})(layout_runtime.searchUtils.getMapWidgets(appConfig,browserSizeMode,currentContainerType,currentId),appConfig,currentContainerType,translate)),[appConfig,browserSizeMode,currentContainerType,currentId,translate]),[currentMapId,setCurrentMapId]=useState((null===(_a=props.useMapWidgetIds)||void 0===_a?void 0:_a[0])||null),previousValueRef=jimu_core.q_G.useRef(currentMapId);jimu_core.JLE.useUpdateEffect((()=>{var _a,_b;setCurrentMapId((null===(_a=props.useMapWidgetIds)||void 0===_a?void 0:_a[0])||null),previousValueRef.current=(null===(_b=props.useMapWidgetIds)||void 0===_b?void 0:_b[0])||null}),[props.useMapWidgetIds]),jimu_core.q_G.useEffect((()=>{if(autoSelect&&!props.useMapWidgetIds){const selectLists=layout_runtime.searchUtils.getMapWidgets(appConfig,browserSizeMode,currentContainerType,currentId),currentOnlyOneMap=1===selectLists[0].maps.length?selectLists[0].maps[0]:null;currentOnlyOneMap&&(null==onSelect||onSelect([currentOnlyOneMap]))}}),[]);const onClick=e=>{const selectedMapWidgetId=e.target.value;if(selectedMapWidgetId===currentMapId)return;const useMapWidgetIds=selectedMapWidgetId===noneMapWidget.id?[]:[selectedMapWidgetId];isNeedConfirmBeforeChange?null===previousValueRef.current?(null==onSelect||onSelect(useMapWidgetIds),setCurrentMapId(selectedMapWidgetId)):setConfirmDialogOpen(!0):(null==onSelect||onSelect(useMapWidgetIds),setCurrentMapId(selectedMapWidgetId)),setSelectedValue(selectedMapWidgetId)},selectedMapWidget=(()=>{var _a;if(!props.useMapWidgetIds||0===(null===(_a=props.useMapWidgetIds)||void 0===_a?void 0:_a.length))return null;const selectedMapWidgetId=props.useMapWidgetIds[0];return mapWidgetJsons.find((w=>w.id===selectedMapWidgetId))||null})();return jimu_core.q_G.createElement("div",{className:"w-100 component-map-selector"},showLabel&&jimu_core.q_G.createElement(jimu_ui.Label,{title:translate("selectMapWidget"),className:"jimu-widget-setting--row-label justify-content-start flex-grow-1 text-break title3 hint-default w-100 mr-0"},translate("selectMapWidget")),jimu_core.q_G.createElement(jimu_ui.Select,{size:"sm",value:selectedMapWidget?selectedMapWidget.id:noneMapWidget.id,"aria-label":props["aria-label"]||translate("selectMapWidget"),"aria-describedby":props["aria-describedby"],"ally-description":props["ally-description"]},[noneMapWidget].concat(mapWidgetJsons).map(((option,index)=>jimu_core.q_G.createElement(jimu_ui.Option,{header:option.header,divider:option.divider,value:option.id,key:index,onClick},!option.header&&jimu_core.q_G.createElement("div",{className:"sr-only"},option.headerLabel),option.label)))),warningMessage&&jimu_core.q_G.createElement(jimu_ui.Alert,{tabIndex:0,className:"w-100 mt-2",open:!0,text:warningMessage,type:"warning"}),confirmDialogOpen&&jimu_core.q_G.createElement(jimu_ui.ConfirmDialog,{level:"info",title:translate("confirmTitle"),hasNotShowAgainOption:!1,content:props.confirmMessage,onConfirm:()=>{setConfirmDialogOpen(!1);const selectedMapWidgetId=selectedValue,useMapWidgetIds=selectedMapWidgetId===noneMapWidget.id?[]:[selectedMapWidgetId];null==onSelect||onSelect(useMapWidgetIds),setCurrentMapId(selectedValue)},onClose:()=>{setConfirmDialogOpen(!1)}}))},map_widget_selector_MapWidgetSelector=map_widget_selector_MapWidgetSelectorComponent;try{map_widget_selector_MapWidgetSelectorComponent.displayName="MapWidgetSelectorComponent",map_widget_selector_MapWidgetSelectorComponent.__docgenInfo={description:"",displayName:"MapWidgetSelectorComponent",props:{useMapWidgetIds:{defaultValue:null,description:"The array of Map widget IDs. It is returned from the onSelect function.",name:"useMapWidgetIds",required:!1,type:{name:"ImmutableArray<string>"}},autoSelect:{defaultValue:{value:"true"},description:"Whether automatically select the only Map widget in the same page/window",name:"autoSelect",required:!1,type:{name:"boolean"}},onSelect:{defaultValue:null,description:"The function will be called when a Map widget item listed in this component is selected.",name:"onSelect",required:!1,type:{name:"(useMapWidgetIds: string[]) => void"}},isNeedConfirmBeforeChange:{defaultValue:{value:"false"},description:"Whether need a confirm modal popup when changed the connected map widget.",name:"isNeedConfirmBeforeChange",required:!1,type:{name:"boolean"}},confirmMessage:{defaultValue:null,description:"Defines the confirm text if need a confirm modal.",name:"confirmMessage",required:!1,type:{name:"string"}},showLabel:{defaultValue:{value:"false"},description:"If true, show a default label('Select a map widget')",name:"showLabel",required:!1,type:{name:"boolean"}},warningMessage:{defaultValue:{value:"''"},description:"Show a warning message for a non-empty string",name:"warningMessage",required:!1,type:{name:"string"}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.\nBy default, the accessible name is computed from any text content inside the element.",name:"aria-label",required:!1,type:{name:"string"}},"a11y-description":{defaultValue:null,description:"To provide a description for interactive components for accessibility purposes.\n`aria-describedby` has a high priority than `a11y-description`.",name:"a11y-description",required:!1,type:{name:"string"}},"aria-describedby":{defaultValue:null,description:"Identifies the element (or elements) that describes the object for accessibility purposes.",name:"aria-describedby",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/map-widget-selector/index.tsx#MapWidgetSelectorComponent"]={docgenInfo:map_widget_selector_MapWidgetSelectorComponent.__docgenInfo,name:"MapWidgetSelectorComponent",path:"../jimu-ui/advanced/lib/setting-components/components/map-widget-selector/index.tsx#MapWidgetSelectorComponent"})}catch(__react_docgen_typescript_loader_error){}try{map_widget_selector_MapWidgetSelector.displayName="MapWidgetSelector",map_widget_selector_MapWidgetSelector.__docgenInfo={description:"A react component for selecting Map widgets. It is usually used on the setting page of a widget,\nand works with JimuMapViewComponent, JimuLayerViewComponent, JimuMapViewS and JimuLayerViewSelector.",displayName:"MapWidgetSelector",props:{useMapWidgetIds:{defaultValue:null,description:"The array of Map widget IDs. It is returned from the onSelect function.",name:"useMapWidgetIds",required:!1,type:{name:"ImmutableArray<string>"}},autoSelect:{defaultValue:{value:"true"},description:"Whether automatically select the only Map widget in the same page/window",name:"autoSelect",required:!1,type:{name:"boolean"}},onSelect:{defaultValue:null,description:"The function will be called when a Map widget item listed in this component is selected.",name:"onSelect",required:!1,type:{name:"(useMapWidgetIds: string[]) => void"}},isNeedConfirmBeforeChange:{defaultValue:{value:"false"},description:"Whether need a confirm modal popup when changed the connected map widget.",name:"isNeedConfirmBeforeChange",required:!1,type:{name:"boolean"}},confirmMessage:{defaultValue:null,description:"Defines the confirm text if need a confirm modal.",name:"confirmMessage",required:!1,type:{name:"string"}},showLabel:{defaultValue:{value:"false"},description:"If true, show a default label('Select a map widget')",name:"showLabel",required:!1,type:{name:"boolean"}},warningMessage:{defaultValue:{value:"''"},description:"Show a warning message for a non-empty string",name:"warningMessage",required:!1,type:{name:"string"}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.\nBy default, the accessible name is computed from any text content inside the element.",name:"aria-label",required:!1,type:{name:"string"}},"a11y-description":{defaultValue:null,description:"To provide a description for interactive components for accessibility purposes.\n`aria-describedby` has a high priority than `a11y-description`.",name:"a11y-description",required:!1,type:{name:"string"}},"aria-describedby":{defaultValue:null,description:"Identifies the element (or elements) that describes the object for accessibility purposes.",name:"aria-describedby",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/map-widget-selector/index.tsx#MapWidgetSelector"]={docgenInfo:map_widget_selector_MapWidgetSelector.__docgenInfo,name:"MapWidgetSelector",path:"../jimu-ui/advanced/lib/setting-components/components/map-widget-selector/index.tsx#MapWidgetSelector"})}catch(__react_docgen_typescript_loader_error){}class _DsListForSelector extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.getIsLoading=()=>!!this.props.fromRootDsIds&&this.props.fromRootDsIds.some((rootDsId=>this.getIsSingleDsLoading(rootDsId))),this.getIsSingleDsLoading=dsId=>{const ds=jimu_core.zAk.getInstance().getDataSource(dsId),dsInfo=null==ds?void 0:ds.getInfo();return!!dsInfo&&(dsInfo.instanceStatus!==jimu_core.e3_.CreateError&&(dsInfo.instanceStatus!==jimu_core.e3_.Created||!!ds.isDataSourceSet()&&!ds.areChildDataSourcesCreated()))},this.formatMessage=(id,values)=>{const messages=Object.assign({},jimu_ui.defaultMessages);return this.props.intl.formatMessage({id,defaultMessage:messages[id]},values)},this.state={isLoading:this.getIsLoading()}}componentDidMount(){this.state.isLoading&&this.waitChildDssReady().finally((()=>{this.setState({isLoading:!1})}))}componentDidUpdate(prevProps){prevProps.fromRootDsIds!==this.props.fromRootDsIds&&this.setState({isLoading:this.getIsLoading()}),this.state.isLoading&&this.waitChildDssReady().finally((()=>{this.setState({isLoading:!1})}))}waitChildDssReady(){return this.props.fromRootDsIds?Promise.all(this.props.fromRootDsIds.map((rootDsId=>this.waitChildDssReadyForSingleDs(rootDsId)))).catch((err=>[])):Promise.resolve([])}waitChildDssReadyForSingleDs(dsId){const ds=jimu_core.zAk.getInstance().getDataSource(dsId);return(null==ds?void 0:ds.isDataSourceSet())&&!ds.areChildDataSourcesCreated()?ds.childDataSourcesReady().then((()=>ds)):Promise.resolve(ds)}getContent(){var _a,_b,_c,_d;const rootDsIds=[];for(let i=0;i<this.props.fromRootDsIds.length;i++)rootDsIds.push(this.props.fromRootDsIds[i]);const appConfig=(null===(_a=null===window||void 0===window?void 0:window.jimuConfig)||void 0===_a?void 0:_a.isBuilder)?null===(_c=null===(_b=(0,jimu_core.Vp3)().getState())||void 0===_b?void 0:_b.appStateInBuilder)||void 0===_c?void 0:_c.appConfig:null===(_d=(0,jimu_core.Vp3)().getState())||void 0===_d?void 0:_d.appConfig;return jimu_core.q_G.createElement("div",{className:"w-100"},rootDsIds.map(((rootDsId,index)=>{var _a;const rootDs=jimu_core.zAk.getInstance().getDataSource(rootDsId),label=null===(_a=appConfig.dataSources[rootDsId])||void 0===_a?void 0:_a.sourceLabel,itemError=(dataSourceId=>{var _a,_b,_c;return(null===(_c=null===(_b=null===(_a=(0,jimu_core.Vp3)().getState().appStateInBuilder)||void 0===_a?void 0:_a.dataSourcesInfo)||void 0===_b?void 0:_b[dataSourceId])||void 0===_c?void 0:_c.instanceStatus)===jimu_core.e3_.CreateError})(rootDsId),childDss=(null==rootDs?void 0:rootDs.isDataSourceSet())&&(null==rootDs?void 0:rootDs.getChildDataSources());return jimu_core.q_G.createElement("div",{key:index},jimu_core.q_G.createElement("div",{className:"hint-paper pl-2 pr-2 d-flex align-items-center justify-content-between",style:{fontSize:"14px"}},label,itemError&&jimu_core.q_G.createElement(jimu_ui.Alert,{variant:"text",form:"tooltip",size:"small",type:"error",text:this.formatMessage("dataSourceCreateError")})),null==childDss?void 0:childDss.map(((childDs,idx)=>jimu_core.q_G.createElement("div",{key:idx,className:"mt-1 mb-1"},jimu_core.q_G.createElement("div",{className:(0,jimu_core.xWm)("layerviewselector-ds-item pl-2 pr-2",{"layerviewselector-ds-item-selected":this.props.selectedDsIds&&this.props.selectedDsIds.includes(childDs.id)}),title:childDs.getLabel(),onClick:()=>{this.props.onSelect&&this.props.onSelect({rootDataSourceId:rootDsId,dataSourceId:childDs.id})}},null==childDs?void 0:childDs.getLabel())))))})))}render(){return this.props.fromRootDsIds&&0!==this.props.fromRootDsIds.length?jimu_core.q_G.createElement("div",{className:"w-100"},this.state.isLoading?jimu_core.q_G.createElement(jimu_ui.Loading,{type:jimu_ui.LoadingType.Secondary,width:24,height:16}):this.getContent()):null}}const DsListForSelector=(0,jimu_core.j4T)(_DsListForSelector);try{DsListForSelector.displayName="DsListForSelector",DsListForSelector.__docgenInfo={description:"",displayName:"DsListForSelector",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/jimu-layer-view-selector-deprecated/ds-list-for-selector.tsx#DsListForSelector"]={docgenInfo:DsListForSelector.__docgenInfo,name:"DsListForSelector",path:"../jimu-ui/advanced/lib/setting-components/components/jimu-layer-view-selector-deprecated/ds-list-for-selector.tsx#DsListForSelector"})}catch(__react_docgen_typescript_loader_error){}const STYLE=jimu_core.AHW`
& {
  .ds-selector > span {
    display: none;
  }
}
`;class _JimuLayerViewSelectorDeprecated extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.selectorConRef=jimu_core.q_G.createRef(),this.toggleList=evt=>{this.setState({listOpen:!this.state.listOpen})},this.onResize=({width,height})=>{this.setState({width})},this.handleChooseLayer=selectedDsJson=>{if(this.props.onSelect)if(selectedDsJson){const rootDs=jimu_core.zAk.getInstance().getDataSource(selectedDsJson.rootDataSourceId),layerId=jimu_core.zAk.getInstance().getDataSource(selectedDsJson.dataSourceId).id,jimuLayerId=rootDs.isDataSourceSet()&&rootDs.getJimuChildId(layerId)[0];this.props.onSelect((0,jimu_core.J3Z)({jimuMapViewId:`${this.props.useMapWidgetIds[0]}-${selectedDsJson.rootDataSourceId}`,jimuLayerId,dataSourceId:selectedDsJson&&selectedDsJson.dataSourceId,rootDataSourceId:selectedDsJson&&selectedDsJson.rootDataSourceId}))}else this.props.onSelect((0,jimu_core.J3Z)({}));this.setState({listOpen:!1})},this.handleClickNone=()=>{this.props.onSelect&&this.props.onSelect((0,jimu_core.J3Z)({})),this.setState({listOpen:!1})},this.getTitle=()=>this.props.jimuLayerViewInfo&&this.props.useMapWidgetIds&&this.props.useMapWidgetIds[0]&&this.props.jimuLayerViewInfo.dataSourceId?(0,jimu_core.Yac)(jimu_core.pjH,{useDataSource:(0,jimu_core.J3Z)({dataSourceId:this.props.jimuLayerViewInfo.dataSourceId,mainDataSourceId:this.props.jimuLayerViewInfo.dataSourceId,rootDataSourceId:this.props.jimuLayerViewInfo.rootDataSourceId})},((ds,info,query)=>null==ds?void 0:ds.getLabel())):this.getNoneString(),this.getContent=()=>{const widgetId=this.props.useMapWidgetIds&&this.props.useMapWidgetIds[0],widgetJson=(0,jimu_core.Vp3)().getState().appStateInBuilder.appConfig.widgets[widgetId];return widgetJson&&widgetJson.useDataSources&&widgetJson.useDataSources[0]?(0,jimu_core.Yac)("div",{className:"w-100 mt-1 mb-2"},(0,jimu_core.Yac)("div",{onClick:()=>{this.handleClickNone()}},(0,jimu_core.Yac)("div",{className:"layerviewselector-ds-item pl-2 pr-2"},this.getNoneString())),(0,jimu_core.Yac)("div",{className:"w-100 mt-1 mb-1"},(0,jimu_core.Yac)("div",{className:"w-100 border border-bottom-0 border-right-0 border-left-0"})),(0,jimu_core.Yac)("div",{className:"ds-selector"},(0,jimu_core.Yac)(jimu_core.P0p,{useDataSources:widgetJson.useDataSources},((dss,infos)=>{const fromRootDsIds=(0,jimu_core.J3Z)(Object.keys(dss)),selectedDsIds=[];return this.props.jimuLayerViewInfo&&this.props.jimuLayerViewInfo.dataSourceId&&selectedDsIds.push(this.props.jimuLayerViewInfo.dataSourceId),(0,jimu_core.Yac)(DsListForSelector,{fromRootDsIds,onSelect:selectedDsJson=>{this.handleChooseLayer(selectedDsJson)},selectedDsIds:(0,jimu_core.J3Z)(selectedDsIds)})})))):this.getEmptyContent()},this.getNoneString=()=>this.props.intl.formatMessage({id:"none",defaultMessage:"None"}),this.getEmptyContent=()=>(0,jimu_core.Yac)("div",{className:"w-100 mt-1 mb-2"},(0,jimu_core.Yac)("div",{className:"layerviewselector-ds-item pl-2 pr-2",onClick:()=>{this.handleClickNone()}},this.getNoneString())),this.state={listOpen:!1,width:0}}render(){return(0,jimu_core.Yac)("div",{ref:this.selectorConRef,className:(0,jimu_core.xWm)("w-100",{[this.props.className]:!!this.props.className})},(0,jimu_core.Yac)(jimu_ui.Dropdown,{size:"sm",toggle:evt=>{this.toggleList(evt)},isOpen:this.state.listOpen,className:"w-100"},(0,jimu_core.Yac)(jimu_ui.DropdownButton,{size:"sm",type:"tertiary",className:(0,jimu_core.xWm)("w-100 d-flex flex-column align-items-center toollist-item","justify-content-between toollist-item-click layerviewselector-input")},(0,jimu_core.Yac)("div",{className:"w-100 d-flex justify-content-between align-items-center"},(0,jimu_core.Yac)("div",{className:"layerviewselector-input-text ml-2"},this.getTitle()))),(0,jimu_core.Yac)(jimu_ui.DropdownMenu,{className:(0,jimu_core.xWm)("ml-0 mr-0 mb-0 mt-1 p-0",{[this.props.className]:!!this.props.className}),css:STYLE},(0,jimu_core.Yac)("div",{className:"w-100 h-100 layerviewselector-bg"},(0,jimu_core.Yac)("div",{style:{width:`${this.state.width}px`}},this.getContent())))),(0,jimu_core.Yac)(jimu_core.cQZ,{targetRef:this.selectorConRef,handleWidth:!0,onResize:this.onResize}))}}const jimu_layer_view_selector_deprecated_JimuLayerViewSelectorDeprecated=(0,jimu_core.j4T)((0,jimu_theme.Xy)(_JimuLayerViewSelectorDeprecated,"JimuLayerViewSelectorDeprecated"));try{jimu_layer_view_selector_deprecated_JimuLayerViewSelectorDeprecated.displayName="JimuLayerViewSelectorDeprecated",jimu_layer_view_selector_deprecated_JimuLayerViewSelectorDeprecated.__docgenInfo={description:"",displayName:"JimuLayerViewSelectorDeprecated",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/jimu-layer-view-selector-deprecated/index.tsx#JimuLayerViewSelectorDeprecated"]={docgenInfo:jimu_layer_view_selector_deprecated_JimuLayerViewSelectorDeprecated.__docgenInfo,name:"JimuLayerViewSelectorDeprecated",path:"../jimu-ui/advanced/lib/setting-components/components/jimu-layer-view-selector-deprecated/index.tsx#JimuLayerViewSelectorDeprecated"})}catch(__react_docgen_typescript_loader_error){}var search=__webpack_require__("../jimu-icons/outlined/editor/search.tsx"),list_tree=__webpack_require__("../jimu-ui/basic/list-tree.tsx"),jimu_arcgis=__webpack_require__("../jimu-arcgis/index.tsx"),select_option=__webpack_require__("../jimu-icons/outlined/editor/select-option.tsx"),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};const sortTreeItem=(item,jimuLayerViews)=>item.itemChildren&&0!==item.itemChildren.length?(item.itemChildren=item.itemChildren.sort(((a,b)=>jimuLayerViews[a.itemKey].index-jimuLayerViews[b.itemKey].index)),item.itemChildren.forEach((child=>sortTreeItem(child,jimuLayerViews))),item):item,filterTreeItem=(item,filterKey)=>{if(!item.itemChildren||0===item.itemChildren.length)return item.itemStateTitle.toLowerCase().includes(filterKey.toLowerCase())?item:null;const filteredChildren=item.itemChildren.map((child=>filterTreeItem(child,filterKey))).filter(Boolean);return filteredChildren.length>0&&(item.itemStateExpanded=!0),0===filteredChildren.length?item.itemStateTitle.toLowerCase().includes(filterKey.toLowerCase())?item:null:(item.itemChildren=filteredChildren,item)},selector_JimuLayerViewSelectorComponent=props=>{const{jimuMapViewId,hideLayers,disableLayers,isMultiSelection=!1,selectedValues,isShowTables=!1}=props,translate=jimu_core.JLE.useTranslation(jimu_ui.defaultMessages),{useState,useEffect,useMemo,useRef}=jimu_core.q_G,[searchedText,setSearchedText]=useState(""),[displaySearch,setDisplaySearch]=useState(!1),[rootItemJson,setRootItemJson]=useState(null),[jimuLayerViews,setJimuLayerViews]=useState(null),[jimuTables,setJimuTables]=useState(null),[isLoading,setIsLoading]=useState(!0),[batchOptionOpen,setBatchOptionOpen]=useState(!1),searchInputRef=useRef(null);useEffect((()=>{setIsLoading(!0),(jimuMapViewId=>__awaiter(void 0,void 0,void 0,(function*(){const jimuMapView=jimu_arcgis.Rv.getInstance().getJimuMapViewById(jimuMapViewId);return yield jimuMapView.whenAllJimuLayerViewLoaded()})))(jimuMapViewId).then((jimuLayerViews=>{setIsLoading(!1),setJimuLayerViews(jimuLayerViews)})),isShowTables&&(jimuMapViewId=>__awaiter(void 0,void 0,void 0,(function*(){const jimuMapView=jimu_arcgis.Rv.getInstance().getJimuMapViewById(jimuMapViewId);return yield jimuMapView.whenJimuMapViewLoaded(),jimuMapView.jimuTables})))(jimuMapViewId).then((jimuTables=>{setJimuTables(jimuTables)}))}),[isShowTables,jimuMapViewId]);const[expandedIds,setExpandedIds]=useState([]);useEffect((()=>{if(!jimuLayerViews)return;const initTree=((jimuLayerViews,disableLayers,hideLayers,selectedValues,expandedIds,isShowTables,jimuTables)=>{const treeJson={itemKey:"root item",itemStateTitle:"root item",itemChildren:[]},treeItemByKey={};for(const key of Object.keys(jimuLayerViews)){const isDisabled=!!disableLayers&&disableLayers(jimuLayerViews[key],jimuLayerViews),isSelected=(null==selectedValues?void 0:selectedValues.length)>0&&selectedValues.includes(key);treeItemByKey[key]={itemKey:key,itemStateTitle:jimuLayerViews[key].layer.title,itemChildren:[],isItemSelectable:!isDisabled,itemStateChecked:!isDisabled&&isSelected,itemStateExpanded:expandedIds.includes(key)}}for(const[key,val]of Object.entries(jimuLayerViews)){const{parentJimuLayerViewId:pId}=val;if(!jimuLayerViews[key].fromRuntime){const treeItem=treeItemByKey[key];hideLayers&&hideLayers(jimuLayerViews[key],jimuLayerViews)||(null===pId?treeJson.itemChildren.push(treeItem):treeItemByKey[pId].itemChildren.push(treeItem))}}const sortedTreeJson=sortTreeItem(treeJson,jimuLayerViews);if(isShowTables){const tableItem={};for(const key of Object.keys(jimuTables)){const isSelected=(null==selectedValues?void 0:selectedValues.length)>0&&selectedValues.includes(key);tableItem[key]={itemKey:key,itemStateTitle:jimuTables[key].title,itemChildren:[],isItemSelectable:!0,itemStateChecked:isSelected,itemStateIcon:{icon:__webpack_require__("../jimu-icons/svg/outlined/data/table.svg")}},sortedTreeJson.itemChildren.push(tableItem[key])}}return sortedTreeJson})(jimuLayerViews,disableLayers,hideLayers,selectedValues,expandedIds,isShowTables,jimuTables);setRootItemJson(initTree)}),[jimuLayerViews,disableLayers,hideLayers,selectedValues,expandedIds,isShowTables,jimuTables]),useEffect((()=>{displaySearch&&searchInputRef.current&&((0,jimu_core.u02)(searchInputRef.current,!0),searchInputRef.current.select())}),[displaySearch]);const searchedItemJson=useMemo((()=>{if(searchedText){const newRootItemJson=JSON.parse(JSON.stringify(rootItemJson)),filteredItemJson=filterTreeItem(newRootItemJson,searchedText);if(filteredItemJson)return filteredItemJson;return{itemKey:"root item",itemStateTitle:"root item",itemChildren:[]}}return rootItemJson}),[rootItemJson,searchedText]),updateItemState=(json,itemState,itemStatus)=>{const newJson=JSON.parse(JSON.stringify(json)),expandedIds=[],newSelectedItem=[];newJson.itemChildren.forEach((function updateItem(item){const checkStatus=item.itemStateChecked,isSelectable=item.isItemSelectable;"itemStateChecked"===itemState&&itemStatus&&item.isItemSelectable||"toggleAll"===itemState&&!checkStatus&&isSelectable?newSelectedItem.push(item.itemKey):"itemStateExpanded"===itemState&&expandedIds.push(item.itemKey),item.itemChildren&&item.itemChildren.length>0&&item.itemChildren.forEach(updateItem)})),"itemStateChecked"===itemState?itemStatus?props.onChange(newSelectedItem):props.onChange([]):"toggleAll"===itemState?props.onChange(newSelectedItem):"itemStateExpanded"===itemState&&setExpandedIds(itemStatus?expandedIds:[])};return(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)("component-layer-view-selector","w-100 h-100",props.className||"")},(0,jimu_core.Yac)("div",{className:"button-container"},(0,jimu_core.Yac)(jimu_ui.TextInput,{allowClear:!0,size:"sm",type:"text",className:(0,jimu_core.xWm)("search-input",{"d-none":!displaySearch}),value:searchedText,placeholder:translate("SearchLabel"),onChange:evt=>{const value=evt.target.value;setSearchedText(value)},"aria-label":translate("SearchLabel"),ref:searchInputRef}),(0,jimu_core.Yac)(jimu_ui.Label,{className:(0,jimu_core.xWm)("layer-label",{"d-none":displaySearch}),title:translate("layers"),check:!0},translate("layers")),(0,jimu_core.Yac)("div",{className:"right-buttons"},(0,jimu_core.Yac)(jimu_ui.Dropdown,{className:(0,jimu_core.xWm)({"d-none":displaySearch}),isOpen:batchOptionOpen,toggle:()=>{setBatchOptionOpen(!batchOptionOpen)},title:translate("batchOptions"),"aria-label":translate("batchOptions")},(0,jimu_core.Yac)(jimu_ui.DropdownButton,{className:"batch-option-btn",onClick:()=>{setBatchOptionOpen(!batchOptionOpen)},arrow:!1,icon:!0,type:"tertiary",variant:"text",size:"sm"},(0,jimu_core.Yac)(select_option.i,{autoFlip:!0})),(0,jimu_core.Yac)(jimu_ui.DropdownMenu,null,(isMultiSelection?[{value:"selectAll",label:translate("selectAllAvailableLayers")},{value:"unselectAll",label:translate("unselectAllAvailableLayers")},{value:"toggleAll",label:translate("toggleAll")},{value:"divider",divider:!0},{value:"expandAll",label:translate("expandAllLayers")},{value:"collapseAll",label:translate("collapseAllLayers")}]:[{value:"expandAll",label:translate("expandAllLayers")},{value:"collapseAll",label:translate("collapseAllLayers")}]).map((item=>(0,jimu_core.Yac)(jimu_ui.DropdownItem,{divider:item.divider,key:item.value,onClick:()=>{(value=>{switch(value){case"selectAll":updateItemState(rootItemJson,"itemStateChecked",!0);break;case"unselectAll":updateItemState(rootItemJson,"itemStateChecked",!1);break;case"expandAll":updateItemState(rootItemJson,"itemStateExpanded",!0);break;case"collapseAll":updateItemState(rootItemJson,"itemStateExpanded",!1);break;case"toggleAll":updateItemState(rootItemJson,"toggleAll")}})(item.value)},title:item.label},item.label))))),(0,jimu_core.Yac)(jimu_ui.Button,{type:"tertiary",size:"sm",icon:!0,title:translate("SearchLabel"),onClick:()=>{setDisplaySearch(!displaySearch),setSearchedText("")}},(0,jimu_core.Yac)(search.V,{autoFlip:!0})))),(0,jimu_core.Yac)("div",{className:"tree-container"},isLoading?(0,jimu_core.Yac)(jimu_ui.Loading,{className:"w-100 h-100",type:jimu_ui.LoadingType.Secondary}):(0,jimu_core.Yac)(list_tree.PH,{className:"w-100",collapseStyle:list_tree.Lw.Arrow,dndEnabled:!1,onUpdateItem:(actionData,refComponent)=>{var _a,_b;if(actionData.updateType===list_tree.M5.HandleExpandItem){const layerViewId=null===(_a=actionData.currentItemJson)||void 0===_a?void 0:_a.itemKey,isExpanded=null===(_b=actionData.changeItemJson)||void 0===_b?void 0:_b.itemStateExpanded;layerViewId&&setExpandedIds((oldExpandedIds=>isExpanded?[...oldExpandedIds,layerViewId]:oldExpandedIds.filter((id=>id!==layerViewId))))}if(actionData.updateType===list_tree.M5.HandleCheckboxChanged){const[currentItemJson]=actionData.itemJsons;if(isMultiSelection){const newSelectedItem=selectedValues?[...selectedValues]:[];currentItemJson.isItemSelectable&&currentItemJson.itemStateChecked?newSelectedItem.push(currentItemJson.itemKey):currentItemJson.isItemSelectable&&!1===currentItemJson.itemStateChecked&&newSelectedItem.splice(newSelectedItem.indexOf(currentItemJson.itemKey),1),props.onChange(newSelectedItem)}else currentItemJson.isItemSelectable&&currentItemJson.itemStateChecked?props.onChange([currentItemJson.itemKey]):currentItemJson.isItemSelectable&&!1===currentItemJson.itemStateChecked&&props.onChange([])}},rootItemJson:searchedItemJson||rootItemJson,isMultiSelection,checkboxLinkage:!1,size:"sm",treeAlignmentType:list_tree.Q4.Intact,disableDoubleClickTitle:!0,treeStyle:list_tree.eD.Basic,singleLineText:!0,searchedText})))},selector_JimuLayerViewSelector=(0,jimu_theme.Xy)(selector_JimuLayerViewSelectorComponent,"JimuLayerViewSelector");try{selector_JimuLayerViewSelectorComponent.displayName="JimuLayerViewSelectorComponent",selector_JimuLayerViewSelectorComponent.__docgenInfo={description:"A component for selecting layers in a map view. It is usually used in the\nsetting page to get the layer id.\n```\nimport { JimuLayerViewSelector } from 'jimu-ui/advanced/setting-components'\n```",displayName:"JimuLayerViewSelectorComponent",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},jimuMapViewId:{defaultValue:null,description:"The id of a jimuMapView, it is usually returned by selecting from a jimuMapViewSelector component.",name:"jimuMapViewId",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"Callback when selected layers are changed.",name:"onChange",required:!0,type:{name:"(jimuLayerViewIds: string[]) => void"}},selectedValues:{defaultValue:null,description:"Selected values.",name:"selectedValues",required:!1,type:{name:"string[]"}},hideLayers:{defaultValue:{value:"false"},description:"Whether to hide some types of jimuLayerView.\n@param jimuLayerView : the current layer.\n@param jimuLayerViews : all the layers that from a jimuMapView.",name:"hideLayers",required:!1,type:{name:"(jimuLayerView: JimuLayerView, jimuLayerViews: JimuLayerViews) => boolean"}},disableLayers:{defaultValue:{value:"false"},description:"Whether to disable some types of jimuLayerView, which are not selectable.\n@param jimuLayerView : the current layer.\n@param jimuLayerViews : all the layers that from a jimuMapView.",name:"disableLayers",required:!1,type:{name:"(jimuLayerView: JimuLayerView, jimuLayerViews: JimuLayerViews) => boolean"}},isMultiSelection:{defaultValue:{value:"false"},description:"Whether or not allow to select multi items.",name:"isMultiSelection",required:!1,type:{name:"boolean"}},isInDropdown:{defaultValue:{value:"false"},description:"Whether or not `JimuLayerViewSelector` component is used in the `JimuLayerViewSelectorDropdown` component. This property is used for height style calculation.\nThis property is not recommended, if you want to implement a dropdown, you can use `JimuLayerViewSelectorDropdown` component.",name:"isInDropdown",required:!1,type:{name:"boolean"}},isShowTables:{defaultValue:{value:"false"},description:"Whether or not to show the tables.",name:"isShowTables",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/jimu-layer-view-selector/selector/index.tsx#JimuLayerViewSelectorComponent"]={docgenInfo:selector_JimuLayerViewSelectorComponent.__docgenInfo,name:"JimuLayerViewSelectorComponent",path:"../jimu-ui/advanced/lib/setting-components/components/jimu-layer-view-selector/selector/index.tsx#JimuLayerViewSelectorComponent"})}catch(__react_docgen_typescript_loader_error){}try{selector_JimuLayerViewSelector.displayName="JimuLayerViewSelector",selector_JimuLayerViewSelector.__docgenInfo={description:"A component for selecting layers in a map view. It is usually used on the settings page of a widget.\nIt includes a dropdown button to display the selected values and JimuLayerViewSelector component to select the layer.\n```\nimport { JimuLayerViewSelector } from 'jimu-ui/advanced/setting-components'\n```",displayName:"JimuLayerViewSelector",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},jimuMapViewId:{defaultValue:null,description:"The id of a jimuMapView, it is usually returned by selecting from a jimuMapViewSelector component.",name:"jimuMapViewId",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"Callback when selected layers are changed.",name:"onChange",required:!0,type:{name:"(jimuLayerViewIds: string[]) => void"}},selectedValues:{defaultValue:null,description:"Selected values.",name:"selectedValues",required:!1,type:{name:"string[]"}},hideLayers:{defaultValue:{value:"false"},description:"Whether to hide some types of jimuLayerView.\n@param jimuLayerView : the current layer.\n@param jimuLayerViews : all the layers that from a jimuMapView.",name:"hideLayers",required:!1,type:{name:"(jimuLayerView: JimuLayerView, jimuLayerViews: JimuLayerViews) => boolean"}},disableLayers:{defaultValue:{value:"false"},description:"Whether to disable some types of jimuLayerView, which are not selectable.\n@param jimuLayerView : the current layer.\n@param jimuLayerViews : all the layers that from a jimuMapView.",name:"disableLayers",required:!1,type:{name:"(jimuLayerView: JimuLayerView, jimuLayerViews: JimuLayerViews) => boolean"}},isMultiSelection:{defaultValue:{value:"false"},description:"Whether or not allow to select multi items.",name:"isMultiSelection",required:!1,type:{name:"boolean"}},isInDropdown:{defaultValue:{value:"false"},description:"Whether or not `JimuLayerViewSelector` component is used in the `JimuLayerViewSelectorDropdown` component. This property is used for height style calculation.\nThis property is not recommended, if you want to implement a dropdown, you can use `JimuLayerViewSelectorDropdown` component.",name:"isInDropdown",required:!1,type:{name:"boolean"}},isShowTables:{defaultValue:{value:"false"},description:"Whether or not to show the tables.",name:"isShowTables",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/jimu-layer-view-selector/selector/index.tsx#JimuLayerViewSelector"]={docgenInfo:selector_JimuLayerViewSelector.__docgenInfo,name:"JimuLayerViewSelector",path:"../jimu-ui/advanced/lib/setting-components/components/jimu-layer-view-selector/selector/index.tsx#JimuLayerViewSelector"})}catch(__react_docgen_typescript_loader_error){}const dropdown_JimuLayerViewSelectorDropdownComponent=props=>{const translate=jimu_core.JLE.useTranslation(jimu_ui.defaultMessages),{useRef,useState}=jimu_core.q_G,buttonRef=useRef(null),[isOpen,setIsOpen]=useState(!1);return(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)("component-layer-view-selector-dropdown","w-100",props.className||"")},(0,jimu_core.Yac)(jimu_ui.Dropdown,{className:"w-100",direction:"down",toggle:()=>{setIsOpen(!isOpen)},isOpen,autoWidth:!0},(0,jimu_core.Yac)(jimu_ui.DropdownButton,{ref:node=>{buttonRef.current=node}},(()=>{var _a;const{selectedValues,isMultiSelection,jimuMapViewId}=props,number=(null==selectedValues?void 0:selectedValues.length)||0;if(0===number)return translate("numSelected",{number});if(isMultiSelection)return translate("numSelected",{number});{const jimuMapView=jimu_arcgis.Rv.getInstance().getJimuMapViewById(jimuMapViewId);return null===(_a=null==jimuMapView?void 0:jimuMapView.jimuLayerViews[selectedValues[0]])||void 0===_a?void 0:_a.layer.title}})()),(0,jimu_core.Yac)(jimu_ui.DropdownMenu,{className:"shadow-3",css:jimu_core.AHW`
      ${buttonRef?`\n          width: ${jimu_core.PLL.rem(1.5*(null===(_a=buttonRef.current)||void 0===_a?void 0:_a.clientWidth))} !important;\n        `:""}
      padding: 16px;
    `,alignment:"end"},(0,jimu_core.Yac)(selector_JimuLayerViewSelector,Object.assign({},props,{isInDropdown:!0})))));var _a},dropdown_JimuLayerViewSelectorDropdown=(0,jimu_theme.Xy)(dropdown_JimuLayerViewSelectorDropdownComponent,"JimuLayerViewSelectorDropdown");try{dropdown_JimuLayerViewSelectorDropdownComponent.displayName="JimuLayerViewSelectorDropdownComponent",dropdown_JimuLayerViewSelectorDropdownComponent.__docgenInfo={description:"A component for selecting layers in a map view. It is usually used on the settings page of a widget.\nIt includes a dropdown button to display the selected values and JimuLayerViewSelector component to select the layer.\n```\nimport { JimuLayerViewSelectorDropdown } from 'jimu-ui/advanced/setting-components'\n```",displayName:"JimuLayerViewSelectorDropdownComponent",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"Callback when selected layers are changed.",name:"onChange",required:!0,type:{name:"(jimuLayerViewIds: string[]) => void"}},selectedValues:{defaultValue:null,description:"Selected values.",name:"selectedValues",required:!1,type:{name:"string[]"}},isMultiSelection:{defaultValue:{value:"false"},description:"Whether or not allow to select multi items.",name:"isMultiSelection",required:!1,type:{name:"boolean"}},jimuMapViewId:{defaultValue:null,description:"The id of a jimuMapView, it is usually returned by selecting from a jimuMapViewSelector component.",name:"jimuMapViewId",required:!0,type:{name:"string"}},hideLayers:{defaultValue:{value:"false"},description:"Whether to hide some types of jimuLayerView.\n@param jimuLayerView : the current layer.\n@param jimuLayerViews : all the layers that from a jimuMapView.",name:"hideLayers",required:!1,type:{name:"(jimuLayerView: JimuLayerView, jimuLayerViews: JimuLayerViews) => boolean"}},disableLayers:{defaultValue:{value:"false"},description:"Whether to disable some types of jimuLayerView, which are not selectable.\n@param jimuLayerView : the current layer.\n@param jimuLayerViews : all the layers that from a jimuMapView.",name:"disableLayers",required:!1,type:{name:"(jimuLayerView: JimuLayerView, jimuLayerViews: JimuLayerViews) => boolean"}},isShowTables:{defaultValue:{value:"false"},description:"Whether or not to show the tables.",name:"isShowTables",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/jimu-layer-view-selector/dropdown/index.tsx#JimuLayerViewSelectorDropdownComponent"]={docgenInfo:dropdown_JimuLayerViewSelectorDropdownComponent.__docgenInfo,name:"JimuLayerViewSelectorDropdownComponent",path:"../jimu-ui/advanced/lib/setting-components/components/jimu-layer-view-selector/dropdown/index.tsx#JimuLayerViewSelectorDropdownComponent"})}catch(__react_docgen_typescript_loader_error){}try{dropdown_JimuLayerViewSelectorDropdown.displayName="JimuLayerViewSelectorDropdown",dropdown_JimuLayerViewSelectorDropdown.__docgenInfo={description:"A component for selecting layers in a map view. It is usually used on the settings page of a widget.\nIt includes a dropdown button to display the selected values and JimuLayerViewSelector component to select the layer.\n```\nimport { JimuLayerViewSelectorDropdown } from 'jimu-ui/advanced/setting-components'\n```",displayName:"JimuLayerViewSelectorDropdown",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"Callback when selected layers are changed.",name:"onChange",required:!0,type:{name:"(jimuLayerViewIds: string[]) => void"}},selectedValues:{defaultValue:null,description:"Selected values.",name:"selectedValues",required:!1,type:{name:"string[]"}},isMultiSelection:{defaultValue:{value:"false"},description:"Whether or not allow to select multi items.",name:"isMultiSelection",required:!1,type:{name:"boolean"}},jimuMapViewId:{defaultValue:null,description:"The id of a jimuMapView, it is usually returned by selecting from a jimuMapViewSelector component.",name:"jimuMapViewId",required:!0,type:{name:"string"}},hideLayers:{defaultValue:{value:"false"},description:"Whether to hide some types of jimuLayerView.\n@param jimuLayerView : the current layer.\n@param jimuLayerViews : all the layers that from a jimuMapView.",name:"hideLayers",required:!1,type:{name:"(jimuLayerView: JimuLayerView, jimuLayerViews: JimuLayerViews) => boolean"}},disableLayers:{defaultValue:{value:"false"},description:"Whether to disable some types of jimuLayerView, which are not selectable.\n@param jimuLayerView : the current layer.\n@param jimuLayerViews : all the layers that from a jimuMapView.",name:"disableLayers",required:!1,type:{name:"(jimuLayerView: JimuLayerView, jimuLayerViews: JimuLayerViews) => boolean"}},isShowTables:{defaultValue:{value:"false"},description:"Whether or not to show the tables.",name:"isShowTables",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/jimu-layer-view-selector/dropdown/index.tsx#JimuLayerViewSelectorDropdown"]={docgenInfo:dropdown_JimuLayerViewSelectorDropdown.__docgenInfo,name:"JimuLayerViewSelectorDropdown",path:"../jimu-ui/advanced/lib/setting-components/components/jimu-layer-view-selector/dropdown/index.tsx#JimuLayerViewSelectorDropdown"})}catch(__react_docgen_typescript_loader_error){}const getDataSourceLabel=dataSourceId=>{var _a,_b,_c,_d,_e,_f;if(!dataSourceId)return"";const appConfig=(null===(_a=null===window||void 0===window?void 0:window.jimuConfig)||void 0===_a?void 0:_a.isBuilder)?null===(_c=null===(_b=(0,jimu_core.Vp3)().getState())||void 0===_b?void 0:_b.appStateInBuilder)||void 0===_c?void 0:_c.appConfig:null===(_d=(0,jimu_core.Vp3)().getState())||void 0===_d?void 0:_d.appConfig;return(null===(_e=appConfig.dataSources[dataSourceId])||void 0===_e?void 0:_e.label)||(null===(_f=appConfig.dataSources[dataSourceId])||void 0===_f?void 0:_f.sourceLabel)},jimu_map_view_selector_JimuMapViewSelectorComponent=props=>{const translate=jimu_core.JLE.useTranslation(jimu_ui.defaultMessages),noneMapView={id:"none",label:translate("none")},appConfig=jimu_core.E_S.useSelector((state=>{var _a,_b;return(null===(_a=null===window||void 0===window?void 0:window.jimuConfig)||void 0===_a?void 0:_a.isBuilder)?null===(_b=state.appStateInBuilder)||void 0===_b?void 0:_b.appConfig:state.appConfig})),browserSizeMode=jimu_core.E_S.useSelector((state=>{var _a;return null===(_a=state.appStateInBuilder)||void 0===_a?void 0:_a.browserSizeMode})),currentPageId=jimu_core.E_S.useSelector((state=>{var _a;return null===(_a=state.appStateInBuilder)||void 0===_a?void 0:_a.appRuntimeInfo.currentPageId})),currentDialogId=jimu_core.E_S.useSelector((state=>{var _a;return null===(_a=state.appStateInBuilder)||void 0===_a?void 0:_a.appRuntimeInfo.currentDialogId})),currentContainerType=currentDialogId?jimu_core.Kk5.Dialog:jimu_core.Kk5.Page,currentId=currentDialogId||currentPageId,mapViewJsons=jimu_core.q_G.useMemo((()=>{const selectLists=layout_runtime.searchUtils.getMapWidgets(appConfig,browserSizeMode,currentContainerType,currentId);return(()=>{const OptionList=[],currentMapExist=selectLists[0].maps.length>0;let currentPageDivider=!1;if(currentMapExist){sortByLabel(selectLists[0].maps,appConfig,LabelType.Widget).forEach(((mapWidget,index)=>{if(appConfig.widgets[mapWidget].useDataSources&&appConfig.widgets[mapWidget].useDataSources.length>0){currentPageDivider||(OptionList.push(divider),currentPageDivider=!0);const currentHeader={header:!0,label:`${currentContainerType===jimu_core.Kk5.Dialog?translate("currentWindow"):translate("currentPage")} | ${appConfig.widgets[mapWidget].label}`};OptionList.push(currentHeader),appConfig.widgets[mapWidget].useDataSources.forEach((ds=>{const option={id:`${mapWidget}-${ds.dataSourceId}`,label:getDataSourceLabel(ds.dataSourceId),headerLabel:`${currentContainerType===jimu_core.Kk5.Dialog?translate("currentWindow"):translate("currentPage")} ${appConfig.widgets[mapWidget].label}`};OptionList.push(option)}))}}))}const breakList=getBreakList(1,selectLists);let pageDivider=!1;const sortedPageList=sortByLabel(breakList.pageList,appConfig,LabelType.Page);for(let i=0;i<breakList.pageList.length;i++){const sortedMapList=sortByLabel(sortedPageList[i].maps,appConfig,LabelType.Widget);for(let j=0;j<sortedMapList.length;j++)if(appConfig.widgets[sortedMapList[j]].useDataSources&&appConfig.widgets[sortedMapList[j]].useDataSources.length>0){pageDivider||(OptionList.push(divider),pageDivider=!0);const otherHeader={header:!0,label:`${appConfig.pages[sortedPageList[i].id].label} | ${appConfig.widgets[sortedMapList[j]].label}`};OptionList.push(otherHeader),appConfig.widgets[sortedMapList[j]].useDataSources.forEach((ds=>{const otherOption={id:`${sortedMapList[j]}-${ds.dataSourceId}`,label:getDataSourceLabel(ds.dataSourceId),headerLabel:`${appConfig.pages[sortedPageList[i].id].label} ${appConfig.widgets[sortedMapList[j]].label}`};OptionList.push(otherOption)}))}}if(breakList.dialogList){let dialogDivider=!1;const sortedDialogList=sortByLabel(breakList.dialogList,appConfig,LabelType.Dialog);for(let i=0;i<breakList.dialogList.length;i++){const sortedMapList=sortByLabel(sortedDialogList[i].maps,appConfig,LabelType.Widget);for(let j=0;j<sortedMapList.length;j++)if(appConfig.widgets[sortedMapList[j]].useDataSources&&appConfig.widgets[sortedMapList[j]].useDataSources.length>0){dialogDivider||(OptionList.push(divider),dialogDivider=!0);const otherHeader={header:!0,label:`${appConfig.dialogs[sortedDialogList[i].id].label} | ${appConfig.widgets[sortedMapList[j]].label}`};OptionList.push(otherHeader),appConfig.widgets[sortedMapList[j]].useDataSources.forEach((ds=>{const otherOption={id:`${sortedMapList[j]}-${ds.dataSourceId}`,label:getDataSourceLabel(ds.dataSourceId),headerLabel:`${appConfig.dialogs[sortedDialogList[i].id].label} ${appConfig.widgets[sortedMapList[j]].label}`};OptionList.push(otherOption)}))}}}return OptionList})()}),[appConfig,browserSizeMode,currentContainerType,currentId,translate]),selectedMapView=(()=>{var _a;if(!props.useMapViewIds||0===(null===(_a=props.useMapViewIds)||void 0===_a?void 0:_a.length))return null;const selectedMapViewId=props.useMapViewIds[0];return mapViewJsons.find((w=>w.id===selectedMapViewId))||null})();return jimu_core.q_G.createElement("div",{className:"w-100"},jimu_core.q_G.createElement("div",{className:"component-map-view-selector"},jimu_core.q_G.createElement(jimu_ui.Select,{size:"sm",onChange:e=>{var _a;const mapViewId=e.target.value,useMapViewIds=mapViewId===noneMapView.id?[]:[mapViewId];null===(_a=props.onChange)||void 0===_a||_a.call(props,useMapViewIds)},value:selectedMapView?selectedMapView.id:noneMapView.id,"aria-label":props["aria-label"]},[noneMapView].concat(mapViewJsons).map(((option,index)=>{var _a;return(dataSourceId=>{var _a,_b,_c;return(null===(_c=null===(_b=null===(_a=(0,jimu_core.Vp3)().getState().appStateInBuilder)||void 0===_a?void 0:_a.dataSourcesInfo)||void 0===_b?void 0:_b[dataSourceId])||void 0===_c?void 0:_c.instanceStatus)===jimu_core.e3_.CreateError})(null===(_a=option.id)||void 0===_a?void 0:_a.split("-")[1])?jimu_core.q_G.createElement(jimu_ui.Option,{disabled:!0,className:"d-flex align-items-center justify-content-start"},jimu_core.q_G.createElement("span",null,option.label),jimu_core.q_G.createElement(jimu_ui.Alert,{buttonType:"tertiary",form:"tooltip",size:"small",type:"error",text:translate("dataSourceCreateError"),style:{marginLeft:"auto"}})):jimu_core.q_G.createElement(jimu_ui.Option,{header:option.header,divider:option.divider,value:option.id,key:index},!option.header&&jimu_core.q_G.createElement("div",{className:"sr-only"},option.headerLabel),option.label)})))))},jimu_map_view_selector_JimuMapViewSelector=jimu_map_view_selector_JimuMapViewSelectorComponent;try{jimu_map_view_selector_JimuMapViewSelectorComponent.displayName="JimuMapViewSelectorComponent",jimu_map_view_selector_JimuMapViewSelectorComponent.__docgenInfo={description:"A component for selecting map views in a map. It is usually used on the settings page of a widget,\nand works with JimuLayerViewSelector.\n```\nimport { JimuMapViewSelector } from 'jimu-ui/advanced/setting-components'\n```",displayName:"JimuMapViewSelectorComponent",props:{useMapViewIds:{defaultValue:null,description:"The array of map view IDs. It is returned from the onChange function.",name:"useMapViewIds",required:!1,type:{name:"string[]"}},onChange:{defaultValue:null,description:"The function will be called when a map view item listed in this component is selected.",name:"onChange",required:!1,type:{name:"(useMapViewId: string[]) => void"}},"aria-label":{defaultValue:null,description:"To provide a label for the selector for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/jimu-map-view-selector/index.tsx#JimuMapViewSelectorComponent"]={docgenInfo:jimu_map_view_selector_JimuMapViewSelectorComponent.__docgenInfo,name:"JimuMapViewSelectorComponent",path:"../jimu-ui/advanced/lib/setting-components/components/jimu-map-view-selector/index.tsx#JimuMapViewSelectorComponent"})}catch(__react_docgen_typescript_loader_error){}try{jimu_map_view_selector_JimuMapViewSelector.displayName="JimuMapViewSelector",jimu_map_view_selector_JimuMapViewSelector.__docgenInfo={description:"A component for selecting map views in a map. It is usually used on the settings page of a widget,\nand works with JimuLayerViewSelector.\n```\nimport { JimuMapViewSelector } from 'jimu-ui/advanced/setting-components'\n```",displayName:"JimuMapViewSelector",props:{useMapViewIds:{defaultValue:null,description:"The array of map view IDs. It is returned from the onChange function.",name:"useMapViewIds",required:!1,type:{name:"string[]"}},onChange:{defaultValue:null,description:"The function will be called when a map view item listed in this component is selected.",name:"onChange",required:!1,type:{name:"(useMapViewId: string[]) => void"}},"aria-label":{defaultValue:null,description:"To provide a label for the selector for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/jimu-map-view-selector/index.tsx#JimuMapViewSelector"]={docgenInfo:jimu_map_view_selector_JimuMapViewSelector.__docgenInfo,name:"JimuMapViewSelector",path:"../jimu-ui/advanced/lib/setting-components/components/jimu-map-view-selector/index.tsx#JimuMapViewSelector"})}catch(__react_docgen_typescript_loader_error){}class _StylePicker extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.onStyleClick=value=>{this.state.selectedValue!==value&&(this.setState({selectedValue:value}),this.props.onChange&&this.props.onChange(value))},this.state={selectedValue:this.props.value}}componentDidUpdate(prevProps,prevState){prevProps.value!==this.props.value&&this.setState({selectedValue:this.props.value})}render(){const styles=this.props.styles;return jimu_core.q_G.createElement("div",{className:(0,jimu_core.xWm)("widget-setting--stylepicker w-100",{small:"small"===this.props.size})},Object.keys(styles).map(((uId,index)=>jimu_core.q_G.createElement("div",{key:uId,role:"button",className:(0,jimu_core.xWm)("widget-setting--stylepicker-item",{active:uId===this.state.selectedValue,"full-width":"full"===styles[uId].size}),style:{backgroundImage:`url(${styles[uId].thumbnail})`},onClick:()=>{this.onStyleClick(uId)}}))))}}const style_picker_StylePicker=(0,jimu_theme.Xy)(_StylePicker,"StylePicker");try{_StylePicker.displayName="_StylePicker",_StylePicker.__docgenInfo={description:"",displayName:"_StylePicker",props:{styles:{defaultValue:null,description:"",name:"styles",required:!0,type:{name:"{ [key: string]: any; }"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"any"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"small"'},{value:'"normal"'}]}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(value: any) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/style-picker/index.tsx#_StylePicker"]={docgenInfo:_StylePicker.__docgenInfo,name:"_StylePicker",path:"../jimu-ui/advanced/lib/setting-components/components/style-picker/index.tsx#_StylePicker"})}catch(__react_docgen_typescript_loader_error){}try{style_picker_StylePicker.displayName="StylePicker",style_picker_StylePicker.__docgenInfo={description:"",displayName:"StylePicker",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/style-picker/index.tsx#StylePicker"]={docgenInfo:style_picker_StylePicker.__docgenInfo,name:"StylePicker",path:"../jimu-ui/advanced/lib/setting-components/components/style-picker/index.tsx#StylePicker"})}catch(__react_docgen_typescript_loader_error){}var radio_group_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};class _RadioGroup extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.state={value:this.props.value},this.onRadioButtonChange=evt=>{const value=evt.target.value;this.state.value!==value&&(this.setState({value}),this.props.onChange&&this.props.onChange(value))},_RadioGroup.count++,this.inputName=`setting-radiogroup-${_RadioGroup.count}`}render(){const _a=this.props,{options,className}=_a,otherProps=radio_group_rest(_a,["options","className"]);return jimu_core.q_G.createElement(jimu_ui.FormGroup,Object.assign({},otherProps,{onChange:this.onRadioButtonChange,className:`setting--button-group ${className}`}),options.map((option=>jimu_core.q_G.createElement(jimu_ui.Label,{key:option.value},jimu_core.q_G.createElement(jimu_ui.Radio,{value:option.value,name:this.inputName,checked:this.state.value===option.value}),option.content))))}}_RadioGroup.count=0;const radio_group_RadioGroup=(0,jimu_theme.Xy)(_RadioGroup,"RadioGroup");try{_RadioGroup.displayName="_RadioGroup",_RadioGroup.__docgenInfo={description:"",displayName:"_RadioGroup",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"RadioGroupOption[]"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},gutter:{defaultValue:null,description:"",name:"gutter",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(value: string) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/radio-group/index.tsx#_RadioGroup"]={docgenInfo:_RadioGroup.__docgenInfo,name:"_RadioGroup",path:"../jimu-ui/advanced/lib/setting-components/components/radio-group/index.tsx#_RadioGroup"})}catch(__react_docgen_typescript_loader_error){}try{radio_group_RadioGroup.displayName="RadioGroup",radio_group_RadioGroup.__docgenInfo={description:"",displayName:"RadioGroup",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/radio-group/index.tsx#RadioGroup"]={docgenInfo:radio_group_RadioGroup.__docgenInfo,name:"RadioGroup",path:"../jimu-ui/advanced/lib/setting-components/components/radio-group/index.tsx#RadioGroup"})}catch(__react_docgen_typescript_loader_error){}const collapse_SettingCollapse=jimu_ui.CollapsablePanel,collapse_UnControlledSettingCollapse=jimu_ui.CollapsablePanel,collapse_CollapsableToggle=jimu_ui.CollapsableToggle,collapse_CollapsableRadio=jimu_ui.CollapsableRadio,collapse_CollapsableCheckbox=jimu_ui.CollapsableCheckbox;class LinkSelectorList extends jimu_core.q_G.PureComponent{constructor(){super(...arguments),this.itemOnClick=newSelectItem=>{this.props.onClick(newSelectItem),this.setState({selectedItemName:newSelectItem.name})}}getListContent(){return this.props.datas.map(((listItem,idx)=>jimu_core.q_G.createElement("div",{onClick:()=>{this.itemOnClick(listItem)},key:idx,className:(0,jimu_core.xWm)("link-selector-list-item btn w-100 border text-left border-bottom-0 rounded-0 text-truncate",{"item-selected":this.props.linkParam.value===listItem.id})},listItem.name)))}render(){const selected=this.props.datas.find((d=>this.props.linkParam.value===d.id)),selectedItemId=selected&&selected.id;return jimu_core.q_G.createElement("div",{className:"link-selector-list w-100"},jimu_core.q_G.createElement(jimu_ui.Select,{value:selectedItemId||"",className:"w-100",onChange:e=>{this.itemOnClick(this.props.datas.find((d=>d.id===e.target.value)))},"aria-label":this.props["aria-label"],size:"sm"},this.props.datas.map(((listItem,idx)=>jimu_core.q_G.createElement("option",{key:idx,value:listItem.id},listItem.name)))))}}try{linksettinglist.displayName="linksettinglist",linksettinglist.__docgenInfo={description:"",displayName:"linksettinglist",props:{datas:{defaultValue:null,description:"",name:"datas",required:!0,type:{name:"any[]"}},linkParam:{defaultValue:null,description:"",name:"linkParam",required:!0,type:{name:"IMLinkParam"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"any"}},"aria-label":{defaultValue:null,description:"",name:"aria-label",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-content/components/link-setting-list.tsx#linksettinglist"]={docgenInfo:linksettinglist.__docgenInfo,name:"linksettinglist",path:"../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-content/components/link-setting-list.tsx#linksettinglist"})}catch(__react_docgen_typescript_loader_error){}function getSectionIdsFromPage(pageId,appConfig){var _a,_b;const pageJson=null===(_a=null==appConfig?void 0:appConfig.pages)||void 0===_a?void 0:_a[pageId];if((null==pageJson?void 0:pageJson.type)===jimu_core.g6_.Normal){const bodySections=layout_runtime.searchUtils.getContentsInContainer(appConfig,{type:jimu_core.Kk5.Page,id:pageId},jimu_core.K6q.Section,layout_runtime.utils.getCurrentSizeMode());let headerSections=[],footerSections=[];return pageJson.header&&(headerSections=layout_runtime.searchUtils.getContentsInContainer(appConfig,{type:jimu_core.Kk5.Header,id:"header"},jimu_core.K6q.Section,layout_runtime.utils.getCurrentSizeMode())),pageJson.footer&&(footerSections=layout_runtime.searchUtils.getContentsInContainer(appConfig,{type:jimu_core.Kk5.Footer,id:"footer"},jimu_core.K6q.Section,layout_runtime.utils.getCurrentSizeMode())),null===(_b=headerSections.concat(bodySections,footerSections))||void 0===_b?void 0:_b.sort(((sId1,sId2)=>{var _a,_b,_c,_d,_e;return null===(_c=null===(_b=null===(_a=null==appConfig?void 0:appConfig.sections)||void 0===_a?void 0:_a[sId1])||void 0===_b?void 0:_b.label)||void 0===_c?void 0:_c.localeCompare(null===(_e=null===(_d=null==appConfig?void 0:appConfig.sections)||void 0===_d?void 0:_d[sId2])||void 0===_e?void 0:_e.label,null===window||void 0===window?void 0:window.locale,{numeric:!0,sensitivity:"base"})}))}return[]}function getSectionIdsFromDialog(dialogId,appConfig){var _a;return(null===(_a=null==appConfig?void 0:appConfig.dialogs)||void 0===_a?void 0:_a[dialogId])?layout_runtime.searchUtils.getContentsInContainer(appConfig,{type:jimu_core.Kk5.Dialog,id:dialogId},jimu_core.K6q.Section,layout_runtime.utils.getCurrentSizeMode()):[]}function getAllChildViewIds(parentViewId,appConfig){if(!parentViewId)return[];const sectionIds=getSectionIdsFromView(parentViewId,appConfig);if(sectionIds&&sectionIds.length>0){let childViewIds=[],grandChildViewIds=[];return sectionIds.forEach((sectionId=>{childViewIds=childViewIds.concat(getViewInfoFromSection(sectionId,appConfig).map((info=>info.id)))})),childViewIds.length>0&&childViewIds.forEach((vId=>{grandChildViewIds=grandChildViewIds.concat(getAllChildViewIds(vId,appConfig))})),childViewIds.concat(grandChildViewIds)}return[]}function getSectionIdsFromView(viewId,appConfig){return layout_runtime.searchUtils.getContentsInContainer(appConfig,{type:jimu_core.Kk5.View,id:viewId},jimu_core.K6q.Section,layout_runtime.utils.getCurrentSizeMode())||[]}function getViewInfoFromSection(sectionId,appConfig){const tempViews=appConfig.sections[sectionId].views,info=[];for(let i=0;i<tempViews.length;i++)info.push({id:tempViews[i],label:appConfig.views[tempViews[i]].label});return info.sort(((v1,v2)=>{var _a;return null===(_a=v1.label)||void 0===_a?void 0:_a.localeCompare(v2.label,null===window||void 0===window?void 0:window.locale,{numeric:!0,sensitivity:"base"})}))}function getPageData(appConfig,intl){const pages=null==appConfig?void 0:appConfig.pages,currentPage={id:jimu_core.aH5.yw,name:intl.formatMessage({id:"currentPage",defaultMessage:jimu_ui.defaultMessages.currentPage})},pageIds=pages&&Object.keys(pages).filter((pId=>pages[pId].type===jimu_core.g6_.Normal)).sort(((pId1,pId2)=>{var _a;return null===(_a=pages[pId1].label)||void 0===_a?void 0:_a.localeCompare(pages[pId2].label,null===window||void 0===window?void 0:window.locale,{numeric:!0,sensitivity:"base"})}));let data=[currentPage];return pageIds&&(data=data.concat(pageIds.map((pId=>({id:pId,name:pages[pId].label}))))),data}function getDialogData(appConfig){const dialogs=null==appConfig?void 0:appConfig.dialogs,fixedDialogs=dialogs&&Object.values(dialogs).filter((d=>(null==d?void 0:d.mode)===jimu_core.oMf.Fixed))||[],anchoredDialogs=dialogs&&Object.values(dialogs).filter((d=>(null==d?void 0:d.mode)===jimu_core.oMf.Anchored))||[],dialogIds=fixedDialogs.concat(anchoredDialogs).sort(((d1,d2)=>{var _a;return null===(_a=d1.label)||void 0===_a?void 0:_a.localeCompare(d2.label,null===window||void 0===window?void 0:window.locale,{numeric:!0,sensitivity:"base"})})).map((d=>d.id));return dialogIds&&dialogIds.filter((id=>!dialogs[id].isSplash)).map((id=>({id,name:dialogs[id].label})))}function linkToViewOnDialog(linkParams){var _a;return isDialogId(linkParams.linkType===jimu_core.JaG.View?null===(_a=linkParams.value)||void 0===_a?void 0:_a.split(",")[0]:null)}function isDialogId(id){return"string"==typeof id&&id.includes("dialog_")}const supportedURISchemes=["https","mailto","tel","sms","ftp"];class PageLinkContent extends jimu_core.q_G.PureComponent{constructor(){super(...arguments),this.getInitLinkParam=()=>{const pageStructure=this.props.appConfig.pageStructure;if(!pageStructure||pageStructure.length<1)return(0,jimu_core.J3Z)({value:""});if(this.props.originLinkParam.linkType!==jimu_core.JaG.Page){const pageData=getPageData(this.props.appConfig,this.props.intl);return(0,jimu_core.J3Z)({linkType:jimu_core.JaG.Page,value:pageData&&pageData.some((p=>"default"===p.id))?"default":pageData&&pageData[0]&&pageData[0].id,openType:!this.props.openTypes||this.props.openTypes.includes(jimu_core.qZ8.CurrentWindow)?jimu_core.qZ8.CurrentWindow:this.props.openTypes[0]})}return this.props.originLinkParam},this.setLinkParam=newSelectItem=>{let tempLinkParam=this.props.linkParam;tempLinkParam=tempLinkParam.set("value",newSelectItem.id),this.props.onLinkParamChange(tempLinkParam)}}componentDidMount(){const pageLinkParam=this.getInitLinkParam();this.props.onLinkParamChange(pageLinkParam)}render(){const pageData=getPageData(this.props.appConfig,this.props.intl);return jimu_core.q_G.createElement("div",{className:"w-100"},jimu_core.q_G.createElement("div",{className:"mb-3 option-name"},this.props.intl.formatMessage({id:"chooseAPage",defaultMessage:jimu_ui.defaultMessages.chooseAPage})),jimu_core.q_G.createElement("div",null,jimu_core.q_G.createElement(LinkSelectorList,{linkParam:this.props.linkParam,datas:pageData,onClick:this.setLinkParam,"aria-label":this.props.intl.formatMessage({id:"chooseAPage",defaultMessage:jimu_ui.defaultMessages.chooseAPage})})))}}try{pagelinkcontent.displayName="pagelinkcontent",pagelinkcontent.__docgenInfo={description:"",displayName:"pagelinkcontent",props:{linkParam:{defaultValue:null,description:"",name:"linkParam",required:!0,type:{name:"IMLinkParam"}},originLinkParam:{defaultValue:null,description:"",name:"originLinkParam",required:!0,type:{name:"IMLinkParam"}},onLinkParamChange:{defaultValue:null,description:"",name:"onLinkParamChange",required:!0,type:{name:"any"}},appConfig:{defaultValue:null,description:"",name:"appConfig",required:!0,type:{name:"IMAppConfig"}},intl:{defaultValue:null,description:"",name:"intl",required:!0,type:{name:"IntlShape"}},openTypes:{defaultValue:null,description:"",name:"openTypes",required:!0,type:{name:"ImmutableArray<OpenTypes>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-content/components/page-link-content.tsx#pagelinkcontent"]={docgenInfo:pagelinkcontent.__docgenInfo,name:"pagelinkcontent",path:"../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-content/components/page-link-content.tsx#pagelinkcontent"})}catch(__react_docgen_typescript_loader_error){}class DialogLinkContent extends jimu_core.q_G.PureComponent{constructor(){super(...arguments),this.getInitLinkParam=()=>{const dialogs=this.props.appConfig.dialogs;if(!dialogs||Object.keys(dialogs).length<1)return(0,jimu_core.J3Z)({linkType:jimu_core.JaG.Dialog,value:""});if(this.props.originLinkParam.linkType!==jimu_core.JaG.Dialog){const dialogData=getDialogData(this.props.appConfig);return(0,jimu_core.J3Z)({linkType:jimu_core.JaG.Dialog,value:dialogData&&dialogData[0]&&dialogData[0].id})}return this.props.originLinkParam},this.setLinkParam=newSelectItem=>{let tempLinkParam=this.props.linkParam;tempLinkParam=tempLinkParam.set("value",newSelectItem.id),this.props.onLinkParamChange(tempLinkParam)}}componentDidMount(){const linkParam=this.getInitLinkParam();this.props.onLinkParamChange(linkParam)}componentDidUpdate(prevProps){if(prevProps.appConfig!==this.props.appConfig){const linkParam=this.getInitLinkParam();this.props.onLinkParamChange(linkParam)}}render(){const data=getDialogData(this.props.appConfig);return jimu_core.q_G.createElement("div",{className:"w-100"},jimu_core.q_G.createElement("div",{className:"mb-3 option-name"},this.props.intl.formatMessage({id:"chooseADialog",defaultMessage:jimu_ui.defaultMessages.chooseADialog})),jimu_core.q_G.createElement("div",null,data&&data.length>0&&jimu_core.q_G.createElement(LinkSelectorList,{linkParam:this.props.linkParam,datas:data,onClick:this.setLinkParam,"aria-label":this.props.intl.formatMessage({id:"chooseADialog",defaultMessage:jimu_ui.defaultMessages.chooseADialog})})))}}try{dialoglinkcontent.displayName="dialoglinkcontent",dialoglinkcontent.__docgenInfo={description:"",displayName:"dialoglinkcontent",props:{linkParam:{defaultValue:null,description:"",name:"linkParam",required:!0,type:{name:"IMLinkParam"}},originLinkParam:{defaultValue:null,description:"",name:"originLinkParam",required:!0,type:{name:"IMLinkParam"}},onLinkParamChange:{defaultValue:null,description:"",name:"onLinkParamChange",required:!0,type:{name:"any"}},appConfig:{defaultValue:null,description:"",name:"appConfig",required:!0,type:{name:"IMAppConfig"}},intl:{defaultValue:null,description:"",name:"intl",required:!0,type:{name:"IntlShape"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-content/components/dialog-link-content.tsx#dialoglinkcontent"]={docgenInfo:dialoglinkcontent.__docgenInfo,name:"dialoglinkcontent",path:"../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-content/components/dialog-link-content.tsx#dialoglinkcontent"})}catch(__react_docgen_typescript_loader_error){}class BlockLinkContent extends jimu_core.q_G.PureComponent{constructor(){super(...arguments),this.getInitLinkParam=()=>{const blocks=layout_runtime.searchUtils.getBlockAnchorPointsInPage(layout_runtime.utils.getAppConfig(),layout_runtime.utils.getCurrentPageId(),layout_runtime.utils.getCurrentSizeMode());if(!blocks||blocks.length<1)return(0,jimu_core.J3Z)({linkType:jimu_core.JaG.Block,value:""});if(this.props.originLinkParam.linkType!==jimu_core.JaG.Block){const data=this.getBlockData();return(0,jimu_core.J3Z)({linkType:jimu_core.JaG.Block,value:data&&data.some((p=>"default"===p.id))?"default":data&&data[0]&&data[0].id})}return this.props.originLinkParam},this.getBlockData=()=>{var _a;return(null===(_a=layout_runtime.searchUtils.getBlockAnchorPointsInPage(layout_runtime.utils.getAppConfig(),layout_runtime.utils.getCurrentPageId(),layout_runtime.utils.getCurrentSizeMode()))||void 0===_a?void 0:_a.sort(((b1,b2)=>{var _a;return null===(_a=b1.label)||void 0===_a?void 0:_a.localeCompare(b2.label,null===window||void 0===window?void 0:window.locale,{numeric:!0,sensitivity:"base"})}))).map((b=>({id:b.id,name:b.label})))},this.setLinkParam=newSelectItem=>{let tempLinkParam=this.props.linkParam;tempLinkParam=tempLinkParam.set("value",newSelectItem.id),this.props.onLinkParamChange(tempLinkParam)}}componentDidMount(){const linkParam=this.getInitLinkParam();this.props.onLinkParamChange(linkParam)}render(){const data=this.getBlockData();return jimu_core.q_G.createElement("div",{className:"w-100"},jimu_core.q_G.createElement("div",{className:"mb-3 option-name"},this.props.intl.formatMessage({id:"jumpTo",defaultMessage:jimu_ui.defaultMessages.jumpTo})),jimu_core.q_G.createElement("div",null,data&&data.length>0&&jimu_core.q_G.createElement(LinkSelectorList,{linkParam:this.props.linkParam,datas:data,onClick:this.setLinkParam,"aria-label":this.props.intl.formatMessage({id:"jumpTo",defaultMessage:jimu_ui.defaultMessages.jumpTo})})))}}try{blocklinkcontent.displayName="blocklinkcontent",blocklinkcontent.__docgenInfo={description:"",displayName:"blocklinkcontent",props:{linkParam:{defaultValue:null,description:"",name:"linkParam",required:!0,type:{name:"IMLinkParam"}},originLinkParam:{defaultValue:null,description:"",name:"originLinkParam",required:!0,type:{name:"IMLinkParam"}},onLinkParamChange:{defaultValue:null,description:"",name:"onLinkParamChange",required:!0,type:{name:"any"}},intl:{defaultValue:null,description:"",name:"intl",required:!0,type:{name:"IntlShape"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-content/components/block-link-content.tsx#blocklinkcontent"]={docgenInfo:blocklinkcontent.__docgenInfo,name:"blocklinkcontent",path:"../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-content/components/block-link-content.tsx#blocklinkcontent"})}catch(__react_docgen_typescript_loader_error){}class screen_link_content_BlockLinkContent extends jimu_core.q_G.PureComponent{constructor(){super(...arguments),this.screenGroupLabelStyle={marginLeft:"-20px"},this.getInitLinkParam=()=>{const data=this.getScreenData();return!data||data.length<1?(0,jimu_core.J3Z)({linkType:jimu_core.JaG.Screen,value:""}):this.props.originLinkParam.linkType!==jimu_core.JaG.Screen?(0,jimu_core.J3Z)({linkType:jimu_core.JaG.Screen,value:data[0].screens[0].id}):this.props.originLinkParam},this.getScreenData=()=>{var _a;return null===(_a=layout_runtime.searchUtils.getScreenAnchorPointsInPage(layout_runtime.utils.getAppConfig(),layout_runtime.utils.getCurrentPageId(),layout_runtime.utils.getCurrentSizeMode()))||void 0===_a?void 0:_a.sort(((s1,s2)=>{var _a;return null===(_a=s1.label)||void 0===_a?void 0:_a.localeCompare(s2.label,null===window||void 0===window?void 0:window.locale,{numeric:!0,sensitivity:"base"})}))},this.setLinkParam=e=>{let tempLinkParam=this.props.linkParam;tempLinkParam=tempLinkParam.set("value",e.target.value),this.props.onLinkParamChange(tempLinkParam)}}componentDidMount(){const linkParam=this.getInitLinkParam();this.props.onLinkParamChange(linkParam)}render(){var _a;const data=this.getScreenData(),options=[];return data.forEach((g=>{options.push(jimu_core.q_G.createElement("option",{value:g.id,key:g.id,disabled:!0,style:this.screenGroupLabelStyle},g.label)),g.screens.forEach(((s,i)=>options.push(jimu_core.q_G.createElement("option",{value:s.id,key:`${g.id}-${i}`},s.label))))})),jimu_core.q_G.createElement("div",{className:"w-100"},jimu_core.q_G.createElement("div",{className:"mb-3 option-name"},this.props.intl.formatMessage({id:"jumpTo",defaultMessage:jimu_ui.defaultMessages.jumpTo})),jimu_core.q_G.createElement("div",null,data.length>0&&jimu_core.q_G.createElement(jimu_ui.Select,{value:null===(_a=this.props.linkParam)||void 0===_a?void 0:_a.value,className:"w-100",onChange:this.setLinkParam,size:"sm","aria-label":this.props.intl.formatMessage({id:"jumpTo",defaultMessage:jimu_ui.defaultMessages.jumpTo})},options)))}}try{screenlinkcontent.displayName="screenlinkcontent",screenlinkcontent.__docgenInfo={description:"",displayName:"screenlinkcontent",props:{linkParam:{defaultValue:null,description:"",name:"linkParam",required:!0,type:{name:"IMLinkParam"}},originLinkParam:{defaultValue:null,description:"",name:"originLinkParam",required:!0,type:{name:"IMLinkParam"}},onLinkParamChange:{defaultValue:null,description:"",name:"onLinkParamChange",required:!0,type:{name:"any"}},intl:{defaultValue:null,description:"",name:"intl",required:!0,type:{name:"IntlShape"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-content/components/screen-link-content.tsx#screenlinkcontent"]={docgenInfo:screenlinkcontent.__docgenInfo,name:"screenlinkcontent",path:"../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-content/components/screen-link-content.tsx#screenlinkcontent"})}catch(__react_docgen_typescript_loader_error){}var down=__webpack_require__("../jimu-icons/outlined/directional/down.tsx"),up=__webpack_require__("../jimu-icons/outlined/directional/up.tsx");class CollapseTool extends jimu_core.q_G.PureComponent{constructor(){super(...arguments),this.onCollapseClick=e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),this.setState({collapse:!this.state.collapse})}}componentWillMount(){this.setState({collapse:this.props.isOpen})}render(){return jimu_core.q_G.createElement("div",{className:(0,jimu_core.xWm)("w-100",this.props.className)},jimu_core.q_G.createElement("div",{title:this.props.title,style:{overflow:"hidden"},className:"w-100 btn pb-2 pr-2 d-flex justify-content-between"},jimu_core.q_G.createElement("div",null,this.props.title),jimu_core.q_G.createElement(jimu_ui.Button,{type:"tertiary",size:"sm",className:"collapse-btn py-0 jimu-outline-inside pr-0",onClick:this.onCollapseClick,"aria-label":this.props.title,"aria-expanded":this.state.collapse},this.state.collapse?jimu_core.q_G.createElement(down.l,{size:"s"}):jimu_core.q_G.createElement(up.k,{size:"s"}))),jimu_core.q_G.createElement(jimu_ui.Collapse,{isOpen:this.state.collapse,"aria-label":this.props.title},this.props.children))}}try{collapsetool.displayName="collapsetool",collapsetool.__docgenInfo={description:"",displayName:"collapsetool",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-content/components/collapse-tool.tsx#collapsetool"]={docgenInfo:collapsetool.__docgenInfo,name:"collapsetool",path:"../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-content/components/collapse-tool.tsx#collapsetool"})}catch(__react_docgen_typescript_loader_error){}class ViewLinkContent extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.noScroll="Do not scroll",this.getInitLinkParam=()=>{if(this.props.originLinkParam.linkType===jimu_core.JaG.View)return this.props.originLinkParam;{let initLinkParam=(0,jimu_core.J3Z)({linkType:jimu_core.JaG.View,value:""});return isDialogId(this.getDefaultPageOrDialogId())||(initLinkParam=initLinkParam.set("openType",this.getInitOpenType())),initLinkParam}},this.getInitOpenType=()=>!this.props.openTypes||this.props.openTypes.includes(jimu_core.qZ8.CurrentWindow)?jimu_core.qZ8.CurrentWindow:this.props.openTypes[0],this.pageOrDialogChange=e=>{let tempLinkParam=this.props.linkParam;tempLinkParam=tempLinkParam.set("value",e.target.value),tempLinkParam=linkToViewOnDialog(tempLinkParam)?tempLinkParam.without("openType"):tempLinkParam.set("openType",this.getInitOpenType()),this.props.onLinkParamChange(tempLinkParam)},this.viewChange=(viewId,sectionId)=>{let tempViewParamArr=[];tempViewParamArr=Object.assign(tempViewParamArr,this.state.viewLinkParamArr),tempViewParamArr[0]||(tempViewParamArr[0]=this.getDefaultPageOrDialogId());const views=this.props.appConfig.sections[sectionId].views;let toRemoveViewIds=tempViewParamArr.filter((id=>views.some((v=>v===id))&&id!==viewId)),toAddViewIds=[];const index=tempViewParamArr.indexOf(viewId);if(index>-1?toRemoveViewIds=toRemoveViewIds.concat(tempViewParamArr[index]):toAddViewIds=toAddViewIds.concat(viewId),toRemoveViewIds&&toRemoveViewIds.length>0){let childViewIds=[];toRemoveViewIds.forEach((vId=>{childViewIds=childViewIds.concat(getAllChildViewIds(vId,this.props.appConfig))})),toRemoveViewIds=toRemoveViewIds.concat(childViewIds)}tempViewParamArr=tempViewParamArr.filter((id=>!toRemoveViewIds.some((vId=>vId===id)))),tempViewParamArr=tempViewParamArr.concat(toAddViewIds);let tempLinkParam=this.props.linkParam;tempLinkParam=tempLinkParam.set("value",tempViewParamArr.join(",")),this.props.onLinkParamChange(tempLinkParam)},this.viewRemove=viewId=>{let tempViewParamArr=[];tempViewParamArr=Object.assign(tempViewParamArr,this.state.viewLinkParamArr),tempViewParamArr[0]||(tempViewParamArr[0]=this.getDefaultPageOrDialogId());const toRemoveViewIds=getAllChildViewIds(viewId,this.props.appConfig).concat(viewId);tempViewParamArr=tempViewParamArr.slice(0,1).concat(tempViewParamArr.slice(1).filter((id=>!toRemoveViewIds.some((vId=>vId===id)))));let tempLinkParam=this.props.linkParam;tempLinkParam=tempLinkParam.set("value",tempViewParamArr.join(",")),this.props.onLinkParamChange(tempLinkParam,!0)},this.onScrollToViewChange=viewId=>{this.setState({scrollToViewId:viewId})},this.getDefaultPageOrDialogId=()=>{const pages=this.props.appConfig&&this.props.appConfig.pages,pageIds=pages&&Object.keys(pages).filter((pageId=>getSectionIdsFromPage(pageId,this.props.appConfig).length>0)),defaultPageId=pageIds&&pageIds.find((p=>pages[p].isDefault))||(null==pageIds?void 0:pageIds[0]);if(defaultPageId)return defaultPageId;const dialogs=this.props.appConfig&&this.props.appConfig.dialogs,dialogIds=dialogs&&Object.keys(dialogs).filter((dialogId=>getSectionIdsFromDialog(dialogId,this.props.appConfig).length>0));return null==dialogIds?void 0:dialogIds[0]},this.getSelectedViewIds=()=>this.state.viewLinkParamArr.slice(1),this.state={viewLinkParamArr:[],scrollToViewId:this.noScroll}}componentDidMount(){const viewLinkParam=this.getInitLinkParam(),{value,linkType}=viewLinkParam;value&&linkType===jimu_core.JaG.View?this.setState({viewLinkParamArr:value.split(",")}):this.setState({viewLinkParamArr:[]}),this.props.onLinkParamChange(viewLinkParam)}static getDerivedStateFromProps(newProps,prevState){const{value,linkType}=newProps.linkParam;return value&&linkType===jimu_core.JaG.View?Object.assign(Object.assign({},prevState),{viewLinkParamArr:value.split(",")}):Object.assign(Object.assign({},prevState),{viewLinkParamArr:[]})}render(){var _a,_b,_c;if(!this.props.appConfig)return null;const pageData=getPageData(this.props.appConfig,this.props.intl),dialogData=getDialogData(this.props.appConfig);let pageOrDialogId=this.state.viewLinkParamArr[0];pageData.some((p=>p.id===pageOrDialogId))||dialogData.some((d=>d.id===pageOrDialogId))||(pageOrDialogId=this.getDefaultPageOrDialogId());const pagesWithSection=pageData.filter((p=>getSectionIdsFromPage(p.id,this.props.appConfig).length>0)),dialogsWithSection=dialogData.filter((d=>getSectionIdsFromDialog(d.id,this.props.appConfig).length>0));return jimu_core.q_G.createElement("div",{className:"w-100"},jimu_core.q_G.createElement("div",{className:"mb-3 option-name"},this.props.intl.formatMessage({id:"chooseViews",defaultMessage:jimu_ui.defaultMessages.chooseViews})),jimu_core.q_G.createElement("div",null,jimu_core.q_G.createElement(jimu_ui.Select,{value:pageOrDialogId,onChange:this.pageOrDialogChange,className:"w-100 mb-4",size:"sm","aria-label":this.props.intl.formatMessage({id:"chooseViews",defaultMessage:jimu_ui.defaultMessages.chooseViews})},jimu_core.q_G.createElement(jimu_ui.Option,{header:!0},this.props.intl.formatMessage({id:"page",defaultMessage:jimu_core.kgw.page})),pagesWithSection.map(((p,index)=>jimu_core.q_G.createElement(jimu_ui.Option,{key:index,value:p.id},p.name))),dialogsWithSection.length>0&&jimu_core.q_G.createElement(jimu_ui.Option,{header:!0},this.props.intl.formatMessage({id:"dialog",defaultMessage:jimu_core.kgw.dialog})),dialogsWithSection.map(((d,index)=>jimu_core.q_G.createElement(jimu_ui.Option,{key:index,value:d.id},d.name)))),jimu_core.q_G.createElement("div",{className:(0,jimu_core.xWm)("choose-view",{"mb-4":(null===(_a=getSectionIdsFromPage(pageOrDialogId,this.props.appConfig))||void 0===_a?void 0:_a.length)>0})},getSectionIdsFromPage(pageOrDialogId,this.props.appConfig).map((sectionId=>jimu_core.q_G.createElement(SectionItem,{sections:this.props.appConfig.sections,sectionId,viewsInfo:getViewInfoFromSection(sectionId,this.props.appConfig),viewLinkParamArr:this.state.viewLinkParamArr,viewChange:this.viewChange,viewRemove:this.viewRemove,key:sectionId})))),jimu_core.q_G.createElement("div",{className:(0,jimu_core.xWm)("choose-view",{"mb-4":(null===(_b=getSectionIdsFromDialog(pageOrDialogId,this.props.appConfig))||void 0===_b?void 0:_b.length)>0})},getSectionIdsFromDialog(pageOrDialogId,this.props.appConfig).map((sectionId=>jimu_core.q_G.createElement(SectionItem,{sections:this.props.appConfig.sections,sectionId,viewsInfo:getViewInfoFromSection(sectionId,this.props.appConfig),viewLinkParamArr:this.state.viewLinkParamArr,viewChange:this.viewChange,viewRemove:this.viewRemove,key:sectionId})))),jimu_core.q_G.createElement("div",{className:(0,jimu_core.xWm)("choose-view",{"mb-4":(null===(_c=this.getSelectedViewIds())||void 0===_c?void 0:_c.length)>0})},this.getSelectedViewIds().map((viewId=>getSectionIdsFromView(viewId,this.props.appConfig).map((sectionId=>jimu_core.q_G.createElement(SectionItem,{sections:this.props.appConfig.sections,sectionId,viewsInfo:getViewInfoFromSection(sectionId,this.props.appConfig),viewLinkParamArr:this.state.viewLinkParamArr,viewChange:this.viewChange,viewRemove:this.viewRemove,key:sectionId}))))))))}}class SectionItem extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.onViewChange=viewId=>{this.setState({viewId}),this.props.viewChange(viewId,this.props.sectionId)},this.state={viewId:null}}componentWillUnmount(){this.props.viewRemove(this.state.viewId)}render(){return jimu_core.q_G.createElement(CollapseTool,{className:"mb-4 choose-view",title:this.props.sections[this.props.sectionId]&&this.props.sections[this.props.sectionId].label,isOpen:!0,key:this.props.sectionId},jimu_core.q_G.createElement("div",{className:"link-selector-list w-100 view-border border-top-0 border-left-0 border-right-0 rounded-0",role:"listbox"},this.props.viewsInfo.map(((v,idx)=>jimu_core.q_G.createElement(jimu_ui.Button,{role:"option",onClick:()=>{this.onViewChange(v.id)},key:idx,className:(0,jimu_core.xWm)("jimu-outline-inside link-selector-list-item btn w-100 view-border px-2 pt-1 text-left border-bottom-0 rounded-0 text-truncate",{"item-common":!this.props.viewLinkParamArr.includes(v.id)},{"item-selected":this.props.viewLinkParamArr.includes(v.id)}),title:v.label,"aria-selected":this.props.viewLinkParamArr.includes(v.id)},v.label)))))}}try{viewlinkcontent.displayName="viewlinkcontent",viewlinkcontent.__docgenInfo={description:"",displayName:"viewlinkcontent",props:{linkParam:{defaultValue:null,description:"",name:"linkParam",required:!0,type:{name:"IMLinkParam"}},originLinkParam:{defaultValue:null,description:"",name:"originLinkParam",required:!0,type:{name:"IMLinkParam"}},onLinkParamChange:{defaultValue:null,description:"",name:"onLinkParamChange",required:!0,type:{name:"any"}},appConfig:{defaultValue:null,description:"",name:"appConfig",required:!0,type:{name:"IMAppConfig"}},browserSizeMode:{defaultValue:null,description:"",name:"browserSizeMode",required:!0,type:{name:"enum",value:[{value:'"SMALL"'},{value:'"MEDIUM"'},{value:'"LARGE"'}]}},intl:{defaultValue:null,description:"",name:"intl",required:!0,type:{name:"IntlShape"}},openTypes:{defaultValue:null,description:"",name:"openTypes",required:!0,type:{name:"ImmutableArray<OpenTypes>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-content/components/view-link-content.tsx#viewlinkcontent"]={docgenInfo:viewlinkcontent.__docgenInfo,name:"viewlinkcontent",path:"../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-content/components/view-link-content.tsx#viewlinkcontent"})}catch(__react_docgen_typescript_loader_error){}var expression_builder=__webpack_require__("../jimu-ui/advanced/expression-builder.tsx");const expressionFrom=(0,jimu_core.J3Z)([expression_builder.vD.Static,expression_builder.vD.Attribute,expression_builder.vD.Expression]);class WebAddressLinkContent extends jimu_core.q_G.PureComponent{constructor(props){var _a;super(props),this.getInitLinkParam=()=>this.props.originLinkParam.linkType===jimu_core.JaG.WebAddress?this.props.originLinkParam:(0,jimu_core.J3Z)({linkType:jimu_core.JaG.WebAddress,openType:!this.props.openTypes||this.props.openTypes.includes(jimu_core.qZ8.NewWindow)?jimu_core.qZ8.NewWindow:this.props.openTypes[0],value:""}),this.webAddressInputChange=res=>{const currentAddress=res.value;let tempLinkParam=this.props.linkParam;tempLinkParam=tempLinkParam.set("value",currentAddress).set("expression",null),this.props.onLinkParamChange(tempLinkParam)},this.webAddressExpressionChange=e=>{let tempLinkParam=this.props.linkParam;tempLinkParam=tempLinkParam.set("expression",e).set("value",""),this.props.onLinkParamChange(tempLinkParam),this.closeExpPopup()},this.openExpPopup=()=>{this.setState({isExpPopupOpen:!0})},this.closeExpPopup=()=>{this.setState({isExpPopupOpen:!1})},this.getDefaultExp=()=>({name:"Expression",parts:[{type:jimu_core.une.String,exp:'"https://"'}]}),this.onUrlChange=res=>{this.setState({url:res.value})},this.state={isExpPopupOpen:!1,url:(null===(_a=this.props.linkParam)||void 0===_a?void 0:_a.linkType)===jimu_core.JaG.WebAddress?this.props.linkParam.value:""}}componentDidMount(){const webAddressLinkParam=this.getInitLinkParam();this.props.onLinkParamChange(webAddressLinkParam)}componentDidUpdate(prevProps){var _a,_b,_c;(null===(_a=prevProps.linkParam)||void 0===_a?void 0:_a.value)!==(null===(_b=this.props.linkParam)||void 0===_b?void 0:_b.value)&&this.setState({url:(null===(_c=this.props.linkParam)||void 0===_c?void 0:_c.linkType)===jimu_core.JaG.WebAddress?this.props.linkParam.value:this.state.url})}render(){return jimu_core.q_G.createElement("div",{className:"w-100"},jimu_core.q_G.createElement("div",{className:"mb-3 option-name"},this.props.intl.formatMessage({id:"url",defaultMessage:jimu_ui.defaultMessages.url})),jimu_core.q_G.createElement("div",null,this.props.useDataSources&&this.props.useDataSources.length>0?jimu_core.q_G.createElement(expression_builder.zl,{useDataSources:this.props.useDataSources,onChange:this.webAddressExpressionChange,expression:this.props.linkParam&&this.props.linkParam.expression||this.getDefaultExp(),closeExpPopup:this.closeExpPopup,openExpPopup:this.openExpPopup,isExpPopupOpen:this.state.isExpPopupOpen,types:expressionFrom,widgetId:this.props.widgetId,"aria-label":this.props.intl.formatMessage({id:"url",defaultMessage:jimu_ui.defaultMessages.url})}):jimu_core.q_G.createElement(jimu_ui.UrlInput,{value:this.state.url,schemes:supportedURISchemes,onChange:this.onUrlChange,className:"w-100",onAcceptValue:this.webAddressInputChange,"aria-label":this.props.intl.formatMessage({id:"url",defaultMessage:jimu_ui.defaultMessages.url})})))}}try{webaddresslinkcontent.displayName="webaddresslinkcontent",webaddresslinkcontent.__docgenInfo={description:"",displayName:"webaddresslinkcontent",props:{linkParam:{defaultValue:null,description:"",name:"linkParam",required:!0,type:{name:"IMLinkParam"}},originLinkParam:{defaultValue:null,description:"",name:"originLinkParam",required:!0,type:{name:"IMLinkParam"}},onLinkParamChange:{defaultValue:null,description:"",name:"onLinkParamChange",required:!0,type:{name:"any"}},intl:{defaultValue:null,description:"",name:"intl",required:!0,type:{name:"IntlShape"}},openTypes:{defaultValue:null,description:"",name:"openTypes",required:!0,type:{name:"ImmutableArray<OpenTypes>"}},widgetId:{defaultValue:null,description:"",name:"widgetId",required:!1,type:{name:"string"}},useDataSources:{defaultValue:null,description:"",name:"useDataSources",required:!1,type:{name:"ImmutableArray<UseDataSource>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-content/components/web-address-link-content.tsx#webaddresslinkcontent"]={docgenInfo:webaddresslinkcontent.__docgenInfo,name:"webaddresslinkcontent",path:"../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-content/components/web-address-link-content.tsx#webaddresslinkcontent"})}catch(__react_docgen_typescript_loader_error){}class link_selector_content_LinkSelectorContent extends jimu_core.q_G.PureComponent{constructor(props){if(super(props),this.getLinkTypeContent=()=>{const hiddenLinks=this.getHiddenLinks();return this.props.isLinkPageSetting||window.isExpressBuilder?(0,jimu_core.Yac)(jimu_ui.Select,{value:this.state.linkParam.linkType,size:"sm",onChange:this.linkTypeChange,className:"w-100","aria-label":this.props.intl.formatMessage({id:"linkTo",defaultMessage:jimu_ui.defaultMessages.linkTo})},!hiddenLinks.some((l=>l===jimu_core.JaG.WebAddress))&&(0,jimu_core.Yac)("option",{value:jimu_core.JaG.WebAddress},this.props.intl.formatMessage({id:"url",defaultMessage:jimu_ui.defaultMessages.url})),!hiddenLinks.some((l=>l===jimu_core.JaG.None))&&(0,jimu_core.Yac)("option",{value:jimu_core.JaG.None},this.props.intl.formatMessage({id:"none",defaultMessage:jimu_ui.defaultMessages.none}))):(0,jimu_core.Yac)(jimu_ui.Select,{value:this.state.linkParam.linkType,size:"sm",onChange:this.linkTypeChange,className:"w-100","aria-label":this.props.intl.formatMessage({id:"linkTo",defaultMessage:jimu_ui.defaultMessages.linkTo})},!hiddenLinks.some((l=>l===jimu_core.JaG.None))&&(0,jimu_core.Yac)("option",{value:jimu_core.JaG.None},this.props.intl.formatMessage({id:"none",defaultMessage:jimu_ui.defaultMessages.none})),!hiddenLinks.some((l=>l===jimu_core.JaG.Page))&&(0,jimu_core.Yac)("option",{value:jimu_core.JaG.Page},this.props.intl.formatMessage({id:"page",defaultMessage:jimu_core.kgw.page})),!hiddenLinks.some((l=>l===jimu_core.JaG.View))&&(0,jimu_core.Yac)("option",{value:jimu_core.JaG.View},this.props.intl.formatMessage({id:"view",defaultMessage:jimu_core.kgw.view})),!hiddenLinks.some((l=>l===jimu_core.JaG.Dialog))&&(0,jimu_core.Yac)("option",{value:jimu_core.JaG.Dialog},this.props.intl.formatMessage({id:"dialog",defaultMessage:jimu_core.kgw.dialog})),!hiddenLinks.some((l=>l===jimu_core.JaG.WebAddress))&&(0,jimu_core.Yac)("option",{value:jimu_core.JaG.WebAddress},this.props.intl.formatMessage({id:"url",defaultMessage:jimu_ui.defaultMessages.url})),!hiddenLinks.some((l=>l===jimu_core.JaG.Block))&&(0,jimu_core.Yac)("option",{value:jimu_core.JaG.Block},this.props.intl.formatMessage({id:"block",defaultMessage:jimu_core.kgw.block})),!hiddenLinks.some((l=>l===jimu_core.JaG.PageTop))&&(0,jimu_core.Yac)("option",{value:jimu_core.JaG.PageTop},this.props.intl.formatMessage({id:"pageTop",defaultMessage:jimu_ui.defaultMessages.pageTop})),!hiddenLinks.some((l=>l===jimu_core.JaG.PrintPreview))&&(0,jimu_core.Yac)("option",{value:jimu_core.JaG.PrintPreview},this.props.intl.formatMessage({id:"printPreview",defaultMessage:jimu_ui.defaultMessages.printPreview})),!hiddenLinks.some((l=>l===jimu_core.JaG.CookieBanner))&&(0,jimu_core.Yac)("option",{value:jimu_core.JaG.CookieBanner},this.props.intl.formatMessage({id:"cookieBanner",defaultMessage:jimu_ui.defaultMessages.cookieBanner})))},this.getHiddenLinks=()=>{var _a,_b,_c,_d,_e,_f;let hiddenLinks=this.props.hiddenLinks||(0,jimu_core.J3Z)([]);const currentPageId=layout_runtime.utils.getCurrentPageId(),appConfig=layout_runtime.utils.getAppConfig(),currentPageJson=null===(_a=appConfig.pages)||void 0===_a?void 0:_a[currentPageId],currentPageLayoutId=layout_runtime.searchUtils.findLayoutId(null==currentPageJson?void 0:currentPageJson.layout,layout_runtime.utils.getCurrentSizeMode(),appConfig.mainSizeMode),currentLayoutJson=appConfig.layouts[currentPageLayoutId],currentDialogId=(null===(_b=null===window||void 0===window?void 0:window.jimuConfig)||void 0===_b?void 0:_b.isBuilder)?null===(_d=null===(_c=(0,jimu_core.Vp3)().getState().appStateInBuilder)||void 0===_c?void 0:_c.appRuntimeInfo)||void 0===_d?void 0:_d.currentDialogId:null===(_e=(0,jimu_core.Vp3)().getState().appRuntimeInfo)||void 0===_e?void 0:_e.currentDialogId;return((null==currentLayoutJson?void 0:currentLayoutJson.type)===jimu_core.p5K.FixedLayout||currentDialogId)&&(hiddenLinks=hiddenLinks.concat([jimu_core.JaG.Block,jimu_core.JaG.Screen,jimu_core.JaG.PageTop])),(null===(_f=null==appConfig?void 0:appConfig.cookieBanner)||void 0===_f?void 0:_f.enable)||(hiddenLinks=hiddenLinks.concat([jimu_core.JaG.CookieBanner])),hiddenLinks},this.getLinkContent=linkType=>{switch(linkType){case jimu_core.JaG.None:return null;case jimu_core.JaG.Page:return(0,jimu_core.Yac)(PageLinkContent,{originLinkParam:this.state.originLinkParam,linkParam:this.state.linkParam,appConfig:this.props.appConfig,onLinkParamChange:this.linkParamChange,intl:this.props.intl,openTypes:this.props.openTypes});case jimu_core.JaG.Dialog:return(0,jimu_core.Yac)(DialogLinkContent,{originLinkParam:this.state.originLinkParam,linkParam:this.state.linkParam,appConfig:this.props.appConfig,onLinkParamChange:this.linkParamChange,intl:this.props.intl});case jimu_core.JaG.Block:return(0,jimu_core.Yac)(BlockLinkContent,{originLinkParam:this.state.originLinkParam,linkParam:this.state.linkParam,onLinkParamChange:this.linkParamChange,intl:this.props.intl});case jimu_core.JaG.Screen:return(0,jimu_core.Yac)(screen_link_content_BlockLinkContent,{originLinkParam:this.state.originLinkParam,linkParam:this.state.linkParam,onLinkParamChange:this.linkParamChange,intl:this.props.intl});case jimu_core.JaG.View:return(0,jimu_core.Yac)(ViewLinkContent,{originLinkParam:this.state.originLinkParam,linkParam:this.state.linkParam,intl:this.props.intl,openTypes:this.props.openTypes,appConfig:this.props.appConfig,onLinkParamChange:this.linkParamChange,browserSizeMode:this.props.browserSizeMode});case jimu_core.JaG.WebAddress:return(0,jimu_core.Yac)(WebAddressLinkContent,{originLinkParam:this.state.originLinkParam,linkParam:this.state.linkParam,intl:this.props.intl,onLinkParamChange:this.linkParamChange,useDataSources:this.props.useDataSources,openTypes:this.props.openTypes,widgetId:this.props.widgetId});default:return null}},this.linkTypeChange=e=>{const type=e.target.value;let tempLinkParam=(0,jimu_core.J3Z)(this.state.linkParam);[jimu_core.JaG.None,jimu_core.JaG.PageTop,jimu_core.JaG.CookieBanner,jimu_core.JaG.PrintPreview].includes(type)&&(tempLinkParam=(0,jimu_core.J3Z)({})),tempLinkParam=tempLinkParam.set("linkType",type),this.needOpenIn(tempLinkParam)||(tempLinkParam=tempLinkParam.without("openType")),this.setState({linkParam:tempLinkParam})},this.radioOpenTypeChange=openType=>{let tempLinkParam=(0,jimu_core.J3Z)(this.state.linkParam);tempLinkParam=tempLinkParam.set("openType",openType),this.setState({linkParam:tempLinkParam})},this.linkParamChange=(changedParam,isTypeSame)=>{isTypeSame?changedParam&&this.state.linkParam&&changedParam.linkType===this.state.linkParam.linkType&&this.setState({linkParam:this.fixLinkParam(changedParam)}):this.setState({linkParam:this.fixLinkParam(changedParam)})},this.fixLinkParam=linkParam=>{var _a;let fixedLinkParam=linkParam;if((null==linkParam?void 0:linkParam.linkType)===jimu_core.JaG.View&&(null==linkParam?void 0:linkParam.value)){const views=null===(_a=this.props.appConfig)||void 0===_a?void 0:_a.views,viewLinkParamArr=linkParam.value.split(","),validViewIds=viewLinkParamArr.slice(1).filter((viewId=>null==views?void 0:views[viewId])),fixedValue=[viewLinkParamArr[0]].concat(validViewIds).join(",");fixedLinkParam=fixedLinkParam.set("value",fixedValue)}return fixedLinkParam},this.settingConfirm=()=>{const linkParam=(0,jimu_core.J3Z)(this.state.linkParam);this.setState({originLinkParam:linkParam}),this.props.onSettingConfirm(linkParam)},this.isLinkParamOk=linkParam=>{if(!linkParam||!linkParam.linkType)return!1;if(linkParam.linkType===jimu_core.JaG.View){const pageId=linkParam.value&&linkParam.value.split(",")[0]||null,viewIds=linkParam.value&&linkParam.value.split(",").slice(1)||[];return!!(pageId&&"string"==typeof pageId&&viewIds.length>0)}if(linkParam.linkType===jimu_core.JaG.WebAddress){if(this.props.useDataSources&&this.props.useDataSources.length>0){const parts=linkParam.expression&&linkParam.expression.parts;let isExpressionOk=!1;return parts&&parts.length>0&&(isExpressionOk=1!==parts.length||!!parts[0].exp&&'""'!==parts[0].exp),isExpressionOk}{const hasError="valid"!==jimu_core.v6q.checkAbsoluteUrl(linkParam.value,supportedURISchemes);return linkParam.value&&!hasError}}return linkParam.linkType===jimu_core.JaG.PageTop||linkParam.linkType===jimu_core.JaG.PrintPreview||linkParam.linkType===jimu_core.JaG.None||linkParam.linkType===jimu_core.JaG.CookieBanner||!(!linkParam.value||"string"!=typeof linkParam.value)},this.props.linkParam&&this.props.linkParam.linkType)this.state={linkParam:(0,jimu_core.J3Z)(this.props.linkParam),originLinkParam:(0,jimu_core.J3Z)(this.props.linkParam)};else{const initLinkParam={linkType:jimu_core.JaG.None,openType:!this.props.openTypes||this.props.openTypes.includes(jimu_core.qZ8.CurrentWindow)?jimu_core.qZ8.CurrentWindow:this.props.openTypes[0]};this.state={linkParam:(0,jimu_core.J3Z)(initLinkParam),originLinkParam:(0,jimu_core.J3Z)(initLinkParam)}}}needOpenIn(linkParam){if(!linkParam)return!0;return![jimu_core.JaG.Dialog,jimu_core.JaG.Block,jimu_core.JaG.Screen,jimu_core.JaG.PageTop,jimu_core.JaG.PrintPreview,jimu_core.JaG.CookieBanner].some((t=>t===linkParam.linkType))&&!linkToViewOnDialog(linkParam)}render(){if(this.props.appConfig){const linkTypeContent=this.getLinkTypeContent(),linkContent=this.getLinkContent(this.state.linkParam.linkType);return(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)(this.props.className,"w-100 h-100",{[jimu_theme.Dk]:this.context,[jimu_theme.Zo]:!this.context})},(0,jimu_core.Yac)("div",{className:"widget-builder-link-selector w-100 h-100"},(0,jimu_core.Yac)("div",{style:{position:"relative"},className:"w-100 h-100"},(0,jimu_core.Yac)(jimu_ui.Container,null,(0,jimu_core.Yac)(jimu_ui.Row,{className:"mb-3 option-name"},this.props.intl.formatMessage({id:"linkTo",defaultMessage:jimu_ui.defaultMessages.linkTo})),(0,jimu_core.Yac)(jimu_ui.Row,{className:"mb-4"},linkTypeContent),this.state.linkParam.linkType!==jimu_core.JaG.None?(0,jimu_core.Yac)("div",null,(0,jimu_core.Yac)(jimu_ui.Row,{className:"mb-4"},linkContent),this.needOpenIn(this.state.linkParam)&&(0,jimu_core.Yac)("div",null,(0,jimu_core.Yac)(jimu_ui.Row,{className:"mb-3 option-name"},this.props.intl.formatMessage({id:"openIn",defaultMessage:jimu_ui.defaultMessages.openIn})),(0,jimu_core.Yac)(jimu_ui.Row,{role:"radiogroup",className:"p-0","aria-label":this.props.intl.formatMessage({id:"openIn",defaultMessage:jimu_ui.defaultMessages.openIn})},(!this.props.openTypes||this.props.openTypes.some((o=>o===jimu_core.qZ8.CurrentWindow)))&&(0,jimu_core.Yac)(jimu_ui.Label,{className:"link-setting-cursor-pointer open-type-label mb-6 d-flex align-items-center"},(0,jimu_core.Yac)(jimu_ui.Radio,{name:"openIn",className:"mr-2",onChange:()=>{this.radioOpenTypeChange(jimu_core.qZ8.CurrentWindow)},checked:this.state.linkParam.openType===jimu_core.qZ8.CurrentWindow}),this.props.intl.formatMessage({id:"appWindow",defaultMessage:jimu_ui.defaultMessages.appWindow})),(!this.props.openTypes||this.props.openTypes.some((o=>o===jimu_core.qZ8.TopWindow)))&&(0,jimu_core.Yac)(jimu_ui.Label,{className:"link-setting-cursor-pointer open-type-label mb-6 d-flex align-items-center"},(0,jimu_core.Yac)(jimu_ui.Radio,{name:"openIn",className:"mr-2",onChange:()=>{this.radioOpenTypeChange(jimu_core.qZ8.TopWindow)},checked:this.state.linkParam.openType===jimu_core.qZ8.TopWindow}),this.props.intl.formatMessage({id:"topWindow",defaultMessage:jimu_ui.defaultMessages.topWindow})),(!this.props.openTypes||this.props.openTypes.some((o=>o===jimu_core.qZ8.NewWindow)))&&(0,jimu_core.Yac)(jimu_ui.Label,{className:"link-setting-cursor-pointer open-type-label mb-6 d-flex align-items-center"},(0,jimu_core.Yac)(jimu_ui.Radio,{name:"openIn",className:"mr-2",onChange:()=>{this.radioOpenTypeChange(jimu_core.qZ8.NewWindow)},checked:this.state.linkParam.openType===jimu_core.qZ8.NewWindow}),this.props.intl.formatMessage({id:"newWindow",defaultMessage:jimu_ui.defaultMessages.newWindow}))))):null),(0,jimu_core.Yac)("div",{className:"w-100 link-setting-ok-btn-container",style:{position:"absolute"}},(0,jimu_core.Yac)(jimu_ui.Button,{className:"w-100 link-setting-ok-btn",type:"primary",onClick:this.settingConfirm,disabled:!this.isLinkParamOk(this.state.linkParam),title:this.props.intl.formatMessage({id:"ok",defaultMessage:jimu_core.kgw.ok})},(0,jimu_core.Yac)("div",{className:"text-truncate"},this.props.intl.formatMessage({id:"ok",defaultMessage:jimu_core.kgw.ok})))))))}return null}componentDidMount(){this.props.isLinkPageSetting&&this.linkTypeChange({target:{value:jimu_core.JaG.WebAddress}})}}link_selector_content_LinkSelectorContent.contextType=jimu_theme.uc;const components_link_selector_content_LinkSelectorContent=jimu_core.E_S.connect((state=>{var _a,_b;return{appConfig:window&&window.jimuConfig&&window.jimuConfig.isBuilder?null===(_a=state.appStateInBuilder)||void 0===_a?void 0:_a.appConfig:state.appConfig,browserSizeMode:window&&window.jimuConfig&&window.jimuConfig.isBuilder?null===(_b=state.appStateInBuilder)||void 0===_b?void 0:_b.browserSizeMode:state.browserSizeMode}}))((0,jimu_core.j4T)((0,jimu_theme.Xy)(link_selector_content_LinkSelectorContent,"LinkSelectorContent"))),link_selector_content_LinkSetting=components_link_selector_content_LinkSelectorContent;try{link_selector_content_LinkSelectorContent.displayName="_LinkSelectorContent",link_selector_content_LinkSelectorContent.__docgenInfo={description:"The `LinkSelectorContent` component allows users to configure a link.\n\n```ts\nimport { LinkSelectorContent } from 'jimu-ui/advanced/setting-components'\n```",displayName:"_LinkSelectorContent",props:{className:{defaultValue:null,description:"@ignore Only used by theme.",name:"className",required:!1,type:{name:"string"}},linkParam:{defaultValue:null,description:"The setting result.\n`IMLinkParam` is an interface.\n\n```ts\nimport { IMLinkParam } from 'jimu-ui/advanced/setting-components'\n```",name:"linkParam",required:!1,type:{name:"IMLinkParam"}},onSettingConfirm:{defaultValue:null,description:"Callback when setting result is changed.",name:"onSettingConfirm",required:!1,type:{name:"(linkParam: IMLinkParam) => void"}},widgetId:{defaultValue:null,description:"Use widget id to get widget context, e.g. whether widget is in repeated data source context.",name:"widgetId",required:!1,type:{name:"string"}},isLinkPageSetting:{defaultValue:null,description:"@ignore",name:"isLinkPageSetting",required:!1,type:{name:"boolean"}},useDataSources:{defaultValue:null,description:"Widget's `useDataSources`, which means data sources that widget is using.\nIf pass `useDataSources`, link can use these data sources to build `Expression` **(see `jimu-core` API documentation)**.\n\n```ts\nimport { UseDataSource } from 'jimu-core'\n```",name:"useDataSources",required:!1,type:{name:"ImmutableArray<UseDataSource>"}},hiddenLinks:{defaultValue:null,description:"Hide some types of link.\n\n```ts\nimport { LinkType } from 'jimu-core'\n```",name:"hiddenLinks",required:!1,type:{name:"ImmutableArray<LinkType>"}},openTypes:{defaultValue:null,description:"Link targets can be set.\n`OpenTypes` is similar with HTML `<a>` target attribute.\n\n```ts\nimport { OpenTypes } from 'jimu-ui/advanced/setting-components'\n```",name:"openTypes",required:!1,type:{name:"ImmutableArray<OpenTypes>"}},theme:{defaultValue:null,description:"@ignore",name:"theme",required:!1,type:{name:"IMThemeVariables"}},intl:{defaultValue:null,description:"@ignore",name:"intl",required:!1,type:{name:"IntlShape"}},appConfig:{defaultValue:null,description:"@ignore",name:"appConfig",required:!0,type:{name:"IMAppConfig"}},browserSizeMode:{defaultValue:null,description:"@ignore",name:"browserSizeMode",required:!0,type:{name:"enum",value:[{value:'"SMALL"'},{value:'"MEDIUM"'},{value:'"LARGE"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-content/index.tsx#_LinkSelectorContent"]={docgenInfo:link_selector_content_LinkSelectorContent.__docgenInfo,name:"_LinkSelectorContent",path:"../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-content/index.tsx#_LinkSelectorContent"})}catch(__react_docgen_typescript_loader_error){}try{contextType.displayName="_LinkSelectorContent.contextType",contextType.__docgenInfo={description:"Context lets components pass information deep down without explicitly\npassing props.\n\nCreated from {@link createContext}",displayName:"_LinkSelectorContent.contextType",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-content/index.tsx#_LinkSelectorContent.contextType"]={docgenInfo:link_selector_content_LinkSelectorContent.contextType.__docgenInfo,name:"_LinkSelectorContent.contextType",path:"../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-content/index.tsx#_LinkSelectorContent.contextType"})}catch(__react_docgen_typescript_loader_error){}try{components_link_selector_content_LinkSelectorContent.displayName="LinkSelectorContent",components_link_selector_content_LinkSelectorContent.__docgenInfo={description:"",displayName:"LinkSelectorContent",props:{className:{defaultValue:null,description:"@ignore Only used by theme.",name:"className",required:!1,type:{name:"string"}},widgetId:{defaultValue:null,description:"Use widget id to get widget context, e.g. whether widget is in repeated data source context.",name:"widgetId",required:!1,type:{name:"string"}},useDataSources:{defaultValue:null,description:"Widget's `useDataSources`, which means data sources that widget is using.\nIf pass `useDataSources`, link can use these data sources to build `Expression` **(see `jimu-core` API documentation)**.\n\n```ts\nimport { UseDataSource } from 'jimu-core'\n```",name:"useDataSources",required:!1,type:{name:"Readonly<Remaining<UseDataSource>> & Additions<UseDataSource> & Overrides<UseDataSource> & ReadOnlyIndexer<...>"}},isLinkPageSetting:{defaultValue:null,description:"@ignore",name:"isLinkPageSetting",required:!1,type:{name:"boolean"}},linkParam:{defaultValue:null,description:"The setting result.\n`IMLinkParam` is an interface.\n\n```ts\nimport { IMLinkParam } from 'jimu-ui/advanced/setting-components'\n```",name:"linkParam",required:!1,type:{name:"ImmutableObjectMixin<LinkParam> & { readonly linkType?: LinkType; readonly openType?: LinkTarget; readonly value?: string; readonly expression?: ImmutableObject<...>; }"}},onSettingConfirm:{defaultValue:null,description:"Callback when setting result is changed.",name:"onSettingConfirm",required:!1,type:{name:"(linkParam: IMLinkParam) => void"}},hiddenLinks:{defaultValue:null,description:"Hide some types of link.\n\n```ts\nimport { LinkType } from 'jimu-core'\n```",name:"hiddenLinks",required:!1,type:{name:"Readonly<Remaining<LinkType>> & Additions<LinkType> & Overrides<LinkType> & ReadOnlyIndexer<LinkType>"}},openTypes:{defaultValue:null,description:"Link targets can be set.\n`OpenTypes` is similar with HTML `<a>` target attribute.\n\n```ts\nimport { OpenTypes } from 'jimu-ui/advanced/setting-components'\n```",name:"openTypes",required:!1,type:{name:"Readonly<Remaining<OpenTypes>> & Additions<OpenTypes> & Overrides<OpenTypes> & ReadOnlyIndexer<OpenTypes>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-content/index.tsx#LinkSelectorContent"]={docgenInfo:components_link_selector_content_LinkSelectorContent.__docgenInfo,name:"LinkSelectorContent",path:"../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-content/index.tsx#LinkSelectorContent"})}catch(__react_docgen_typescript_loader_error){}try{link_selector_content_LinkSetting.displayName="LinkSetting",link_selector_content_LinkSetting.__docgenInfo={description:"",displayName:"LinkSetting",props:{className:{defaultValue:null,description:"@ignore Only used by theme.",name:"className",required:!1,type:{name:"string"}},widgetId:{defaultValue:null,description:"Use widget id to get widget context, e.g. whether widget is in repeated data source context.",name:"widgetId",required:!1,type:{name:"string"}},useDataSources:{defaultValue:null,description:"Widget's `useDataSources`, which means data sources that widget is using.\nIf pass `useDataSources`, link can use these data sources to build `Expression` **(see `jimu-core` API documentation)**.\n\n```ts\nimport { UseDataSource } from 'jimu-core'\n```",name:"useDataSources",required:!1,type:{name:"Readonly<Remaining<UseDataSource>> & Additions<UseDataSource> & Overrides<UseDataSource> & ReadOnlyIndexer<...>"}},isLinkPageSetting:{defaultValue:null,description:"@ignore",name:"isLinkPageSetting",required:!1,type:{name:"boolean"}},linkParam:{defaultValue:null,description:"The setting result.\n`IMLinkParam` is an interface.\n\n```ts\nimport { IMLinkParam } from 'jimu-ui/advanced/setting-components'\n```",name:"linkParam",required:!1,type:{name:"ImmutableObjectMixin<LinkParam> & { readonly linkType?: LinkType; readonly openType?: LinkTarget; readonly value?: string; readonly expression?: ImmutableObject<...>; }"}},onSettingConfirm:{defaultValue:null,description:"Callback when setting result is changed.",name:"onSettingConfirm",required:!1,type:{name:"(linkParam: IMLinkParam) => void"}},hiddenLinks:{defaultValue:null,description:"Hide some types of link.\n\n```ts\nimport { LinkType } from 'jimu-core'\n```",name:"hiddenLinks",required:!1,type:{name:"Readonly<Remaining<LinkType>> & Additions<LinkType> & Overrides<LinkType> & ReadOnlyIndexer<LinkType>"}},openTypes:{defaultValue:null,description:"Link targets can be set.\n`OpenTypes` is similar with HTML `<a>` target attribute.\n\n```ts\nimport { OpenTypes } from 'jimu-ui/advanced/setting-components'\n```",name:"openTypes",required:!1,type:{name:"Readonly<Remaining<OpenTypes>> & Additions<OpenTypes> & Overrides<OpenTypes> & ReadOnlyIndexer<OpenTypes>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-content/index.tsx#LinkSetting"]={docgenInfo:link_selector_content_LinkSetting.__docgenInfo,name:"LinkSetting",path:"../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-content/index.tsx#LinkSetting"})}catch(__react_docgen_typescript_loader_error){}var side_popper_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const shiftOptions={rootBoundary:"viewport"};class side_popper_SidePopper extends jimu_core.q_G.PureComponent{constructor(){super(...arguments),this.closeBtnRef=jimu_core.q_G.createRef(),this.popperRef=jimu_core.q_G.createRef(),this.handleDocumentMousedown=evt=>{if(this.props.isOpen){const target=evt.target;(!this.props.trigger||(Array.isArray(this.props.trigger)?!this.props.trigger.some((t=>!(0,jimu_ui.isOutBoundary)(target,t))):(0,jimu_ui.isOutBoundary)(target,this.props.trigger)))&&this.toggle()}},this.toggle=()=>{this.props.toggle()},this.keepFocusAfterClose=()=>{setTimeout((()=>{this.props.backToFocusNode?(0,jimu_core.u02)(this.props.backToFocusNode):Array.isArray(this.props.trigger)?(0,jimu_core.u02)(this.props.trigger[0]):(0,jimu_core.u02)(this.props.trigger)}),200)},this.onKeyDown=e=>{var _a;if("Esc"===e.key||"Escape"===e.key){if(!(null===(_a=this.popperRef.current)||void 0===_a?void 0:_a.contains(e.target)))return;e.target===this.closeBtnRef.current?this.toggle():(0,jimu_core.u02)(this.closeBtnRef.current)}}}componentDidMount(){var _a;null===(_a=this.getReference(this.props.position))||void 0===_a||_a.addEventListener("mousedown",this.handleDocumentMousedown,!1)}componentDidUpdate(prevProps){var _a;const isReferencePanelClosed="left"===this.props.position&&prevProps.leftSidebarCollapse&&!this.props.leftSidebarCollapse||"right"===this.props.position&&prevProps.rightSidebarCollapse&&!this.props.rightSidebarCollapse,isSelectedWidgetNotTriggerWidget=this.props.widgetId&&this.props.layoutSelection!==prevProps.layoutSelection&&(null===(_a=layout_runtime.searchUtils.findLayoutItem(layout_runtime.utils.getAppConfig(),this.props.layoutSelection))||void 0===_a?void 0:_a.widgetId)!==this.props.widgetId,isTemplatedPage=!prevProps.isTemplatePage&&this.props.isTemplatePage;(isReferencePanelClosed||isSelectedWidgetNotTriggerWidget||isTemplatedPage)&&this.props.isOpen&&this.toggle(),prevProps.isOpen&&!this.props.isOpen&&this.keepFocusAfterClose()}componentWillUnmount(){var _a;null===(_a=this.getReference(this.props.position))||void 0===_a||_a.removeEventListener("mousedown",this.handleDocumentMousedown,!1)}getReference(position){return"left"===position?document&&document.querySelector('[data-layoutid="left-sidebar-left-layout"]'):document&&document.querySelector('[data-layoutid="right-sidebar-right-layout"]')}getPlacement(position){return"left"===position?"right-start":"left-start"}render(){const _a=this.props,{isOpen,position,className,dispatch,leftSidebarCollapse,rightSidebarCollapse,trigger,backToFocusNode,widgetId,layoutSelection,title,isTemplatePage,addFocusableContainerClass}=_a,others=side_popper_rest(_a,["isOpen","position","className","dispatch","leftSidebarCollapse","rightSidebarCollapse","trigger","backToFocusNode","widgetId","layoutSelection","title","isTemplatePage","addFocusableContainerClass"]);return(0,jimu_core.Yac)(jimu_ui.Popper,Object.assign({reference:this.getReference(position),placement:this.getPlacement(position),open:isOpen,forceLatestFocusElements:!0,autoUpdate:!0,className:(0,jimu_core.xWm)("bg-light-300",className),shiftOptions},others,{toggle:null,onKeyDown:this.onKeyDown,"aria-label":"string"==typeof this.props["aria-label"]?this.props["aria-label"]:"string"==typeof title?title:void 0}),(0,jimu_core.Yac)("div",{className:"w-100 h-100",ref:this.popperRef},void 0!==title&&(0,jimu_core.Yac)(jimu_ui.PanelHeader,{title,showClose:!0,onClose:this.toggle,level:1,className:(0,jimu_core.xWm)("p-4",{[jimu_ui.FOCUSABLE_CONTAINER_CLASS]:addFocusableContainerClass}),closeButtonRef:this.closeBtnRef}),void 0!==title?(0,jimu_core.Yac)("div",{css:jimu_core.AHW`height: calc(100% - 56px); overflow: auto;`},this.props.children):this.props.children))}}const SidePopper=jimu_core.E_S.connect(((state,ownProps)=>{var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k;return{leftSidebarCollapse:null===(_b=null===(_a=state.widgetsState)||void 0===_a?void 0:_a["left-sidebar"])||void 0===_b?void 0:_b.collapse,rightSidebarCollapse:null===(_d=null===(_c=state.widgetsState)||void 0===_c?void 0:_c["right-sidebar"])||void 0===_d?void 0:_d.collapse,layoutSelection:ownProps.widgetId?(null===(_e=null===window||void 0===window?void 0:window.jimuConfig)||void 0===_e?void 0:_e.isBuilder)?null===(_g=null===(_f=state.appStateInBuilder)||void 0===_f?void 0:_f.appRuntimeInfo)||void 0===_g?void 0:_g.selection:null===(_h=state.appRuntimeInfo)||void 0===_h?void 0:_h.selection:null,isTemplatePage:(null===(_j=null===window||void 0===window?void 0:window.jimuConfig)||void 0===_j?void 0:_j.isBuilder)&&"template"===(null===(_k=state.appRuntimeInfo)||void 0===_k?void 0:_k.currentPageId)}}))((0,jimu_theme.Xy)(side_popper_SidePopper,"SidePopper"));try{side_popper_SidePopper.displayName="_SidePopper",side_popper_SidePopper.__docgenInfo={description:"The `SidePopper` component is a popper which reference node is left/right side panel of builder.\n\n```ts\nimport { SidePopper } from 'jimu-ui/advanced/setting-components'\n```",displayName:"_SidePopper",props:{position:{defaultValue:null,description:"If `left`, the side popper is next to left sidebar of builder.\nIf `right`, the side popper is next to right sidebar of builder.",name:"position",required:!0,type:{name:"enum",value:[{value:'"left"'},{value:'"right"'}]}},isOpen:{defaultValue:null,description:"If `true`, the side popper is visible.",name:"isOpen",required:!0,type:{name:"boolean"}},toggle:{defaultValue:null,description:"Toggle to open/close the side popper.",name:"toggle",required:!0,type:{name:"() => void"}},trigger:{defaultValue:null,description:"Element which triggers side popper.\n\nBy default, clicking left/right sidebar of builder will close the side popper automatically.\nClicking `trigger` won't close the side popper.",name:"trigger",required:!0,type:{name:"HTMLElement | HTMLElement[]"}},backToFocusNode:{defaultValue:null,description:"An element to focus after the side popper is closed.\n`backToFocusNode` is for accessibility purposes.\n\nIf don't pass in `backToFocusNode`, will focus `trigger` after side popper is closed.",name:"backToFocusNode",required:!1,type:{name:"HTMLElement"}},widgetId:{defaultValue:null,description:"If current selected widget is not the widget, will close the side popper.",name:"widgetId",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"Provide a uniform header.",name:"title",required:!1,type:{name:"ReactNode"}},addFocusableContainerClass:{defaultValue:{value:"false\r\nAdd the FOCUSABLE_CONTAINER_CLASS to the title to make the close button focused in case of 508 problems.\r\n\r\nOnly needs this prop if the components in the content of the SidePopper uses FOCUSABLE_CONTAINER_CLASS."},description:"@ignore",name:"addFocusableContainerClass",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"Defines the class names added to the component.\n@ignore",name:"className",required:!1,type:{name:"string"}},children:{defaultValue:null,description:"A ref that points to the used popper instance.",name:"children",required:!1,type:{name:"ReactNode"}},"aria-label":{defaultValue:null,description:"To provide a label for the side popper for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},tabIndex:{defaultValue:null,description:"The `tabIndex` added to the element.",name:"tabIndex",required:!1,type:{name:"number"}},role:{defaultValue:{value:"dialog"},description:"Defines the role added to the element.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-modal":{defaultValue:null,description:"Indicates whether the element, or another grouping element it controls, is modal.",name:"aria-modal",required:!1,type:{name:"boolean"}},onKeyDown:{defaultValue:null,description:"Fired at an Element when a key is pressed down and that key normally produces a character value.",name:"onKeyDown",required:!1,type:{name:"KeyboardEventHandler<HTMLDivElement>"}},onClick:{defaultValue:null,description:"Fire callback when the component is clicked.",name:"onClick",required:!1,type:{name:"MouseEventHandler<HTMLDivElement>"}},onMouseDown:{defaultValue:null,description:"Callback fired when the mouse is pressed on the element.",name:"onMouseDown",required:!1,type:{name:"MouseEventHandler<HTMLDivElement>"}},onMouseEnter:{defaultValue:null,description:"Fired at an Element when a pointing device (usually a mouse) is initially moved so that its hotshots is within the element at which the event was fired.",name:"onMouseEnter",required:!1,type:{name:"MouseEventHandler<HTMLDivElement>"}},onMouseLeave:{defaultValue:null,description:"Fired at an Element when the cursor of a pointing device (usually a mouse) is moved out of it.",name:"onMouseLeave",required:!1,type:{name:"MouseEventHandler<HTMLDivElement>"}},placement:{defaultValue:{value:"bottom"},description:"Describes the preferred placement of the popper.",name:"placement",required:!1,type:{name:"enum",value:[{value:'"bottom"'},{value:'"left"'},{value:'"right"'},{value:'"top"'},{value:'"bottom-end"'},{value:'"bottom-start"'},{value:'"left-end"'},{value:'"left-start"'},{value:'"right-end"'},{value:'"right-start"'},{value:'"top-end"'},{value:'"top-start"'}]}},shiftOptions:{defaultValue:null,description:"The shift options can shift the popper when it will overflow the clipping boundary.\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.",name:"shiftOptions",required:!1,type:{name:"boolean | { mainAxis?: boolean; crossAxis?: boolean; limiter?: { fn: (state: MiddlewareState) => Coords; options?: any; }; rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; boundary?: Boundary; }"}},offsetOptions:{defaultValue:null,description:"The offset modifier can shift your popper on both its axis.\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.",name:"offsetOptions",required:!1,type:{name:"boolean | [number, number] | OffsetOptions"}},flipOptions:{defaultValue:{value:"true"},description:"The flip options can flip the popper when it will overflow the clipping boundary.\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.\nNote: `flipOptions` and `autoPlacementOptions` cannot be used together inside the same middleware array; make sure you choose only one of them to use.",name:"flipOptions",required:!1,type:{name:"boolean | { mainAxis?: boolean; crossAxis?: boolean; rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; ... 4 more ...; boundary?: Boundary; }"}},strategy:{defaultValue:{value:"absolute"},description:"Describes the positioning strategy to use.\nBy default, it is absolute, which in the simplest cases does not require repositioning of the popper.\nIf your reference element is in a fixed container, use the fixed strategy.",name:"strategy",required:!1,type:{name:"enum",value:[{value:'"fixed"'},{value:'"absolute"'}]}},arrowOptions:{defaultValue:{value:"false"},description:"The arrow options can show the arrow of the popper.\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.",name:"arrowOptions",required:!1,type:{name:"boolean | ArrowStyleOptions"}},unstyled:{defaultValue:null,description:"Whether to use this component without style.",name:"unstyled",required:!1,type:{name:"boolean"}},disablePortal:{defaultValue:{value:"false"},description:"Disable the portal behavior. The children stay within it's parent DOM hierarchy.",name:"disablePortal",required:!1,type:{name:"boolean"}},disableActivateOverlay:{defaultValue:{value:"false"},description:"If `true`, it prevents activating the overlay when clicking on the popper body.",name:"disableActivateOverlay",required:!1,type:{name:"boolean"}},disableOverlayManager:{defaultValue:{value:"false"},description:"If `true`, it disables z-index management via `state.overlays`.",name:"disableOverlayManager",required:!1,type:{name:"boolean"}},zIndex:{defaultValue:null,description:"@ignore",name:"zIndex",required:!1,type:{name:"number"}},autoUpdate:{defaultValue:{value:"false"},description:"Automatically updates the position of the floating element when necessary to ensure it stays anchored.",name:"autoUpdate",required:!1,type:{name:"boolean"}},inlineOptions:{defaultValue:null,description:"Improves positioning for inline reference elements that span over multiple lines.\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.",name:"inlineOptions",required:!1,type:{name:"boolean | InlineOptions"}},hideOptions:{defaultValue:{value:"true"},description:"The hide options can hide the popper when the reference is hidden.\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.",name:"hideOptions",required:!1,type:{name:'boolean | { strategy?: "referenceHidden" | "escaped"; rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; boundary?: Boundary; }'}},autoPlacementOptions:{defaultValue:{value:"false"},description:"The auto placement options can customize the behavior of the auto placement.\nNote: `flipOptions` and `autoPlacementOptions` cannot be used together inside the same middleware array; make sure you choose only one of them to use.",name:"autoPlacementOptions",required:!1,type:{name:"boolean | { crossAxis?: boolean; rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; alignment?: Alignment; autoAlignment?: boolean; allowedPlacements?: Placement[]; boundary?: Boundary; }"}},sizeOptions:{defaultValue:null,description:"Provides data to change the size of a floating element.\nThis is useful to ensure the floating element isn’t too big to fit in the viewport (or more specifically, its clipping context), especially when a maximum size isn’t specified.\nIt also allows matching the width/height of the reference element.\n\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.",name:"sizeOptions",required:!1,type:{name:"boolean | { rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; boundary?: Boundary; apply?: (args: { ...; } & { ...; }) => Promisable<...>; }"}},middleware:{defaultValue:null,description:'Middleware allow you to customize the behavior of the positioning and be as granular as you want, adding your own custom logic.\nIt is recommended to use `hideOptions`, `shiftOptions`, `flipOptions`, `offsetOptions` directly.\n"Node": If `middleware` is set, the above options will be ignored and the component\'s preset middleware will not be enabled.',name:"middleware",required:!1,type:{name:"{ name: string; options?: any; fn: (state: { placement: Placement; strategy: Strategy; middlewareData: MiddlewareData; x: number; y: number; initialPlacement: Placement; rects: ElementRects; platform: Platform; elements: Elements; }) => Promisable<...>; }[]"}},keepMount:{defaultValue:{value:"false"},description:"Whether to keep the popper mounted when it is not visible.",name:"keepMount",required:!1,type:{name:"boolean"}},version:{defaultValue:null,description:"When this value changes, will recalculate the position.\nNote: The `version` cannot be used together with `autoUpdate`, and `autoUpdate` has higher priority.\n@ignore",name:"version",required:!1,type:{name:"number"}},leftSidebarCollapse:{defaultValue:null,description:"",name:"leftSidebarCollapse",required:!0,type:{name:"boolean"}},rightSidebarCollapse:{defaultValue:null,description:"",name:"rightSidebarCollapse",required:!0,type:{name:"boolean"}},dispatch:{defaultValue:null,description:"",name:"dispatch",required:!0,type:{name:"any"}},isTemplatePage:{defaultValue:null,description:"",name:"isTemplatePage",required:!0,type:{name:"boolean"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"IMThemeVariables"}},layoutSelection:{defaultValue:null,description:"",name:"layoutSelection",required:!1,type:{name:"IMSelection"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/side-popper/index.tsx#_SidePopper"]={docgenInfo:side_popper_SidePopper.__docgenInfo,name:"_SidePopper",path:"../jimu-ui/advanced/lib/setting-components/components/side-popper/index.tsx#_SidePopper"})}catch(__react_docgen_typescript_loader_error){}try{SidePopper.displayName="SidePopper",SidePopper.__docgenInfo={description:"",displayName:"SidePopper",props:{children:{defaultValue:null,description:"A ref that points to the used popper instance.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"Provide a uniform header.",name:"title",required:!1,type:{name:"ReactNode"}},trigger:{defaultValue:null,description:"Element which triggers side popper.\n\nBy default, clicking left/right sidebar of builder will close the side popper automatically.\nClicking `trigger` won't close the side popper.",name:"trigger",required:!0,type:{name:"HTMLElement | HTMLElement[]"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.\n@ignore",name:"className",required:!1,type:{name:"string"}},tabIndex:{defaultValue:null,description:"The `tabIndex` added to the element.",name:"tabIndex",required:!1,type:{name:"number"}},role:{defaultValue:{value:"dialog"},description:"Defines the role added to the element.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-label":{defaultValue:null,description:"To provide a label for the side popper for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},"aria-modal":{defaultValue:null,description:"Indicates whether the element, or another grouping element it controls, is modal.",name:"aria-modal",required:!1,type:{name:"boolean"}},onKeyDown:{defaultValue:null,description:"Fired at an Element when a key is pressed down and that key normally produces a character value.",name:"onKeyDown",required:!1,type:{name:"KeyboardEventHandler<HTMLDivElement>"}},onClick:{defaultValue:null,description:"Fire callback when the component is clicked.",name:"onClick",required:!1,type:{name:"MouseEventHandler<HTMLDivElement>"}},onMouseDown:{defaultValue:null,description:"Callback fired when the mouse is pressed on the element.",name:"onMouseDown",required:!1,type:{name:"MouseEventHandler<HTMLDivElement>"}},onMouseEnter:{defaultValue:null,description:"Fired at an Element when a pointing device (usually a mouse) is initially moved so that its hotshots is within the element at which the event was fired.",name:"onMouseEnter",required:!1,type:{name:"MouseEventHandler<HTMLDivElement>"}},onMouseLeave:{defaultValue:null,description:"Fired at an Element when the cursor of a pointing device (usually a mouse) is moved out of it.",name:"onMouseLeave",required:!1,type:{name:"MouseEventHandler<HTMLDivElement>"}},placement:{defaultValue:{value:"bottom"},description:"Describes the preferred placement of the popper.",name:"placement",required:!1,type:{name:"enum",value:[{value:'"bottom"'},{value:'"left"'},{value:'"right"'},{value:'"top"'},{value:'"bottom-end"'},{value:'"bottom-start"'},{value:'"left-end"'},{value:'"left-start"'},{value:'"right-end"'},{value:'"right-start"'},{value:'"top-end"'},{value:'"top-start"'}]}},shiftOptions:{defaultValue:null,description:"The shift options can shift the popper when it will overflow the clipping boundary.\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.",name:"shiftOptions",required:!1,type:{name:"boolean | { mainAxis?: boolean; crossAxis?: boolean; limiter?: { fn: (state: MiddlewareState) => Coords; options?: any; }; rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; boundary?: Boundary; }"}},offsetOptions:{defaultValue:null,description:"The offset modifier can shift your popper on both its axis.\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.",name:"offsetOptions",required:!1,type:{name:"boolean | [number, number] | OffsetOptions"}},flipOptions:{defaultValue:{value:"true"},description:"The flip options can flip the popper when it will overflow the clipping boundary.\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.\nNote: `flipOptions` and `autoPlacementOptions` cannot be used together inside the same middleware array; make sure you choose only one of them to use.",name:"flipOptions",required:!1,type:{name:"boolean | { mainAxis?: boolean; crossAxis?: boolean; rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; ... 4 more ...; boundary?: Boundary; }"}},strategy:{defaultValue:{value:"absolute"},description:"Describes the positioning strategy to use.\nBy default, it is absolute, which in the simplest cases does not require repositioning of the popper.\nIf your reference element is in a fixed container, use the fixed strategy.",name:"strategy",required:!1,type:{name:"enum",value:[{value:'"fixed"'},{value:'"absolute"'}]}},arrowOptions:{defaultValue:{value:"false"},description:"The arrow options can show the arrow of the popper.\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.",name:"arrowOptions",required:!1,type:{name:"boolean | ArrowStyleOptions"}},unstyled:{defaultValue:null,description:"Whether to use this component without style.",name:"unstyled",required:!1,type:{name:"boolean"}},disablePortal:{defaultValue:{value:"false"},description:"Disable the portal behavior. The children stay within it's parent DOM hierarchy.",name:"disablePortal",required:!1,type:{name:"boolean"}},disableActivateOverlay:{defaultValue:{value:"false"},description:"If `true`, it prevents activating the overlay when clicking on the popper body.",name:"disableActivateOverlay",required:!1,type:{name:"boolean"}},disableOverlayManager:{defaultValue:{value:"false"},description:"If `true`, it disables z-index management via `state.overlays`.",name:"disableOverlayManager",required:!1,type:{name:"boolean"}},zIndex:{defaultValue:null,description:"@ignore",name:"zIndex",required:!1,type:{name:"number"}},autoUpdate:{defaultValue:{value:"false"},description:"Automatically updates the position of the floating element when necessary to ensure it stays anchored.",name:"autoUpdate",required:!1,type:{name:"boolean"}},inlineOptions:{defaultValue:null,description:"Improves positioning for inline reference elements that span over multiple lines.\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.",name:"inlineOptions",required:!1,type:{name:"boolean | InlineOptions"}},hideOptions:{defaultValue:{value:"true"},description:"The hide options can hide the popper when the reference is hidden.\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.",name:"hideOptions",required:!1,type:{name:'boolean | { strategy?: "referenceHidden" | "escaped"; rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; boundary?: Boundary; }'}},autoPlacementOptions:{defaultValue:{value:"false"},description:"The auto placement options can customize the behavior of the auto placement.\nNote: `flipOptions` and `autoPlacementOptions` cannot be used together inside the same middleware array; make sure you choose only one of them to use.",name:"autoPlacementOptions",required:!1,type:{name:"boolean | { crossAxis?: boolean; rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; alignment?: Alignment; autoAlignment?: boolean; allowedPlacements?: Placement[]; boundary?: Boundary; }"}},sizeOptions:{defaultValue:null,description:"Provides data to change the size of a floating element.\nThis is useful to ensure the floating element isn’t too big to fit in the viewport (or more specifically, its clipping context), especially when a maximum size isn’t specified.\nIt also allows matching the width/height of the reference element.\n\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.",name:"sizeOptions",required:!1,type:{name:"boolean | { rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; boundary?: Boundary; apply?: (args: { ...; } & { ...; }) => Promisable<...>; }"}},middleware:{defaultValue:null,description:'Middleware allow you to customize the behavior of the positioning and be as granular as you want, adding your own custom logic.\nIt is recommended to use `hideOptions`, `shiftOptions`, `flipOptions`, `offsetOptions` directly.\n"Node": If `middleware` is set, the above options will be ignored and the component\'s preset middleware will not be enabled.',name:"middleware",required:!1,type:{name:"{ name: string; options?: any; fn: (state: { placement: Placement; strategy: Strategy; middlewareData: MiddlewareData; x: number; y: number; initialPlacement: Placement; rects: ElementRects; platform: Platform; elements: Elements; }) => Promisable<...>; }[]"}},keepMount:{defaultValue:{value:"false"},description:"Whether to keep the popper mounted when it is not visible.",name:"keepMount",required:!1,type:{name:"boolean"}},version:{defaultValue:null,description:"When this value changes, will recalculate the position.\nNote: The `version` cannot be used together with `autoUpdate`, and `autoUpdate` has higher priority.\n@ignore",name:"version",required:!1,type:{name:"number"}},isOpen:{defaultValue:null,description:"If `true`, the side popper is visible.",name:"isOpen",required:!0,type:{name:"boolean"}},toggle:{defaultValue:null,description:"Toggle to open/close the side popper.",name:"toggle",required:!0,type:{name:"() => void"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"IMThemeVariables"}},widgetId:{defaultValue:null,description:"If current selected widget is not the widget, will close the side popper.",name:"widgetId",required:!1,type:{name:"string"}},position:{defaultValue:null,description:"If `left`, the side popper is next to left sidebar of builder.\nIf `right`, the side popper is next to right sidebar of builder.",name:"position",required:!0,type:{name:"enum",value:[{value:'"left"'},{value:'"right"'}]}},backToFocusNode:{defaultValue:null,description:"An element to focus after the side popper is closed.\n`backToFocusNode` is for accessibility purposes.\n\nIf don't pass in `backToFocusNode`, will focus `trigger` after side popper is closed.",name:"backToFocusNode",required:!1,type:{name:"HTMLElement"}},addFocusableContainerClass:{defaultValue:{value:"false\r\nAdd the FOCUSABLE_CONTAINER_CLASS to the title to make the close button focused in case of 508 problems.\r\n\r\nOnly needs this prop if the components in the content of the SidePopper uses FOCUSABLE_CONTAINER_CLASS."},description:"@ignore",name:"addFocusableContainerClass",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/side-popper/index.tsx#SidePopper"]={docgenInfo:SidePopper.__docgenInfo,name:"SidePopper",path:"../jimu-ui/advanced/lib/setting-components/components/side-popper/index.tsx#SidePopper"})}catch(__react_docgen_typescript_loader_error){}class link_selector_side_popper_LinkSelectorSidePopper extends jimu_core.q_G.PureComponent{constructor(){super(...arguments),this.close=()=>{this.props.onSettingCancel()},this.getIsOpen=()=>this.props.isOpen||this.props.showDialog}render(){const position=this.props.position||"right",{title}=this.props;return jimu_core.q_G.createElement(SidePopper,{isOpen:this.getIsOpen(),position,toggle:this.close,trigger:this.props.trigger,backToFocusNode:this.props.backToFocusNode,widgetId:this.props.widgetId,title:this.props.intl.formatMessage({id:title?"setLinkForTitle":"setLink",defaultMessage:title?jimu_ui.defaultMessages.setLinkForTitle:jimu_ui.defaultMessages.setLink},{title})},jimu_core.q_G.createElement("div",{className:"bg-default w-100 h-100 px-4"},jimu_core.q_G.createElement(components_link_selector_content_LinkSelectorContent,{isLinkPageSetting:this.props.isLinkPageSetting,linkParam:this.props.linkParam,onSettingConfirm:this.props.onSettingConfirm,useDataSources:this.props.useDataSources,widgetId:this.props.widgetId,hiddenLinks:this.props.hiddenLinks,openTypes:this.props.openTypes})))}}const components_link_selector_side_popper_LinkSelectorSidePopper=(0,jimu_core.j4T)((0,jimu_theme.SL)(link_selector_side_popper_LinkSelectorSidePopper)),link_selector_side_popper_LinkSettingPopup=components_link_selector_side_popper_LinkSelectorSidePopper;try{link_selector_side_popper_LinkSelectorSidePopper.displayName="_LinkSelectorSidePopper",link_selector_side_popper_LinkSelectorSidePopper.__docgenInfo={description:"The `LinkSelectorSidePopper` component allows users to configure a link using a popup.\n\n```ts\nimport { LinkSelectorSidePopper } from 'jimu-ui/advanced/setting-components'\n```",displayName:"_LinkSelectorSidePopper",props:{onSettingCancel:{defaultValue:null,description:"Callback when cancel setting.",name:"onSettingCancel",required:!1,type:{name:"() => void"}},isOpen:{defaultValue:null,description:"Whether to show the setting popup.",name:"isOpen",required:!1,type:{name:"boolean"}},trigger:{defaultValue:null,description:"See `SidePopper` in jimu-ui/advanced/setting-components for more details.",name:"trigger",required:!1,type:{name:"HTMLElement | HTMLElement[]"}},backToFocusNode:{defaultValue:null,description:"See `SidePopper` in jimu-ui/advanced/setting-components for more details.",name:"backToFocusNode",required:!1,type:{name:"HTMLElement"}},showDialog:{defaultValue:null,description:"@ignore\n@deprecated Same with `isOpen`.",name:"showDialog",required:!1,type:{name:"boolean"}},isLinkPageSetting:{defaultValue:null,description:"@ignore",name:"isLinkPageSetting",required:!1,type:{name:"boolean"}},position:{defaultValue:null,description:"The popup shows next to left panel of builder or right panel of builder.",name:"position",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"right"'}]}},title:{defaultValue:null,description:"The title of the popup.",name:"title",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"@ignore Only used by theme.",name:"className",required:!1,type:{name:"string"}},linkParam:{defaultValue:null,description:"The setting result.\n`IMLinkParam` is an interface.\n\n```ts\nimport { IMLinkParam } from 'jimu-ui/advanced/setting-components'\n```",name:"linkParam",required:!1,type:{name:"IMLinkParam"}},onSettingConfirm:{defaultValue:null,description:"Callback when setting result is changed.",name:"onSettingConfirm",required:!1,type:{name:"(linkParam: IMLinkParam) => void"}},widgetId:{defaultValue:null,description:"Use widget id to get widget context, e.g. whether widget is in repeated data source context.",name:"widgetId",required:!1,type:{name:"string"}},useDataSources:{defaultValue:null,description:"Widget's `useDataSources`, which means data sources that widget is using.\nIf pass `useDataSources`, link can use these data sources to build `Expression` **(see `jimu-core` API documentation)**.\n\n```ts\nimport { UseDataSource } from 'jimu-core'\n```",name:"useDataSources",required:!1,type:{name:"ImmutableArray<UseDataSource>"}},hiddenLinks:{defaultValue:null,description:"Hide some types of link.\n\n```ts\nimport { LinkType } from 'jimu-core'\n```",name:"hiddenLinks",required:!1,type:{name:"ImmutableArray<LinkType>"}},openTypes:{defaultValue:null,description:"Link targets can be set.\n`OpenTypes` is similar with HTML `<a>` target attribute.\n\n```ts\nimport { OpenTypes } from 'jimu-ui/advanced/setting-components'\n```",name:"openTypes",required:!1,type:{name:"ImmutableArray<OpenTypes>"}},theme:{defaultValue:null,description:"@ignore",name:"theme",required:!1,type:{name:"IMThemeVariables"}},intl:{defaultValue:null,description:"@ignore",name:"intl",required:!0,type:{name:"IntlShape"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-side-popper.tsx#_LinkSelectorSidePopper"]={docgenInfo:link_selector_side_popper_LinkSelectorSidePopper.__docgenInfo,name:"_LinkSelectorSidePopper",path:"../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-side-popper.tsx#_LinkSelectorSidePopper"})}catch(__react_docgen_typescript_loader_error){}try{components_link_selector_side_popper_LinkSelectorSidePopper.displayName="LinkSelectorSidePopper",components_link_selector_side_popper_LinkSelectorSidePopper.__docgenInfo={description:"A component to set link, such as link to a view, a page or url",displayName:"LinkSelectorSidePopper",props:{title:{defaultValue:null,description:"The title of the popup.",name:"title",required:!1,type:{name:"string"}},trigger:{defaultValue:null,description:"See `SidePopper` in jimu-ui/advanced/setting-components for more details.",name:"trigger",required:!1,type:{name:"HTMLElement | HTMLElement[]"}},className:{defaultValue:null,description:"@ignore Only used by theme.",name:"className",required:!1,type:{name:"string"}},isOpen:{defaultValue:null,description:"Whether to show the setting popup.",name:"isOpen",required:!1,type:{name:"boolean"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"IMThemeVariables"}},widgetId:{defaultValue:null,description:"Use widget id to get widget context, e.g. whether widget is in repeated data source context.",name:"widgetId",required:!1,type:{name:"string"}},position:{defaultValue:null,description:"The popup shows next to left panel of builder or right panel of builder.",name:"position",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"right"'}]}},useDataSources:{defaultValue:null,description:"Widget's `useDataSources`, which means data sources that widget is using.\nIf pass `useDataSources`, link can use these data sources to build `Expression` **(see `jimu-core` API documentation)**.\n\n```ts\nimport { UseDataSource } from 'jimu-core'\n```",name:"useDataSources",required:!1,type:{name:"ImmutableArray<UseDataSource>"}},backToFocusNode:{defaultValue:null,description:"See `SidePopper` in jimu-ui/advanced/setting-components for more details.",name:"backToFocusNode",required:!1,type:{name:"HTMLElement"}},onSettingCancel:{defaultValue:null,description:"Callback when cancel setting.",name:"onSettingCancel",required:!1,type:{name:"() => void"}},showDialog:{defaultValue:null,description:"@ignore\n@deprecated Same with `isOpen`.",name:"showDialog",required:!1,type:{name:"boolean"}},isLinkPageSetting:{defaultValue:null,description:"@ignore",name:"isLinkPageSetting",required:!1,type:{name:"boolean"}},linkParam:{defaultValue:null,description:"The setting result.\n`IMLinkParam` is an interface.\n\n```ts\nimport { IMLinkParam } from 'jimu-ui/advanced/setting-components'\n```",name:"linkParam",required:!1,type:{name:"IMLinkParam"}},onSettingConfirm:{defaultValue:null,description:"Callback when setting result is changed.",name:"onSettingConfirm",required:!1,type:{name:"(linkParam: IMLinkParam) => void"}},hiddenLinks:{defaultValue:null,description:"Hide some types of link.\n\n```ts\nimport { LinkType } from 'jimu-core'\n```",name:"hiddenLinks",required:!1,type:{name:"ImmutableArray<LinkType>"}},openTypes:{defaultValue:null,description:"Link targets can be set.\n`OpenTypes` is similar with HTML `<a>` target attribute.\n\n```ts\nimport { OpenTypes } from 'jimu-ui/advanced/setting-components'\n```",name:"openTypes",required:!1,type:{name:"ImmutableArray<OpenTypes>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-side-popper.tsx#LinkSelectorSidePopper"]={docgenInfo:components_link_selector_side_popper_LinkSelectorSidePopper.__docgenInfo,name:"LinkSelectorSidePopper",path:"../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-side-popper.tsx#LinkSelectorSidePopper"})}catch(__react_docgen_typescript_loader_error){}try{link_selector_side_popper_LinkSettingPopup.displayName="LinkSettingPopup",link_selector_side_popper_LinkSettingPopup.__docgenInfo={description:"",displayName:"LinkSettingPopup",props:{title:{defaultValue:null,description:"The title of the popup.",name:"title",required:!1,type:{name:"string"}},trigger:{defaultValue:null,description:"See `SidePopper` in jimu-ui/advanced/setting-components for more details.",name:"trigger",required:!1,type:{name:"HTMLElement | HTMLElement[]"}},className:{defaultValue:null,description:"@ignore Only used by theme.",name:"className",required:!1,type:{name:"string"}},isOpen:{defaultValue:null,description:"Whether to show the setting popup.",name:"isOpen",required:!1,type:{name:"boolean"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"IMThemeVariables"}},widgetId:{defaultValue:null,description:"Use widget id to get widget context, e.g. whether widget is in repeated data source context.",name:"widgetId",required:!1,type:{name:"string"}},position:{defaultValue:null,description:"The popup shows next to left panel of builder or right panel of builder.",name:"position",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"right"'}]}},useDataSources:{defaultValue:null,description:"Widget's `useDataSources`, which means data sources that widget is using.\nIf pass `useDataSources`, link can use these data sources to build `Expression` **(see `jimu-core` API documentation)**.\n\n```ts\nimport { UseDataSource } from 'jimu-core'\n```",name:"useDataSources",required:!1,type:{name:"ImmutableArray<UseDataSource>"}},backToFocusNode:{defaultValue:null,description:"See `SidePopper` in jimu-ui/advanced/setting-components for more details.",name:"backToFocusNode",required:!1,type:{name:"HTMLElement"}},onSettingCancel:{defaultValue:null,description:"Callback when cancel setting.",name:"onSettingCancel",required:!1,type:{name:"() => void"}},showDialog:{defaultValue:null,description:"@ignore\n@deprecated Same with `isOpen`.",name:"showDialog",required:!1,type:{name:"boolean"}},isLinkPageSetting:{defaultValue:null,description:"@ignore",name:"isLinkPageSetting",required:!1,type:{name:"boolean"}},linkParam:{defaultValue:null,description:"The setting result.\n`IMLinkParam` is an interface.\n\n```ts\nimport { IMLinkParam } from 'jimu-ui/advanced/setting-components'\n```",name:"linkParam",required:!1,type:{name:"IMLinkParam"}},onSettingConfirm:{defaultValue:null,description:"Callback when setting result is changed.",name:"onSettingConfirm",required:!1,type:{name:"(linkParam: IMLinkParam) => void"}},hiddenLinks:{defaultValue:null,description:"Hide some types of link.\n\n```ts\nimport { LinkType } from 'jimu-core'\n```",name:"hiddenLinks",required:!1,type:{name:"ImmutableArray<LinkType>"}},openTypes:{defaultValue:null,description:"Link targets can be set.\n`OpenTypes` is similar with HTML `<a>` target attribute.\n\n```ts\nimport { OpenTypes } from 'jimu-ui/advanced/setting-components'\n```",name:"openTypes",required:!1,type:{name:"ImmutableArray<OpenTypes>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-side-popper.tsx#LinkSettingPopup"]={docgenInfo:link_selector_side_popper_LinkSettingPopup.__docgenInfo,name:"LinkSettingPopup",path:"../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector-side-popper.tsx#LinkSettingPopup"})}catch(__react_docgen_typescript_loader_error){}var link_tilted=__webpack_require__("../jimu-icons/outlined/data/link-tilted.tsx"),link_selector_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};class link_selector_LinkSelector extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.linkSelectorTrigger=jimu_core.q_G.createRef(),this.toggle=()=>{const newIsOpen=!this.state.isOpen;this.setState({isOpen:newIsOpen},(()=>{this.setState({renderPopper:newIsOpen})}))},this.onCancel=()=>{var _a,_b;null===(_b=(_a=this.props).onSettingCancel)||void 0===_b||_b.call(_a),this.toggle()},this.onConfirm=linkParam=>{var _a,_b;null===(_b=(_a=this.props).onSettingConfirm)||void 0===_b||_b.call(_a,linkParam),this.toggle()},this.getIsOpen=()=>this.state.isOpen&&!jimu_core.v6q.getAppIdPageIdFromUrl().pageId,this.state={isOpen:!1,renderPopper:!1}}render(){const _a=this.props,{theme,intl,buttonLabel}=_a,otherProps=link_selector_rest(_a,["theme","intl","buttonLabel"]),label=buttonLabel||this.props.intl.formatMessage({id:"setLink",defaultMessage:jimu_ui.defaultMessages.setLink});return jimu_core.q_G.createElement(jimu_core.q_G.Fragment,null,jimu_core.q_G.createElement(jimu_ui.Button,{className:"w-100 text-overlay",type:"primary",onClick:this.toggle,ref:this.linkSelectorTrigger,title:label},jimu_core.q_G.createElement("div",{className:"w-100 px-2 text-truncate"},jimu_core.q_G.createElement(link_tilted.f,{className:"text-overlay mr-1"}),label)),this.state.renderPopper&&jimu_core.q_G.createElement(components_link_selector_side_popper_LinkSelectorSidePopper,Object.assign({},otherProps,{isOpen:this.getIsOpen(),position:"right",onSettingCancel:this.onCancel,onSettingConfirm:this.onConfirm,trigger:this.linkSelectorTrigger.current,widgetId:this.props.widgetId})))}}const components_link_selector_LinkSelector=(0,jimu_theme.SL)((0,jimu_core.j4T)(link_selector_LinkSelector));try{link_selector_LinkSelector.displayName="_LinkSelector",link_selector_LinkSelector.__docgenInfo={description:"The `LinkSelector` component allows users to configure a link using a popup.\n\n```ts\nimport { LinkSelector } from 'jimu-ui/advanced/setting-components'\n```",displayName:"_LinkSelector",props:{buttonLabel:{defaultValue:{value:"Set link"},description:"Label of the button which can trigger link selector popup.",name:"buttonLabel",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"The title of the popup.",name:"title",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"@ignore Only used by theme.",name:"className",required:!1,type:{name:"string"}},widgetId:{defaultValue:null,description:"Use widget id to get widget context, e.g. whether widget is in repeated data source context.",name:"widgetId",required:!1,type:{name:"string"}},useDataSources:{defaultValue:null,description:"Widget's `useDataSources`, which means data sources that widget is using.\nIf pass `useDataSources`, link can use these data sources to build `Expression` **(see `jimu-core` API documentation)**.\n\n```ts\nimport { UseDataSource } from 'jimu-core'\n```",name:"useDataSources",required:!1,type:{name:"ImmutableArray<UseDataSource>"}},backToFocusNode:{defaultValue:null,description:"See `SidePopper` in jimu-ui/advanced/setting-components for more details.",name:"backToFocusNode",required:!1,type:{name:"HTMLElement"}},onSettingCancel:{defaultValue:null,description:"Callback when cancel setting.",name:"onSettingCancel",required:!1,type:{name:"() => void"}},showDialog:{defaultValue:null,description:"@ignore\n@deprecated Same with `isOpen`.",name:"showDialog",required:!1,type:{name:"boolean"}},isLinkPageSetting:{defaultValue:null,description:"@ignore",name:"isLinkPageSetting",required:!1,type:{name:"boolean"}},linkParam:{defaultValue:null,description:"The setting result.\n`IMLinkParam` is an interface.\n\n```ts\nimport { IMLinkParam } from 'jimu-ui/advanced/setting-components'\n```",name:"linkParam",required:!1,type:{name:"IMLinkParam"}},onSettingConfirm:{defaultValue:null,description:"Callback when setting result is changed.",name:"onSettingConfirm",required:!1,type:{name:"(linkParam: IMLinkParam) => void"}},hiddenLinks:{defaultValue:null,description:"Hide some types of link.\n\n```ts\nimport { LinkType } from 'jimu-core'\n```",name:"hiddenLinks",required:!1,type:{name:"ImmutableArray<LinkType>"}},openTypes:{defaultValue:null,description:"Link targets can be set.\n`OpenTypes` is similar with HTML `<a>` target attribute.\n\n```ts\nimport { OpenTypes } from 'jimu-ui/advanced/setting-components'\n```",name:"openTypes",required:!1,type:{name:"ImmutableArray<OpenTypes>"}},theme:{defaultValue:null,description:"@ignore",name:"theme",required:!1,type:{name:"IMThemeVariables"}},intl:{defaultValue:null,description:"@ignore",name:"intl",required:!0,type:{name:"IntlShape"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector.tsx#_LinkSelector"]={docgenInfo:link_selector_LinkSelector.__docgenInfo,name:"_LinkSelector",path:"../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector.tsx#_LinkSelector"})}catch(__react_docgen_typescript_loader_error){}try{components_link_selector_LinkSelector.displayName="LinkSelector",components_link_selector_LinkSelector.__docgenInfo={description:"A component to set link, such as link to a view, a page or url",displayName:"LinkSelector",props:{title:{defaultValue:null,description:"The title of the popup.",name:"title",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"@ignore Only used by theme.",name:"className",required:!1,type:{name:"string"}},widgetId:{defaultValue:null,description:"Use widget id to get widget context, e.g. whether widget is in repeated data source context.",name:"widgetId",required:!1,type:{name:"string"}},useDataSources:{defaultValue:null,description:"Widget's `useDataSources`, which means data sources that widget is using.\nIf pass `useDataSources`, link can use these data sources to build `Expression` **(see `jimu-core` API documentation)**.\n\n```ts\nimport { UseDataSource } from 'jimu-core'\n```",name:"useDataSources",required:!1,type:{name:"ImmutableArray<UseDataSource>"}},buttonLabel:{defaultValue:{value:"Set link"},description:"Label of the button which can trigger link selector popup.",name:"buttonLabel",required:!1,type:{name:"string"}},backToFocusNode:{defaultValue:null,description:"See `SidePopper` in jimu-ui/advanced/setting-components for more details.",name:"backToFocusNode",required:!1,type:{name:"HTMLElement"}},onSettingCancel:{defaultValue:null,description:"Callback when cancel setting.",name:"onSettingCancel",required:!1,type:{name:"() => void"}},showDialog:{defaultValue:null,description:"@ignore\n@deprecated Same with `isOpen`.",name:"showDialog",required:!1,type:{name:"boolean"}},isLinkPageSetting:{defaultValue:null,description:"@ignore",name:"isLinkPageSetting",required:!1,type:{name:"boolean"}},linkParam:{defaultValue:null,description:"The setting result.\n`IMLinkParam` is an interface.\n\n```ts\nimport { IMLinkParam } from 'jimu-ui/advanced/setting-components'\n```",name:"linkParam",required:!1,type:{name:"IMLinkParam"}},onSettingConfirm:{defaultValue:null,description:"Callback when setting result is changed.",name:"onSettingConfirm",required:!1,type:{name:"(linkParam: IMLinkParam) => void"}},hiddenLinks:{defaultValue:null,description:"Hide some types of link.\n\n```ts\nimport { LinkType } from 'jimu-core'\n```",name:"hiddenLinks",required:!1,type:{name:"ImmutableArray<LinkType>"}},openTypes:{defaultValue:null,description:"Link targets can be set.\n`OpenTypes` is similar with HTML `<a>` target attribute.\n\n```ts\nimport { OpenTypes } from 'jimu-ui/advanced/setting-components'\n```",name:"openTypes",required:!1,type:{name:"ImmutableArray<OpenTypes>"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"IMThemeVariables"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector.tsx#LinkSelector"]={docgenInfo:components_link_selector_LinkSelector.__docgenInfo,name:"LinkSelector",path:"../jimu-ui/advanced/lib/setting-components/components/link-selector/components/link-selector.tsx#LinkSelector"})}catch(__react_docgen_typescript_loader_error){}var data_source_selector=__webpack_require__("../jimu-ui/advanced/data-source-selector.tsx"),utils_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};function getNeedProxyItems(){return utils_awaiter(this,void 0,void 0,(function*(){const needProxyDataSources=yield getNeedProxyDataSources(),needProxyUtilities=yield getNeedProxyUtilities(),needProxyItems={};return Object.keys(needProxyDataSources).forEach((sourceUrl=>{needProxyItems[sourceUrl]||(needProxyItems[sourceUrl]={items:[],isPremium:needProxyDataSources[sourceUrl].isPremium,isSubscriber:needProxyDataSources[sourceUrl].isSubscriber}),needProxyItems[sourceUrl].items=needProxyItems[sourceUrl].items.concat(needProxyDataSources[sourceUrl].dataSources.map((ds=>({label:jimu_core.ZkX.getLabelFromArcGISServiceUrl(sourceUrl),id:ds.id}))))})),Object.keys(needProxyUtilities).forEach((sourceUrl=>{needProxyItems[sourceUrl]||(needProxyItems[sourceUrl]={items:[],isPremium:needProxyUtilities[sourceUrl].isPremium,isSubscriber:needProxyUtilities[sourceUrl].isSubscriber}),needProxyItems[sourceUrl].items=needProxyItems[sourceUrl].items.concat(needProxyUtilities[sourceUrl].utilities.map((u=>{const utilityJson=jimu_core.IOh.getInstance().getUtilityJson(u.utilityId);return{label:(null==utilityJson?void 0:utilityJson.label)||(null==utilityJson?void 0:utilityJson.name)||(null==utilityJson?void 0:utilityJson.sourceLabel),id:u.utilityId}})))})),needProxyItems}))}function getNeedProxyDataSources(){return utils_awaiter(this,void 0,void 0,(function*(){var _a,_b,_c,_d;const dataSourceJsons=null===(_d=null===(_c=null===(_b=null===(_a=(0,jimu_core.Vp3)())||void 0===_a?void 0:_a.getState())||void 0===_b?void 0:_b.appStateInBuilder)||void 0===_c?void 0:_c.appConfig)||void 0===_d?void 0:_d.dataSources,checkPromises=[];return dataSourceJsons&&Object.keys(dataSourceJsons).forEach((dsId=>{const ds=jimu_core.zAk.getInstance().getDataSource(dsId);checkPromises.push(traverseToGetNeedProxyDataSources(ds))})),Promise.allSettled(checkPromises).then((checkResultArr=>{let finalResult={};return checkResultArr.filter((c=>"fulfilled"===c.status)).map((c=>c.value)).forEach((res=>{res&&Object.keys(res).forEach((sourceUrl=>{finalResult[sourceUrl]?finalResult[sourceUrl].dataSources=finalResult[sourceUrl].dataSources.concat(res[sourceUrl].dataSources):finalResult=Object.assign(Object.assign({},finalResult),res)}))})),finalResult}))}))}function getNeedProxyUtilities(){return utils_awaiter(this,void 0,void 0,(function*(){var _a,_b,_c,_d;const utilityJsons=null===(_d=null===(_c=null===(_b=null===(_a=(0,jimu_core.Vp3)())||void 0===_a?void 0:_a.getState())||void 0===_b?void 0:_b.appStateInBuilder)||void 0===_c?void 0:_c.appConfig)||void 0===_d?void 0:_d.utilities,checkPromises=[];return utilityJsons&&Object.keys(utilityJsons).forEach((uId=>{checkPromises.push(function getSingleNeedProxyUtility(utilityJson){return utils_awaiter(this,void 0,void 0,(function*(){var _a,_b,_c,_d;const result={};if(!utilityJson)return result;const widgets=null===(_d=null===(_c=null===(_b=null===(_a=(0,jimu_core.Vp3)())||void 0===_a?void 0:_a.getState())||void 0===_b?void 0:_b.appStateInBuilder)||void 0===_c?void 0:_c.appConfig)||void 0===_d?void 0:_d.widgets,isUsed=widgets&&Object.values(widgets).some((w=>{var _a;return null===(_a=w.useUtilities)||void 0===_a?void 0:_a.some((u=>u.utilityId===utilityJson.id))})),sourceUrl=utilityJson.url;if(sourceUrl&&isUsed){const isPrm=yield jimu_core.ovz.isUtilityPremium(utilityJson),isSub=yield jimu_core.ovz.isUtilitySubscriber(utilityJson);if(isPrm||isSub){const utility=yield jimu_core.IOh.getInstance().getUtility(utilityJson.id);result[sourceUrl]={utilities:[utility],isPremium:isPrm,isSubscriber:isSub}}}return result}))}(utilityJsons[uId]))})),Promise.allSettled(checkPromises).then((checkResultArr=>{let finalResult={};return checkResultArr.filter((c=>"fulfilled"===c.status)).map((c=>c.value)).forEach((res=>{res&&Object.keys(res).forEach((sourceUrl=>{finalResult[sourceUrl]?finalResult[sourceUrl].utilities=finalResult[sourceUrl].utilities.concat(res[sourceUrl].utilities):finalResult=Object.assign(Object.assign({},finalResult),res)}))})),finalResult}))}))}function traverseToGetNeedProxyDataSources(dataSource_1){return utils_awaiter(this,arguments,void 0,(function*(dataSource,forceToCreateProxy=!1){var _a,_b,_c,_d,_e,_f;const result={};if(!dataSource)return result;dataSource.isDataSourceSet()&&!dataSource.areChildDataSourcesCreated()&&(yield dataSource.childDataSourcesReady());const widgets=null===(_d=null===(_c=null===(_b=null===(_a=(0,jimu_core.Vp3)())||void 0===_a?void 0:_a.getState())||void 0===_b?void 0:_b.appStateInBuilder)||void 0===_c?void 0:_c.appConfig)||void 0===_d?void 0:_d.widgets,isMainDs=(null===(_e=dataSource.getMainDataSource())||void 0===_e?void 0:_e.id)===dataSource.id,isUsed=data_source_selector.dataComponentsUtils.getWidgetsUsingDsOrItsViews(dataSource.id,widgets,!1).length>0,sourceUrl=jimu_core.ZkX.getFullArcGISServiceUrl(null===(_f=dataSource.getDataSourceJson())||void 0===_f?void 0:_f.url,!1);if(isMainDs&&sourceUrl&&(forceToCreateProxy||isUsed)){const isPrm=yield jimu_core.ovz.isDataSourcePremium(dataSource.getDataSourceJson()),isSub=yield jimu_core.ovz.isDataSourceSubscriber(dataSource.getDataSourceJson());(isPrm||isSub)&&(result[sourceUrl]={dataSources:[dataSource],isPremium:isPrm,isSubscriber:isSub})}const checkChildDssPromises=[];if(isMainDs&&dataSource.isDataSourceSet()){const allChildDataSourcesNeedProxy=(dataSource.type===jimu_core.at.WebMap||dataSource.type===jimu_core.at.WebScene)&&isUsed||forceToCreateProxy;dataSource.getChildDataSources().forEach((childDs=>{checkChildDssPromises.push(traverseToGetNeedProxyDataSources(childDs,allChildDataSourcesNeedProxy))}))}return Promise.allSettled(checkChildDssPromises).then((checkChildDssResultArr=>{let parentAndChildrenRes=result;return checkChildDssResultArr.filter((c=>"fulfilled"===c.status)).map((c=>c.value)).forEach((res=>{res&&Object.keys(res).forEach((sourceUrl=>{parentAndChildrenRes[sourceUrl]?parentAndChildrenRes[sourceUrl].dataSources=parentAndChildrenRes[sourceUrl].dataSources.concat(res[sourceUrl].dataSources):parentAndChildrenRes=Object.assign(Object.assign({},parentAndChildrenRes),res)}))})),parentAndChildrenRes}))}))}function getProxyJsonFromSourceUrl(sourceUrl,appProxies){var _a;if(!sourceUrl||!appProxies)return null;let proxy=null;for(const proxyId in appProxies)if((null===(_a=appProxies[proxyId])||void 0===_a?void 0:_a.sourceUrl)===sourceUrl){proxy=appProxies[proxyId];break}return proxy}function isSameProxy(existingProxyJson,sourceUrl,hitsPerInterval,intervalSeconds){if(!existingProxyJson||!sourceUrl)return!1;if(!(existingProxyJson.sourceUrl===sourceUrl))return!1;if(!(!existingProxyJson.hitsPerInterval&&!hitsPerInterval||existingProxyJson.hitsPerInterval===hitsPerInterval))return!1;return!((existingProxyJson.intervalSeconds||intervalSeconds)&&existingProxyJson.intervalSeconds!==intervalSeconds)}function isRegisteredApp(){var _a,_b;const appItem=null===(_a=(0,jimu_core.Vp3)().getState())||void 0===_a?void 0:_a.appStateInBuilder.appInfo;return null===(_b=null==appItem?void 0:appItem.typeKeywords)||void 0===_b?void 0:_b.includes("Registered App")}function needToConfigProxy(){return utils_awaiter(this,void 0,void 0,(function*(){var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k;if(!(!(null===(_c=null===(_b=null===(_a=(0,jimu_core.Vp3)().getState())||void 0===_a?void 0:_a.appContext)||void 0===_b?void 0:_b.jimuConfig)||void 0===_c?void 0:_c.isInPortal)&&!(null===(_f=null===(_e=null===(_d=(0,jimu_core.Vp3)().getState())||void 0===_d?void 0:_d.appContext)||void 0===_e?void 0:_e.jimuConfig)||void 0===_f?void 0:_f.isDevEdition)))return yield Promise.resolve(!1);const isRegistered=isRegisteredApp();let isOwner=!1;if(!isRegistered){const appItem=null===(_g=(0,jimu_core.Vp3)().getState())||void 0===_g?void 0:_g.appStateInBuilder.appInfo,currentUser=null===(_k=null===(_j=null===(_h=(0,jimu_core.Vp3)().getState())||void 0===_h?void 0:_h.appStateInBuilder)||void 0===_j?void 0:_j.user)||void 0===_k?void 0:_k.username;isOwner=(null==appItem?void 0:appItem.owner)===currentUser}if(!(isRegistered||isOwner))return yield Promise.resolve(!1);const needProxyItems=yield getNeedProxyItems(),checkIsSourceUrlHostedInSamePortal=Object.keys(needProxyItems).map((sourceUrl=>utils_awaiter(this,void 0,void 0,(function*(){return yield jimu_core.ljd.getInstance().fetchServiceInfo(sourceUrl).then((res=>res.isHostedInSamePortal))}))));return Promise.allSettled(checkIsSourceUrlHostedInSamePortal).then((checkResults=>checkResults.filter((c=>"fulfilled"===c.status)).map((c=>c.value)))).then((res=>(null==res?void 0:res.length)>0&&(null==res?void 0:res.some((r=>r)))))}))}function deleteProxies(proxyIds,action){return utils_awaiter(this,void 0,void 0,(function*(){if(!proxyIds||0===proxyIds.length||!action)return void(yield Promise.resolve());const deleteProxyUrl=getDeleteProxyUrl();yield jimu_core._2M.restRequest.request(deleteProxyUrl,{authentication:jimu_core.Cvv.getInstance().getSessionByUrl((0,jimu_core.Vp3)().getState().portalUrl),httpMethod:"POST",params:{proxies:proxyIds.join()}}).then((res=>utils_awaiter(this,void 0,void 0,(function*(){var _a;return res.results&&Object.values(res.results).forEach((r=>{r.success&&removeAppProxiesInConfig(r.proxyId,action)})),null==action||action.exec(),(null===(_a=res.results)||void 0===_a?void 0:_a.every((r=>!0===r.success)))?Promise.resolve():Promise.reject(new Error(`Deleting existing proxy failed: ${JSON.stringify(res)}`))})))).catch((err=>utils_awaiter(this,void 0,void 0,(function*(){return proxyIds.forEach((proxyId=>{removeAppProxiesInConfig(proxyId,action)})),null==action||action.exec(),Promise.reject(new Error(`Deleting existing proxy failed: ${JSON.stringify(err)}`))}))))}))}function removeAppProxiesInConfig(proxyId,action){var _a,_b,_c;const existingProxyJsons=null===(_c=null===(_b=null===(_a=(0,jimu_core.Vp3)().getState())||void 0===_a?void 0:_a.appStateInBuilder)||void 0===_b?void 0:_b.appConfig)||void 0===_c?void 0:_c.appProxies,proxyJson=existingProxyJsons&&Object.values(existingProxyJsons).find((p=>p.proxyId===proxyId));proxyJson&&(null==action||action.removeAppProxy(proxyJson.id))}function getProxyRootUrl(){var _a,_b,_c,_d,_e,_f,_g;const portalUrl=null===(_b=null===(_a=(0,jimu_core.Vp3)().getState())||void 0===_a?void 0:_a.appStateInBuilder)||void 0===_b?void 0:_b.portalUrl,appId=null===(_d=null===(_c=(0,jimu_core.Vp3)().getState())||void 0===_c?void 0:_c.appStateInBuilder)||void 0===_d?void 0:_d.appId;return`${portalUrl}/sharing/rest/content/users/${null===(_g=null===(_f=null===(_e=(0,jimu_core.Vp3)().getState())||void 0===_e?void 0:_e.appStateInBuilder)||void 0===_f?void 0:_f.appInfo)||void 0===_g?void 0:_g.owner}/items/${appId}`}function getCreateProxyUrl(){return`${getProxyRootUrl()}/createProxies`}function getDeleteProxyUrl(){return`${getProxyRootUrl()}/deleteProxies`}var check=__webpack_require__("../jimu-icons/outlined/application/check.tsx");class ProxySettingItem extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.__unmount=!1,this.interval={none:this.props.intl.formatMessage({id:"intervalNone",defaultMessage:jimu_ui.defaultMessages.intervalNone}),second:this.props.intl.formatMessage({id:"intervalSecond",defaultMessage:jimu_ui.defaultMessages.intervalSecond}),minute:this.props.intl.formatMessage({id:"intervalMinute",defaultMessage:jimu_ui.defaultMessages.intervalMinute}),hour:this.props.intl.formatMessage({id:"intervalHour",defaultMessage:jimu_ui.defaultMessages.intervalHour}),day:this.props.intl.formatMessage({id:"intervalDay",defaultMessage:jimu_ui.defaultMessages.intervalDay})},this.setIsHostedInSamePortal=()=>{this.props.sourceUrl&&jimu_core.ljd.getInstance().fetchServiceInfo(this.props.sourceUrl).then((res=>{this.__unmount||this.setState({isHostedInSamePortal:res.isHostedInSamePortal})}))},this.onToggleProxy=()=>{let newProxyConfig;newProxyConfig=this.props.proxySettingConfig?null:(0,jimu_core.J3Z)({sourceUrl:this.props.sourceUrl}),this.props.onChange(this.props.sourceUrl,newProxyConfig)},this.onHitsPerIntervalChange=value=>{const hitsPerInterval=value,config={sourceUrl:this.props.sourceUrl,hitsPerInterval},newProxyConfig=this.props.proxySettingConfig?Object.assign(Object.assign({},this.props.proxySettingConfig),config):config;this.props.onChange(this.props.sourceUrl,newProxyConfig)},this.onIntervalUnitChange=e=>{const intervalUnit=e.target.value,intervalSeconds=this.getIntervalSeconds(intervalUnit),config={sourceUrl:this.props.sourceUrl,intervalSeconds},newProxyConfig=this.props.proxySettingConfig?Object.assign(Object.assign({},this.props.proxySettingConfig),config):config;this.props.onChange(this.props.sourceUrl,newProxyConfig)},this.state={isHostedInSamePortal:!0}}componentDidMount(){this.__unmount=!1,this.setIsHostedInSamePortal()}componentDidUpdate(prevProps){this.__unmount=!1,prevProps.sourceUrl!==this.props.sourceUrl&&this.setIsHostedInSamePortal()}componentWillUnmount(){this.__unmount=!0}getIntervalUnit(intervalSeconds){if(!intervalSeconds)return"none";switch(intervalSeconds){case 1:return"second";case 60:return"minute";case 3600:return"hour";case 86400:return"day";default:return"none"}}getIntervalSeconds(intervalUnit){if(!intervalUnit)return null;switch(intervalUnit){case"second":return 1;case"minute":return 60;case"hour":return 3600;case"day":return 86400;default:return null}}render(){var _a,_b;if(!this.props.sourceUrl)return null;const label=this.props.label,useProxy=!!this.props.proxySettingConfig,selectedIntervalUnit=this.getIntervalUnit(null===(_a=this.props.proxySettingConfig)||void 0===_a?void 0:_a.intervalSeconds),session=jimu_core.Cvv.getInstance().getMainSession(),sourceUrlWithToken=`${this.props.sourceUrl}?token=${session.token}`;return jimu_core.q_G.createElement("tr",{className:"row m-0 content-table-tr"},jimu_core.q_G.createElement("td",{className:"col-2",title:this.state.isHostedInSamePortal?null:this.props.intl.formatMessage({id:"disabledProxyTooltip",defaultMessage:jimu_ui.defaultMessages.disabledProxyTooltip})},jimu_core.q_G.createElement(jimu_ui.Switch,{onChange:this.onToggleProxy,checked:useProxy,className:"mr-2",disabled:!this.state.isHostedInSamePortal,"aria-label":this.props.intl.formatMessage({id:"authorized",defaultMessage:jimu_ui.defaultMessages.authorized}),"aria-checked":useProxy})),jimu_core.q_G.createElement("td",{className:"col-4",title:label},jimu_core.q_G.createElement(jimu_ui.Link,{to:sourceUrlWithToken,target:"_blank",className:"font-size-13 px-0 text-truncate d-block text-left","aria-label":this.props.intl.formatMessage({id:"subscriberContent",defaultMessage:jimu_ui.defaultMessages.subscriberContent})},label)),jimu_core.q_G.createElement("td",{className:"col-2"},this.props.isPremium&&jimu_core.q_G.createElement(check.J,{size:"m"})),jimu_core.q_G.createElement("td",{className:"col-2"},useProxy&&jimu_core.q_G.createElement(jimu_ui.NumericInput,{size:"sm",value:null===(_b=this.props.proxySettingConfig)||void 0===_b?void 0:_b.hitsPerInterval,onChange:this.onHitsPerIntervalChange,precision:0,min:1,className:"request-limit","aria-label":this.props.intl.formatMessage({id:"requestLimit",defaultMessage:jimu_ui.defaultMessages.requestLimit})})),jimu_core.q_G.createElement("td",{className:"col-2"},useProxy&&jimu_core.q_G.createElement(jimu_ui.Select,{value:selectedIntervalUnit,onChange:this.onIntervalUnitChange,size:"sm",className:"request-interval","aria-label":this.props.intl.formatMessage({id:"requestInterval",defaultMessage:jimu_ui.defaultMessages.requestInterval})},Object.keys(this.interval).map(((inter,i)=>jimu_core.q_G.createElement("option",{value:inter,key:i,selected:inter===selectedIntervalUnit},this.interval[inter]))))))}}try{ProxySettingItem.displayName="ProxySettingItem",ProxySettingItem.__docgenInfo={description:"",displayName:"ProxySettingItem",props:{proxySettingConfig:{defaultValue:null,description:"",name:"proxySettingConfig",required:!0,type:{name:"ProxySettingConfig"}},sourceUrl:{defaultValue:null,description:"",name:"sourceUrl",required:!0,type:{name:"string"}},isPremium:{defaultValue:null,description:"",name:"isPremium",required:!0,type:{name:"boolean"}},isSubscriber:{defaultValue:null,description:"",name:"isSubscriber",required:!0,type:{name:"boolean"}},intl:{defaultValue:null,description:"",name:"intl",required:!0,type:{name:"IntlShape"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(sourceUrl: string, proxyConfig: ProxySettingConfig) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/proxy-setting/setting/proxy-setting-item.tsx#ProxySettingItem"]={docgenInfo:ProxySettingItem.__docgenInfo,name:"ProxySettingItem",path:"../jimu-ui/advanced/lib/setting-components/components/proxy-setting/setting/proxy-setting-item.tsx#ProxySettingItem"})}catch(__react_docgen_typescript_loader_error){}const dataSourceJsonCreator=jimu_core.ZkX.dataSourceJsonCreator;class _ProxySetting extends jimu_core.q_G.PureComponent{constructor(){super(...arguments),this.columnName={authorized:this.props.intl.formatMessage({id:"authorized",defaultMessage:jimu_ui.defaultMessages.authorized}),subscriberContent:this.props.intl.formatMessage({id:"subscriberContent",defaultMessage:jimu_ui.defaultMessages.subscriberContent}),credits:this.props.intl.formatMessage({id:"credits",defaultMessage:jimu_ui.defaultMessages.credits}),requestLimit:this.props.intl.formatMessage({id:"requestLimit",defaultMessage:jimu_ui.defaultMessages.requestLimit}),requestInterval:this.props.intl.formatMessage({id:"requestInterval",defaultMessage:jimu_ui.defaultMessages.requestInterval})},this.onProxyChange=(sourceUrl,proxySettingConfig)=>{const proxySettingConfigs=this.props.proxySettingConfigs||{},newProxySettingConfigs=Object.assign({},proxySettingConfigs),isSceneService=dataSourceJsonCreator.getDataSourceTypeFromArcGISWholeServiceUrl(sourceUrl)===jimu_core.hg5.SceneService;if(proxySettingConfig){if(newProxySettingConfigs[sourceUrl]=proxySettingConfig,isSceneService){const associatedFeatureServiceSourceUrl=sourceUrl.replace("/SceneServer","/FeatureServer"),associatedFeatureServiceProxyConfig=Object.assign(Object.assign({},proxySettingConfig),{sourceUrl:associatedFeatureServiceSourceUrl});newProxySettingConfigs[associatedFeatureServiceSourceUrl]=associatedFeatureServiceProxyConfig}}else if(delete newProxySettingConfigs[sourceUrl],isSceneService){delete newProxySettingConfigs[sourceUrl.replace("/SceneServer","/FeatureServer")]}this.props.onChange(newProxySettingConfigs)}}render(){const needProxyItems=this.props.needProxyItems,proxySettingConfigs=this.props.proxySettingConfigs;return jimu_core.q_G.createElement("div",{className:(0,jimu_core.xWm)("h-100 w-100 bg-light-300",{[this.props.className]:!!this.props.className})},jimu_core.q_G.createElement("div",{className:"subscriber-warning"},!this.props.appHasBeenSaved&&jimu_core.q_G.createElement("div",null,this.props.intl.formatMessage({id:"unsavedChangedRemind",defaultMessage:jimu_ui.defaultMessages.unsavedChangedRemind})),this.props.intl.formatMessage({id:"subscriberWarning",defaultMessage:jimu_ui.defaultMessages.subscriberWarning})),jimu_core.q_G.createElement("div",{className:"secondary-title mt-5 mb-4"},this.props.intl.formatMessage({id:"data",defaultMessage:jimu_ui.defaultMessages.data})),jimu_core.q_G.createElement("table",{className:"content-table w-100"},jimu_core.q_G.createElement("thead",{className:"content-table-header container"},jimu_core.q_G.createElement("tr",{className:"row"},Object.keys(this.columnName).map(((key,i)=>jimu_core.q_G.createElement("th",{key:i,className:(0,jimu_core.xWm)("text-truncate",{"col-4":"subscriberContent"===key,"col-2":"subscriberContent"!==key}),title:this.columnName[key]},this.columnName[key]))))),jimu_core.q_G.createElement("tbody",{className:"container"},needProxyItems&&Object.keys(needProxyItems).map(((sourceUrl,i)=>{var _a,_b;const itemsWithSameSourceURl=needProxyItems[sourceUrl];return jimu_core.q_G.createElement(ProxySettingItem,{isPremium:itemsWithSameSourceURl.isPremium,isSubscriber:itemsWithSameSourceURl.isSubscriber,sourceUrl,intl:this.props.intl,key:i,onChange:this.onProxyChange,label:null===(_b=null===(_a=itemsWithSameSourceURl.items)||void 0===_a?void 0:_a[0])||void 0===_b?void 0:_b.label,proxySettingConfig:null==proxySettingConfigs?void 0:proxySettingConfigs[sourceUrl]})})))))}}const setting_ProxySetting=(0,jimu_core.j4T)((0,jimu_theme.Xy)(_ProxySetting,"ProxySetting"));try{_ProxySetting.displayName="_ProxySetting",_ProxySetting.__docgenInfo={description:"",displayName:"_ProxySetting",props:{appHasBeenSaved:{defaultValue:null,description:"",name:"appHasBeenSaved",required:!0,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},proxySettingConfigs:{defaultValue:null,description:"",name:"proxySettingConfigs",required:!0,type:{name:"ProxySettingConfigs"}},needProxyItems:{defaultValue:null,description:"",name:"needProxyItems",required:!0,type:{name:"NeedProxyItems"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(proxySettingConfigs: ProxySettingConfigs) => void"}},intl:{defaultValue:null,description:"",name:"intl",required:!0,type:{name:"IntlShape"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/proxy-setting/setting/index.tsx#_ProxySetting"]={docgenInfo:_ProxySetting.__docgenInfo,name:"_ProxySetting",path:"../jimu-ui/advanced/lib/setting-components/components/proxy-setting/setting/index.tsx#_ProxySetting"})}catch(__react_docgen_typescript_loader_error){}try{setting_ProxySetting.displayName="ProxySetting",setting_ProxySetting.__docgenInfo={description:"",displayName:"ProxySetting",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(proxySettingConfigs: ProxySettingConfigs) => void"}},appHasBeenSaved:{defaultValue:null,description:"",name:"appHasBeenSaved",required:!0,type:{name:"boolean"}},proxySettingConfigs:{defaultValue:null,description:"",name:"proxySettingConfigs",required:!0,type:{name:"ProxySettingConfigs"}},needProxyItems:{defaultValue:null,description:"",name:"needProxyItems",required:!0,type:{name:"NeedProxyItems"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/proxy-setting/setting/index.tsx#ProxySetting"]={docgenInfo:setting_ProxySetting.__docgenInfo,name:"ProxySetting",path:"../jimu-ui/advanced/lib/setting-components/components/proxy-setting/setting/index.tsx#ProxySetting"})}catch(__react_docgen_typescript_loader_error){}var types=__webpack_require__("../jimu-ui/lib/components/types.ts"),setting_popup_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};const setting_popup_dataSourceJsonCreator=jimu_core.ZkX.dataSourceJsonCreator,registerAppPromise={};class _ProxySettingPopup extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.__unmount=!1,this.getProxySettingConfigs=needProxyItems=>{var _a,_b;const proxySettingConfigs={},appProxies=null===(_b=null===(_a=(0,jimu_core.Vp3)().getState().appStateInBuilder)||void 0===_a?void 0:_a.appConfig)||void 0===_b?void 0:_b.appProxies;return Object.keys(needProxyItems).forEach((sourceUrl=>{const proxyJson=getProxyJsonFromSourceUrl(sourceUrl,appProxies);proxyJson&&(proxySettingConfigs[sourceUrl]=proxyJson.without("id").without("proxyId").without("proxyUrl"))})),Promise.resolve(proxySettingConfigs)},this.registerApp=()=>setting_popup_awaiter(this,void 0,void 0,(function*(){var _a,_b,_c,_d;const appId=null===(_b=null===(_a=(0,jimu_core.Vp3)().getState())||void 0===_a?void 0:_a.appStateInBuilder)||void 0===_b?void 0:_b.appId;if(registerAppPromise[appId])return yield registerAppPromise[appId];const url=`${null===(_d=null===(_c=(0,jimu_core.Vp3)().getState())||void 0===_c?void 0:_c.appStateInBuilder)||void 0===_d?void 0:_d.portalUrl}/sharing/rest/oauth2/registerApp`;return registerAppPromise[appId]=jimu_core._2M.restRequest.request(url,{authentication:jimu_core.Cvv.getInstance().getSessionByUrl((0,jimu_core.Vp3)().getState().portalUrl),httpMethod:"POST",params:{itemId:appId,appType:"browser",redirect_uris:JSON.stringify([this.getAppRootUrl()])}}),yield registerAppPromise[appId]})),this.createProxies=proxySettingConfigs=>setting_popup_awaiter(this,void 0,void 0,(function*(){var _a,_b,_c;if(!proxySettingConfigs)return yield Promise.resolve(null);const appProxies=null===(_c=null===(_b=null===(_a=(0,jimu_core.Vp3)().getState())||void 0===_a?void 0:_a.appStateInBuilder)||void 0===_b?void 0:_b.appConfig)||void 0===_c?void 0:_c.appProxies,existingProxyJsons={};let proxies=[];if(Object.keys(proxySettingConfigs).forEach((sourceUrl=>{const proxyConfig=proxySettingConfigs[sourceUrl];if(!proxyConfig)return;const hitsPerInterval=proxyConfig.hitsPerInterval,intervalSeconds=proxyConfig.intervalSeconds,existingProxyJson=getProxyJsonFromSourceUrl(sourceUrl,appProxies);isSameProxy(existingProxyJson,sourceUrl,hitsPerInterval,intervalSeconds)?existingProxyJsons[existingProxyJson.id]=existingProxyJson:proxies=proxies.concat({sourceUrl,hitsPerInterval,intervalSeconds})})),0===proxies.length)return(0,jimu_core.J3Z)(existingProxyJsons);isRegisteredApp()||(yield this.registerApp());const serviceProxyParams={referrers:[this.getAppOrTemplateUrl()].concat(jimu_core.ovz.getProxyReferrers())},createProxyUrl=getCreateProxyUrl();return jimu_core._2M.restRequest.request(createProxyUrl,{authentication:jimu_core.Cvv.getInstance().getSessionByUrl((0,jimu_core.Vp3)().getState().portalUrl),httpMethod:"POST",params:{serviceProxyParams,proxies}}).then((res=>{var _a,_b;const proxiesInResponse=(null==res?void 0:res.appProxies)||[],proxiesInAppConfig=existingProxyJsons,appConfig=null===(_b=null===(_a=(0,jimu_core.Vp3)().getState())||void 0===_a?void 0:_a.appStateInBuilder)||void 0===_b?void 0:_b.appConfig,appProxies=null==appConfig?void 0:appConfig.appProxies;return proxiesInResponse.forEach((p=>{const existingProxyJson=getProxyJsonFromSourceUrl(p.sourceUrl,appProxies),proxyJsonId=(null==existingProxyJson?void 0:existingProxyJson.id)||jimu_core.VbA.getUniqueId("appProxy");proxiesInAppConfig[proxyJsonId]=Object.assign(Object.assign({},p),{id:proxyJsonId})})),(0,jimu_core.J3Z)(proxiesInAppConfig)}))})),this.getAppRootUrl=()=>{var _a;return null===(_a=null===window||void 0===window?void 0:window.location)||void 0===_a?void 0:_a.origin},this.getAppOrTemplateUrl=()=>{var _a,_b,_c,_d,_e,_f;const appId=null===(_b=null===(_a=(0,jimu_core.Vp3)().getState())||void 0===_a?void 0:_a.appStateInBuilder)||void 0===_b?void 0:_b.appId,appItem=null===(_d=null===(_c=(0,jimu_core.Vp3)().getState())||void 0===_c?void 0:_c.appStateInBuilder)||void 0===_d?void 0:_d.appInfo,isTemplate="Web Experience Template"===(null==appItem?void 0:appItem.type),appUrlWithoutOrigin=null===(_e=jimu_core.v6q.getAppUrl({id:appId,type:isTemplate?"template":"app"}))||void 0===_e?void 0:_e.replace(/^\//,"");return`${null===(_f=this.getAppRootUrl())||void 0===_f?void 0:_f.replace(/\/$/,"")}/${appUrlWithoutOrigin}`},this.onProxyConfigChange=proxySettingConfigs=>{this.setState({proxySettingConfigs})},this.onFinish=()=>{var _a,_b,_c,_d;this.setState({isLoading:!0});const proxySettingConfigs=this.state.proxySettingConfigs||{},existingProxyJsons=null===(_c=null===(_b=null===(_a=(0,jimu_core.Vp3)().getState())||void 0===_a?void 0:_a.appStateInBuilder)||void 0===_b?void 0:_b.appConfig)||void 0===_c?void 0:_c.appProxies,needToDeleteProxies=existingProxyJsons&&Object.values(existingProxyJsons).filter((proxyJson=>{var _a;let newProxyConfig=proxySettingConfigs[null==proxyJson?void 0:proxyJson.sourceUrl];if(setting_popup_dataSourceJsonCreator.getDataSourceTypeFromArcGISWholeServiceUrl(null==proxyJson?void 0:proxyJson.sourceUrl)===jimu_core.hg5.FeatureService){const associatedSceneServiceUrl=null===(_a=null==proxyJson?void 0:proxyJson.sourceUrl)||void 0===_a?void 0:_a.replace("/FeatureServer","/SceneServer"),newAssociatedSceneServiceConfig=proxySettingConfigs[associatedSceneServiceUrl];newProxyConfig=newProxyConfig||(newAssociatedSceneServiceConfig?Object.assign(Object.assign({},newAssociatedSceneServiceConfig),{sourceUrl:null==proxyJson?void 0:proxyJson.sourceUrl}):null)}return!newProxyConfig||!isSameProxy(proxyJson,newProxyConfig.sourceUrl,newProxyConfig.hitsPerInterval,newProxyConfig.intervalSeconds)}));deleteProxies(null==needToDeleteProxies?void 0:needToDeleteProxies.map((proxyJson=>proxyJson.proxyId)),null===(_d=this.state)||void 0===_d?void 0:_d.getAppConfigAction()).then((()=>{this.createProxies(proxySettingConfigs).then((proxyJsons=>{var _a;if(!this.__unmount){if(proxyJsons){const action=null===(_a=this.state)||void 0===_a?void 0:_a.getAppConfigAction();Object.keys(proxyJsons).forEach((proxyId=>{null==action||action.editAppProxy(proxyJsons[proxyId])})),null==action||action.exec()}const newAppConfig=(0,jimu_core.Vp3)().getState().appStateInBuilder.appConfig;this.props.onFinish(newAppConfig)}}))})).catch((error=>{console.error("Creating proxy failed: ",error),this.setState({isLoading:!1,isError:!0},(()=>{setTimeout((()=>{this.setState({isError:!1})}),5500)}))}))},this.getTostStyle=()=>{var _a,_b,_c,_d,_e,_f,_g,_h,_j;return jimu_core.AHW`
      & {
        height:  ${jimu_core.PLL.rem(40)};
        top: ${jimu_core.PLL.rem(60)};
      }
      .jimu-toast-info {
        background: ${null===(_c=null===(_b=null===(_a=this.props)||void 0===_a?void 0:_a.theme)||void 0===_b?void 0:_b.sys.color)||void 0===_c?void 0:_c.secondary.light};
        line-height: ${jimu_core.PLL.rem(40)};
        color: ${null===(_f=null===(_e=null===(_d=this.props)||void 0===_d?void 0:_d.theme)||void 0===_e?void 0:_e.ref.palette)||void 0===_f?void 0:_f.neutral[1100]};
        font-weight: 300;
        padding: 0 ${jimu_core.PLL.rem(16)};
        box-shadow: 0 0 ${jimu_core.PLL.rem(10)} ${jimu_core.PLL.rem(2)} ${jimu_core.PLL.rgba(null===(_j=null===(_h=null===(_g=this.props)||void 0===_g?void 0:_g.theme)||void 0===_h?void 0:_h.ref.palette)||void 0===_j?void 0:_j.white,.2)};
      }
    `},this.getPublishButtonText=()=>{const{appHasBeenSaved,intl}=this.props;return appHasBeenSaved?intl.formatMessage({id:"publish",defaultMessage:jimu_core.kgw.publish}):intl.formatMessage({id:"saveAndPublish",defaultMessage:jimu_ui.defaultMessages.saveAndPublish})},this.getSubscriberContentString=()=>{const{appHasBeenSaved,intl}=this.props;return appHasBeenSaved?intl.formatMessage({id:"subscriberContents",defaultMessage:jimu_ui.defaultMessages.subscriberContents}):intl.formatMessage({id:"unsavedChangesAndSubscriberContents",defaultMessage:jimu_ui.defaultMessages.unsavedChangesAndSubscriberContents})},this.state={getAppConfigAction:null,isLoading:!1,isError:!1,proxySettingConfigs:null,needProxyItems:null}}componentDidMount(){this.__unmount=!1,Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../jimu-for-builder/index.tsx")).then((module=>{this.__unmount||this.setState({getAppConfigAction:module.getAppConfigAction})})),this.setState({isLoading:!0}),this.initNeedProxyItemsAndProxySettingConfigs()}componentDidUpdate(prevProps){(!prevProps.isOpen&&this.props.isOpen||prevProps.appProxies!==this.props.appProxies)&&this.initNeedProxyItemsAndProxySettingConfigs()}initNeedProxyItemsAndProxySettingConfigs(){return setting_popup_awaiter(this,void 0,void 0,(function*(){this.setState({isLoading:!0});try{const needProxyItems=yield getNeedProxyItems(),proxySettingConfigs=yield this.getProxySettingConfigs(needProxyItems);this.__unmount||this.setState({proxySettingConfigs,needProxyItems,isLoading:!1})}catch(err){this.__unmount||this.setState({isLoading:!1}),console.error("Getting proxy config error",err)}}))}componentWillUnmount(){this.__unmount=!0}render(){const proxySettingConfigs=this.state.proxySettingConfigs,needProxyItems=this.state.needProxyItems,subscriberContentString=this.getSubscriberContentString();return(0,jimu_core.Yac)(jimu_ui.Modal,{isOpen:this.props.isOpen,centered:!0,className:(0,jimu_core.xWm)({[this.props.className]:!!this.props.className}),returnfocusafterclose:"true",contentClassName:"proxy-setting-container",backdrop:"static","aria-label":subscriberContentString},(0,jimu_core.Yac)(jimu_ui.ModalHeader,{className:"d-flex justify-content-between header px-30",toggle:this.props.onToggle},(0,jimu_core.Yac)("div",{className:"flex-grow-1 text-truncate"},subscriberContentString)),(0,jimu_core.Yac)(jimu_ui.ModalBody,{className:"d-flex px-30"},(0,jimu_core.Yac)(setting_ProxySetting,{onChange:this.onProxyConfigChange,proxySettingConfigs,needProxyItems,appHasBeenSaved:this.props.appHasBeenSaved})),(0,jimu_core.Yac)(jimu_ui.ModalFooter,{className:"px-30"},(0,jimu_core.Yac)(jimu_ui.Button,{className:"mr-2",type:"primary",onClick:this.onFinish},this.getPublishButtonText()),(0,jimu_core.Yac)(jimu_ui.Button,{type:"default",onClick:this.props.onCancel},this.props.intl.formatMessage({id:"cancel",defaultMessage:jimu_core.kgw.cancel}))),this.state.isLoading&&(0,jimu_core.Yac)(jimu_ui.Loading,{type:types.J.Secondary}),this.state.isError&&(0,jimu_core.Yac)(jimu_ui.Toast,{open:this.state.isError,type:jimu_ui.ToastType.Info,css:this.getTostStyle(),text:this.props.intl.formatMessage({id:"createProxyToPublishAppError",defaultMessage:jimu_ui.defaultMessages.createProxyToPublishAppError})}))}}const __ProxySettingPopup=(0,jimu_theme.Xy)((0,jimu_theme.SL)((0,jimu_core.j4T)(_ProxySettingPopup)),"ProxySettingPopup"),ProxySettingPopup=jimu_core.E_S.connect(((state,ownProps)=>{var _a,_b;return{appProxies:null===(_b=null===(_a=null==state?void 0:state.appStateInBuilder)||void 0===_a?void 0:_a.appConfig)||void 0===_b?void 0:_b.appProxies}}))(__ProxySettingPopup);try{ProxySettingPopup.displayName="ProxySettingPopup",ProxySettingPopup.__docgenInfo={description:"",displayName:"ProxySettingPopup",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"IMThemeVariables"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},onFinish:{defaultValue:null,description:"",name:"onFinish",required:!0,type:{name:"(appConfig?: IMAppConfig) => Promise<void>"}},appHasBeenSaved:{defaultValue:null,description:"",name:"appHasBeenSaved",required:!0,type:{name:"boolean"}},onToggle:{defaultValue:null,description:"",name:"onToggle",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/proxy-setting/setting-popup/index.tsx#ProxySettingPopup"]={docgenInfo:ProxySettingPopup.__docgenInfo,name:"ProxySettingPopup",path:"../jimu-ui/advanced/lib/setting-components/components/proxy-setting/setting-popup/index.tsx#ProxySettingPopup"})}catch(__react_docgen_typescript_loader_error){}try{ProxySetting.displayName="ProxySetting",ProxySetting.__docgenInfo={description:"",displayName:"ProxySetting",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(proxySettingConfigs: ProxySettingConfigs) => void"}},appHasBeenSaved:{defaultValue:null,description:"",name:"appHasBeenSaved",required:!0,type:{name:"boolean"}},proxySettingConfigs:{defaultValue:null,description:"",name:"proxySettingConfigs",required:!0,type:{name:"ProxySettingConfigs"}},needProxyItems:{defaultValue:null,description:"",name:"needProxyItems",required:!0,type:{name:"NeedProxyItems"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/proxy-setting/index.tsx#ProxySetting"]={docgenInfo:ProxySetting.__docgenInfo,name:"ProxySetting",path:"../jimu-ui/advanced/lib/setting-components/components/proxy-setting/index.tsx#ProxySetting"})}catch(__react_docgen_typescript_loader_error){}var page_aware_popper_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};class PageAwarePopper extends jimu_core.q_G.PureComponent{componentDidUpdate(prevProps){this.props.pageId===prevProps.pageId&&this.props.sizemode===prevProps.sizemode||this.props.toggle()}getStyle(){const{theme}=this.props;return theme&&jimu_core.AHW`
      background-color: ${theme.ref.palette.neutral[400]};
      ${(0,jimu_theme.Dl)({background:theme.ref.palette.neutral[400],border:{color:theme.ref.palette.neutral[600],width:"1px"}})}
    `}render(){const _a=this.props,{pageId,sizemode,dispatch}=_a,otherProps=page_aware_popper_rest(_a,["pageId","sizemode","dispatch"]);return(0,jimu_core.Yac)(jimu_ui.Popper,Object.assign({className:"page-aware-popper",css:this.getStyle()},otherProps))}}const page_aware_popper=jimu_core.E_S.connect((function page_aware_popper_mapStateToProps(state){return{pageId:state.appRuntimeInfo.currentPageId,sizemode:state.browserSizeMode}}))(PageAwarePopper);try{pageawarepopper.displayName="pageawarepopper",pageawarepopper.__docgenInfo={description:"",displayName:"pageawarepopper",props:{children:{defaultValue:null,description:"A ref that points to the used popper instance.",name:"children",required:!0,type:{name:"ReactNode"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},autoFocus:{defaultValue:{value:"true"},description:"Whether to automatically focus on the first focusable element when `Popper` is open.\n@ignore",name:"autoFocus",required:!1,type:{name:"boolean"}},tabIndex:{defaultValue:null,description:"The `tabIndex` added to the element.",name:"tabIndex",required:!1,type:{name:"number"}},role:{defaultValue:{value:"dialog"},description:"Defines the role added to the element.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-modal":{defaultValue:null,description:"Indicates whether the element, or another grouping element it controls, is modal.",name:"aria-modal",required:!1,type:{name:"boolean"}},onKeyDown:{defaultValue:null,description:"Fired at an Element when a key is pressed down and that key normally produces a character value.",name:"onKeyDown",required:!1,type:{name:"KeyboardEventHandler<HTMLDivElement>"}},onClick:{defaultValue:null,description:"Fire callback when the component is clicked.",name:"onClick",required:!1,type:{name:"MouseEventHandler<HTMLDivElement>"}},onMouseDown:{defaultValue:null,description:"Callback fired when the mouse is pressed on the element.",name:"onMouseDown",required:!1,type:{name:"MouseEventHandler<HTMLDivElement>"}},onMouseEnter:{defaultValue:null,description:"Fired at an Element when a pointing device (usually a mouse) is initially moved so that its hotshots is within the element at which the event was fired.",name:"onMouseEnter",required:!1,type:{name:"MouseEventHandler<HTMLDivElement>"}},onMouseLeave:{defaultValue:null,description:"Fired at an Element when the cursor of a pointing device (usually a mouse) is moved out of it.",name:"onMouseLeave",required:!1,type:{name:"MouseEventHandler<HTMLDivElement>"}},showArrow:{defaultValue:{value:"false"},description:"Whether to show arrow of popper.\n@deprecated Use `arrowOptions` instead.",name:"showArrow",required:!1,type:{name:"boolean"}},placement:{defaultValue:{value:"bottom"},description:"Describes the preferred placement of the popper.",name:"placement",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"bottom"'},{value:'"left"'},{value:'"right"'},{value:'"top"'},{value:'"bottom-end"'},{value:'"bottom-start"'},{value:'"left-end"'},{value:'"left-start"'},{value:'"right-end"'},{value:'"right-start"'},{value:'"top-end"'},{value:'"top-start"'},{value:'"auto-start"'},{value:'"auto-end"'}]}},modifiers:{defaultValue:null,description:"Modifiers for fine-tuning the behavior.\n@deprecated Use `hideOptions`, `shiftOptions`, `flipOptions`, `offsetOptions` and `sizeOptions` instead.\n\nNote: If `middleware`(`hideOptions`, `shiftOptions`, `flipOptions`, `offsetOptions`, `inlineOptions`, `autoPlacementOptions` and `arrowOptions`) is not provided, Popper will try to upgrade `modifiers` to `middleware`, otherwise it will be ignored.",name:"modifiers",required:!1,type:{name:"any[]"}},shiftOptions:{defaultValue:null,description:"The shift options can shift the popper when it will overflow the clipping boundary.\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.",name:"shiftOptions",required:!1,type:{name:"boolean | { mainAxis?: boolean; crossAxis?: boolean; limiter?: { fn: (state: MiddlewareState) => Coords; options?: any; }; rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; boundary?: Boundary; }"}},offsetOptions:{defaultValue:null,description:"The offset modifier can shift your popper on both its axis.\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.",name:"offsetOptions",required:!1,type:{name:"boolean | [number, number] | OffsetOptions"}},flipOptions:{defaultValue:{value:"true"},description:"The flip options can flip the popper when it will overflow the clipping boundary.\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.\nNote: `flipOptions` and `autoPlacementOptions` cannot be used together inside the same middleware array; make sure you choose only one of them to use.",name:"flipOptions",required:!1,type:{name:"boolean | { mainAxis?: boolean; crossAxis?: boolean; rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; ... 4 more ...; boundary?: Boundary; }"}},reference:{defaultValue:null,description:"Reference node used to set the position of popper",name:"reference",required:!0,type:{name:"TargetType"}},strategy:{defaultValue:{value:"absolute"},description:"Describes the positioning strategy to use.\nBy default, it is absolute, which in the simplest cases does not require repositioning of the popper.\nIf your reference element is in a fixed container, use the fixed strategy.",name:"strategy",required:!1,type:{name:"enum",value:[{value:'"fixed"'},{value:'"absolute"'}]}},arrowOptions:{defaultValue:{value:"false"},description:"The arrow options can show the arrow of the popper.\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.",name:"arrowOptions",required:!1,type:{name:"boolean | ArrowStyleOptions"}},openOverlayOnMount:{defaultValue:{value:"true"},description:"If `true`, adds the popper to `state.overlays` when mounted.",name:"openOverlayOnMount",required:!1,type:{name:"boolean"}},unstyled:{defaultValue:null,description:"Whether to use this component without style.",name:"unstyled",required:!1,type:{name:"boolean"}},disablePortal:{defaultValue:{value:"false"},description:"Disable the portal behavior. The children stay within it's parent DOM hierarchy.",name:"disablePortal",required:!1,type:{name:"boolean"}},disableActivateOverlay:{defaultValue:{value:"false"},description:"If `true`, it prevents activating the overlay when clicking on the popper body.",name:"disableActivateOverlay",required:!1,type:{name:"boolean"}},disableOverlayManager:{defaultValue:{value:"false"},description:"If `true`, it disables z-index management via `state.overlays`.",name:"disableOverlayManager",required:!1,type:{name:"boolean"}},zIndex:{defaultValue:null,description:"@ignore",name:"zIndex",required:!1,type:{name:"number"}},open:{defaultValue:null,description:"If `true`, the popper is visible.",name:"open",required:!0,type:{name:"boolean"}},autoUpdate:{defaultValue:{value:"false"},description:"Automatically updates the position of the floating element when necessary to ensure it stays anchored.",name:"autoUpdate",required:!1,type:{name:"boolean"}},inlineOptions:{defaultValue:null,description:"Improves positioning for inline reference elements that span over multiple lines.\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.",name:"inlineOptions",required:!1,type:{name:"boolean | InlineOptions"}},hideOptions:{defaultValue:{value:"true"},description:"The hide options can hide the popper when the reference is hidden.\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.",name:"hideOptions",required:!1,type:{name:'boolean | { strategy?: "referenceHidden" | "escaped"; rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; boundary?: Boundary; }'}},autoPlacementOptions:{defaultValue:{value:"false"},description:"The auto placement options can customize the behavior of the auto placement.\nNote: `flipOptions` and `autoPlacementOptions` cannot be used together inside the same middleware array; make sure you choose only one of them to use.",name:"autoPlacementOptions",required:!1,type:{name:"boolean | { crossAxis?: boolean; rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; alignment?: Alignment; autoAlignment?: boolean; allowedPlacements?: Placement[]; boundary?: Boundary; }"}},sizeOptions:{defaultValue:null,description:"Provides data to change the size of a floating element.\nThis is useful to ensure the floating element isn’t too big to fit in the viewport (or more specifically, its clipping context), especially when a maximum size isn’t specified.\nIt also allows matching the width/height of the reference element.\n\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.",name:"sizeOptions",required:!1,type:{name:"boolean | { rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; boundary?: Boundary; apply?: (args: { ...; } & { ...; }) => Promisable<...>; }"}},middleware:{defaultValue:null,description:'Middleware allow you to customize the behavior of the positioning and be as granular as you want, adding your own custom logic.\nIt is recommended to use `hideOptions`, `shiftOptions`, `flipOptions`, `offsetOptions` directly.\n"Node": If `middleware` is set, the above options will be ignored and the component\'s preset middleware will not be enabled.',name:"middleware",required:!1,type:{name:"{ name: string; options?: any; fn: (state: { placement: Placement; strategy: Strategy; middlewareData: MiddlewareData; x: number; y: number; initialPlacement: Placement; rects: ElementRects; platform: Platform; elements: Elements; }) => Promisable<...>; }[]"}},keepMount:{defaultValue:{value:"false"},description:"Whether to keep the popper mounted when it is not visible.",name:"keepMount",required:!1,type:{name:"boolean"}},version:{defaultValue:null,description:"When this value changes, will recalculate the position.\nNote: The `version` cannot be used together with `autoUpdate`, and `autoUpdate` has higher priority.\n@ignore",name:"version",required:!1,type:{name:"number"}},avoidNestedToggle:{defaultValue:{value:"true"},description:"By default, clicking into a nested `Popper` will not trigger the toggle method of the current Popper.\nIf you want to trigger the toggle method of the current Popper, you can set `avoidNestedToggle` to `false`.\n@ignore",name:"avoidNestedToggle",required:!1,type:{name:"boolean"}},delayToggle:{defaultValue:{value:"0"},description:"By default, the toggle method will be triggered when the user trigger mousedown event on the element outside the popper.\nIf you want to delay triggering the toggle method, set delay time of `toggle` by `delayToggle` (millisecond).\n\nUsage scenarios: If user click the element of the nested popper, the toggle method of current popper will be triggered when the mousedown event is triggered.\nGeneral toggle callbacks will unmount the current Popper, which will cause the nested Popper to be unmount,\nand the event of clicking on the element in the nested Popper is not triggered. Delay triggering the toggle method can solve this problem.\n@ignore",name:"delayToggle",required:!1,type:{name:"number"}},toggle:{defaultValue:null,description:"Callback fired when\n- click on an area outside popper\n- `currentPageId` or `browserSizeMode` changes\n- `appMode` changes\n@event",name:"toggle",required:!1,type:{name:"(evt?: KeyboardEvent<any> | MouseEvent<any, MouseEvent> | TouchEvent<any>, reason?: OverlayDismissReason) => any"}},offset:{defaultValue:null,description:"The offset modifier can shift your popper on both its axis.\nNotice: If you set the specified offset, we will ignore the offset in modifiers\n@deprecated Use `offsetOptions` instead.",name:"offset",required:!1,type:{name:"[number, number]"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"IMThemeVariables"}},referenceHiddenVisibility:{defaultValue:{value:"false"},description:"Whether the popper is visible when the reference is hidden.\n@ignore\n@deprecated Use `hideOptions` instead.",name:"referenceHiddenVisibility",required:!1,type:{name:"boolean"}},flipPlacement:{defaultValue:null,description:"Whether to flip placement (Only valid for RTL)\n@ignore",name:"flipPlacement",required:!1,type:{name:"boolean"}},trapFocus:{defaultValue:{value:"true"},description:"Loop within the focusable elements inside the `Popper` when the `Tab` key is pressed.\n@ignore",name:"trapFocus",required:!1,type:{name:"boolean"}},forceLatestFocusElements:{defaultValue:{value:"false"},description:"Whether to query focusable elements every time you when the `Tab` key is pressed.\nNote: Valid only if `trapFocus` is `true`.\n@ignore",name:"forceLatestFocusElements",required:!1,type:{name:"boolean"}},arrowStyle:{defaultValue:null,description:"Define the style of the arrow.\n@ignore\n@deprecated Use `arrowOptions.style` instead.",name:"arrowStyle",required:!1,type:{name:"ArrowStyle"}},popperNodeRef:{defaultValue:null,description:"A ref to get the root node of the popper.\n@ignore\n@deprecated Use `ref` instead.",name:"popperNodeRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},listenContextPopperVersion:{defaultValue:{value:"false"},description:"Listen the popper version changes of `PopperVersionContext`.\n@ignore\n@deprecated Use `autoUpdate` instead.",name:"listenContextPopperVersion",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/page-aware-popper.tsx#pageawarepopper"]={docgenInfo:pageawarepopper.__docgenInfo,name:"pageawarepopper",path:"../jimu-ui/advanced/lib/setting-components/components/page-aware-popper.tsx#pageawarepopper"})}catch(__react_docgen_typescript_loader_error){}var editor_close=__webpack_require__("../jimu-icons/outlined/editor/close.tsx"),arcgis_enterprise=__webpack_require__("../jimu-icons/filled/brand/arcgis-enterprise.tsx");const style=jimu_core.AHW`
  color: var(ref-palette-neutral-1100);

  .widget-enterprise-btn {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 1;
  }

  .px-20 {
    padding-left: 18px;
    padding-right: 18px;
  }

  .pt-20 {
    padding-top: 20px;
  }

  .list-container {
    height: calc(100% - 150px);
    overflow-y: auto;
    padding-bottom: 20px;
  }

  .groups {
    font-size: 13px;
    font-weight: 600;
    color: var(--ref-palette-neutral-900);
  }

  .group-select {
    width: 210px;
  }

  .widget-group {
    .group-label{
      font-size: 13px;
      font-weight: 600;
      color: var(--ref-palette-neutral-900);
    }
  }

  .card-grid {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    grid-row-gap: 0.5rem;
    grid-column-gap: 0.5rem;
  }

  .widget-card {
    height: 80px;
    width: 112px;
    padding: 0;
    border: none;
    position: relative;

    > .jimu-btn {
      border-color: var(--ref-palette-neutral-500);
    }

    .widget-card--content {
      padding-top: 12px;
      cursor: pointer;
      background-color: var(--ref-palette-neutral-500);
      &:hover {
        background-color: var(--ref-palette-neutral-600);
      }
    }

    .widget-card-image {
      width: 20px;
      height: 20px;
      &:after {
        display: none;
      }
      img {
        width: 20px;
        height: 20px;
      }
    }

    .widget-card-name {
      line-height: 1rem;
      max-height: 2rem;
      white-space: normal;
      color: var(--ref-palette-neutral-1200);
      padding: 0 5px;
      font-size: 13px;
    }
  }
`;class _WidgetList extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.allGroup={value:1e3,label:this.props.intl.formatMessage({id:"all",defaultMessage:jimu_ui.defaultMessages.all})},this.getRequireEnterpriseIconTooltip=requiredUserTypeExtensions=>{if((null==requiredUserTypeExtensions?void 0:requiredUserTypeExtensions.length)>0){const userTypeExtensions=requiredUserTypeExtensions.join(", ");return this.props.intl.formatMessage({id:"requireEnterpriseAndUserTypeExtensions",defaultMessage:jimu_ui.defaultMessages.requireEnterpriseAndUserTypeExtensions},{userTypeExtensions})}return this.props.intl.formatMessage({id:"requireEnterprise",defaultMessage:jimu_ui.defaultMessages.requireEnterprise})},this.WidgetCard=({widgetInfo})=>{var _a,_b,_c,_d;return(0,jimu_core.Yac)("div",{className:"d-flex align-items-start justify-content-center widget-card"},(null===(_a=widgetInfo.manifest)||void 0===_a?void 0:_a.requireEnterprise)&&(0,jimu_core.Yac)(jimu_ui.Button,{title:this.getRequireEnterpriseIconTooltip(null===(_b=widgetInfo.manifest)||void 0===_b?void 0:_b.requiredUserTypeExtensions),type:"tertiary",className:"widget-enterprise-btn",disableHoverEffect:!0,disableRipple:!0,icon:!0,size:"sm"},(0,jimu_core.Yac)(arcgis_enterprise.N,null)),(0,jimu_core.Yac)(jimu_ui.Button,{className:"w-100 h-100 p-0",key:widgetInfo.name,onClick:()=>{this.props.onSelect(widgetInfo)},"aria-label":widgetInfo.label},(0,jimu_core.Yac)("div",{className:"d-flex flex-column w-100 h-100 widget-card--content"},(0,jimu_core.Yac)("div",{className:"d-flex justify-content-center"},(0,jimu_core.Yac)("div",{className:"widget-card-image"},(0,jimu_core.Yac)(jimu_ui.Icon,{size:20,className:"w-100 m-0",autoFlip:null===(_d=null===(_c=widgetInfo.manifest)||void 0===_c?void 0:_c.properties)||void 0===_d?void 0:_d.flipIcon,icon:"string"==typeof widgetInfo.icon?widgetInfo.icon:widgetInfo.icon&&widgetInfo.icon.svg,color:"var(--ref-palette-neutral-1200)"}))),(0,jimu_core.Yac)("div",{className:"flex-grow-1 d-flex align-items-center"},(0,jimu_core.Yac)("div",{className:"widget-card-name w-100 text-center text-capitalize text-truncate",css:jimu_core.AHW`
                line-height: 1rem;
                max-height: 2.2rem;
                white-space: normal;
              `,title:widgetInfo.label},widgetInfo.label)))))},this.WidgetGroup=({group})=>{if(!group)return null;const WidgetCard=this.WidgetCard;return(0,jimu_core.Yac)("div",{className:"widget-group w-100 mb-4"},(0,jimu_core.Yac)("h4",{className:"group-label w-100 text-break",title:group.label},group.label),(0,jimu_core.Yac)("div",{className:"card-grid m-0"},group.itemList.sort(((i1,i2)=>i1.order-i2.order)).map(((item,index)=>item?(0,jimu_core.Yac)(WidgetCard,{widgetInfo:item,key:index}):(0,jimu_core.Yac)("div",{className:"widget-card",style:{visibility:"hidden"},key:index})))))},this.getGroupList=(commonWidgetList,customWidgetList,searchValue)=>{var _a,_b,_c,_d;const groups=[this.allGroup];if(!!commonWidgetList){const commonGroups=this.getCommonGroups(commonWidgetList,1e3,searchValue);commonGroups&&Object.values(commonGroups).forEach((g=>{"number"==typeof g.groupId&&groups.push({value:g.groupId,label:this.getGroupLabel(g.groupId)})}))}if(null===(_b=null===(_a=this.state.jimuForBuilderUtils)||void 0===_a?void 0:_a.showCustomWidgets)||void 0===_b?void 0:_b.call(_a,commonWidgetList)){this.getCustomGroup(commonWidgetList,customWidgetList,1e3,searchValue)&&groups.push({value:null===(_c=this.state.jimuForBuilderUtils)||void 0===_c?void 0:_c.CUSTOM_GROUP,label:this.getGroupLabel(null===(_d=this.state.jimuForBuilderUtils)||void 0===_d?void 0:_d.CUSTOM_GROUP)})}return groups.filter((g=>!!g.label))},this.changeSelectedGroup=e=>{this.setState({selectedGroup:e.target.value})},this.onSearchValueChange=e=>{this.setState({searchValue:e.target.value,selectedGroup:1e3})},this.state={selectedGroup:1e3,commonWidgetList:null,remoteCustomWidgetList:null,searchValue:"",jimuForBuilderUtils:null},this.searchInputRef=jimu_core.q_G.createRef()}componentDidMount(){this.loadJimuForBuilderUtilsPromise=jimu_core.iE4.cancelable(Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../jimu-for-builder/index.tsx")).then((JimuForBuilder=>{this.setState({jimuForBuilderUtils:null==JimuForBuilder?void 0:JimuForBuilder.utils})}))),jimu_core.CM0.defer((()=>{(0,jimu_core.u02)(this.searchInputRef.current,!0)}))}componentDidUpdate(prevProps,prevState){!prevState.jimuForBuilderUtils&&this.state.jimuForBuilderUtils&&(this.loadCommonWidgetList(this.state.jimuForBuilderUtils.fetchCommonWidgetList),this.loadCustomWidgetList(this.state.jimuForBuilderUtils.fetchRemoteCustomWidgetList))}componentWillUnmount(){var _a,_b,_c;null===(_a=this.loadJimuForBuilderUtilsPromise)||void 0===_a||_a.cancel(),null===(_b=this.loadCommonWidgetsPromise)||void 0===_b||_b.cancel(),null===(_c=this.loadCommonWidgetsPromise)||void 0===_c||_c.cancel()}loadCommonWidgetList(fetchCommonWidgetList){fetchCommonWidgetList&&(this.loadCommonWidgetsPromise=jimu_core.iE4.cancelable(fetchCommonWidgetList().then((items=>{var _a,_b;const notLayoutWidgetList=null==items?void 0:items.filter((item=>this.props.isAccepted(item,this.props.isPlaceholder)));null===(_b=(_a=this.props).onWidgetLoaded)||void 0===_b||_b.call(_a),this.setState({commonWidgetList:notLayoutWidgetList})}))))}loadCustomWidgetList(fetchRemoteCustomWidgetList){fetchRemoteCustomWidgetList&&(this.loadRemoteCustomWidgetsPromise=jimu_core.iE4.cancelable(fetchRemoteCustomWidgetList().then((items=>{var _a,_b;const list=null==items?void 0:items.filter((item=>this.props.isAccepted(item,this.props.isPlaceholder)));null===(_b=(_a=this.props).onWidgetLoaded)||void 0===_b||_b.call(_a),this.setState({remoteCustomWidgetList:list})}))))}getGroupLabel(groupId){var _a,_b;return null===(_b=null===(_a=this.state.jimuForBuilderUtils)||void 0===_a?void 0:_a.getWidgetsGroupLabel)||void 0===_b?void 0:_b.call(_a,groupId,this.props.intl)}getCommonGroups(commonWidgetList,selectedGroup,searchValue){const list=1e3===selectedGroup?commonWidgetList:null==commonWidgetList?void 0:commonWidgetList.filter((w=>w.group===selectedGroup)),groups={};return null==list||list.forEach((w=>{var _a;if(w.group===(null===(_a=this.state.jimuForBuilderUtils)||void 0===_a?void 0:_a.CUSTOM_GROUP))return;const groupLabel=this.getGroupLabel(w.group);(this.isFuzzySearch(groupLabel,searchValue)||this.isFuzzySearch(w.label,searchValue))&&(groups[w.group]||(groups[w.group]={label:groupLabel,groupId:w.group,itemList:[]}),groups[w.group].itemList.push(w))})),groups}getCustomGroup(commonWidgetList,customWidgetList,selectedGroup,searchValue){var _a,_b,_c;if(1e3===selectedGroup||selectedGroup===(null===(_a=this.state.jimuForBuilderUtils)||void 0===_a?void 0:_a.CUSTOM_GROUP)){const groupLabel=this.getGroupLabel(null===(_b=this.state.jimuForBuilderUtils)||void 0===_b?void 0:_b.CUSTOM_GROUP),itemList=(customWidgetList||[]).concat((null==commonWidgetList?void 0:commonWidgetList.filter((w=>{var _a;return w.group===(null===(_a=this.state.jimuForBuilderUtils)||void 0===_a?void 0:_a.CUSTOM_GROUP)})))||[]).filter((w=>this.isFuzzySearch(groupLabel,searchValue)||this.isFuzzySearch(w.label,searchValue)));if(!searchValue||itemList.length>0)return{label:groupLabel,groupId:null===(_c=this.state.jimuForBuilderUtils)||void 0===_c?void 0:_c.CUSTOM_GROUP,itemList}}return null}isFuzzySearch(label,searchValue){return!!label&&(!searchValue||label.toLocaleLowerCase().includes(searchValue.toLocaleLowerCase()))}render(){var _a,_b,_c,_d;const WidgetGroup=this.WidgetGroup,{commonWidgetList,remoteCustomWidgetList:customWidgetList,selectedGroup,searchValue}=this.state,showCommonGroups=!!commonWidgetList;let commonWidgetsToShow=commonWidgetList;const sectionItem=null===(_b=null===(_a=this.state.jimuForBuilderUtils)||void 0===_a?void 0:_a.getSectionItemForWidgetsList)||void 0===_b?void 0:_b.call(_a,this.props.intl);showCommonGroups&&this.props.isAccepted(sectionItem,this.props.isPlaceholder)&&(commonWidgetsToShow=commonWidgetList.concat([sectionItem]));const commonGroups=showCommonGroups&&this.getCommonGroups(commonWidgetsToShow,selectedGroup,searchValue),showCustomGroup=null===(_d=null===(_c=this.state.jimuForBuilderUtils)||void 0===_c?void 0:_c.showCustomWidgets)||void 0===_d?void 0:_d.call(_c,commonWidgetsToShow),customGroup=showCustomGroup&&this.getCustomGroup(commonWidgetsToShow,customWidgetList,selectedGroup,searchValue),groupList=this.getGroupList(commonWidgetsToShow,customWidgetList,searchValue);return(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)("content mt-4",this.props.className),css:style},(0,jimu_core.Yac)("div",{className:"d-flex justify-content-between align-items-center mb-4 px-20"},(0,jimu_core.Yac)(jimu_ui.TextInput,{ref:this.searchInputRef,prefix:(0,jimu_core.Yac)(search.V,{size:16,color:"var(--ref-palette-neutral-800)"}),value:searchValue,onChange:this.onSearchValueChange,className:"w-100",size:"sm",placeholder:this.props.intl.formatMessage({id:"search",defaultMessage:jimu_core.kgw.search}),allowClear:!0})),(0,jimu_core.Yac)("div",{className:"d-flex justify-content-between align-items-center mb-4 px-20"},(0,jimu_core.Yac)("div",{className:"groups"},this.props.intl.formatMessage({id:"category",defaultMessage:jimu_ui.defaultMessages.category})),(0,jimu_core.Yac)(jimu_ui.Select,{className:"group-select",size:"sm",value:selectedGroup,onChange:this.changeSelectedGroup},groupList.map(((g,i)=>(0,jimu_core.Yac)("option",{value:g.value,key:i,selected:g.value===selectedGroup},g.label))))),(0,jimu_core.Yac)("div",{className:"w-100 list-container px-20"},!commonWidgetList&&(0,jimu_core.Yac)(jimu_ui.Loading,{type:jimu_ui.LoadingType.Secondary}),showCommonGroups&&Object.values(commonGroups).sort(((g1,g2)=>g1.groupId-g2.groupId)).map(((g,i)=>(0,jimu_core.Yac)(WidgetGroup,{key:i,group:g}))),showCustomGroup&&(0,jimu_core.Yac)(WidgetGroup,{group:customGroup})))}}_WidgetList.defaultProps={isPlaceholder:!1,isAccepted:()=>!0};const widget_list_WidgetList=(0,jimu_core.j4T)(_WidgetList);try{widget_list_WidgetList.displayName="WidgetList",widget_list_WidgetList.__docgenInfo={description:"",displayName:"WidgetList",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(item: LayoutItemConstructorProps) => void"}},isPlaceholder:{defaultValue:null,description:"",name:"isPlaceholder",required:!1,type:{name:"boolean"}},isAccepted:{defaultValue:null,description:"",name:"isAccepted",required:!0,type:{name:"(item: LayoutItemConstructorProps, isReplacePlaceholder: boolean) => boolean"}},onWidgetLoaded:{defaultValue:null,description:"",name:"onWidgetLoaded",required:!1,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/widget-list-popper/widget-list.tsx#WidgetList"]={docgenInfo:widget_list_WidgetList.__docgenInfo,name:"WidgetList",path:"../jimu-ui/advanced/lib/setting-components/components/widget-list-popper/widget-list.tsx#WidgetList"})}catch(__react_docgen_typescript_loader_error){}const widget_list_popper_shiftOptions={rootBoundary:"viewport",padding:0},flipOptions={fallbackPlacements:["top","right","bottom","left"]},widget_list_popper_style=jimu_core.AHW`
  background-color: var(--sys-color-surface-paper);
  color: var(--ref-palette-neutral-1100);

  .content {
    height: 600px;
    width: 404px;
    overflow: hidden;
    padding: 0;
  }

  .title {
    font-size: 16px;
    font-weight: 600;
    color: var(--ref-palette-neutral-1100);
  }

  .px-20 {
    padding-left: 20px;
    padding-right: 20px;
  }

  .pt-20 {
    padding-top: 20px;
  }
`;class _WidgetListPopper extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.togglePopper=evt=>{this.state.open&&this.props.onClose&&this.props.onClose(evt)},this.onWidgetLoaded=()=>{this.setState({generation:this.state.generation+1})},this.state={open:!0,generation:0}}render(){var _a;return this.state.open?(0,jimu_core.Yac)(page_aware_popper,{className:this.props.className,placement:null!==(_a=this.props.placement)&&void 0!==_a?_a:"bottom",toggle:this.togglePopper,css:widget_list_popper_style,version:this.state.generation,shiftOptions:widget_list_popper_shiftOptions,flipOptions,reference:this.props.referenceElement,open:!0,forceLatestFocusElements:!0,autoFocus:!1},(0,jimu_core.Yac)("div",{className:"shadow-3 content",css:this.props.css},(0,jimu_core.Yac)("div",{className:"d-flex justify-content-between align-items-center px-20 pt-20"},(0,jimu_core.Yac)("div",{className:"title"},this.props.intl.formatMessage({id:"addWidget",defaultMessage:jimu_ui.defaultMessages.addWidget})),(0,jimu_core.Yac)(jimu_ui.Button,{size:"sm",icon:!0,type:"tertiary",onClick:this.togglePopper,title:this.props.intl.formatMessage({id:"close",defaultMessage:jimu_core.kgw.close})},(0,jimu_core.Yac)(editor_close.r,null))),(0,jimu_core.Yac)(widget_list_WidgetList,{isPlaceholder:this.props.isPlaceholder,isAccepted:this.props.isAccepted,onSelect:this.props.onSelect,onWidgetLoaded:this.onWidgetLoaded}))):null}}_WidgetListPopper.defaultProps={isPlaceholder:!1,isAccepted:()=>!0};const widget_list_popper_WidgetListPopper=(0,jimu_core.j4T)(_WidgetListPopper);try{widget_list_popper_WidgetListPopper.displayName="WidgetListPopper",widget_list_popper_WidgetListPopper.__docgenInfo={description:"",displayName:"WidgetListPopper",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(item: LayoutItemConstructorProps) => void"}},placement:{defaultValue:null,description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"bottom"'},{value:'"left"'},{value:'"right"'},{value:'"top"'},{value:'"bottom-end"'},{value:'"bottom-start"'},{value:'"left-end"'},{value:'"left-start"'},{value:'"right-end"'},{value:'"right-start"'},{value:'"top-end"'},{value:'"top-start"'}]}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"(evt?: MouseEvent<any, MouseEvent>) => void"}},isPlaceholder:{defaultValue:null,description:"",name:"isPlaceholder",required:!1,type:{name:"boolean"}},referenceElement:{defaultValue:null,description:"",name:"referenceElement",required:!0,type:{name:"HTMLElement"}},isAccepted:{defaultValue:null,description:"",name:"isAccepted",required:!0,type:{name:"(item: LayoutItemConstructorProps, isReplacePlaceholder: boolean) => boolean"}},css:{defaultValue:null,description:"",name:"css",required:!1,type:{name:"SerializedStyles"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/widget-list-popper/index.tsx#WidgetListPopper"]={docgenInfo:widget_list_popper_WidgetListPopper.__docgenInfo,name:"WidgetListPopper",path:"../jimu-ui/advanced/lib/setting-components/components/widget-list-popper/index.tsx#WidgetListPopper"})}catch(__react_docgen_typescript_loader_error){}var sort_tree_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const buttonStyles=jimu_core.AHW`button { padding: 0 !important; }`,sort_tree_SortTree=props=>{const{rootItemJson,onSort,onRemove,css,className}=props,others=sort_tree_rest(props,["rootItemJson","onSort","onRemove","css","className"]),[version,setVersion]=jimu_core.q_G.useState(0),rootItemJsonExpanded=jimu_core.q_G.useMemo((()=>0===version?rootItemJson:Object.assign({},rootItemJson)),[rootItemJson,version]),onUpdateItem=jimu_core.q_G.useCallback(((actionData,refComponent)=>{"handleDidDrop"===actionData.updateType&&(null==onSort||onSort(actionData))}),[onSort]),translate=jimu_core.JLE.useTranslation(jimu_ui.defaultMessages),renderOverrideItemCommands=jimu_core.q_G.useCallback(((actionData,refComponent)=>{var _a;const item=refComponent.props.itemJsons[0];return(0,jimu_core.Yac)("div",{css:buttonStyles,className:"d-flex align-items-center justify-content-end"},(null===(_a=item.itemChildren)||void 0===_a?void 0:_a.length)>0&&(0,jimu_core.Yac)(jimu_ui.Tooltip,{title:item.itemStateExpanded?translate("collapse"):translate("expand")},(0,jimu_core.Yac)(jimu_ui.Button,{onClick:()=>{item.itemStateExpanded=!item.itemStateExpanded,setVersion((old=>old+1))},type:"tertiary",disableHoverEffect:!0,disableRipple:!0,icon:!0,"aria-expanded":item.itemStateExpanded},item.itemStateExpanded?(0,jimu_core.Yac)(up.k,{size:"s"}):(0,jimu_core.Yac)(down.l,{size:"s"}))),(0,jimu_core.Yac)(jimu_ui.Tooltip,{title:translate("deleteOption")},(0,jimu_core.Yac)(jimu_ui.Button,{onClick:()=>{null==onRemove||onRemove(item)},type:"tertiary",disableHoverEffect:!0,disableRipple:!0,icon:!0},(0,jimu_core.Yac)(editor_close.r,{size:"s"}))))}),[onRemove,translate]);(0,jimu_theme.DP)();return(0,jimu_core.Yac)(list_tree.PH,Object.assign({css:[jimu_core.AHW`
width: 100%;
.jimu-tree-main {
  padding: 2px 0 2px 0;
  overflow: hidden;
}
.jimu-tree-item__drag-handle, .jimu-tree-item__title {
  cursor: move;
}
.jimu-tree-item__children-toggle {
  display: none;
}
.toggle-placeholder {
  display: none;
}
.jimu-collapse {
  width: 100%;
}
`,css],className:(0,jimu_core.xWm)("sort-tree",className),rootItemJson:rootItemJsonExpanded,dndEnabled:!0,isMultiSelection:!1,treeAlignmentType:list_tree.Q4.Intact,renderOverrideItemCommands},others,{onUpdateItem}))};try{sort_tree_SortTree.displayName="SortTree",sort_tree_SortTree.__docgenInfo={description:"",displayName:"SortTree",props:{rootItemJson:{defaultValue:null,description:"Root item node of the tree.",name:"rootItemJson",required:!0,type:{name:"TreeItemType"}},onSort:{defaultValue:null,description:"",name:"onSort",required:!0,type:{name:"(actionData: UpdateTreeActionDataType & TreeDropItemActionDataType) => void"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!0,type:{name:"(item: TreeItemType) => void"}},css:{defaultValue:null,description:"",name:"css",required:!1,type:{name:"SerializedStyles"}},className:{defaultValue:null,description:"Add class name to the component.",name:"className",required:!1,type:{name:"string"}},treeAlignmentType:{defaultValue:{value:"TreeAlignmentType.Typical"},description:"The key of template that you want to use to render the content.",name:"treeAlignmentType",required:!1,type:{name:"enum",value:[{value:'"TYPICAL"'},{value:'"INTACT"'}]}},treeStyle:{defaultValue:null,description:"The styles for component.",name:"treeStyle",required:!1,type:{name:"enum",value:[{value:'"BASIC"'},{value:'"CARD"'}]}},singleLineText:{defaultValue:null,description:"Single line text is displayed. Only for layer selector now.\n@ignore",name:"singleLineText",required:!1,type:{name:"boolean"}},isTree:{defaultValue:{value:"tree"},description:"It's used to check if tree since List extends Tree.\n@ignore",name:"isTree",required:!1,type:{name:"boolean"}},collapseStyle:{defaultValue:{value:"TreeCollapseStyle.Plus"},description:"The style of expand/collapse icon.",name:"collapseStyle",required:!1,type:{name:"enum",value:[{value:'"PLUS_MINUS"'},{value:'"ARROW"'}]}},rootItemVisible:{defaultValue:null,description:"Whether to display the root item itself.",name:"rootItemVisible",required:!1,type:{name:"boolean"}},handleAction:{defaultValue:null,description:"The callback that will fire when any action is triggered (use default prop value unless for advanced usage)\n@ignore",name:"handleAction",required:!1,type:{name:"<ArgT, ResT>(actionKey: TreeActionType | TreeMainActionType | TreeItemActionType, actionData: ArgT, refComponent: _Tree | TreeMain | _TreeItem) => ResT"}},forwardRef:{defaultValue:null,description:"ForwardRef to component outer div.\n@ignore",name:"forwardRef",required:!1,type:{name:"(ref: any) => void"}},size:{defaultValue:{value:"default"},description:"Defines the size of the Tree item.",name:"size",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"sm"'},{value:'"lg"'}]}},topTag:{defaultValue:null,description:"A component or tag name to render the component's top level node.\n@ignore",name:"topTag",required:!1,type:{name:"string | ComponentType<any>"}},dndEnabled:{defaultValue:null,description:"Whether to support drag-and-drop feature.",name:"dndEnabled",required:!1,type:{name:"boolean"}},showCheckbox:{defaultValue:{value:"false"},description:"Whether to show checkbox for every item.\nUse `checkboxLinkage` instead.\n@deprecated\n@ignore",name:"showCheckbox",required:!1,type:{name:"boolean"}},disableDoubleClickTitle:{defaultValue:{value:"false"},description:"Whether to disable the double-click on the title to enter edit mode.",name:"disableDoubleClickTitle",required:!1,type:{name:"boolean"}},showRemoveIconForDisabledItem:{defaultValue:{value:"false"},description:"Whether to show the remove icon for any disabled item.",name:"showRemoveIconForDisabledItem",required:!1,type:{name:"boolean"}},isMultiSelection:{defaultValue:{value:"true"},description:"Whether to support multi-selection.",name:"isMultiSelection",required:!1,type:{name:"boolean"}},checkboxLinkage:{defaultValue:{value:"true"},description:"Whether the specific tree node change affects parent and child nodes.\nOnly valid when isMultiSelection is true.",name:"checkboxLinkage",required:!1,type:{name:"boolean"}},searchedText:{defaultValue:null,description:"Wrap the searchedText with a <strong/> TAG when it exists.\n@ignore",name:"searchedText",required:!1,type:{name:"string"}},renderOverrideItemDraggableContainer:{defaultValue:null,description:"@ignore",name:"renderOverrideItemDraggableContainer",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},renderOverrideItemDroppableContainer:{defaultValue:null,description:"@ignore",name:"renderOverrideItemDroppableContainer",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},renderOverrideItemChildrenToggle:{defaultValue:null,description:"@ignore",name:"renderOverrideItemChildrenToggle",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},renderOverrideItemDragHandle:{defaultValue:null,description:"@ignore",name:"renderOverrideItemDragHandle",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},renderOverrideItemDetailToggle:{defaultValue:null,description:"@ignore",name:"renderOverrideItemDetailToggle",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},renderOverrideItemIcon:{defaultValue:null,description:"@ignore",name:"renderOverrideItemIcon",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},renderOverrideItemTitle:{defaultValue:null,description:"@ignore",name:"renderOverrideItemTitle",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},renderOverrideItemCommands:{defaultValue:null,description:"@ignore",name:"renderOverrideItemCommands",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},renderOverrideItemMainLine:{defaultValue:null,description:"Render the custom main line content.",name:"renderOverrideItemMainLine",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},renderOverrideItemDetailLine:{defaultValue:null,description:"@ignore",name:"renderOverrideItemDetailLine",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},renderOverrideItemBody:{defaultValue:null,description:"@ignore",name:"renderOverrideItemBody",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},renderOverrideItemContent:{defaultValue:null,description:"@ignore",name:"renderOverrideItemContent",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},renderOverrideItemSubitems:{defaultValue:null,description:"@ignore",name:"renderOverrideItemSubitems",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},renderOverrideItem:{defaultValue:null,description:"@ignore",name:"renderOverrideItem",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},overrideItemBlockInfo:{defaultValue:null,description:"Fired when getting the block layout info.",name:"overrideItemBlockInfo",required:!1,type:{name:"(actionData: TreeOverrideItemBlockInfoActionDataType, refComponent: _TreeItem) => TreeItemBlockInfoType"}},handleInitTreeItemDndDropZone:{defaultValue:null,description:"Fired when adding or removing dnd features into the component.\n@ignore",name:"handleInitTreeItemDndDropZone",required:!1,type:{name:"(actionData: TreeInitDndActionDataType, refComponent: _TreeItem) => void"}},handleInitTreeItemDndDrag:{defaultValue:null,description:"@ignore",name:"handleInitTreeItemDndDrag",required:!1,type:{name:"(actionData: TreeInitDndActionDataType, refComponent: _TreeItem) => void"}},handleDidDrop:{defaultValue:null,description:"Fired when dropping a dragging item.\n@ignore",name:"handleDidDrop",required:!1,type:{name:"(actionData: TreeDropItemActionDataType, refComponent: _TreeItem) => void"}},handleDisabledItemRemoved:{defaultValue:null,description:"Fired when checking if the disabled item supports to be removed.\n@ignore",name:"handleDisabledItemRemoved",required:!1,type:{name:"(actionData: any, refComponent: _TreeItem) => void"}},handleToggleDetail:{defaultValue:null,description:"Fired when detail content is toggling for display.\n@ignore",name:"handleToggleDetail",required:!1,type:{name:"(actionData: TreeToggleItemDetailActionDataType, refComponent: _TreeItem) => void"}},handleExpandItem:{defaultValue:null,description:"Fired when expanding or collapsing the children.\n@ignore",name:"handleExpandItem",required:!1,type:{name:"(actionData: TreeExpandItemActionDataType, refComponent: _TreeItem) => void"}},handleEditingTextChange:{defaultValue:null,description:"Fired when changing the editing text of item title.\n@ignore",name:"handleEditingTextChange",required:!1,type:{name:"(actionData: TreeEditingItemDataType, refComponent: _TreeItem) => void"}},handleExitEditing:{defaultValue:null,description:"Fired when exiting the editing text mode.\n@ignore",name:"handleExitEditing",required:!1,type:{name:"(actionData: TreeEditingItemDataType, refComponent: _TreeItem) => void"}},handleStartEditing:{defaultValue:null,description:"Fired when starting to edit text of item title.\n@ignore",name:"handleStartEditing",required:!1,type:{name:"(actionData: TreeEditingItemDataType, refComponent: _TreeItem) => void"}},handleFindSearchText:{defaultValue:null,description:"Fired when searching for filter text.\n@ignore",name:"handleFindSearchText",required:!1,type:{name:"(actionData: TreeActionDataType, refComponent: _TreeItem) => any"}},isItemDisplayable:{defaultValue:null,description:"Fired when checking if the item should be displayed.",name:"isItemDisplayable",required:!1,type:{name:"(actionData: TreeActionDataType, refComponent: _TreeItem) => boolean"}},isItemFocused:{defaultValue:null,description:"Fired when checking if an item is focused.\nPlease use `itemStateChecked` to set the focus state for each tree item.\n@deprecated",name:"isItemFocused",required:!1,type:{name:"(actionData: any, refComponent: _TreeItem) => boolean"}},handleClickItemBody:{defaultValue:null,description:"Fired when clicking the item body.\n@ignore",name:"handleClickItemBody",required:!1,type:{name:"(actionData: TreeActionDataType, refComponent: _TreeItem) => void"}},handleClickItemTitle:{defaultValue:null,description:"Fired when clicking the item title.\n@ignore",name:"handleClickItemTitle",required:!1,type:{name:"(actionData: TreeActionDataType, refComponent: _TreeItem) => void"}},handleDoubleClickItemTitle:{defaultValue:null,description:"Fired when double-clicking the item title.\n@ignore",name:"handleDoubleClickItemTitle",required:!1,type:{name:"(actionData: TreeActionDataType, refComponent: _TreeItem) => void"}},handleCheckboxChanged:{defaultValue:null,description:"Fired when the check state of the item is changed.\n@ignore",name:"handleCheckboxChanged",required:!1,type:{name:"(actionData: TreeActionDataType, refComponent: _TreeItem) => void"}},handleUpdateItem:{defaultValue:null,description:"Fired when item json is changed.\n@ignore",name:"handleUpdateItem",required:!1,type:{name:"(actionData: UpdateTreeActionDataType, refComponent: _TreeItem) => void"}},getDragItemJsons:{defaultValue:null,description:"Fired when getting current drag item data.\n@ignore",name:"getDragItemJsons",required:!1,type:{name:"(actionData: TreeDragItemActionDataType, refComponent: _TreeItem) => TreeDragItemActionDataType"}},setDragItemJsons:{defaultValue:null,description:"Fired when setting current drag item data.\n@ignore",name:"setDragItemJsons",required:!1,type:{name:"(actionData: TreeDragItemActionDataType, refComponent: _TreeItem) => void"}},handleFocusItem:{defaultValue:null,description:"Fired when setting the item focused.\n@ignore",name:"handleFocusItem",required:!1,type:{name:"(actionData: TreeActionDataType, refComponent: _TreeItem) => void"}},isItemDroppable:{defaultValue:null,description:"Triggered to verify if the current item is being targeted by a dragged item.\nThe possible drop positions are inside, above, or below.",name:"isItemDroppable",required:!1,type:{name:"(actionData: TreeCheckDropItemActionDataType, refComponent: _TreeItem) => void"}},isFolder:{defaultValue:null,description:"Fired when checking if the current item is a folder.\nDisable the checkbox if the current item is in the root and has no children.",name:"isFolder",required:!1,type:{name:"(actionData: TreeCheckDropItemActionDataType, refComponent: _TreeItem) => void"}},onDidDrop:{defaultValue:null,description:"Fired when a dragged item is dropped.",name:"onDidDrop",required:!1,type:{name:"(actionData: TreeDropItemActionDataType, refComponent: _TreeItem) => void"}},onToggleDetail:{defaultValue:null,description:"Fired when the detail content is expanded for display.",name:"onToggleDetail",required:!1,type:{name:"(actionData: TreeToggleItemDetailActionDataType, refComponent: _TreeItem) => void"}},onExpandItem:{defaultValue:null,description:"Fired when children are expanded or collapsed.",name:"onExpandItem",required:!1,type:{name:"(actionData: TreeExpandItemActionDataType, refComponent: _TreeItem) => void"}},onEditingTextChange:{defaultValue:null,description:"Fired when the text editing of an item title is changed.",name:"onEditingTextChange",required:!1,type:{name:"(actionData: TreeEditingItemDataType, refComponent: _TreeItem) => void"}},onExitEditing:{defaultValue:null,description:"Fired when the text-editing mode is exited.",name:"onExitEditing",required:!1,type:{name:"(actionData: TreeEditingItemDataType, refComponent: _TreeItem) => void"}},onClickItemBody:{defaultValue:null,description:"Fired when the item body is clicked.",name:"onClickItemBody",required:!1,type:{name:"(actionData: TreeActionDataType, refComponent: _TreeItem) => void"}},onDoubleClickItemTitle:{defaultValue:null,description:"Fired when the item title is double-clicked.",name:"onDoubleClickItemTitle",required:!1,type:{name:"(actionData: TreeActionDataType, refComponent: _TreeItem) => void"}},onClickItemCommand:{defaultValue:null,description:"Fired when any command item is clicked.",name:"onClickItemCommand",required:!1,type:{name:"(actionData: CommandActionDataType, refComponent: _TreeItem) => void"}},onUpdateItem:{defaultValue:null,description:"Fired when the item is updated.",name:"onUpdateItem",required:!1,type:{name:"(actionData: UpdateTreeActionDataType, refComponent: _TreeItem) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/sort-tree-popper/sort-tree.tsx#SortTree"]={docgenInfo:sort_tree_SortTree.__docgenInfo,name:"SortTree",path:"../jimu-ui/advanced/lib/setting-components/components/sort-tree-popper/sort-tree.tsx#SortTree"})}catch(__react_docgen_typescript_loader_error){}const sort_tree_popper_shiftOptions={rootBoundary:"viewport",padding:0},sort_tree_popper_flipOptions={fallbackPlacements:["top","right","bottom","left"]},sort_tree_popper_SortTreePopper=props=>{const{title,placement,referenceElement,onClose,css,className,rootItemJson,onSort,onRemove}=props;return(0,jimu_core.Yac)(jimu_theme.nD,{useTheme2:!0},(0,jimu_core.Yac)(page_aware_popper,{placement:null!=placement?placement:"bottom",reference:referenceElement,toggle:onClose,css,className:(0,jimu_core.xWm)("sort-tree-popper",className),shiftOptions:sort_tree_popper_shiftOptions,flipOptions:sort_tree_popper_flipOptions,open:!0,forceLatestFocusElements:!0},(0,jimu_core.Yac)(jimu_ui.PanelHeader,{className:"p-3",title,onClose}),(0,jimu_core.Yac)("div",{className:"panel-body p-3"},(0,jimu_core.Yac)(sort_tree_SortTree,{rootItemJson,onSort,onRemove}))))};try{sort_tree_popper_SortTreePopper.displayName="SortTreePopper",sort_tree_popper_SortTreePopper.__docgenInfo={description:"",displayName:"SortTreePopper",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},referenceElement:{defaultValue:null,description:"",name:"referenceElement",required:!0,type:{name:"HTMLElement"}},placement:{defaultValue:null,description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"bottom"'},{value:'"left"'},{value:'"right"'},{value:'"top"'},{value:'"bottom-end"'},{value:'"bottom-start"'},{value:'"left-end"'},{value:'"left-start"'},{value:'"right-end"'},{value:'"right-start"'},{value:'"top-end"'},{value:'"top-start"'}]}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"(evt?: MouseEvent<any, MouseEvent>) => void"}},css:{defaultValue:null,description:"",name:"css",required:!1,type:{name:"SerializedStyles"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},rootItemJson:{defaultValue:null,description:"",name:"rootItemJson",required:!0,type:{name:"TreeItemType"}},onSort:{defaultValue:null,description:"",name:"onSort",required:!1,type:{name:"(actionData: UpdateTreeActionDataType & TreeDropItemActionDataType) => void"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!0,type:{name:"(item: TreeItemType) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/sort-tree-popper/index.tsx#SortTreePopper"]={docgenInfo:sort_tree_popper_SortTreePopper.__docgenInfo,name:"SortTreePopper",path:"../jimu-ui/advanced/lib/setting-components/components/sort-tree-popper/index.tsx#SortTreePopper"})}catch(__react_docgen_typescript_loader_error){}var editor_reset=__webpack_require__("../jimu-icons/outlined/editor/reset.tsx"),collapsable_reset_panel_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const getStyles=()=>jimu_core.AHW`
  .jimu-collapse-wrapper-inner {
    padding-top: var(--sys-spacing-2);
  }
`,getLabelResetStyles=()=>jimu_core.AHW`
  flex-grow: 1;
  display: flex;
  justify-content: space-between;
  align-items: center;
  .label {
    color:  var(--sys-color-action-text);
    &.disabled {
      color: var(--sys-color-action-disabled-text);
    }
  }
`;function collapsable_reset_panel_CollapsableResetPanel(props){const{label,isEmpty,onReset,children}=props,others=collapsable_reset_panel_rest(props,["label","isEmpty","onReset","children"]),labelReset=(0,jimu_core.Yac)(collapsable_reset_panel_LabelReset,{label,isEmpty,onReset});return(0,jimu_core.Yac)(jimu_ui.CollapsablePanel,Object.assign({css:getStyles(),headerTag:"div",label:labelReset,"aria-label":label},others,{defaultIsOpen:!isEmpty}),children)}function collapsable_reset_panel_LabelReset(props){const{label,isEmpty,onReset}=props,resetString=jimu_core.JLE.useTranslation(jimu_ui.defaultMessages)("reset");return(0,jimu_core.Yac)("div",{css:getLabelResetStyles()},(0,jimu_core.Yac)("span",{className:(0,jimu_core.xWm)("label",{disabled:isEmpty})},label),!isEmpty&&(0,jimu_core.Yac)(jimu_ui.Button,{size:"sm",variant:"text",icon:!0,title:resetString,"aria-label":label,className:"p-0",onClick:onReset},(0,jimu_core.Yac)(editor_reset.w,null)))}try{collapsable_reset_panel_CollapsableResetPanel.displayName="CollapsableResetPanel",collapsable_reset_panel_CollapsableResetPanel.__docgenInfo={description:"",displayName:"CollapsableResetPanel",props:{children:{defaultValue:null,description:"The children of this component.",name:"children",required:!1,type:{name:"ReactNode"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},isEmpty:{defaultValue:null,description:"",name:"isEmpty",required:!0,type:{name:"boolean"}},onReset:{defaultValue:null,description:"",name:"onReset",required:!0,type:{name:"() => void"}},type:{defaultValue:{value:"default"},description:"The type of this component.",name:"type",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"primary"'}]}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"Defines the role added to the element.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.\nBy default, the accessible name is computed from any text content inside the element.\nIf lacking, provide an aria-label.",name:"aria-label",required:!1,type:{name:"string"}},tag:{defaultValue:{value:"div"},description:"The tag of the component.\nIf the tag is 'label', clicking on the label will trigger the form child element.",name:"tag",required:!1,type:{name:"enum",value:[{value:'"div"'},{value:'"label"'}]}},disabled:{defaultValue:{value:"false"},description:"Whether this component is disabled.",name:"disabled",required:!1,type:{name:"boolean"}},keepMount:{defaultValue:{value:"false"},description:"If true, the children will be hidden but do not unmount when isOpen is false.\n@ignore",name:"keepMount",required:!1,type:{name:"boolean"}},isOpen:{defaultValue:{value:"false"},description:"Controls whether the `Collapse` component is open or closed.\nIt's recommended use props `in`.",name:"isOpen",required:!1,type:{name:"boolean"}},enter:{defaultValue:{value:"true"},description:"Enable or disable enter transitions.",name:"enter",required:!1,type:{name:"boolean"}},defaultIsOpen:{defaultValue:null,description:"The default open state of the component.",name:"defaultIsOpen",required:!1,type:{name:"boolean"}},timeout:{defaultValue:{value:"standard"},description:"The duration for the transition, in milliseconds.\nYou may specify a single timeout for all transitions, or individually with an object.\n\nSet to 'auto' to automatically calculate transition time based on height.",name:"timeout",required:!1,type:{name:'TransitionDurationOption | "auto"'}},in:{defaultValue:{value:"false"},description:"If `true`, the component will transition in.",name:"in",required:!1,type:{name:"boolean"}},mountOnEnter:{defaultValue:{value:"false"},description:'By default the child component is mounted immediately along with the\nparent Transition component. If you want to "lazy mount" the component on\nthe first `in={true}` you can set `mountOnEnter`. After the first enter\ntransition the component will stay mounted, even on "exited", unless you\nalso specify `unmountOnExit`.',name:"mountOnEnter",required:!1,type:{name:"boolean"}},unmountOnExit:{defaultValue:{value:"false"},description:"By default the child component stays mounted after it reaches the\n'exited' state. Set `unmountOnExit` if you'd prefer to unmount the\ncomponent after it finishes exiting.",name:"unmountOnExit",required:!1,type:{name:"boolean"}},onEnter:{defaultValue:null,description:'Callback fired before the "entering" status is applied. An extra\nparameter `isAppearing` is supplied to indicate if the enter stage is\noccurring on the initial mount',name:"onEnter",required:!1,type:{name:"(node: HTMLElement, isAppearing: boolean) => void"}},onEntering:{defaultValue:null,description:'Callback fired after the "entering" status is applied. An extra parameter\nisAppearing is supplied to indicate if the enter stage is occurring on\nthe initial mount',name:"onEntering",required:!1,type:{name:"(node: HTMLElement, isAppearing: boolean) => void"}},onEntered:{defaultValue:null,description:'Callback fired after the "entered" status is applied. An extra parameter\nisAppearing is supplied to indicate if the enter stage is occurring on\nthe initial mount',name:"onEntered",required:!1,type:{name:"(node: HTMLElement, isAppearing: boolean) => void"}},onExit:{defaultValue:null,description:'Callback fired before the "exiting" status is applied.',name:"onExit",required:!1,type:{name:"(node: HTMLElement) => void"}},onExiting:{defaultValue:null,description:'Callback fired after the "exiting" status is applied.',name:"onExiting",required:!1,type:{name:"(node: HTMLElement) => void"}},onExited:{defaultValue:null,description:'Callback fired after the "exited" status is applied.',name:"onExited",required:!1,type:{name:"(node: HTMLElement) => void"}},nodeRef:{defaultValue:null,description:"A React reference to DOM element that need to transition: https://stackoverflow.com/a/51127130/4671932\nWhen `nodeRef` prop is used, node is not passed to callback functions (e.g. onEnter) because user already has direct access to the node.\nWhen changing `key` prop of `Transition` in a `TransitionGroup` a new `nodeRef` need to be provided to `Transition` with changed `key`\nprop (@see https://github.com/reactjs/react-transition-group/blob/master/test/Transition-test.js).",name:"nodeRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},appear:{defaultValue:{value:"false"},description:'Normally a component is not transitioned if it is shown when the\n`<Transition>` component mounts. If you want to transition on the first\nmount set  appear to true, and the component will transition in as soon\nas the `<Transition>` mounts. Note: there are no specific "appear" states.\nappear only adds an additional enter transition.',name:"appear",required:!1,type:{name:"boolean"}},exit:{defaultValue:{value:"true"},description:"Enable or disable exit transitions.",name:"exit",required:!1,type:{name:"boolean"}},easing:{defaultValue:null,description:"The transition timing function.\nYou may specify a single easing or a object containing enter and exit values.",name:"easing",required:!1,type:{name:"TransitionEasingOption"}},addEndListener:{defaultValue:null,description:"Add a custom transition end trigger. Called with the transitioning DOM\nnode and a done callback. Allows for more fine grained transition end\nlogic. Note: Timeouts are still used as a fallback if provided.",name:"addEndListener",required:!1,type:{name:"(node: HTMLElement, done: () => void) => void"}},wrapperClassName:{defaultValue:null,description:"Defines the class names added to the wrapper container().",name:"wrapperClassName",required:!1,type:{name:"string"}},orientation:{defaultValue:{value:"vertical"},description:"The transition orientation.",name:"orientation",required:!1,type:{name:"enum",value:[{value:'"vertical"'},{value:'"horizontal"'}]}},collapsedSize:{defaultValue:{value:"'0px'"},description:"The width (horizontal) or height (vertical) of the container when collapsed.",name:"collapsedSize",required:!1,type:{name:"string | number"}},bottomLine:{defaultValue:{value:"false"},description:"Whether to show the bottom line.",name:"bottomLine",required:!1,type:{name:"boolean"}},headerTag:{defaultValue:{value:"label"},description:"The tag of the panel header.\nIf the tag is 'label', clicking on the label will trigger the form child element.",name:"headerTag",required:!1,type:{name:"enum",value:[{value:'"div"'},{value:'"label"'}]}},rightIcon:{defaultValue:null,description:"The right icon displayed after the label.",name:"rightIcon",required:!1,type:{name:"any"}},rightActiveIcon:{defaultValue:null,description:"The active icon displayed after the label.",name:"rightActiveIcon",required:!1,type:{name:"any"}},leftIcon:{defaultValue:null,description:"The left icon displayed before the label.",name:"leftIcon",required:!1,type:{name:"any"}},wrapLabel:{defaultValue:{value:"false"},description:"Whether to wrap label.",name:"wrapLabel",required:!1,type:{name:"boolean"}},level:{defaultValue:{value:"0"},description:"Defines the label size of the component.\n@ignore",name:"level",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"}]}},onRequestOpen:{defaultValue:null,description:"Invoked when opening the component.",name:"onRequestOpen",required:!1,type:{name:"() => void"}},onRequestClose:{defaultValue:null,description:"Invoked when closing the component.",name:"onRequestClose",required:!1,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/collapsable-reset-panel/index.tsx#CollapsableResetPanel"]={docgenInfo:collapsable_reset_panel_CollapsableResetPanel.__docgenInfo,name:"CollapsableResetPanel",path:"../jimu-ui/advanced/lib/setting-components/components/collapsable-reset-panel/index.tsx#CollapsableResetPanel"})}catch(__react_docgen_typescript_loader_error){}try{collapsable_reset_panel_LabelReset.displayName="LabelReset",collapsable_reset_panel_LabelReset.__docgenInfo={description:"",displayName:"LabelReset",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},isEmpty:{defaultValue:null,description:"",name:"isEmpty",required:!0,type:{name:"boolean"}},onReset:{defaultValue:null,description:"",name:"onReset",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/collapsable-reset-panel/index.tsx#LabelReset"]={docgenInfo:collapsable_reset_panel_LabelReset.__docgenInfo,name:"LabelReset",path:"../jimu-ui/advanced/lib/setting-components/components/collapsable-reset-panel/index.tsx#LabelReset"})}catch(__react_docgen_typescript_loader_error){}var jimu_for_builder_templates=__webpack_require__("../jimu-for-builder/templates.ts");function TemplateItem(props){var _a,_b,_c,_d;const{template,onClick}=props,locale=(0,jimu_core.Vp3)().getState().appContext.locale,label=null!==(_b=null===(_a=template.i18nLabel)||void 0===_a?void 0:_a[locale])&&void 0!==_b?_b:template.label,desc=null!==(_d=null===(_c=template.i18nDescription)||void 0===_c?void 0:_c[locale])&&void 0!==_d?_d:template.description,multipleIcon=null!=template.gifThumbnail,descId="templage_desc_"+template.name,style=jimu_core.q_G.useMemo((()=>jimu_core.AHW`
    transform: ${(0,jimu_core.Vp3)().getState().appContext.isRTL&&template.flipThumbnail?"scaleX(-1);":""}  ;
  `),[template]);return(0,jimu_core.Yac)("div",{className:"block-item"},(0,jimu_core.Yac)(jimu_ui.Tooltip,{title:desc},(0,jimu_core.Yac)(jimu_ui.Button,{role:"option","aria-label":label,"aria-describedby":descId,onClick,className:"block-item--icon p-0"},(0,jimu_core.Yac)("img",{className:(0,jimu_core.xWm)("default-icon",{"multiple-icon":multipleIcon}),css:style,src:template.thumbnail,draggable:!1,width:template.thumbnailWidth/2,height:template.thumbnailHeight/2}),multipleIcon&&(0,jimu_core.Yac)("img",{className:(0,jimu_core.xWm)("gif-icon",{"multiple-icon":multipleIcon}),css:style,draggable:!1,src:template.gifThumbnail}))),(0,jimu_core.Yac)("span",{"aria-hidden":!0,className:"block-item-label text-center mt-2",css:jimu_core.AHW`max-width: ${template.thumbnailWidth/2}px`},label),(0,jimu_core.Yac)("span",{"aria-hidden":!0,className:"sr-only",id:descId},desc))}try{TemplateItem.displayName="TemplateItem",TemplateItem.__docgenInfo={description:"",displayName:"TemplateItem",props:{template:{defaultValue:null,description:"",name:"template",required:!0,type:{name:"Template"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/template-selector/template-item.tsx#TemplateItem"]={docgenInfo:TemplateItem.__docgenInfo,name:"TemplateItem",path:"../jimu-ui/advanced/lib/setting-components/components/template-selector/template-item.tsx#TemplateItem"})}catch(__react_docgen_typescript_loader_error){}var template_list_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};function template_list_TemplateList(props){const{templates,onItemSelect}=props,otherProps=template_list_rest(props,["templates","onItemSelect"]),theme=jimu_core.q_G.useMemo((()=>(0,jimu_theme.__)()),[]),style=jimu_core.q_G.useMemo((()=>jimu_core.AHW`
    width: auto;
    padding: 20px;
    background-color: ${theme?theme.ref.palette.neutral[400]:"var(--ref-palette-neutral-400)"};
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-row-gap: 10px;
    grid-column-gap: 10px;

    .block-item {
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      padding: 0;

      .jimu-btn {
        border-radius: unset !important;
      }

      .block-item--icon {
        background: ${theme?theme.ref.palette.neutral[300]:"var(--ref-palette-neutral-300)"};
        border: none;
        position: relative;
        cursor: pointer;

        .default-icon {
          opacity: 1;
        }
        .gif-icon {
          opacity: 0;
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
        }
      }
      .block-item--icon:hover {
        outline: 2px solid ${theme?theme.sys.color.primary.main:"var(--sys-color-primary-main)"};
        .default-icon.multiple-icon {
          opacity: 0;
        }
        .gif-icon {
          opacity: 1;
        }
      }

      .block-item-label {
        user-select: none;
        color: ${theme?theme.ref.palette.neutral[900]:"var(--ref-palette-neutral-900)"};
      }
    }

    .size-mode-SMALL & .block-item {
      width: 140px;
      height: auto;
    }
  `),[theme]);return(0,jimu_core.Yac)("div",Object.assign({className:window.jimuConfig.isInBuilder?jimu_theme.Dk:"",css:style},otherProps,{role:"listbox"}),templates.map((template=>(0,jimu_core.Yac)(TemplateItem,{key:template.name,template,onClick:()=>{onItemSelect(template)}}))))}try{template_list_TemplateList.displayName="TemplateList",template_list_TemplateList.__docgenInfo={description:"",displayName:"TemplateList",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},templates:{defaultValue:null,description:"",name:"templates",required:!0,type:{name:"Template[]"}},onItemSelect:{defaultValue:null,description:"",name:"onItemSelect",required:!0,type:{name:"(item: Template) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/template-selector/template-list.tsx#TemplateList"]={docgenInfo:template_list_TemplateList.__docgenInfo,name:"TemplateList",path:"../jimu-ui/advanced/lib/setting-components/components/template-selector/template-list.tsx#TemplateList"})}catch(__react_docgen_typescript_loader_error){}class PageTemplateList extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.onTabSelect=tabId=>{this.props.onTabSelect(tabId)},this.onFullScreenTypeChange=e=>{this.setState({fullScreenType:e.target.value})},this.state={fullScreenType:"all"}}render(){const{theme,formatMessage}=this.props,{fullScreenType}=this.state;let templates=[];return templates="fixed"===fullScreenType?(0,jimu_for_builder_templates.getFullScreenPageTemplates)():"grid"===fullScreenType?(0,jimu_for_builder_templates.getFullScreenGridPageTemplates)():[(0,jimu_for_builder_templates.getFullScreenPageTemplates)()[0],(0,jimu_for_builder_templates.getFullScreenGridPageTemplates)()[0]].concat((0,jimu_for_builder_templates.getFullScreenPageTemplates)().slice(1),(0,jimu_for_builder_templates.getFullScreenGridPageTemplates)().slice(1)),(0,jimu_core.Yac)("div",{className:"w-100 h-100"},(0,jimu_core.Yac)("h5",{className:"pt-4 px-5 mb-2 hint-paper text-truncate",title:formatMessage("addPage")},formatMessage("addPage")),(0,jimu_core.Yac)(jimu_ui.Tabs,{defaultValue:"fullScreenApp",fill:!0,type:"underline",css:jimu_core.AHW`
            height: calc(100% - 49px);
            width: 390px;
            .tab-content {
              height: calc(100% - 30px);
              .tab-pane {
                height: 100%;
                overflow-y: scroll;
              }
              .tab-pane:first-of-type {
                overflow-y: hidden;
              }
            }
            .jimu-nav {
              padding-left: ${theme&&theme.sys.spacing(5)};
              padding-right: ${theme&&theme.sys.spacing(5)};
            }
            .nav-item {
              width: 50%;
              .tab-title {
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
              }
            }
          `,onChange:this.onTabSelect},(0,jimu_core.Yac)(jimu_ui.Tab,{id:"fullScreenApp",title:formatMessage("fullScreenApp"),className:jimu_ui.FOCUSABLE_CONTAINER_CLASS},(0,jimu_core.Yac)("div",{className:"d-flex flex-column h-100"},(0,jimu_core.Yac)("div",{className:"align-self-end my-4",css:jimu_core.AHW`
                width: 120px;
                padding-right: 1.2rem;
              `},(0,jimu_core.Yac)(jimu_ui.Select,{value:fullScreenType,"aria-label":formatMessage("page"),size:"sm",onChange:this.onFullScreenTypeChange},(0,jimu_core.Yac)("option",{value:"all"},formatMessage("all")),(0,jimu_core.Yac)("option",{value:"fixed"},formatMessage("fixed")),(0,jimu_core.Yac)("option",{value:"grid"},formatMessage("grid")))),(0,jimu_core.Yac)(template_list_TemplateList,{className:(0,jimu_core.xWm)({[jimu_ui.FOCUSABLE_CONTAINER_CLASS]:"fullScreenApp"===this.props.tabId}),templates,onItemSelect:this.props.onItemSelect,css:jimu_core.AHW`
                  height: calc(100% - 64px);
                  overflow: auto;
                  padding-top: 0;
                `}))),(0,jimu_core.Yac)(jimu_ui.Tab,{id:"scrollingPage",title:formatMessage("scrollingPage"),className:jimu_ui.FOCUSABLE_CONTAINER_CLASS},(0,jimu_core.Yac)(template_list_TemplateList,{className:(0,jimu_core.xWm)({[jimu_ui.FOCUSABLE_CONTAINER_CLASS]:"scrollingPage"===this.props.tabId}),templates:(0,jimu_for_builder_templates.getScrollingPageTemplates)(),onItemSelect:this.props.onItemSelect}))))}}try{PageTemplateList.displayName="PageTemplateList",PageTemplateList.__docgenInfo={description:"",displayName:"PageTemplateList",props:{theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:"IMThemeVariables"}},formatMessage:{defaultValue:null,description:"",name:"formatMessage",required:!0,type:{name:"(id: string, values?: { [key: string]: any; }) => string"}},tabId:{defaultValue:null,description:"",name:"tabId",required:!0,type:{name:"string"}},onTabSelect:{defaultValue:null,description:"",name:"onTabSelect",required:!0,type:{name:"(tabId: string) => void"}},onItemSelect:{defaultValue:null,description:"",name:"onItemSelect",required:!0,type:{name:"(pageJson: any) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/page-template-popper/page-template-list.tsx#PageTemplateList"]={docgenInfo:PageTemplateList.__docgenInfo,name:"PageTemplateList",path:"../jimu-ui/advanced/lib/setting-components/components/page-template-popper/page-template-list.tsx#PageTemplateList"})}catch(__react_docgen_typescript_loader_error){}const page_template_popper_shiftOptions={rootBoundary:"viewport",padding:{bottom:20}};class page_template_popper_PageTemplatePopper extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.togglePopper=()=>{this.state.open&&this.props.onClose&&this.props.onClose(),this.state.open&&(0,jimu_core.u02)(this.props.referenceElement),this.setState({open:!this.state.open})},this.tabSelect=tabId=>{this.setState({tabId})},this.onItemSelect=templateJson=>{this.props.onClose(),this.props.onItemSelect(templateJson)},this.state={open:!0,tabId:"fullScreenApp"}}render(){const{referenceElement,theme}=this.props;return(0,jimu_core.Yac)(page_aware_popper,{placement:"bottom",theme:this.props.theme,reference:referenceElement,offsetOptions:10,open:!0,toggle:this.togglePopper,arrowOptions:!0,shiftOptions:page_template_popper_shiftOptions,forceLatestFocusElements:!0},(0,jimu_core.Yac)("div",{css:jimu_core.AHW`
            width: 390px;
            max-height: 640px;
            height: calc(100vh - 150px);
            overflow: hidden;
          `},(0,jimu_core.Yac)(PageTemplateList,{theme,tabId:this.state.tabId,onTabSelect:this.tabSelect,formatMessage:this.props.formatMessage,onItemSelect:this.onItemSelect})))}}try{page_template_popper_PageTemplatePopper.displayName="PageTemplatePopper",page_template_popper_PageTemplatePopper.__docgenInfo={description:"",displayName:"PageTemplatePopper",props:{theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:"IMThemeVariables"}},referenceElement:{defaultValue:null,description:"",name:"referenceElement",required:!0,type:{name:"HTMLElement"}},formatMessage:{defaultValue:null,description:"",name:"formatMessage",required:!0,type:{name:"(id: string, values?: { [key: string]: any; }) => string"}},onItemSelect:{defaultValue:null,description:"",name:"onItemSelect",required:!0,type:{name:"(item: any) => void"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/page-template-popper/index.tsx#PageTemplatePopper"]={docgenInfo:page_template_popper_PageTemplatePopper.__docgenInfo,name:"PageTemplatePopper",path:"../jimu-ui/advanced/lib/setting-components/components/page-template-popper/index.tsx#PageTemplatePopper"})}catch(__react_docgen_typescript_loader_error){}class WindowTemplateList extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.onTypeChange=e=>{this.setState({type:e.target.value})},this.state={type:"all"}}render(){const{formatMessage}=this.props,{type}=this.state;let templates=[];return templates="fixedModalWindow"===type?(0,jimu_for_builder_templates.getFixedModalWindowTemplates)():"fixedNonModalWindow"===type?(0,jimu_for_builder_templates.getFixedNonModalWindowTemplates)():"anchoredWindow"===type?(0,jimu_for_builder_templates.getAnchoredWindowTemplates)():(0,jimu_for_builder_templates.getWindowTemplates)(),(0,jimu_core.Yac)("div",{className:"w-100 h-100"},(0,jimu_core.Yac)("h5",{className:"pt-4 px-5 mb-2 hint-paper text-truncate",title:formatMessage("addDialog")},formatMessage("addDialog")),(0,jimu_core.Yac)("div",{className:"d-flex flex-column h-100"},(0,jimu_core.Yac)("div",{className:"align-self-end my-4",css:jimu_core.AHW`
              width: 170px;
              padding-right: 1.2rem;
            `},(0,jimu_core.Yac)(jimu_ui.Select,{value:this.state.type,"aria-label":formatMessage("addDialog"),size:"sm",onChange:this.onTypeChange},(0,jimu_core.Yac)("option",{value:"all"},formatMessage("all")),(0,jimu_core.Yac)("option",{value:"fixedModalWindow"},formatMessage("fixedModalWindow")),(0,jimu_core.Yac)("option",{value:"fixedNonModalWindow"},formatMessage("fixedNonModalWindow")),(0,jimu_core.Yac)("option",{value:"anchoredWindow"},formatMessage("anchoredWindow")))),(0,jimu_core.Yac)(template_list_TemplateList,{templates,onItemSelect:this.props.onItemSelect,css:jimu_core.AHW`
              height: calc(100% - 110px);
              overflow: auto;
              padding-top: 0;
              .block-item .block-item--icon {
                outline-offset: -2px;
              }
            `})))}}try{WindowTemplateList.displayName="WindowTemplateList",WindowTemplateList.__docgenInfo={description:"",displayName:"WindowTemplateList",props:{formatMessage:{defaultValue:null,description:"",name:"formatMessage",required:!0,type:{name:"(id: string, values?: { [key: string]: any; }) => string"}},onItemSelect:{defaultValue:null,description:"",name:"onItemSelect",required:!0,type:{name:"(pageJson: any) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/window-template-popper/window-template-list.tsx#WindowTemplateList"]={docgenInfo:WindowTemplateList.__docgenInfo,name:"WindowTemplateList",path:"../jimu-ui/advanced/lib/setting-components/components/window-template-popper/window-template-list.tsx#WindowTemplateList"})}catch(__react_docgen_typescript_loader_error){}const window_template_popper_shiftOptions={rootBoundary:"viewport",padding:{bottom:20}};class window_template_popper_WindowTemplatePopper extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.togglePopper=()=>{this.state.open&&this.props.onClose&&this.props.onClose(),this.state.open&&(0,jimu_core.u02)(this.props.referenceElement),this.setState({open:!this.state.open})},this.onItemSelect=templateJson=>{this.props.onClose(),this.props.onItemSelect(templateJson)},this.state={open:!0}}render(){const{referenceElement,theme}=this.props;return(0,jimu_core.Yac)(page_aware_popper,{placement:"bottom",theme,reference:referenceElement,offsetOptions:10,open:!0,toggle:this.togglePopper,arrowOptions:!0,shiftOptions:window_template_popper_shiftOptions,forceLatestFocusElements:!0},(0,jimu_core.Yac)("div",{css:jimu_core.AHW`
            width: 390px;
            max-height: 640px;
            height: calc(100vh - 150px);
            overflow: hidden;
          `},(0,jimu_core.Yac)(WindowTemplateList,{formatMessage:this.props.formatMessage,onItemSelect:this.onItemSelect})))}}try{window_template_popper_WindowTemplatePopper.displayName="WindowTemplatePopper",window_template_popper_WindowTemplatePopper.__docgenInfo={description:"",displayName:"WindowTemplatePopper",props:{theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:"IMThemeVariables"}},referenceElement:{defaultValue:null,description:"",name:"referenceElement",required:!0,type:{name:"HTMLElement"}},formatMessage:{defaultValue:null,description:"",name:"formatMessage",required:!0,type:{name:"(id: string, values?: { [key: string]: any; }) => string"}},onItemSelect:{defaultValue:null,description:"",name:"onItemSelect",required:!0,type:{name:"(item: any) => void"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/window-template-popper/index.tsx#WindowTemplatePopper"]={docgenInfo:window_template_popper_WindowTemplatePopper.__docgenInfo,name:"WindowTemplatePopper",path:"../jimu-ui/advanced/lib/setting-components/components/window-template-popper/index.tsx#WindowTemplatePopper"})}catch(__react_docgen_typescript_loader_error){}const template_selector_shiftOptions={rootBoundary:"viewport",crossAxis:!0,padding:{bottom:20}},template_selector_flipOptions={boundary:document.body,fallbackPlacements:["right","left"]};function template_selector_TemplateSelector(props){const{title,templates,templateContentStyle,referenceElement,onItemSelect,onClose}=props,theme=jimu_core.q_G.useMemo((()=>props.theme?props.theme:window.jimuConfig.isInBuilder?(0,jimu_theme.wE)():(0,jimu_theme.O4)()),[props.theme]),style=jimu_core.q_G.useMemo((()=>jimu_core.AHW`
    min-width: 300px;
    width: auto;
    border: 1px solid ${theme?theme.ref.palette.neutral[600]:"var(--ref-palette-neutral-600)"};
    box-shadow: 0 4px 20px 4px rgba(0,0,0,0.50);

    .template-content {
      max-height: 600px;
      height: ${title?"calc(100% - 50px)":"100%"};
      overflow: auto;
    }

    .size-mode-SMALL & .template-content {
      width: 320px;
    }
  `),[theme,title]),togglePopper=jimu_core.q_G.useCallback((()=>{null==onClose||onClose(),"function"==typeof(null==referenceElement?void 0:referenceElement.focus)&&jimu_core.CM0.defer((()=>{(0,jimu_core.u02)(referenceElement)}))}),[onClose,referenceElement]),handleSelect=jimu_core.q_G.useCallback((item=>{togglePopper(),onItemSelect(item)}),[togglePopper,onItemSelect]);return(0,jimu_core.Yac)(page_aware_popper,{placement:"bottom",theme,css:style,reference:referenceElement,offsetOptions:10,toggle:togglePopper,open:!0,arrowOptions:!0,shiftOptions:template_selector_shiftOptions,flipOptions:template_selector_flipOptions},title&&(0,jimu_core.Yac)("h5",{className:"hint-paper text-truncate title px-5 pt-4 mb-0"},title),(0,jimu_core.Yac)("div",{className:"template-content",style:templateContentStyle},(0,jimu_core.Yac)(template_list_TemplateList,{templates,onItemSelect:handleSelect})))}try{template_selector_TemplateSelector.displayName="TemplateSelector",template_selector_TemplateSelector.__docgenInfo={description:"",displayName:"TemplateSelector",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"IMThemeVariables"}},templateContentStyle:{defaultValue:null,description:"",name:"templateContentStyle",required:!1,type:{name:"CSSProperties"}},templates:{defaultValue:null,description:"",name:"templates",required:!0,type:{name:"Template[]"}},referenceElement:{defaultValue:null,description:"",name:"referenceElement",required:!0,type:{name:"HTMLElement"}},onItemSelect:{defaultValue:null,description:"",name:"onItemSelect",required:!0,type:{name:"(item: Template) => void"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/template-selector/index.tsx#TemplateSelector"]={docgenInfo:template_selector_TemplateSelector.__docgenInfo,name:"TemplateSelector",path:"../jimu-ui/advanced/lib/setting-components/components/template-selector/index.tsx#TemplateSelector"})}catch(__react_docgen_typescript_loader_error){}var edit=__webpack_require__("../jimu-icons/outlined/editor/edit.tsx"),plus=__webpack_require__("../jimu-icons/outlined/editor/plus.tsx"),sort_descending=__webpack_require__("../jimu-icons/outlined/directional/sort-descending.tsx"),sort_ascending=__webpack_require__("../jimu-icons/outlined/directional/sort-ascending.tsx"),more_vertical=__webpack_require__("../jimu-icons/outlined/application/more-vertical.tsx");class _Sort extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.preValue=null,this.initRuleOptionName=(value,preValue)=>{var _a,_b;const ruleOptionName=(null==value?void 0:value.map((item=>null==item?void 0:item.ruleOptionName)))||[],preRuleOptionName=(null==preValue?void 0:preValue.map((item=>null==item?void 0:item.ruleOptionName)))||[];let isRuleOptionNameChange=!1;(null==value?void 0:value.length)===(null==preValue?void 0:preValue.length)&&ruleOptionName.join("")===preRuleOptionName.join("")||(isRuleOptionNameChange=!0,this.initEditOptionNameStatus(value)),(isRuleOptionNameChange||!(null===(_b=null===(_a=this.state)||void 0===_a?void 0:_a.ruleOptionName)||void 0===_b?void 0:_b.length)&&(null==ruleOptionName?void 0:ruleOptionName.length)>0)&&this.setState({ruleOptionName:(0,jimu_core.J3Z)(ruleOptionName)})},this.initEditOptionNameStatus=value=>{const newEditOptionNameStatus=value.map((item=>!1));this.setState({editOptionNameStatus:newEditOptionNameStatus})},this.initData=()=>{if(Array.isArray(this.props.value)&&this.props.value.length)return!1;const _option=this.deepClone(this.state.option);_option.ruleOptionName=this.props.intl.formatMessage({id:"option",defaultMessage:jimu_ui.defaultMessages.option})+0;const _sortData=[_option];this.props.onChange(_sortData)},this.onOptionChange=(ruleIndex,optionIndex,changeName,changeValue)=>{const _sortData=this.deepClone(this.props.value);_sortData[optionIndex].rule[ruleIndex][changeName]=changeValue,this.props.onChange(_sortData,optionIndex)},this.onOptionKeyUp=(evt,ruleIndex,optionIndex,changeName,changeValue)=>{"Enter"!==evt.key&&" "!==evt.key||this.onOptionChange(ruleIndex,optionIndex,changeName,changeValue)},this.onSelectChange=(allSelectedFields,ruleIndex,optionIndex)=>{const field=allSelectedFields[0];if(!field)return;const _sortData=this.deepClone(this.props.value),selectedData=field.name;_sortData[optionIndex].rule[ruleIndex].jimuFieldName=selectedData,this.props.onChange(_sortData,optionIndex)},this.addOption=()=>{const _isValueValid=Array.isArray(this.props.value),_optionIndex=_isValueValid?this.props.value.length:0,_optionText=this.createOptionText(_optionIndex),_option=this.deepClone(this.state.option);_option.ruleOptionName=_optionText;const _sortData=_isValueValid?this.deepClone(this.props.value):[];_sortData.push(_option),this.props.onChange(_sortData)},this.createOptionText=index=>{const _optionText=this.props.intl.formatMessage({id:"option",defaultMessage:jimu_ui.defaultMessages.option})+index;if(!this.isOptionNameRepeat(_optionText))return _optionText;const _index=index+1;return this.createOptionText(_index)},this.deleteOption=(index,e)=>{if(e&&"Enter"!==e.key&&" "!==e.key)return!1;const _sortData=this.deepClone(this.props.value);_sortData.splice(index,1),this.props.onChange(_sortData)},this.deleteAll=()=>{this.props.onChange([])},this.toggleOptionNameDisplay=(optionIndex,isOpen=!1,e)=>{const{editOptionNameStatus}=this.state;if(e&&"Enter"!==e.key&&" "!==e.key)return!1;const newEditOptionNameStatus=(null==editOptionNameStatus?void 0:editOptionNameStatus.asMutable({deep:!0}))||[];newEditOptionNameStatus[optionIndex]=isOpen,this.setState({editOptionNameStatus:(0,jimu_core.J3Z)(newEditOptionNameStatus)},(()=>{var _a;null===(_a=this.inputRef)||void 0===_a||_a.select()}))},this.handleOptionNameChange=(optionIndex,value)=>{if(!value)return;const _sortData=this.deepClone(this.props.value),_optionName=value;!this.isOptionNameRepeat(_optionName)&&_optionName&&(_sortData[optionIndex].ruleOptionName=_optionName),this.props.onChange(_sortData)},this.isOptionNameRepeat=optionName=>{if(!Array.isArray(this.props.value))return!1;let isHasOption=!1;return this.props.value.forEach((el=>{el.ruleOptionName===optionName&&(isHasOption=!0)})),isHasOption},this.deepClone=obj=>{const cloneObj=Array.isArray(obj)?[]:{};for(const key in obj){const isObject=("object"==typeof obj[key]||"function"==typeof obj[key])&&null!==obj[key];cloneObj[key]=isObject?this.deepClone(obj[key]):obj[key]}return cloneObj},this.setInputRef=el=>{el&&(this.inputRef=el,(0,jimu_core.u02)(el,!0))},this.createRuleOptionElement=(useDataSources,rule,index,optionIndex)=>{const _selectedFields=rule.jimuFieldName?(0,jimu_core.J3Z)([rule.jimuFieldName]):(0,jimu_core.J3Z)([]);return(0,jimu_core.Yac)("div",{className:"select-down-con",key:rule.jimuFieldName||index},this.props.useDataSource&&(0,jimu_core.Yac)("div",{className:"sort-field-selector"},(0,jimu_core.Yac)(data_source_selector.FieldSelector,{useDataSources,onChange:(allSelectedFields,ds)=>{this.onSelectChange(allSelectedFields,index,optionIndex)},selectedFields:_selectedFields,isDataSourceDropDownHidden:!0,useDropdown:!0,useKeyUpEvent:!0})),[{getTitle:()=>this.nls("ascending"),order:jimu_core.zdW.Asc},{getTitle:()=>this.nls("descending"),order:jimu_core.zdW.Desc}].map(((item,x,items)=>(0,jimu_core.Yac)(jimu_ui.Button,{key:x,title:item.getTitle(),size:"sm",type:rule.order===item.order?"primary":"secondary",className:"sort-button "+(this.props.singleRowItemOnly&&rule.order!==item.order?"collapse":""),onClick:()=>{this.onOptionChange(index,optionIndex,"order",this.props.singleRowItemOnly?[...items,items[0]][x+1].order:item.order)},onKeyUp:evt=>{this.onOptionKeyUp(evt,index,optionIndex,"order",this.props.singleRowItemOnly?[...items,items[0]][x+1].order:item.order)}},item.order===jimu_core.zdW.Asc&&(0,jimu_core.Yac)(sort_ascending.X,{size:"12",className:"sort-arrow-down-icon"}),item.order===jimu_core.zdW.Desc&&(0,jimu_core.Yac)(sort_descending.z,{size:"12",className:"sort-arrow-down-icon"})))))},this.onRuleOptionNameChange=(e,index)=>{var _a;const value=e.target.value,newRuleOptionName=(null===(_a=this.state.ruleOptionName)||void 0===_a?void 0:_a.asMutable({deep:!0}))||[];newRuleOptionName[index]=value,this.setState({ruleOptionName:(0,jimu_core.J3Z)(newRuleOptionName)})},this.createOptionNameElement=(el,optionIndex)=>{var _a;const{editOptionNameStatus}=this.state,_optionName=el.ruleOptionName,_optionNameInInput=null===(_a=this.state.ruleOptionName)||void 0===_a?void 0:_a[optionIndex],_placeholder=this.props.intl.formatMessage({id:"optionNamePlaceholder",defaultMessage:jimu_ui.defaultMessages.optionNamePlaceholder}),editOptionNameInputEle=(0,jimu_core.Yac)(jimu_ui.TextInput,{className:"flex-grow-1 h-100 edit-input",size:"sm",type:"text",defaultValue:_optionName,onChange:e=>{this.onRuleOptionNameChange(e,optionIndex)},onAcceptValue:value=>{this.handleOptionNameChange(optionIndex,value)},onBlur:()=>{this.toggleOptionNameDisplay(optionIndex,!1)},ref:el=>{this.setInputRef(el)},placeholder:_placeholder,title:_optionNameInInput||_placeholder,"aria-label":_optionNameInInput||_placeholder});return(0,jimu_core.Yac)("div",{className:"option-name d-flex align-items-center flex-grow-1","aria-label":_optionName},editOptionNameStatus[optionIndex]?editOptionNameInputEle:(0,jimu_core.Yac)("span",{id:"optionNameCon",title:_optionName,onDoubleClick:()=>{this.toggleOptionNameDisplay(optionIndex,!0)}},_optionName),(0,jimu_core.Yac)(jimu_ui.Button,{size:"sm",type:"tertiary",icon:!0,className:"padding-0 option-name-icon-con",title:this.nls("edit"),"aria-describedby":"optionNameCon",onClick:()=>{this.toggleOptionNameDisplay(optionIndex,!editOptionNameStatus[optionIndex])},onKeyDown:e=>{this.toggleOptionNameDisplay(optionIndex,!editOptionNameStatus[optionIndex],e)}},(0,jimu_core.Yac)(edit.x,{size:"s",className:"option-name-icon"})))},this.createOptionElement=(useDataSources,el,index)=>{let _deleteTemp;_deleteTemp=(0,jimu_core.Yac)("div",{className:"close-con text-right"},(0,jimu_core.Yac)(jimu_ui.Button,{size:"sm",icon:!0,type:"tertiary",className:"padding-0",title:this.nls("deleteOption"),onClick:()=>{this.deleteOption(index)},onKeyUp:e=>{this.deleteOption(index,e)}},(0,jimu_core.Yac)(editor_close.r,{size:this.props.singleRowItemOnly?14:12,className:"sort-arrow-down-icon"})));const getOptionSelect=()=>el.rule.map(((ruleEl,ruleIndex)=>this.createRuleOptionElement(useDataSources,ruleEl,ruleIndex,index)));return(0,jimu_core.Yac)("div",{className:"select-con flex-grow-1",key:index,role:"group","aria-label":el.ruleOptionName},this.props.singleRowItemOnly&&(0,jimu_core.Yac)(jimu_core.q_G.Fragment,null,(0,jimu_core.Yac)("div",{className:"option-name-con"},(0,jimu_core.Yac)(more_vertical.S,{size:14}),getOptionSelect(),_deleteTemp))||(0,jimu_core.Yac)(jimu_core.q_G.Fragment,null,(0,jimu_core.Yac)("div",{className:"option-name-con d-flex align-items-center"},(()=>this.createOptionNameElement(el,index))(),_deleteTemp),getOptionSelect()))},this.nls=id=>this.props.intl?this.props.intl.formatMessage({id,defaultMessage:jimu_ui.defaultMessages[id]}):id,this.onDataSourceCreated=e=>null,this.state={option:{ruleOptionName:"",isEditOptionName:!1,rule:[{jimuFieldName:"",order:jimu_core.zdW.Asc}]},ruleOptionName:null,editOptionNameStatus:(0,jimu_core.J3Z)([])}}componentDidMount(){this.initData()}componentDidUpdate(prevProps,prevState){var _a,_b,_c,_d;this.preValue=null==prevProps?void 0:prevProps.value,this.initRuleOptionName(null===(_a=this.props)||void 0===_a?void 0:_a.value,null==prevProps?void 0:prevProps.value),(null===(_b=null==prevProps?void 0:prevProps.useDataSource)||void 0===_b?void 0:_b.dataSourceId)!==(null===(_d=null===(_c=this.props)||void 0===_c?void 0:_c.useDataSource)||void 0===_d?void 0:_d.dataSourceId)&&Promise.resolve(!0).then((()=>{this.initData()}))}render(){const{value}=this.props,invalidExpression=this.props.intl.formatMessage({id:"invalidExpression",defaultMessage:jimu_ui.defaultMessages.invalidExpression});return(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)("sort-con",this.props.singleRowItemOnly&&"single-row-item",{[this.props.className]:!!this.props.className})},(0,jimu_core.Yac)("div",null,(0,jimu_core.Yac)(jimu_ui.Button,{type:"tertiary",className:"add-option-btn",onClick:this.addOption},(0,jimu_core.Yac)(plus.b,{size:"s",className:"add-option-icon"}),(0,jimu_core.Yac)("span",null,this.props.intl.formatMessage({id:"addOption",defaultMessage:jimu_ui.defaultMessages.addOption}))),(0,jimu_core.Yac)(jimu_core.pjH,{useDataSource:this.props.useDataSource,onDataSourceCreated:this.onDataSourceCreated},(ds=>Array.isArray(value)?(0,jimu_core.Yac)(list_tree.B8,{size:"sm",className:"setting-ui-unit-list",itemsJson:value.asMutable({deep:!0}).map(((i,x)=>({itemStateDetailContent:i,itemKey:`${x}`}))),dndEnabled:!0,onUpdateItem:(actionData,refComponent)=>{const{itemJsons}=refComponent.props,[,parentItemJson]=itemJsons,newSortData=parentItemJson.map((item=>item.itemStateDetailContent));actionData.updateType===list_tree.M5.HandleDidDrop&&this.props.onChange(newSortData)},overrideItemBlockInfo:({itemBlockInfo})=>({name:list_tree.M5.RenderOverrideItem,children:[{name:list_tree.M5.RenderOverrideItemDroppableContainer,children:[{name:list_tree.M5.RenderOverrideItemDraggableContainer,children:[{name:list_tree.M5.RenderOverrideItemBody,children:[{name:list_tree.M5.RenderOverrideItemDragHandle},{name:list_tree.M5.RenderOverrideItemMainLine}]}]}]}]}),renderOverrideItemMainLine:(actionData,refComponent)=>{var _a;const{itemJsons}=refComponent.props,currentItemJson=itemJsons[0],listItemJsons=itemJsons[1];return this.createOptionElement((0,jimu_core.J3Z)([null===(_a=this.props.useDataSource)||void 0===_a?void 0:_a.asMutable({deep:!0})]),currentItemJson.itemStateDetailContent,listItemJsons.indexOf(currentItemJson))}}):invalidExpression)),Array.isArray(value)&&0===value.length&&(0,jimu_core.Yac)("div",{className:"no-sort-remind"},(0,jimu_core.Yac)("div",null,this.props.intl.formatMessage({id:"noOptionRemindText",defaultMessage:jimu_ui.defaultMessages.noOptionRemindText})),(0,jimu_core.Yac)("div",null,this.props.intl.formatMessage({id:"pleaseAddOne",defaultMessage:jimu_ui.defaultMessages.pleaseAddOne})))))}}const sort_setting_SortSetting=(0,jimu_theme.Xy)((0,jimu_core.j4T)(_Sort),"SortSetting");try{sort_setting_SortSetting.displayName="SortSetting",sort_setting_SortSetting.__docgenInfo={description:"",displayName:"SortSetting",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"ImmutableArray<SortSettingOption>"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(sortData: SortSettingOption[], index?: number) => void"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"IMThemeVariables"}},useDataSource:{defaultValue:null,description:"",name:"useDataSource",required:!0,type:{name:"IMUseDataSource"}},singleRowItemOnly:{defaultValue:null,description:"",name:"singleRowItemOnly",required:!1,type:{name:"boolean"}},optionRenderFunction:{defaultValue:null,description:"",name:"optionRenderFunction",required:!1,type:{name:"(props: SortSettingProps, createOptionElement: (useDataSources: ImmutableArray<UseDataSource>, el: any, index: number) => any) => Element"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/sort-setting/index.tsx#SortSetting"]={docgenInfo:sort_setting_SortSetting.__docgenInfo,name:"SortSetting",path:"../jimu-ui/advanced/lib/setting-components/components/sort-setting/index.tsx#SortSetting"})}catch(__react_docgen_typescript_loader_error){}var horizontal=__webpack_require__("../jimu-icons/outlined/directional/horizontal.tsx"),directional_vertical=__webpack_require__("../jimu-icons/outlined/directional/vertical.tsx"),direction_selector_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const direction_selector_DirectionSelector=props=>{const translate=jimu_core.JLE.useTranslation(jimu_ui.defaultMessages),{vertical=!1,onChange,autoFlip=!0,className,size="sm"}=props,others=direction_selector_rest(props,["vertical","onChange","autoFlip","className","size"]);return jimu_core.q_G.createElement(jimu_ui.AdvancedButtonGroup,Object.assign({size,className:(0,jimu_core.xWm)("setting--direction-selector",className)},others),jimu_core.q_G.createElement(jimu_ui.Button,{size,title:translate("horizontal"),"aria-label":translate("horizontal"),type:"default",icon:!0,active:!vertical,onClick:()=>{onChange(!1)}},jimu_core.q_G.createElement(horizontal.H,{autoFlip})),jimu_core.q_G.createElement(jimu_ui.Button,{size,title:translate("vertical"),"aria-label":translate("vertical"),type:"default",icon:!0,active:vertical,onClick:()=>{onChange(!0)}},jimu_core.q_G.createElement(directional_vertical.N,null)))};try{direction_selector_DirectionSelector.displayName="DirectionSelector",direction_selector_DirectionSelector.__docgenInfo={description:"The `DirectionSelector` component provides the user with the ability to set the direction.\n\n```ts\nimport { DirectionSelector } from 'jimu-ui/advanced/setting-components'\n```",displayName:"DirectionSelector",props:{size:{defaultValue:{value:"sm"},description:"Defines the size of this component.",name:"size",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"sm"'},{value:'"lg"'}]}},autoFlip:{defaultValue:{value:"true"},description:"Flip the icon automatically if the locale is following right-to-left (RTL).",name:"autoFlip",required:!1,type:{name:"boolean"}},vertical:{defaultValue:{value:"false"},description:"Display components vertically or not.",name:"vertical",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"Invoked when direction changes.\n@param vertical\n@event",name:"onChange",required:!1,type:{name:"(vertical?: boolean) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/direction-selector/direction-selector.tsx#DirectionSelector"]={docgenInfo:direction_selector_DirectionSelector.__docgenInfo,name:"DirectionSelector",path:"../jimu-ui/advanced/lib/setting-components/components/direction-selector/direction-selector.tsx#DirectionSelector"})}catch(__react_docgen_typescript_loader_error){}var SizeMode;!function(SizeMode){SizeMode.Auto="AUTO",SizeMode.Custom="CUSTOM"}(SizeMode||(SizeMode={}));class _SizeModeSelector extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.toggleDropdown=()=>{this.setState((prevState=>({dropdownOpen:!prevState.dropdownOpen})))},this.state={dropdownOpen:!1},this._onAutoSelected=this.onSelect.bind(this,SizeMode.Auto),this._onCustomSelected=this.onSelect.bind(this,SizeMode.Custom)}onSelect(mode){this.props.mode!==mode&&this.props.onChange(mode)}getStyle(){return jimu_core.AHW`
      .auto-dropdown.jimu-dropdown {
        width: 26px;
        height: 26px;

        .btn {
          padding: 0 !important;
        }
      }

      & > .jimu-dropdown .jimu-dropdown-button,
      & > .jimu-dropdown .jimu-dropdown-button:hover {
        height: 26px;
        padding: 0 0.375rem;
      }
    `}autoInput(){return(0,jimu_core.Yac)(jimu_ui.Input,{style:{width:"110px"},css:jimu_core.AHW`
          background-color: var(--ref-palette-neutral-600);
          border-color: var(--ref-palette-neutral-600);
          color: var(--ref-palette-black);
          height: 1.625rem;
          border-width: 0;
          padding: 0 0.25rem;
        `,disabled:!0,value:this.props.intl.formatMessage({id:"auto"})})}render(){const{mode,intl}=this.props,autoLabel=intl.formatMessage({id:"auto"}),customLabel=intl.formatMessage({id:"custom"});return(0,jimu_core.Yac)("div",{className:"d-flex",css:this.getStyle()},(0,jimu_core.Yac)(jimu_ui.Dropdown,{className:"auto-dropdown",isOpen:this.state.dropdownOpen,toggle:this.toggleDropdown},(0,jimu_core.Yac)(jimu_ui.DropdownButton,{icon:!0}),(0,jimu_core.Yac)(jimu_ui.DropdownMenu,null,(0,jimu_core.Yac)(jimu_ui.DropdownItem,{onClick:this._onAutoSelected},(0,jimu_core.Yac)("span",{css:jimu_core.AHW`width: 1rem;`},mode===SizeMode.Auto&&(0,jimu_core.Yac)(check.J,{size:"s"})),autoLabel),(0,jimu_core.Yac)(jimu_ui.DropdownItem,{onClick:this._onCustomSelected},(0,jimu_core.Yac)("span",{css:jimu_core.AHW`width: 1rem;`},mode===SizeMode.Custom&&(0,jimu_core.Yac)(check.J,{size:"s"})),customLabel))),mode===SizeMode.Auto&&this.autoInput(),mode===SizeMode.Custom&&this.props.children)}}const size_mode_select_SizeModeSelector=(0,jimu_core.j4T)(_SizeModeSelector);try{size_mode_select_SizeModeSelector.displayName="SizeModeSelector",size_mode_select_SizeModeSelector.__docgenInfo={description:"",displayName:"SizeModeSelector",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/size-mode-select/index.tsx#SizeModeSelector"]={docgenInfo:size_mode_select_SizeModeSelector.__docgenInfo,name:"SizeModeSelector",path:"../jimu-ui/advanced/lib/setting-components/components/size-mode-select/index.tsx#SizeModeSelector"})}catch(__react_docgen_typescript_loader_error){}var setting_popper_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const setting_popper_shiftOptions={crossAxis:!0},setting_popper_flipOptions={fallbackPlacements:["bottom-end","top-end"]},setting_popper_Root=(0,jimu_theme.I4)(jimu_ui.FloatingPanel)((()=>{const theme2=(0,jimu_theme.wE)(),dark600=null==theme2?void 0:theme2.ref.palette.neutral[1e3],dark800=null==theme2?void 0:theme2.ref.palette.neutral[1100];return`\n    background-color: ${null==theme2?void 0:theme2.ref.palette.neutral[400]};\n    color: ${dark600};\n    border: 1px solid ${null==theme2?void 0:theme2.ref.palette.neutral[600]};\n    > .popper-box {\n      > .panel-header {\n        color: ${dark600};\n        .action-btn {\n          color: ${dark600};\n          &:hover {\n            color: ${dark800};\n          }\n        }\n      }\n    }\n  `})),SettingPopper=jimu_core.q_G.forwardRef(((props,ref)=>{const{className,placement="right-start",onInitResizeHandler,onInitDragHandler,version:propVersion}=props,others=setting_popper_rest(props,["className","placement","onInitResizeHandler","onInitDragHandler","version"]),nodeRef=jimu_core.q_G.useRef(null),handleRef=jimu_core.JLE.useForkRef(ref,nodeRef),[version,setVersion]=jimu_core.JLE.useControlled({controlled:propVersion,default:0});return jimu_core.q_G.useEffect((()=>{null==onInitResizeHandler||onInitResizeHandler((()=>{var _a;null===(_a=nodeRef.current)||void 0===_a||_a.classList.add("d-none")}),null,(()=>{var _a;setVersion((v=>v+1)),null===(_a=nodeRef.current)||void 0===_a||_a.classList.remove("d-none")}))}),[onInitResizeHandler,setVersion]),jimu_core.q_G.useEffect((()=>{null==onInitDragHandler||onInitDragHandler((()=>{var _a;null===(_a=nodeRef.current)||void 0===_a||_a.classList.add("d-none")}),null,(()=>{var _a;setVersion((v=>v+1)),null===(_a=nodeRef.current)||void 0===_a||_a.classList.remove("d-none")}))}),[onInitDragHandler,setVersion]),jimu_core.q_G.createElement(setting_popper_Root,Object.assign({className:(0,jimu_core.xWm)("shadow-2",className),shiftOptions:setting_popper_shiftOptions,flipOptions:setting_popper_flipOptions,placement,ref:handleRef,version},others))}));try{SettingPopper.displayName="SettingPopper",SettingPopper.__docgenInfo={description:"",displayName:"SettingPopper",props:{onInitResizeHandler:{defaultValue:null,description:"Callback function for registering and listening to resize for widget, which can be retrieved from props of the widget.",name:"onInitResizeHandler",required:!1,type:{name:"WidgetInitResizeCallback"}},onInitDragHandler:{defaultValue:null,description:"Callback function for registering and listening to drag for widget, which can be retrieved from props of the widget.",name:"onInitDragHandler",required:!1,type:{name:"WidgetInitDragCallback"}},avoidNestedToggle:{defaultValue:{value:"true"},description:"By default, clicking into a nested `Popper` will not trigger the toggle method of the current Popper.\nIf you want to trigger the toggle method of the current Popper, you can set `avoidNestedToggle` to `false`.\n@ignore",name:"avoidNestedToggle",required:!1,type:{name:"boolean"}},toggle:{defaultValue:null,description:"Callback fired when panel requests to be closed.\n@event",name:"toggle",required:!1,type:{name:"(evt?: KeyboardEvent<any> | MouseEvent<any, MouseEvent> | TouchEvent<any>, reason?: OverlayDismissReason) => any"}},referenceHiddenVisibility:{defaultValue:{value:"false"},description:"Whether the floating panel is hidden when the reference is hidden.\nThis prop is valid when there is a `reference`.",name:"referenceHiddenVisibility",required:!1,type:{name:"boolean"}},reference:{defaultValue:null,description:"Reference node used to set the position of floating panel.",name:"reference",required:!1,type:{name:"TargetType"}},open:{defaultValue:null,description:"If `true`, the panel is visible.\nThis prop is valid when there is a `reference`.",name:"open",required:!1,type:{name:"boolean"}},placement:{defaultValue:{value:"bottom"},description:"Describes the preferred placement of the panel.\nThis prop is valid when there is a `reference`.",name:"placement",required:!1,type:{name:"enum",value:[{value:'"bottom"'},{value:'"left"'},{value:'"right"'},{value:'"top"'},{value:'"bottom-end"'},{value:'"bottom-start"'},{value:'"left-end"'},{value:'"left-start"'},{value:'"right-end"'},{value:'"right-start"'},{value:'"top-end"'},{value:'"top-start"'}]}},shiftOptions:{defaultValue:null,description:"The shift options allow the panel to be moved when it exceeds the clipping boundary.\nThis prop is valid when there is a `reference`.",name:"shiftOptions",required:!1,type:{name:"boolean | { mainAxis?: boolean; crossAxis?: boolean; limiter?: { fn: (state: MiddlewareState) => Coords; options?: any; }; rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; boundary?: Boundary; }"}},flipOptions:{defaultValue:{value:"true"},description:"The flip options can be used to adjust the popper panel when it exceeds the clipping boundary.\nIf it is a boolean value, it indicates whether the default behavior of the component is enabled or disabled.\nThis prop is valid when there is a `reference`.\nNote: You cannot use `flipOptions` and `autoPlacementOptions` together inside the same middleware array.",name:"flipOptions",required:!1,type:{name:"boolean | { mainAxis?: boolean; crossAxis?: boolean; rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; ... 4 more ...; boundary?: Boundary; }"}},offsetOptions:{defaultValue:null,description:"The offset modifier can shift your panel on both its axes.\nIf it is a boolean value, it enables or disables the component's default behavior.\nThis prop is valid when there is a `reference`.",name:"offsetOptions",required:!1,type:{name:"boolean | [number, number] | OffsetOptions"}},strategy:{defaultValue:{value:"absolute"},description:"Describes the positioning strategy to use.\nThis prop is valid when there is a `reference`.",name:"strategy",required:!1,type:{name:"enum",value:[{value:'"fixed"'},{value:'"absolute"'}]}},autoPlacementOptions:{defaultValue:{value:"false"},description:"You can customize how the auto placement behaves using the auto placement options.\nThis prop is valid when there is a `reference`.\nNote: You cannot use `flipOptions` and `autoPlacementOptions` together inside the same middleware array.",name:"autoPlacementOptions",required:!1,type:{name:"boolean | { crossAxis?: boolean; rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; alignment?: Alignment; autoAlignment?: boolean; allowedPlacements?: Placement[]; boundary?: Boundary; }"}},flipPlacement:{defaultValue:{value:"true"},description:"Whether to flip placement (Only valid for RTL).\nThis prop is valid when there is a `reference`.\n@ignore",name:"flipPlacement",required:!1,type:{name:"boolean"}},version:{defaultValue:null,description:"When this value changes, will recalculate the position.\nThis prop is valid when there is a `reference`.\n@ignore",name:"version",required:!1,type:{name:"number"}},autoUpdate:{defaultValue:{value:"true"},description:"Automatically updates the position of the floating panel when necessary to ensure it stays anchored.\nThis prop is valid when there is a `reference` and the panel is never dragged.",name:"autoUpdate",required:!1,type:{name:"boolean"}},children:{defaultValue:null,description:"The children of the component.",name:"children",required:!0,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},role:{defaultValue:{value:"dialog"},description:"Defines the role added to the element.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-modal":{defaultValue:null,description:"Indicates whether the element, or another grouping element it controls, is modal.",name:"aria-modal",required:!1,type:{name:"boolean"}},headerTitle:{defaultValue:null,description:"The title displayed in the header.",name:"headerTitle",required:!1,type:{name:"ReactNode"}},headerClassName:{defaultValue:null,description:"The class name of the header.",name:"headerClassName",required:!1,type:{name:"string"}},showHeaderClose:{defaultValue:{value:"true"},description:"If `false`, hide the close button on the header.",name:"showHeaderClose",required:!1,type:{name:"boolean"}},showHeaderCollapse:{defaultValue:{value:"false"},description:"if `true`, show a collapse button on the header.",name:"showHeaderCollapse",required:!1,type:{name:"boolean"}},onHeaderClose:{defaultValue:null,description:"Called when clicking on the close button.",name:"onHeaderClose",required:!1,type:{name:"(e?: MouseEvent<HTMLDivElement, MouseEvent>) => void"}},minSize:{defaultValue:{value:"{width:50,height:50}"},description:"Set the minimum size of the panel.",name:"minSize",required:!1,type:{name:"Size"}},defaultSize:{defaultValue:{value:"{width:50,height:50}"},description:"Specifies the width and height of the panel at start.\n\nNote: defaultSize will be ignored when size is set.",name:"defaultSize",required:!1,type:{name:"Size"}},size:{defaultValue:null,description:"Set the size of the panel.\nUse size if you need to control size state by yourself.",name:"size",required:!1,type:{name:"Size"}},autoSize:{defaultValue:{value:"false"},description:"If true, defaultSize and size won't work, and resizing will be disabled.",name:"autoSize",required:!1,type:{name:"boolean"}},defaultPosition:{defaultValue:{value:"{left:0,top:0}"},description:"Specifies the left and top of the panel at start.\n\nNote: defaultPosition will be ignored when position set.",name:"defaultPosition",required:!1,type:{name:"ControlPosition"}},position:{defaultValue:null,description:"Set the position of the panel.\nUse position if you need to control position state by yourself.",name:"position",required:!1,type:{name:"ControlPosition"}},positionOffset:{defaultValue:null,description:"A position offset to start with. Useful for giving an initial position\nto the element. Differs from `defaultPosition` in that it does not\naffect the position returned in draggable callbacks, and in that it\naccepts strings, like `{x: '10%', y: '10%'}`.",name:"positionOffset",required:!1,type:{name:"PositionOffsetControlPosition"}},disableResize:{defaultValue:{value:"false"},description:"If `true`, the panel cannot be resized.",name:"disableResize",required:!1,type:{name:"boolean"}},disableDraggable:{defaultValue:{value:"false"},description:"If `true`, the panel cannot be dragged.",name:"disableDraggable",required:!1,type:{name:"boolean"}},resizeGrid:{defaultValue:null,description:"Specifies the x and y that resizing should snap to.",name:"resizeGrid",required:!1,type:{name:"[number, number]"}},resizeHandle:{defaultValue:null,description:"Provide a resize handle for the bottom right corner.\nFlipped handles will be applied for the other corners.\nA handle can be an icon, an image, or any other valid ReactElement.",name:"resizeHandle",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},onResizeStart:{defaultValue:null,description:"Called when resizing starts.",name:"onResizeStart",required:!1,type:{name:"(size: Size, position?: ControlPosition) => void"}},onResize:{defaultValue:null,description:"Called while resizing.",name:"onResize",required:!1,type:{name:"(size: Size, position?: ControlPosition) => void"}},onResizeStop:{defaultValue:null,description:"Called when resizing stops.",name:"onResizeStop",required:!1,type:{name:"(size: Size, position?: ControlPosition) => void"}},resizeHandles:{defaultValue:{value:"['bottom-right']"},description:"A list of resize handles: 'top-left', 'top-right', 'bottom-left' and 'bottom-right'.",name:"resizeHandles",required:!1,type:{name:"ResizeHandle[]"}},dragBounds:{defaultValue:null,description:"Specifies movement boundaries. Accepted values:\n- `parent` restricts movement within the node's offsetParent\n  (nearest node with position relative or absolute), or\n- a selector, restricts movement within the targeted node\n- An object with `left, top, right, and bottom` properties.\n These indicate how far in each direction the draggable\n  can be moved.",name:"dragBounds",required:!1,type:{name:"string | false | DraggableBounds"}},dragGrid:{defaultValue:null,description:"Specifies the x and y that dragging should snap to.",name:"dragGrid",required:!1,type:{name:"[number, number]"}},dragOffsetParent:{defaultValue:null,description:"If desired, you can provide your own offsetParent for drag calculations.\nBy default, we use the Draggable's offsetParent. This can be useful for elements\nwith odd display types or floats.",name:"dragOffsetParent",required:!1,type:{name:"HTMLElement"}},onDragStart:{defaultValue:null,description:"Called when dragging starts.\n@event",name:"onDragStart",required:!1,type:{name:"DraggableEventHandler"}},onDrag:{defaultValue:null,description:"Called while dragging.\n@event",name:"onDrag",required:!1,type:{name:"(position: ControlPosition) => void"}},onDragStop:{defaultValue:null,description:"Called when dragging stops.\n@event",name:"onDragStop",required:!1,type:{name:"DraggableEventHandler"}},dragScale:{defaultValue:{value:"1"},description:"Specifies the scale of the canvas on which you are dragging this element.\nThis lets you get the right drag deltas when you're zoomed in or out using\na transform or matrix in the parent element.",name:"dragScale",required:!1,type:{name:"number"}},trapFocus:{defaultValue:{value:"true"},description:"Loop within the focusable elements inside the `Popper` when the `Tab` key is pressed.\n@ignore",name:"trapFocus",required:!1,type:{name:"boolean"}},autoFocus:{defaultValue:{value:"true"},description:"Whether to automatically focus on the first focusable element when `Popper` is open.\n@ignore",name:"autoFocus",required:!1,type:{name:"boolean"}},onLeave:{defaultValue:null,description:"@ignore If this function is provided, clicking `Escape` twice triggers it instead of `onHeaderClose`.\nIt is for accessibility purposes.",name:"onLeave",required:!1,type:{name:"() => void"}},activateOnlyForHeader:{defaultValue:{value:"false"},description:"Only activate the overlay when click on the header.\n@ignore",name:"activateOnlyForHeader",required:!1,type:{name:"boolean"}},onHeaderClick:{defaultValue:null,description:"Be invoked when clicking the header\n@ignore",name:"onHeaderClick",required:!1,type:{name:"(e?: MouseEvent<HTMLDivElement, MouseEvent>) => void"}},disablePortal:{defaultValue:{value:"false"},description:"If `true`, it disables portal behavior, and keeps children within their parent DOM hierarchy.\nIf `false`, children are appended to `document.body`.",name:"disablePortal",required:!1,type:{name:"boolean"}},disableActivateOverlay:{defaultValue:{value:"false"},description:"If `true`, it prevents activating the overlay when clicking on the popper body.",name:"disableActivateOverlay",required:!1,type:{name:"boolean"}},disableOverlayManager:{defaultValue:{value:"false"},description:"If `true`, it disables z-index management via `state.overlays`.",name:"disableOverlayManager",required:!1,type:{name:"boolean"}},openOverlayOnMount:{defaultValue:{value:"true"},description:"If `true`, adds the popper to `state.overlays` when mounted.",name:"openOverlayOnMount",required:!1,type:{name:"boolean"}},zIndex:{defaultValue:null,description:"@ignore",name:"zIndex",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/quick-style/setting-popper.tsx#SettingPopper"]={docgenInfo:SettingPopper.__docgenInfo,name:"SettingPopper",path:"../jimu-ui/advanced/lib/setting-components/components/quick-style/setting-popper.tsx#SettingPopper"})}catch(__react_docgen_typescript_loader_error){}var quick_style_popper_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const quick_style_popper_QuickStylePopper=props=>{const{onClose,open,reference,children,floating}=props,others=quick_style_popper_rest(props,["onClose","open","reference","children","floating"]),headerTitle=jimu_core.JLE.useTranslation(jimu_ui.defaultMessages)("quickStyle");return jimu_core.q_G.createElement(jimu_core.q_G.Fragment,null,floating&&jimu_core.q_G.createElement(SettingPopper,Object.assign({},others,{headerTitle:floating?headerTitle:"",onHeaderClose:onClose}),children),!floating&&jimu_core.q_G.createElement(jimu_ui.Popper,Object.assign({open,reference},others),jimu_core.q_G.createElement(jimu_ui.PanelHeader,{className:"px-4 py-2",title:headerTitle,onClose}),children))};try{quick_style_popper_QuickStylePopper.displayName="QuickStylePopper",quick_style_popper_QuickStylePopper.__docgenInfo={description:"",displayName:"QuickStylePopper",props:{floating:{defaultValue:null,description:"",name:"floating",required:!1,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"() => void"}},children:{defaultValue:null,description:"The children of the component.",name:"children",required:!0,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},autoFocus:{defaultValue:{value:"true"},description:"Whether to automatically focus on the first focusable element when `Popper` is open.\n@ignore",name:"autoFocus",required:!1,type:{name:"boolean"}},role:{defaultValue:{value:"dialog"},description:"Defines the role added to the element.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-modal":{defaultValue:null,description:"Indicates whether the element, or another grouping element it controls, is modal.",name:"aria-modal",required:!1,type:{name:"boolean"}},onResize:{defaultValue:null,description:"Called while resizing.",name:"onResize",required:!1,type:{name:"(size: Size, position?: ControlPosition) => void"}},onDrag:{defaultValue:null,description:"Called while dragging.\n@event",name:"onDrag",required:!1,type:{name:"(position: ControlPosition) => void"}},onDragStart:{defaultValue:null,description:"Called when dragging starts.\n@event",name:"onDragStart",required:!1,type:{name:"DraggableEventHandler"}},size:{defaultValue:null,description:"Set the size of the panel.\nUse size if you need to control size state by yourself.",name:"size",required:!1,type:{name:"Size"}},placement:{defaultValue:{value:"bottom"},description:"Describes the preferred placement of the panel.\nThis prop is valid when there is a `reference`.",name:"placement",required:!1,type:{name:"enum",value:[{value:'"bottom"'},{value:'"left"'},{value:'"right"'},{value:'"top"'},{value:'"bottom-end"'},{value:'"bottom-start"'},{value:'"left-end"'},{value:'"left-start"'},{value:'"right-end"'},{value:'"right-start"'},{value:'"top-end"'},{value:'"top-start"'}]}},shiftOptions:{defaultValue:null,description:"The shift options allow the panel to be moved when it exceeds the clipping boundary.\nThis prop is valid when there is a `reference`.",name:"shiftOptions",required:!1,type:{name:"boolean | { mainAxis?: boolean; crossAxis?: boolean; limiter?: { fn: (state: MiddlewareState) => Coords; options?: any; }; rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; boundary?: Boundary; }"}},offsetOptions:{defaultValue:null,description:"The offset modifier can shift your panel on both its axes.\nIf it is a boolean value, it enables or disables the component's default behavior.\nThis prop is valid when there is a `reference`.",name:"offsetOptions",required:!1,type:{name:"boolean | [number, number] | OffsetOptions"}},flipOptions:{defaultValue:{value:"true"},description:"The flip options can be used to adjust the popper panel when it exceeds the clipping boundary.\nIf it is a boolean value, it indicates whether the default behavior of the component is enabled or disabled.\nThis prop is valid when there is a `reference`.\nNote: You cannot use `flipOptions` and `autoPlacementOptions` together inside the same middleware array.",name:"flipOptions",required:!1,type:{name:"boolean | { mainAxis?: boolean; crossAxis?: boolean; rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; ... 4 more ...; boundary?: Boundary; }"}},reference:{defaultValue:null,description:"Reference node used to set the position of floating panel.",name:"reference",required:!1,type:{name:"TargetType"}},strategy:{defaultValue:{value:"absolute"},description:"Describes the positioning strategy to use.\nThis prop is valid when there is a `reference`.",name:"strategy",required:!1,type:{name:"enum",value:[{value:'"fixed"'},{value:'"absolute"'}]}},openOverlayOnMount:{defaultValue:{value:"true"},description:"If `true`, adds the popper to `state.overlays` when mounted.",name:"openOverlayOnMount",required:!1,type:{name:"boolean"}},disablePortal:{defaultValue:{value:"false"},description:"If `true`, it disables portal behavior, and keeps children within their parent DOM hierarchy.\nIf `false`, children are appended to `document.body`.",name:"disablePortal",required:!1,type:{name:"boolean"}},disableActivateOverlay:{defaultValue:{value:"false"},description:"If `true`, it prevents activating the overlay when clicking on the popper body.",name:"disableActivateOverlay",required:!1,type:{name:"boolean"}},disableOverlayManager:{defaultValue:{value:"false"},description:"If `true`, it disables z-index management via `state.overlays`.",name:"disableOverlayManager",required:!1,type:{name:"boolean"}},zIndex:{defaultValue:null,description:"@ignore",name:"zIndex",required:!1,type:{name:"number"}},open:{defaultValue:null,description:"If `true`, the panel is visible.\nThis prop is valid when there is a `reference`.",name:"open",required:!1,type:{name:"boolean"}},autoUpdate:{defaultValue:{value:"true"},description:"Automatically updates the position of the floating panel when necessary to ensure it stays anchored.\nThis prop is valid when there is a `reference` and the panel is never dragged.",name:"autoUpdate",required:!1,type:{name:"boolean"}},autoPlacementOptions:{defaultValue:{value:"false"},description:"You can customize how the auto placement behaves using the auto placement options.\nThis prop is valid when there is a `reference`.\nNote: You cannot use `flipOptions` and `autoPlacementOptions` together inside the same middleware array.",name:"autoPlacementOptions",required:!1,type:{name:"boolean | { crossAxis?: boolean; rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; alignment?: Alignment; autoAlignment?: boolean; allowedPlacements?: Placement[]; boundary?: Boundary; }"}},version:{defaultValue:null,description:"When this value changes, will recalculate the position.\nThis prop is valid when there is a `reference`.\n@ignore",name:"version",required:!1,type:{name:"number"}},avoidNestedToggle:{defaultValue:{value:"true"},description:"By default, clicking into a nested `Popper` will not trigger the toggle method of the current Popper.\nIf you want to trigger the toggle method of the current Popper, you can set `avoidNestedToggle` to `false`.\n@ignore",name:"avoidNestedToggle",required:!1,type:{name:"boolean"}},toggle:{defaultValue:null,description:"Callback fired when panel requests to be closed.\n@event",name:"toggle",required:!1,type:{name:"(evt?: KeyboardEvent<any> | MouseEvent<any, MouseEvent> | TouchEvent<any>, reason?: OverlayDismissReason) => any"}},referenceHiddenVisibility:{defaultValue:{value:"false"},description:"Whether the floating panel is hidden when the reference is hidden.\nThis prop is valid when there is a `reference`.",name:"referenceHiddenVisibility",required:!1,type:{name:"boolean"}},flipPlacement:{defaultValue:{value:"true"},description:"Whether to flip placement (Only valid for RTL).\nThis prop is valid when there is a `reference`.\n@ignore",name:"flipPlacement",required:!1,type:{name:"boolean"}},headerTitle:{defaultValue:null,description:"The title displayed in the header.",name:"headerTitle",required:!1,type:{name:"ReactNode"}},headerClassName:{defaultValue:null,description:"The class name of the header.",name:"headerClassName",required:!1,type:{name:"string"}},showHeaderClose:{defaultValue:{value:"true"},description:"If `false`, hide the close button on the header.",name:"showHeaderClose",required:!1,type:{name:"boolean"}},showHeaderCollapse:{defaultValue:{value:"false"},description:"if `true`, show a collapse button on the header.",name:"showHeaderCollapse",required:!1,type:{name:"boolean"}},minSize:{defaultValue:{value:"{width:50,height:50}"},description:"Set the minimum size of the panel.",name:"minSize",required:!1,type:{name:"Size"}},defaultSize:{defaultValue:{value:"{width:50,height:50}"},description:"Specifies the width and height of the panel at start.\n\nNote: defaultSize will be ignored when size is set.",name:"defaultSize",required:!1,type:{name:"Size"}},autoSize:{defaultValue:{value:"false"},description:"If true, defaultSize and size won't work, and resizing will be disabled.",name:"autoSize",required:!1,type:{name:"boolean"}},defaultPosition:{defaultValue:{value:"{left:0,top:0}"},description:"Specifies the left and top of the panel at start.\n\nNote: defaultPosition will be ignored when position set.",name:"defaultPosition",required:!1,type:{name:"ControlPosition"}},position:{defaultValue:null,description:"Set the position of the panel.\nUse position if you need to control position state by yourself.",name:"position",required:!1,type:{name:"ControlPosition"}},positionOffset:{defaultValue:null,description:"A position offset to start with. Useful for giving an initial position\nto the element. Differs from `defaultPosition` in that it does not\naffect the position returned in draggable callbacks, and in that it\naccepts strings, like `{x: '10%', y: '10%'}`.",name:"positionOffset",required:!1,type:{name:"PositionOffsetControlPosition"}},disableResize:{defaultValue:{value:"false"},description:"If `true`, the panel cannot be resized.",name:"disableResize",required:!1,type:{name:"boolean"}},disableDraggable:{defaultValue:{value:"false"},description:"If `true`, the panel cannot be dragged.",name:"disableDraggable",required:!1,type:{name:"boolean"}},resizeGrid:{defaultValue:null,description:"Specifies the x and y that resizing should snap to.",name:"resizeGrid",required:!1,type:{name:"[number, number]"}},resizeHandle:{defaultValue:null,description:"Provide a resize handle for the bottom right corner.\nFlipped handles will be applied for the other corners.\nA handle can be an icon, an image, or any other valid ReactElement.",name:"resizeHandle",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},onResizeStart:{defaultValue:null,description:"Called when resizing starts.",name:"onResizeStart",required:!1,type:{name:"(size: Size, position?: ControlPosition) => void"}},onResizeStop:{defaultValue:null,description:"Called when resizing stops.",name:"onResizeStop",required:!1,type:{name:"(size: Size, position?: ControlPosition) => void"}},resizeHandles:{defaultValue:{value:"['bottom-right']"},description:"A list of resize handles: 'top-left', 'top-right', 'bottom-left' and 'bottom-right'.",name:"resizeHandles",required:!1,type:{name:"ResizeHandle[]"}},dragBounds:{defaultValue:null,description:"Specifies movement boundaries. Accepted values:\n- `parent` restricts movement within the node's offsetParent\n  (nearest node with position relative or absolute), or\n- a selector, restricts movement within the targeted node\n- An object with `left, top, right, and bottom` properties.\n These indicate how far in each direction the draggable\n  can be moved.",name:"dragBounds",required:!1,type:{name:"string | false | DraggableBounds"}},dragGrid:{defaultValue:null,description:"Specifies the x and y that dragging should snap to.",name:"dragGrid",required:!1,type:{name:"[number, number]"}},dragOffsetParent:{defaultValue:null,description:"If desired, you can provide your own offsetParent for drag calculations.\nBy default, we use the Draggable's offsetParent. This can be useful for elements\nwith odd display types or floats.",name:"dragOffsetParent",required:!1,type:{name:"HTMLElement"}},onDragStop:{defaultValue:null,description:"Called when dragging stops.\n@event",name:"onDragStop",required:!1,type:{name:"DraggableEventHandler"}},dragScale:{defaultValue:{value:"1"},description:"Specifies the scale of the canvas on which you are dragging this element.\nThis lets you get the right drag deltas when you're zoomed in or out using\na transform or matrix in the parent element.",name:"dragScale",required:!1,type:{name:"number"}},trapFocus:{defaultValue:{value:"true"},description:"Loop within the focusable elements inside the `Popper` when the `Tab` key is pressed.\n@ignore",name:"trapFocus",required:!1,type:{name:"boolean"}},onLeave:{defaultValue:null,description:"@ignore If this function is provided, clicking `Escape` twice triggers it instead of `onHeaderClose`.\nIt is for accessibility purposes.",name:"onLeave",required:!1,type:{name:"() => void"}},activateOnlyForHeader:{defaultValue:{value:"false"},description:"Only activate the overlay when click on the header.\n@ignore",name:"activateOnlyForHeader",required:!1,type:{name:"boolean"}},onHeaderClick:{defaultValue:null,description:"Be invoked when clicking the header\n@ignore",name:"onHeaderClick",required:!1,type:{name:"(e?: MouseEvent<HTMLDivElement, MouseEvent>) => void"}},onInitResizeHandler:{defaultValue:null,description:"Callback function for registering and listening to resize for widget, which can be retrieved from props of the widget.",name:"onInitResizeHandler",required:!1,type:{name:"WidgetInitResizeCallback"}},onInitDragHandler:{defaultValue:null,description:"Callback function for registering and listening to drag for widget, which can be retrieved from props of the widget.",name:"onInitDragHandler",required:!1,type:{name:"WidgetInitDragCallback"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/quick-style/quick-style-popper.tsx#QuickStylePopper"]={docgenInfo:quick_style_popper_QuickStylePopper.__docgenInfo,name:"QuickStylePopper",path:"../jimu-ui/advanced/lib/setting-components/components/quick-style/quick-style-popper.tsx#QuickStylePopper"})}catch(__react_docgen_typescript_loader_error){}const DEFAULT_MAX_SUGGESTION=6,MAX_SUGGESTION=1e3,MAX_RECENT_SEARCHES=6,DEFAULT_GEOCODE_KEY="default_geocode",MIN_SCALE=3e5;var SearchDataType,SearchServiceType;!function(SearchDataType){SearchDataType.Both="Both",SearchDataType.GeocodeService="GeocodeService",SearchDataType.FeatureService="FeatureService"}(SearchDataType||(SearchDataType={})),function(SearchServiceType){SearchServiceType.GeocodeService="GeocodeService",SearchServiceType.FeatureService="FeatureService"}(SearchServiceType||(SearchServiceType={}));const ByFieldSeriesX="FieldName",ByFieldSeriesY="FieldValue",MaxCategories=99,MaxPieces=1e3,MaxSeries=20,OutStatisticFieldNameSplit="__",OutputDsObjectField="objectid",OutputDsAddress="address",DefaultAddress="default_address",DefaultAddressAlias="Default Address",DefaultGeocodeURL="https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",DefaultGeocodeLabel="ArcGIS World Geocoding Service",predefinedOrgUtilities=[{name:"printTask",type:jimu_core.JXK.Printing},{name:"geometry",type:jimu_core.JXK.Geometry},{name:"geoenrichment",type:jimu_core.JXK.GeoEnrichment},{name:"route",type:jimu_core.JXK.Routing},{name:"geocode",dynamic:!0,type:jimu_core.JXK.GeoCoding}];var utility_group=__webpack_require__("../jimu-icons/filled/data/utility-group.tsx"),info=__webpack_require__("../jimu-icons/outlined/suggested/info.tsx"),util_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};const URL_PATTERNS={gp:/\/rest\/services\/.*\/GPServer\/?$/,geometry:/\/rest\/services\/.*\/GeometryServer\/?/,geocode:/\/rest\/services\/.*\/GeocodeServer\/?/,geoenrich:/\/rest\/services\/.*\/GeoenrichmentServer\/?/,na:/\/rest\/services\/.*\/NAServer\/?/,gptask:/\/rest\/services\/.*\/GPServer\/.+/};function getLabelOfUrl(url){var _a;const matches=url.match(/\/([\w\s%]*)\/(?:GP|NA|Geoenrichment|Geometry|Geocode)Server\/?([\w\s%]*)?\/?/);return 3===(null==matches?void 0:matches.length)?decodeURI(null!==(_a=matches[2])&&void 0!==_a?_a:matches[1]):""}function isUtilityMatch(item,serviceTypes,keyword,pattern){const{url,label}=item,typeMatched=null===serviceTypes||serviceTypes.includes(item.type),keywordMatched=!keyword||label.toLowerCase().includes(keyword.toLowerCase()),patternMatched=!pattern||pattern.test(url);return typeMatched&&keywordMatched&&patternMatched}function isValidUtilityUrl(url){return Object.values(URL_PATTERNS).some((pattern=>pattern.test(url)))}function checkServiceType(url,forceLogin){return util_awaiter(this,void 0,void 0,(function*(){var _a,_b;if(URL_PATTERNS.gp.test(url))return jimu_core.IOh.getGPServerInfo(url,forceLogin);const serviceInfo=yield jimu_core.IOh.getServiceInfo(url,forceLogin);if(!serviceInfo)return null;if(URL_PATTERNS.geometry.test(url))return{type:jimu_core.JXK.Geometry,info:serviceInfo};if(URL_PATTERNS.geocode.test(url))return{type:jimu_core.JXK.GeoCoding,info:serviceInfo};if(URL_PATTERNS.geoenrich.test(url))return{type:jimu_core.JXK.GeoEnrichment,info:serviceInfo};if(URL_PATTERNS.na.test(url)){return{type:"esriNAServerRouteLayer"===serviceInfo.layerType&&(null===(_a=serviceInfo.supportedTravelModes)||void 0===_a?void 0:_a.length)>0&&(null===(_b=serviceInfo.networkClasses)||void 0===_b?void 0:_b.length)>0?jimu_core.JXK.Routing:null,info:serviceInfo}}if(URL_PATTERNS.gptask.test(url)){return{type:jimu_core.IOh.isPrintingTask(serviceInfo)?jimu_core.JXK.Printing:jimu_core.JXK.GPTask,info:serviceInfo}}return{type:null,info:serviceInfo}}))}var data_utility=__webpack_require__("../jimu-icons/filled/data/utility.tsx"),geoenrichment=__webpack_require__("../jimu-icons/filled/data/geoenrichment.tsx"),geocoding=__webpack_require__("../jimu-icons/filled/data/geocoding.tsx"),geometry=__webpack_require__("../jimu-icons/filled/data/geometry.tsx"),printing=__webpack_require__("../jimu-icons/filled/data/printing.tsx"),routing=__webpack_require__("../jimu-icons/filled/data/routing.tsx"),utility=__webpack_require__("../jimu-icons/svg/filled/data/utility.svg"),utility_default=__webpack_require__.n(utility),data_geoenrichment=__webpack_require__("../jimu-icons/svg/filled/data/geoenrichment.svg"),geoenrichment_default=__webpack_require__.n(data_geoenrichment),data_geocoding=__webpack_require__("../jimu-icons/svg/filled/data/geocoding.svg"),geocoding_default=__webpack_require__.n(data_geocoding),data_geometry=__webpack_require__("../jimu-icons/svg/filled/data/geometry.svg"),geometry_default=__webpack_require__.n(data_geometry),data_printing=__webpack_require__("../jimu-icons/svg/filled/data/printing.svg"),printing_default=__webpack_require__.n(data_printing),data_routing=__webpack_require__("../jimu-icons/svg/filled/data/routing.svg"),routing_default=__webpack_require__.n(data_routing),utility_icon_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};function utility_icon_UtilityIcon(props){const{type}=props,otherProps=utility_icon_rest(props,["type"]);switch(type){case jimu_core.JXK.GeoEnrichment:return(0,jimu_core.Yac)(geoenrichment.d,Object.assign({},otherProps));case jimu_core.JXK.GeoCoding:return(0,jimu_core.Yac)(geocoding.S,Object.assign({},otherProps));case jimu_core.JXK.Geometry:return(0,jimu_core.Yac)(geometry.$,Object.assign({},otherProps));case jimu_core.JXK.Printing:return(0,jimu_core.Yac)(printing.C,Object.assign({},otherProps));case jimu_core.JXK.Routing:return(0,jimu_core.Yac)(routing.x,Object.assign({},otherProps))}return(0,jimu_core.Yac)(data_utility.N,Object.assign({},otherProps))}function utility_icon_selectUtilitySVG(type){switch(type){case jimu_core.JXK.GeoEnrichment:return geoenrichment_default();case jimu_core.JXK.GeoCoding:return geocoding_default();case jimu_core.JXK.Geometry:return geometry_default();case jimu_core.JXK.Printing:return printing_default();case jimu_core.JXK.Routing:return routing_default();default:return utility_default()}}try{utility_icon_UtilityIcon.displayName="UtilityIcon",utility_icon_UtilityIcon.__docgenInfo={description:"",displayName:"UtilityIcon",props:{type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"GEOENRICH"'},{value:'"GEOMETRY"'},{value:'"GEOCODING"'},{value:'"PRINTING"'},{value:'"ROUTING"'},{value:'"GPSERVER"'},{value:'"GPTask"'}]}},children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/utility-selector/components/utility-icon.tsx#UtilityIcon"]={docgenInfo:utility_icon_UtilityIcon.__docgenInfo,name:"UtilityIcon",path:"../jimu-ui/advanced/lib/utility-selector/components/utility-icon.tsx#UtilityIcon"})}catch(__react_docgen_typescript_loader_error){}try{utility_icon_selectUtilitySVG.displayName="selectUtilitySVG",utility_icon_selectUtilitySVG.__docgenInfo={description:"",displayName:"selectUtilitySVG",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/utility-selector/components/utility-icon.tsx#selectUtilitySVG"]={docgenInfo:utility_icon_selectUtilitySVG.__docgenInfo,name:"selectUtilitySVG",path:"../jimu-ui/advanced/lib/utility-selector/components/utility-icon.tsx#selectUtilitySVG"})}catch(__react_docgen_typescript_loader_error){}var org_utility_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};function getUtilitySetting(name,utility){if(/rest\/services\/.*\/GeocodeServer/.test(utility.url)){const{url}=utility;return org_utility_rest(utility,["url"])}return"printTask"===name?{templates:utility.templates}:null}function extractService(helperServices,serviceTypes,keyword,pattern,translate){const result=[];return predefinedOrgUtilities.forEach((uItem=>{const utility=helperServices[uItem.name],label=translate(uItem.name);if(uItem.dynamic){if(Array.isArray(utility))result.push({id:uItem.name,name:uItem.name,label,type:uItem.type,children:utility.map(((child,index)=>{var _a;const setting=getUtilitySetting(uItem.name,child);return{id:`${uItem.name}_${index}`,name:uItem.name,type:uItem.type,index,label:null!==(_a=child.name)&&void 0!==_a?_a:child.id,url:child.url,setting}})).filter((childItem=>isUtilityMatch(childItem,serviceTypes,keyword,pattern)))});else if(utility){const setting=getUtilitySetting(uItem.name,utility);result.push({id:uItem.name,name:uItem.name,label,type:uItem.type,url:utility.url,setting})}}else if(utility){const setting=getUtilitySetting(uItem.name,utility);result.push({id:uItem.name,name:uItem.name,label,type:uItem.type,url:utility.url,setting})}})),result.filter((item=>item.children?item.children.length>0:isUtilityMatch(item,serviceTypes,keyword,pattern)))}function org_utility_addNewUtility(utilityTreeItem){const uid=jimu_core.IOh.getInstance().getIdOfOrgUtility(utilityTreeItem.name,utilityTreeItem.url,utilityTreeItem.index,utilityTreeItem.label);if(uid)return uid;const appConfigActions=(0,jimu_for_builder.getAppConfigAction)(),nextId=jimu_core.VbA.getUniqueId("utility"),utilityJson={id:nextId,type:utilityTreeItem.type,name:utilityTreeItem.name,label:utilityTreeItem.label,url:utilityTreeItem.url,source:"org"};return utilityTreeItem.setting&&(utilityJson.orgSetting=utilityTreeItem.setting),utilityTreeItem.index>=0&&(utilityJson.taskName=utilityTreeItem.label,utilityJson.index=utilityTreeItem.index),appConfigActions.addUtility(utilityJson).exec(),nextId}function findNotMatchedOrgUtilities(helperServices,useUtilities){const result=useUtilities.map((u=>jimu_core.IOh.getInstance().getUtilityJson(u.utilityId))).filter((uJson=>{if("org"===(null==uJson?void 0:uJson.source)){const{name,url,index,taskName}=uJson;return!function isInHelperServices(helperServices,name,url,index,taskName){var _a;if(index>=0){const services=helperServices[name];return!!Array.isArray(services)&&services.some((service=>(service.name===taskName||service.id===taskName)&&service.url===url))}return(null===(_a=helperServices[name])||void 0===_a?void 0:_a.url)===url}(helperServices,name,url,index,taskName)}return!1}));return result}const org_utility_style=jimu_core.AHW`
  .utility-item.utility-item-selected {
    outline: 1px solid var(--sys-color-primary-light);
    border-radius: 0;
    position: relative;
    .item-active-icon {
      position: absolute;
      top: -1px;
      right: -1px;
      & > div {
        width: 0;
        height: 0;
        border-top: 0.75rem var(--sys-color-primary-light) solid;
        border-left: 0.75rem transparent solid;
        background-color: transparent;
      }
    }
  }

  .utility-item-not-matched.utility-item-selected {
    outline: 1px solid var(--sys-color-primary-dark);
    border-radius: 0;
  }

  .utility-item-not-matched {
    position: relative;

    .item-active-icon {
      position: absolute;
      top: -1px;
      right: -1px;
      .icon-container {
        width: 0;
        height: 0;
        border-top: 0.75rem var(--sys-color-primary-dark) solid;
        border-left: 0.75rem transparent solid;
        background-color: transparent;
      }
    }
  }

  .org-tree {
    height: auto !important;
  }
  .tree-root {
    padding: 0.5rem 0;

  }
`;function OrgUtilityTree(props){var _a;const{keyword,pattern,serviceTypes,useUtilities,isMultiple,onChange}=props,helperServices=null===(_a=(0,jimu_core.Vp3)().getState().portalSelf)||void 0===_a?void 0:_a.helperServices,[services,setServices]=jimu_core.q_G.useState([]),[notMatchedUtilities,setNotMatchedUtilities]=jimu_core.q_G.useState(null),translate=jimu_core.JLE.useTranslation(jimu_ui.defaultMessages);jimu_core.q_G.useEffect((()=>{setServices(extractService(helperServices,serviceTypes,keyword,pattern,translate))}),[helperServices,serviceTypes,keyword,pattern,translate]),jimu_core.JLE.useEffectOnce((()=>{const notMatched=findNotMatchedOrgUtilities(helperServices,null!=useUtilities?useUtilities:(0,jimu_core.J3Z)([]));setNotMatchedUtilities(notMatched)}));const getChildNodes=jimu_core.JLE.useEventCallback((utility=>{const{children}=utility;return null!=children?children:[]})),getLabel=jimu_core.JLE.useEventCallback((utility=>utility.label)),isNodeSelectable=jimu_core.JLE.useEventCallback((utility=>"root"!==utility.id&&!utility.children)),renderLabel=jimu_core.JLE.useEventCallback(((label,treeNode,selectable=!1)=>(0,jimu_core.Yac)("div",{className:"w-100 d-flex align-items-center",css:jimu_core.AHW`
          height: 1.625rem;
          line-height: 1.625rem;
          background-color: ${selectable?"var(--ref-palette-neutral-500)":"transparent"};
          color: var(--ref-palette-neutral-1100);
        `},(0,jimu_core.Yac)("div",{className:"d-flex flex-shrink-0 justify-content-center align-items-center h-100",css:jimu_core.AHW`width: 1.625rem; background-color: var(--sys-color-info-main);`},(null==treeNode?void 0:treeNode.children)||"root"===(null==treeNode?void 0:treeNode.id)?(0,jimu_core.Yac)(utility_group.U,{color:"var(--ref-palette-black)",className:"mr-0"}):(0,jimu_core.Yac)(utility_icon_UtilityIcon,{type:null==treeNode?void 0:treeNode.type,color:"var(--ref-palette-black)",className:"mr-0"})),(0,jimu_core.Yac)("div",{className:"text-truncate px-1"},label)))),indexOfUtility=jimu_core.q_G.useCallback((treeNode=>{const{label,index,name,url}=treeNode;let result=-1;return null==useUtilities||useUtilities.some(((u,idx)=>{const utilityJson=jimu_core.IOh.getInstance().getUtilityJson(u.utilityId);if("org"===(null==utilityJson?void 0:utilityJson.source))if(index>=0){if(utilityJson.index>=0&&utilityJson.name===name&&utilityJson.taskName===label)return result=idx,!0}else if(utilityJson.name===name&&utilityJson.url===url)return result=idx,!0;return!1})),result}),[useUtilities]),toggleItem=jimu_core.q_G.useCallback((treeNode=>{if("function"==typeof onChange){const index=indexOfUtility(treeNode),uid=jimu_core.IOh.getInstance().getIdOfOrgUtility(treeNode.name,treeNode.url,treeNode.index,treeNode.label),actualUseUtilities=null!=useUtilities?useUtilities:(0,jimu_core.J3Z)([]);if(index>=0){if(isMultiple&&(onChange(actualUseUtilities.filter(((_,idx)=>idx!==index))),!jimu_core.IOh.getInstance().isUtilityUsed(uid))){const appConfigActions=(0,jimu_for_builder.getAppConfigAction)(),utilities=appConfigActions.appConfig.utilities.without(uid);appConfigActions.updateUtilities(utilities).exec()}}else if(null!=uid)onChange(isMultiple?jimu_core.J3Z.set(actualUseUtilities,actualUseUtilities.length,{utilityId:uid}):(0,jimu_core.J3Z)([{utilityId:uid}]));else{const nextId=org_utility_addNewUtility(treeNode);onChange(isMultiple?jimu_core.J3Z.set(actualUseUtilities,actualUseUtilities.length,{utilityId:nextId}):(0,jimu_core.J3Z)([{utilityId:nextId}]))}}}),[indexOfUtility,useUtilities,isMultiple,onChange]),renderItem=jimu_core.q_G.useCallback((treeNode=>{const selected=indexOfUtility(treeNode)>=0;return(0,jimu_core.Yac)(jimu_ui.Button,{type:"tertiary",className:(0,jimu_core.xWm)("utility-item jimu-outline-inside text-left w-100",{"utility-item-selected":selected}),"aria-checked":selected,"aria-label":treeNode.label,title:treeNode.label,onClick:()=>{toggleItem(treeNode)}},renderLabel(treeNode.label,treeNode,!0),selected&&(0,jimu_core.Yac)("div",{className:"item-active-icon"},(0,jimu_core.Yac)("div",{className:"text-center"})))}),[indexOfUtility,renderLabel,toggleItem]);return(0,jimu_core.Yac)("div",{className:"utility-tree w-100 my-4",css:org_utility_style},(null==notMatchedUtilities?void 0:notMatchedUtilities.length)>0&&(0,jimu_core.Yac)("div",{className:"p-2 mb-2"},(0,jimu_core.Yac)("div",{className:"d-flex mb-2 justify-content-between align-items-center"},(0,jimu_core.Yac)("span",{className:"font-13"},"Expired"),(0,jimu_core.Yac)(jimu_ui.Tooltip,{title:translate("orgUtilityNotAvailable")},(0,jimu_core.Yac)(jimu_ui.Button,{type:"tertiary",size:"sm",icon:!0},(0,jimu_core.Yac)(info.J,{size:"s"})))),notMatchedUtilities.map((uJson=>{var _a,_b,_c,_d,_e,_f;const selected=null==useUtilities?void 0:useUtilities.some((uItem=>uItem.utilityId===uJson.id));return(0,jimu_core.Yac)("div",{className:"w-100",key:uJson.id},(0,jimu_core.Yac)(jimu_ui.Button,{type:"tertiary",className:(0,jimu_core.xWm)("utility-item-not-matched jimu-outline-inside text-left p-0 w-100",{"utility-item-selected":selected}),"aria-checked":selected,"aria-label":null!==(_b=null!==(_a=uJson.taskName)&&void 0!==_a?_a:uJson.label)&&void 0!==_b?_b:uJson.name,title:null!==(_d=null!==(_c=uJson.taskName)&&void 0!==_c?_c:uJson.label)&&void 0!==_d?_d:uJson.name,onClick:()=>{toggleItem({name:uJson.name,url:uJson.url,index:uJson.index,label:uJson.taskName})}},renderLabel(null!==(_f=null!==(_e=uJson.taskName)&&void 0!==_e?_e:uJson.label)&&void 0!==_f?_f:uJson.name,{type:uJson.type},!0),selected&&(0,jimu_core.Yac)("div",{className:"item-active-icon"},(0,jimu_core.Yac)("div",{className:"icon-container"}))))}))),services.map((service=>(0,jimu_core.Yac)("div",{key:service.id},(0,jimu_core.Yac)(data_source_selector.DataSourceTree,{className:"org-tree",dataSource:service,getChildDataSources:getChildNodes,getLabel,isNodeSelectable,renderSelectableNode:renderItem,renderUnselectableNode:(label,source)=>renderLabel(label,source),defaultOpen:!0})))))}try{org_utility_addNewUtility.displayName="addNewUtility",org_utility_addNewUtility.__docgenInfo={description:"",displayName:"addNewUtility",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"GEOENRICH"'},{value:'"GEOMETRY"'},{value:'"GEOCODING"'},{value:'"PRINTING"'},{value:'"ROUTING"'},{value:'"GPSERVER"'},{value:'"GPTask"'}]}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},index:{defaultValue:null,description:"",name:"index",required:!1,type:{name:"number"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string"}},rootId:{defaultValue:null,description:"",name:"rootId",required:!1,type:{name:"string"}},task:{defaultValue:null,description:"",name:"task",required:!1,type:{name:"string"}},setting:{defaultValue:null,description:"",name:"setting",required:!1,type:{name:"OrgGeocodeSetting | OrgPrintSetting"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/utility-selector/components/org-utility.tsx#addNewUtility"]={docgenInfo:org_utility_addNewUtility.__docgenInfo,name:"addNewUtility",path:"../jimu-ui/advanced/lib/utility-selector/components/org-utility.tsx#addNewUtility"})}catch(__react_docgen_typescript_loader_error){}try{OrgUtilityTree.displayName="OrgUtilityTree",OrgUtilityTree.__docgenInfo={description:"",displayName:"OrgUtilityTree",props:{keyword:{defaultValue:null,description:"",name:"keyword",required:!0,type:{name:"string"}},serviceTypes:{defaultValue:null,description:"",name:"serviceTypes",required:!0,type:{name:"SupportedUtilityType[]"}},isMultiple:{defaultValue:null,description:"",name:"isMultiple",required:!0,type:{name:"boolean"}},pattern:{defaultValue:null,description:"",name:"pattern",required:!1,type:{name:"RegExp"}},useUtilities:{defaultValue:null,description:"",name:"useUtilities",required:!1,type:{name:"ImmutableArray<UseUtility>"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(utilities: ImmutableArray<UseUtility>) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/utility-selector/components/org-utility.tsx#OrgUtilityTree"]={docgenInfo:OrgUtilityTree.__docgenInfo,name:"OrgUtilityTree",path:"../jimu-ui/advanced/lib/utility-selector/components/org-utility.tsx#OrgUtilityTree"})}catch(__react_docgen_typescript_loader_error){}var added_utility_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};const added_utility_style=jimu_core.AHW`
  .utility-item.utility-item-selected {
    outline: 1px solid var(--sys-color-primary-light);
    position: relative;
    .item-active-icon {
      position: absolute;
      top: -1px;
      right: -1px;
      & > div {
        width: 0;
        height: 0;
        border-top: 0.75rem var(--sys-color-primary-light) solid;
        border-left: 0.75rem transparent solid;
        background-color: transparent;
      }
    }
  }
  .tree-root {
    padding: 0.5rem 0;
  }
`;function AddedUtilityTree(props){const{keyword,pattern,serviceTypes,utilities,useUtilities,isMultiple,onUtilitiesChange,className}=props,[services,setServices]=jimu_core.q_G.useState([]),cancelable=jimu_core.JLE.useCancelablePromiseMaker();jimu_core.q_G.useEffect((()=>{cancelable(function added_utility_extractService(utilities,serviceTypes,keyword,pattern){return added_utility_awaiter(this,void 0,void 0,(function*(){var _a,_b;const result=[],uIdArray=Object.keys(null!=utilities?utilities:{}),utilityStates=null!==(_a=(0,jimu_core.Vp3)().getState().appStateInBuilder.appRuntimeInfo.utilityStates)&&void 0!==_a?_a:{};for(let i=0;i<uIdArray.length;i++){const item=utilities[uIdArray[i]];if("org"===item.source||uIdArray[i]in utilityStates&&!1===utilityStates[uIdArray[i]].success)continue;const utility=yield jimu_core.IOh.getInstance().getUtility(item.id);let utilityItem;utilityItem=item.portalUrl&&item.itemId?{id:item.id,label:null!==(_b=item.label)&&void 0!==_b?_b:item.sourceLabel,type:item.type,url:utility.itemInfo.url}:{id:item.id,label:item.label,type:item.type,url:item.url},utility.tasks&&(utilityItem.children=utility.tasks.filter((task=>task.visible||null==task.visible)).map(((task,index)=>{var _a;return{rootId:item.id,id:`${item.id}_${index}`,task:task.name,type:task.isPrintingTask?jimu_core.JXK.Printing:jimu_core.JXK.GPTask,label:null!==(_a=task.label)&&void 0!==_a?_a:task.name,url:`${utilityItem.url}/${task.name}`}})).filter((childItem=>isUtilityMatch(childItem,serviceTypes,keyword,pattern)))),result.push(utilityItem)}return result.filter((item=>item.children?item.children.length>0:isUtilityMatch(item,serviceTypes,keyword,pattern)))}))}(utilities,serviceTypes,keyword,pattern)).then((result=>{setServices(result)}))}),[utilities,cancelable,serviceTypes,keyword,pattern]);const getChildNodes=jimu_core.JLE.useEventCallback((treeNode=>{const{children}=treeNode;return null!=children?children:[]})),getLabel=jimu_core.JLE.useEventCallback((treeNode=>treeNode.label)),isNodeSelectable=jimu_core.JLE.useEventCallback((treeNode=>"root"!==treeNode.id&&!treeNode.children)),renderLabel=jimu_core.JLE.useEventCallback(((label,treeNode,selectable=!1)=>(0,jimu_core.Yac)("div",{className:"w-100 d-flex align-items-center",css:jimu_core.AHW`
          height: 1.625rem;
          line-height: 1.625rem;
          background-color: ${selectable?"var(--ref-palette-neutral-500)":"transparent"};
          color: var(--ref-palette-neutral-1100);
        `},(0,jimu_core.Yac)("div",{className:"d-flex flex-shrink-0 justify-content-center align-items-center h-100",css:jimu_core.AHW`width: 1.625rem; background-color: var(--sys-color-info-main);`},(null==treeNode?void 0:treeNode.children)||"root"===treeNode.id?(0,jimu_core.Yac)(utility_group.U,{color:"var(--ref-palette-black)",className:"mr-0"}):(0,jimu_core.Yac)(utility_icon_UtilityIcon,{type:null==treeNode?void 0:treeNode.type,color:"var(--ref-palette-black)",className:"mr-0"})),(0,jimu_core.Yac)("div",{className:"text-truncate px-1"},label)))),indexOfUtility=jimu_core.q_G.useCallback((treeNode=>{const{id,rootId,task}=treeNode;let result=-1;return null==useUtilities||useUtilities.some(((u,idx)=>(u.utilityId===id||u.utilityId===rootId&&u.task===task)&&(result=idx,!0))),result}),[useUtilities]),toggleItem=jimu_core.q_G.useCallback((treeNode=>{var _a,_b;if("function"==typeof onUtilitiesChange){const index=indexOfUtility(treeNode),actualUseUtilities=null!=useUtilities?useUtilities:(0,jimu_core.J3Z)([]);index>=0?isMultiple&&onUtilitiesChange(actualUseUtilities.filter(((_,idx)=>idx!==index))):onUtilitiesChange(isMultiple?jimu_core.J3Z.set(actualUseUtilities,actualUseUtilities.length,{utilityId:null!==(_a=treeNode.rootId)&&void 0!==_a?_a:treeNode.id,task:treeNode.task}):(0,jimu_core.J3Z)([{utilityId:null!==(_b=treeNode.rootId)&&void 0!==_b?_b:treeNode.id,task:treeNode.task}]))}}),[indexOfUtility,useUtilities,isMultiple,onUtilitiesChange]),renderItem=jimu_core.q_G.useCallback((treeNode=>{const selected=indexOfUtility(treeNode)>=0;return(0,jimu_core.Yac)(jimu_ui.Button,{type:"tertiary",className:(0,jimu_core.xWm)("utility-item jimu-outline-inside text-left w-100",{"utility-item-selected":selected}),"aria-checked":selected,"aria-label":treeNode.label,title:treeNode.label,onClick:()=>{toggleItem(treeNode)}},renderLabel(treeNode.label,treeNode,!0),selected&&(0,jimu_core.Yac)("div",{className:"item-active-icon"},(0,jimu_core.Yac)("div",{className:"text-center"})))}),[indexOfUtility,renderLabel,toggleItem]);return(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)("utility-tree w-100",className,{"my-4":!(null==className?void 0:className.includes("my-"))}),css:added_utility_style},services.map((service=>(0,jimu_core.Yac)("div",{key:service.id},(0,jimu_core.Yac)(data_source_selector.DataSourceTree,{className:"added-tree",dataSource:service,getChildDataSources:getChildNodes,getLabel,isNodeSelectable,renderSelectableNode:renderItem,renderUnselectableNode:(label,source)=>renderLabel(label,source),defaultOpen:!0})))))}try{AddedUtilityTree.displayName="AddedUtilityTree",AddedUtilityTree.__docgenInfo={description:"",displayName:"AddedUtilityTree",props:{keyword:{defaultValue:null,description:"",name:"keyword",required:!0,type:{name:"string"}},serviceTypes:{defaultValue:null,description:"",name:"serviceTypes",required:!0,type:{name:"SupportedUtilityType[]"}},isMultiple:{defaultValue:null,description:"",name:"isMultiple",required:!0,type:{name:"boolean"}},utilities:{defaultValue:null,description:"",name:"utilities",required:!0,type:{name:"ImmutableObject<UtilitiesJson>"}},pattern:{defaultValue:null,description:"",name:"pattern",required:!1,type:{name:"RegExp"}},useUtilities:{defaultValue:null,description:"",name:"useUtilities",required:!1,type:{name:"ImmutableArray<UseUtility>"}},onUtilitiesChange:{defaultValue:null,description:"",name:"onUtilitiesChange",required:!1,type:{name:"(utilities: ImmutableArray<UseUtility>) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/utility-selector/components/added-utility.tsx#AddedUtilityTree"]={docgenInfo:AddedUtilityTree.__docgenInfo,name:"AddedUtilityTree",path:"../jimu-ui/advanced/lib/utility-selector/components/added-utility.tsx#AddedUtilityTree"})}catch(__react_docgen_typescript_loader_error){}var item_selector=__webpack_require__("../jimu-ui/basic/item-selector.tsx"),plus_circle=__webpack_require__("../jimu-icons/outlined/editor/plus-circle.tsx"),minus_circle=__webpack_require__("../jimu-icons/outlined/editor/minus-circle.tsx"),visible=__webpack_require__("../jimu-icons/outlined/application/visible.tsx"),invisible=__webpack_require__("../jimu-icons/outlined/application/invisible.tsx");const collapseLineStyle=jimu_core.AHW`
  border-left: 1px solid var(--ref-palette-neutral-700);
  border-bottom: 1px solid var(--ref-palette-neutral-700);
  width: 1.5rem;
  height: 2.1rem;
  position: absolute;
  top: -16px;
  left: 8px;
`;function UtilityItem(props){var _a,_b;const{utility,onRemove,onChange}=props,[isOpen,setIsOpen]=jimu_core.q_G.useState(!1),[tasks,setTasks]=jimu_core.q_G.useState(null),[loaded,setIsLoaded]=jimu_core.q_G.useState(!1),translate=jimu_core.JLE.useTranslation();jimu_core.JLE.useEffectOnce((()=>{jimu_core.IOh.getInstance().getUtilityFromJson(utility).then((u=>{var _a;(null===(_a=u.tasks)||void 0===_a?void 0:_a.length)>0&&setTasks(u.tasks)})).finally((()=>{setIsLoaded(!0)}))}));const toggleOpen=jimu_core.q_G.useCallback((()=>{setIsOpen(!isOpen)}),[isOpen]),handleRemove=jimu_core.q_G.useCallback((()=>{onRemove(utility)}),[onRemove,utility]),toggleVisible=jimu_core.q_G.useCallback((task=>{const newTasks=[];tasks.forEach((taskItem=>{taskItem.name===task.name?newTasks.push(Object.assign(Object.assign({},taskItem),{visible:null!=taskItem.visible&&!taskItem.visible})):newTasks.push(taskItem)})),setTasks(newTasks);const newUtility=utility.set("tasks",newTasks);onChange(newUtility)}),[tasks,utility,onChange]);return loaded?(0,jimu_core.Yac)(jimu_core.q_G.Fragment,null,(0,jimu_core.Yac)("div",{className:"w-100 d-flex align-items-center mb-2 pl-4",css:jimu_core.AHW`
          height: 1.625rem;
          line-height: 1.625rem;
          background-color: var(--ref-palette-neutral-500);
          color: var(--ref-palette-neutral-1100);
          position: relative;
        `},(0,jimu_core.Yac)("div",{className:"d-flex flex-shrink-0 justify-content-center align-items-center h-100"},(null==tasks?void 0:tasks.length)>0&&(0,jimu_core.Yac)(jimu_ui.Button,{className:"px-0",type:"tertiary",icon:!0,size:"sm",onClick:toggleOpen,css:jimu_core.AHW`
                position: absolute;
                left: 0;
              `},isOpen?(0,jimu_core.Yac)(minus_circle.j,{size:"s"}):(0,jimu_core.Yac)(plus_circle.z,{size:"s"})),(0,jimu_core.Yac)("div",{className:"utility-icon-container"},(null==tasks?void 0:tasks.length)>0?(0,jimu_core.Yac)(utility_group.U,{color:"var(--ref-palette-black)"}):(0,jimu_core.Yac)(data_utility.N,{color:"var(--ref-palette-black)"}))),(0,jimu_core.Yac)("div",{className:"text-truncate px-2",title:null!==(_a=utility.label)&&void 0!==_a?_a:utility.sourceLabel},null!==(_b=utility.label)&&void 0!==_b?_b:utility.sourceLabel),(0,jimu_core.Yac)(jimu_ui.Button,{className:"ml-auto",type:"tertiary",icon:!0,size:"sm",onClick:handleRemove},(0,jimu_core.Yac)(editor_close.r,null))),(null==tasks?void 0:tasks.length)>0&&(0,jimu_core.Yac)(jimu_ui.Collapse,{isOpen},tasks.map((task=>(0,jimu_core.Yac)("div",{key:task.name,className:"d-flex align-items-center mb-2",css:jimu_core.AHW`padding-left: 2rem; position: relative;`},(0,jimu_core.Yac)("div",{className:"utility-icon-container mr-2"},(0,jimu_core.Yac)(data_utility.N,{color:"var(--ref-palette-black)"})),(0,jimu_core.Yac)("div",{className:"text-truncate",title:task.name},task.name),(0,jimu_core.Yac)(jimu_ui.Button,{type:"tertiary",title:null==task.visible||task.visible?translate("invisible"):translate("visible"),"aria-label":null==task.visible||task.visible?translate("invisible"):translate("visible"),className:"p-0 ml-auto utility-tasks align-items-center",onClick:()=>{toggleVisible(task)}},null==task.visible||task.visible?(0,jimu_core.Yac)(visible.T,null):(0,jimu_core.Yac)(invisible.u,null)),(0,jimu_core.Yac)("div",{className:"collapse-line",css:collapseLineStyle})))))):(0,jimu_core.Yac)("div",{className:"loading-container"},(0,jimu_core.Yac)(jimu_ui.Loading,{type:jimu_ui.LoadingType.Bar}))}try{UtilityItem.displayName="UtilityItem",UtilityItem.__docgenInfo={description:"",displayName:"UtilityItem",props:{utility:{defaultValue:null,description:"",name:"utility",required:!0,type:{name:"IMUtilityJson"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(utility: IMUtilityJson) => void"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!0,type:{name:"(utility: IMUtilityJson) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/utility-selector/components/utility-item.tsx#UtilityItem"]={docgenInfo:UtilityItem.__docgenInfo,name:"UtilityItem",path:"../jimu-ui/advanced/lib/utility-selector/components/utility-item.tsx#UtilityItem"})}catch(__react_docgen_typescript_loader_error){}const new_utility_panel_style=jimu_core.AHW`
  max-height: 300px;
  background-color: var(--ref-palette-neutral-500);

  .item-list {
    max-height: 180px;
    overflow: auto;
  }

  .utility-icon-container {
    display: flex;
    flex-shrink: 0;
    justify-content: center;
    align-items: center;
    background-color: var(--sys-color-info-main);
    width: 1.625rem;
    height: 1.625rem;
    margin-right: 8px;
    svg {
      margin-right: 0 !important;
    }
  }
`;function NewUtilityPanel(props){const{utilities,onDoneClick,onChange}=props,translate=jimu_core.JLE.useTranslation(jimu_ui.defaultMessages),[isOpen,setIsOpen]=jimu_core.q_G.useState(!1),toggleOpen=jimu_core.q_G.useCallback((()=>{setIsOpen(!isOpen)}),[isOpen]),handleRemove=jimu_core.q_G.useCallback((utility=>{onChange(utilities.filter((u=>u.id!==utility.id)))}),[onChange,utilities]),handleChange=jimu_core.q_G.useCallback((utility=>{const index=utilities.findIndex((u=>u.id===utility.id));onChange(jimu_core.J3Z.set(utilities,index,utility))}),[onChange,utilities]);return utilities?(0,jimu_core.Yac)("div",{className:"w-100 p-4 shadow-3",css:new_utility_panel_style},(0,jimu_core.Yac)("div",{className:"new_utility_header d-flex align-items-center"},(0,jimu_core.Yac)("div",{className:"font-13"},(0,jimu_core.Yac)("span",null,utilities.length),(0,jimu_core.Yac)("span",{className:"ml-1"},translate("selected"))),(0,jimu_core.Yac)(jimu_ui.Button,{className:"ml-2",type:"tertiary",icon:!0,size:"sm",onClick:toggleOpen},isOpen?(0,jimu_core.Yac)(up.k,null):(0,jimu_core.Yac)(down.l,null)),!isOpen&&(0,jimu_core.Yac)(jimu_ui.Button,{className:"ml-auto",type:"primary","aria-label":translate("done"),onClick:onDoneClick},translate("done"))),(0,jimu_core.Yac)(jimu_ui.Collapse,{isOpen},(0,jimu_core.Yac)("div",{className:"my-4 item-list"},utilities.map(((u,index)=>(0,jimu_core.Yac)(UtilityItem,{key:index,utility:u,onChange:handleChange,onRemove:handleRemove}))))),isOpen&&(0,jimu_core.Yac)(jimu_ui.Button,{className:"w-100",type:"primary","aria-label":translate("done"),onClick:onDoneClick},translate("done"))):null}try{NewUtilityPanel.displayName="NewUtilityPanel",NewUtilityPanel.__docgenInfo={description:"",displayName:"NewUtilityPanel",props:{utilities:{defaultValue:null,description:"",name:"utilities",required:!0,type:{name:"ImmutableArray<IMUtilityJson>"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(utilities: ImmutableArray<IMUtilityJson>) => void"}},onDoneClick:{defaultValue:null,description:"",name:"onDoneClick",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/utility-selector/components/new-utility-panel.tsx#NewUtilityPanel"]={docgenInfo:NewUtilityPanel.__docgenInfo,name:"NewUtilityPanel",path:"../jimu-ui/advanced/lib/utility-selector/components/new-utility-panel.tsx#NewUtilityPanel"})}catch(__react_docgen_typescript_loader_error){}var add_utility_tabs_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};const itemTypes=(0,jimu_core.J3Z)([jimu_core.RfI.GeocodingService,jimu_core.RfI.GeometryService,jimu_core.RfI.GeoprocessingService,jimu_core.RfI.NetworkAnalysisService]);function getNextUtilityId(){return jimu_core.VbA.getUniqueId("utility")}const serviceMap=new Map,onlineItemMap=new Map,emptyUtilities=(0,jimu_core.J3Z)({});function add_utility_tabs_AddUtilityTabs(props){const{utilities=emptyUtilities,onChange,batchUtilityJsons,onBatchUpdate,onBatchDone,isMultiple=!0,immediate=!0}=props,[url,setUrl]=jimu_core.q_G.useState(""),[isValidUrl,setIsValidUrl]=jimu_core.q_G.useState(!1),[showItemAlert,setShowItemAlert]=jimu_core.q_G.useState({show:!1,msg:null}),[isBusy,setIsBusy]=jimu_core.q_G.useState(!1),formatMessage=jimu_core.JLE.useTranslation(jimu_ui.defaultMessages),portalUrl=jimu_core.E_S.useSelector((state=>state.portalUrl)),selectedItems=jimu_core.q_G.useMemo((()=>{const result=[];return Object.keys(utilities).forEach((id=>{const utility=utilities[id];utility.portalUrl&&result.push(utility.itemId)})),null==batchUtilityJsons||batchUtilityJsons.forEach((u=>{u.portalUrl&&result.push(u.itemId)})),(0,jimu_core.J3Z)(result)}),[utilities,batchUtilityJsons]),checkOnChange=jimu_core.JLE.useEventCallback((value=>{if(/^https:\/\//.test(value)){if(isValidUtilityUrl(value)){return jimu_core.IOh.getInstance().urlExist(value)?(setIsValidUrl(!1),{valid:!1,msg:formatMessage("duplicatedService")}):(setIsValidUrl(!0),{valid:!0})}}return setIsValidUrl(!1),{valid:!1,msg:formatMessage("serviceNotSupported")}})),hanldeUrlChange=jimu_core.JLE.useEventCallback((r=>{setUrl(r.value)})),isItemSelectable=jimu_core.q_G.useCallback((item=>add_utility_tabs_awaiter(this,void 0,void 0,(function*(){let url=onlineItemMap.get(item.id),isValid=!1;return url||(url=yield jimu_core.IOh.getInstance().getUrlOfItem(item.portalUrl,item.id),url&&onlineItemMap.set(item.id,url)),url&&(serviceMap.has(url)?serviceMap.get(url).valid&&(isValid=!0):isValid=isValidUtilityUrl(url)),isValid?(setShowItemAlert({show:!1,msg:null}),!0):(setShowItemAlert({show:!0,msg:formatMessage("serviceNotSupported")}),setTimeout((()=>{setShowItemAlert({show:!1,msg:null})}),3e3),!1)}))),[formatMessage]),handleItemAdded=jimu_core.q_G.useCallback(((_,latestSelectedItem)=>add_utility_tabs_awaiter(this,void 0,void 0,(function*(){var _a;const itemServiceUrl=onlineItemMap.get(latestSelectedItem.id);if(itemServiceUrl&&!serviceMap.has(itemServiceUrl))try{const{type,info}=yield checkServiceType(itemServiceUrl);if(null==type)throw serviceMap.set(itemServiceUrl,{valid:!1}),new Error(`service not supported ${itemServiceUrl}`);serviceMap.set(itemServiceUrl,{valid:!0,type,info}),setShowItemAlert({show:!1,msg:null})}catch(e){return setShowItemAlert({show:!0,msg:formatMessage("invalidResourceItem")}),void setTimeout((()=>{setShowItemAlert({show:!1,msg:null})}),3e3)}if(itemServiceUrl&&(null===(_a=serviceMap.get(itemServiceUrl))||void 0===_a?void 0:_a.valid)){const{type,info}=serviceMap.get(itemServiceUrl),newUtility={id:getNextUtilityId(),sourceLabel:latestSelectedItem.title,type,source:"custom",itemId:latestSelectedItem.id,portalUrl:latestSelectedItem.portalUrl,url:itemServiceUrl};if(type===jimu_core.JXK.GPServer&&(newUtility.tasks=null==info?void 0:info.tasks),immediate){const newUtilities=utilities.set(newUtility.id,newUtility);onChange(newUtilities)}else newUtility.id=`${Date.now()}`,onBatchUpdate(jimu_core.J3Z.set(batchUtilityJsons,batchUtilityJsons.length,newUtility))}}))),[onChange,onBatchUpdate,batchUtilityJsons,utilities,immediate,formatMessage]),handleItemRemoved=jimu_core.q_G.useCallback(((_,latestRemovedItem)=>{if(immediate){const idToRemove=Object.keys(utilities).find((id=>utilities[id].itemId===latestRemovedItem.id&&utilities[id].portalUrl===latestRemovedItem.portalUrl)),newUtilities=utilities.without(idToRemove);onChange(newUtilities)}else onBatchUpdate(batchUtilityJsons.filter((u=>u.itemId!==latestRemovedItem.id)))}),[onChange,onBatchUpdate,utilities,batchUtilityJsons,immediate]),handleAddService=jimu_core.q_G.useCallback((()=>add_utility_tabs_awaiter(this,void 0,void 0,(function*(){var _a,_b,_c;const exists=jimu_core.IOh.getInstance().urlExist(url);if(!serviceMap.has(url)){setIsBusy(!0);try{const{type,info}=yield checkServiceType(url,!0);if(null==type)throw serviceMap.set(url,{valid:!1}),new Error(`service not supported ${url}`);serviceMap.set(url,{valid:!0,type,info})}catch(e){return setShowItemAlert({show:!0,msg:formatMessage("invalidResourceItem")}),void setTimeout((()=>{setShowItemAlert({show:!1,msg:null})}),3e3)}finally{setIsBusy(!1)}}const checkResult=serviceMap.get(url);if(!exists&&(null==checkResult?void 0:checkResult.valid)){const newUtility={id:getNextUtilityId(),type:checkResult.type,source:"custom",url,label:null!==(_b=null===(_a=checkResult.info)||void 0===_a?void 0:_a.displayName)&&void 0!==_b?_b:getLabelOfUrl(url)};if(checkResult.type===jimu_core.JXK.GPServer&&(newUtility.tasks=null===(_c=checkResult.info)||void 0===_c?void 0:_c.tasks),immediate){const newUtilities=utilities.set(newUtility.id,newUtility);onChange(newUtilities)}else newUtility.id=`${Date.now()}`,onBatchUpdate(jimu_core.J3Z.set(batchUtilityJsons,batchUtilityJsons.length,newUtility));setUrl(""),setIsValidUrl(!1)}}))),[onChange,onBatchUpdate,utilities,batchUtilityJsons,immediate,url,formatMessage]);return(0,jimu_core.Yac)("div",{className:"w-100 h-100",css:jimu_core.AHW`position: relative;`},(0,jimu_core.Yac)(jimu_ui.Tabs,{css:jimu_core.AHW`
          height: ${immediate?"100%":"calc(100% - 64px)"};
          overflow: hidden;
          .tab-content {
            max-height: calc(100% - 2rem);
          }
        `,type:"underline",fill:!0},(0,jimu_core.Yac)(jimu_ui.Tab,{id:"layers",title:formatMessage("url")},(0,jimu_core.Yac)("div",{className:"w-100 pt-4 px-4",css:jimu_core.AHW`
              position: relative;
            `},(0,jimu_core.Yac)(jimu_ui.UrlInput,{schemes:["https"],height:80,value:url,placeholder:formatMessage("websitePlaceholder"),checkValidityOnChange:checkOnChange,onChange:hanldeUrlChange})),(0,jimu_core.Yac)("div",{className:"d-flex px-4 pt-4 flex-column align-items-end"},(0,jimu_core.Yac)(jimu_ui.Button,{className:"w-100",type:"primary",disabled:!isValidUrl||isBusy,onClick:handleAddService,css:jimu_core.AHW`position: relative;min-height:2rem;`},isBusy?(0,jimu_core.Yac)(jimu_ui.Loading,{type:jimu_ui.LoadingType.DotsSecondary}):formatMessage("add"))),(0,jimu_core.Yac)("div",{className:"d-flex px-4 pt-2 flex-column"},(0,jimu_core.Yac)("div",{css:jimu_core.AHW`
              color: var(--ref-palette-neutral-900);
              font-weight: 400;
              font-size: 13px;
              line-height: 18px;
            `},formatMessage("supportedServices")))),(0,jimu_core.Yac)(jimu_ui.Tab,{id:"widgets",title:formatMessage("items")},(0,jimu_core.Yac)(item_selector.dj,{mode:item_selector.kV.Simple,itemType:itemTypes,portalUrl,isMultiple,isSelectable:isItemSelectable,onSelect:handleItemAdded,onRemove:handleItemRemoved,selectedItems,disableRemoveItemsSelectedOnMount:!0}))),(0,jimu_core.Yac)("div",{css:jimu_core.AHW`
        position: absolute;
        bottom: 0;
        width: 100%;
      `},showItemAlert.show&&(0,jimu_core.Yac)(jimu_ui.Alert,{closable:!0,form:"basic",onClose:()=>{setShowItemAlert({show:!1,msg:null})},open:!0,text:showItemAlert.msg,type:"warning",withIcon:!0,className:"w-100"}),(0,jimu_core.Yac)(NewUtilityPanel,{utilities:batchUtilityJsons,onChange:onBatchUpdate,onDoneClick:onBatchDone})))}try{add_utility_tabs_AddUtilityTabs.displayName="AddUtilityTabs",add_utility_tabs_AddUtilityTabs.__docgenInfo={description:"",displayName:"AddUtilityTabs",props:{utilities:{defaultValue:null,description:"",name:"utilities",required:!0,type:{name:"IMUtilitiesJson"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(utilities: IMUtilitiesJson) => void"}},onBatchDone:{defaultValue:null,description:"",name:"onBatchDone",required:!1,type:{name:"() => void"}},onBatchUpdate:{defaultValue:null,description:"",name:"onBatchUpdate",required:!1,type:{name:"(utilityJsons: ImmutableArray<IMUtilityJson>) => void"}},immediate:{defaultValue:null,description:"",name:"immediate",required:!1,type:{name:"boolean"}},batchUtilityJsons:{defaultValue:null,description:"",name:"batchUtilityJsons",required:!1,type:{name:"ImmutableArray<IMUtilityJson>"}},isMultiple:{defaultValue:null,description:"",name:"isMultiple",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/utility-selector/components/add-utility-tabs.tsx#AddUtilityTabs"]={docgenInfo:add_utility_tabs_AddUtilityTabs.__docgenInfo,name:"AddUtilityTabs",path:"../jimu-ui/advanced/lib/utility-selector/components/add-utility-tabs.tsx#AddUtilityTabs"})}catch(__react_docgen_typescript_loader_error){}var outlined_editor_close=__webpack_require__("../jimu-icons/svg/outlined/editor/close.svg"),close_default=__webpack_require__.n(outlined_editor_close),warning=__webpack_require__("../jimu-icons/svg/outlined/suggested/warning.svg"),warning_default=__webpack_require__.n(warning),editor_plus_circle=__webpack_require__("../jimu-icons/filled/editor/plus-circle.tsx");const advancedActionMap={overrideItemBlockInfo:({itemBlockInfo},refComponent)=>({name:list_tree.M5.RenderOverrideItem,children:[{name:list_tree.M5.RenderOverrideItemBody,children:[{name:list_tree.M5.RenderOverrideItemMainLine,children:[{name:list_tree.M5.RenderOverrideItemIcon,autoCollapsed:!0},{name:list_tree.M5.RenderOverrideItemTitle},{name:list_tree.M5.RenderOverrideItemCommands}]}]}]})},ALL_TYPES_MAP={[jimu_core.JXK.GeoCoding]:"geocodingService",[jimu_core.JXK.GeoEnrichment]:"geoenrichmentService",[jimu_core.JXK.Geometry]:"geometryService",[jimu_core.JXK.Printing]:"printingService",[jimu_core.JXK.Routing]:"routingService",[jimu_core.JXK.GPServer]:"geoprocessingService",[jimu_core.JXK.GPTask]:"geoprocessingTask"},ALL_TYPES=Object.keys(ALL_TYPES_MAP);function utility_selector_UtilitySelector(props){const{useUtilities,onChange,pattern,types=ALL_TYPES,isMultiple=!1,showRemove=!0,showOrgUtility=!0,closePopupOnSelect=!0}=props,translate=jimu_core.JLE.useTranslation(jimu_ui.defaultMessages),utilities=jimu_core.E_S.useSelector((state=>{var _a,_b,_c;return window.jimuConfig.isBuilder?null===(_b=null===(_a=state.appStateInBuilder)||void 0===_a?void 0:_a.appConfig)||void 0===_b?void 0:_b.utilities:null===(_c=state.appConfig)||void 0===_c?void 0:_c.utilities})),utilityStates=jimu_core.E_S.useSelector((state=>{var _a,_b,_c;return window.jimuConfig.isBuilder?null===(_b=null===(_a=state.appStateInBuilder)||void 0===_a?void 0:_a.appRuntimeInfo)||void 0===_b?void 0:_b.utilityStates:null===(_c=state.appRuntimeInfo)||void 0===_c?void 0:_c.utilityStates})),utilitiesRef=jimu_core.q_G.useRef(utilities),typesRef=jimu_core.q_G.useRef(types),[showPopper,setShowPopper]=jimu_core.q_G.useState(!1),[selectType,setSelectType]=jimu_core.q_G.useState(0),[serviceTypes,setServiceTypes]=jimu_core.q_G.useState(types),[keyword,setKeyword]=jimu_core.q_G.useState(""),[batchUtilityJsons,setBatchUtilityJsons]=jimu_core.q_G.useState((0,jimu_core.J3Z)([])),elemRef=jimu_core.q_G.useRef(),btnRef=jimu_core.q_G.useRef(),getMultiSelectItems=jimu_core.q_G.useCallback((()=>types.map((type=>({value:type,label:translate(ALL_TYPES_MAP[type]),render:(_item,values)=>(0,jimu_core.Yac)(jimu_ui.Label,{className:"d-flex w-100 h-100 align-items-center mb-0"},(0,jimu_core.Yac)(jimu_ui.Checkbox,{checked:values.includes(type)}),(0,jimu_core.Yac)("span",{className:"ml-2"},translate(ALL_TYPES_MAP[type])))})))),[translate,types]),handleTypesChange=jimu_core.q_G.useCallback(((evt,value,values)=>{setServiceTypes(values)}),[]);jimu_core.q_G.useEffect((()=>{if(utilities!==utilitiesRef.current&&(utilitiesRef.current=utilities,(null==useUtilities?void 0:useUtilities.length)>0)){const validResult=[];useUtilities.forEach((item=>{utilities[item.utilityId]&&validResult.push(item)})),useUtilities.length!==validResult.length&&onChange((0,jimu_core.J3Z)(validResult))}}),[utilities,useUtilities,onChange]),jimu_core.q_G.useEffect((()=>{let changed=!1;changed=types.length!==typesRef.current.length||types.some((t=>!typesRef.current.includes(t))),changed&&(typesRef.current=types,setServiceTypes(types))}),[types]);const togglePopper=jimu_core.q_G.useCallback((()=>{setShowPopper(!showPopper)}),[showPopper]),switchToAddMode=jimu_core.JLE.useEventCallback((()=>{setSelectType(1)})),switchToSelectMode=jimu_core.JLE.useEventCallback((()=>{setSelectType(0)})),handleUseUtilityChange=jimu_core.q_G.useCallback((useUtilities=>{onChange(useUtilities),!isMultiple&&closePopupOnSelect&&setShowPopper(!1)}),[onChange,isMultiple,closePopupOnSelect]),hanldeUtilitesChange=jimu_core.JLE.useEventCallback((newUtilities=>{(0,jimu_for_builder.getAppConfigAction)().updateUtilities(newUtilities).exec()})),handleUtilityBatchChange=jimu_core.JLE.useEventCallback((utilities=>{setBatchUtilityJsons(utilities)})),handleBatchAdd=jimu_core.q_G.useCallback((()=>{const appConfigAction=(0,jimu_for_builder.getAppConfigAction)(),utilityManager=jimu_core.IOh.getInstance();let appConfig=appConfigAction.appConfig;batchUtilityJsons.forEach((u=>{if(!u.itemId&&!utilityManager.urlExist(u.url)||u.itemId&&!utilityManager.itemExist(u.portalUrl,u.itemId)){const newU=u.set("id",jimu_core.VbA.getUniqueId("utility"));appConfig=appConfig.setIn(["utilities",newU.id],newU)}})),appConfigAction.updateUtilities(appConfig.utilities).exec(),setBatchUtilityJsons((0,jimu_core.J3Z)([])),switchToSelectMode()}),[batchUtilityJsons,switchToSelectMode]),handleKeywordChange=jimu_core.JLE.useEventCallback((e=>{setKeyword(e.target.value)})),removeItem=jimu_core.q_G.useCallback((index=>{onChange(useUtilities.filter(((_,idx)=>idx!==index)))}),[useUtilities,onChange]);return(0,jimu_core.Yac)("div",{className:"px- pb-2 w-100",ref:elemRef,css:jimu_core.AHW`
      .jimu-tree-item__icon {
        background-color: var(--sys-color-info-main);
        width: 18px;
        height: 18px;
        margin-right: 8px;
        svg {
          margin-right: 0 !important;
        }
      }
    `},(null==useUtilities?void 0:useUtilities.length)>0&&(0,jimu_core.Yac)(list_tree.B8,Object.assign({className:"utility-list mb-2",itemsJson:useUtilities.map(((useUtility,index)=>{var _a,_b;const utilityJson=jimu_core.IOh.getInstance().getUtilityJson(useUtility.utilityId),commands=[];if(!(null===(_b=null===(_a=null==utilityStates?void 0:utilityStates[useUtility.utilityId])||void 0===_a?void 0:_a.success)||void 0===_b||_b)){const isSignInError=jimu_core.IOh.getInstance().utilityHasSignInError(useUtility.utilityId);commands.push({label:translate(isSignInError?"signInErrorDefault":"utilityNotAvailable"),iconProps:()=>({icon:warning_default(),size:16,color:"var(--sys-color-warning-dark)"})})}return(isMultiple||showRemove)&&commands.push({label:translate("remove"),iconProps:()=>({icon:close_default(),size:12}),action:({data})=>{const{itemJsons:[currentItemJson]}=data;removeItem(+currentItemJson.itemKey)}}),{itemStateDetailContent:useUtility,itemKey:`${index}`,itemStateIcon:{icon:utility_icon_selectUtilitySVG(utilityJson.type),color:"var(--ref-palette-black)"},itemStateTitle:null!=utilityJson?jimu_core.IOh.getInstance().getLabelOfUseUtility(useUtility):useUtility.utilityId,itemStateCommands:commands}})),onClickItemBody:togglePopper},advancedActionMap)),(isMultiple||null==useUtilities||0===useUtilities.length)&&(0,jimu_core.Yac)(jimu_ui.Button,{className:"w-100",type:"tertiary",onClick:togglePopper,disableRipple:!0,css:jimu_core.AHW`
            border: 1px dashed var(--ref-palette-neutral-800);
            &.jimu-btn, &.jimu-btn:hover { color: var(--sys-color-primary-light); background: transparent; }
            &:hover { border: 1px dashed var(--ref-palette-neutral-900); }
          `,ref:btnRef},(0,jimu_core.Yac)("div",{className:"text-truncate font-weight-500"},translate("selectUtility"))),(0,jimu_core.Yac)(SidePopper,{title:translate("selectUtility"),position:"right",isOpen:showPopper&&0===selectType,toggle:togglePopper,trigger:elemRef.current,backToFocusNode:btnRef.current},(0,jimu_core.Yac)("div",{className:"h-100 d-flex flex-column"},(0,jimu_core.Yac)("div",{className:"px-4 pb-2",css:jimu_core.AHW`height: 50px;`},(0,jimu_core.Yac)(jimu_ui.TextInput,{type:"search",prefix:(0,jimu_core.Yac)(search.V,{size:"s"}),value:keyword,onChange:handleKeywordChange,placeholder:translate("SearchLabel")})),types!==ALL_TYPES&&types.length>1&&(0,jimu_core.Yac)("div",{className:"d-flex justify-content-between align-items-center px-4 mb-4"},(0,jimu_core.Yac)("span",null,translate("type")),(0,jimu_core.Yac)(jimu_ui.MultiSelect,{"aria-label":translate("type"),size:"sm",css:jimu_core.AHW`width: 120px; .jimu-dropdown { width: 100%; }`,values:(0,jimu_core.J3Z)(serviceTypes),items:getMultiSelectItems(),onClickItem:handleTypesChange,displayByValues:values=>translate("numSelected",{number:values.length})})),(0,jimu_core.Yac)("div",{className:"d-flex flex-column",css:jimu_core.AHW`flex: 1 1 auto; .tab-content {overflow: auto;}`},(0,jimu_core.Yac)("div",{css:jimu_core.AHW`flex: 1 1 0; overflow: auto;`},showOrgUtility&&(0,jimu_core.Yac)(jimu_ui.Tabs,{className:"px-4",type:"pills",fill:!0},(0,jimu_core.Yac)(jimu_ui.Tab,{id:"org_utility",title:translate("organization")},(0,jimu_core.Yac)(OrgUtilityTree,{isMultiple,keyword:keyword.trim(),pattern,serviceTypes,useUtilities,onChange:handleUseUtilityChange})),(0,jimu_core.Yac)(jimu_ui.Tab,{id:"added_utility",title:translate("added")},(0,jimu_core.Yac)(AddedUtilityTree,{isMultiple,keyword:keyword.trim(),pattern,serviceTypes,utilities,useUtilities,onUtilitiesChange:handleUseUtilityChange}))),!showOrgUtility&&(0,jimu_core.Yac)(AddedUtilityTree,{isMultiple,keyword:keyword.trim(),pattern,serviceTypes,utilities,useUtilities,onUtilitiesChange:handleUseUtilityChange,className:"px-4 my-0"})),(0,jimu_core.Yac)("div",{css:jimu_core.AHW`height: 40px;border-top: 1px solid var(--ref-palette-neutral-700);`},(0,jimu_core.Yac)(jimu_ui.Button,{className:"w-100 h-100",type:"tertiary","aria-label":translate("add"),onClick:switchToAddMode},(0,jimu_core.Yac)("div",{className:"d-flex align-items-center px-2 w-100"},(0,jimu_core.Yac)(editor_plus_circle.v,{size:"l",color:"var(--sys-color-primary-light)",className:"mr-2"}),(0,jimu_core.Yac)("span",{css:jimu_core.AHW`color: var(--sys-color-primary-light)`},translate("addUtility")))))))),(0,jimu_core.Yac)(SidePopper,{title:translate("addUtility"),position:"right",isOpen:showPopper&&1===selectType,toggle:switchToSelectMode,trigger:elemRef.current},(0,jimu_core.Yac)("div",{className:"h-100",css:jimu_core.AHW`position: relative;`},(0,jimu_core.Yac)("div",{css:jimu_core.AHW`height: 100%; .tab-content {overflow: auto;}`},(0,jimu_core.Yac)(add_utility_tabs_AddUtilityTabs,{utilities,batchUtilityJsons,isMultiple:!0,immediate:!1,onBatchUpdate:handleUtilityBatchChange,onBatchDone:handleBatchAdd,onChange:hanldeUtilitesChange})))))}try{utility_selector_UtilitySelector.displayName="UtilitySelector",utility_selector_UtilitySelector.__docgenInfo={description:"",displayName:"UtilitySelector",props:{pattern:{defaultValue:null,description:"",name:"pattern",required:!1,type:{name:"RegExp"}},types:{defaultValue:null,description:"",name:"types",required:!1,type:{name:"SupportedUtilityType[]"}},isMultiple:{defaultValue:null,description:"",name:"isMultiple",required:!1,type:{name:"boolean"}},showRemove:{defaultValue:null,description:"",name:"showRemove",required:!1,type:{name:"boolean"}},closePopupOnSelect:{defaultValue:null,description:"",name:"closePopupOnSelect",required:!1,type:{name:"boolean"}},showOrgUtility:{defaultValue:null,description:"",name:"showOrgUtility",required:!1,type:{name:"boolean"}},useUtilities:{defaultValue:null,description:"",name:"useUtilities",required:!1,type:{name:"ImmutableArray<UseUtility>"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(utilities: ImmutableArray<UseUtility>) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/utility-selector/components/utility-selector.tsx#UtilitySelector"]={docgenInfo:utility_selector_UtilitySelector.__docgenInfo,name:"UtilitySelector",path:"../jimu-ui/advanced/lib/utility-selector/components/utility-selector.tsx#UtilitySelector"})}catch(__react_docgen_typescript_loader_error){}try{addNewUtility.displayName="addNewUtility",addNewUtility.__docgenInfo={description:"",displayName:"addNewUtility",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"GEOENRICH"'},{value:'"GEOMETRY"'},{value:'"GEOCODING"'},{value:'"PRINTING"'},{value:'"ROUTING"'},{value:'"GPSERVER"'},{value:'"GPTask"'}]}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},index:{defaultValue:null,description:"",name:"index",required:!1,type:{name:"number"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string"}},rootId:{defaultValue:null,description:"",name:"rootId",required:!1,type:{name:"string"}},task:{defaultValue:null,description:"",name:"task",required:!1,type:{name:"string"}},setting:{defaultValue:null,description:"",name:"setting",required:!1,type:{name:"OrgGeocodeSetting | OrgPrintSetting"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/utility-selector/components/utility-selector.tsx#addNewUtility"]={docgenInfo:addNewUtility.__docgenInfo,name:"addNewUtility",path:"../jimu-ui/advanced/lib/utility-selector/components/utility-selector.tsx#addNewUtility"})}catch(__react_docgen_typescript_loader_error){}try{UtilitySelector.displayName="UtilitySelector",UtilitySelector.__docgenInfo={description:"",displayName:"UtilitySelector",props:{pattern:{defaultValue:null,description:"",name:"pattern",required:!1,type:{name:"RegExp"}},types:{defaultValue:null,description:"",name:"types",required:!1,type:{name:"SupportedUtilityType[]"}},isMultiple:{defaultValue:null,description:"",name:"isMultiple",required:!1,type:{name:"boolean"}},showRemove:{defaultValue:null,description:"",name:"showRemove",required:!1,type:{name:"boolean"}},closePopupOnSelect:{defaultValue:null,description:"",name:"closePopupOnSelect",required:!1,type:{name:"boolean"}},showOrgUtility:{defaultValue:null,description:"",name:"showOrgUtility",required:!1,type:{name:"boolean"}},useUtilities:{defaultValue:null,description:"",name:"useUtilities",required:!1,type:{name:"ImmutableArray<UseUtility>"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(utilities: ImmutableArray<UseUtility>) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/utility-selector/index.tsx#UtilitySelector"]={docgenInfo:UtilitySelector.__docgenInfo,name:"UtilitySelector",path:"../jimu-ui/advanced/lib/utility-selector/index.tsx#UtilitySelector"})}catch(__react_docgen_typescript_loader_error){}try{addNewUtility.displayName="addNewUtility",addNewUtility.__docgenInfo={description:"",displayName:"addNewUtility",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"GEOENRICH"'},{value:'"GEOMETRY"'},{value:'"GEOCODING"'},{value:'"PRINTING"'},{value:'"ROUTING"'},{value:'"GPSERVER"'},{value:'"GPTask"'}]}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},index:{defaultValue:null,description:"",name:"index",required:!1,type:{name:"number"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string"}},rootId:{defaultValue:null,description:"",name:"rootId",required:!1,type:{name:"string"}},task:{defaultValue:null,description:"",name:"task",required:!1,type:{name:"string"}},setting:{defaultValue:null,description:"",name:"setting",required:!1,type:{name:"OrgGeocodeSetting | OrgPrintSetting"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/utility-selector/index.tsx#addNewUtility"]={docgenInfo:addNewUtility.__docgenInfo,name:"addNewUtility",path:"../jimu-ui/advanced/lib/utility-selector/index.tsx#addNewUtility"})}catch(__react_docgen_typescript_loader_error){}try{AddUtilityTabs.displayName="AddUtilityTabs",AddUtilityTabs.__docgenInfo={description:"",displayName:"AddUtilityTabs",props:{utilities:{defaultValue:null,description:"",name:"utilities",required:!0,type:{name:"IMUtilitiesJson"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(utilities: IMUtilitiesJson) => void"}},onBatchDone:{defaultValue:null,description:"",name:"onBatchDone",required:!1,type:{name:"() => void"}},onBatchUpdate:{defaultValue:null,description:"",name:"onBatchUpdate",required:!1,type:{name:"(utilityJsons: ImmutableArray<IMUtilityJson>) => void"}},immediate:{defaultValue:null,description:"",name:"immediate",required:!1,type:{name:"boolean"}},batchUtilityJsons:{defaultValue:null,description:"",name:"batchUtilityJsons",required:!1,type:{name:"ImmutableArray<IMUtilityJson>"}},isMultiple:{defaultValue:null,description:"",name:"isMultiple",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/utility-selector/index.tsx#AddUtilityTabs"]={docgenInfo:AddUtilityTabs.__docgenInfo,name:"AddUtilityTabs",path:"../jimu-ui/advanced/lib/utility-selector/index.tsx#AddUtilityTabs"})}catch(__react_docgen_typescript_loader_error){}try{UtilityIcon.displayName="UtilityIcon",UtilityIcon.__docgenInfo={description:"",displayName:"UtilityIcon",props:{type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"GEOENRICH"'},{value:'"GEOMETRY"'},{value:'"GEOCODING"'},{value:'"PRINTING"'},{value:'"ROUTING"'},{value:'"GPSERVER"'},{value:'"GPTask"'}]}},children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/utility-selector/index.tsx#UtilityIcon"]={docgenInfo:UtilityIcon.__docgenInfo,name:"UtilityIcon",path:"../jimu-ui/advanced/lib/utility-selector/index.tsx#UtilityIcon"})}catch(__react_docgen_typescript_loader_error){}try{selectUtilitySVG.displayName="selectUtilitySVG",selectUtilitySVG.__docgenInfo={description:"",displayName:"selectUtilitySVG",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/utility-selector/index.tsx#selectUtilitySVG"]={docgenInfo:selectUtilitySVG.__docgenInfo,name:"selectUtilitySVG",path:"../jimu-ui/advanced/lib/utility-selector/index.tsx#selectUtilitySVG"})}catch(__react_docgen_typescript_loader_error){}try{UtilitySelector.displayName="UtilitySelector",UtilitySelector.__docgenInfo={description:"",displayName:"UtilitySelector",props:{pattern:{defaultValue:null,description:"",name:"pattern",required:!1,type:{name:"RegExp"}},types:{defaultValue:null,description:"",name:"types",required:!1,type:{name:"SupportedUtilityType[]"}},isMultiple:{defaultValue:null,description:"",name:"isMultiple",required:!1,type:{name:"boolean"}},showRemove:{defaultValue:null,description:"",name:"showRemove",required:!1,type:{name:"boolean"}},closePopupOnSelect:{defaultValue:null,description:"",name:"closePopupOnSelect",required:!1,type:{name:"boolean"}},showOrgUtility:{defaultValue:null,description:"",name:"showOrgUtility",required:!1,type:{name:"boolean"}},useUtilities:{defaultValue:null,description:"",name:"useUtilities",required:!1,type:{name:"ImmutableArray<UseUtility>"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(utilities: ImmutableArray<UseUtility>) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/utility-selector.tsx#UtilitySelector"]={docgenInfo:UtilitySelector.__docgenInfo,name:"UtilitySelector",path:"../jimu-ui/advanced/utility-selector.tsx#UtilitySelector"})}catch(__react_docgen_typescript_loader_error){}try{addNewUtility.displayName="addNewUtility",addNewUtility.__docgenInfo={description:"",displayName:"addNewUtility",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"GEOENRICH"'},{value:'"GEOMETRY"'},{value:'"GEOCODING"'},{value:'"PRINTING"'},{value:'"ROUTING"'},{value:'"GPSERVER"'},{value:'"GPTask"'}]}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},index:{defaultValue:null,description:"",name:"index",required:!1,type:{name:"number"}},url:{defaultValue:null,description:"",name:"url",required:!1,type:{name:"string"}},rootId:{defaultValue:null,description:"",name:"rootId",required:!1,type:{name:"string"}},task:{defaultValue:null,description:"",name:"task",required:!1,type:{name:"string"}},setting:{defaultValue:null,description:"",name:"setting",required:!1,type:{name:"OrgGeocodeSetting | OrgPrintSetting"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/utility-selector.tsx#addNewUtility"]={docgenInfo:addNewUtility.__docgenInfo,name:"addNewUtility",path:"../jimu-ui/advanced/utility-selector.tsx#addNewUtility"})}catch(__react_docgen_typescript_loader_error){}try{AddUtilityTabs.displayName="AddUtilityTabs",AddUtilityTabs.__docgenInfo={description:"",displayName:"AddUtilityTabs",props:{utilities:{defaultValue:null,description:"",name:"utilities",required:!0,type:{name:"IMUtilitiesJson"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(utilities: IMUtilitiesJson) => void"}},onBatchDone:{defaultValue:null,description:"",name:"onBatchDone",required:!1,type:{name:"() => void"}},onBatchUpdate:{defaultValue:null,description:"",name:"onBatchUpdate",required:!1,type:{name:"(utilityJsons: ImmutableArray<IMUtilityJson>) => void"}},immediate:{defaultValue:null,description:"",name:"immediate",required:!1,type:{name:"boolean"}},batchUtilityJsons:{defaultValue:null,description:"",name:"batchUtilityJsons",required:!1,type:{name:"ImmutableArray<IMUtilityJson>"}},isMultiple:{defaultValue:null,description:"",name:"isMultiple",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/utility-selector.tsx#AddUtilityTabs"]={docgenInfo:AddUtilityTabs.__docgenInfo,name:"AddUtilityTabs",path:"../jimu-ui/advanced/utility-selector.tsx#AddUtilityTabs"})}catch(__react_docgen_typescript_loader_error){}try{UtilityIcon.displayName="UtilityIcon",UtilityIcon.__docgenInfo={description:"",displayName:"UtilityIcon",props:{type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"GEOENRICH"'},{value:'"GEOMETRY"'},{value:'"GEOCODING"'},{value:'"PRINTING"'},{value:'"ROUTING"'},{value:'"GPSERVER"'},{value:'"GPTask"'}]}},children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/utility-selector.tsx#UtilityIcon"]={docgenInfo:UtilityIcon.__docgenInfo,name:"UtilityIcon",path:"../jimu-ui/advanced/utility-selector.tsx#UtilityIcon"})}catch(__react_docgen_typescript_loader_error){}try{selectUtilitySVG.displayName="selectUtilitySVG",selectUtilitySVG.__docgenInfo={description:"",displayName:"selectUtilitySVG",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/utility-selector.tsx#selectUtilitySVG"]={docgenInfo:selectUtilitySVG.__docgenInfo,name:"selectUtilitySVG",path:"../jimu-ui/advanced/utility-selector.tsx#selectUtilitySVG"})}catch(__react_docgen_typescript_loader_error){}var UrlCheckResultType,geocode_utils_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};!function(UrlCheckResultType){UrlCheckResultType.Pass="Pass",UrlCheckResultType.NotHttps="Not_Https",UrlCheckResultType.InvalidURL="Invalid_URL"}(UrlCheckResultType||(UrlCheckResultType={}));const getGeocodeName=geocodeUrl=>{if(!geocodeUrl)return"geocoder";const strings=geocodeUrl.split("/");return strings[strings.length-2]||"geocoder"},isArcGISWorldGeocoder=url=>!!url&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(url);function getNewDataConfigByUtility(options){return geocode_utils_awaiter(this,void 0,void 0,(function*(){const{useUtility}=options,geocodeURL=(null==options?void 0:options.geocodeURL)||(yield getUrlOfUseUtility(useUtility));return validateGeocodeService(geocodeURL).then((urlCheckResult=>{if((null==urlCheckResult?void 0:urlCheckResult.urlCheckResultType)!==UrlCheckResultType.Pass)return Promise.resolve({urlCheckResult});{const fields=urlCheckResult.addressFields.concat(urlCheckResult.candidateFields),newDataSourceConfigOption=Object.assign(Object.assign({},options),{urlCheckResult,fields}),newDataSourceConfig=getNewDataConfigWithNewGeocode(newDataSourceConfigOption);return Promise.resolve({urlCheckResult,dataSourceConfig:newDataSourceConfig})}}))}))}const getNewDataConfigWithNewGeocode=option=>{const{urlCheckResult,useUtility,fields,datasourceConfig,configId,viewId,createOutputDs,id,dataSourceConfigItem,geocodeURL,notAddNewUtility}=option,{singleLineFieldName,spatialReference,isSupportSuggest}=urlCheckResult,configIdList=util_getConfigIdList(null==datasourceConfig?void 0:datasourceConfig.asMutable({deep:!0})),nextDsConfigId=configId||util_getNewConfigId(configIdList,viewId);let newDataSourceConfig=datasourceConfig?datasourceConfig.asMutable({deep:!0}):[];const label=getLabelOfUseUtility(useUtility,geocodeURL),defaultHint=getDefaultHintOfUseUtility(useUtility,geocodeURL),{addressFieldsSchema,defaultAddressFieldName}=util_getAddressFieldsSchemaAndDefaultFieldName(fields),initDsConfigItem={configId:nextDsConfigId,icon:null,label,hint:defaultHint,useUtility,searchServiceType:SearchServiceType.GeocodeService,singleLineFieldName,isSupportSuggest,spatialReference};return notAddNewUtility&&(initDsConfigItem.geocodeURL=geocodeURL),createOutputDs&&(initDsConfigItem.outputDataSourceId=`${id}_output_${nextDsConfigId}`,initDsConfigItem.addressFields=addressFieldsSchema,initDsConfigItem.displayFields=getDefaultDisplayField(addressFieldsSchema,defaultAddressFieldName),initDsConfigItem.defaultAddressFieldName=defaultAddressFieldName),(null==dataSourceConfigItem?void 0:dataSourceConfigItem.configId)?newDataSourceConfig=datasourceConfig.map((el=>(null==el?void 0:el.configId)===nextDsConfigId?initDsConfigItem:el)):newDataSourceConfig.push(initDsConfigItem),newDataSourceConfig},getDefaultDisplayField=(addressFieldsSchema,defaultAddressFieldName)=>{let addressSchema;return null==addressFieldsSchema||addressFieldsSchema.forEach((field=>{var _a;(null===(_a=null==field?void 0:field.jimuName)||void 0===_a?void 0:_a.toLocaleLowerCase())===defaultAddressFieldName&&(addressSchema=field)})),addressSchema||(addressSchema=addressFieldsSchema[0]),[addressSchema]},getLabelOfUseUtility=(useUtility,geocodeURL)=>{if(null==useUtility?void 0:useUtility.utilityId)return jimu_core.IOh.getInstance().getLabelOfUseUtility(useUtility);if(geocodeURL){const item=getGeocodeServiceInfoByUrl(geocodeURL);return null==item?void 0:item.name}},getDefaultHintOfUseUtility=(useUtility,geocodeURL)=>{var _a;if(null==useUtility?void 0:useUtility.utilityId){const utilityJson=jimu_core.IOh.getInstance().getUtilityJson(useUtility.utilityId);return null===(_a=null==utilityJson?void 0:utilityJson.orgSetting)||void 0===_a?void 0:_a.placeholder}if(geocodeURL){const item=getGeocodeServiceInfoByUrl(geocodeURL);return null==item?void 0:item.placeholder}},getGeocodeServiceInfoByUrl=geocodeURL=>{var _a;const helperServices=null===(_a=(0,jimu_core.Vp3)().getState().portalSelf)||void 0===_a?void 0:_a.helperServices;return((null==helperServices?void 0:helperServices.geocode)||[]).filter((geocode=>(null==geocode?void 0:geocode.url)===geocodeURL))[0]},getUrlOfUseUtility=useUtility=>geocode_utils_awaiter(void 0,void 0,void 0,(function*(){return jimu_core.IOh.getInstance().getUrlOfUseUtility(useUtility).then((url=>Promise.resolve(url)),(err=>Promise.reject(new Error(err))))})),validateGeocodeService=geocodeServiceUrl=>geocode_utils_awaiter(void 0,void 0,void 0,(function*(){const urlRegExString=new RegExp("^(([h][t]{2}[p][s])?://)");if(!geocodeServiceUrl||!urlRegExString.test(geocodeServiceUrl))return Promise.resolve({urlCheckResultType:UrlCheckResultType.NotHttps});try{return(0,jimu_core.e$n)(["esri/request"]).then((modules=>{const[esriRequest]=modules;return esriRequest(geocodeServiceUrl,{query:{f:"json"},responseType:"json"}).then((res=>{var _a;const result=(null==res?void 0:res.data)||{};if(null==result?void 0:result.capabilities){const singleLineAddressField=(null==result?void 0:result.singleLineAddressField)||{},addressFields=(null==result?void 0:result.addressFields)||[],spatialReference=(null==result?void 0:result.spatialReference)||null,candidateFields=(null==result?void 0:result.candidateFields)||[],capabilitiesArr=(null===(_a=null==result?void 0:result.capabilities)||void 0===_a?void 0:_a.split(","))||[],isSupportSuggest=null==capabilitiesArr?void 0:capabilitiesArr.includes("Suggest");return Promise.resolve({urlCheckResultType:UrlCheckResultType.Pass,singleLineFieldName:null==singleLineAddressField?void 0:singleLineAddressField.name,addressFields,isSupportSuggest,candidateFields,spatialReference})}return Promise.resolve({urlCheckResultType:UrlCheckResultType.InvalidURL})}),(err=>Promise.resolve({urlCheckResultType:UrlCheckResultType.InvalidURL})))}))}catch(e){return Promise.resolve({urlCheckResultType:UrlCheckResultType.InvalidURL})}}));function geocode_utils_getDefaultGeocodeConfig(option){return geocode_utils_awaiter(this,void 0,void 0,(function*(){var _a,_b;const{nls,isSingle,createOutputDs,id,viewId,notAddNewUtility}=option,utilities=(null===(_b=null===(_a=function getAllGeocodeUtility(nls){var _a;return extractService(null===(_a=(0,jimu_core.Vp3)().getState().portalSelf)||void 0===_a?void 0:_a.helperServices,jimu_core.JXK.GeoCoding,null,null,nls)}(nls))||void 0===_a?void 0:_a[0])||void 0===_b?void 0:_b.children)||[];if(isSingle){const options={utility:utilities[0],id,createOutputDs,viewId,notAddNewUtility,index:0},defaultGeocodeItems=yield getDefaultGeocodeItem(options);return Promise.resolve(defaultGeocodeItems?[defaultGeocodeItems]:[])}{const getDefaultGeocodeItemPromise=null==utilities?void 0:utilities.map(((utility,index)=>getDefaultGeocodeItem({utility,id,createOutputDs,viewId:DEFAULT_GEOCODE_KEY,notAddNewUtility,index}))),getDefaultGeocodeItems=yield Promise.all(getDefaultGeocodeItemPromise),defaultGeocodeConfig=null==getDefaultGeocodeItems?void 0:getDefaultGeocodeItems.filter((item=>!!item));return Promise.resolve(defaultGeocodeConfig)}}))}function getDefaultGeocodeItem(options){return geocode_utils_awaiter(this,void 0,void 0,(function*(){const{utility,id,createOutputDs,viewId,notAddNewUtility,index}=options;if(!utility)return Promise.resolve(null);let uid=jimu_core.IOh.getInstance().getIdOfOrgUtility(utility.name,utility.url,utility.index,utility.label);uid||notAddNewUtility||(uid=org_utility_addNewUtility(utility));const viewIdWithUid=viewId?`${viewId}_${uid||index}`:`${DEFAULT_GEOCODE_KEY}_${uid||index}`,viewIdWithIndex=viewId?`${viewId}_${utility.index}`:`${DEFAULT_GEOCODE_KEY}_${utility.index}`;return getNewDataConfigByUtility({id,createOutputDs,dataSourceConfigItem:null,viewId:notAddNewUtility?viewIdWithIndex:viewIdWithUid,configId:null,datasourceConfig:null,useUtility:{utilityId:uid},geocodeURL:utility.url,notAddNewUtility}).then((res=>{var _a,_b;return(null===(_a=res.urlCheckResult)||void 0===_a?void 0:_a.urlCheckResultType)===UrlCheckResultType.Pass&&(null===(_b=res.dataSourceConfig)||void 0===_b?void 0:_b.length)>0?Promise.resolve(res.dataSourceConfig[0]):Promise.resolve(null)}))}))}const ObjectIdSchema={jimuName:OutputDsObjectField,alias:"OBJECTID",type:jimu_core.Eo3.Number,name:OutputDsObjectField},util_getInitSchema=(label="",addressFields=[])=>{const fields={};return null==addressFields||addressFields.forEach(((fieldSchema,index)=>{fields[null==fieldSchema?void 0:fieldSchema.jimuName]=fieldSchema,0===index&&(fields[OutputDsObjectField]=ObjectIdSchema)})),{label,idField:OutputDsObjectField,fields}},getNameOfDefaultAddressField=(fields,nameIndex=0)=>{let name=DefaultAddress;return null==fields||fields.forEach((field=>{name=nameIndex?`${name}${nameIndex}`:name,field.jimuName===name&&(name=getNameOfDefaultAddressField(fields,nameIndex+=1))})),name},util_getAddressFieldsSchemaAndDefaultFieldName=(addressFields=[])=>{const addressFieldSchema=null==addressFields?void 0:addressFields.map((field=>({jimuName:null==field?void 0:field.name,alias:null==field?void 0:field.alias,type:jimu_core.Eo3.String,name:null==field?void 0:field.name}))),defaultAddressFieldName=getNameOfDefaultAddressField(addressFieldSchema,0),DefaultAddressSchema={jimuName:defaultAddressFieldName,alias:DefaultAddressAlias,type:jimu_core.Eo3.String,name:defaultAddressFieldName};return addressFieldSchema.unshift(DefaultAddressSchema),{addressFieldsSchema:addressFieldSchema,defaultAddressFieldName}},util_getInitOutDataSource=(widgetId,configId,geocodeUrl,label)=>{const dsLabel=label||(geocodeUrl=>isArcGISWorldGeocoder(geocodeUrl)?DefaultGeocodeLabel:getGeocodeName(geocodeUrl))(geocodeUrl),dsId=getOutputDataSourceId(configId,widgetId),schema=util_getInitSchema(label);return{id:dsId,type:jimu_core.hg5.FeatureLayer,label:dsLabel,originDataSources:[],isOutputFromWidget:!0,isDataInDataSourceInstance:!1,schema,geometryType:"esriGeometryPoint"}},util_getOutputJsonOriginDs=ds=>ds?ds.type===jimu_core.hg5.SceneLayer?ds.getAssociatedDataSource():ds:null,getWhetherDsInUseDataSources=(ds,useDataSources)=>!(!ds||!useDataSources)&&useDataSources.some((u=>u.dataSourceId===ds.dataSourceId)),isDsInDataSources=(dataSource,dataSources)=>{var _a;return(null===(_a=dataSources.filter((ds=>(null==ds?void 0:ds.dataSourceId)===(null==dataSource?void 0:dataSource.dataSourceId))))||void 0===_a?void 0:_a.length)>0},checkIsUseDsChanged=(dataSource,preDataSources)=>{var _a;if((null==dataSource?void 0:dataSource.length)!==(null==preDataSources?void 0:preDataSources.length))return!0;const intersectionDsField=[];if(null==dataSource||dataSource.forEach((ds=>{var _a;const preCommonDs=preDataSources.filter((preDs=>(null==preDs?void 0:preDs.dataSourceId)===(null==ds?void 0:ds.dataSourceId)));(null==preCommonDs?void 0:preCommonDs.length)>0&&intersectionDsField.push({dsFields:null==ds?void 0:ds.fields,preDsFields:null===(_a=preCommonDs[0])||void 0===_a?void 0:_a.fields})})),(null==intersectionDsField?void 0:intersectionDsField.length)!==(null==dataSource?void 0:dataSource.length))return!0;return(null===(_a=null==intersectionDsField?void 0:intersectionDsField.filter((item=>{var _a,_b,_c,_d;const isLengthChange=(null===(_a=null==item?void 0:item.dsFields)||void 0===_a?void 0:_a.length)!==(null===(_b=null==item?void 0:item.preDsFields)||void 0===_b?void 0:_b.length),isFieldItemChange=(null===(_d=null===(_c=null==item?void 0:item.dsFields)||void 0===_c?void 0:_c.filter((field=>{var _a;return!(null===(_a=null==item?void 0:item.preDsFields)||void 0===_a?void 0:_a.includes(field))})))||void 0===_d?void 0:_d.length)>0;return isLengthChange||isFieldItemChange})))||void 0===_a?void 0:_a.length)>0},util_checkIsWidgetJsonDsChanged=(widgetJson,useDataSource,outputDataSource)=>{var _a,_b,_c;const widgetJsonUseDs=(null===(_a=null==widgetJson?void 0:widgetJson.useDataSources)||void 0===_a?void 0:_a.asMutable({deep:!0}))||[],widgetJsonOutputUseDs=(null===(_b=null==widgetJson?void 0:widgetJson.outputDataSources)||void 0===_b?void 0:_b.asMutable({deep:!0}))||[];if((null==widgetJsonUseDs?void 0:widgetJsonUseDs.length)!==(null==useDataSource?void 0:useDataSource.length)||(null==widgetJsonOutputUseDs?void 0:widgetJsonOutputUseDs.length)!==(null==outputDataSource?void 0:outputDataSource.length))return!0;const isUseDsChanged=checkIsUseDsChanged(useDataSource,widgetJsonUseDs),isOutputDsChanged=(null===(_c=widgetJsonOutputUseDs.filter((outputDs=>!(null==outputDataSource?void 0:outputDataSource.includes(outputDs)))))||void 0===_c?void 0:_c.length)>0;return isUseDsChanged||isOutputDsChanged},util_getConfigIdList=dataSourceConfig=>null==dataSourceConfig?void 0:dataSourceConfig.map((item=>item.configId)),util_getNewConfigId=(configIdList,viewId)=>{if(!configIdList||0===(null==configIdList?void 0:configIdList.length))return viewId?`config_${viewId}_0`:"config_0";const maxIndex=getConfigIndexMaxNumber(configIdList);return viewId?`config_${viewId}_${maxIndex+1}`:`config_${maxIndex+1}`},getConfigIndexMaxNumber=configIdList=>{var _a;const idIndexData=null==configIdList?void 0:configIdList.map((id=>{var _a;const currentIndex=null===(_a=null==id?void 0:id.split("_"))||void 0===_a?void 0:_a.pop();return currentIndex?Number(currentIndex):0}));return null===(_a=null==idIndexData?void 0:idIndexData.sort(((a,b)=>b-a)))||void 0===_a?void 0:_a[0]},getOutputDataSourceId=(configId,widgetId)=>{var _a;if(!configId)return`${widgetId}_output_0`;const currentIndex=null===(_a=null==configId?void 0:configId.split("_"))||void 0===_a?void 0:_a.pop();return`${widgetId}_output_${Number(currentIndex)}`},util_getNewDsConfigItem=options=>{var _a;const{datasourceConfig,dsJsonOriginDs,useDataSource,configId,viewId,fieldsInMapSearchProperties,exactMatch,label,searchInCurrentMapExtent}=options,configIdList=util_getConfigIdList(null==datasourceConfig?void 0:datasourceConfig.asMutable({deep:!0})),nextDsConfigId=configId||util_getNewConfigId(configIdList,viewId),queryItemLabel=label||(null==dsJsonOriginDs?void 0:dsJsonOriginDs.getLabel()),defaultField=util_getDefaultField(useDataSource,fieldsInMapSearchProperties);if(configIdList&&configIdList.includes(nextDsConfigId)){const datasourceConfigItem=datasourceConfig.filter((item=>item.configId===nextDsConfigId))[0],preDsId=null===(_a=datasourceConfigItem.useDataSource)||void 0===_a?void 0:_a.dataSourceId,newDsId=useDataSource.dataSourceId;if(preDsId&&newDsId&&jimu_core.ZkX.areDerivedFromSameMain(preDsId,newDsId)){const newDsConfigItem=util_initNewDatasourceConfigByField((0,jimu_core.J3Z)(Object.assign(Object.assign({},datasourceConfigItem),{configId:nextDsConfigId,useDataSource,label:queryItemLabel})));return null==newDsConfigItem?void 0:newDsConfigItem.asMutable({deep:!0})}}useDataSource.fields=null==defaultField?void 0:defaultField.map((field=>null==field?void 0:field.jimuName));return{configId:nextDsConfigId,icon:null,label:queryItemLabel,displayLabel:!0,useDataSource,displayFields:defaultField,searchFields:defaultField,hint:"",searchServiceType:SearchServiceType.FeatureService,searchExact:!!exactMatch,searchInCurrentMapExtent:!!searchInCurrentMapExtent}},util_initNewDatasourceConfigByField=datasourceConfigItem=>{var _a,_b,_c,_d;const searchFieldNameArr=(null===(_b=null===(_a=null==datasourceConfigItem?void 0:datasourceConfigItem.searchFields)||void 0===_a?void 0:_a.asMutable({deep:!0}))||void 0===_b?void 0:_b.map((item=>null==item?void 0:item.jimuName)))||[],displayFieldsNameArr=(null===(_d=null===(_c=null==datasourceConfigItem?void 0:datasourceConfigItem.displayFields)||void 0===_c?void 0:_c.asMutable({deep:!0}))||void 0===_d?void 0:_d.map((item=>null==item?void 0:item.jimuName)))||[],dsFields=Array.from(new Set(searchFieldNameArr.concat(displayFieldsNameArr)));return datasourceConfigItem.setIn(["useDataSource","fields"],dsFields)},util_getNewDataSourceConfig=options=>{const{datasourceConfig,datasourceConfigItem,configId}=options;let newDataSourceConfig=datasourceConfig?datasourceConfig.asMutable({deep:!0}):[];const dsConfigItem=util_getNewDsConfigItem(options);return(null==datasourceConfigItem?void 0:datasourceConfigItem.configId)?newDataSourceConfig=newDataSourceConfig.map((el=>(null==el?void 0:el.configId)===configId?dsConfigItem:el)):newDataSourceConfig.push(dsConfigItem),{dsConfigItem,datasourceConfig:newDataSourceConfig}},util_getDefaultField=(useDataSource,fieldsInMapSearchProperties)=>{var _a,_b,_c,_d,_e;const ds=jimu_core.zAk.getInstance().getDataSource(null==useDataSource?void 0:useDataSource.dataSourceId),displayFieldName=(null==ds?void 0:ds.getLayerDefinition)&&(null===(_a=null==ds?void 0:ds.getLayerDefinition())||void 0===_a?void 0:_a.displayField);let fieldsNamesInMapSearchProperties;(null==fieldsInMapSearchProperties?void 0:fieldsInMapSearchProperties.length)>0&&(fieldsNamesInMapSearchProperties=fieldsInMapSearchProperties.map((item=>null==item?void 0:item.name)));const fields=null===(_b=null==ds?void 0:ds.getSchema())||void 0===_b?void 0:_b.fields;let displayField;const allFieldsData=[];for(const fieldKey in fields)(null===(_c=null==fields?void 0:fields[fieldKey])||void 0===_c?void 0:_c.type)!==jimu_core.Eo3.Date&&allFieldsData.push(null==fields?void 0:fields[fieldKey]),(null===(_d=null==fields?void 0:fields[fieldKey])||void 0===_d?void 0:_d.name)===displayFieldName&&(null===(_e=null==fields?void 0:fields[fieldKey])||void 0===_e?void 0:_e.type)!==jimu_core.Eo3.Date&&displayFieldName&&(displayField=null==fields?void 0:fields[fieldKey]);let defaultFields=[];return fieldsNamesInMapSearchProperties?defaultFields=null==allFieldsData?void 0:allFieldsData.filter((field=>fieldsNamesInMapSearchProperties.includes(field.name))):(null==allFieldsData?void 0:allFieldsData.length)>0&&(defaultFields=(null==allFieldsData?void 0:allFieldsData.length)>1?[(0,jimu_core.J3Z)(allFieldsData[1])]:[(0,jimu_core.J3Z)(allFieldsData[0])]),fieldsNamesInMapSearchProperties&&0===(null==defaultFields?void 0:defaultFields.length)&&(null==allFieldsData?void 0:allFieldsData.length)>0&&(defaultFields=(null==allFieldsData?void 0:allFieldsData.length)>1?[(0,jimu_core.J3Z)(allFieldsData[1])]:[(0,jimu_core.J3Z)(allFieldsData[0])]),fieldsNamesInMapSearchProperties&&(null==defaultFields?void 0:defaultFields.length)>0?defaultFields:displayField?[(0,jimu_core.J3Z)(displayField)]:defaultFields},util_getDsJsonOfOriginDs=useDataSource=>jimu_core.zAk.getInstance().createDataSourceByUseDataSource((0,jimu_core.J3Z)(useDataSource)).then((originDs=>{const dsJsonOriginDs=util_getOutputJsonOriginDs(originDs);return dsJsonOriginDs||Promise.reject(Error("")),dsJsonOriginDs})),util_getAllDsByDataConfigWithMapCentric=dataSourceConfigWithMapCentric=>{const allDataSources={useDataSources:[],outputDataSources:[]};return Object.keys(dataSourceConfigWithMapCentric||{}).forEach((viewId=>{var _a;const dataSourceConfigItem=dataSourceConfigWithMapCentric[viewId],res=util_getAllDataSourceBySearchDataConfig((0,jimu_core.J3Z)((null==dataSourceConfigItem?void 0:dataSourceConfigItem.dataSourceConfig)||[]),!0);null===(_a=res.useDataSources)||void 0===_a||_a.forEach((ds=>{isDsInDataSources(ds,null==allDataSources?void 0:allDataSources.useDataSources)?allDataSources.useDataSources=concatFieldsOFSameUseDataSources(ds,allDataSources.useDataSources):allDataSources.useDataSources.push(ds)})),allDataSources.outputDataSources=allDataSources.outputDataSources.concat(res.outputDataSources)})),allDataSources},util_getAllDataSourceBySearchDataConfig=(datasourceConfig,createOutputDs)=>{var _a;return null===(_a=null==datasourceConfig?void 0:datasourceConfig.asMutable({deep:!0}))||void 0===_a?void 0:_a.reduce(((currentDsMap,dsConfigItem)=>{const useDataSource=null==dsConfigItem?void 0:dsConfigItem.useDataSource;if(useDataSource&&(isDsInDataSources(useDataSource,null==currentDsMap?void 0:currentDsMap.useDataSources)?currentDsMap.useDataSources=concatFieldsOFSameUseDataSources(useDataSource,null==currentDsMap?void 0:currentDsMap.useDataSources):null==currentDsMap||currentDsMap.useDataSources.push(useDataSource)),createOutputDs){const outputDsJson=getOutputDsJson(dsConfigItem);outputDsJson&&currentDsMap.outputDataSources.push(outputDsJson)}return currentDsMap}),{useDataSources:[],outputDataSources:[]})},util_getDsInWidgetJson=(allDataSources,widgetId,createOutputDs)=>{var _a,_b,_c,_d;const state=(0,jimu_core.Vp3)().getState(),widgetsJson=null===(_c=null===(_b=null===(_a=null==state?void 0:state.appStateInBuilder)||void 0===_a?void 0:_a.appConfig)||void 0===_b?void 0:_b.widgets)||void 0===_c?void 0:_c[widgetId],updateWidgetJson={id:widgetId};return updateWidgetJson.useDataSources=null==allDataSources?void 0:allDataSources.useDataSources,createOutputDs&&(updateWidgetJson.outputDataSources=null===(_d=null==allDataSources?void 0:allDataSources.outputDataSources)||void 0===_d?void 0:_d.map((outputDs=>null==outputDs?void 0:outputDs.id))),{dsInWidgetJson:updateWidgetJson,isWidgetJsonDsChanged:util_checkIsWidgetJsonDsChanged(widgetsJson,updateWidgetJson.useDataSources,updateWidgetJson.outputDataSources)}},getOutputDsJson=(dsConfigItem,isOutputFromWidget=!0)=>{let outputDataSourceJson;return(null==dsConfigItem?void 0:dsConfigItem.searchServiceType)===SearchServiceType.GeocodeService&&(outputDataSourceJson={id:null==dsConfigItem?void 0:dsConfigItem.outputDataSourceId,type:jimu_core.hg5.FeatureLayer,label:null==dsConfigItem?void 0:dsConfigItem.label,originDataSources:[],isOutputFromWidget,isDataInDataSourceInstance:!1,schema:util_getInitSchema(null==dsConfigItem?void 0:dsConfigItem.label,null==dsConfigItem?void 0:dsConfigItem.addressFields),geometryType:"esriGeometryPoint"}),outputDataSourceJson};function util_checkIsTableDs(dataSourceId){const ds=jimu_core.zAk.getInstance().getDataSource(dataSourceId);return ds&&ds.supportSpatialInfo&&!ds.supportSpatialInfo()}const concatFieldsOFSameUseDataSources=(useDataSource,currentDsMap)=>currentDsMap.map((ds=>{if((null==useDataSource?void 0:useDataSource.dataSourceId)===(null==ds?void 0:ds.dataSourceId)){const dsFields=(null==useDataSource?void 0:useDataSource.fields)||[],dsFieldsInUseDataSourceMap=(null==ds?void 0:ds.fields)||[],fieldsArray=Array.from(new Set(dsFieldsInUseDataSourceMap.concat(dsFields)));ds.fields=fieldsArray}return ds}));var resource_selector=__webpack_require__("../jimu-ui/advanced/resource-selector.tsx");const display_field_select=props=>{const advancedActionMap={overrideItemBlockInfo:({itemBlockInfo},refComponent)=>({name:list_tree.M5.RenderOverrideItem,children:[{name:list_tree.M5.RenderOverrideItemDroppableContainer,children:[{name:list_tree.M5.RenderOverrideItemDraggableContainer,children:[{name:list_tree.M5.RenderOverrideItemBody,children:[{name:list_tree.M5.RenderOverrideItemMainLine,children:[{name:list_tree.M5.RenderOverrideItemDragHandle},{name:list_tree.M5.RenderOverrideItemIcon,autoCollapsed:!0},{name:list_tree.M5.RenderOverrideItemTitle},{name:list_tree.M5.RenderOverrideItemCommands}]}]}]}]}]})},STYLE=jimu_core.AHW`
    &{
      max-height: 256px;
      overflow-y: auto;
    }
  `,theme=(0,jimu_theme.DP)(),{disPlayField,useDataSource,onFieldChange}=props;return(0,jimu_core.Yac)("div",{className:"w-100"},(0,jimu_core.Yac)(data_source_selector.FieldSelector,{useDataSources:useDataSource?(0,jimu_core.J3Z)([useDataSource]):(0,jimu_core.J3Z)([]),onChange:allSelectedFields=>{onFieldChange(allSelectedFields,disPlayField,!0)},selectedFields:(0,jimu_core.J3Z)(null==disPlayField?void 0:disPlayField.map((field=>null==field?void 0:field.name))),isMultiple:!0,isDataSourceDropDownHidden:!0,useDropdown:!0,useMultiDropdownBottomTools:!0,types:(0,jimu_core.J3Z)([jimu_core.Eo3.Number,jimu_core.Eo3.String])}),(0,jimu_core.Yac)("div",{css:STYLE},(0,jimu_core.Yac)(list_tree.B8,Object.assign({size:"sm",className:"mt-2",itemsJson:Array.from(disPlayField).map(((field,index)=>({itemStateDetailContent:field,itemKey:`${null==field?void 0:field.name}${index}`,itemStateIcon:data_source_selector.dataComponentsUtils.getIconFromFieldType(field.type,theme),itemStateTitle:field.alias||field.jimuName||field.name,itemStateCommands:[]}))),dndEnabled:!0,onUpdateItem:(actionData,refComponent)=>{const{itemJsons}=refComponent.props,[,parentItemJson]=itemJsons,newDisplayField=parentItemJson.map((item=>item.itemStateDetailContent));onFieldChange(newDisplayField,disPlayField,!0)}},advancedActionMap))))};try{displayfieldselect.displayName="displayfieldselect",displayfieldselect.__docgenInfo={description:"",displayName:"displayfieldselect",props:{disPlayField:{defaultValue:null,description:"",name:"disPlayField",required:!0,type:{name:"FieldSchema[]"}},useDataSource:{defaultValue:null,description:"",name:"useDataSource",required:!0,type:{name:"UseDataSource"}},onFieldChange:{defaultValue:null,description:"",name:"onFieldChange",required:!0,type:{name:"(allSelectedFields: IMFieldSchema[], preFields: any, isDisplayField?: boolean) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/search-setting/dataSetting/display-field-select.tsx#displayfieldselect"]={docgenInfo:displayfieldselect.__docgenInfo,name:"displayfieldselect",path:"../jimu-ui/advanced/lib/setting-components/components/search-setting/dataSetting/display-field-select.tsx#displayfieldselect"})}catch(__react_docgen_typescript_loader_error){}const{useEffect,useRef}=jimu_core.q_G,SUPPORTED_TYPES=(0,jimu_core.J3Z)([jimu_core.at.FeatureLayer,jimu_core.at.SceneLayer,jimu_core.at.BuildingComponentSubLayer,jimu_core.at.OrientedImageryLayer,jimu_core.at.ImageryLayer,jimu_core.at.SubtypeGroupLayer,jimu_core.at.SubtypeSublayer]),set_layer_source_side_popper=props=>{var _a;const nls=jimu_core.JLE.useTranslation(jimu_ui.defaultMessages,jimu_core.kgw),focusCloseButtonTimeoutRef=useRef(null),{trigger,isOpen,id,datasourceConfig,dsConfigItemIndex,popperFocusNode,viewId,propsForDataSourceSelector,showSearchInCurrentMapExtentSetting,hideDisplayFieldSetting,toggle,updateConfigForLayerOptions,onSettingChange,dsStatusChange,hideIconSetting,supportedDsTypes,hideDs}=props,datasourceConfigItem=(null==datasourceConfig?void 0:datasourceConfig[dsConfigItemIndex])||(0,jimu_core.J3Z)({}),{configId,label,icon,searchFields,searchExact,displayFields,hint,useDataSource,searchInCurrentMapExtent}=datasourceConfigItem,[datasource,setDataSource]=jimu_core.q_G.useState(null),[newLabel,setNewLabel]=jimu_core.q_G.useState(label);useEffect((()=>{configId&&setNewLabel(label)}),[configId]),useEffect((()=>{configId&&label!==newLabel&&setNewLabel(label)}),[datasourceConfigItem]),useEffect((()=>{isOpen&&(clearTimeout(focusCloseButtonTimeoutRef.current),focusCloseButtonTimeoutRef.current=setTimeout((()=>{const closeButton=document.querySelector(".search-ds-setting-popper .action-close");(0,jimu_core.u02)(closeButton)}),200))}),[isOpen]);const removeDataSource=()=>{const configIdList=util_getConfigIdList(null==datasourceConfig?void 0:datasourceConfig.asMutable({deep:!0})),nextDsConfigId=configId||util_getNewConfigId(configIdList,viewId);let newDataSourceConfig=datasourceConfig?datasourceConfig.asMutable({deep:!0}):[];const dsConfigItem={configId:nextDsConfigId,icon:null,label:"......",displayLabel:!0,useDataSource:null,displayFields:[],searchFields:[],hint:"",searchServiceType:SearchServiceType.FeatureService};newDataSourceConfig=newDataSourceConfig.map((el=>(null==el?void 0:el.configId)===nextDsConfigId?dsConfigItem:el)),updateConfigForLayerOptions((0,jimu_core.J3Z)(newDataSourceConfig))},onFieldChange=(allSelectedFields,preFields,isDisplayField=!1)=>{var _a,_b;if(!allSelectedFields)return;const fieldName=isDisplayField?"displayFields":"searchFields";let filteredFields=filterFields(allSelectedFields);0===(null==filteredFields?void 0:filteredFields.length)&&(filteredFields=null===(_b=null===(_a=(0,jimu_core.J3Z)(preFields))||void 0===_a?void 0:_a.asMutable({deep:!0}))||void 0===_b?void 0:_b.splice(0,1));const newDatasourceConfig=null==datasourceConfig?void 0:datasourceConfig.asMutable({deep:!0});let newDatasourceConfigItem=null==datasourceConfigItem?void 0:datasourceConfigItem.setIn([fieldName],filteredFields);newDatasourceConfigItem=util_initNewDatasourceConfigByField(newDatasourceConfigItem),null==newDatasourceConfig||newDatasourceConfig.splice(dsConfigItemIndex,1,null==newDatasourceConfigItem?void 0:newDatasourceConfigItem.asMutable({deep:!0})),updateConfigForLayerOptions((0,jimu_core.J3Z)(newDatasourceConfig))},filterFields=newTableFields=>null==newTableFields?void 0:newTableFields.filter((item=>(null==item?void 0:item.type)!==(null===jimu_core.Eo3||void 0===jimu_core.Eo3?void 0:jimu_core.Eo3.Date))),onConfigItemChange=(key,value)=>{const newDatasourceConfig=null==datasourceConfig?void 0:datasourceConfig.asMutable({deep:!0}),newDatasourceConfigItem=null==datasourceConfigItem?void 0:datasourceConfigItem.setIn(key,value);null==newDatasourceConfig||newDatasourceConfig.splice(dsConfigItemIndex,1,null==newDatasourceConfigItem?void 0:newDatasourceConfigItem.asMutable({deep:!0})),onSettingChange((0,jimu_core.J3Z)(newDatasourceConfig),null,viewId)},handleCheckboxChange=evt=>{onConfigItemChange(["searchExact"],!searchExact)},handleLabelChange=event=>{var _a;const value=null===(_a=null==event?void 0:event.target)||void 0===_a?void 0:_a.value;setNewLabel(value)},handleLabelAccept=value=>{value?(setNewLabel(null==value?void 0:value.trim()),onConfigItemChange(["label"],null==value?void 0:value.trim())):setNewLabel(label)},handleHintChange=event=>{var _a;const value=null===(_a=null==event?void 0:event.target)||void 0===_a?void 0:_a.value;onConfigItemChange(["hint"],value)},handleSearchInCurrentMapExtentChange=evt=>{onConfigItemChange(["searchInCurrentMapExtent"],!searchInCurrentMapExtent)},useDataSources=(null==datasourceConfigItem?void 0:datasourceConfigItem.useDataSource)?[null===(_a=null==datasourceConfigItem?void 0:datasourceConfigItem.useDataSource)||void 0===_a?void 0:_a.asMutable({deep:!0})]:[];return(0,jimu_core.Yac)(SidePopper,{className:"search-ds-setting-popper",isOpen,position:"right",toggle,trigger,title:nls("setLayerSource"),backToFocusNode:popperFocusNode},(0,jimu_core.Yac)("div",{className:"w-100 h-100",css:jimu_core.AHW`overflow: auto;`},(0,jimu_core.Yac)(section_SettingSection,{style:{paddingTop:0}},(0,jimu_core.Yac)(row_SettingRow,{flow:"wrap",label:nls("data")},(0,jimu_core.Yac)(data_source_selector.DataSourceSelector,{closeDataSourceListOnChange:!0,hideDs,types:supportedDsTypes?(0,jimu_core.J3Z)(supportedDsTypes):SUPPORTED_TYPES,useDataSources:(0,jimu_core.J3Z)(useDataSources),disableRemove:()=>!0,mustUseDataSource:!0,onChange:useDataSources=>{useDataSources&&useDataSources.length>0?1===(null==useDataSources?void 0:useDataSources.length)||configId?(useDataSource=>{util_getDsJsonOfOriginDs(useDataSource).then((dsJsonOriginDs=>{const newDataSourceConfig=util_getNewDataSourceConfig({datasourceConfig,datasourceConfigItem,dsJsonOriginDs,useDataSource,configId});updateConfigForLayerOptions((0,jimu_core.J3Z)(newDataSourceConfig.datasourceConfig))}))})(useDataSources[0]):(useDataSources=>{const getNewDsConfigItemPromiseArr=useDataSources.map((useDataSource=>util_getDsJsonOfOriginDs(useDataSource).then((dsJsonOriginDs=>{const newDsConfigItem=util_getNewDsConfigItem({datasourceConfig,datasourceConfigItem,dsJsonOriginDs,useDataSource,configId:null});return Promise.resolve(newDsConfigItem)}))));Promise.all(getNewDsConfigItemPromiseArr).then((dsConfigItems=>{const newConfigIds=[];dsConfigItems=dsConfigItems.map((item=>{if(null==newConfigIds?void 0:newConfigIds.includes(null==item?void 0:item.configId)){const nextDsConfigId=util_getNewConfigId(newConfigIds,viewId);item.configId=nextDsConfigId}return newConfigIds.push(item.configId),item}));let newDataSourceConfig=datasourceConfig?datasourceConfig.asMutable({deep:!0}):[];newDataSourceConfig=newDataSourceConfig.concat(dsConfigItems),updateConfigForLayerOptions((0,jimu_core.J3Z)(newDataSourceConfig),!0)}))})(useDataSources):removeDataSource()},widgetId:id,isBatched:!0,isMultiple:!configId,disableDataView:null==propsForDataSourceSelector?void 0:propsForDataSourceSelector.disableDataView,fromDsIds:(null==propsForDataSourceSelector?void 0:propsForDataSourceSelector.fromDsIds)?(0,jimu_core.J3Z)(null==propsForDataSourceSelector?void 0:propsForDataSourceSelector.fromDsIds):null,fromRootDsIds:(null==propsForDataSourceSelector?void 0:propsForDataSourceSelector.fromRootDsIds)?(0,jimu_core.J3Z)(null==propsForDataSourceSelector?void 0:propsForDataSourceSelector.fromRootDsIds):null}))),(null==datasourceConfigItem?void 0:datasourceConfigItem.configId)&&datasource&&(0,jimu_core.Yac)("div",null,(0,jimu_core.Yac)(section_SettingSection,null,(0,jimu_core.Yac)(row_SettingRow,{flow:"wrap",label:nls("label")},(0,jimu_core.Yac)(jimu_ui.TextInput,{"aria-label":nls("label"),size:"sm",value:newLabel||"",onAcceptValue:handleLabelAccept,onChange:handleLabelChange,className:"w-100",placeholder:nls("findAddressOrPlace")}))),!hideIconSetting&&(0,jimu_core.Yac)(section_SettingSection,null,(0,jimu_core.Yac)(row_SettingRow,{label:nls("searchIcon")},(0,jimu_core.Yac)(resource_selector.ar,{icon,onChange:icon=>{onConfigItemChange(["icon"],icon)},configurableOption:"none",setButtonUseColor:!1}))),(0,jimu_core.Yac)(section_SettingSection,{title:nls("searchOptions"),role:"group","aria-label":nls("searchOptions")},(0,jimu_core.Yac)(row_SettingRow,{flow:"wrap",label:nls("selectSearchFields"),role:"group","aria-label":nls("selectSearchFields")},(0,jimu_core.Yac)(data_source_selector.FieldSelectorWithFullTextIndex,{useDataSources:useDataSource?(0,jimu_core.J3Z)([useDataSource]):(0,jimu_core.J3Z)([]),onChange:allSelectedFields=>{onFieldChange(allSelectedFields,searchFields)},selectedFields:(0,jimu_core.J3Z)(null==searchFields?void 0:searchFields.map((field=>null==field?void 0:field.name))),isMultiple:!0,isDataSourceDropDownHidden:!0,useDropdown:!0,useMultiDropdownBottomTools:!0,widgetId:id,types:(0,jimu_core.J3Z)([jimu_core.Eo3.Number,jimu_core.Eo3.String])}),(0,jimu_core.Yac)("div",{className:"mt-2","aria-label":nls("exactMatch"),onClick:handleCheckboxChange},(0,jimu_core.Yac)(jimu_ui.Checkbox,{title:nls("exactMatch"),checked:searchExact,className:"mr-2"}),nls("exactMatch"))),!hideDisplayFieldSetting&&(0,jimu_core.Yac)(row_SettingRow,{flow:"wrap",label:nls("displayFields"),role:"group","aria-label":nls("displayFields")},(0,jimu_core.Yac)(display_field_select,{disPlayField:displayFields||[],onFieldChange,useDataSource})),(0,jimu_core.Yac)(row_SettingRow,{flow:"wrap",label:nls("searchHint")},(0,jimu_core.Yac)(jimu_ui.TextInput,{size:"sm",value:hint||"",title:hint||nls("findAddressOrPlace"),"aria-label":nls("searchHint"),onChange:handleHintChange,className:"w-100",placeholder:nls("findAddressOrPlace")})),!(!(null==datasourceConfigItem?void 0:datasourceConfigItem.useDataSource)||!showSearchInCurrentMapExtentSetting)&&!util_checkIsTableDs(datasourceConfigItem.useDataSource.dataSourceId)&&(0,jimu_core.Yac)(row_SettingRow,null,(0,jimu_core.Yac)("div",{className:"mt-2","aria-label":nls("searchInCurrentMapExtent"),onClick:handleSearchInCurrentMapExtentChange},(0,jimu_core.Yac)(jimu_ui.Checkbox,{title:nls("searchInCurrentMapExtent"),checked:!!searchInCurrentMapExtent,className:"mr-2"}),nls("searchInCurrentMapExtent"))))),(null==useDataSources?void 0:useDataSources[0])&&(0,jimu_core.Yac)("div",{className:"waiting-for-database"},(0,jimu_core.Yac)(jimu_core.pjH,{useDataSource:(0,jimu_core.J3Z)(useDataSources[0]),onDataSourceCreated:ds=>{setDataSource(ds),ds&&dsStatusChange(ds.id,!0)},onCreateDataSourceFailed:err=>{if(!(null==datasourceConfigItem?void 0:datasourceConfigItem.useDataSource))return!1;const dsId=datasourceConfigItem.useDataSource.dataSourceId;dsStatusChange(dsId,!1)}}))))};try{setlayersourcesidepopper.displayName="setlayersourcesidepopper",setlayersourcesidepopper.__docgenInfo={description:"",displayName:"setlayersourcesidepopper",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},viewId:{defaultValue:null,description:"",name:"viewId",required:!1,type:{name:"string"}},trigger:{defaultValue:null,description:"",name:"trigger",required:!0,type:{name:"HTMLElement"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},datasourceConfig:{defaultValue:null,description:"",name:"datasourceConfig",required:!0,type:{name:"ImmutableArray<SearchDataConfig>"}},dsConfigItemIndex:{defaultValue:null,description:"",name:"dsConfigItemIndex",required:!0,type:{name:"number"}},toggle:{defaultValue:null,description:"",name:"toggle",required:!0,type:{name:"() => void"}},updateConfigForLayerOptions:{defaultValue:null,description:"",name:"updateConfigForLayerOptions",required:!0,type:{name:"(datasourceConfig: ImmutableArray<SearchDataConfig>, closeSidePopper?: boolean) => void"}},onSettingChange:{defaultValue:null,description:"",name:"onSettingChange",required:!0,type:{name:"(datasourceConfig: ImmutableArray<SearchDataConfig>, dsInWidgetJson?: DSInWidgetJson, viewId?: string) => void"}},useDataSources:{defaultValue:null,description:"",name:"useDataSources",required:!0,type:{name:"ImmutableArray<UseDataSource>"}},popperFocusNode:{defaultValue:null,description:"",name:"popperFocusNode",required:!0,type:{name:"HTMLElement"}},hideIconSetting:{defaultValue:null,description:"",name:"hideIconSetting",required:!0,type:{name:"boolean"}},hideDisplayFieldSetting:{defaultValue:null,description:"",name:"hideDisplayFieldSetting",required:!0,type:{name:"boolean"}},propsForDataSourceSelector:{defaultValue:null,description:"",name:"propsForDataSourceSelector",required:!0,type:{name:"PropsForDataSourceSelector"}},showSearchInCurrentMapExtentSetting:{defaultValue:null,description:"",name:"showSearchInCurrentMapExtentSetting",required:!1,type:{name:"boolean"}},dsStatusChange:{defaultValue:null,description:"",name:"dsStatusChange",required:!0,type:{name:"(dsId: string, isDsCreateSuccess?: boolean) => void"}},supportedDsTypes:{defaultValue:null,description:"",name:"supportedDsTypes",required:!1,type:{name:"DataSourceTypes[]"}},hideDs:{defaultValue:null,description:"",name:"hideDs",required:!1,type:{name:"(dsJson: IMDataSourceJson) => boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/search-setting/dataSetting/set-layer-source-side-popper.tsx#setlayersourcesidepopper"]={docgenInfo:setlayersourcesidepopper.__docgenInfo,name:"setlayersourcesidepopper",path:"../jimu-ui/advanced/lib/setting-components/components/search-setting/dataSetting/set-layer-source-side-popper.tsx#setlayersourcesidepopper"})}catch(__react_docgen_typescript_loader_error){}var help=__webpack_require__("../jimu-icons/outlined/suggested/help.tsx");const{useEffect:set_locator_source_useEffect,useRef:set_locator_source_useRef}=jimu_core.q_G;var set_locator_source_UrlCheckResultType;!function(UrlCheckResultType){UrlCheckResultType.Pass="Pass",UrlCheckResultType.NotHttps="Not_Https",UrlCheckResultType.InvalidURL="Invalid_URL"}(set_locator_source_UrlCheckResultType||(set_locator_source_UrlCheckResultType={}));const supportedUtilityTypes=[jimu_core.JXK.GeoCoding],EsriLocatorRegExp=/http(s)?:\/\/(geocode|geocodedev|geocodeqa)(\.){0,3}\.arcgis\.com\/arcgis\/rest\/services\/World\/GeocodeServer/g,set_locator_source=props=>{const nls=jimu_core.JLE.useTranslation(jimu_ui.defaultMessages,jimu_core.kgw),focusCloseButtonTimeoutRef=set_locator_source_useRef(null),{id,trigger,toggle,isOpen,datasourceConfig,dsConfigItemIndex,popperFocusNode,createOutputDs,viewId,showSearchInCurrentMapExtentSetting,showEnableLocalSearchSetting,onSettingChange,updateConfigForLayerOptions,hideIconSetting}=props,dataSourceConfigItem=(null==datasourceConfig?void 0:datasourceConfig[dsConfigItemIndex])||(0,jimu_core.J3Z)({}),{configId,label,icon,hint,outputDataSourceId,displayFields,searchInCurrentMapExtent,enableLocalSearch}=dataSourceConfigItem,[newLabel,setNewLabel]=jimu_core.q_G.useState(label),[isValidateServiceEnd,setIsValidateServiceEnd]=jimu_core.q_G.useState(!1),[urlCheckResults,setUrlCheckResultType]=jimu_core.q_G.useState(set_locator_source_UrlCheckResultType.Pass),[useUtility,setUseUtility]=jimu_core.q_G.useState(null==dataSourceConfigItem?void 0:dataSourceConfigItem.useUtility),[showLoading,setShowLoading]=jimu_core.q_G.useState(!1),[enableCountryCode,setEnableCountryCode]=jimu_core.q_G.useState(!1),[countryCode,setCountryCode]=jimu_core.q_G.useState(null),[minScale,setMinScale]=jimu_core.q_G.useState(null),[locatorServiceUrl,setLocatorServiceUrl]=jimu_core.q_G.useState(null),[showCountryCode,setShowCountryCode]=jimu_core.q_G.useState(!1);set_locator_source_useEffect((()=>{isOpen&&(clearTimeout(focusCloseButtonTimeoutRef.current),focusCloseButtonTimeoutRef.current=setTimeout((()=>{const closeButton=document.querySelector(".search-locator-setting-popper .action-close");(0,jimu_core.u02)(closeButton)}),200))}),[isOpen]),set_locator_source_useEffect((()=>{isOpen&&(setUrlCheckResultType(set_locator_source_UrlCheckResultType.Pass),setShowLoading(!1),(null==dataSourceConfigItem?void 0:dataSourceConfigItem.useUtility)?(getUrlOfUseUtility(null==dataSourceConfigItem?void 0:dataSourceConfigItem.useUtility).then((url=>{setIsValidateServiceEnd(!1),setLocatorServiceUrl(url),validateGeocodeService(url).then((urlCheckResult=>{setIsValidateServiceEnd(!0),setUrlCheckResultType(null==urlCheckResult?void 0:urlCheckResult.urlCheckResultType)}),(err=>{setIsValidateServiceEnd(!0)}))})),setUseUtility(null==dataSourceConfigItem?void 0:dataSourceConfigItem.useUtility),setNewLabel(null==dataSourceConfigItem?void 0:dataSourceConfigItem.label)):(setUseUtility(null),setNewLabel(DefaultGeocodeLabel)))}),[dsConfigItemIndex,configId,isOpen]),set_locator_source_useEffect((()=>{setNewLabel(null==dataSourceConfigItem?void 0:dataSourceConfigItem.label),setEnableCountryCode(!!(null==dataSourceConfigItem?void 0:dataSourceConfigItem.enableCountryCode)),setCountryCode(null==dataSourceConfigItem?void 0:dataSourceConfigItem.countryCode),setMinScale(null==dataSourceConfigItem?void 0:dataSourceConfigItem.minScale)}),[dataSourceConfigItem]),set_locator_source_useEffect((()=>{setShowCountryCode(EsriLocatorRegExp.test(locatorServiceUrl))}),[locatorServiceUrl]);const onConfigItemChange=(key,value)=>{const newDataSourceConfig=null==datasourceConfig?void 0:datasourceConfig.asMutable({deep:!0}),newDataSourceConfigItem=null==dataSourceConfigItem?void 0:dataSourceConfigItem.setIn(key,value);null==newDataSourceConfig||newDataSourceConfig.splice(dsConfigItemIndex,1,null==newDataSourceConfigItem?void 0:newDataSourceConfigItem.asMutable({deep:!0})),onSettingChange((0,jimu_core.J3Z)(newDataSourceConfig),null,viewId)},handleUtilityChange=utilities=>{const utility=utilities[0];if(setUseUtility(utility||null),utility){setShowLoading(!0);const option={id,createOutputDs,dataSourceConfigItem,viewId,configId,datasourceConfig,useUtility:null==utility?void 0:utility.asMutable({deep:!0})};setIsValidateServiceEnd(!1),getNewDataConfigByUtility(option).then((res=>{setIsValidateServiceEnd(!0),setShowLoading(!1);const{urlCheckResult,dataSourceConfig}=res;(null==urlCheckResult?void 0:urlCheckResult.urlCheckResultType)!==set_locator_source_UrlCheckResultType.Pass?setUseUtility(null):updateConfigForLayerOptions((0,jimu_core.J3Z)(dataSourceConfig))}),(err=>{setIsValidateServiceEnd(!0)}))}else removeUtility()},removeUtility=()=>{const configIdList=util_getConfigIdList(null==datasourceConfig?void 0:datasourceConfig.asMutable({deep:!0})),nextDsConfigId=configId||util_getNewConfigId(configIdList,viewId);let newDataSourceConfig=datasourceConfig?datasourceConfig.asMutable({deep:!0}):[];const initDsConfigItem={configId:nextDsConfigId,icon:null,label:".....",hint:"",useUtility:null,searchServiceType:SearchServiceType.GeocodeService,singleLineFieldName:""};newDataSourceConfig=datasourceConfig.map((el=>(null==el?void 0:el.configId)===nextDsConfigId?initDsConfigItem:el)),updateConfigForLayerOptions((0,jimu_core.J3Z)(newDataSourceConfig))},STYLE=jimu_core.AHW`
    &>div {
      padding: 0!important;
    }
  `,getUseUtility=useUtility=>{var _a;if(!useUtility)return(0,jimu_core.J3Z)([]);const utilities=null===(_a=(0,jimu_core.Vp3)().getState().appStateInBuilder.appConfig)||void 0===_a?void 0:_a.utilities;if(null==utilities?void 0:utilities[useUtility.utilityId])return(0,jimu_core.J3Z)([useUtility]);(0,jimu_core.J3Z)([])},intl=(0,jimu_core.tzW)();return(0,jimu_core.Yac)(SidePopper,{className:"search-locator-setting-popper",isOpen,position:"right",toggle,trigger,title:nls("setLocatorSource"),backToFocusNode:popperFocusNode},(0,jimu_core.Yac)("div",{className:"w-100 h-100",css:jimu_core.AHW`overflow: auto;`},(0,jimu_core.Yac)(section_SettingSection,{style:{paddingTop:0}},(0,jimu_core.Yac)(row_SettingRow,{flow:"wrap",label:nls("locatorSource")},(0,jimu_core.Yac)("div",{className:"w-100",css:STYLE},(0,jimu_core.Yac)(utility_selector_UtilitySelector,{useUtilities:getUseUtility(useUtility),onChange:handleUtilityChange,showRemove:!1,types:supportedUtilityTypes,closePopupOnSelect:!0})),urlCheckResults!==set_locator_source_UrlCheckResultType.Pass&&isValidateServiceEnd&&(0,jimu_core.Yac)("div",{className:"d-flex w-100 align-items-center justify-content-between mt-1"},(0,jimu_core.Yac)(jimu_ui.Alert,{form:"basic",type:"warning",className:"w-100",open:!0,withIcon:!0,text:nls("invalidUrlMessage")})))),showLoading&&(0,jimu_core.Yac)(jimu_ui.Loading,{type:jimu_ui.LoadingType.Secondary,width:38,height:38}),urlCheckResults===set_locator_source_UrlCheckResultType.Pass&&configId&&useUtility&&(0,jimu_core.Yac)("div",null,(0,jimu_core.Yac)(section_SettingSection,null,(0,jimu_core.Yac)(row_SettingRow,{flow:"wrap",label:nls("label")},(0,jimu_core.Yac)(jimu_ui.TextInput,{"aria-label":nls("label"),size:"sm",value:newLabel||"",onChange:event=>{var _a;const value=null===(_a=null==event?void 0:event.target)||void 0===_a?void 0:_a.value;setNewLabel(value)},onAcceptValue:value=>{value?(setNewLabel(null==value?void 0:value.trim()),onConfigItemChange(["label"],null==value?void 0:value.trim())):setNewLabel(label)},className:"w-100"}))),!hideIconSetting&&(0,jimu_core.Yac)(section_SettingSection,null,(0,jimu_core.Yac)(row_SettingRow,{label:nls("searchIcon")},(0,jimu_core.Yac)(resource_selector.ar,{icon,onChange:icon=>{onConfigItemChange(["icon"],icon)},configurableOption:"none",setButtonUseColor:!1}))),(0,jimu_core.Yac)(section_SettingSection,{title:nls("searchOptions"),role:"group","aria-label":nls("searchOptions")},outputDataSourceId&&(0,jimu_core.Yac)(row_SettingRow,{flow:"wrap",label:nls("displayFields"),role:"group","aria-label":nls("displayFields")},(0,jimu_core.Yac)(display_field_select,{disPlayField:displayFields||[],onFieldChange:(allSelectedFields,preFields,isDisplayField=!1)=>{var _a,_b;if(!allSelectedFields)return;0===(null==allSelectedFields?void 0:allSelectedFields.length)&&(allSelectedFields=null===(_b=null===(_a=(0,jimu_core.J3Z)(preFields))||void 0===_a?void 0:_a.asMutable({deep:!0}))||void 0===_b?void 0:_b.splice(0,1));const newDataSourceConfig=null==datasourceConfig?void 0:datasourceConfig.asMutable({deep:!0}),newDataSourceConfigItem=null==dataSourceConfigItem?void 0:dataSourceConfigItem.setIn(["displayFields"],allSelectedFields);null==newDataSourceConfig||newDataSourceConfig.splice(dsConfigItemIndex,1,null==newDataSourceConfigItem?void 0:newDataSourceConfigItem.asMutable({deep:!0})),updateConfigForLayerOptions((0,jimu_core.J3Z)(newDataSourceConfig))},useDataSource:{dataSourceId:outputDataSourceId,mainDataSourceId:outputDataSourceId}})),(0,jimu_core.Yac)(row_SettingRow,{flow:"wrap",label:nls("searchHint")},(0,jimu_core.Yac)(jimu_ui.TextInput,{size:"sm","aria-label":nls("searchHint"),title:hint||nls("findAddressOrPlace"),value:hint||"",onChange:event=>{var _a;const value=null===(_a=null==event?void 0:event.target)||void 0===_a?void 0:_a.value;onConfigItemChange(["hint"],value)},className:"w-100",placeholder:nls("findAddressOrPlace")})),showEnableLocalSearchSetting&&(0,jimu_core.Yac)(row_SettingRow,{label:nls("enableLocalSearch")},(0,jimu_core.Yac)(jimu_ui.Switch,{title:nls("enableLocalSearch"),checked:!!enableLocalSearch,onChange:evt=>{const newEnableLocalSearch=!enableLocalSearch,newDataSourceConfig=null==datasourceConfig?void 0:datasourceConfig.asMutable({deep:!0});let newDataSourceConfigItem=null==dataSourceConfigItem?void 0:dataSourceConfigItem.setIn(["enableLocalSearch"],newEnableLocalSearch);newEnableLocalSearch&&(newDataSourceConfigItem=newDataSourceConfigItem.setIn(["minScale"],MIN_SCALE)),null==newDataSourceConfig||newDataSourceConfig.splice(dsConfigItemIndex,1,null==newDataSourceConfigItem?void 0:newDataSourceConfigItem.asMutable({deep:!0})),onSettingChange((0,jimu_core.J3Z)(newDataSourceConfig),null,viewId)}})),showEnableLocalSearchSetting&&!!enableLocalSearch&&(0,jimu_core.Yac)(row_SettingRow,{label:nls("minScale"),flow:"wrap"},(0,jimu_core.Yac)(jimu_ui.NumericInput,{"aria-label":nls("minScale"),size:"sm",value:minScale,showHandlers:!1,onChange:value=>{setMinScale(value)},onAcceptValue:value=>{(value<0||!value)&&(value=MIN_SCALE),setMinScale(value),onConfigItemChange(["minScale"],value)},className:"w-100"})),showCountryCode&&(0,jimu_core.Yac)(row_SettingRow,null,(0,jimu_core.Yac)("div",{className:"d-flex w-100 align-items-center",onClick:()=>{setEnableCountryCode(!enableCountryCode),onConfigItemChange(["enableCountryCode"],!enableCountryCode)}},(0,jimu_core.Yac)(jimu_ui.Checkbox,{className:"mr-2",checked:enableCountryCode}),(0,jimu_core.Yac)("div",null,nls("searchCountryCodeLabel")))),(null==dataSourceConfigItem?void 0:dataSourceConfigItem.enableCountryCode)&&(0,jimu_core.Yac)(row_SettingRow,null,(0,jimu_core.Yac)(jimu_ui.TextInput,{placeholder:nls("searchCountryCodeHint"),"aria-label":nls("label"),size:"sm",value:countryCode||"",onChange:event=>{var _a;const value=null===(_a=null==event?void 0:event.target)||void 0===_a?void 0:_a.value;setCountryCode(value)},onAcceptValue:value=>{setCountryCode(null==value?void 0:value.trim()),onConfigItemChange(["countryCode"],null==value?void 0:value.trim())},className:"w-100",suffix:(0,jimu_core.Yac)(jimu_ui.Button,{disableHoverEffect:!0,disableRipple:!0,type:"tertiary",size:"sm",target:"_blank",icon:!0,href:"https://developers.arcgis.com/rest/geocode/api-reference/geocode-coverage.htm"},(0,jimu_core.Yac)(help.k,{autoFlip:!jimu_core.Ruy.isSameLanguage(null==intl?void 0:intl.locale,"he")}))})),showSearchInCurrentMapExtentSetting&&(0,jimu_core.Yac)(row_SettingRow,null,(0,jimu_core.Yac)("div",{className:"d-flex w-100 align-items-center",onClick:evt=>{onConfigItemChange(["searchInCurrentMapExtent"],!searchInCurrentMapExtent)}},(0,jimu_core.Yac)(jimu_ui.Checkbox,{className:"mr-2",checked:!!searchInCurrentMapExtent}),(0,jimu_core.Yac)("div",null,nls("searchInCurrentMapExtent"))))))))};try{setlocatorsource.displayName="setlocatorsource",setlocatorsource.__docgenInfo={description:"",displayName:"setlocatorsource",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},datasourceConfig:{defaultValue:null,description:"",name:"datasourceConfig",required:!0,type:{name:"ImmutableArray<SearchDataConfig>"}},toggle:{defaultValue:null,description:"",name:"toggle",required:!0,type:{name:"() => void"}},onSettingChange:{defaultValue:null,description:"",name:"onSettingChange",required:!0,type:{name:"(datasourceConfig: ImmutableArray<SearchDataConfig>, dsInWidgetJson?: DSInWidgetJson, viewId?: string) => void"}},updateConfigForLayerOptions:{defaultValue:null,description:"",name:"updateConfigForLayerOptions",required:!0,type:{name:"(datasourceConfig?: ImmutableArray<SearchDataConfig>) => void"}},trigger:{defaultValue:null,description:"",name:"trigger",required:!0,type:{name:"HTMLElement"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},dsConfigItemIndex:{defaultValue:null,description:"",name:"dsConfigItemIndex",required:!0,type:{name:"number"}},useDataSources:{defaultValue:null,description:"",name:"useDataSources",required:!0,type:{name:"ImmutableArray<UseDataSource>"}},popperFocusNode:{defaultValue:null,description:"",name:"popperFocusNode",required:!0,type:{name:"HTMLElement"}},hideIconSetting:{defaultValue:null,description:"",name:"hideIconSetting",required:!0,type:{name:"boolean"}},createOutputDs:{defaultValue:null,description:"",name:"createOutputDs",required:!1,type:{name:"boolean"}},viewId:{defaultValue:null,description:"",name:"viewId",required:!1,type:{name:"string"}},showSearchInCurrentMapExtentSetting:{defaultValue:null,description:"",name:"showSearchInCurrentMapExtentSetting",required:!1,type:{name:"boolean"}},showEnableLocalSearchSetting:{defaultValue:null,description:"",name:"showEnableLocalSearchSetting",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/search-setting/dataSetting/set-locator-source.tsx#setlocatorsource"]={docgenInfo:setlocatorsource.__docgenInfo,name:"setlocatorsource",path:"../jimu-ui/advanced/lib/setting-components/components/search-setting/dataSetting/set-locator-source.tsx#setlocatorsource"})}catch(__react_docgen_typescript_loader_error){}var datasource_list_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};const{useState:datasource_list_useState,useRef:datasource_list_useRef}=jimu_core.q_G,IconClose=__webpack_require__("../jimu-icons/svg/outlined/editor/close.svg"),datasource_list_STYLE=jimu_core.AHW`
  .warning-alert-con {
    padding: 0 !important;
  }
  .warning-alert-con .jimu-icon-component {
    color: var(--sys-color-warning-light) !important;
  }
  .setting-ui-unit-list-new {
    margin-top: 4px;
  }
`,datasource_list=props=>{const nls=jimu_core.JLE.useTranslation(jimu_core.kgw,jimu_ui.defaultMessages),isLoadDatasourceSelector=datasource_list_useRef(!1),dataComponentsUtilsRef=datasource_list_useRef(null),utilityAvailableStateRef=datasource_list_useRef(null),DataSourceRemoveWaringReasonRef=datasource_list_useRef(null),{className,datasourceConfig,useDataSources,dsConfigItemIndex,createOutputDs,showSourcePanel,showNewSourceItem,id,dataSourceCreateStatus,onDsConfigIdChange,updateConfigForLayerOptions,hideSidePopper}=props,widgetsJson=jimu_core.E_S.useSelector((state=>{var _a,_b,_c;return null===(_c=null===(_b=null===(_a=null==state?void 0:state.appStateInBuilder)||void 0===_a?void 0:_a.appConfig)||void 0===_b?void 0:_b.widgets)||void 0===_c?void 0:_c[id]})),widgets=jimu_core.E_S.useSelector((state=>{var _a,_b;return null===(_b=null===(_a=null==state?void 0:state.appStateInBuilder)||void 0===_a?void 0:_a.appConfig)||void 0===_b?void 0:_b.widgets})),AdvancedActionMap={overrideItemBlockInfo:({itemBlockInfo},refComponent)=>({name:list_tree.M5.RenderOverrideItem,children:[{name:list_tree.M5.RenderOverrideItemDroppableContainer,children:[{name:list_tree.M5.RenderOverrideItemDraggableContainer,children:[{name:list_tree.M5.RenderOverrideItemBody,children:[{name:list_tree.M5.RenderOverrideItemMainLine,children:[{name:list_tree.M5.RenderOverrideItemDragHandle},{name:list_tree.M5.RenderOverrideItemIcon,autoCollapsed:!0},{name:list_tree.M5.RenderOverrideItemTitle},{name:list_tree.M5.RenderOverrideItemDetailToggle},{name:list_tree.M5.RenderOverrideItemCommands}]}]}]}]}]})},[dsToRemove,setDsToRemove]=datasource_list_useState(null),[removeDsIndex,setRemoveDsIndex]=datasource_list_useState(null),[showRemoveSearchItemWarning,setShowRemoveSearchItemWarning]=datasource_list_useState(!1),[DataSourceRemoveWarningPopup,setDataSourceRemoveWarningPopup]=datasource_list_useState(null);jimu_core.E_S.useSelector((state=>{var _a,_b;const utilityAvailableState={},utilityStates=(null===(_b=null===(_a=state.appStateInBuilder)||void 0===_a?void 0:_a.appRuntimeInfo)||void 0===_b?void 0:_b.utilityStates)||{};null==datasourceConfig||datasourceConfig.forEach((item=>{(null==item?void 0:item.searchServiceType)===SearchServiceType.GeocodeService&&(utilityAvailableState[item.configId]=((dsConfigItem,utilityStates)=>{var _a,_b;if((null==dsConfigItem?void 0:dsConfigItem.searchServiceType)===SearchServiceType.FeatureService)return null;const utilityId=null===(_a=null==dsConfigItem?void 0:dsConfigItem.useUtility)||void 0===_a?void 0:_a.utilityId;return jimu_core.IOh.getInstance().utilityHasSignInError(utilityId)?nls("signInErrorDefault"):!1===(null===(_b=null==utilityStates?void 0:utilityStates[utilityId])||void 0===_b?void 0:_b.success)?nls("utilityNotAvailable"):null})(null==item?void 0:item.asMutable({deep:!0}),utilityStates))})),utilityAvailableStateRef.current=utilityAvailableState}));const beforeRemovingDataSource=jimu_core.JLE.useEventCallback((()=>{const newDatasourceConfig=null==datasourceConfig?void 0:datasourceConfig.asMutable({deep:!0});null==newDatasourceConfig||newDatasourceConfig.splice(removeDsIndex,1),updateConfigForLayerOptions((0,jimu_core.J3Z)(newDatasourceConfig)),hideSidePopper()})),onRemoveLayerButtonClick=dsIndex=>{var _a;(null===(_a=datasourceConfig[dsIndex])||void 0===_a?void 0:_a.searchServiceType)===SearchServiceType.GeocodeService?isLoadDatasourceSelector.current?removeOutputDs(dsIndex):datasource_list_awaiter(void 0,void 0,void 0,(function*(){return!isLoadDatasourceSelector.current&&Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"../jimu-ui/advanced/data-source-selector.tsx")).then((module=>(isLoadDatasourceSelector.current=!0,dataComponentsUtilsRef.current=module.dataComponentsUtils,DataSourceRemoveWaringReasonRef.current=module.DataSourceRemoveWaringReason,setDataSourceRemoveWarningPopup(module.DataSourceRemoveWarningPopup),Promise.resolve(!0))))})).then((()=>{removeOutputDs(dsIndex)})):removeDsItem(dsIndex)},removeOutputDs=jimu_core.JLE.useEventCallback((dsIndex=>{const outputDataSourceId=datasourceConfig[dsIndex].outputDataSourceId;0===dataComponentsUtilsRef.current.getWidgetsUsingDsOrItsDescendantDss(outputDataSourceId,widgets).length?removeDsItem(dsIndex):(setDsToRemove(outputDataSourceId),setShowRemoveSearchItemWarning(!0),setRemoveDsIndex(dsIndex))})),removeDsItem=dsIndex=>{const newDatasourceConfig=null==datasourceConfig?void 0:datasourceConfig.asMutable({deep:!0});null==newDatasourceConfig||newDatasourceConfig.splice(dsIndex,1),updateConfigForLayerOptions((0,jimu_core.J3Z)(newDatasourceConfig)),hideSidePopper()},checkISOrderChange=jimu_core.JLE.useEventCallback((newDatasourceConfig=>{const preConfigIds=(null==datasourceConfig?void 0:datasourceConfig.map((item=>null==item?void 0:item.configId)))||[],newConfigIds=(null==newDatasourceConfig?void 0:newDatasourceConfig.map((item=>null==item?void 0:item.configId)))||[];return preConfigIds.join("")!==newConfigIds.join("")}));return(0,jimu_core.Yac)("div",{className:`w-100 mt-2 ${className||""}`,css:datasource_list_STYLE},(0,jimu_core.Yac)(list_tree.B8,Object.assign({className:"w-100",itemsJson:Array.from(datasourceConfig).map(((item,index)=>{var _a;return{itemStateDetailContent:item,itemKey:`${index}`,itemStateChecked:showSourcePanel&&index===dsConfigItemIndex,itemStateTitle:null==item?void 0:item.label,itemStateIcon:{icon:null===(_a=item.icon)||void 0===_a?void 0:_a.svg},itemStateCommands:[{label:nls("deleteOption"),iconProps:()=>({icon:IconClose,size:12}),action:()=>{onRemoveLayerButtonClick(index)}}]}})),dndEnabled:!0,renderOverrideItemDetailToggle:(actionData,refComponent)=>{var _a,_b;const{itemJsons}=refComponent.props,[currentItemJson]=itemJsons,itemStateDetailContent=null==currentItemJson?void 0:currentItemJson.itemStateDetailContent,isGeocodeService=(null==itemStateDetailContent?void 0:itemStateDetailContent.searchServiceType)===SearchServiceType.GeocodeService,dsId=isGeocodeService?null==itemStateDetailContent?void 0:itemStateDetailContent.outputDataSourceId:null===(_a=null==itemStateDetailContent?void 0:itemStateDetailContent.useDataSource)||void 0===_a?void 0:_a.dataSourceId,isDataError=!!createOutputDs&&!((dataSourceId,isOutputDs=!1)=>{let isDataSourceInProps,isDataSourceAccessible=!0;if(isOutputDs){const outputDs=(null==widgetsJson?void 0:widgetsJson.outputDataSources)||[];isDataSourceInProps=(null==outputDs?void 0:outputDs.filter((dsId=>dataSourceId===dsId)).length)>0}else isDataSourceInProps=(null==useDataSources?void 0:useDataSources.filter((useDs=>dataSourceId===useDs.dataSourceId)).length)>0;return"boolean"!=typeof(null==dataSourceCreateStatus?void 0:dataSourceCreateStatus[dataSourceId])||(null==dataSourceCreateStatus?void 0:dataSourceCreateStatus[dataSourceId])||(isDataSourceAccessible=!1),isDataSourceInProps&&dataSourceId&&isDataSourceAccessible})(dsId,isGeocodeService),utilityAvailableText=null===(_b=utilityAvailableStateRef.current)||void 0===_b?void 0:_b[itemStateDetailContent.configId];return isGeocodeService&&utilityAvailableText?(0,jimu_core.Yac)(jimu_ui.Alert,{className:"warning-alert-con",variant:"text",form:"tooltip",size:"small",type:"warning",text:utilityAvailableText}):isDataError&&dsId?(0,jimu_core.Yac)(jimu_ui.Alert,{variant:"text",form:"tooltip",size:"small",type:"error",text:nls("dataSourceCreateError")}):""},onUpdateItem:(actionData,refComponent)=>{const{itemJsons}=refComponent.props,[,parentItemJson]=itemJsons,newDatasourceConfig=parentItemJson.map((item=>item.itemStateDetailContent));onDsConfigIdChange(null),checkISOrderChange(newDatasourceConfig)&&updateConfigForLayerOptions((0,jimu_core.J3Z)(newDatasourceConfig))},onClickItemBody:(actionData,refComponent)=>{var _a;const{itemJsons:[currentItemJson]}=refComponent.props,isGeocodeSource=(null===(_a=null==currentItemJson?void 0:currentItemJson.itemStateDetailContent)||void 0===_a?void 0:_a.searchServiceType)===SearchServiceType.GeocodeService;onDsConfigIdChange(+currentItemJson.itemKey,isGeocodeSource)}},AdvancedActionMap)),showNewSourceItem&&(0,jimu_core.Yac)(list_tree.B8,Object.assign({className:"setting-ui-unit-list-new",itemsJson:[{name:"......"}].map(((item,x)=>({itemStateDetailContent:"item",itemKey:"index",itemStateChecked:!0,itemStateTitle:"......",itemStateCommands:[]}))),dndEnabled:!1,renderOverrideItemDetailToggle:()=>""},AdvancedActionMap)),DataSourceRemoveWarningPopup&&(0,jimu_core.Yac)(DataSourceRemoveWarningPopup,{dataSourceId:dsToRemove,isOpen:showRemoveSearchItemWarning,toggle:()=>{setShowRemoveSearchItemWarning(!showRemoveSearchItemWarning)},reason:DataSourceRemoveWaringReasonRef.current.DataSourceRemoved,afterRemove:()=>{setDsToRemove(null),setRemoveDsIndex(null),setShowRemoveSearchItemWarning(!1)},beforeRemove:beforeRemovingDataSource}))};try{datasourcelist.displayName="datasourcelist",datasourcelist.__docgenInfo={description:"",displayName:"datasourcelist",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},showSourcePanel:{defaultValue:null,description:"",name:"showSourcePanel",required:!0,type:{name:"boolean"}},showNewSourceItem:{defaultValue:null,description:"",name:"showNewSourceItem",required:!0,type:{name:"boolean"}},dsConfigItemIndex:{defaultValue:null,description:"",name:"dsConfigItemIndex",required:!0,type:{name:"number"}},datasourceConfig:{defaultValue:null,description:"",name:"datasourceConfig",required:!0,type:{name:"ImmutableArray<SearchDataConfig>"}},useDataSources:{defaultValue:null,description:"",name:"useDataSources",required:!0,type:{name:"ImmutableArray<UseDataSource>"}},createOutputDs:{defaultValue:null,description:"",name:"createOutputDs",required:!0,type:{name:"boolean"}},dataSourceCreateStatus:{defaultValue:null,description:"",name:"dataSourceCreateStatus",required:!0,type:{name:"IMDataSourceCreateStatus"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onDsConfigIdChange:{defaultValue:null,description:"",name:"onDsConfigIdChange",required:!0,type:{name:"(configItemIndex: number, isGeocodeSource?: boolean) => void"}},updateConfigForLayerOptions:{defaultValue:null,description:"",name:"updateConfigForLayerOptions",required:!0,type:{name:"(datasourceConfig: ImmutableArray<SearchDataConfig>) => void"}},hideSidePopper:{defaultValue:null,description:"",name:"hideSidePopper",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/search-setting/dataSetting/datasource-list.tsx#datasourcelist"]={docgenInfo:datasourcelist.__docgenInfo,name:"datasourcelist",path:"../jimu-ui/advanced/lib/setting-components/components/search-setting/dataSetting/datasource-list.tsx#datasourcelist"})}catch(__react_docgen_typescript_loader_error){}const{useSelector}=jimu_core.E_S,{useRef:dataSetting_useRef,useEffect:dataSetting_useEffect}=jimu_core.q_G,dataSetting_SearchDataSetting=props=>{var _a,_b,_c,_d;const nls=jimu_core.JLE.useTranslation(jimu_ui.defaultMessages,jimu_core.kgw),appTheme=(0,jimu_theme.DP)(),{datasourceConfig,id,useDataSources,searchDataSettingType,showSearchInCurrentMapExtentSetting,createOutputDs,hideIconSetting,hideDisplayFieldSetting,enableFiltering,viewId,hideEnableFiltering,showEnableLocalSearchSetting,hideTitleOfNewSearchSource,propsForDataSourceSelector,autoSelectSingleGeocodeService,autoSelectAllOrgGeocodeService,onSettingChange,onOutputDsSettingChange,onEnableFilteringChange,supportedDsTypes,hideDs}=props,sourceListRef=dataSetting_useRef(null),sidePopperTrigger=dataSetting_useRef(null),loadingDefaultGeocodeServiceRef=dataSetting_useRef(!1),datasourceConfigRef=dataSetting_useRef(null),defaultGeocodeConfigRef=dataSetting_useRef(null),[open,setOpen]=jimu_core.q_G.useState(!1),[showLayerSourcePanel,setShowLayerSourcePanel]=jimu_core.q_G.useState(!1),[showLocatorSourcePanel,setShowLocatorSourcePanel]=jimu_core.q_G.useState(!1),[showNewSourceItem,setShowNewSourceItem]=jimu_core.q_G.useState(!1),[dsConfigItemIndex,setDsConfigItemIndex]=jimu_core.q_G.useState(null),[popperFocusNode,setPopperFocusNode]=jimu_core.q_G.useState(null),[dsCreateStatus,setDsCreateStatus]=jimu_core.q_G.useState((0,jimu_core.J3Z)({})),[showLoading,setShowLoading]=jimu_core.q_G.useState(!1),widgetsJson=useSelector((state=>{var _a,_b,_c;return null===(_c=null===(_b=null===(_a=null==state?void 0:state.appStateInBuilder)||void 0===_a?void 0:_a.appConfig)||void 0===_b?void 0:_b.widgets)||void 0===_c?void 0:_c[id]})),utilitiesInConfig=useSelector((state=>state.appStateInBuilder.appConfig.utilities)),DropDownStyle=jimu_core.AHW`
    & {
      background-color: ${null===(_b=null===(_a=null==appTheme?void 0:appTheme.sys.color)||void 0===_a?void 0:_a.secondary)||void 0===_b?void 0:_b.main};
    }
  `,STYLE=jimu_core.AHW`
    .data-remind {
      color: ${null===(_d=null===(_c=null==appTheme?void 0:appTheme.ref.palette)||void 0===_c?void 0:_c.neutral)||void 0===_d?void 0:_d[1e3]};
      font-size: ${jimu_core.PLL.rem(12)};
    }
    .loading-con {
      height: 80px;
    }
  `;dataSetting_useEffect((()=>{datasourceConfigRef.current=null==datasourceConfig?void 0:datasourceConfig.asMutable({deep:!0}),createOutputDs&&checkAndInitOutputDs()}),[datasourceConfig]),dataSetting_useEffect((()=>{const autoSelectGeocodeUtility=(autoSelectAllOrgGeocodeService||autoSelectSingleGeocodeService)&&!defaultGeocodeConfigRef.current&&!loadingDefaultGeocodeServiceRef.current&&!datasourceConfig,currentDataSourceConfig=datasourceConfigRef.current||[];if(autoSelectGeocodeUtility){const option={nls,id,createOutputDs,viewId,isSingle:autoSelectSingleGeocodeService};loadingDefaultGeocodeServiceRef.current=!0,setShowLoading(!0),geocode_utils_getDefaultGeocodeConfig(option).then((res=>{if(loadingDefaultGeocodeServiceRef.current=!1,defaultGeocodeConfigRef.current=res,setShowLoading(!1),res){let newDataSourceConfig=currentDataSourceConfig;newDataSourceConfig=null==res?void 0:res.concat(newDataSourceConfig),updateConfigForLayerOptions((0,jimu_core.J3Z)(newDataSourceConfig))}}),(err=>{setShowLoading(!1),loadingDefaultGeocodeServiceRef.current=!1}))}}),[autoSelectAllOrgGeocodeService,autoSelectSingleGeocodeService]),dataSetting_useEffect((()=>{deleteSearchTemplateWhenUtilityNotExist(utilitiesInConfig)}),[utilitiesInConfig]);const deleteSearchTemplateWhenUtilityNotExist=utilitiesInConfig=>{let isHasRemoveTemplate=!1;const newDataSourceConfig=null==datasourceConfig?void 0:datasourceConfig.filter((item=>{var _a;if((null==item?void 0:item.searchServiceType)===SearchServiceType.FeatureService)return!0;{const useUtilityId=null===(_a=null==item?void 0:item.useUtility)||void 0===_a?void 0:_a.utilityId;return!useUtilityId||(!!(null==utilitiesInConfig?void 0:utilitiesInConfig[useUtilityId])||(isHasRemoveTemplate=!0,!1))}}));isHasRemoveTemplate&&updateConfigForLayerOptions(newDataSourceConfig)},checkAndInitOutputDs=()=>{const outputDataSources=(null==widgetsJson?void 0:widgetsJson.outputDataSources)||[],newDataSourceConfig=(null==datasourceConfig?void 0:datasourceConfig.asMutable({deep:!0}))||[];for(let i;i<(null==newDataSourceConfig?void 0:newDataSourceConfig.length)-1;i++){const dsConfigItem=newDataSourceConfig[i];if((null==dsConfigItem?void 0:dsConfigItem.searchServiceType)===SearchServiceType.FeatureService)continue;const outputDsId=null==dsConfigItem?void 0:dsConfigItem.outputDataSourceId;if(!(null==outputDataSources?void 0:outputDataSources.includes(outputDsId))){updateConfigForLayerOptions(datasourceConfig);break}}},hideSidePopper=()=>{setShowLocatorSourcePanel(!1),setShowLayerSourcePanel(!1),setDsConfigItemIndex(null)},openSourcePanel=isLayerSource=>{const isShowSourcePanel=isLayerSource?!showLocatorSourcePanel:!showLayerSourcePanel;if(setShowNewSourceItem(isShowSourcePanel),isShowSourcePanel){const index=(null==datasourceConfig?void 0:datasourceConfig.length)||0;setDsConfigItemIndex(index),setSidePopperAnchor(index,!0)}isLayerSource?setShowLayerSourcePanel(isShowSourcePanel):setShowLocatorSourcePanel(isShowSourcePanel)},updateConfigForLayerOptions=(newDataSourceConfig,closeSidePopper=!1)=>{checkIsNewLayer(newDataSourceConfig)&&setShowNewSourceItem(!1),closeSidePopper&&hideSidePopper();const allDataSources=util_getAllDataSourceBySearchDataConfig(newDataSourceConfig,createOutputDs),dsInWidgetJson=util_getDsInWidgetJson(allDataSources,id,createOutputDs);createOutputDs?onOutputDsSettingChange&&onOutputDsSettingChange(allDataSources.outputDataSources,newDataSourceConfig,dsInWidgetJson,viewId):onSettingChange&&onSettingChange(newDataSourceConfig,dsInWidgetJson,viewId)},checkIsNewLayer=newDataSourceConfig=>(null==newDataSourceConfig?void 0:newDataSourceConfig.length)!==(null==datasourceConfig?void 0:datasourceConfig.length),removeUnaccessibleSearchData=()=>{var _a;const newDataSourceConfig=null===(_a=null==datasourceConfig?void 0:datasourceConfig.asMutable({deep:!0}))||void 0===_a?void 0:_a.filter((item=>(null==item?void 0:item.useDataSource)||(null==item?void 0:item.useUtility)));updateConfigForLayerOptions((0,jimu_core.J3Z)(newDataSourceConfig))},setSidePopperAnchor=(index,newAdded=!1)=>{let node;node=newAdded?sidePopperTrigger.current.getElementsByClassName("add-search-btn")[0]:sidePopperTrigger.current.getElementsByClassName("jimu-tree-item__body")[index],setPopperFocusNode(node)};return(0,jimu_core.Yac)("div",null,(0,jimu_core.Yac)(section_SettingSection,{css:STYLE},!hideTitleOfNewSearchSource&&(0,jimu_core.Yac)(row_SettingRow,{flow:"wrap"},(0,jimu_core.Yac)("span",{className:"w-100 data-remind"},nls("addSources"))),(0,jimu_core.Yac)(row_SettingRow,{flow:"wrap"},(0,jimu_core.Yac)("div",{className:"w-100",ref:sidePopperTrigger},(0,jimu_core.Yac)("div",null,(!searchDataSettingType||searchDataSettingType===SearchDataType.Both)&&(0,jimu_core.Yac)(jimu_ui.Dropdown,{className:"w-100",size:"sm",toggle:()=>{setOpen(!open)},isOpen:open,autoWidth:!0},(0,jimu_core.Yac)(jimu_ui.DropdownButton,{className:"add-search-btn w-100",title:nls("newSearchSource"),arrow:!1,icon:!0,type:"primary"},(0,jimu_core.Yac)("div",{className:"w-100 text-truncate"},(0,jimu_core.Yac)(plus.b,{className:"mr-1 d-inline-block",autoFlip:!0}),nls("newSearchSource"))),(0,jimu_core.Yac)(jimu_ui.DropdownMenu,{css:DropDownStyle},(0,jimu_core.Yac)(jimu_ui.DropdownItem,{className:"w-100",onClick:()=>{openSourcePanel(!0)},title:nls("layerSource")},nls("layerSource")),(0,jimu_core.Yac)(jimu_ui.DropdownItem,{className:"w-100",onClick:()=>{openSourcePanel(!1)},title:nls("locatorSource")},nls("locatorSource")))),searchDataSettingType===SearchDataType.FeatureService&&(0,jimu_core.Yac)(jimu_ui.Button,{type:"primary",className:"w-100 add-search-btn",onClick:()=>{openSourcePanel(!0)}},(0,jimu_core.Yac)(plus.b,{className:"mr-1 d-inline-block",autoFlip:!0}),nls("layerSource")),searchDataSettingType===SearchDataType.GeocodeService&&(0,jimu_core.Yac)(jimu_ui.Button,{type:"primary",className:"w-100 add-search-btn",onClick:()=>{openSourcePanel(!1)}},(0,jimu_core.Yac)(plus.b,{className:"mr-1 d-inline-block",autoFlip:!0}),nls("locatorSource"))),(0,jimu_core.Yac)("div",{className:"w-100",ref:sourceListRef},(0,jimu_core.Yac)(datasource_list,{id,dsConfigItemIndex,datasourceConfig:datasourceConfig||(0,jimu_core.J3Z)([]),showSourcePanel:(()=>{var _a;return(null===(_a=null==datasourceConfig?void 0:datasourceConfig[dsConfigItemIndex])||void 0===_a?void 0:_a.searchServiceType)===SearchServiceType.GeocodeService?showLocatorSourcePanel:showLayerSourcePanel})(),useDataSources,onDsConfigIdChange:(configItemIndex,isGeocodeSource)=>{setShowNewSourceItem(!1),"number"==typeof configItemIndex?(setSidePopperAnchor(configItemIndex,!1),dsConfigItemIndex===configItemIndex?isGeocodeSource?(setShowLocatorSourcePanel(!showLocatorSourcePanel),setShowLayerSourcePanel(!1)):(setShowLayerSourcePanel(!showLayerSourcePanel),setShowLocatorSourcePanel(!1)):(setDsConfigItemIndex(configItemIndex),isGeocodeSource?(setShowLocatorSourcePanel(!0),setShowLayerSourcePanel(!1)):(setShowLayerSourcePanel(!0),setShowLocatorSourcePanel(!1)))):hideSidePopper()},showNewSourceItem,updateConfigForLayerOptions,hideSidePopper,createOutputDs,dataSourceCreateStatus:dsCreateStatus}))),(0,jimu_core.Yac)(set_layer_source_side_popper,{supportedDsTypes,hideDs,viewId,id,dsConfigItemIndex,datasourceConfig:datasourceConfig||(0,jimu_core.J3Z)([]),useDataSources,isOpen:showLayerSourcePanel,onSettingChange,trigger:null==sourceListRef?void 0:sourceListRef.current,updateConfigForLayerOptions,toggle:()=>{showLayerSourcePanel&&setDsConfigItemIndex(null),setShowLayerSourcePanel(!showLayerSourcePanel),setShowNewSourceItem(!1),removeUnaccessibleSearchData()},dsStatusChange:(dsId,isDsCreateSuccess=!1)=>{const newDsCreateStatus=dsCreateStatus.set(dsId,isDsCreateSuccess);setDsCreateStatus(newDsCreateStatus)},popperFocusNode,hideIconSetting,hideDisplayFieldSetting,propsForDataSourceSelector,showSearchInCurrentMapExtentSetting}),(0,jimu_core.Yac)(set_locator_source,{id,viewId,dsConfigItemIndex,datasourceConfig:datasourceConfig||(0,jimu_core.J3Z)([]),useDataSources,isOpen:showLocatorSourcePanel,onSettingChange,updateConfigForLayerOptions,trigger:null==sourceListRef?void 0:sourceListRef.current,toggle:()=>{showLocatorSourcePanel&&setDsConfigItemIndex(null),setShowLocatorSourcePanel(!showLocatorSourcePanel),setShowNewSourceItem(!1),removeUnaccessibleSearchData()},popperFocusNode,hideIconSetting,createOutputDs,showSearchInCurrentMapExtentSetting,showEnableLocalSearchSetting})),showLoading&&(0,jimu_core.Yac)(row_SettingRow,null,(0,jimu_core.Yac)("div",{className:"position-relative w-100 loading-con"},(0,jimu_core.Yac)(jimu_ui.Loading,{type:jimu_ui.LoadingType.Secondary,width:38,height:38})))),(searchDataSettingType===SearchDataType.Both||searchDataSettingType===SearchDataType.FeatureService)&&!hideEnableFiltering&&(0,jimu_core.Yac)(section_SettingSection,null,(0,jimu_core.Yac)(row_SettingRow,{tag:"label",label:nls("enableSearchFilter")},(0,jimu_core.Yac)(jimu_ui.Switch,{checked:enableFiltering,onChange:evt=>{const value=evt.target.checked;onEnableFilteringChange&&onEnableFilteringChange(value)},title:nls("enableSearchFilter")}))),(searchDataSettingType===SearchDataType.Both||searchDataSettingType===SearchDataType.FeatureService)&&(0,jimu_core.Yac)("span",null))};try{dataSetting_SearchDataSetting.displayName="SearchDataSetting",dataSetting_SearchDataSetting.__docgenInfo={description:"",displayName:"SearchDataSetting",props:{id:{defaultValue:null,description:"Widget id",name:"id",required:!0,type:{name:"string"}},datasourceConfig:{defaultValue:null,description:"",name:"datasourceConfig",required:!1,type:{name:"ImmutableArray<SearchDataConfig>"}},useDataSources:{defaultValue:null,description:"",name:"useDataSources",required:!1,type:{name:"ImmutableArray<UseDataSource>"}},portalUrl:{defaultValue:null,description:"Portal url of current app",name:"portalUrl",required:!1,type:{name:"string"}},searchDataSettingType:{defaultValue:null,description:"The type of data service\n@param Both Display all data setting\n@param GeocodeService Only display data setting of geocode service\n@param FeatureService Only display data setting of feature service",name:"searchDataSettingType",required:!1,type:{name:"enum",value:[{value:'"Both"'},{value:'"GeocodeService"'},{value:'"FeatureService"'}]}},createOutputDs:{defaultValue:null,description:"Whether to create outputDs by geocode service",name:"createOutputDs",required:!1,type:{name:"boolean"}},hideIconSetting:{defaultValue:null,description:"Whether to hide icon settings",name:"hideIconSetting",required:!1,type:{name:"boolean"}},hideDisplayFieldSetting:{defaultValue:null,description:"Whether to hide display field settings",name:"hideDisplayFieldSetting",required:!1,type:{name:"boolean"}},showSearchInCurrentMapExtentSetting:{defaultValue:null,description:"Whether to show search in current map extent setting",name:"showSearchInCurrentMapExtentSetting",required:!1,type:{name:"boolean"}},showEnableLocalSearchSetting:{defaultValue:null,description:"Whether to show local search setting",name:"showEnableLocalSearchSetting",required:!1,type:{name:"boolean"}},enableFiltering:{defaultValue:null,description:"Enable filtering when searching for layer sources",name:"enableFiltering",required:!1,type:{name:"boolean"}},viewId:{defaultValue:null,description:"",name:"viewId",required:!1,type:{name:"string"}},hideEnableFiltering:{defaultValue:null,description:"",name:"hideEnableFiltering",required:!1,type:{name:"boolean"}},hideTitleOfNewSearchSource:{defaultValue:null,description:"",name:"hideTitleOfNewSearchSource",required:!1,type:{name:"boolean"}},autoSelectSingleGeocodeService:{defaultValue:null,description:"",name:"autoSelectSingleGeocodeService",required:!1,type:{name:"boolean"}},autoSelectAllOrgGeocodeService:{defaultValue:null,description:"",name:"autoSelectAllOrgGeocodeService",required:!1,type:{name:"boolean"}},propsForDataSourceSelector:{defaultValue:null,description:"",name:"propsForDataSourceSelector",required:!1,type:{name:"PropsForDataSourceSelector"}},supportedDsTypes:{defaultValue:null,description:"",name:"supportedDsTypes",required:!1,type:{name:"DataSourceTypes[]"}},hideDs:{defaultValue:null,description:"",name:"hideDs",required:!1,type:{name:"(dsJson: IMDataSourceJson) => boolean"}},onSettingChange:{defaultValue:null,description:"Callback fired when dataSourceConfig change.\n@event",name:"onSettingChange",required:!1,type:{name:"(datasourceConfig: ImmutableArray<SearchDataConfig>, dsInWidgetJson?: DSInWidgetJson, viewId?: string) => void"}},onEnableFilteringChange:{defaultValue:null,description:"Callback fired when enable filtering change.\n@event",name:"onEnableFilteringChange",required:!1,type:{name:"(enable: boolean) => void"}},onOutputDsSettingChange:{defaultValue:null,description:"The method of create output dataSources\n@event",name:"onOutputDsSettingChange",required:!1,type:{name:"(dataSourceJson: DataSourceJson[], datasourceConfig: ImmutableArray<SearchDataConfig>, dsInWidgetJson?: DSInWidgetJson, viewId?: string) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/search-setting/dataSetting/index.tsx#SearchDataSetting"]={docgenInfo:dataSetting_SearchDataSetting.__docgenInfo,name:"SearchDataSetting",path:"../jimu-ui/advanced/lib/setting-components/components/search-setting/dataSetting/index.tsx#SearchDataSetting"})}catch(__react_docgen_typescript_loader_error){}var react=__webpack_require__("../node_modules/react/index.js");const search_suggestion_setting_SearchSuggestionSetting=props=>{const nls=jimu_core.JLE.useTranslation(jimu_ui.defaultMessages,jimu_core.kgw),appTheme=(0,jimu_theme.DP)(),STYLE=jimu_core.AHW`
    .check-box-label {
      color: ${appTheme.ref.palette.neutral[1100]}
    }
    .search-setting-con {
      padding-left: 0;
      padding-right: 0;
    }
    .checkbox-con .jimu-widget-setting--row-label{
      max-width: 100%;
    }
    .cursor-pointer {
      cursor: pointer;
    }
  `,{onSettingChange,hideRecentSearchSetting}=props,settingConfig=props.settingConfig||(0,jimu_core.J3Z)({}),{maxSuggestions,isUseCurrentLoation,isShowRecentSearches,recentSearchesMaxNumber}=settingConfig,[newRecentSearchesMaxNumber,setRecentSearchesMaxNumber]=jimu_core.q_G.useState(recentSearchesMaxNumber),[newMaxSuggestions,setMaxSuggestions]=jimu_core.q_G.useState(maxSuggestions);(0,react.useEffect)((()=>{setRecentSearchesMaxNumber(recentSearchesMaxNumber),setMaxSuggestions(maxSuggestions)}),[settingConfig]);const onConfigChange=(key,value)=>{const newSettingConfig=settingConfig.setIn(key,value);onSettingChange&&onSettingChange(newSettingConfig)},checkNumber=(value,minimum=1)=>{if(0===(null==value?void 0:value.length))return!0;if(isNaN(Number(value)))return!1;{const numberVal=Number(value);return Number.isInteger(numberVal)&&numberVal>=minimum}};return(0,jimu_core.Yac)("div",{css:STYLE},(0,jimu_core.Yac)(row_SettingRow,{flow:"wrap",className:"mt-2 checkbox-con",label:nls("maximumSuggestions")},(0,jimu_core.Yac)(jimu_ui.TextInput,{size:"sm","aria-label":nls("maximumSuggestions"),value:newMaxSuggestions,onChange:e=>{const value=e.target.value;checkNumber(value,0)&&setMaxSuggestions(value)},onAcceptValue:value=>{(!value||value>MAX_SUGGESTION)&&setMaxSuggestions(value=maxSuggestions||DEFAULT_MAX_SUGGESTION),checkNumber(value,0)&&onConfigChange(["maxSuggestions"],Number(value))},className:"w-100"})),(0,jimu_core.Yac)(row_SettingRow,null,(0,jimu_core.Yac)("div",{className:"cursor-pointer d-flex align-items-center",onClick:evt=>{onConfigChange(["isUseCurrentLoation"],!isUseCurrentLoation)},"aria-label":nls("useCurrentLocation")},(0,jimu_core.Yac)(jimu_ui.Checkbox,{checked:!!isUseCurrentLoation,className:"mr-1",title:nls("useCurrentLocation")}),(0,jimu_core.Yac)("span",{className:"check-box-label"},nls("useCurrentLocation")))),!hideRecentSearchSetting&&(0,jimu_core.Yac)(row_SettingRow,{tag:"label",label:nls("recentSearches")},(0,jimu_core.Yac)(jimu_ui.Switch,{checked:isShowRecentSearches||!1,title:nls("recentSearches"),onChange:evt=>{onConfigChange(["isShowRecentSearches"],!isShowRecentSearches)}})),isShowRecentSearches&&(0,jimu_core.Yac)(row_SettingRow,{label:nls("maximumNumber")},(0,jimu_core.Yac)(jimu_ui.TextInput,{size:"sm","aria-label":nls("maximumNumber"),value:newRecentSearchesMaxNumber,onChange:e=>{const value=e.target.value;checkNumber(value)&&setRecentSearchesMaxNumber(value)},onAcceptValue:value=>{value||setRecentSearchesMaxNumber(value=recentSearchesMaxNumber||MAX_RECENT_SEARCHES),checkNumber(value)&&onConfigChange(["recentSearchesMaxNumber"],Number(value))},style:{width:"50px"}})))};try{search_suggestion_setting_SearchSuggestionSetting.displayName="SearchSuggestionSetting",search_suggestion_setting_SearchSuggestionSetting.__docgenInfo={description:"",displayName:"SearchSuggestionSetting",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},settingConfig:{defaultValue:null,description:"",name:"settingConfig",required:!1,type:{name:"IMSearchSuggestionConfig"}},hideRecentSearchSetting:{defaultValue:null,description:"",name:"hideRecentSearchSetting",required:!1,type:{name:"boolean"}},onSettingChange:{defaultValue:null,description:"",name:"onSettingChange",required:!1,type:{name:"(settingConfig: IMSearchSuggestionConfig) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/search-setting/search-suggestion-setting.tsx#SearchSuggestionSetting"]={docgenInfo:search_suggestion_setting_SearchSuggestionSetting.__docgenInfo,name:"SearchSuggestionSetting",path:"../jimu-ui/advanced/lib/setting-components/components/search-setting/search-suggestion-setting.tsx#SearchSuggestionSetting"})}catch(__react_docgen_typescript_loader_error){}const general_search_setting_SearchGeneralSetting=props=>{const nls=jimu_core.JLE.useTranslation(jimu_ui.defaultMessages,jimu_core.kgw),{hint,allowSearchSourceSelection,enableAllowSearchSourceSelectionSetting,onGeneralSettingChange}=props,[newHint,setNewHint]=jimu_core.q_G.useState(hint);(0,react.useEffect)((()=>{setNewHint(hint)}),[hint]);return(0,jimu_core.Yac)("div",{className:"general-setting-con"},enableAllowSearchSourceSelectionSetting&&(0,jimu_core.Yac)(row_SettingRow,null,(0,jimu_core.Yac)("div",{className:"d-flex w-100 align-items-center",onClick:evt=>{onGeneralSettingChange&&onGeneralSettingChange(["allowSearchSourceSelection"],!1===allowSearchSourceSelection)}},(0,jimu_core.Yac)(jimu_ui.Checkbox,{"aria-label":nls("allowSearchSourceSelection"),className:"mr-3",checked:!1!==allowSearchSourceSelection}),(0,jimu_core.Yac)("div",null,nls("allowSearchSourceSelection")))),(0,jimu_core.Yac)(row_SettingRow,{flow:"wrap",label:nls("multiSearchHint")},(0,jimu_core.Yac)(jimu_ui.TextInput,{"aria-label":nls("multiSearchHint"),title:newHint||nls("findAddressOrPlace"),size:"sm",value:newHint,onChange:event=>{var _a;const value=null===(_a=null==event?void 0:event.target)||void 0===_a?void 0:_a.value;setNewHint(value)},onAcceptValue:value=>{setNewHint(value),onGeneralSettingChange&&onGeneralSettingChange(["hint"],value)},className:"w-100",placeholder:nls("findAddressOrPlace")})))};try{general_search_setting_SearchGeneralSetting.displayName="SearchGeneralSetting",general_search_setting_SearchGeneralSetting.__docgenInfo={description:"",displayName:"SearchGeneralSetting",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},hint:{defaultValue:null,description:"",name:"hint",required:!1,type:{name:"string"}},allowSearchSourceSelection:{defaultValue:null,description:"",name:"allowSearchSourceSelection",required:!1,type:{name:"boolean"}},enableAllowSearchSourceSelectionSetting:{defaultValue:null,description:"",name:"enableAllowSearchSourceSelectionSetting",required:!1,type:{name:"boolean"}},onGeneralSettingChange:{defaultValue:null,description:"",name:"onGeneralSettingChange",required:!1,type:{name:"(key: string[], value: any) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/search-setting/general-search-setting.tsx#SearchGeneralSetting"]={docgenInfo:general_search_setting_SearchGeneralSetting.__docgenInfo,name:"SearchGeneralSetting",path:"../jimu-ui/advanced/lib/setting-components/components/search-setting/general-search-setting.tsx#SearchGeneralSetting"})}catch(__react_docgen_typescript_loader_error){}var multiple_jimu_map_config_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const multiple_jimu_map_config_MultipleJimuMapConfig=function MultipleJimuMapConfigComponent(props){var _a,_b;const{mapWidgetId,disabled,disableSwitchMap=!1,onClick,sidePopperContent,isDataSourceValid,showDefaultMapWhenEmpty,keepLastTimeMap=!1,"aria-describedby":ariaDescribedby=""}=props,restProps=multiple_jimu_map_config_rest(props,["mapWidgetId","disabled","disableSwitchMap","onClick","sidePopperContent","isDataSourceValid","showDefaultMapWhenEmpty","keepLastTimeMap","aria-describedby"]),currentActiveJmvIdRef=jimu_core.q_G.useRef(""),containerRef=jimu_core.q_G.useRef(null),[showPopper,setShowPopper]=jimu_core.q_G.useState(!1),[activeItem,setActiveItem]=jimu_core.q_G.useState(null),[currentTitle,setCurrentTitle]=jimu_core.q_G.useState(""),[currentDsId,setCurrentDsId]=jimu_core.q_G.useState(null),[defaultDsId,setDefaultDsID]=jimu_core.q_G.useState(null),jimuMapViewGroup=jimu_arcgis.Rv.getInstance().getJimuMapViewGroup(mapWidgetId),[allDataSourcesReady,setAllDataSourcesReady]=jimu_core.q_G.useState(!1),translate=jimu_core.JLE.useTranslation(jimu_ui.defaultMessages),useDataSources=jimu_core.E_S.useSelector((state=>{var _a,_b,_c;const appState=state.appStateInBuilder;return appState&&(null===(_c=null===(_b=null===(_a=null==appState?void 0:appState.appConfig)||void 0===_a?void 0:_a.widgets)||void 0===_b?void 0:_b[mapWidgetId])||void 0===_c?void 0:_c.useDataSources)})),dataSourcesInfo=jimu_core.E_S.useSelector((state=>{const appState=state.appStateInBuilder;return appState&&(null==appState?void 0:appState.dataSourcesInfo)}),((oldDssInfo,newDssInfo)=>{if(useDataSources){for(const useDataSource of useDataSources)if(oldDssInfo&&newDssInfo&&oldDssInfo[useDataSource.dataSourceId]!==newDssInfo[useDataSource.dataSourceId])return!1;return!0}return!0}));jimu_core.q_G.useEffect((()=>{if(!allDataSourcesReady)if(useDataSources&&0!==(null==useDataSources?void 0:useDataSources.length)){let readyCount=0;for(const item of useDataSources){const dsInfo=null==dataSourcesInfo?void 0:dataSourcesInfo[item.dataSourceId];!dsInfo||dsInfo.instanceStatus!==jimu_core.e3_.Created&&dsInfo.instanceStatus!==jimu_core.e3_.CreateError||(readyCount++,readyCount===useDataSources.length&&setAllDataSourcesReady(!0))}}else setAllDataSourcesReady(!0)}),[allDataSourcesReady,dataSourcesInfo,useDataSources]);const getSkeletonList=jimu_core.q_G.useCallback((()=>{const skeletonItems=[];for(let i=0;i<2;i++)skeletonItems.push({itemKey:i.toString(),itemStateCommands:[{iconProps:()=>({icon:" ",size:12,style:{opacity:0}})}]});return(0,jimu_core.Yac)(list_tree.B8,{className:"w-100",itemsJson:skeletonItems,dndEnabled:!1,handleClickItemBody:()=>null})}),[]),getDataSourceLabel=jimu_core.q_G.useCallback((dsObj=>{if(!dsObj)return"";return dsObj.getLabel()||(null==dsObj?void 0:dsObj.getDataSourceJson().sourceLabel)||dsObj.id}),[]),defaultItemsJson=null===(_b=null===(_a=null==useDataSources?void 0:useDataSources.asMutable())||void 0===_a?void 0:_a.sort(((useDs1,useDs2)=>useDs1.dataSourceId.localeCompare(useDs2.dataSourceId))))||void 0===_b?void 0:_b.map((useDataSource=>{var _a;const dsObj=jimu_core.zAk.getInstance().getDataSource(useDataSource.dataSourceId);let item=null;const commands=[];return isDataSourceValid&&!isDataSourceValid(useDataSource.dataSourceId).isValid&&commands.push({label:null===(_a=isDataSourceValid(useDataSource.dataSourceId))||void 0===_a?void 0:_a.invalidMessage,iconProps:()=>({icon:warning_default(),size:16,color:"var(--sys-color-warning-dark)"})}),item=dsObj?{itemStateTitle:getDataSourceLabel(dsObj),itemStateChecked:useDataSource.dataSourceId===currentActiveJmvIdRef.current,itemKey:useDataSource.dataSourceId,itemStateDisabled:disabled,itemStateCommands:commands}:{itemStateTitle:translate("none"),itemKey:useDataSource.dataSourceId,itemStateDisabled:!0},item})),getItemsJson=jimu_core.q_G.useCallback((()=>!showDefaultMapWhenEmpty||useDataSources&&0!==useDataSources.length?defaultItemsJson:[{itemStateTitle:translate("multipleMapDefaultWebMap"),itemKey:"default",itemStateChecked:"default"===currentActiveJmvIdRef.current,itemStateDisabled:disabled}]),[defaultItemsJson,disabled,showDefaultMapWhenEmpty,translate,useDataSources]);jimu_core.q_G.useEffect((()=>{if(!(null==jimuMapViewGroup?void 0:jimuMapViewGroup.jimuMapViews))return;const jmvPromises=Object.keys(null==jimuMapViewGroup?void 0:jimuMapViewGroup.jimuMapViews).map((jmvId=>null==jimuMapViewGroup?void 0:jimuMapViewGroup.jimuMapViews[jmvId].whenJimuMapViewLoaded()));Promise.all(jmvPromises).then((()=>{var _a;const activeDsId=(null===(_a=null==jimuMapViewGroup?void 0:jimuMapViewGroup.getActiveJimuMapView())||void 0===_a?void 0:_a.dataSourceId)||"";setCurrentDsId(activeDsId.length>0?activeDsId:" "),setDefaultDsID(activeDsId.length>0?activeDsId:" ")})).catch((err=>{console.error(err)}))}),[jimuMapViewGroup,null==jimuMapViewGroup?void 0:jimuMapViewGroup.jimuMapViews]);const handleClickWithSwitchMap=jimu_core.q_G.useCallback(((actionData,refComponent)=>{const{itemJsons}=refComponent.props,currentItemJson=itemJsons[0];let index=0;const itemsJson=getItemsJson();for(;index<itemsJson.length&&itemsJson[index].itemKey!==currentItemJson.itemKey;index++);const item=containerRef.current.querySelectorAll(".jimu-tree-item__body")[index];setActiveItem(item),isDataSourceValid&&!isDataSourceValid(currentItemJson.itemKey).isValid||(setCurrentDsId(currentItemJson.itemKey),onClick&&onClick(currentItemJson.itemKey),currentActiveJmvIdRef.current===currentItemJson.itemKey?(currentActiveJmvIdRef.current="",setShowPopper(!1)):(currentActiveJmvIdRef.current=currentItemJson.itemKey,setCurrentTitle(currentItemJson.itemStateTitle),setShowPopper(!0)),disableSwitchMap||jimuMapViewGroup&&currentItemJson.itemKey!==currentDsId&&jimuMapViewGroup.switchMap())}),[currentDsId,disableSwitchMap,getItemsJson,isDataSourceValid,jimuMapViewGroup,onClick]);return jimu_core.q_G.useEffect((()=>()=>{disableSwitchMap||!showPopper||defaultDsId===currentDsId||keepLastTimeMap||(jimuMapViewGroup.switchMap(),setCurrentDsId(defaultDsId))}),[currentDsId,defaultDsId,disableSwitchMap,jimuMapViewGroup,showPopper,keepLastTimeMap]),(0,jimu_core.Yac)("div",{ref:containerRef,className:"w-100 multiple-jimu-map-config-component",css:jimu_core.AHW`
    .jimu-tree-main {
      padding-top: 2px;
    }
    .jimu-tree-item {
      padding: 2px;
    }
    .jimu-tree-item__icon {
      background-color: var(--sys-color-info-main);
      width: 1rem;
      height: 1rem;
      margin-right: 0.5rem;
      svg {
        margin-right: 0!important;
      }
    }
    .jimu-tree-item__body {
      .jimu-icon {
        color: var(--sys-color-warning-main);
      }
      .jimu-tree-item__main-line {
        cursor: pointer;
      }
    }
  `,"aria-describedby":ariaDescribedby},allDataSourcesReady&&currentDsId?(0,jimu_core.Yac)(jimu_core.q_G.Fragment,null,(0,jimu_core.Yac)(list_tree.B8,Object.assign({},restProps,{itemsJson:getItemsJson(),handleClickItemBody:handleClickWithSwitchMap})),(0,jimu_core.Yac)(SidePopper,{position:"right",isOpen:showPopper,toggle:()=>{setShowPopper(!1),currentActiveJmvIdRef.current="",(0,jimu_core.u02)(null==containerRef?void 0:containerRef.current)},title:currentTitle,trigger:null==containerRef?void 0:containerRef.current,backToFocusNode:activeItem},sidePopperContent)):getSkeletonList())};try{multiple_jimu_map_config_MultipleJimuMapConfig.displayName="MultipleJimuMapConfig",multiple_jimu_map_config_MultipleJimuMapConfig.__docgenInfo={description:"This component is used for configuring one or multiple `JimuMap`. If two data sources are selected in the connected map widget,\nclicking on the list item of this component switches the map widget's active view to the corresponding one. The switch behavior\nis on the fly (discarded when refreshing the page).\nUse this component by `import { MultipleJimuMapConfig } from 'jimu-ui/advanced/setting-components'`.",displayName:"MultipleJimuMapConfig",props:{mapWidgetId:{defaultValue:null,description:"The map widget ID that is using this component.",name:"mapWidgetId",required:!0,type:{name:"string"}},sidePopperContent:{defaultValue:null,description:"The JSX content that you want to put in the `SidePopper` panel. DO NOT wrap it with the `SidePopper` component.",name:"sidePopperContent",required:!1,type:{name:"Element"}},disableSwitchMap:{defaultValue:{value:"false"},description:"Whether to disable the map-switch behavior when clicking on different `JimuMap` items. The default value is `false`.",name:"disableSwitchMap",required:!1,type:{name:"boolean"}},disabled:{defaultValue:{value:"false"},description:"Whether to disable the whole list.",name:"disabled",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"The callback function of clicking an item in the list.",name:"onClick",required:!1,type:{name:"(dataSourceId: string) => void"}},isDataSourceValid:{defaultValue:null,description:"Used for checking whether a specific `dataSourceId` is valid for configuration.\nIt will show a warning icon if the return value is `false`.",name:"isDataSourceValid",required:!1,type:{name:"(dataSourceId: string) => MultipleJimuMapValidateResult"}},showDefaultMapWhenEmpty:{defaultValue:{value:"false"},description:"Display a default `JimuMap` item when no web map is added to the map widget.",name:"showDefaultMapWhenEmpty",required:!1,type:{name:"boolean"}},forwardRef:{defaultValue:null,description:"ForwardRef to component outer div.\n@ignore",name:"forwardRef",required:!1,type:{name:"(ref: any) => void"}},keepLastTimeMap:{defaultValue:{value:"false"},description:"Keep the last time clicked `JimuMap` when closing the side popper",name:"keepLastTimeMap",required:!1,type:{name:"boolean"}},"aria-describedby":{defaultValue:null,description:"The id of the description element\n@ignore",name:"aria-describedby",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/multiple-jimu-map-config/index.tsx#MultipleJimuMapConfig"]={docgenInfo:multiple_jimu_map_config_MultipleJimuMapConfig.__docgenInfo,name:"MultipleJimuMapConfig",path:"../jimu-ui/advanced/lib/setting-components/components/multiple-jimu-map-config/index.tsx#MultipleJimuMapConfig"})}catch(__react_docgen_typescript_loader_error){}var CardLayout,Status;!function(CardLayout){CardLayout.AUTO="Auto",CardLayout.CUSTOM="Custom"}(CardLayout||(CardLayout={})),function(Status){Status.Default="DEFAULT",Status.Selected="SELECTED",Status.Hover="HOVER"}(Status||(Status={}));var suggested_warning=__webpack_require__("../jimu-icons/outlined/suggested/warning.tsx");const utils_setLayoutAuto=option=>{const{layout,config,widgetId,status,isCardWidget,mainSizeMode}=option,layouts=(null==option?void 0:option.layouts)||{},currentLayout=(null==layouts?void 0:layouts[status])||{},action=(0,jimu_for_builder.getAppConfigAction)();Object.keys(currentLayout).forEach((browserSizeMode=>{const desLayoutId=layout_runtime.searchUtils.findLayoutId(currentLayout,browserSizeMode,mainSizeMode);desLayoutId&&action.removeLayout(desLayoutId)}));const newConfig=getNewWidgetConfig(config,isCardWidget,layout,status);(null==layouts?void 0:layouts[status])&&delete layouts[status],action.editWidgetConfig(widgetId,newConfig),action.editWidgetProperty(widgetId,"layouts",layouts),action.exec()},utils_setLayoutCustom=option=>{const{layout,config,widgetId,appConfig,status,label,isCardWidget,mainSizeMode}=option,layouts=(null==option?void 0:option.layouts)||{},action=(0,jimu_for_builder.getAppConfigAction)(),regularLayouts=(null==layouts?void 0:layouts[Status.Default])||{};Object.keys(regularLayouts).forEach((browserSizeMode=>{var _a;const preLayoutId=null===(_a=appConfig.widgets[widgetId].layouts[status])||void 0===_a?void 0:_a[browserSizeMode];preLayoutId&&action.removeLayout(preLayoutId);const regularLayoutId=layout_runtime.searchUtils.findLayoutId(layouts[Status.Default],browserSizeMode,mainSizeMode),newLayoutJson=action.duplicateLayout(regularLayoutId,!1);action.editLayoutProperty(newLayoutJson.id,"label",label),action.editWidgetProperty(widgetId,`layouts.${status}.${browserSizeMode}`,newLayoutJson.id),action.editLayoutProperty(newLayoutJson.id,"parent",{type:jimu_core.$4y.Widget,id:widgetId})}));const newConfig=getNewWidgetConfig(config,isCardWidget,layout,status);action.editWidgetConfig(widgetId,newConfig),action.exec()};function getNewWidgetConfig(config,isCardWidget,layout,status){let newConfig=config;return newConfig=isCardWidget?config.set("cardLayout",layout):config.setIn(["cardConfigs",status,"listLayout"],layout),newConfig}const card_layout_setting_STYLE=jimu_core.AHW`
  .jimu-radio {
    cursor: pointer;
  }
  .clear-padding {
    padding-left: 0;
    padding-right: 0;
  }
`,ModalStyle=jimu_core.AHW`
  & .modal-content {
    border: none;
  }
  .header-con {
    & {
      border: none;
      padding: ${jimu_core.PLL.rem(30)};
      padding-bottom: 0;
    }
    svg {
      color: var(--sys-color-warning-main);
      border-bottom: none;
      margin-right: ${jimu_core.PLL.rem(12)} !important;
    }
  }
  .modal-body {
    padding: ${jimu_core.PLL.rem(24)} ${jimu_core.PLL.rem(30)};
  }
  .modal-footer {
    & {
      padding: ${jimu_core.PLL.rem(30)};
      padding-top: 0;
    }
  }
`,card_layout_setting_CardLayoutSetting=props=>{const{id,cardLayout,status,isCardWidget,layouts,mainSizeMode,config,appConfig}=props,[isOpen,setIsOpen]=(0,react.useState)(!1),[reminderTitle,setReminderTitle]=(0,react.useState)(null),[reminderText,setReminderText]=(0,react.useState)(null),[reminderBottomText,setReminderBottomText]=(0,react.useState)(null),layout=jimu_core.q_G.useRef(cardLayout),oldLayout=jimu_core.q_G.useRef(cardLayout);(0,react.useEffect)((()=>{layout.current=props.cardLayout,oldLayout.current=props.cardLayout}),[status,props]);const handleToggle=()=>{setIsOpen(!isOpen),layout.current=oldLayout.current},handleConfirm=()=>{const option={layout:layout.current,config,widgetId:id,appConfig,status,label:nls(status.toLowerCase()),isCardWidget,layouts:null==layouts?void 0:layouts.asMutable({deep:!0}),mainSizeMode};layout.current===CardLayout.AUTO?utils_setLayoutAuto(option):utils_setLayoutCustom(option),setIsOpen(!1),oldLayout.current=layout.current},handleLayoutChange=newLayout=>{oldLayout.current!==newLayout&&(newLayout===CardLayout.AUTO?(setReminderTitle(nls("remindAutoLayoutTitle")),setReminderText(nls("remindAutoLayoutText")),setReminderBottomText("")):(setReminderTitle(nls("remindCustomLayoutTitle")),setReminderText(nls("remindCustomLayoutText")),setReminderBottomText(nls("remindCustomLayoutBottomText"))),setIsOpen(!0),layout.current=newLayout)},nls=jimu_core.JLE.useTranslation(jimu_ui.defaultMessages,jimu_core.kgw);return(0,jimu_core.Yac)("div",{css:card_layout_setting_STYLE,role:"group","aria-label":nls("layout")},(0,jimu_core.Yac)(section_SettingSection,{className:"clear-padding",title:nls("layout")},(0,jimu_core.Yac)(row_SettingRow,{flow:"wrap"},(0,jimu_core.Yac)("div",{className:"d-flex align-items-center",onClick:()=>{handleLayoutChange(CardLayout.AUTO)}},(0,jimu_core.Yac)(jimu_ui.Radio,{title:nls("auto"),checked:cardLayout===CardLayout.AUTO,className:"mr-2"})," ",nls("auto"))),(0,jimu_core.Yac)(row_SettingRow,null,(0,jimu_core.Yac)("div",{className:"d-flex align-items-center",onClick:()=>{handleLayoutChange(CardLayout.CUSTOM)}},(0,jimu_core.Yac)(jimu_ui.Radio,{title:nls("custom"),checked:cardLayout===CardLayout.CUSTOM||!cardLayout,className:"mr-2"})," ",nls("custom"))),(0,jimu_core.Yac)(jimu_ui.Modal,{isOpen,toggle:handleToggle,centered:!0,css:ModalStyle},(0,jimu_core.Yac)(jimu_ui.ModalHeader,{className:"header-con"},(0,jimu_core.Yac)(suggested_warning.v,{className:"mr-2",size:24}),reminderTitle),(0,jimu_core.Yac)(jimu_ui.ModalBody,null,(0,jimu_core.Yac)("div",null,reminderText),reminderBottomText&&(0,jimu_core.Yac)("div",{className:"mt-5"},reminderBottomText)),(0,jimu_core.Yac)(jimu_ui.ModalFooter,null,(0,jimu_core.Yac)(jimu_ui.Button,{title:nls("ok"),type:"primary",onClick:handleConfirm},nls("ok")),(0,jimu_core.Yac)(jimu_ui.Button,{title:nls("cancel"),onClick:()=>{setIsOpen(!1)}},nls("cancel"))))))};try{card_layout_setting_CardLayoutSetting.displayName="CardLayoutSetting",card_layout_setting_CardLayoutSetting.__docgenInfo={description:"",displayName:"CardLayoutSetting",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},onSettingChange:{defaultValue:null,description:"",name:"onSettingChange",required:!0,type:{name:"SettingChangeFunction"}},cardLayout:{defaultValue:null,description:"",name:"cardLayout",required:!0,type:{name:"enum",value:[{value:'"Auto"'},{value:'"Custom"'}]}},status:{defaultValue:null,description:"",name:"status",required:!0,type:{name:"enum",value:[{value:'"DEFAULT"'},{value:'"SELECTED"'},{value:'"HOVER"'}]}},browserSizeMode:{defaultValue:null,description:"",name:"browserSizeMode",required:!0,type:{name:"enum",value:[{value:'"SMALL"'},{value:'"MEDIUM"'},{value:'"LARGE"'}]}},mainSizeMode:{defaultValue:null,description:"",name:"mainSizeMode",required:!0,type:{name:"enum",value:[{value:'"SMALL"'},{value:'"MEDIUM"'},{value:'"LARGE"'}]}},layouts:{defaultValue:null,description:"",name:"layouts",required:!0,type:{name:"any"}},config:{defaultValue:null,description:"",name:"config",required:!0,type:{name:"any"}},appConfig:{defaultValue:null,description:"",name:"appConfig",required:!0,type:{name:"IMAppConfig"}},isCardWidget:{defaultValue:null,description:"",name:"isCardWidget",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/setting-components/components/switch-card-layout/card-layout-setting.tsx#CardLayoutSetting"]={docgenInfo:card_layout_setting_CardLayoutSetting.__docgenInfo,name:"CardLayoutSetting",path:"../jimu-ui/advanced/lib/setting-components/components/switch-card-layout/card-layout-setting.tsx#CardLayoutSetting"})}catch(__react_docgen_typescript_loader_error){}function handelDialogInfos(targetDialogId){var _a,_b;const state=(0,jimu_core.Vp3)().getState().appStateInBuilder,currentPageId=state.appRuntimeInfo.currentPageId,currentDialogId=state.appRuntimeInfo.currentDialogId;let dialogInfos=state.appRuntimeInfo.dialogInfos||(0,jimu_core.J3Z)({});const dialogs=state.appConfig.dialogs,pages=state.appConfig.pages,dialogInfo={canClose:!0,checked:!0,isClosed:!0};return currentDialogId&&((null===(_a=dialogs[currentDialogId])||void 0===_a?void 0:_a.isSplash)&&(dialogInfos=dialogInfos.set(currentDialogId,dialogInfo)),pages[currentPageId].autoOpenDialogId&&(dialogInfos=dialogInfos.set(currentPageId+"-"+pages[currentPageId].autoOpenDialogId,dialogInfo)),targetDialogId&&Object.keys(pages).forEach((id=>{pages[id].autoOpenDialogId===currentDialogId&&(dialogInfos=dialogInfos.set(id+"-"+currentDialogId,dialogInfo))}))),(null===(_b=dialogs[currentDialogId])||void 0===_b?void 0:_b.isSplash)||Object.keys(dialogs).some((id=>{dialogs[id].isSplash&&(dialogInfos=dialogInfos.set(id,dialogInfo))})),targetDialogId&&dialogInfos&&Object.keys(dialogInfos).forEach((dlgId=>{dlgId!==targetDialogId&&dlgId!==currentPageId+"-"+targetDialogId||(dialogInfos=dialogInfos.set(dlgId,{canClose:isDialogCanClose(targetDialogId),checked:!1,isClosed:!1}))})),dialogInfos}function isDialogCanClose(dialogId){const dialog=(0,jimu_core.Vp3)().getState().appStateInBuilder.appConfig.dialogs[dialogId];return!dialog.interactionType||!dialog.confirmBeforeClose}function changeCurrentPage(targetPageId){const state=(0,jimu_core.Vp3)().getState().appStateInBuilder,currentPageId=state.appRuntimeInfo.currentPageId,currentDialogId=state.appRuntimeInfo.currentDialogId;if(jimu_for_builder.builderAppSync.publishChangeSelectionToApp(null),currentDialogId){const dialogInfos=handelDialogInfos();jimu_for_builder.builderAppSync.publishDialogInfosChangeToApp(dialogInfos),jimu_for_builder.builderAppSync.publishDialogChangeToApp(null)}currentPageId!==targetPageId&&jimu_for_builder.builderAppSync.publishPageChangeToApp(targetPageId),jimu_for_builder.builderAppSync.publishActivePagePartChangeToApp(jimu_core.xH7.Body)}function changeCurrentDialog(targetDialogId,forceRefresh=!1){jimu_for_builder.builderAppSync.publishChangeSelectionToApp(null);const currentDialogId=(0,jimu_core.Vp3)().getState().appStateInBuilder.appRuntimeInfo.currentDialogId;if(forceRefresh||targetDialogId!==currentDialogId){jimu_for_builder.builderAppSync.publishDialogChangeToApp(targetDialogId);const dialogInfos=handelDialogInfos(targetDialogId);jimu_for_builder.builderAppSync.publishDialogInfosChangeToApp(dialogInfos),jimu_for_builder.builderAppSync.publishActivePagePartChangeToApp(null)}}(0,jimu_theme.SF)("jimu-ui/advanced/setting-components/",styles_namespaceObject);try{handelDialogInfos.displayName="handelDialogInfos",handelDialogInfos.__docgenInfo={description:"",displayName:"handelDialogInfos",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#handelDialogInfos"]={docgenInfo:handelDialogInfos.__docgenInfo,name:"handelDialogInfos",path:"../jimu-ui/advanced/setting-components.tsx#handelDialogInfos"})}catch(__react_docgen_typescript_loader_error){}try{changeCurrentPage.displayName="changeCurrentPage",changeCurrentPage.__docgenInfo={description:"",displayName:"changeCurrentPage",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#changeCurrentPage"]={docgenInfo:changeCurrentPage.__docgenInfo,name:"changeCurrentPage",path:"../jimu-ui/advanced/setting-components.tsx#changeCurrentPage"})}catch(__react_docgen_typescript_loader_error){}try{JimuLayerViewSelectorDeprecated.displayName="JimuLayerViewSelectorDeprecated",JimuLayerViewSelectorDeprecated.__docgenInfo={description:"",displayName:"JimuLayerViewSelectorDeprecated",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#JimuLayerViewSelectorDeprecated"]={docgenInfo:JimuLayerViewSelectorDeprecated.__docgenInfo,name:"JimuLayerViewSelectorDeprecated",path:"../jimu-ui/advanced/setting-components.tsx#JimuLayerViewSelectorDeprecated"})}catch(__react_docgen_typescript_loader_error){}try{StylePicker.displayName="StylePicker",StylePicker.__docgenInfo={description:"",displayName:"StylePicker",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#StylePicker"]={docgenInfo:StylePicker.__docgenInfo,name:"StylePicker",path:"../jimu-ui/advanced/setting-components.tsx#StylePicker"})}catch(__react_docgen_typescript_loader_error){}try{RadioGroup.displayName="RadioGroup",RadioGroup.__docgenInfo={description:"",displayName:"RadioGroup",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#RadioGroup"]={docgenInfo:RadioGroup.__docgenInfo,name:"RadioGroup",path:"../jimu-ui/advanced/setting-components.tsx#RadioGroup"})}catch(__react_docgen_typescript_loader_error){}try{_SidePopper.displayName="_SidePopper",_SidePopper.__docgenInfo={description:"The `SidePopper` component is a popper which reference node is left/right side panel of builder.\n\n```ts\nimport { SidePopper } from 'jimu-ui/advanced/setting-components'\n```",displayName:"_SidePopper",props:{position:{defaultValue:null,description:"If `left`, the side popper is next to left sidebar of builder.\nIf `right`, the side popper is next to right sidebar of builder.",name:"position",required:!0,type:{name:"enum",value:[{value:'"left"'},{value:'"right"'}]}},isOpen:{defaultValue:null,description:"If `true`, the side popper is visible.",name:"isOpen",required:!0,type:{name:"boolean"}},toggle:{defaultValue:null,description:"Toggle to open/close the side popper.",name:"toggle",required:!0,type:{name:"() => void"}},trigger:{defaultValue:null,description:"Element which triggers side popper.\n\nBy default, clicking left/right sidebar of builder will close the side popper automatically.\nClicking `trigger` won't close the side popper.",name:"trigger",required:!0,type:{name:"HTMLElement | HTMLElement[]"}},backToFocusNode:{defaultValue:null,description:"An element to focus after the side popper is closed.\n`backToFocusNode` is for accessibility purposes.\n\nIf don't pass in `backToFocusNode`, will focus `trigger` after side popper is closed.",name:"backToFocusNode",required:!1,type:{name:"HTMLElement"}},widgetId:{defaultValue:null,description:"If current selected widget is not the widget, will close the side popper.",name:"widgetId",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"Provide a uniform header.",name:"title",required:!1,type:{name:"ReactNode"}},addFocusableContainerClass:{defaultValue:{value:"false\r\nAdd the FOCUSABLE_CONTAINER_CLASS to the title to make the close button focused in case of 508 problems.\r\n\r\nOnly needs this prop if the components in the content of the SidePopper uses FOCUSABLE_CONTAINER_CLASS."},description:"@ignore",name:"addFocusableContainerClass",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"Defines the class names added to the component.\n@ignore",name:"className",required:!1,type:{name:"string"}},children:{defaultValue:null,description:"A ref that points to the used popper instance.",name:"children",required:!1,type:{name:"ReactNode"}},"aria-label":{defaultValue:null,description:"To provide a label for the side popper for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},tabIndex:{defaultValue:null,description:"The `tabIndex` added to the element.",name:"tabIndex",required:!1,type:{name:"number"}},role:{defaultValue:{value:"dialog"},description:"Defines the role added to the element.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-modal":{defaultValue:null,description:"Indicates whether the element, or another grouping element it controls, is modal.",name:"aria-modal",required:!1,type:{name:"boolean"}},onKeyDown:{defaultValue:null,description:"Fired at an Element when a key is pressed down and that key normally produces a character value.",name:"onKeyDown",required:!1,type:{name:"KeyboardEventHandler<HTMLDivElement>"}},onClick:{defaultValue:null,description:"Fire callback when the component is clicked.",name:"onClick",required:!1,type:{name:"MouseEventHandler<HTMLDivElement>"}},onMouseDown:{defaultValue:null,description:"Callback fired when the mouse is pressed on the element.",name:"onMouseDown",required:!1,type:{name:"MouseEventHandler<HTMLDivElement>"}},onMouseEnter:{defaultValue:null,description:"Fired at an Element when a pointing device (usually a mouse) is initially moved so that its hotshots is within the element at which the event was fired.",name:"onMouseEnter",required:!1,type:{name:"MouseEventHandler<HTMLDivElement>"}},onMouseLeave:{defaultValue:null,description:"Fired at an Element when the cursor of a pointing device (usually a mouse) is moved out of it.",name:"onMouseLeave",required:!1,type:{name:"MouseEventHandler<HTMLDivElement>"}},placement:{defaultValue:{value:"bottom"},description:"Describes the preferred placement of the popper.",name:"placement",required:!1,type:{name:"enum",value:[{value:'"bottom"'},{value:'"left"'},{value:'"right"'},{value:'"top"'},{value:'"bottom-end"'},{value:'"bottom-start"'},{value:'"left-end"'},{value:'"left-start"'},{value:'"right-end"'},{value:'"right-start"'},{value:'"top-end"'},{value:'"top-start"'}]}},shiftOptions:{defaultValue:null,description:"The shift options can shift the popper when it will overflow the clipping boundary.\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.",name:"shiftOptions",required:!1,type:{name:"boolean | { mainAxis?: boolean; crossAxis?: boolean; limiter?: { fn: (state: MiddlewareState) => Coords; options?: any; }; rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; boundary?: Boundary; }"}},offsetOptions:{defaultValue:null,description:"The offset modifier can shift your popper on both its axis.\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.",name:"offsetOptions",required:!1,type:{name:"boolean | [number, number] | OffsetOptions"}},flipOptions:{defaultValue:{value:"true"},description:"The flip options can flip the popper when it will overflow the clipping boundary.\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.\nNote: `flipOptions` and `autoPlacementOptions` cannot be used together inside the same middleware array; make sure you choose only one of them to use.",name:"flipOptions",required:!1,type:{name:"boolean | { mainAxis?: boolean; crossAxis?: boolean; rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; ... 4 more ...; boundary?: Boundary; }"}},strategy:{defaultValue:{value:"absolute"},description:"Describes the positioning strategy to use.\nBy default, it is absolute, which in the simplest cases does not require repositioning of the popper.\nIf your reference element is in a fixed container, use the fixed strategy.",name:"strategy",required:!1,type:{name:"enum",value:[{value:'"fixed"'},{value:'"absolute"'}]}},arrowOptions:{defaultValue:{value:"false"},description:"The arrow options can show the arrow of the popper.\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.",name:"arrowOptions",required:!1,type:{name:"boolean | ArrowStyleOptions"}},unstyled:{defaultValue:null,description:"Whether to use this component without style.",name:"unstyled",required:!1,type:{name:"boolean"}},disablePortal:{defaultValue:{value:"false"},description:"Disable the portal behavior. The children stay within it's parent DOM hierarchy.",name:"disablePortal",required:!1,type:{name:"boolean"}},disableActivateOverlay:{defaultValue:{value:"false"},description:"If `true`, it prevents activating the overlay when clicking on the popper body.",name:"disableActivateOverlay",required:!1,type:{name:"boolean"}},disableOverlayManager:{defaultValue:{value:"false"},description:"If `true`, it disables z-index management via `state.overlays`.",name:"disableOverlayManager",required:!1,type:{name:"boolean"}},zIndex:{defaultValue:null,description:"@ignore",name:"zIndex",required:!1,type:{name:"number"}},autoUpdate:{defaultValue:{value:"false"},description:"Automatically updates the position of the floating element when necessary to ensure it stays anchored.",name:"autoUpdate",required:!1,type:{name:"boolean"}},inlineOptions:{defaultValue:null,description:"Improves positioning for inline reference elements that span over multiple lines.\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.",name:"inlineOptions",required:!1,type:{name:"boolean | InlineOptions"}},hideOptions:{defaultValue:{value:"true"},description:"The hide options can hide the popper when the reference is hidden.\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.",name:"hideOptions",required:!1,type:{name:'boolean | { strategy?: "referenceHidden" | "escaped"; rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; boundary?: Boundary; }'}},autoPlacementOptions:{defaultValue:{value:"false"},description:"The auto placement options can customize the behavior of the auto placement.\nNote: `flipOptions` and `autoPlacementOptions` cannot be used together inside the same middleware array; make sure you choose only one of them to use.",name:"autoPlacementOptions",required:!1,type:{name:"boolean | { crossAxis?: boolean; rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; alignment?: Alignment; autoAlignment?: boolean; allowedPlacements?: Placement[]; boundary?: Boundary; }"}},sizeOptions:{defaultValue:null,description:"Provides data to change the size of a floating element.\nThis is useful to ensure the floating element isn’t too big to fit in the viewport (or more specifically, its clipping context), especially when a maximum size isn’t specified.\nIt also allows matching the width/height of the reference element.\n\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.",name:"sizeOptions",required:!1,type:{name:"boolean | { rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; boundary?: Boundary; apply?: (args: { ...; } & { ...; }) => Promisable<...>; }"}},middleware:{defaultValue:null,description:'Middleware allow you to customize the behavior of the positioning and be as granular as you want, adding your own custom logic.\nIt is recommended to use `hideOptions`, `shiftOptions`, `flipOptions`, `offsetOptions` directly.\n"Node": If `middleware` is set, the above options will be ignored and the component\'s preset middleware will not be enabled.',name:"middleware",required:!1,type:{name:"{ name: string; options?: any; fn: (state: { placement: Placement; strategy: Strategy; middlewareData: MiddlewareData; x: number; y: number; initialPlacement: Placement; rects: ElementRects; platform: Platform; elements: Elements; }) => Promisable<...>; }[]"}},keepMount:{defaultValue:{value:"false"},description:"Whether to keep the popper mounted when it is not visible.",name:"keepMount",required:!1,type:{name:"boolean"}},version:{defaultValue:null,description:"When this value changes, will recalculate the position.\nNote: The `version` cannot be used together with `autoUpdate`, and `autoUpdate` has higher priority.\n@ignore",name:"version",required:!1,type:{name:"number"}},leftSidebarCollapse:{defaultValue:null,description:"",name:"leftSidebarCollapse",required:!0,type:{name:"boolean"}},rightSidebarCollapse:{defaultValue:null,description:"",name:"rightSidebarCollapse",required:!0,type:{name:"boolean"}},dispatch:{defaultValue:null,description:"",name:"dispatch",required:!0,type:{name:"any"}},isTemplatePage:{defaultValue:null,description:"",name:"isTemplatePage",required:!0,type:{name:"boolean"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"IMThemeVariables"}},layoutSelection:{defaultValue:null,description:"",name:"layoutSelection",required:!1,type:{name:"IMSelection"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#_SidePopper"]={docgenInfo:_SidePopper.__docgenInfo,name:"_SidePopper",path:"../jimu-ui/advanced/setting-components.tsx#_SidePopper"})}catch(__react_docgen_typescript_loader_error){}try{WidgetListPopper.displayName="WidgetListPopper",WidgetListPopper.__docgenInfo={description:"",displayName:"WidgetListPopper",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(item: LayoutItemConstructorProps) => void"}},placement:{defaultValue:null,description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"bottom"'},{value:'"left"'},{value:'"right"'},{value:'"top"'},{value:'"bottom-end"'},{value:'"bottom-start"'},{value:'"left-end"'},{value:'"left-start"'},{value:'"right-end"'},{value:'"right-start"'},{value:'"top-end"'},{value:'"top-start"'}]}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"(evt?: MouseEvent<any, MouseEvent>) => void"}},isPlaceholder:{defaultValue:null,description:"",name:"isPlaceholder",required:!1,type:{name:"boolean"}},referenceElement:{defaultValue:null,description:"",name:"referenceElement",required:!0,type:{name:"HTMLElement"}},isAccepted:{defaultValue:null,description:"",name:"isAccepted",required:!0,type:{name:"(item: LayoutItemConstructorProps, isReplacePlaceholder: boolean) => boolean"}},css:{defaultValue:null,description:"",name:"css",required:!1,type:{name:"SerializedStyles"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#WidgetListPopper"]={docgenInfo:WidgetListPopper.__docgenInfo,name:"WidgetListPopper",path:"../jimu-ui/advanced/setting-components.tsx#WidgetListPopper"})}catch(__react_docgen_typescript_loader_error){}try{WidgetList.displayName="WidgetList",WidgetList.__docgenInfo={description:"",displayName:"WidgetList",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(item: LayoutItemConstructorProps) => void"}},isPlaceholder:{defaultValue:null,description:"",name:"isPlaceholder",required:!1,type:{name:"boolean"}},isAccepted:{defaultValue:null,description:"",name:"isAccepted",required:!0,type:{name:"(item: LayoutItemConstructorProps, isReplacePlaceholder: boolean) => boolean"}},onWidgetLoaded:{defaultValue:null,description:"",name:"onWidgetLoaded",required:!1,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#WidgetList"]={docgenInfo:WidgetList.__docgenInfo,name:"WidgetList",path:"../jimu-ui/advanced/setting-components.tsx#WidgetList"})}catch(__react_docgen_typescript_loader_error){}try{SortTreePopper.displayName="SortTreePopper",SortTreePopper.__docgenInfo={description:"",displayName:"SortTreePopper",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},referenceElement:{defaultValue:null,description:"",name:"referenceElement",required:!0,type:{name:"HTMLElement"}},placement:{defaultValue:null,description:"",name:"placement",required:!1,type:{name:"enum",value:[{value:'"bottom"'},{value:'"left"'},{value:'"right"'},{value:'"top"'},{value:'"bottom-end"'},{value:'"bottom-start"'},{value:'"left-end"'},{value:'"left-start"'},{value:'"right-end"'},{value:'"right-start"'},{value:'"top-end"'},{value:'"top-start"'}]}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"(evt?: MouseEvent<any, MouseEvent>) => void"}},css:{defaultValue:null,description:"",name:"css",required:!1,type:{name:"SerializedStyles"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},rootItemJson:{defaultValue:null,description:"",name:"rootItemJson",required:!0,type:{name:"TreeItemType"}},onSort:{defaultValue:null,description:"",name:"onSort",required:!1,type:{name:"(actionData: UpdateTreeActionDataType & TreeDropItemActionDataType) => void"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!0,type:{name:"(item: TreeItemType) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#SortTreePopper"]={docgenInfo:SortTreePopper.__docgenInfo,name:"SortTreePopper",path:"../jimu-ui/advanced/setting-components.tsx#SortTreePopper"})}catch(__react_docgen_typescript_loader_error){}try{SortTree.displayName="SortTree",SortTree.__docgenInfo={description:"",displayName:"SortTree",props:{rootItemJson:{defaultValue:null,description:"Root item node of the tree.",name:"rootItemJson",required:!0,type:{name:"TreeItemType"}},onSort:{defaultValue:null,description:"",name:"onSort",required:!0,type:{name:"(actionData: UpdateTreeActionDataType & TreeDropItemActionDataType) => void"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!0,type:{name:"(item: TreeItemType) => void"}},css:{defaultValue:null,description:"",name:"css",required:!1,type:{name:"SerializedStyles"}},className:{defaultValue:null,description:"Add class name to the component.",name:"className",required:!1,type:{name:"string"}},treeAlignmentType:{defaultValue:{value:"TreeAlignmentType.Typical"},description:"The key of template that you want to use to render the content.",name:"treeAlignmentType",required:!1,type:{name:"enum",value:[{value:'"TYPICAL"'},{value:'"INTACT"'}]}},treeStyle:{defaultValue:null,description:"The styles for component.",name:"treeStyle",required:!1,type:{name:"enum",value:[{value:'"BASIC"'},{value:'"CARD"'}]}},singleLineText:{defaultValue:null,description:"Single line text is displayed. Only for layer selector now.\n@ignore",name:"singleLineText",required:!1,type:{name:"boolean"}},isTree:{defaultValue:{value:"tree"},description:"It's used to check if tree since List extends Tree.\n@ignore",name:"isTree",required:!1,type:{name:"boolean"}},collapseStyle:{defaultValue:{value:"TreeCollapseStyle.Plus"},description:"The style of expand/collapse icon.",name:"collapseStyle",required:!1,type:{name:"enum",value:[{value:'"PLUS_MINUS"'},{value:'"ARROW"'}]}},rootItemVisible:{defaultValue:null,description:"Whether to display the root item itself.",name:"rootItemVisible",required:!1,type:{name:"boolean"}},handleAction:{defaultValue:null,description:"The callback that will fire when any action is triggered (use default prop value unless for advanced usage)\n@ignore",name:"handleAction",required:!1,type:{name:"<ArgT, ResT>(actionKey: TreeActionType | TreeMainActionType | TreeItemActionType, actionData: ArgT, refComponent: _Tree | TreeMain | _TreeItem) => ResT"}},forwardRef:{defaultValue:null,description:"ForwardRef to component outer div.\n@ignore",name:"forwardRef",required:!1,type:{name:"(ref: any) => void"}},size:{defaultValue:{value:"default"},description:"Defines the size of the Tree item.",name:"size",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"sm"'},{value:'"lg"'}]}},topTag:{defaultValue:null,description:"A component or tag name to render the component's top level node.\n@ignore",name:"topTag",required:!1,type:{name:"string | ComponentType<any>"}},dndEnabled:{defaultValue:null,description:"Whether to support drag-and-drop feature.",name:"dndEnabled",required:!1,type:{name:"boolean"}},showCheckbox:{defaultValue:{value:"false"},description:"Whether to show checkbox for every item.\nUse `checkboxLinkage` instead.\n@deprecated\n@ignore",name:"showCheckbox",required:!1,type:{name:"boolean"}},disableDoubleClickTitle:{defaultValue:{value:"false"},description:"Whether to disable the double-click on the title to enter edit mode.",name:"disableDoubleClickTitle",required:!1,type:{name:"boolean"}},showRemoveIconForDisabledItem:{defaultValue:{value:"false"},description:"Whether to show the remove icon for any disabled item.",name:"showRemoveIconForDisabledItem",required:!1,type:{name:"boolean"}},isMultiSelection:{defaultValue:{value:"true"},description:"Whether to support multi-selection.",name:"isMultiSelection",required:!1,type:{name:"boolean"}},checkboxLinkage:{defaultValue:{value:"true"},description:"Whether the specific tree node change affects parent and child nodes.\nOnly valid when isMultiSelection is true.",name:"checkboxLinkage",required:!1,type:{name:"boolean"}},searchedText:{defaultValue:null,description:"Wrap the searchedText with a <strong/> TAG when it exists.\n@ignore",name:"searchedText",required:!1,type:{name:"string"}},renderOverrideItemDraggableContainer:{defaultValue:null,description:"@ignore",name:"renderOverrideItemDraggableContainer",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},renderOverrideItemDroppableContainer:{defaultValue:null,description:"@ignore",name:"renderOverrideItemDroppableContainer",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},renderOverrideItemChildrenToggle:{defaultValue:null,description:"@ignore",name:"renderOverrideItemChildrenToggle",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},renderOverrideItemDragHandle:{defaultValue:null,description:"@ignore",name:"renderOverrideItemDragHandle",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},renderOverrideItemDetailToggle:{defaultValue:null,description:"@ignore",name:"renderOverrideItemDetailToggle",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},renderOverrideItemIcon:{defaultValue:null,description:"@ignore",name:"renderOverrideItemIcon",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},renderOverrideItemTitle:{defaultValue:null,description:"@ignore",name:"renderOverrideItemTitle",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},renderOverrideItemCommands:{defaultValue:null,description:"@ignore",name:"renderOverrideItemCommands",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},renderOverrideItemMainLine:{defaultValue:null,description:"Render the custom main line content.",name:"renderOverrideItemMainLine",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},renderOverrideItemDetailLine:{defaultValue:null,description:"@ignore",name:"renderOverrideItemDetailLine",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},renderOverrideItemBody:{defaultValue:null,description:"@ignore",name:"renderOverrideItemBody",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},renderOverrideItemContent:{defaultValue:null,description:"@ignore",name:"renderOverrideItemContent",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},renderOverrideItemSubitems:{defaultValue:null,description:"@ignore",name:"renderOverrideItemSubitems",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},renderOverrideItem:{defaultValue:null,description:"@ignore",name:"renderOverrideItem",required:!1,type:{name:"(actionData: TreeRenderOverrideItemDataType, refComponent: _TreeItem) => any"}},overrideItemBlockInfo:{defaultValue:null,description:"Fired when getting the block layout info.",name:"overrideItemBlockInfo",required:!1,type:{name:"(actionData: TreeOverrideItemBlockInfoActionDataType, refComponent: _TreeItem) => TreeItemBlockInfoType"}},handleInitTreeItemDndDropZone:{defaultValue:null,description:"Fired when adding or removing dnd features into the component.\n@ignore",name:"handleInitTreeItemDndDropZone",required:!1,type:{name:"(actionData: TreeInitDndActionDataType, refComponent: _TreeItem) => void"}},handleInitTreeItemDndDrag:{defaultValue:null,description:"@ignore",name:"handleInitTreeItemDndDrag",required:!1,type:{name:"(actionData: TreeInitDndActionDataType, refComponent: _TreeItem) => void"}},handleDidDrop:{defaultValue:null,description:"Fired when dropping a dragging item.\n@ignore",name:"handleDidDrop",required:!1,type:{name:"(actionData: TreeDropItemActionDataType, refComponent: _TreeItem) => void"}},handleDisabledItemRemoved:{defaultValue:null,description:"Fired when checking if the disabled item supports to be removed.\n@ignore",name:"handleDisabledItemRemoved",required:!1,type:{name:"(actionData: any, refComponent: _TreeItem) => void"}},handleToggleDetail:{defaultValue:null,description:"Fired when detail content is toggling for display.\n@ignore",name:"handleToggleDetail",required:!1,type:{name:"(actionData: TreeToggleItemDetailActionDataType, refComponent: _TreeItem) => void"}},handleExpandItem:{defaultValue:null,description:"Fired when expanding or collapsing the children.\n@ignore",name:"handleExpandItem",required:!1,type:{name:"(actionData: TreeExpandItemActionDataType, refComponent: _TreeItem) => void"}},handleEditingTextChange:{defaultValue:null,description:"Fired when changing the editing text of item title.\n@ignore",name:"handleEditingTextChange",required:!1,type:{name:"(actionData: TreeEditingItemDataType, refComponent: _TreeItem) => void"}},handleExitEditing:{defaultValue:null,description:"Fired when exiting the editing text mode.\n@ignore",name:"handleExitEditing",required:!1,type:{name:"(actionData: TreeEditingItemDataType, refComponent: _TreeItem) => void"}},handleStartEditing:{defaultValue:null,description:"Fired when starting to edit text of item title.\n@ignore",name:"handleStartEditing",required:!1,type:{name:"(actionData: TreeEditingItemDataType, refComponent: _TreeItem) => void"}},handleFindSearchText:{defaultValue:null,description:"Fired when searching for filter text.\n@ignore",name:"handleFindSearchText",required:!1,type:{name:"(actionData: TreeActionDataType, refComponent: _TreeItem) => any"}},isItemDisplayable:{defaultValue:null,description:"Fired when checking if the item should be displayed.",name:"isItemDisplayable",required:!1,type:{name:"(actionData: TreeActionDataType, refComponent: _TreeItem) => boolean"}},isItemFocused:{defaultValue:null,description:"Fired when checking if an item is focused.\nPlease use `itemStateChecked` to set the focus state for each tree item.\n@deprecated",name:"isItemFocused",required:!1,type:{name:"(actionData: any, refComponent: _TreeItem) => boolean"}},handleClickItemBody:{defaultValue:null,description:"Fired when clicking the item body.\n@ignore",name:"handleClickItemBody",required:!1,type:{name:"(actionData: TreeActionDataType, refComponent: _TreeItem) => void"}},handleClickItemTitle:{defaultValue:null,description:"Fired when clicking the item title.\n@ignore",name:"handleClickItemTitle",required:!1,type:{name:"(actionData: TreeActionDataType, refComponent: _TreeItem) => void"}},handleDoubleClickItemTitle:{defaultValue:null,description:"Fired when double-clicking the item title.\n@ignore",name:"handleDoubleClickItemTitle",required:!1,type:{name:"(actionData: TreeActionDataType, refComponent: _TreeItem) => void"}},handleCheckboxChanged:{defaultValue:null,description:"Fired when the check state of the item is changed.\n@ignore",name:"handleCheckboxChanged",required:!1,type:{name:"(actionData: TreeActionDataType, refComponent: _TreeItem) => void"}},handleUpdateItem:{defaultValue:null,description:"Fired when item json is changed.\n@ignore",name:"handleUpdateItem",required:!1,type:{name:"(actionData: UpdateTreeActionDataType, refComponent: _TreeItem) => void"}},getDragItemJsons:{defaultValue:null,description:"Fired when getting current drag item data.\n@ignore",name:"getDragItemJsons",required:!1,type:{name:"(actionData: TreeDragItemActionDataType, refComponent: _TreeItem) => TreeDragItemActionDataType"}},setDragItemJsons:{defaultValue:null,description:"Fired when setting current drag item data.\n@ignore",name:"setDragItemJsons",required:!1,type:{name:"(actionData: TreeDragItemActionDataType, refComponent: _TreeItem) => void"}},handleFocusItem:{defaultValue:null,description:"Fired when setting the item focused.\n@ignore",name:"handleFocusItem",required:!1,type:{name:"(actionData: TreeActionDataType, refComponent: _TreeItem) => void"}},isItemDroppable:{defaultValue:null,description:"Triggered to verify if the current item is being targeted by a dragged item.\nThe possible drop positions are inside, above, or below.",name:"isItemDroppable",required:!1,type:{name:"(actionData: TreeCheckDropItemActionDataType, refComponent: _TreeItem) => void"}},isFolder:{defaultValue:null,description:"Fired when checking if the current item is a folder.\nDisable the checkbox if the current item is in the root and has no children.",name:"isFolder",required:!1,type:{name:"(actionData: TreeCheckDropItemActionDataType, refComponent: _TreeItem) => void"}},onDidDrop:{defaultValue:null,description:"Fired when a dragged item is dropped.",name:"onDidDrop",required:!1,type:{name:"(actionData: TreeDropItemActionDataType, refComponent: _TreeItem) => void"}},onToggleDetail:{defaultValue:null,description:"Fired when the detail content is expanded for display.",name:"onToggleDetail",required:!1,type:{name:"(actionData: TreeToggleItemDetailActionDataType, refComponent: _TreeItem) => void"}},onExpandItem:{defaultValue:null,description:"Fired when children are expanded or collapsed.",name:"onExpandItem",required:!1,type:{name:"(actionData: TreeExpandItemActionDataType, refComponent: _TreeItem) => void"}},onEditingTextChange:{defaultValue:null,description:"Fired when the text editing of an item title is changed.",name:"onEditingTextChange",required:!1,type:{name:"(actionData: TreeEditingItemDataType, refComponent: _TreeItem) => void"}},onExitEditing:{defaultValue:null,description:"Fired when the text-editing mode is exited.",name:"onExitEditing",required:!1,type:{name:"(actionData: TreeEditingItemDataType, refComponent: _TreeItem) => void"}},onClickItemBody:{defaultValue:null,description:"Fired when the item body is clicked.",name:"onClickItemBody",required:!1,type:{name:"(actionData: TreeActionDataType, refComponent: _TreeItem) => void"}},onDoubleClickItemTitle:{defaultValue:null,description:"Fired when the item title is double-clicked.",name:"onDoubleClickItemTitle",required:!1,type:{name:"(actionData: TreeActionDataType, refComponent: _TreeItem) => void"}},onClickItemCommand:{defaultValue:null,description:"Fired when any command item is clicked.",name:"onClickItemCommand",required:!1,type:{name:"(actionData: CommandActionDataType, refComponent: _TreeItem) => void"}},onUpdateItem:{defaultValue:null,description:"Fired when the item is updated.",name:"onUpdateItem",required:!1,type:{name:"(actionData: UpdateTreeActionDataType, refComponent: _TreeItem) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#SortTree"]={docgenInfo:SortTree.__docgenInfo,name:"SortTree",path:"../jimu-ui/advanced/setting-components.tsx#SortTree"})}catch(__react_docgen_typescript_loader_error){}try{CollapsableResetPanel.displayName="CollapsableResetPanel",CollapsableResetPanel.__docgenInfo={description:"",displayName:"CollapsableResetPanel",props:{children:{defaultValue:null,description:"The children of this component.",name:"children",required:!1,type:{name:"ReactNode"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},isEmpty:{defaultValue:null,description:"",name:"isEmpty",required:!0,type:{name:"boolean"}},onReset:{defaultValue:null,description:"",name:"onReset",required:!0,type:{name:"() => void"}},type:{defaultValue:{value:"default"},description:"The type of this component.",name:"type",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"primary"'}]}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"Defines the role added to the element.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.\nBy default, the accessible name is computed from any text content inside the element.\nIf lacking, provide an aria-label.",name:"aria-label",required:!1,type:{name:"string"}},tag:{defaultValue:{value:"div"},description:"The tag of the component.\nIf the tag is 'label', clicking on the label will trigger the form child element.",name:"tag",required:!1,type:{name:"enum",value:[{value:'"div"'},{value:'"label"'}]}},disabled:{defaultValue:{value:"false"},description:"Whether this component is disabled.",name:"disabled",required:!1,type:{name:"boolean"}},keepMount:{defaultValue:{value:"false"},description:"If true, the children will be hidden but do not unmount when isOpen is false.\n@ignore",name:"keepMount",required:!1,type:{name:"boolean"}},isOpen:{defaultValue:{value:"false"},description:"Controls whether the `Collapse` component is open or closed.\nIt's recommended use props `in`.",name:"isOpen",required:!1,type:{name:"boolean"}},enter:{defaultValue:{value:"true"},description:"Enable or disable enter transitions.",name:"enter",required:!1,type:{name:"boolean"}},defaultIsOpen:{defaultValue:null,description:"The default open state of the component.",name:"defaultIsOpen",required:!1,type:{name:"boolean"}},timeout:{defaultValue:{value:"standard"},description:"The duration for the transition, in milliseconds.\nYou may specify a single timeout for all transitions, or individually with an object.\n\nSet to 'auto' to automatically calculate transition time based on height.",name:"timeout",required:!1,type:{name:'TransitionDurationOption | "auto"'}},in:{defaultValue:{value:"false"},description:"If `true`, the component will transition in.",name:"in",required:!1,type:{name:"boolean"}},mountOnEnter:{defaultValue:{value:"false"},description:'By default the child component is mounted immediately along with the\nparent Transition component. If you want to "lazy mount" the component on\nthe first `in={true}` you can set `mountOnEnter`. After the first enter\ntransition the component will stay mounted, even on "exited", unless you\nalso specify `unmountOnExit`.',name:"mountOnEnter",required:!1,type:{name:"boolean"}},unmountOnExit:{defaultValue:{value:"false"},description:"By default the child component stays mounted after it reaches the\n'exited' state. Set `unmountOnExit` if you'd prefer to unmount the\ncomponent after it finishes exiting.",name:"unmountOnExit",required:!1,type:{name:"boolean"}},onEnter:{defaultValue:null,description:'Callback fired before the "entering" status is applied. An extra\nparameter `isAppearing` is supplied to indicate if the enter stage is\noccurring on the initial mount',name:"onEnter",required:!1,type:{name:"(node: HTMLElement, isAppearing: boolean) => void"}},onEntering:{defaultValue:null,description:'Callback fired after the "entering" status is applied. An extra parameter\nisAppearing is supplied to indicate if the enter stage is occurring on\nthe initial mount',name:"onEntering",required:!1,type:{name:"(node: HTMLElement, isAppearing: boolean) => void"}},onEntered:{defaultValue:null,description:'Callback fired after the "entered" status is applied. An extra parameter\nisAppearing is supplied to indicate if the enter stage is occurring on\nthe initial mount',name:"onEntered",required:!1,type:{name:"(node: HTMLElement, isAppearing: boolean) => void"}},onExit:{defaultValue:null,description:'Callback fired before the "exiting" status is applied.',name:"onExit",required:!1,type:{name:"(node: HTMLElement) => void"}},onExiting:{defaultValue:null,description:'Callback fired after the "exiting" status is applied.',name:"onExiting",required:!1,type:{name:"(node: HTMLElement) => void"}},onExited:{defaultValue:null,description:'Callback fired after the "exited" status is applied.',name:"onExited",required:!1,type:{name:"(node: HTMLElement) => void"}},nodeRef:{defaultValue:null,description:"A React reference to DOM element that need to transition: https://stackoverflow.com/a/51127130/4671932\nWhen `nodeRef` prop is used, node is not passed to callback functions (e.g. onEnter) because user already has direct access to the node.\nWhen changing `key` prop of `Transition` in a `TransitionGroup` a new `nodeRef` need to be provided to `Transition` with changed `key`\nprop (@see https://github.com/reactjs/react-transition-group/blob/master/test/Transition-test.js).",name:"nodeRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},appear:{defaultValue:{value:"false"},description:'Normally a component is not transitioned if it is shown when the\n`<Transition>` component mounts. If you want to transition on the first\nmount set  appear to true, and the component will transition in as soon\nas the `<Transition>` mounts. Note: there are no specific "appear" states.\nappear only adds an additional enter transition.',name:"appear",required:!1,type:{name:"boolean"}},exit:{defaultValue:{value:"true"},description:"Enable or disable exit transitions.",name:"exit",required:!1,type:{name:"boolean"}},easing:{defaultValue:null,description:"The transition timing function.\nYou may specify a single easing or a object containing enter and exit values.",name:"easing",required:!1,type:{name:"TransitionEasingOption"}},addEndListener:{defaultValue:null,description:"Add a custom transition end trigger. Called with the transitioning DOM\nnode and a done callback. Allows for more fine grained transition end\nlogic. Note: Timeouts are still used as a fallback if provided.",name:"addEndListener",required:!1,type:{name:"(node: HTMLElement, done: () => void) => void"}},wrapperClassName:{defaultValue:null,description:"Defines the class names added to the wrapper container().",name:"wrapperClassName",required:!1,type:{name:"string"}},orientation:{defaultValue:{value:"vertical"},description:"The transition orientation.",name:"orientation",required:!1,type:{name:"enum",value:[{value:'"vertical"'},{value:'"horizontal"'}]}},collapsedSize:{defaultValue:{value:"'0px'"},description:"The width (horizontal) or height (vertical) of the container when collapsed.",name:"collapsedSize",required:!1,type:{name:"string | number"}},bottomLine:{defaultValue:{value:"false"},description:"Whether to show the bottom line.",name:"bottomLine",required:!1,type:{name:"boolean"}},headerTag:{defaultValue:{value:"label"},description:"The tag of the panel header.\nIf the tag is 'label', clicking on the label will trigger the form child element.",name:"headerTag",required:!1,type:{name:"enum",value:[{value:'"div"'},{value:'"label"'}]}},rightIcon:{defaultValue:null,description:"The right icon displayed after the label.",name:"rightIcon",required:!1,type:{name:"any"}},rightActiveIcon:{defaultValue:null,description:"The active icon displayed after the label.",name:"rightActiveIcon",required:!1,type:{name:"any"}},leftIcon:{defaultValue:null,description:"The left icon displayed before the label.",name:"leftIcon",required:!1,type:{name:"any"}},wrapLabel:{defaultValue:{value:"false"},description:"Whether to wrap label.",name:"wrapLabel",required:!1,type:{name:"boolean"}},level:{defaultValue:{value:"0"},description:"Defines the label size of the component.\n@ignore",name:"level",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"}]}},onRequestOpen:{defaultValue:null,description:"Invoked when opening the component.",name:"onRequestOpen",required:!1,type:{name:"() => void"}},onRequestClose:{defaultValue:null,description:"Invoked when closing the component.",name:"onRequestClose",required:!1,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#CollapsableResetPanel"]={docgenInfo:CollapsableResetPanel.__docgenInfo,name:"CollapsableResetPanel",path:"../jimu-ui/advanced/setting-components.tsx#CollapsableResetPanel"})}catch(__react_docgen_typescript_loader_error){}try{LabelReset.displayName="LabelReset",LabelReset.__docgenInfo={description:"",displayName:"LabelReset",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},isEmpty:{defaultValue:null,description:"",name:"isEmpty",required:!0,type:{name:"boolean"}},onReset:{defaultValue:null,description:"",name:"onReset",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#LabelReset"]={docgenInfo:LabelReset.__docgenInfo,name:"LabelReset",path:"../jimu-ui/advanced/setting-components.tsx#LabelReset"})}catch(__react_docgen_typescript_loader_error){}try{PageTemplatePopper.displayName="PageTemplatePopper",PageTemplatePopper.__docgenInfo={description:"",displayName:"PageTemplatePopper",props:{theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:"IMThemeVariables"}},referenceElement:{defaultValue:null,description:"",name:"referenceElement",required:!0,type:{name:"HTMLElement"}},formatMessage:{defaultValue:null,description:"",name:"formatMessage",required:!0,type:{name:"(id: string, values?: { [key: string]: any; }) => string"}},onItemSelect:{defaultValue:null,description:"",name:"onItemSelect",required:!0,type:{name:"(item: any) => void"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#PageTemplatePopper"]={docgenInfo:PageTemplatePopper.__docgenInfo,name:"PageTemplatePopper",path:"../jimu-ui/advanced/setting-components.tsx#PageTemplatePopper"})}catch(__react_docgen_typescript_loader_error){}try{WindowTemplatePopper.displayName="WindowTemplatePopper",WindowTemplatePopper.__docgenInfo={description:"",displayName:"WindowTemplatePopper",props:{theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:"IMThemeVariables"}},referenceElement:{defaultValue:null,description:"",name:"referenceElement",required:!0,type:{name:"HTMLElement"}},formatMessage:{defaultValue:null,description:"",name:"formatMessage",required:!0,type:{name:"(id: string, values?: { [key: string]: any; }) => string"}},onItemSelect:{defaultValue:null,description:"",name:"onItemSelect",required:!0,type:{name:"(item: any) => void"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#WindowTemplatePopper"]={docgenInfo:WindowTemplatePopper.__docgenInfo,name:"WindowTemplatePopper",path:"../jimu-ui/advanced/setting-components.tsx#WindowTemplatePopper"})}catch(__react_docgen_typescript_loader_error){}try{TemplateSelector.displayName="TemplateSelector",TemplateSelector.__docgenInfo={description:"",displayName:"TemplateSelector",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"IMThemeVariables"}},templateContentStyle:{defaultValue:null,description:"",name:"templateContentStyle",required:!1,type:{name:"CSSProperties"}},templates:{defaultValue:null,description:"",name:"templates",required:!0,type:{name:"Template[]"}},referenceElement:{defaultValue:null,description:"",name:"referenceElement",required:!0,type:{name:"HTMLElement"}},onItemSelect:{defaultValue:null,description:"",name:"onItemSelect",required:!0,type:{name:"(item: Template) => void"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#TemplateSelector"]={docgenInfo:TemplateSelector.__docgenInfo,name:"TemplateSelector",path:"../jimu-ui/advanced/setting-components.tsx#TemplateSelector"})}catch(__react_docgen_typescript_loader_error){}try{TemplateList.displayName="TemplateList",TemplateList.__docgenInfo={description:"",displayName:"TemplateList",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},templates:{defaultValue:null,description:"",name:"templates",required:!0,type:{name:"Template[]"}},onItemSelect:{defaultValue:null,description:"",name:"onItemSelect",required:!0,type:{name:"(item: Template) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#TemplateList"]={docgenInfo:TemplateList.__docgenInfo,name:"TemplateList",path:"../jimu-ui/advanced/setting-components.tsx#TemplateList"})}catch(__react_docgen_typescript_loader_error){}try{SortSetting.displayName="SortSetting",SortSetting.__docgenInfo={description:"",displayName:"SortSetting",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"ImmutableArray<SortSettingOption>"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(sortData: SortSettingOption[], index?: number) => void"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"IMThemeVariables"}},useDataSource:{defaultValue:null,description:"",name:"useDataSource",required:!0,type:{name:"IMUseDataSource"}},singleRowItemOnly:{defaultValue:null,description:"",name:"singleRowItemOnly",required:!1,type:{name:"boolean"}},optionRenderFunction:{defaultValue:null,description:"",name:"optionRenderFunction",required:!1,type:{name:"(props: SortSettingProps, createOptionElement: (useDataSources: ImmutableArray<UseDataSource>, el: any, index: number) => any) => Element"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#SortSetting"]={docgenInfo:SortSetting.__docgenInfo,name:"SortSetting",path:"../jimu-ui/advanced/setting-components.tsx#SortSetting"})}catch(__react_docgen_typescript_loader_error){}try{DirectionSelectorProps.displayName="DirectionSelectorProps",DirectionSelectorProps.__docgenInfo={description:"The DirectionSelector component props.",displayName:"DirectionSelectorProps",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#DirectionSelectorProps"]={docgenInfo:DirectionSelectorProps.__docgenInfo,name:"DirectionSelectorProps",path:"../jimu-ui/advanced/setting-components.tsx#DirectionSelectorProps"})}catch(__react_docgen_typescript_loader_error){}try{DirectionSelector.displayName="DirectionSelector",DirectionSelector.__docgenInfo={description:"The `DirectionSelector` component provides the user with the ability to set the direction.\n\n```ts\nimport { DirectionSelector } from 'jimu-ui/advanced/setting-components'\n```",displayName:"DirectionSelector",props:{size:{defaultValue:{value:"sm"},description:"Defines the size of this component.",name:"size",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"sm"'},{value:'"lg"'}]}},autoFlip:{defaultValue:{value:"true"},description:"Flip the icon automatically if the locale is following right-to-left (RTL).",name:"autoFlip",required:!1,type:{name:"boolean"}},vertical:{defaultValue:{value:"false"},description:"Display components vertically or not.",name:"vertical",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"Invoked when direction changes.\n@param vertical\n@event",name:"onChange",required:!1,type:{name:"(vertical?: boolean) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#DirectionSelector"]={docgenInfo:DirectionSelector.__docgenInfo,name:"DirectionSelector",path:"../jimu-ui/advanced/setting-components.tsx#DirectionSelector"})}catch(__react_docgen_typescript_loader_error){}try{MapWidgetSelectorComponent.displayName="MapWidgetSelectorComponent",MapWidgetSelectorComponent.__docgenInfo={description:"",displayName:"MapWidgetSelectorComponent",props:{useMapWidgetIds:{defaultValue:null,description:"The array of Map widget IDs. It is returned from the onSelect function.",name:"useMapWidgetIds",required:!1,type:{name:"ImmutableArray<string>"}},autoSelect:{defaultValue:{value:"true"},description:"Whether automatically select the only Map widget in the same page/window",name:"autoSelect",required:!1,type:{name:"boolean"}},onSelect:{defaultValue:null,description:"The function will be called when a Map widget item listed in this component is selected.",name:"onSelect",required:!1,type:{name:"(useMapWidgetIds: string[]) => void"}},isNeedConfirmBeforeChange:{defaultValue:{value:"false"},description:"Whether need a confirm modal popup when changed the connected map widget.",name:"isNeedConfirmBeforeChange",required:!1,type:{name:"boolean"}},confirmMessage:{defaultValue:null,description:"Defines the confirm text if need a confirm modal.",name:"confirmMessage",required:!1,type:{name:"string"}},showLabel:{defaultValue:{value:"false"},description:"If true, show a default label('Select a map widget')",name:"showLabel",required:!1,type:{name:"boolean"}},warningMessage:{defaultValue:{value:"''"},description:"Show a warning message for a non-empty string",name:"warningMessage",required:!1,type:{name:"string"}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.\nBy default, the accessible name is computed from any text content inside the element.",name:"aria-label",required:!1,type:{name:"string"}},"a11y-description":{defaultValue:null,description:"To provide a description for interactive components for accessibility purposes.\n`aria-describedby` has a high priority than `a11y-description`.",name:"a11y-description",required:!1,type:{name:"string"}},"aria-describedby":{defaultValue:null,description:"Identifies the element (or elements) that describes the object for accessibility purposes.",name:"aria-describedby",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#MapWidgetSelectorComponent"]={docgenInfo:MapWidgetSelectorComponent.__docgenInfo,name:"MapWidgetSelectorComponent",path:"../jimu-ui/advanced/setting-components.tsx#MapWidgetSelectorComponent"})}catch(__react_docgen_typescript_loader_error){}try{MapWidgetSelector.displayName="MapWidgetSelector",MapWidgetSelector.__docgenInfo={description:"A react component for selecting Map widgets. It is usually used on the setting page of a widget,\nand works with JimuMapViewComponent, JimuLayerViewComponent, JimuMapViewS and JimuLayerViewSelector.",displayName:"MapWidgetSelector",props:{useMapWidgetIds:{defaultValue:null,description:"The array of Map widget IDs. It is returned from the onSelect function.",name:"useMapWidgetIds",required:!1,type:{name:"ImmutableArray<string>"}},autoSelect:{defaultValue:{value:"true"},description:"Whether automatically select the only Map widget in the same page/window",name:"autoSelect",required:!1,type:{name:"boolean"}},onSelect:{defaultValue:null,description:"The function will be called when a Map widget item listed in this component is selected.",name:"onSelect",required:!1,type:{name:"(useMapWidgetIds: string[]) => void"}},isNeedConfirmBeforeChange:{defaultValue:{value:"false"},description:"Whether need a confirm modal popup when changed the connected map widget.",name:"isNeedConfirmBeforeChange",required:!1,type:{name:"boolean"}},confirmMessage:{defaultValue:null,description:"Defines the confirm text if need a confirm modal.",name:"confirmMessage",required:!1,type:{name:"string"}},showLabel:{defaultValue:{value:"false"},description:"If true, show a default label('Select a map widget')",name:"showLabel",required:!1,type:{name:"boolean"}},warningMessage:{defaultValue:{value:"''"},description:"Show a warning message for a non-empty string",name:"warningMessage",required:!1,type:{name:"string"}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.\nBy default, the accessible name is computed from any text content inside the element.",name:"aria-label",required:!1,type:{name:"string"}},"a11y-description":{defaultValue:null,description:"To provide a description for interactive components for accessibility purposes.\n`aria-describedby` has a high priority than `a11y-description`.",name:"a11y-description",required:!1,type:{name:"string"}},"aria-describedby":{defaultValue:null,description:"Identifies the element (or elements) that describes the object for accessibility purposes.",name:"aria-describedby",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#MapWidgetSelector"]={docgenInfo:MapWidgetSelector.__docgenInfo,name:"MapWidgetSelector",path:"../jimu-ui/advanced/setting-components.tsx#MapWidgetSelector"})}catch(__react_docgen_typescript_loader_error){}try{JimuLayerViewSelectorComponent.displayName="JimuLayerViewSelectorComponent",JimuLayerViewSelectorComponent.__docgenInfo={description:"A component for selecting layers in a map view. It is usually used in the\nsetting page to get the layer id.\n```\nimport { JimuLayerViewSelector } from 'jimu-ui/advanced/setting-components'\n```",displayName:"JimuLayerViewSelectorComponent",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},jimuMapViewId:{defaultValue:null,description:"The id of a jimuMapView, it is usually returned by selecting from a jimuMapViewSelector component.",name:"jimuMapViewId",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"Callback when selected layers are changed.",name:"onChange",required:!0,type:{name:"(jimuLayerViewIds: string[]) => void"}},selectedValues:{defaultValue:null,description:"Selected values.",name:"selectedValues",required:!1,type:{name:"string[]"}},hideLayers:{defaultValue:{value:"false"},description:"Whether to hide some types of jimuLayerView.\n@param jimuLayerView : the current layer.\n@param jimuLayerViews : all the layers that from a jimuMapView.",name:"hideLayers",required:!1,type:{name:"(jimuLayerView: JimuLayerView, jimuLayerViews: JimuLayerViews) => boolean"}},disableLayers:{defaultValue:{value:"false"},description:"Whether to disable some types of jimuLayerView, which are not selectable.\n@param jimuLayerView : the current layer.\n@param jimuLayerViews : all the layers that from a jimuMapView.",name:"disableLayers",required:!1,type:{name:"(jimuLayerView: JimuLayerView, jimuLayerViews: JimuLayerViews) => boolean"}},isMultiSelection:{defaultValue:{value:"false"},description:"Whether or not allow to select multi items.",name:"isMultiSelection",required:!1,type:{name:"boolean"}},isInDropdown:{defaultValue:{value:"false"},description:"Whether or not `JimuLayerViewSelector` component is used in the `JimuLayerViewSelectorDropdown` component. This property is used for height style calculation.\nThis property is not recommended, if you want to implement a dropdown, you can use `JimuLayerViewSelectorDropdown` component.",name:"isInDropdown",required:!1,type:{name:"boolean"}},isShowTables:{defaultValue:{value:"false"},description:"Whether or not to show the tables.",name:"isShowTables",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#JimuLayerViewSelectorComponent"]={docgenInfo:JimuLayerViewSelectorComponent.__docgenInfo,name:"JimuLayerViewSelectorComponent",path:"../jimu-ui/advanced/setting-components.tsx#JimuLayerViewSelectorComponent"})}catch(__react_docgen_typescript_loader_error){}try{JimuLayerViewSelector.displayName="JimuLayerViewSelector",JimuLayerViewSelector.__docgenInfo={description:"A component for selecting layers in a map view. It is usually used on the settings page of a widget.\nIt includes a dropdown button to display the selected values and JimuLayerViewSelector component to select the layer.\n```\nimport { JimuLayerViewSelector } from 'jimu-ui/advanced/setting-components'\n```",displayName:"JimuLayerViewSelector",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},jimuMapViewId:{defaultValue:null,description:"The id of a jimuMapView, it is usually returned by selecting from a jimuMapViewSelector component.",name:"jimuMapViewId",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"Callback when selected layers are changed.",name:"onChange",required:!0,type:{name:"(jimuLayerViewIds: string[]) => void"}},selectedValues:{defaultValue:null,description:"Selected values.",name:"selectedValues",required:!1,type:{name:"string[]"}},hideLayers:{defaultValue:{value:"false"},description:"Whether to hide some types of jimuLayerView.\n@param jimuLayerView : the current layer.\n@param jimuLayerViews : all the layers that from a jimuMapView.",name:"hideLayers",required:!1,type:{name:"(jimuLayerView: JimuLayerView, jimuLayerViews: JimuLayerViews) => boolean"}},disableLayers:{defaultValue:{value:"false"},description:"Whether to disable some types of jimuLayerView, which are not selectable.\n@param jimuLayerView : the current layer.\n@param jimuLayerViews : all the layers that from a jimuMapView.",name:"disableLayers",required:!1,type:{name:"(jimuLayerView: JimuLayerView, jimuLayerViews: JimuLayerViews) => boolean"}},isMultiSelection:{defaultValue:{value:"false"},description:"Whether or not allow to select multi items.",name:"isMultiSelection",required:!1,type:{name:"boolean"}},isInDropdown:{defaultValue:{value:"false"},description:"Whether or not `JimuLayerViewSelector` component is used in the `JimuLayerViewSelectorDropdown` component. This property is used for height style calculation.\nThis property is not recommended, if you want to implement a dropdown, you can use `JimuLayerViewSelectorDropdown` component.",name:"isInDropdown",required:!1,type:{name:"boolean"}},isShowTables:{defaultValue:{value:"false"},description:"Whether or not to show the tables.",name:"isShowTables",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#JimuLayerViewSelector"]={docgenInfo:JimuLayerViewSelector.__docgenInfo,name:"JimuLayerViewSelector",path:"../jimu-ui/advanced/setting-components.tsx#JimuLayerViewSelector"})}catch(__react_docgen_typescript_loader_error){}try{JimuLayerViewSelectorDropdownComponent.displayName="JimuLayerViewSelectorDropdownComponent",JimuLayerViewSelectorDropdownComponent.__docgenInfo={description:"A component for selecting layers in a map view. It is usually used on the settings page of a widget.\nIt includes a dropdown button to display the selected values and JimuLayerViewSelector component to select the layer.\n```\nimport { JimuLayerViewSelectorDropdown } from 'jimu-ui/advanced/setting-components'\n```",displayName:"JimuLayerViewSelectorDropdownComponent",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"Callback when selected layers are changed.",name:"onChange",required:!0,type:{name:"(jimuLayerViewIds: string[]) => void"}},selectedValues:{defaultValue:null,description:"Selected values.",name:"selectedValues",required:!1,type:{name:"string[]"}},isMultiSelection:{defaultValue:{value:"false"},description:"Whether or not allow to select multi items.",name:"isMultiSelection",required:!1,type:{name:"boolean"}},jimuMapViewId:{defaultValue:null,description:"The id of a jimuMapView, it is usually returned by selecting from a jimuMapViewSelector component.",name:"jimuMapViewId",required:!0,type:{name:"string"}},hideLayers:{defaultValue:{value:"false"},description:"Whether to hide some types of jimuLayerView.\n@param jimuLayerView : the current layer.\n@param jimuLayerViews : all the layers that from a jimuMapView.",name:"hideLayers",required:!1,type:{name:"(jimuLayerView: JimuLayerView, jimuLayerViews: JimuLayerViews) => boolean"}},disableLayers:{defaultValue:{value:"false"},description:"Whether to disable some types of jimuLayerView, which are not selectable.\n@param jimuLayerView : the current layer.\n@param jimuLayerViews : all the layers that from a jimuMapView.",name:"disableLayers",required:!1,type:{name:"(jimuLayerView: JimuLayerView, jimuLayerViews: JimuLayerViews) => boolean"}},isShowTables:{defaultValue:{value:"false"},description:"Whether or not to show the tables.",name:"isShowTables",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#JimuLayerViewSelectorDropdownComponent"]={docgenInfo:JimuLayerViewSelectorDropdownComponent.__docgenInfo,name:"JimuLayerViewSelectorDropdownComponent",path:"../jimu-ui/advanced/setting-components.tsx#JimuLayerViewSelectorDropdownComponent"})}catch(__react_docgen_typescript_loader_error){}try{JimuLayerViewSelectorDropdown.displayName="JimuLayerViewSelectorDropdown",JimuLayerViewSelectorDropdown.__docgenInfo={description:"A component for selecting layers in a map view. It is usually used on the settings page of a widget.\nIt includes a dropdown button to display the selected values and JimuLayerViewSelector component to select the layer.\n```\nimport { JimuLayerViewSelectorDropdown } from 'jimu-ui/advanced/setting-components'\n```",displayName:"JimuLayerViewSelectorDropdown",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"Callback when selected layers are changed.",name:"onChange",required:!0,type:{name:"(jimuLayerViewIds: string[]) => void"}},selectedValues:{defaultValue:null,description:"Selected values.",name:"selectedValues",required:!1,type:{name:"string[]"}},isMultiSelection:{defaultValue:{value:"false"},description:"Whether or not allow to select multi items.",name:"isMultiSelection",required:!1,type:{name:"boolean"}},jimuMapViewId:{defaultValue:null,description:"The id of a jimuMapView, it is usually returned by selecting from a jimuMapViewSelector component.",name:"jimuMapViewId",required:!0,type:{name:"string"}},hideLayers:{defaultValue:{value:"false"},description:"Whether to hide some types of jimuLayerView.\n@param jimuLayerView : the current layer.\n@param jimuLayerViews : all the layers that from a jimuMapView.",name:"hideLayers",required:!1,type:{name:"(jimuLayerView: JimuLayerView, jimuLayerViews: JimuLayerViews) => boolean"}},disableLayers:{defaultValue:{value:"false"},description:"Whether to disable some types of jimuLayerView, which are not selectable.\n@param jimuLayerView : the current layer.\n@param jimuLayerViews : all the layers that from a jimuMapView.",name:"disableLayers",required:!1,type:{name:"(jimuLayerView: JimuLayerView, jimuLayerViews: JimuLayerViews) => boolean"}},isShowTables:{defaultValue:{value:"false"},description:"Whether or not to show the tables.",name:"isShowTables",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#JimuLayerViewSelectorDropdown"]={docgenInfo:JimuLayerViewSelectorDropdown.__docgenInfo,name:"JimuLayerViewSelectorDropdown",path:"../jimu-ui/advanced/setting-components.tsx#JimuLayerViewSelectorDropdown"})}catch(__react_docgen_typescript_loader_error){}try{JimuMapViewSelectorComponent.displayName="JimuMapViewSelectorComponent",JimuMapViewSelectorComponent.__docgenInfo={description:"A component for selecting map views in a map. It is usually used on the settings page of a widget,\nand works with JimuLayerViewSelector.\n```\nimport { JimuMapViewSelector } from 'jimu-ui/advanced/setting-components'\n```",displayName:"JimuMapViewSelectorComponent",props:{useMapViewIds:{defaultValue:null,description:"The array of map view IDs. It is returned from the onChange function.",name:"useMapViewIds",required:!1,type:{name:"string[]"}},onChange:{defaultValue:null,description:"The function will be called when a map view item listed in this component is selected.",name:"onChange",required:!1,type:{name:"(useMapViewId: string[]) => void"}},"aria-label":{defaultValue:null,description:"To provide a label for the selector for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#JimuMapViewSelectorComponent"]={docgenInfo:JimuMapViewSelectorComponent.__docgenInfo,name:"JimuMapViewSelectorComponent",path:"../jimu-ui/advanced/setting-components.tsx#JimuMapViewSelectorComponent"})}catch(__react_docgen_typescript_loader_error){}try{JimuMapViewSelector.displayName="JimuMapViewSelector",JimuMapViewSelector.__docgenInfo={description:"A component for selecting map views in a map. It is usually used on the settings page of a widget,\nand works with JimuLayerViewSelector.\n```\nimport { JimuMapViewSelector } from 'jimu-ui/advanced/setting-components'\n```",displayName:"JimuMapViewSelector",props:{useMapViewIds:{defaultValue:null,description:"The array of map view IDs. It is returned from the onChange function.",name:"useMapViewIds",required:!1,type:{name:"string[]"}},onChange:{defaultValue:null,description:"The function will be called when a map view item listed in this component is selected.",name:"onChange",required:!1,type:{name:"(useMapViewId: string[]) => void"}},"aria-label":{defaultValue:null,description:"To provide a label for the selector for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#JimuMapViewSelector"]={docgenInfo:JimuMapViewSelector.__docgenInfo,name:"JimuMapViewSelector",path:"../jimu-ui/advanced/setting-components.tsx#JimuMapViewSelector"})}catch(__react_docgen_typescript_loader_error){}try{SettingSection.displayName="SettingSection",SettingSection.__docgenInfo={description:"The `SettingSection` component allows users to display setting content as a section.\nUse this component to wrap `SettingRow` component(s).\n\n```ts\nimport { SettingSection } from 'jimu-ui/advanced/setting-components'\n```",displayName:"SettingSection",props:{role:{defaultValue:null,description:"To provide a role for section",name:"role",required:!1,type:{name:"string"}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.\nBy default, the accessible name is computed from any text content inside the element.\nIf lacking, provide an aria-label.",name:"aria-label",required:!1,type:{name:"string"}},"aria-describedby":{defaultValue:null,description:"The aria-describedby attribute lists the ids of the elements that describe the object. It is used to establish a relationship between widgets or groups and the text that describes them.\n@ignore",name:"aria-describedby",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"Defines the title text for the setting section.",name:"title",required:!1,type:{name:"ReactNode"}},children:{defaultValue:null,description:"The children of this component.",name:"children",required:!1,type:{name:"ReactNode"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#SettingSection"]={docgenInfo:SettingSection.__docgenInfo,name:"SettingSection",path:"../jimu-ui/advanced/setting-components.tsx#SettingSection"})}catch(__react_docgen_typescript_loader_error){}try{SettingRow.displayName="SettingRow",SettingRow.__docgenInfo={description:"The `SettingRow` component allows users to display setting content in a row.\nUse this component inside of the `SettingSection` component.\n\n```ts\nimport { SettingRow } from 'jimu-ui/advanced/setting-components'\n```",displayName:"SettingRow",props:{role:{defaultValue:null,description:"To provide a role for row",name:"role",required:!1,type:{name:"string"}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.\nBy default, the accessible name is computed from any text content inside the element.\nIf lacking, provide an aria-label.",name:"aria-label",required:!1,type:{name:"string"}},level:{defaultValue:{value:"3"},description:"@ignore Three different levels of label",name:"level",required:!1,type:{name:"enum",value:[{value:"1"},{value:"2"},{value:"3"}]}},label:{defaultValue:null,description:"Defines the label text for the setting row.",name:"label",required:!1,type:{name:"ReactNode"}},tag:{defaultValue:{value:"div"},description:"The tag of the component.\nIf the tag is 'label', clicking on the label will trigger the form child element.",name:"tag",required:!1,type:{name:"enum",value:[{value:'"div"'},{value:'"label"'}]}},flow:{defaultValue:null,description:"Indicates whether the children should flow to the next line.\n'wrap' - the children will flow to the next line.\n'no-wrap' - the children will stay in the line as the label.",name:"flow",required:!1,type:{name:"enum",value:[{value:'"wrap"'},{value:'"no-wrap"'}]}},indented:{defaultValue:null,description:"Indicates whether to indent the row.",name:"indented",required:!1,type:{name:"boolean"}},truncateLabel:{defaultValue:null,description:"Indicates whether to truncate long label text.",name:"truncateLabel",required:!1,type:{name:"boolean"}},children:{defaultValue:null,description:"The children of this component.",name:"children",required:!1,type:{name:"ReactNode"}},bottomLine:{defaultValue:{value:"false"},description:"Whether to show the bottom line.",name:"bottomLine",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#SettingRow"]={docgenInfo:SettingRow.__docgenInfo,name:"SettingRow",path:"../jimu-ui/advanced/setting-components.tsx#SettingRow"})}catch(__react_docgen_typescript_loader_error){}try{SettingCollapse.displayName="SettingCollapse",SettingCollapse.__docgenInfo={description:"The `SettingCollapse` component allows users to show the collapsible panel.",displayName:"SettingCollapse",props:{headerTag:{defaultValue:{value:"label"},description:"The tag of the panel header.\nIf the tag is 'label', clicking on the label will trigger the form child element.",name:"headerTag",required:!1,type:{name:"enum",value:[{value:'"div"'},{value:'"label"'}]}},defaultIsOpen:{defaultValue:null,description:"The default open state of the component.",name:"defaultIsOpen",required:!1,type:{name:"boolean"}},children:{defaultValue:null,description:"The children of this component.",name:"children",required:!1,type:{name:"ReactNode"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"Defines the role added to the element.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.\nBy default, the accessible name is computed from any text content inside the element.\nIf lacking, provide an aria-label.",name:"aria-label",required:!1,type:{name:"string"}},keepMount:{defaultValue:{value:"false"},description:"If true, the children will be hidden but do not unmount when isOpen is false.\n@ignore",name:"keepMount",required:!1,type:{name:"boolean"}},isOpen:{defaultValue:{value:"false"},description:"Controls whether the `Collapse` component is open or closed.\nIt's recommended use props `in`.",name:"isOpen",required:!1,type:{name:"boolean"}},enter:{defaultValue:{value:"true"},description:"Enable or disable enter transitions.",name:"enter",required:!1,type:{name:"boolean"}},timeout:{defaultValue:{value:"standard"},description:"The duration for the transition, in milliseconds.\nYou may specify a single timeout for all transitions, or individually with an object.\n\nSet to 'auto' to automatically calculate transition time based on height.",name:"timeout",required:!1,type:{name:'TransitionDurationOption | "auto"'}},in:{defaultValue:{value:"false"},description:"If `true`, the component will transition in.",name:"in",required:!1,type:{name:"boolean"}},mountOnEnter:{defaultValue:{value:"false"},description:'By default the child component is mounted immediately along with the\nparent Transition component. If you want to "lazy mount" the component on\nthe first `in={true}` you can set `mountOnEnter`. After the first enter\ntransition the component will stay mounted, even on "exited", unless you\nalso specify `unmountOnExit`.',name:"mountOnEnter",required:!1,type:{name:"boolean"}},unmountOnExit:{defaultValue:{value:"false"},description:"By default the child component stays mounted after it reaches the\n'exited' state. Set `unmountOnExit` if you'd prefer to unmount the\ncomponent after it finishes exiting.",name:"unmountOnExit",required:!1,type:{name:"boolean"}},onEnter:{defaultValue:null,description:'Callback fired before the "entering" status is applied. An extra\nparameter `isAppearing` is supplied to indicate if the enter stage is\noccurring on the initial mount',name:"onEnter",required:!1,type:{name:"(node: HTMLElement, isAppearing: boolean) => void"}},onEntering:{defaultValue:null,description:'Callback fired after the "entering" status is applied. An extra parameter\nisAppearing is supplied to indicate if the enter stage is occurring on\nthe initial mount',name:"onEntering",required:!1,type:{name:"(node: HTMLElement, isAppearing: boolean) => void"}},onEntered:{defaultValue:null,description:'Callback fired after the "entered" status is applied. An extra parameter\nisAppearing is supplied to indicate if the enter stage is occurring on\nthe initial mount',name:"onEntered",required:!1,type:{name:"(node: HTMLElement, isAppearing: boolean) => void"}},onExit:{defaultValue:null,description:'Callback fired before the "exiting" status is applied.',name:"onExit",required:!1,type:{name:"(node: HTMLElement) => void"}},onExiting:{defaultValue:null,description:'Callback fired after the "exiting" status is applied.',name:"onExiting",required:!1,type:{name:"(node: HTMLElement) => void"}},onExited:{defaultValue:null,description:'Callback fired after the "exited" status is applied.',name:"onExited",required:!1,type:{name:"(node: HTMLElement) => void"}},nodeRef:{defaultValue:null,description:"A React reference to DOM element that need to transition: https://stackoverflow.com/a/51127130/4671932\nWhen `nodeRef` prop is used, node is not passed to callback functions (e.g. onEnter) because user already has direct access to the node.\nWhen changing `key` prop of `Transition` in a `TransitionGroup` a new `nodeRef` need to be provided to `Transition` with changed `key`\nprop (@see https://github.com/reactjs/react-transition-group/blob/master/test/Transition-test.js).",name:"nodeRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},appear:{defaultValue:{value:"false"},description:'Normally a component is not transitioned if it is shown when the\n`<Transition>` component mounts. If you want to transition on the first\nmount set  appear to true, and the component will transition in as soon\nas the `<Transition>` mounts. Note: there are no specific "appear" states.\nappear only adds an additional enter transition.',name:"appear",required:!1,type:{name:"boolean"}},exit:{defaultValue:{value:"true"},description:"Enable or disable exit transitions.",name:"exit",required:!1,type:{name:"boolean"}},easing:{defaultValue:null,description:"The transition timing function.\nYou may specify a single easing or a object containing enter and exit values.",name:"easing",required:!1,type:{name:"TransitionEasingOption"}},addEndListener:{defaultValue:null,description:"Add a custom transition end trigger. Called with the transitioning DOM\nnode and a done callback. Allows for more fine grained transition end\nlogic. Note: Timeouts are still used as a fallback if provided.",name:"addEndListener",required:!1,type:{name:"(node: HTMLElement, done: () => void) => void"}},wrapperClassName:{defaultValue:null,description:"Defines the class names added to the wrapper container().",name:"wrapperClassName",required:!1,type:{name:"string"}},orientation:{defaultValue:{value:"vertical"},description:"The transition orientation.",name:"orientation",required:!1,type:{name:"enum",value:[{value:'"vertical"'},{value:'"horizontal"'}]}},collapsedSize:{defaultValue:{value:"'0px'"},description:"The width (horizontal) or height (vertical) of the container when collapsed.",name:"collapsedSize",required:!1,type:{name:"string | number"}},bottomLine:{defaultValue:{value:"false"},description:"Whether to show the bottom line.",name:"bottomLine",required:!1,type:{name:"boolean"}},rightIcon:{defaultValue:null,description:"The right icon displayed after the label.",name:"rightIcon",required:!1,type:{name:"any"}},rightActiveIcon:{defaultValue:null,description:"The active icon displayed after the label.",name:"rightActiveIcon",required:!1,type:{name:"any"}},leftIcon:{defaultValue:null,description:"The left icon displayed before the label.",name:"leftIcon",required:!1,type:{name:"any"}},label:{defaultValue:null,description:"The label displayed in the header of the component.",name:"label",required:!1,type:{name:"ReactNode"}},wrapLabel:{defaultValue:{value:"false"},description:"Whether to wrap label.",name:"wrapLabel",required:!1,type:{name:"boolean"}},disabled:{defaultValue:{value:"false"},description:"Whether this component is disabled.",name:"disabled",required:!1,type:{name:"boolean"}},type:{defaultValue:{value:"default"},description:"The type of this component.",name:"type",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"primary"'}]}},tag:{defaultValue:{value:"div"},description:"The tag of the component.\nIf the tag is 'label', clicking on the label will trigger the form child element.",name:"tag",required:!1,type:{name:"enum",value:[{value:'"div"'},{value:'"label"'}]}},level:{defaultValue:{value:"0"},description:"Defines the label size of the component.\n@ignore",name:"level",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"}]}},onRequestOpen:{defaultValue:null,description:"Invoked when opening the component.",name:"onRequestOpen",required:!1,type:{name:"() => void"}},onRequestClose:{defaultValue:null,description:"Invoked when closing the component.",name:"onRequestClose",required:!1,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#SettingCollapse"]={docgenInfo:SettingCollapse.__docgenInfo,name:"SettingCollapse",path:"../jimu-ui/advanced/setting-components.tsx#SettingCollapse"})}catch(__react_docgen_typescript_loader_error){}try{UnControlledSettingCollapse.displayName="UnControlledSettingCollapse",UnControlledSettingCollapse.__docgenInfo={description:"The `UnControlledSettingCollapse` is an uncontrolled component which allows users to show the collapsible panel.",displayName:"UnControlledSettingCollapse",props:{headerTag:{defaultValue:{value:"label"},description:"The tag of the panel header.\nIf the tag is 'label', clicking on the label will trigger the form child element.",name:"headerTag",required:!1,type:{name:"enum",value:[{value:'"div"'},{value:'"label"'}]}},defaultIsOpen:{defaultValue:null,description:"The default open state of the component.",name:"defaultIsOpen",required:!1,type:{name:"boolean"}},children:{defaultValue:null,description:"The children of this component.",name:"children",required:!1,type:{name:"ReactNode"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"Defines the role added to the element.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.\nBy default, the accessible name is computed from any text content inside the element.\nIf lacking, provide an aria-label.",name:"aria-label",required:!1,type:{name:"string"}},keepMount:{defaultValue:{value:"false"},description:"If true, the children will be hidden but do not unmount when isOpen is false.\n@ignore",name:"keepMount",required:!1,type:{name:"boolean"}},isOpen:{defaultValue:{value:"false"},description:"Controls whether the `Collapse` component is open or closed.\nIt's recommended use props `in`.",name:"isOpen",required:!1,type:{name:"boolean"}},enter:{defaultValue:{value:"true"},description:"Enable or disable enter transitions.",name:"enter",required:!1,type:{name:"boolean"}},timeout:{defaultValue:{value:"standard"},description:"The duration for the transition, in milliseconds.\nYou may specify a single timeout for all transitions, or individually with an object.\n\nSet to 'auto' to automatically calculate transition time based on height.",name:"timeout",required:!1,type:{name:'TransitionDurationOption | "auto"'}},in:{defaultValue:{value:"false"},description:"If `true`, the component will transition in.",name:"in",required:!1,type:{name:"boolean"}},mountOnEnter:{defaultValue:{value:"false"},description:'By default the child component is mounted immediately along with the\nparent Transition component. If you want to "lazy mount" the component on\nthe first `in={true}` you can set `mountOnEnter`. After the first enter\ntransition the component will stay mounted, even on "exited", unless you\nalso specify `unmountOnExit`.',name:"mountOnEnter",required:!1,type:{name:"boolean"}},unmountOnExit:{defaultValue:{value:"false"},description:"By default the child component stays mounted after it reaches the\n'exited' state. Set `unmountOnExit` if you'd prefer to unmount the\ncomponent after it finishes exiting.",name:"unmountOnExit",required:!1,type:{name:"boolean"}},onEnter:{defaultValue:null,description:'Callback fired before the "entering" status is applied. An extra\nparameter `isAppearing` is supplied to indicate if the enter stage is\noccurring on the initial mount',name:"onEnter",required:!1,type:{name:"(node: HTMLElement, isAppearing: boolean) => void"}},onEntering:{defaultValue:null,description:'Callback fired after the "entering" status is applied. An extra parameter\nisAppearing is supplied to indicate if the enter stage is occurring on\nthe initial mount',name:"onEntering",required:!1,type:{name:"(node: HTMLElement, isAppearing: boolean) => void"}},onEntered:{defaultValue:null,description:'Callback fired after the "entered" status is applied. An extra parameter\nisAppearing is supplied to indicate if the enter stage is occurring on\nthe initial mount',name:"onEntered",required:!1,type:{name:"(node: HTMLElement, isAppearing: boolean) => void"}},onExit:{defaultValue:null,description:'Callback fired before the "exiting" status is applied.',name:"onExit",required:!1,type:{name:"(node: HTMLElement) => void"}},onExiting:{defaultValue:null,description:'Callback fired after the "exiting" status is applied.',name:"onExiting",required:!1,type:{name:"(node: HTMLElement) => void"}},onExited:{defaultValue:null,description:'Callback fired after the "exited" status is applied.',name:"onExited",required:!1,type:{name:"(node: HTMLElement) => void"}},nodeRef:{defaultValue:null,description:"A React reference to DOM element that need to transition: https://stackoverflow.com/a/51127130/4671932\nWhen `nodeRef` prop is used, node is not passed to callback functions (e.g. onEnter) because user already has direct access to the node.\nWhen changing `key` prop of `Transition` in a `TransitionGroup` a new `nodeRef` need to be provided to `Transition` with changed `key`\nprop (@see https://github.com/reactjs/react-transition-group/blob/master/test/Transition-test.js).",name:"nodeRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},appear:{defaultValue:{value:"false"},description:'Normally a component is not transitioned if it is shown when the\n`<Transition>` component mounts. If you want to transition on the first\nmount set  appear to true, and the component will transition in as soon\nas the `<Transition>` mounts. Note: there are no specific "appear" states.\nappear only adds an additional enter transition.',name:"appear",required:!1,type:{name:"boolean"}},exit:{defaultValue:{value:"true"},description:"Enable or disable exit transitions.",name:"exit",required:!1,type:{name:"boolean"}},easing:{defaultValue:null,description:"The transition timing function.\nYou may specify a single easing or a object containing enter and exit values.",name:"easing",required:!1,type:{name:"TransitionEasingOption"}},addEndListener:{defaultValue:null,description:"Add a custom transition end trigger. Called with the transitioning DOM\nnode and a done callback. Allows for more fine grained transition end\nlogic. Note: Timeouts are still used as a fallback if provided.",name:"addEndListener",required:!1,type:{name:"(node: HTMLElement, done: () => void) => void"}},wrapperClassName:{defaultValue:null,description:"Defines the class names added to the wrapper container().",name:"wrapperClassName",required:!1,type:{name:"string"}},orientation:{defaultValue:{value:"vertical"},description:"The transition orientation.",name:"orientation",required:!1,type:{name:"enum",value:[{value:'"vertical"'},{value:'"horizontal"'}]}},collapsedSize:{defaultValue:{value:"'0px'"},description:"The width (horizontal) or height (vertical) of the container when collapsed.",name:"collapsedSize",required:!1,type:{name:"string | number"}},bottomLine:{defaultValue:{value:"false"},description:"Whether to show the bottom line.",name:"bottomLine",required:!1,type:{name:"boolean"}},rightIcon:{defaultValue:null,description:"The right icon displayed after the label.",name:"rightIcon",required:!1,type:{name:"any"}},rightActiveIcon:{defaultValue:null,description:"The active icon displayed after the label.",name:"rightActiveIcon",required:!1,type:{name:"any"}},leftIcon:{defaultValue:null,description:"The left icon displayed before the label.",name:"leftIcon",required:!1,type:{name:"any"}},label:{defaultValue:null,description:"The label displayed in the header of the component.",name:"label",required:!1,type:{name:"ReactNode"}},wrapLabel:{defaultValue:{value:"false"},description:"Whether to wrap label.",name:"wrapLabel",required:!1,type:{name:"boolean"}},disabled:{defaultValue:{value:"false"},description:"Whether this component is disabled.",name:"disabled",required:!1,type:{name:"boolean"}},type:{defaultValue:{value:"default"},description:"The type of this component.",name:"type",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"primary"'}]}},tag:{defaultValue:{value:"div"},description:"The tag of the component.\nIf the tag is 'label', clicking on the label will trigger the form child element.",name:"tag",required:!1,type:{name:"enum",value:[{value:'"div"'},{value:'"label"'}]}},level:{defaultValue:{value:"0"},description:"Defines the label size of the component.\n@ignore",name:"level",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"}]}},onRequestOpen:{defaultValue:null,description:"Invoked when opening the component.",name:"onRequestOpen",required:!1,type:{name:"() => void"}},onRequestClose:{defaultValue:null,description:"Invoked when closing the component.",name:"onRequestClose",required:!1,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#UnControlledSettingCollapse"]={docgenInfo:UnControlledSettingCollapse.__docgenInfo,name:"UnControlledSettingCollapse",path:"../jimu-ui/advanced/setting-components.tsx#UnControlledSettingCollapse"})}catch(__react_docgen_typescript_loader_error){}try{CollapsableToggle.displayName="CollapsableToggle",CollapsableToggle.__docgenInfo={description:"The `CollapsableToggle` component allows users to show the collapsible panel.",displayName:"CollapsableToggle",props:{defaultIsOpen:{defaultValue:null,description:"The default open state of the component.",name:"defaultIsOpen",required:!1,type:{name:"boolean"}},children:{defaultValue:null,description:"The children of this component.",name:"children",required:!1,type:{name:"ReactNode"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"Defines the role added to the element.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.\nBy default, the accessible name is computed from any text content inside the element.\nIf lacking, provide an aria-label.",name:"aria-label",required:!1,type:{name:"string"}},keepMount:{defaultValue:{value:"false"},description:"If true, the children will be hidden but do not unmount when isOpen is false.\n@ignore",name:"keepMount",required:!1,type:{name:"boolean"}},isOpen:{defaultValue:{value:"false"},description:"Controls whether the `Collapse` component is open or closed.\nIt's recommended use props `in`.",name:"isOpen",required:!1,type:{name:"boolean"}},enter:{defaultValue:{value:"true"},description:"Enable or disable enter transitions.",name:"enter",required:!1,type:{name:"boolean"}},timeout:{defaultValue:{value:"standard"},description:"The duration for the transition, in milliseconds.\nYou may specify a single timeout for all transitions, or individually with an object.\n\nSet to 'auto' to automatically calculate transition time based on height.",name:"timeout",required:!1,type:{name:'TransitionDurationOption | "auto"'}},in:{defaultValue:{value:"false"},description:"If `true`, the component will transition in.",name:"in",required:!1,type:{name:"boolean"}},mountOnEnter:{defaultValue:{value:"false"},description:'By default the child component is mounted immediately along with the\nparent Transition component. If you want to "lazy mount" the component on\nthe first `in={true}` you can set `mountOnEnter`. After the first enter\ntransition the component will stay mounted, even on "exited", unless you\nalso specify `unmountOnExit`.',name:"mountOnEnter",required:!1,type:{name:"boolean"}},unmountOnExit:{defaultValue:{value:"false"},description:"By default the child component stays mounted after it reaches the\n'exited' state. Set `unmountOnExit` if you'd prefer to unmount the\ncomponent after it finishes exiting.",name:"unmountOnExit",required:!1,type:{name:"boolean"}},onEnter:{defaultValue:null,description:'Callback fired before the "entering" status is applied. An extra\nparameter `isAppearing` is supplied to indicate if the enter stage is\noccurring on the initial mount',name:"onEnter",required:!1,type:{name:"(node: HTMLElement, isAppearing: boolean) => void"}},onEntering:{defaultValue:null,description:'Callback fired after the "entering" status is applied. An extra parameter\nisAppearing is supplied to indicate if the enter stage is occurring on\nthe initial mount',name:"onEntering",required:!1,type:{name:"(node: HTMLElement, isAppearing: boolean) => void"}},onEntered:{defaultValue:null,description:'Callback fired after the "entered" status is applied. An extra parameter\nisAppearing is supplied to indicate if the enter stage is occurring on\nthe initial mount',name:"onEntered",required:!1,type:{name:"(node: HTMLElement, isAppearing: boolean) => void"}},onExit:{defaultValue:null,description:'Callback fired before the "exiting" status is applied.',name:"onExit",required:!1,type:{name:"(node: HTMLElement) => void"}},onExiting:{defaultValue:null,description:'Callback fired after the "exiting" status is applied.',name:"onExiting",required:!1,type:{name:"(node: HTMLElement) => void"}},onExited:{defaultValue:null,description:'Callback fired after the "exited" status is applied.',name:"onExited",required:!1,type:{name:"(node: HTMLElement) => void"}},nodeRef:{defaultValue:null,description:"A React reference to DOM element that need to transition: https://stackoverflow.com/a/51127130/4671932\nWhen `nodeRef` prop is used, node is not passed to callback functions (e.g. onEnter) because user already has direct access to the node.\nWhen changing `key` prop of `Transition` in a `TransitionGroup` a new `nodeRef` need to be provided to `Transition` with changed `key`\nprop (@see https://github.com/reactjs/react-transition-group/blob/master/test/Transition-test.js).",name:"nodeRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},appear:{defaultValue:{value:"false"},description:'Normally a component is not transitioned if it is shown when the\n`<Transition>` component mounts. If you want to transition on the first\nmount set  appear to true, and the component will transition in as soon\nas the `<Transition>` mounts. Note: there are no specific "appear" states.\nappear only adds an additional enter transition.',name:"appear",required:!1,type:{name:"boolean"}},exit:{defaultValue:{value:"true"},description:"Enable or disable exit transitions.",name:"exit",required:!1,type:{name:"boolean"}},easing:{defaultValue:null,description:"The transition timing function.\nYou may specify a single easing or a object containing enter and exit values.",name:"easing",required:!1,type:{name:"TransitionEasingOption"}},addEndListener:{defaultValue:null,description:"Add a custom transition end trigger. Called with the transitioning DOM\nnode and a done callback. Allows for more fine grained transition end\nlogic. Note: Timeouts are still used as a fallback if provided.",name:"addEndListener",required:!1,type:{name:"(node: HTMLElement, done: () => void) => void"}},wrapperClassName:{defaultValue:null,description:"Defines the class names added to the wrapper container().",name:"wrapperClassName",required:!1,type:{name:"string"}},orientation:{defaultValue:{value:"vertical"},description:"The transition orientation.",name:"orientation",required:!1,type:{name:"enum",value:[{value:'"vertical"'},{value:'"horizontal"'}]}},collapsedSize:{defaultValue:{value:"'0px'"},description:"The width (horizontal) or height (vertical) of the container when collapsed.",name:"collapsedSize",required:!1,type:{name:"string | number"}},bottomLine:{defaultValue:{value:"false"},description:"Whether to show the bottom line.",name:"bottomLine",required:!1,type:{name:"boolean"}},leftIcon:{defaultValue:null,description:"The left icon displayed before the label.",name:"leftIcon",required:!1,type:{name:"any"}},label:{defaultValue:null,description:"The label displayed in the header of the component.",name:"label",required:!1,type:{name:"ReactNode"}},wrapLabel:{defaultValue:{value:"false"},description:"Whether to wrap label.",name:"wrapLabel",required:!1,type:{name:"boolean"}},disabled:{defaultValue:{value:"false"},description:"Whether this component is disabled.",name:"disabled",required:!1,type:{name:"boolean"}},type:{defaultValue:{value:"default"},description:"The type of this component.",name:"type",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"primary"'}]}},tag:{defaultValue:{value:"div"},description:"The tag of the component.\nIf the tag is 'label', clicking on the label will trigger the form child element.",name:"tag",required:!1,type:{name:"enum",value:[{value:'"div"'},{value:'"label"'}]}},level:{defaultValue:{value:"0"},description:"Defines the label size of the component.\n@ignore",name:"level",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"}]}},onRequestOpen:{defaultValue:null,description:"Invoked when opening the component.",name:"onRequestOpen",required:!1,type:{name:"() => void"}},onRequestClose:{defaultValue:null,description:"Invoked when closing the component.",name:"onRequestClose",required:!1,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#CollapsableToggle"]={docgenInfo:CollapsableToggle.__docgenInfo,name:"CollapsableToggle",path:"../jimu-ui/advanced/setting-components.tsx#CollapsableToggle"})}catch(__react_docgen_typescript_loader_error){}try{CollapsableRadio.displayName="CollapsableRadio",CollapsableRadio.__docgenInfo={description:"The `CollapsableRadio` component allows users to show the collapsible panel.",displayName:"CollapsableRadio",props:{defaultIsOpen:{defaultValue:null,description:"The default open state of the component.",name:"defaultIsOpen",required:!1,type:{name:"boolean"}},children:{defaultValue:null,description:"The children of this component.",name:"children",required:!1,type:{name:"ReactNode"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"Defines the role added to the element.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.\nBy default, the accessible name is computed from any text content inside the element.\nIf lacking, provide an aria-label.",name:"aria-label",required:!1,type:{name:"string"}},keepMount:{defaultValue:{value:"false"},description:"If true, the children will be hidden but do not unmount when isOpen is false.\n@ignore",name:"keepMount",required:!1,type:{name:"boolean"}},isOpen:{defaultValue:{value:"false"},description:"Controls whether the `Collapse` component is open or closed.\nIt's recommended use props `in`.",name:"isOpen",required:!1,type:{name:"boolean"}},enter:{defaultValue:{value:"true"},description:"Enable or disable enter transitions.",name:"enter",required:!1,type:{name:"boolean"}},timeout:{defaultValue:{value:"standard"},description:"The duration for the transition, in milliseconds.\nYou may specify a single timeout for all transitions, or individually with an object.\n\nSet to 'auto' to automatically calculate transition time based on height.",name:"timeout",required:!1,type:{name:'TransitionDurationOption | "auto"'}},in:{defaultValue:{value:"false"},description:"If `true`, the component will transition in.",name:"in",required:!1,type:{name:"boolean"}},mountOnEnter:{defaultValue:{value:"false"},description:'By default the child component is mounted immediately along with the\nparent Transition component. If you want to "lazy mount" the component on\nthe first `in={true}` you can set `mountOnEnter`. After the first enter\ntransition the component will stay mounted, even on "exited", unless you\nalso specify `unmountOnExit`.',name:"mountOnEnter",required:!1,type:{name:"boolean"}},unmountOnExit:{defaultValue:{value:"false"},description:"By default the child component stays mounted after it reaches the\n'exited' state. Set `unmountOnExit` if you'd prefer to unmount the\ncomponent after it finishes exiting.",name:"unmountOnExit",required:!1,type:{name:"boolean"}},onEnter:{defaultValue:null,description:'Callback fired before the "entering" status is applied. An extra\nparameter `isAppearing` is supplied to indicate if the enter stage is\noccurring on the initial mount',name:"onEnter",required:!1,type:{name:"(node: HTMLElement, isAppearing: boolean) => void"}},onEntering:{defaultValue:null,description:'Callback fired after the "entering" status is applied. An extra parameter\nisAppearing is supplied to indicate if the enter stage is occurring on\nthe initial mount',name:"onEntering",required:!1,type:{name:"(node: HTMLElement, isAppearing: boolean) => void"}},onEntered:{defaultValue:null,description:'Callback fired after the "entered" status is applied. An extra parameter\nisAppearing is supplied to indicate if the enter stage is occurring on\nthe initial mount',name:"onEntered",required:!1,type:{name:"(node: HTMLElement, isAppearing: boolean) => void"}},onExit:{defaultValue:null,description:'Callback fired before the "exiting" status is applied.',name:"onExit",required:!1,type:{name:"(node: HTMLElement) => void"}},onExiting:{defaultValue:null,description:'Callback fired after the "exiting" status is applied.',name:"onExiting",required:!1,type:{name:"(node: HTMLElement) => void"}},onExited:{defaultValue:null,description:'Callback fired after the "exited" status is applied.',name:"onExited",required:!1,type:{name:"(node: HTMLElement) => void"}},nodeRef:{defaultValue:null,description:"A React reference to DOM element that need to transition: https://stackoverflow.com/a/51127130/4671932\nWhen `nodeRef` prop is used, node is not passed to callback functions (e.g. onEnter) because user already has direct access to the node.\nWhen changing `key` prop of `Transition` in a `TransitionGroup` a new `nodeRef` need to be provided to `Transition` with changed `key`\nprop (@see https://github.com/reactjs/react-transition-group/blob/master/test/Transition-test.js).",name:"nodeRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},appear:{defaultValue:{value:"false"},description:'Normally a component is not transitioned if it is shown when the\n`<Transition>` component mounts. If you want to transition on the first\nmount set  appear to true, and the component will transition in as soon\nas the `<Transition>` mounts. Note: there are no specific "appear" states.\nappear only adds an additional enter transition.',name:"appear",required:!1,type:{name:"boolean"}},exit:{defaultValue:{value:"true"},description:"Enable or disable exit transitions.",name:"exit",required:!1,type:{name:"boolean"}},easing:{defaultValue:null,description:"The transition timing function.\nYou may specify a single easing or a object containing enter and exit values.",name:"easing",required:!1,type:{name:"TransitionEasingOption"}},addEndListener:{defaultValue:null,description:"Add a custom transition end trigger. Called with the transitioning DOM\nnode and a done callback. Allows for more fine grained transition end\nlogic. Note: Timeouts are still used as a fallback if provided.",name:"addEndListener",required:!1,type:{name:"(node: HTMLElement, done: () => void) => void"}},wrapperClassName:{defaultValue:null,description:"Defines the class names added to the wrapper container().",name:"wrapperClassName",required:!1,type:{name:"string"}},orientation:{defaultValue:{value:"vertical"},description:"The transition orientation.",name:"orientation",required:!1,type:{name:"enum",value:[{value:'"vertical"'},{value:'"horizontal"'}]}},collapsedSize:{defaultValue:{value:"'0px'"},description:"The width (horizontal) or height (vertical) of the container when collapsed.",name:"collapsedSize",required:!1,type:{name:"string | number"}},bottomLine:{defaultValue:{value:"false"},description:"Whether to show the bottom line.",name:"bottomLine",required:!1,type:{name:"boolean"}},rightIcon:{defaultValue:null,description:"The right icon displayed after the label.",name:"rightIcon",required:!1,type:{name:"any"}},rightActiveIcon:{defaultValue:null,description:"The active icon displayed after the label.",name:"rightActiveIcon",required:!1,type:{name:"any"}},label:{defaultValue:null,description:"The label displayed in the header of the component.",name:"label",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"The name used to identify the radio button.",name:"name",required:!1,type:{name:"string"}},checked:{defaultValue:null,description:"The checked status of the radio button.",name:"checked",required:!1,type:{name:"boolean"}},onCheckedChange:{defaultValue:null,description:"The callback function when the checked status of the radio button changes.",name:"onCheckedChange",required:!1,type:{name:"(checked: boolean) => void"}},disableActionForUnchecked:{defaultValue:{value:"false"},description:"Whether to disable action in unchecked state.",name:"disableActionForUnchecked",required:!1,type:{name:"boolean"}},wrapLabel:{defaultValue:{value:"false"},description:"Whether to wrap label.",name:"wrapLabel",required:!1,type:{name:"boolean"}},type:{defaultValue:{value:"default"},description:"The type of this component.",name:"type",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"primary"'}]}},tag:{defaultValue:{value:"div"},description:"The tag of the component.\nIf the tag is 'label', clicking on the label will trigger the form child element.",name:"tag",required:!1,type:{name:"enum",value:[{value:'"div"'},{value:'"label"'}]}},level:{defaultValue:{value:"0"},description:"Defines the label size of the component.\n@ignore",name:"level",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"}]}},onRequestOpen:{defaultValue:null,description:"Invoked when opening the component.",name:"onRequestOpen",required:!1,type:{name:"() => void"}},onRequestClose:{defaultValue:null,description:"Invoked when closing the component.",name:"onRequestClose",required:!1,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#CollapsableRadio"]={docgenInfo:CollapsableRadio.__docgenInfo,name:"CollapsableRadio",path:"../jimu-ui/advanced/setting-components.tsx#CollapsableRadio"})}catch(__react_docgen_typescript_loader_error){}try{CollapsableCheckbox.displayName="CollapsableCheckbox",CollapsableCheckbox.__docgenInfo={description:"The `CollapsableCheckbox` component allows users to show the collapsible panel.",displayName:"CollapsableCheckbox",props:{defaultIsOpen:{defaultValue:null,description:"The default open state of the component.",name:"defaultIsOpen",required:!1,type:{name:"boolean"}},defaultChecked:{defaultValue:null,description:"The default check state of the component.",name:"defaultChecked",required:!1,type:{name:"boolean"}},openForCheck:{defaultValue:{value:"false"},description:"Whether to close in unchecked state.",name:"openForCheck",required:!1,type:{name:"boolean"}},closeForUncheck:{defaultValue:{value:"false"},description:"Whether to close in unchecked state.",name:"closeForUncheck",required:!1,type:{name:"boolean"}},children:{defaultValue:null,description:"The children of this component.",name:"children",required:!1,type:{name:"ReactNode"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"Defines the role added to the element.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.\nBy default, the accessible name is computed from any text content inside the element.\nIf lacking, provide an aria-label.",name:"aria-label",required:!1,type:{name:"string"}},keepMount:{defaultValue:{value:"false"},description:"If true, the children will be hidden but do not unmount when isOpen is false.\n@ignore",name:"keepMount",required:!1,type:{name:"boolean"}},isOpen:{defaultValue:{value:"false"},description:"Controls whether the `Collapse` component is open or closed.\nIt's recommended use props `in`.",name:"isOpen",required:!1,type:{name:"boolean"}},enter:{defaultValue:{value:"true"},description:"Enable or disable enter transitions.",name:"enter",required:!1,type:{name:"boolean"}},timeout:{defaultValue:{value:"standard"},description:"The duration for the transition, in milliseconds.\nYou may specify a single timeout for all transitions, or individually with an object.\n\nSet to 'auto' to automatically calculate transition time based on height.",name:"timeout",required:!1,type:{name:'TransitionDurationOption | "auto"'}},in:{defaultValue:{value:"false"},description:"If `true`, the component will transition in.",name:"in",required:!1,type:{name:"boolean"}},mountOnEnter:{defaultValue:{value:"false"},description:'By default the child component is mounted immediately along with the\nparent Transition component. If you want to "lazy mount" the component on\nthe first `in={true}` you can set `mountOnEnter`. After the first enter\ntransition the component will stay mounted, even on "exited", unless you\nalso specify `unmountOnExit`.',name:"mountOnEnter",required:!1,type:{name:"boolean"}},unmountOnExit:{defaultValue:{value:"false"},description:"By default the child component stays mounted after it reaches the\n'exited' state. Set `unmountOnExit` if you'd prefer to unmount the\ncomponent after it finishes exiting.",name:"unmountOnExit",required:!1,type:{name:"boolean"}},onEnter:{defaultValue:null,description:'Callback fired before the "entering" status is applied. An extra\nparameter `isAppearing` is supplied to indicate if the enter stage is\noccurring on the initial mount',name:"onEnter",required:!1,type:{name:"(node: HTMLElement, isAppearing: boolean) => void"}},onEntering:{defaultValue:null,description:'Callback fired after the "entering" status is applied. An extra parameter\nisAppearing is supplied to indicate if the enter stage is occurring on\nthe initial mount',name:"onEntering",required:!1,type:{name:"(node: HTMLElement, isAppearing: boolean) => void"}},onEntered:{defaultValue:null,description:'Callback fired after the "entered" status is applied. An extra parameter\nisAppearing is supplied to indicate if the enter stage is occurring on\nthe initial mount',name:"onEntered",required:!1,type:{name:"(node: HTMLElement, isAppearing: boolean) => void"}},onExit:{defaultValue:null,description:'Callback fired before the "exiting" status is applied.',name:"onExit",required:!1,type:{name:"(node: HTMLElement) => void"}},onExiting:{defaultValue:null,description:'Callback fired after the "exiting" status is applied.',name:"onExiting",required:!1,type:{name:"(node: HTMLElement) => void"}},onExited:{defaultValue:null,description:'Callback fired after the "exited" status is applied.',name:"onExited",required:!1,type:{name:"(node: HTMLElement) => void"}},nodeRef:{defaultValue:null,description:"A React reference to DOM element that need to transition: https://stackoverflow.com/a/51127130/4671932\nWhen `nodeRef` prop is used, node is not passed to callback functions (e.g. onEnter) because user already has direct access to the node.\nWhen changing `key` prop of `Transition` in a `TransitionGroup` a new `nodeRef` need to be provided to `Transition` with changed `key`\nprop (@see https://github.com/reactjs/react-transition-group/blob/master/test/Transition-test.js).",name:"nodeRef",required:!1,type:{name:"Ref<HTMLDivElement>"}},appear:{defaultValue:{value:"false"},description:'Normally a component is not transitioned if it is shown when the\n`<Transition>` component mounts. If you want to transition on the first\nmount set  appear to true, and the component will transition in as soon\nas the `<Transition>` mounts. Note: there are no specific "appear" states.\nappear only adds an additional enter transition.',name:"appear",required:!1,type:{name:"boolean"}},exit:{defaultValue:{value:"true"},description:"Enable or disable exit transitions.",name:"exit",required:!1,type:{name:"boolean"}},easing:{defaultValue:null,description:"The transition timing function.\nYou may specify a single easing or a object containing enter and exit values.",name:"easing",required:!1,type:{name:"TransitionEasingOption"}},addEndListener:{defaultValue:null,description:"Add a custom transition end trigger. Called with the transitioning DOM\nnode and a done callback. Allows for more fine grained transition end\nlogic. Note: Timeouts are still used as a fallback if provided.",name:"addEndListener",required:!1,type:{name:"(node: HTMLElement, done: () => void) => void"}},wrapperClassName:{defaultValue:null,description:"Defines the class names added to the wrapper container().",name:"wrapperClassName",required:!1,type:{name:"string"}},orientation:{defaultValue:{value:"vertical"},description:"The transition orientation.",name:"orientation",required:!1,type:{name:"enum",value:[{value:'"vertical"'},{value:'"horizontal"'}]}},collapsedSize:{defaultValue:{value:"'0px'"},description:"The width (horizontal) or height (vertical) of the container when collapsed.",name:"collapsedSize",required:!1,type:{name:"string | number"}},bottomLine:{defaultValue:{value:"false"},description:"Whether to show the bottom line.",name:"bottomLine",required:!1,type:{name:"boolean"}},rightIcon:{defaultValue:null,description:"The right icon displayed after the label.",name:"rightIcon",required:!1,type:{name:"any"}},rightActiveIcon:{defaultValue:null,description:"The active icon displayed after the label.",name:"rightActiveIcon",required:!1,type:{name:"any"}},label:{defaultValue:null,description:"The label displayed in the header of the component.",name:"label",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"The name used to identify the checkbox.",name:"name",required:!1,type:{name:"string"}},checked:{defaultValue:null,description:"The checked status of the checkbox.",name:"checked",required:!1,type:{name:"boolean"}},onCheckedChange:{defaultValue:null,description:"The callback function when the checked status of the checkbox changes.",name:"onCheckedChange",required:!1,type:{name:"(checked: boolean) => void"}},disableActionForUnchecked:{defaultValue:{value:"false"},description:"Whether to disable action in unchecked state.\n@ignore",name:"disableActionForUnchecked",required:!1,type:{name:"boolean"}},wrapLabel:{defaultValue:{value:"false"},description:"Whether to wrap label.",name:"wrapLabel",required:!1,type:{name:"boolean"}},type:{defaultValue:{value:"default"},description:"The type of this component.",name:"type",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"primary"'}]}},tag:{defaultValue:{value:"div"},description:"The tag of the component.\nIf the tag is 'label', clicking on the label will trigger the form child element.",name:"tag",required:!1,type:{name:"enum",value:[{value:'"div"'},{value:'"label"'}]}},level:{defaultValue:{value:"0"},description:"Defines the label size of the component.\n@ignore",name:"level",required:!1,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"}]}},onRequestOpen:{defaultValue:null,description:"Invoked when opening the component.",name:"onRequestOpen",required:!1,type:{name:"() => void"}},onRequestClose:{defaultValue:null,description:"Invoked when closing the component.",name:"onRequestClose",required:!1,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#CollapsableCheckbox"]={docgenInfo:CollapsableCheckbox.__docgenInfo,name:"CollapsableCheckbox",path:"../jimu-ui/advanced/setting-components.tsx#CollapsableCheckbox"})}catch(__react_docgen_typescript_loader_error){}try{_LinkSelector.displayName="_LinkSelector",_LinkSelector.__docgenInfo={description:"The `LinkSelector` component allows users to configure a link using a popup.\n\n```ts\nimport { LinkSelector } from 'jimu-ui/advanced/setting-components'\n```",displayName:"_LinkSelector",props:{buttonLabel:{defaultValue:{value:"Set link"},description:"Label of the button which can trigger link selector popup.",name:"buttonLabel",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"The title of the popup.",name:"title",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"@ignore Only used by theme.",name:"className",required:!1,type:{name:"string"}},widgetId:{defaultValue:null,description:"Use widget id to get widget context, e.g. whether widget is in repeated data source context.",name:"widgetId",required:!1,type:{name:"string"}},useDataSources:{defaultValue:null,description:"Widget's `useDataSources`, which means data sources that widget is using.\nIf pass `useDataSources`, link can use these data sources to build `Expression` **(see `jimu-core` API documentation)**.\n\n```ts\nimport { UseDataSource } from 'jimu-core'\n```",name:"useDataSources",required:!1,type:{name:"ImmutableArray<UseDataSource>"}},backToFocusNode:{defaultValue:null,description:"See `SidePopper` in jimu-ui/advanced/setting-components for more details.",name:"backToFocusNode",required:!1,type:{name:"HTMLElement"}},onSettingCancel:{defaultValue:null,description:"Callback when cancel setting.",name:"onSettingCancel",required:!1,type:{name:"() => void"}},showDialog:{defaultValue:null,description:"@ignore\n@deprecated Same with `isOpen`.",name:"showDialog",required:!1,type:{name:"boolean"}},isLinkPageSetting:{defaultValue:null,description:"@ignore",name:"isLinkPageSetting",required:!1,type:{name:"boolean"}},linkParam:{defaultValue:null,description:"The setting result.\n`IMLinkParam` is an interface.\n\n```ts\nimport { IMLinkParam } from 'jimu-ui/advanced/setting-components'\n```",name:"linkParam",required:!1,type:{name:"IMLinkParam"}},onSettingConfirm:{defaultValue:null,description:"Callback when setting result is changed.",name:"onSettingConfirm",required:!1,type:{name:"(linkParam: IMLinkParam) => void"}},hiddenLinks:{defaultValue:null,description:"Hide some types of link.\n\n```ts\nimport { LinkType } from 'jimu-core'\n```",name:"hiddenLinks",required:!1,type:{name:"ImmutableArray<LinkType>"}},openTypes:{defaultValue:null,description:"Link targets can be set.\n`OpenTypes` is similar with HTML `<a>` target attribute.\n\n```ts\nimport { OpenTypes } from 'jimu-ui/advanced/setting-components'\n```",name:"openTypes",required:!1,type:{name:"ImmutableArray<OpenTypes>"}},theme:{defaultValue:null,description:"@ignore",name:"theme",required:!1,type:{name:"IMThemeVariables"}},intl:{defaultValue:null,description:"@ignore",name:"intl",required:!0,type:{name:"IntlShape"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#_LinkSelector"]={docgenInfo:_LinkSelector.__docgenInfo,name:"_LinkSelector",path:"../jimu-ui/advanced/setting-components.tsx#_LinkSelector"})}catch(__react_docgen_typescript_loader_error){}try{LinkSelector.displayName="LinkSelector",LinkSelector.__docgenInfo={description:"A component to set link, such as link to a view, a page or url",displayName:"LinkSelector",props:{title:{defaultValue:null,description:"The title of the popup.",name:"title",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"@ignore Only used by theme.",name:"className",required:!1,type:{name:"string"}},widgetId:{defaultValue:null,description:"Use widget id to get widget context, e.g. whether widget is in repeated data source context.",name:"widgetId",required:!1,type:{name:"string"}},useDataSources:{defaultValue:null,description:"Widget's `useDataSources`, which means data sources that widget is using.\nIf pass `useDataSources`, link can use these data sources to build `Expression` **(see `jimu-core` API documentation)**.\n\n```ts\nimport { UseDataSource } from 'jimu-core'\n```",name:"useDataSources",required:!1,type:{name:"ImmutableArray<UseDataSource>"}},buttonLabel:{defaultValue:{value:"Set link"},description:"Label of the button which can trigger link selector popup.",name:"buttonLabel",required:!1,type:{name:"string"}},backToFocusNode:{defaultValue:null,description:"See `SidePopper` in jimu-ui/advanced/setting-components for more details.",name:"backToFocusNode",required:!1,type:{name:"HTMLElement"}},onSettingCancel:{defaultValue:null,description:"Callback when cancel setting.",name:"onSettingCancel",required:!1,type:{name:"() => void"}},showDialog:{defaultValue:null,description:"@ignore\n@deprecated Same with `isOpen`.",name:"showDialog",required:!1,type:{name:"boolean"}},isLinkPageSetting:{defaultValue:null,description:"@ignore",name:"isLinkPageSetting",required:!1,type:{name:"boolean"}},linkParam:{defaultValue:null,description:"The setting result.\n`IMLinkParam` is an interface.\n\n```ts\nimport { IMLinkParam } from 'jimu-ui/advanced/setting-components'\n```",name:"linkParam",required:!1,type:{name:"IMLinkParam"}},onSettingConfirm:{defaultValue:null,description:"Callback when setting result is changed.",name:"onSettingConfirm",required:!1,type:{name:"(linkParam: IMLinkParam) => void"}},hiddenLinks:{defaultValue:null,description:"Hide some types of link.\n\n```ts\nimport { LinkType } from 'jimu-core'\n```",name:"hiddenLinks",required:!1,type:{name:"ImmutableArray<LinkType>"}},openTypes:{defaultValue:null,description:"Link targets can be set.\n`OpenTypes` is similar with HTML `<a>` target attribute.\n\n```ts\nimport { OpenTypes } from 'jimu-ui/advanced/setting-components'\n```",name:"openTypes",required:!1,type:{name:"ImmutableArray<OpenTypes>"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"IMThemeVariables"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#LinkSelector"]={docgenInfo:LinkSelector.__docgenInfo,name:"LinkSelector",path:"../jimu-ui/advanced/setting-components.tsx#LinkSelector"})}catch(__react_docgen_typescript_loader_error){}try{_LinkSelectorSidePopper.displayName="_LinkSelectorSidePopper",_LinkSelectorSidePopper.__docgenInfo={description:"The `LinkSelectorSidePopper` component allows users to configure a link using a popup.\n\n```ts\nimport { LinkSelectorSidePopper } from 'jimu-ui/advanced/setting-components'\n```",displayName:"_LinkSelectorSidePopper",props:{onSettingCancel:{defaultValue:null,description:"Callback when cancel setting.",name:"onSettingCancel",required:!1,type:{name:"() => void"}},isOpen:{defaultValue:null,description:"Whether to show the setting popup.",name:"isOpen",required:!1,type:{name:"boolean"}},trigger:{defaultValue:null,description:"See `SidePopper` in jimu-ui/advanced/setting-components for more details.",name:"trigger",required:!1,type:{name:"HTMLElement | HTMLElement[]"}},backToFocusNode:{defaultValue:null,description:"See `SidePopper` in jimu-ui/advanced/setting-components for more details.",name:"backToFocusNode",required:!1,type:{name:"HTMLElement"}},showDialog:{defaultValue:null,description:"@ignore\n@deprecated Same with `isOpen`.",name:"showDialog",required:!1,type:{name:"boolean"}},isLinkPageSetting:{defaultValue:null,description:"@ignore",name:"isLinkPageSetting",required:!1,type:{name:"boolean"}},position:{defaultValue:null,description:"The popup shows next to left panel of builder or right panel of builder.",name:"position",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"right"'}]}},title:{defaultValue:null,description:"The title of the popup.",name:"title",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"@ignore Only used by theme.",name:"className",required:!1,type:{name:"string"}},linkParam:{defaultValue:null,description:"The setting result.\n`IMLinkParam` is an interface.\n\n```ts\nimport { IMLinkParam } from 'jimu-ui/advanced/setting-components'\n```",name:"linkParam",required:!1,type:{name:"IMLinkParam"}},onSettingConfirm:{defaultValue:null,description:"Callback when setting result is changed.",name:"onSettingConfirm",required:!1,type:{name:"(linkParam: IMLinkParam) => void"}},widgetId:{defaultValue:null,description:"Use widget id to get widget context, e.g. whether widget is in repeated data source context.",name:"widgetId",required:!1,type:{name:"string"}},useDataSources:{defaultValue:null,description:"Widget's `useDataSources`, which means data sources that widget is using.\nIf pass `useDataSources`, link can use these data sources to build `Expression` **(see `jimu-core` API documentation)**.\n\n```ts\nimport { UseDataSource } from 'jimu-core'\n```",name:"useDataSources",required:!1,type:{name:"ImmutableArray<UseDataSource>"}},hiddenLinks:{defaultValue:null,description:"Hide some types of link.\n\n```ts\nimport { LinkType } from 'jimu-core'\n```",name:"hiddenLinks",required:!1,type:{name:"ImmutableArray<LinkType>"}},openTypes:{defaultValue:null,description:"Link targets can be set.\n`OpenTypes` is similar with HTML `<a>` target attribute.\n\n```ts\nimport { OpenTypes } from 'jimu-ui/advanced/setting-components'\n```",name:"openTypes",required:!1,type:{name:"ImmutableArray<OpenTypes>"}},theme:{defaultValue:null,description:"@ignore",name:"theme",required:!1,type:{name:"IMThemeVariables"}},intl:{defaultValue:null,description:"@ignore",name:"intl",required:!0,type:{name:"IntlShape"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#_LinkSelectorSidePopper"]={docgenInfo:_LinkSelectorSidePopper.__docgenInfo,name:"_LinkSelectorSidePopper",path:"../jimu-ui/advanced/setting-components.tsx#_LinkSelectorSidePopper"})}catch(__react_docgen_typescript_loader_error){}try{LinkSelectorSidePopper.displayName="LinkSelectorSidePopper",LinkSelectorSidePopper.__docgenInfo={description:"A component to set link, such as link to a view, a page or url",displayName:"LinkSelectorSidePopper",props:{title:{defaultValue:null,description:"The title of the popup.",name:"title",required:!1,type:{name:"string"}},trigger:{defaultValue:null,description:"See `SidePopper` in jimu-ui/advanced/setting-components for more details.",name:"trigger",required:!1,type:{name:"HTMLElement | HTMLElement[]"}},className:{defaultValue:null,description:"@ignore Only used by theme.",name:"className",required:!1,type:{name:"string"}},isOpen:{defaultValue:null,description:"Whether to show the setting popup.",name:"isOpen",required:!1,type:{name:"boolean"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"IMThemeVariables"}},widgetId:{defaultValue:null,description:"Use widget id to get widget context, e.g. whether widget is in repeated data source context.",name:"widgetId",required:!1,type:{name:"string"}},position:{defaultValue:null,description:"The popup shows next to left panel of builder or right panel of builder.",name:"position",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"right"'}]}},useDataSources:{defaultValue:null,description:"Widget's `useDataSources`, which means data sources that widget is using.\nIf pass `useDataSources`, link can use these data sources to build `Expression` **(see `jimu-core` API documentation)**.\n\n```ts\nimport { UseDataSource } from 'jimu-core'\n```",name:"useDataSources",required:!1,type:{name:"ImmutableArray<UseDataSource>"}},backToFocusNode:{defaultValue:null,description:"See `SidePopper` in jimu-ui/advanced/setting-components for more details.",name:"backToFocusNode",required:!1,type:{name:"HTMLElement"}},onSettingCancel:{defaultValue:null,description:"Callback when cancel setting.",name:"onSettingCancel",required:!1,type:{name:"() => void"}},showDialog:{defaultValue:null,description:"@ignore\n@deprecated Same with `isOpen`.",name:"showDialog",required:!1,type:{name:"boolean"}},isLinkPageSetting:{defaultValue:null,description:"@ignore",name:"isLinkPageSetting",required:!1,type:{name:"boolean"}},linkParam:{defaultValue:null,description:"The setting result.\n`IMLinkParam` is an interface.\n\n```ts\nimport { IMLinkParam } from 'jimu-ui/advanced/setting-components'\n```",name:"linkParam",required:!1,type:{name:"IMLinkParam"}},onSettingConfirm:{defaultValue:null,description:"Callback when setting result is changed.",name:"onSettingConfirm",required:!1,type:{name:"(linkParam: IMLinkParam) => void"}},hiddenLinks:{defaultValue:null,description:"Hide some types of link.\n\n```ts\nimport { LinkType } from 'jimu-core'\n```",name:"hiddenLinks",required:!1,type:{name:"ImmutableArray<LinkType>"}},openTypes:{defaultValue:null,description:"Link targets can be set.\n`OpenTypes` is similar with HTML `<a>` target attribute.\n\n```ts\nimport { OpenTypes } from 'jimu-ui/advanced/setting-components'\n```",name:"openTypes",required:!1,type:{name:"ImmutableArray<OpenTypes>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#LinkSelectorSidePopper"]={docgenInfo:LinkSelectorSidePopper.__docgenInfo,name:"LinkSelectorSidePopper",path:"../jimu-ui/advanced/setting-components.tsx#LinkSelectorSidePopper"})}catch(__react_docgen_typescript_loader_error){}try{LinkSettingPopup.displayName="LinkSettingPopup",LinkSettingPopup.__docgenInfo={description:"",displayName:"LinkSettingPopup",props:{title:{defaultValue:null,description:"The title of the popup.",name:"title",required:!1,type:{name:"string"}},trigger:{defaultValue:null,description:"See `SidePopper` in jimu-ui/advanced/setting-components for more details.",name:"trigger",required:!1,type:{name:"HTMLElement | HTMLElement[]"}},className:{defaultValue:null,description:"@ignore Only used by theme.",name:"className",required:!1,type:{name:"string"}},isOpen:{defaultValue:null,description:"Whether to show the setting popup.",name:"isOpen",required:!1,type:{name:"boolean"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"IMThemeVariables"}},widgetId:{defaultValue:null,description:"Use widget id to get widget context, e.g. whether widget is in repeated data source context.",name:"widgetId",required:!1,type:{name:"string"}},position:{defaultValue:null,description:"The popup shows next to left panel of builder or right panel of builder.",name:"position",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"right"'}]}},useDataSources:{defaultValue:null,description:"Widget's `useDataSources`, which means data sources that widget is using.\nIf pass `useDataSources`, link can use these data sources to build `Expression` **(see `jimu-core` API documentation)**.\n\n```ts\nimport { UseDataSource } from 'jimu-core'\n```",name:"useDataSources",required:!1,type:{name:"ImmutableArray<UseDataSource>"}},backToFocusNode:{defaultValue:null,description:"See `SidePopper` in jimu-ui/advanced/setting-components for more details.",name:"backToFocusNode",required:!1,type:{name:"HTMLElement"}},onSettingCancel:{defaultValue:null,description:"Callback when cancel setting.",name:"onSettingCancel",required:!1,type:{name:"() => void"}},showDialog:{defaultValue:null,description:"@ignore\n@deprecated Same with `isOpen`.",name:"showDialog",required:!1,type:{name:"boolean"}},isLinkPageSetting:{defaultValue:null,description:"@ignore",name:"isLinkPageSetting",required:!1,type:{name:"boolean"}},linkParam:{defaultValue:null,description:"The setting result.\n`IMLinkParam` is an interface.\n\n```ts\nimport { IMLinkParam } from 'jimu-ui/advanced/setting-components'\n```",name:"linkParam",required:!1,type:{name:"IMLinkParam"}},onSettingConfirm:{defaultValue:null,description:"Callback when setting result is changed.",name:"onSettingConfirm",required:!1,type:{name:"(linkParam: IMLinkParam) => void"}},hiddenLinks:{defaultValue:null,description:"Hide some types of link.\n\n```ts\nimport { LinkType } from 'jimu-core'\n```",name:"hiddenLinks",required:!1,type:{name:"ImmutableArray<LinkType>"}},openTypes:{defaultValue:null,description:"Link targets can be set.\n`OpenTypes` is similar with HTML `<a>` target attribute.\n\n```ts\nimport { OpenTypes } from 'jimu-ui/advanced/setting-components'\n```",name:"openTypes",required:!1,type:{name:"ImmutableArray<OpenTypes>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#LinkSettingPopup"]={docgenInfo:LinkSettingPopup.__docgenInfo,name:"LinkSettingPopup",path:"../jimu-ui/advanced/setting-components.tsx#LinkSettingPopup"})}catch(__react_docgen_typescript_loader_error){}try{_LinkSelectorContent.displayName="_LinkSelectorContent",_LinkSelectorContent.__docgenInfo={description:"The `LinkSelectorContent` component allows users to configure a link.\n\n```ts\nimport { LinkSelectorContent } from 'jimu-ui/advanced/setting-components'\n```",displayName:"_LinkSelectorContent",props:{className:{defaultValue:null,description:"@ignore Only used by theme.",name:"className",required:!1,type:{name:"string"}},linkParam:{defaultValue:null,description:"The setting result.\n`IMLinkParam` is an interface.\n\n```ts\nimport { IMLinkParam } from 'jimu-ui/advanced/setting-components'\n```",name:"linkParam",required:!1,type:{name:"IMLinkParam"}},onSettingConfirm:{defaultValue:null,description:"Callback when setting result is changed.",name:"onSettingConfirm",required:!1,type:{name:"(linkParam: IMLinkParam) => void"}},widgetId:{defaultValue:null,description:"Use widget id to get widget context, e.g. whether widget is in repeated data source context.",name:"widgetId",required:!1,type:{name:"string"}},isLinkPageSetting:{defaultValue:null,description:"@ignore",name:"isLinkPageSetting",required:!1,type:{name:"boolean"}},useDataSources:{defaultValue:null,description:"Widget's `useDataSources`, which means data sources that widget is using.\nIf pass `useDataSources`, link can use these data sources to build `Expression` **(see `jimu-core` API documentation)**.\n\n```ts\nimport { UseDataSource } from 'jimu-core'\n```",name:"useDataSources",required:!1,type:{name:"ImmutableArray<UseDataSource>"}},hiddenLinks:{defaultValue:null,description:"Hide some types of link.\n\n```ts\nimport { LinkType } from 'jimu-core'\n```",name:"hiddenLinks",required:!1,type:{name:"ImmutableArray<LinkType>"}},openTypes:{defaultValue:null,description:"Link targets can be set.\n`OpenTypes` is similar with HTML `<a>` target attribute.\n\n```ts\nimport { OpenTypes } from 'jimu-ui/advanced/setting-components'\n```",name:"openTypes",required:!1,type:{name:"ImmutableArray<OpenTypes>"}},theme:{defaultValue:null,description:"@ignore",name:"theme",required:!1,type:{name:"IMThemeVariables"}},intl:{defaultValue:null,description:"@ignore",name:"intl",required:!1,type:{name:"IntlShape"}},appConfig:{defaultValue:null,description:"@ignore",name:"appConfig",required:!0,type:{name:"IMAppConfig"}},browserSizeMode:{defaultValue:null,description:"@ignore",name:"browserSizeMode",required:!0,type:{name:"enum",value:[{value:'"SMALL"'},{value:'"MEDIUM"'},{value:'"LARGE"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#_LinkSelectorContent"]={docgenInfo:_LinkSelectorContent.__docgenInfo,name:"_LinkSelectorContent",path:"../jimu-ui/advanced/setting-components.tsx#_LinkSelectorContent"})}catch(__react_docgen_typescript_loader_error){}try{contextType.displayName="_LinkSelectorContent.contextType",contextType.__docgenInfo={description:"Context lets components pass information deep down without explicitly\npassing props.\n\nCreated from {@link createContext}",displayName:"_LinkSelectorContent.contextType",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#_LinkSelectorContent.contextType"]={docgenInfo:_LinkSelectorContent.contextType.__docgenInfo,name:"_LinkSelectorContent.contextType",path:"../jimu-ui/advanced/setting-components.tsx#_LinkSelectorContent.contextType"})}catch(__react_docgen_typescript_loader_error){}try{LinkSelectorContent.displayName="LinkSelectorContent",LinkSelectorContent.__docgenInfo={description:"",displayName:"LinkSelectorContent",props:{className:{defaultValue:null,description:"@ignore Only used by theme.",name:"className",required:!1,type:{name:"string"}},widgetId:{defaultValue:null,description:"Use widget id to get widget context, e.g. whether widget is in repeated data source context.",name:"widgetId",required:!1,type:{name:"string"}},useDataSources:{defaultValue:null,description:"Widget's `useDataSources`, which means data sources that widget is using.\nIf pass `useDataSources`, link can use these data sources to build `Expression` **(see `jimu-core` API documentation)**.\n\n```ts\nimport { UseDataSource } from 'jimu-core'\n```",name:"useDataSources",required:!1,type:{name:"Readonly<Remaining<UseDataSource>> & Additions<UseDataSource> & Overrides<UseDataSource> & ReadOnlyIndexer<...>"}},isLinkPageSetting:{defaultValue:null,description:"@ignore",name:"isLinkPageSetting",required:!1,type:{name:"boolean"}},linkParam:{defaultValue:null,description:"The setting result.\n`IMLinkParam` is an interface.\n\n```ts\nimport { IMLinkParam } from 'jimu-ui/advanced/setting-components'\n```",name:"linkParam",required:!1,type:{name:"ImmutableObjectMixin<LinkParam> & { readonly linkType?: LinkType; readonly openType?: LinkTarget; readonly value?: string; readonly expression?: ImmutableObject<...>; }"}},onSettingConfirm:{defaultValue:null,description:"Callback when setting result is changed.",name:"onSettingConfirm",required:!1,type:{name:"(linkParam: IMLinkParam) => void"}},hiddenLinks:{defaultValue:null,description:"Hide some types of link.\n\n```ts\nimport { LinkType } from 'jimu-core'\n```",name:"hiddenLinks",required:!1,type:{name:"Readonly<Remaining<LinkType>> & Additions<LinkType> & Overrides<LinkType> & ReadOnlyIndexer<LinkType>"}},openTypes:{defaultValue:null,description:"Link targets can be set.\n`OpenTypes` is similar with HTML `<a>` target attribute.\n\n```ts\nimport { OpenTypes } from 'jimu-ui/advanced/setting-components'\n```",name:"openTypes",required:!1,type:{name:"Readonly<Remaining<OpenTypes>> & Additions<OpenTypes> & Overrides<OpenTypes> & ReadOnlyIndexer<OpenTypes>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#LinkSelectorContent"]={docgenInfo:LinkSelectorContent.__docgenInfo,name:"LinkSelectorContent",path:"../jimu-ui/advanced/setting-components.tsx#LinkSelectorContent"})}catch(__react_docgen_typescript_loader_error){}try{LinkSetting.displayName="LinkSetting",LinkSetting.__docgenInfo={description:"",displayName:"LinkSetting",props:{className:{defaultValue:null,description:"@ignore Only used by theme.",name:"className",required:!1,type:{name:"string"}},widgetId:{defaultValue:null,description:"Use widget id to get widget context, e.g. whether widget is in repeated data source context.",name:"widgetId",required:!1,type:{name:"string"}},useDataSources:{defaultValue:null,description:"Widget's `useDataSources`, which means data sources that widget is using.\nIf pass `useDataSources`, link can use these data sources to build `Expression` **(see `jimu-core` API documentation)**.\n\n```ts\nimport { UseDataSource } from 'jimu-core'\n```",name:"useDataSources",required:!1,type:{name:"Readonly<Remaining<UseDataSource>> & Additions<UseDataSource> & Overrides<UseDataSource> & ReadOnlyIndexer<...>"}},isLinkPageSetting:{defaultValue:null,description:"@ignore",name:"isLinkPageSetting",required:!1,type:{name:"boolean"}},linkParam:{defaultValue:null,description:"The setting result.\n`IMLinkParam` is an interface.\n\n```ts\nimport { IMLinkParam } from 'jimu-ui/advanced/setting-components'\n```",name:"linkParam",required:!1,type:{name:"ImmutableObjectMixin<LinkParam> & { readonly linkType?: LinkType; readonly openType?: LinkTarget; readonly value?: string; readonly expression?: ImmutableObject<...>; }"}},onSettingConfirm:{defaultValue:null,description:"Callback when setting result is changed.",name:"onSettingConfirm",required:!1,type:{name:"(linkParam: IMLinkParam) => void"}},hiddenLinks:{defaultValue:null,description:"Hide some types of link.\n\n```ts\nimport { LinkType } from 'jimu-core'\n```",name:"hiddenLinks",required:!1,type:{name:"Readonly<Remaining<LinkType>> & Additions<LinkType> & Overrides<LinkType> & ReadOnlyIndexer<LinkType>"}},openTypes:{defaultValue:null,description:"Link targets can be set.\n`OpenTypes` is similar with HTML `<a>` target attribute.\n\n```ts\nimport { OpenTypes } from 'jimu-ui/advanced/setting-components'\n```",name:"openTypes",required:!1,type:{name:"Readonly<Remaining<OpenTypes>> & Additions<OpenTypes> & Overrides<OpenTypes> & ReadOnlyIndexer<OpenTypes>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#LinkSetting"]={docgenInfo:LinkSetting.__docgenInfo,name:"LinkSetting",path:"../jimu-ui/advanced/setting-components.tsx#LinkSetting"})}catch(__react_docgen_typescript_loader_error){}try{ProxySetting.displayName="ProxySetting",ProxySetting.__docgenInfo={description:"",displayName:"ProxySetting",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(proxySettingConfigs: ProxySettingConfigs) => void"}},appHasBeenSaved:{defaultValue:null,description:"",name:"appHasBeenSaved",required:!0,type:{name:"boolean"}},proxySettingConfigs:{defaultValue:null,description:"",name:"proxySettingConfigs",required:!0,type:{name:"ProxySettingConfigs"}},needProxyItems:{defaultValue:null,description:"",name:"needProxyItems",required:!0,type:{name:"NeedProxyItems"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#ProxySetting"]={docgenInfo:ProxySetting.__docgenInfo,name:"ProxySetting",path:"../jimu-ui/advanced/setting-components.tsx#ProxySetting"})}catch(__react_docgen_typescript_loader_error){}try{SizeModeSelector.displayName="SizeModeSelector",SizeModeSelector.__docgenInfo={description:"",displayName:"SizeModeSelector",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#SizeModeSelector"]={docgenInfo:SizeModeSelector.__docgenInfo,name:"SizeModeSelector",path:"../jimu-ui/advanced/setting-components.tsx#SizeModeSelector"})}catch(__react_docgen_typescript_loader_error){}try{QuickStylePopper.displayName="QuickStylePopper",QuickStylePopper.__docgenInfo={description:"",displayName:"QuickStylePopper",props:{floating:{defaultValue:null,description:"",name:"floating",required:!1,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"() => void"}},children:{defaultValue:null,description:"The children of the component.",name:"children",required:!0,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},autoFocus:{defaultValue:{value:"true"},description:"Whether to automatically focus on the first focusable element when `Popper` is open.\n@ignore",name:"autoFocus",required:!1,type:{name:"boolean"}},role:{defaultValue:{value:"dialog"},description:"Defines the role added to the element.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-modal":{defaultValue:null,description:"Indicates whether the element, or another grouping element it controls, is modal.",name:"aria-modal",required:!1,type:{name:"boolean"}},onResize:{defaultValue:null,description:"Called while resizing.",name:"onResize",required:!1,type:{name:"(size: Size, position?: ControlPosition) => void"}},onDrag:{defaultValue:null,description:"Called while dragging.\n@event",name:"onDrag",required:!1,type:{name:"(position: ControlPosition) => void"}},onDragStart:{defaultValue:null,description:"Called when dragging starts.\n@event",name:"onDragStart",required:!1,type:{name:"DraggableEventHandler"}},size:{defaultValue:null,description:"Set the size of the panel.\nUse size if you need to control size state by yourself.",name:"size",required:!1,type:{name:"Size"}},placement:{defaultValue:{value:"bottom"},description:"Describes the preferred placement of the panel.\nThis prop is valid when there is a `reference`.",name:"placement",required:!1,type:{name:"enum",value:[{value:'"bottom"'},{value:'"left"'},{value:'"right"'},{value:'"top"'},{value:'"bottom-end"'},{value:'"bottom-start"'},{value:'"left-end"'},{value:'"left-start"'},{value:'"right-end"'},{value:'"right-start"'},{value:'"top-end"'},{value:'"top-start"'}]}},shiftOptions:{defaultValue:null,description:"The shift options allow the panel to be moved when it exceeds the clipping boundary.\nThis prop is valid when there is a `reference`.",name:"shiftOptions",required:!1,type:{name:"boolean | { mainAxis?: boolean; crossAxis?: boolean; limiter?: { fn: (state: MiddlewareState) => Coords; options?: any; }; rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; boundary?: Boundary; }"}},offsetOptions:{defaultValue:null,description:"The offset modifier can shift your panel on both its axes.\nIf it is a boolean value, it enables or disables the component's default behavior.\nThis prop is valid when there is a `reference`.",name:"offsetOptions",required:!1,type:{name:"boolean | [number, number] | OffsetOptions"}},flipOptions:{defaultValue:{value:"true"},description:"The flip options can be used to adjust the popper panel when it exceeds the clipping boundary.\nIf it is a boolean value, it indicates whether the default behavior of the component is enabled or disabled.\nThis prop is valid when there is a `reference`.\nNote: You cannot use `flipOptions` and `autoPlacementOptions` together inside the same middleware array.",name:"flipOptions",required:!1,type:{name:"boolean | { mainAxis?: boolean; crossAxis?: boolean; rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; ... 4 more ...; boundary?: Boundary; }"}},reference:{defaultValue:null,description:"Reference node used to set the position of floating panel.",name:"reference",required:!1,type:{name:"TargetType"}},strategy:{defaultValue:{value:"absolute"},description:"Describes the positioning strategy to use.\nThis prop is valid when there is a `reference`.",name:"strategy",required:!1,type:{name:"enum",value:[{value:'"fixed"'},{value:'"absolute"'}]}},openOverlayOnMount:{defaultValue:{value:"true"},description:"If `true`, adds the popper to `state.overlays` when mounted.",name:"openOverlayOnMount",required:!1,type:{name:"boolean"}},disablePortal:{defaultValue:{value:"false"},description:"If `true`, it disables portal behavior, and keeps children within their parent DOM hierarchy.\nIf `false`, children are appended to `document.body`.",name:"disablePortal",required:!1,type:{name:"boolean"}},disableActivateOverlay:{defaultValue:{value:"false"},description:"If `true`, it prevents activating the overlay when clicking on the popper body.",name:"disableActivateOverlay",required:!1,type:{name:"boolean"}},disableOverlayManager:{defaultValue:{value:"false"},description:"If `true`, it disables z-index management via `state.overlays`.",name:"disableOverlayManager",required:!1,type:{name:"boolean"}},zIndex:{defaultValue:null,description:"@ignore",name:"zIndex",required:!1,type:{name:"number"}},open:{defaultValue:null,description:"If `true`, the panel is visible.\nThis prop is valid when there is a `reference`.",name:"open",required:!1,type:{name:"boolean"}},autoUpdate:{defaultValue:{value:"true"},description:"Automatically updates the position of the floating panel when necessary to ensure it stays anchored.\nThis prop is valid when there is a `reference` and the panel is never dragged.",name:"autoUpdate",required:!1,type:{name:"boolean"}},autoPlacementOptions:{defaultValue:{value:"false"},description:"You can customize how the auto placement behaves using the auto placement options.\nThis prop is valid when there is a `reference`.\nNote: You cannot use `flipOptions` and `autoPlacementOptions` together inside the same middleware array.",name:"autoPlacementOptions",required:!1,type:{name:"boolean | { crossAxis?: boolean; rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; alignment?: Alignment; autoAlignment?: boolean; allowedPlacements?: Placement[]; boundary?: Boundary; }"}},version:{defaultValue:null,description:"When this value changes, will recalculate the position.\nThis prop is valid when there is a `reference`.\n@ignore",name:"version",required:!1,type:{name:"number"}},avoidNestedToggle:{defaultValue:{value:"true"},description:"By default, clicking into a nested `Popper` will not trigger the toggle method of the current Popper.\nIf you want to trigger the toggle method of the current Popper, you can set `avoidNestedToggle` to `false`.\n@ignore",name:"avoidNestedToggle",required:!1,type:{name:"boolean"}},toggle:{defaultValue:null,description:"Callback fired when panel requests to be closed.\n@event",name:"toggle",required:!1,type:{name:"(evt?: KeyboardEvent<any> | MouseEvent<any, MouseEvent> | TouchEvent<any>, reason?: OverlayDismissReason) => any"}},referenceHiddenVisibility:{defaultValue:{value:"false"},description:"Whether the floating panel is hidden when the reference is hidden.\nThis prop is valid when there is a `reference`.",name:"referenceHiddenVisibility",required:!1,type:{name:"boolean"}},flipPlacement:{defaultValue:{value:"true"},description:"Whether to flip placement (Only valid for RTL).\nThis prop is valid when there is a `reference`.\n@ignore",name:"flipPlacement",required:!1,type:{name:"boolean"}},headerTitle:{defaultValue:null,description:"The title displayed in the header.",name:"headerTitle",required:!1,type:{name:"ReactNode"}},headerClassName:{defaultValue:null,description:"The class name of the header.",name:"headerClassName",required:!1,type:{name:"string"}},showHeaderClose:{defaultValue:{value:"true"},description:"If `false`, hide the close button on the header.",name:"showHeaderClose",required:!1,type:{name:"boolean"}},showHeaderCollapse:{defaultValue:{value:"false"},description:"if `true`, show a collapse button on the header.",name:"showHeaderCollapse",required:!1,type:{name:"boolean"}},minSize:{defaultValue:{value:"{width:50,height:50}"},description:"Set the minimum size of the panel.",name:"minSize",required:!1,type:{name:"Size"}},defaultSize:{defaultValue:{value:"{width:50,height:50}"},description:"Specifies the width and height of the panel at start.\n\nNote: defaultSize will be ignored when size is set.",name:"defaultSize",required:!1,type:{name:"Size"}},autoSize:{defaultValue:{value:"false"},description:"If true, defaultSize and size won't work, and resizing will be disabled.",name:"autoSize",required:!1,type:{name:"boolean"}},defaultPosition:{defaultValue:{value:"{left:0,top:0}"},description:"Specifies the left and top of the panel at start.\n\nNote: defaultPosition will be ignored when position set.",name:"defaultPosition",required:!1,type:{name:"ControlPosition"}},position:{defaultValue:null,description:"Set the position of the panel.\nUse position if you need to control position state by yourself.",name:"position",required:!1,type:{name:"ControlPosition"}},positionOffset:{defaultValue:null,description:"A position offset to start with. Useful for giving an initial position\nto the element. Differs from `defaultPosition` in that it does not\naffect the position returned in draggable callbacks, and in that it\naccepts strings, like `{x: '10%', y: '10%'}`.",name:"positionOffset",required:!1,type:{name:"PositionOffsetControlPosition"}},disableResize:{defaultValue:{value:"false"},description:"If `true`, the panel cannot be resized.",name:"disableResize",required:!1,type:{name:"boolean"}},disableDraggable:{defaultValue:{value:"false"},description:"If `true`, the panel cannot be dragged.",name:"disableDraggable",required:!1,type:{name:"boolean"}},resizeGrid:{defaultValue:null,description:"Specifies the x and y that resizing should snap to.",name:"resizeGrid",required:!1,type:{name:"[number, number]"}},resizeHandle:{defaultValue:null,description:"Provide a resize handle for the bottom right corner.\nFlipped handles will be applied for the other corners.\nA handle can be an icon, an image, or any other valid ReactElement.",name:"resizeHandle",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},onResizeStart:{defaultValue:null,description:"Called when resizing starts.",name:"onResizeStart",required:!1,type:{name:"(size: Size, position?: ControlPosition) => void"}},onResizeStop:{defaultValue:null,description:"Called when resizing stops.",name:"onResizeStop",required:!1,type:{name:"(size: Size, position?: ControlPosition) => void"}},resizeHandles:{defaultValue:{value:"['bottom-right']"},description:"A list of resize handles: 'top-left', 'top-right', 'bottom-left' and 'bottom-right'.",name:"resizeHandles",required:!1,type:{name:"ResizeHandle[]"}},dragBounds:{defaultValue:null,description:"Specifies movement boundaries. Accepted values:\n- `parent` restricts movement within the node's offsetParent\n  (nearest node with position relative or absolute), or\n- a selector, restricts movement within the targeted node\n- An object with `left, top, right, and bottom` properties.\n These indicate how far in each direction the draggable\n  can be moved.",name:"dragBounds",required:!1,type:{name:"string | false | DraggableBounds"}},dragGrid:{defaultValue:null,description:"Specifies the x and y that dragging should snap to.",name:"dragGrid",required:!1,type:{name:"[number, number]"}},dragOffsetParent:{defaultValue:null,description:"If desired, you can provide your own offsetParent for drag calculations.\nBy default, we use the Draggable's offsetParent. This can be useful for elements\nwith odd display types or floats.",name:"dragOffsetParent",required:!1,type:{name:"HTMLElement"}},onDragStop:{defaultValue:null,description:"Called when dragging stops.\n@event",name:"onDragStop",required:!1,type:{name:"DraggableEventHandler"}},dragScale:{defaultValue:{value:"1"},description:"Specifies the scale of the canvas on which you are dragging this element.\nThis lets you get the right drag deltas when you're zoomed in or out using\na transform or matrix in the parent element.",name:"dragScale",required:!1,type:{name:"number"}},trapFocus:{defaultValue:{value:"true"},description:"Loop within the focusable elements inside the `Popper` when the `Tab` key is pressed.\n@ignore",name:"trapFocus",required:!1,type:{name:"boolean"}},onLeave:{defaultValue:null,description:"@ignore If this function is provided, clicking `Escape` twice triggers it instead of `onHeaderClose`.\nIt is for accessibility purposes.",name:"onLeave",required:!1,type:{name:"() => void"}},activateOnlyForHeader:{defaultValue:{value:"false"},description:"Only activate the overlay when click on the header.\n@ignore",name:"activateOnlyForHeader",required:!1,type:{name:"boolean"}},onHeaderClick:{defaultValue:null,description:"Be invoked when clicking the header\n@ignore",name:"onHeaderClick",required:!1,type:{name:"(e?: MouseEvent<HTMLDivElement, MouseEvent>) => void"}},onInitResizeHandler:{defaultValue:null,description:"Callback function for registering and listening to resize for widget, which can be retrieved from props of the widget.",name:"onInitResizeHandler",required:!1,type:{name:"WidgetInitResizeCallback"}},onInitDragHandler:{defaultValue:null,description:"Callback function for registering and listening to drag for widget, which can be retrieved from props of the widget.",name:"onInitDragHandler",required:!1,type:{name:"WidgetInitDragCallback"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#QuickStylePopper"]={docgenInfo:QuickStylePopper.__docgenInfo,name:"QuickStylePopper",path:"../jimu-ui/advanced/setting-components.tsx#QuickStylePopper"})}catch(__react_docgen_typescript_loader_error){}try{getDefaultGeocodeConfig.displayName="getDefaultGeocodeConfig",getDefaultGeocodeConfig.__docgenInfo={description:"",displayName:"getDefaultGeocodeConfig",props:{nls:{defaultValue:null,description:"",name:"nls",required:!0,type:{name:"any"}},isSingle:{defaultValue:null,description:"",name:"isSingle",required:!0,type:{name:"boolean"}},createOutputDs:{defaultValue:null,description:"",name:"createOutputDs",required:!0,type:{name:"boolean"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},viewId:{defaultValue:null,description:"",name:"viewId",required:!0,type:{name:"string"}},notAddNewUtility:{defaultValue:null,description:"",name:"notAddNewUtility",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#getDefaultGeocodeConfig"]={docgenInfo:getDefaultGeocodeConfig.__docgenInfo,name:"getDefaultGeocodeConfig",path:"../jimu-ui/advanced/setting-components.tsx#getDefaultGeocodeConfig"})}catch(__react_docgen_typescript_loader_error){}try{SearchDataSetting.displayName="SearchDataSetting",SearchDataSetting.__docgenInfo={description:"",displayName:"SearchDataSetting",props:{id:{defaultValue:null,description:"Widget id",name:"id",required:!0,type:{name:"string"}},datasourceConfig:{defaultValue:null,description:"",name:"datasourceConfig",required:!1,type:{name:"ImmutableArray<SearchDataConfig>"}},useDataSources:{defaultValue:null,description:"",name:"useDataSources",required:!1,type:{name:"ImmutableArray<UseDataSource>"}},portalUrl:{defaultValue:null,description:"Portal url of current app",name:"portalUrl",required:!1,type:{name:"string"}},searchDataSettingType:{defaultValue:null,description:"The type of data service\n@param Both Display all data setting\n@param GeocodeService Only display data setting of geocode service\n@param FeatureService Only display data setting of feature service",name:"searchDataSettingType",required:!1,type:{name:"enum",value:[{value:'"Both"'},{value:'"GeocodeService"'},{value:'"FeatureService"'}]}},createOutputDs:{defaultValue:null,description:"Whether to create outputDs by geocode service",name:"createOutputDs",required:!1,type:{name:"boolean"}},hideIconSetting:{defaultValue:null,description:"Whether to hide icon settings",name:"hideIconSetting",required:!1,type:{name:"boolean"}},hideDisplayFieldSetting:{defaultValue:null,description:"Whether to hide display field settings",name:"hideDisplayFieldSetting",required:!1,type:{name:"boolean"}},showSearchInCurrentMapExtentSetting:{defaultValue:null,description:"Whether to show search in current map extent setting",name:"showSearchInCurrentMapExtentSetting",required:!1,type:{name:"boolean"}},showEnableLocalSearchSetting:{defaultValue:null,description:"Whether to show local search setting",name:"showEnableLocalSearchSetting",required:!1,type:{name:"boolean"}},enableFiltering:{defaultValue:null,description:"Enable filtering when searching for layer sources",name:"enableFiltering",required:!1,type:{name:"boolean"}},viewId:{defaultValue:null,description:"",name:"viewId",required:!1,type:{name:"string"}},hideEnableFiltering:{defaultValue:null,description:"",name:"hideEnableFiltering",required:!1,type:{name:"boolean"}},hideTitleOfNewSearchSource:{defaultValue:null,description:"",name:"hideTitleOfNewSearchSource",required:!1,type:{name:"boolean"}},autoSelectSingleGeocodeService:{defaultValue:null,description:"",name:"autoSelectSingleGeocodeService",required:!1,type:{name:"boolean"}},autoSelectAllOrgGeocodeService:{defaultValue:null,description:"",name:"autoSelectAllOrgGeocodeService",required:!1,type:{name:"boolean"}},propsForDataSourceSelector:{defaultValue:null,description:"",name:"propsForDataSourceSelector",required:!1,type:{name:"PropsForDataSourceSelector"}},supportedDsTypes:{defaultValue:null,description:"",name:"supportedDsTypes",required:!1,type:{name:"DataSourceTypes[]"}},hideDs:{defaultValue:null,description:"",name:"hideDs",required:!1,type:{name:"(dsJson: IMDataSourceJson) => boolean"}},onSettingChange:{defaultValue:null,description:"Callback fired when dataSourceConfig change.\n@event",name:"onSettingChange",required:!1,type:{name:"(datasourceConfig: ImmutableArray<SearchDataConfig>, dsInWidgetJson?: DSInWidgetJson, viewId?: string) => void"}},onEnableFilteringChange:{defaultValue:null,description:"Callback fired when enable filtering change.\n@event",name:"onEnableFilteringChange",required:!1,type:{name:"(enable: boolean) => void"}},onOutputDsSettingChange:{defaultValue:null,description:"The method of create output dataSources\n@event",name:"onOutputDsSettingChange",required:!1,type:{name:"(dataSourceJson: DataSourceJson[], datasourceConfig: ImmutableArray<SearchDataConfig>, dsInWidgetJson?: DSInWidgetJson, viewId?: string) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#SearchDataSetting"]={docgenInfo:SearchDataSetting.__docgenInfo,name:"SearchDataSetting",path:"../jimu-ui/advanced/setting-components.tsx#SearchDataSetting"})}catch(__react_docgen_typescript_loader_error){}try{SearchSuggestionSetting.displayName="SearchSuggestionSetting",SearchSuggestionSetting.__docgenInfo={description:"",displayName:"SearchSuggestionSetting",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},settingConfig:{defaultValue:null,description:"",name:"settingConfig",required:!1,type:{name:"IMSearchSuggestionConfig"}},hideRecentSearchSetting:{defaultValue:null,description:"",name:"hideRecentSearchSetting",required:!1,type:{name:"boolean"}},onSettingChange:{defaultValue:null,description:"",name:"onSettingChange",required:!1,type:{name:"(settingConfig: IMSearchSuggestionConfig) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#SearchSuggestionSetting"]={docgenInfo:SearchSuggestionSetting.__docgenInfo,name:"SearchSuggestionSetting",path:"../jimu-ui/advanced/setting-components.tsx#SearchSuggestionSetting"})}catch(__react_docgen_typescript_loader_error){}try{SearchGeneralSetting.displayName="SearchGeneralSetting",SearchGeneralSetting.__docgenInfo={description:"",displayName:"SearchGeneralSetting",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},hint:{defaultValue:null,description:"",name:"hint",required:!1,type:{name:"string"}},allowSearchSourceSelection:{defaultValue:null,description:"",name:"allowSearchSourceSelection",required:!1,type:{name:"boolean"}},enableAllowSearchSourceSelectionSetting:{defaultValue:null,description:"",name:"enableAllowSearchSourceSelectionSetting",required:!1,type:{name:"boolean"}},onGeneralSettingChange:{defaultValue:null,description:"",name:"onGeneralSettingChange",required:!1,type:{name:"(key: string[], value: any) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#SearchGeneralSetting"]={docgenInfo:SearchGeneralSetting.__docgenInfo,name:"SearchGeneralSetting",path:"../jimu-ui/advanced/setting-components.tsx#SearchGeneralSetting"})}catch(__react_docgen_typescript_loader_error){}try{checkIsTableDs.displayName="checkIsTableDs",checkIsTableDs.__docgenInfo={description:"",displayName:"checkIsTableDs",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#checkIsTableDs"]={docgenInfo:checkIsTableDs.__docgenInfo,name:"checkIsTableDs",path:"../jimu-ui/advanced/setting-components.tsx#checkIsTableDs"})}catch(__react_docgen_typescript_loader_error){}try{getInitSchema.displayName="getInitSchema",getInitSchema.__docgenInfo={description:"Get outputDs default schema",displayName:"getInitSchema",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#getInitSchema"]={docgenInfo:getInitSchema.__docgenInfo,name:"getInitSchema",path:"../jimu-ui/advanced/setting-components.tsx#getInitSchema"})}catch(__react_docgen_typescript_loader_error){}try{getAddressFieldsSchemaAndDefaultFieldName.displayName="getAddressFieldsSchemaAndDefaultFieldName",getAddressFieldsSchemaAndDefaultFieldName.__docgenInfo={description:"",displayName:"getAddressFieldsSchemaAndDefaultFieldName",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#getAddressFieldsSchemaAndDefaultFieldName"]={docgenInfo:getAddressFieldsSchemaAndDefaultFieldName.__docgenInfo,name:"getAddressFieldsSchemaAndDefaultFieldName",path:"../jimu-ui/advanced/setting-components.tsx#getAddressFieldsSchemaAndDefaultFieldName"})}catch(__react_docgen_typescript_loader_error){}try{getInitOutDataSource.displayName="getInitOutDataSource",getInitOutDataSource.__docgenInfo={description:"Get outputDs json",displayName:"getInitOutDataSource",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#getInitOutDataSource"]={docgenInfo:getInitOutDataSource.__docgenInfo,name:"getInitOutDataSource",path:"../jimu-ui/advanced/setting-components.tsx#getInitOutDataSource"})}catch(__react_docgen_typescript_loader_error){}try{getOutputJsonOriginDs.displayName="getOutputJsonOriginDs",getOutputJsonOriginDs.__docgenInfo={description:"",displayName:"getOutputJsonOriginDs",props:{type:{defaultValue:null,description:"The type of the data source.",name:"type",required:!0,type:{name:"enum",value:[{value:'"FEATURE_LAYER"'},{value:'"SCENE_LAYER"'}]}},layer:{defaultValue:null,description:"The ArcGIS Maps SDK for JavaScript [FeatureLayer](https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-FeatureLayer.html) object.",name:"layer",required:!1,type:{name:"SceneLayer | FeatureLayer"}},url:{defaultValue:null,description:"The data source URL\nThe data source URL",name:"url",required:!1,type:{name:"string"}},portalUrl:{defaultValue:null,description:"",name:"portalUrl",required:!1,type:{name:"string"}},itemId:{defaultValue:null,description:"",name:"itemId",required:!1,type:{name:"string"}},layerId:{defaultValue:null,description:"",name:"layerId",required:!1,type:{name:"string"}},getAssociatedDataSource:{defaultValue:null,description:"",name:"getAssociatedDataSource",required:!0,type:{name:"(() => FeatureLayerDataSource) | (() => SceneLayerDataSource)"}},setLayerDefinition:{defaultValue:null,description:"",name:"setLayerDefinition",required:!0,type:{name:"((layerDefinition: ILayerDefinition) => void) | ((layerDefinition: ILayerDefinition) => void)"}},getLayerDefinition:{defaultValue:null,description:"",name:"getLayerDefinition",required:!0,type:{name:"(() => ILayerDefinition) | (() => ILayerDefinition)"}},setPopupInfo:{defaultValue:null,description:"",name:"setPopupInfo",required:!0,type:{name:"((popupInfo: IPopupInfo) => void) | ((popupInfo: IPopupInfo) => void)"}},getPopupInfo:{defaultValue:null,description:"",name:"getPopupInfo",required:!0,type:{name:"(() => IPopupInfo) | (() => IPopupInfo)"}},getCapabilities:{defaultValue:null,description:"@ignore\n@ignore To do query based on query capabilities of the layer, we do two things.\n1. Before doing query, we fix query object by removing some conflicts params, see `fixQueryParam`.\n2. When doing query, we send query request by query capabilities (may remove some params), then enhance the result (using the removed params), see `doQuery`.",name:"getCapabilities",required:!0,type:{name:"(() => ArcGISCapabilities) | (() => ArcGISCapabilities)"}},getGDBVersion:{defaultValue:null,description:"Return the current GDB version.",name:"getGDBVersion",required:!0,type:{name:"(() => string) | (() => string)"}},changeGDBVersion:{defaultValue:null,description:"Change the layer GDB version.",name:"changeGDBVersion",required:!0,type:{name:"((gdbVersion: string) => void) | ((gdbVersion: string) => void)"}},supportSymbol:{defaultValue:null,description:"",name:"supportSymbol",required:!0,type:{name:"(() => boolean) | (() => boolean)"}},supportAttachment:{defaultValue:null,description:"",name:"supportAttachment",required:!0,type:{name:"(() => boolean) | (() => boolean)"}},load:{defaultValue:null,description:"Execute the query against the service and update the internal data records, pagination is supported.\nWhen call this method, the real query is returned by `getRealQueryParams`.\n\nPagination:\nThe pagination properties in the passed in query parameter may be not the same as the real query pagination that is sent to the service.\nThe real query pagination is defined in the data source setting.\nExecute the query against the service and update the internal data records, pagination is supported.\nWhen call this method, the real query is returned by `getRealQueryParams`.\n\nPagination:\nThe pagination properties in the passed in query parameter may be not the same as the real query pagination that is sent to the service.\nThe real query pagination is defined in the data source setting.",name:"load",required:!0,type:{name:"((query: ArcGISQueryParams, options?: QueryOptions) => Promise<DataRecord[]>) | ((query: ArcGISQueryParams, options?: QueryOptions) => Promise<...>)"}},loadCount:{defaultValue:null,description:"Load the records count.\nLoad the records count.",name:"loadCount",required:!0,type:{name:"((query: ArcGISQueryParams, options?: QueryOptions) => Promise<number>) | ((query: ArcGISQueryParams, options?: QueryOptions) => Promise<...>)"}},query:{defaultValue:null,description:"Execute query against the service only, do NOT update the internal data records.\nThe actual query parameters are generated by `getRealQueryParams`.\n\nTo query count, please use `queryCount`.\nExecute query against the service only, do NOT update the internal data records.\nThe actual query parameters are generated by `getRealQueryParams`.\n\nTo query count, please use `queryCount`.",name:"query",required:!0,type:{name:"((queryProperties: ArcGISQueryParams) => Promise<QueryResult>) | ((query: ArcGISQueryParams, options?: QueryOptions) => Promise<...>)"}},queryCount:{defaultValue:null,description:"Query count\nQuery count",name:"queryCount",required:!0,type:{name:"((queryProperties: ArcGISQueryParams) => Promise<QueryResult>) | ((query: ArcGISQueryParams, options?: QueryOptions) => Promise<...>)"}},selectRecords:{defaultValue:null,description:"Select records.\nSelect records.",name:"selectRecords",required:!0,type:{name:"((options: ArcGISSelectOptions, signal?: AbortSignal, progressCallback?: QueryProgressCallback) => Promise<QueryResult>) | ((options: ArcGISSelectOptions, signal?: AbortSignal, progressCallback?: QueryProgressCallback) => Promise<...>)"}},selectRecordById:{defaultValue:null,description:"Select a record by ID.\nWhen select record by ID, we can pass in the record. So when the selected record is not loaded, we can add it in.\nSelect a record by ID.\nWhen select record by ID, we can pass in the record. So when the selected record is not loaded, we can add it in.",name:"selectRecordById",required:!0,type:{name:"((id: string, record?: FeatureDataRecord) => void) | ((id: string, record?: FeatureDataRecord) => void)"}},selectRecordsByIds:{defaultValue:null,description:"Select records by IDs.\nWhen select records by IDs, we can pass in the records. So when the selected records are not loaded, we can add them in.\nSelect records by IDs.\nWhen select records by IDs, we can pass in the records. So when the selected records are not loaded, we can add them in.",name:"selectRecordsByIds",required:!0,type:{name:"((ids: string[], records?: FeatureDataRecord[]) => void) | ((ids: string[], records?: FeatureDataRecord[]) => void)"}},getIdField:{defaultValue:null,description:"Return the data source ID field.\nReturn the data source ID field.",name:"getIdField",required:!0,type:{name:"(() => string) | (() => string)"}},getGeometryType:{defaultValue:null,description:"Return null means the data source is a non-spatial data source.\nReturn null means the data source is a non-spatial data source.",name:"getGeometryType",required:!0,type:{name:"(() => GeometryType) | (() => GeometryType)"}},getConfigQueryParams:{defaultValue:null,description:"Get the user config query parameters.\nGet the user config query parameters.",name:"getConfigQueryParams",required:!0,type:{name:"(() => ArcGISQueryParams) | (() => ArcGISQueryParams)"}},mergeQueryParams:{defaultValue:null,description:"Merge queries by using `AND`, and return the merged result.\nIf any query is undefined/null, it will be ignored.\nMerge queries by using `AND`, and return the merged result.\nIf any query is undefined/null, it will be ignored.",name:"mergeQueryParams",required:!0,type:{name:"((...queries: ArcGISQueryParams[]) => ArcGISQueryParams) | ((...queries: ArcGISQueryParams[]) => ArcGISQueryParams)"}},getRealQueryParams:{defaultValue:null,description:"When do query/load, we do not fire the query request directly. Instead, we'll consider the data source's config/current query parameter.\n * For load: we'll merge the configured query parameter if it has, and all widget applied queries.\n * For query, we'll merge the current query parameter and the configured query parameter it has.\nWhen do query/load, we do not fire the query request directly. Instead, we'll consider the data source's config/current query parameter.\n * For load: we'll merge the configured query parameter if it has, and all widget applied queries.\n * For query, we'll merge the current query parameter and the configured query parameter it has.",name:"getRealQueryParams",required:!0,type:{name:'((query: any, flag: "query" | "load", options?: QueryOptions) => ArcGISQueryParams) | ((query: any, flag: "query" | "load", options?: QueryOptions) => ArcGISQueryParams)'}},getCurrentQueryParams:{defaultValue:null,description:"Get the current query parameters. The current query parameters contain all applied queries.\nGet the current query parameters. The current query parameters contain all applied queries.",name:"getCurrentQueryParams",required:!0,type:{name:"((options?: GetCurrentQueryParamsOptions) => ArcGISQueryParams) | ((options?: GetCurrentQueryParamsOptions) => ArcGISQueryParams)"}},getAllUsedFields:{defaultValue:null,description:"Return used fields both saved in config and load on demand.\nReturn used fields both saved in config and load on demand.",name:"getAllUsedFields",required:!0,type:{name:'((options?: ArcGISQueriableUsedFieldsOptions) => string[] | "*") | ((options?: ArcGISQueriableUsedFieldsOptions) => string[] | "*")'}},fetchSchema:{defaultValue:null,description:"Fetch the data schema from an actual data source. If it's a statistic data source, the schema will not be fetched.\nFetch the data schema from an actual data source. If it's a statistic data source, the schema will not be fetched.",name:"fetchSchema",required:!0,type:{name:"(() => Promise<IMDataSourceSchema>) | (() => Promise<IMDataSourceSchema>)"}},getFieldCodedValueList:{defaultValue:null,description:"",name:"getFieldCodedValueList",required:!0,type:{name:"((jimuFieldName: string, record?: FeatureDataRecord) => CodedValue[]) | ((jimuFieldName: string, record?: FeatureDataRecord) => CodedValue[])"}},buildRecord:{defaultValue:null,description:"Builds a data record only -- does not add the record into data source.\nBuilds a data record only -- does not add the record into data source.",name:"buildRecord",required:!0,type:{name:"((feature: IFeature | Graphic) => FeatureDataRecord) | ((feature: IFeature | Graphic) => FeatureDataRecord)"}},getDataViews:{defaultValue:null,description:"Override parent interface to get correct type.\nOverride parent interface to get correct type.",name:"getDataViews",required:!0,type:{name:"(() => SceneLayerDataSource[]) | (() => ArcGISQueriableDataSource[])"}},getDataView:{defaultValue:null,description:"Get data view by data view ID.\nGet data view by data view ID.",name:"getDataView",required:!0,type:{name:"((dataViewId: string) => SceneLayerDataSource) | ((dataViewId: string) => ArcGISQueriableDataSource)"}},getMainDataSource:{defaultValue:null,description:"Return the main data source.\nReturn the main data source.",name:"getMainDataSource",required:!0,type:{name:"(() => SceneLayerDataSource) | (() => ArcGISQueriableDataSource)"}},getTimezone:{defaultValue:null,description:"@ignore If layer is in unknown timezone, will return 'unknown'.\nIf use device timezone, will return 'device'.\nIf use a specific timezone, will return the timezone name.\n   There are two datasets: Calcite component values such as'Asia/shanghai', Services values such as'Pacific Standard Time'.\nIf do not find any timezone settings, will return null.",name:"getTimezone",required:!0,type:{name:"(() => string) | (() => string)"}},getPopupInfoFields:{defaultValue:null,description:"",name:"getPopupInfoFields",required:!0,type:{name:"() => string[]"}},supportTime:{defaultValue:null,description:"",name:"supportTime",required:!0,type:{name:"() => boolean"}},getTimeInfo:{defaultValue:null,description:"",name:"getTimeInfo",required:!0,type:{name:"() => TimeInfo"}},queryIds:{defaultValue:null,description:"Query record IDs, there is no limit to the number of the IDs returned in the `ids` array response.",name:"queryIds",required:!0,type:{name:"(query: ArcGISQueryParams, options?: QueryOptions) => Promise<QueryResult>"}},queryExtent:{defaultValue:null,description:"",name:"queryExtent",required:!0,type:{name:"(query: ArcGISQueryParams, options?: QueryOptions) => Promise<QueryResult>"}},updateQueryParams:{defaultValue:null,description:"Update the data source query without executing the actual query.",name:"updateQueryParams",required:!0,type:{name:"(query: ArcGISQueryParams, widgetId: string) => void"}},setSourceRecords:{defaultValue:null,description:"When current data source is created from an array of records (`DataRecord`), will save it in `sourceRecords`.\nThese two methods are used to update or get the source data.\nPlease note, use these two methods only when `isDataInDataSourceInstance` is true.",name:"setSourceRecords",required:!0,type:{name:"(records: DataRecord[]) => void"}},getSourceRecords:{defaultValue:null,description:"Return the source records",name:"getSourceRecords",required:!0,type:{name:"() => DataRecord[]"}},setSourceFeatures:{defaultValue:null,description:"When current data source is created from an array of features (__esri.Graphic), will save it in an ArcGIS Maps SDK for JavaScript feature layer.\nThis method is used to update the source data.\nPlease note, use this method only when `isDataInDataSourceInstance` is not true.",name:"setSourceFeatures",required:!0,type:{name:'(features: (Graphic | GraphicProperties)[], others?: Omit<FeatureLayerProperties, "source" | "fields" | "objectIdField">) => Promise<...>'}},lastUpdateTime:{defaultValue:null,description:"",name:"lastUpdateTime",required:!0,type:{name:"Date"}},isSqlCaseSensitive:{defaultValue:null,description:"Whether the data source is case-sensitive when doing query by SQL clauses.",name:"isSqlCaseSensitive",required:!0,type:{name:"boolean"}},haveMorePages:{defaultValue:null,description:"@ignore The method check whether there are more pages. E.g. the function `haveMorePages(3, 10)` returns `true`, indicating that there are more than 30 records available.\nIt depends on the loaded pages. Please do the load first and then call the method to check if there are more pages besides the loaded ones.",name:"haveMorePages",required:!0,type:{name:'(page: number, pageSize: number) => boolean | "unknown"'}},loadAll:{defaultValue:null,description:"Load all records, there is no limit to the number of the records returned in the `records` array response.\nYou can abort the progress by a abort `signal` and can use `progressCallback` to get the progress and the current results.",name:"loadAll",required:!0,type:{name:"(query: QueryParams, signal?: AbortSignal, progressCallback?: QueryProgressCallback, options?: QueryOptions) => Promise<...>"}},loadById:{defaultValue:null,description:"Load record by ID, do not consider other queries.",name:"loadById",required:!0,type:{name:"(id: string, refresh?: boolean) => Promise<DataRecord>"}},getCurrentQueryId:{defaultValue:null,description:"Get the current loaded record id, which is used in `loadById` method.",name:"getCurrentQueryId",required:!0,type:{name:"() => string"}},getRuntimeQueryParams:{defaultValue:null,description:"Get the queries applied in runtime. If the excludeWidgetId is passed in, the queries of this widget will be excluded.",name:"getRuntimeQueryParams",required:!0,type:{name:"(excludeWidgetId?: string) => QueryParams"}},getRemoteQueryParams:{defaultValue:null,description:"Get the query parameters configured in remote (not in exb).",name:"getRemoteQueryParams",required:!0,type:{name:"() => QueryParams"}},queryById:{defaultValue:null,description:"Query record by ID.\nWill return all fields if not pass in the `fields`.",name:"queryById",required:!0,type:{name:"(id: string, fields?: string[]) => Promise<DataRecord>"}},queryAll:{defaultValue:null,description:"Query all records, there is no limit to the number of the records returned in the `records` array response.\nYou can abort the progress by a abort `signal` and can use `progressCallback` to get the progress and the current results.",name:"queryAll",required:!0,type:{name:"(query: QueryParams, signal?: AbortSignal, progressCallback?: QueryProgressCallback, options?: QueryOptions) => Promise<...>"}},selectAllLoadedRecords:{defaultValue:null,description:"Select all loaded records.",name:"selectAllLoadedRecords",required:!0,type:{name:"() => void"}},getRecordsByPage:{defaultValue:null,description:"The page size here defines the records this method returns, which are not the actual query pageSize. Will use a fixed pageSize to query and cache data.",name:"getRecordsByPage",required:!0,type:{name:"(page: number, pageSize: number) => DataRecord[]"}},getRecords:{defaultValue:null,description:"Get records of the loaded continuous pages.\nIf the loaded pages are 1, 2, and 10, will only return records on the page 1 and 2.\n\nWidgets can use different page sizes to query the data source, but the data source has a specific page size to query the service.\nThe data source will save the loaded records by its own page size and split them when widgets doing queries (with different page and page sizes).\nThe method returns continuous page records to make sure the order of the records is correct.",name:"getRecords",required:!0,type:{name:"() => DataRecord[]"}},getAllLoadedRecords:{defaultValue:null,description:"Get records of all the loaded pages.",name:"getAllLoadedRecords",required:!0,type:{name:"() => DataRecord[]"}},getPagesData:{defaultValue:null,description:"",name:"getPagesData",required:!0,type:{name:"() => { [page: number]: DataRecord[]; }"}},setPagesData:{defaultValue:null,description:"",name:"setPagesData",required:!0,type:{name:"(pages: { [page: number]: DataRecord[]; }) => void"}},getRealQueryPages:{defaultValue:null,description:"Get real query page depends on the widget's request page.",name:"getRealQueryPages",required:!0,type:{name:"(pageSize: number, page: number) => number[]"}},getQueryPageSize:{defaultValue:null,description:"",name:"getQueryPageSize",required:!0,type:{name:"() => number"}},getMaxRecordCount:{defaultValue:null,description:"Null means there is no record count limit, and will return all records from the service.",name:"getMaxRecordCount",required:!0,type:{name:"() => number"}},getSaveStatus:{defaultValue:null,description:"@ignore",name:"getSaveStatus",required:!0,type:{name:"() => DataSourceStatus"}},setSaveStatus:{defaultValue:null,description:"@ignore",name:"setSaveStatus",required:!1,type:{name:"(status: DataSourceStatus) => void"}},getAutoRefreshInterval:{defaultValue:null,description:"If the return value > 0, auto refresh is enabled.",name:"getAutoRefreshInterval",required:!0,type:{name:"() => number"}},getLastRefreshTime:{defaultValue:null,description:"",name:"getLastRefreshTime",required:!0,type:{name:"() => Date"}},startAutoRefresh:{defaultValue:null,description:"",name:"startAutoRefresh",required:!0,type:{name:"() => void"}},stopAutoRefresh:{defaultValue:null,description:"",name:"stopAutoRefresh",required:!0,type:{name:"() => void"}},allowToExportData:{defaultValue:null,description:"",name:"allowToExportData",required:!0,type:{name:"() => Promise<boolean>"}},getExportOptions:{defaultValue:null,description:"",name:"getExportOptions",required:!0,type:{name:"() => IMExportOptions"}},getRecordsByPageWithSelection:{defaultValue:null,description:"If selected records are not loaded in the current data source, will concat them to the end of records array.\nSee {@link getRecordsWithSelection} for details.",name:"getRecordsByPageWithSelection",required:!0,type:{name:"(page: number, pageSize: number) => DataRecord[]"}},id:{defaultValue:null,description:"The data source ID.",name:"id",required:!0,type:{name:"string"}},dataSourceManager:{defaultValue:null,description:"The data source manager, which is used to manage the data source, including create/get/destroy the data source instance.",name:"dataSourceManager",required:!0,type:{name:"DataSourceManager"}},isDataSourceSet:{defaultValue:null,description:"Whether a data source contains child data sources.\nA set data source won't create all its child data sources when `ready` is resolved.\nTo make sure all child data sources are created, please use `childDataSourcesReady`.",name:"isDataSourceSet",required:!0,type:{name:"(() => this is DataSource & SetDataSourceMixin) | (() => this is DataSource & SetDataSourceMixin)"}},count:{defaultValue:null,description:"The total records count depends on the current query",name:"count",required:!1,type:{name:"number"}},getLabel:{defaultValue:null,description:"Return data source label.",name:"getLabel",required:!0,type:{name:"() => string"}},getDataSourceJson:{defaultValue:null,description:"The data source JSON object in app config.",name:"getDataSourceJson",required:!0,type:{name:"() => IMDataSourceJson"}},setDataSourceJson:{defaultValue:null,description:"Update data source JSON in data source instance",name:"setDataSourceJson",required:!0,type:{name:"(dsJson: IMDataSourceJson) => void"}},getSchema:{defaultValue:null,description:"The schema returned here is the merged result of the configured schema and the fetched schema.\nThe configured schema is the user's changes, such as a new data source name.\nThe fetched schema is the original schema from AGOL/portal item or a remote database, such as the service name, the fields and the filters.",name:"getSchema",required:!0,type:{name:"() => IMDataSourceSchema"}},setSchema:{defaultValue:null,description:"",name:"setSchema",required:!0,type:{name:"(schema: IMDataSourceSchema) => void"}},getReversedConfigSchema:{defaultValue:null,description:'The data schema is in "dataSourceJson",\n   * For data source, use "jimuName" as key, and save the actual field name in the object.\n   * For data source set, use "jimuChildId" as key, and save the actual child ID in the object.\nIn many cases, we need to use the actual "childId" or "fieldName" to access info, so we can use this method to get a reverse schema for ease of use.\n@ignore',name:"getReversedConfigSchema",required:!0,type:{name:"() => IMReversedDataSourceSchema"}},getFetchedSchema:{defaultValue:null,description:"",name:"getFetchedSchema",required:!0,type:{name:"() => IMDataSourceSchema"}},setFetchedSchema:{defaultValue:null,description:"",name:"setFetchedSchema",required:!0,type:{name:"(schema: IMDataSourceSchema) => void"}},getSelectedFields:{defaultValue:null,description:"@ignore The schema contains all fields defined in the actual service. You can select some of the fields and only allow widgets to use these fields.\nFramework provide two ways to select fields, one is to change the app config in builder, the other is to call `dataSource.setSelectedFields` in app.\n\nThe method will return the intersection of configured selected fields and runtime selected fields.\nThe fields of used data source in widget json should be a sub set of the returned selected fields.\nFor example, widgets can call `setSelectedFields` to limit the selectable fields of its output data source.",name:"getSelectedFields",required:!0,type:{name:"() => string[]"}},setSelectedFields:{defaultValue:null,description:"",name:"setSelectedFields",required:!0,type:{name:"(jimuNames: string[]) => void"}},getLoadOnDemandUsedFields:{defaultValue:null,description:"Return used fields load on demand. For example, out fields in query params.\n@ignore",name:"getLoadOnDemandUsedFields",required:!0,type:{name:'(options?: UsedFieldsOptions) => string[] | "*"'}},getConfigUsedFields:{defaultValue:null,description:"Return used fields saved in config. For example, fields saved in use data sources of widget config.\n@ignore",name:"getConfigUsedFields",required:!0,type:{name:'(options?: UsedFieldsOptions) => string[] | "*"'}},getRecordsWithSelection:{defaultValue:null,description:"If selected records are not loaded in the current data source, they will be concatenated to the end of records array.\nFor example, record 1 is selected in data view 1 and it is not loaded in data view 2 (record 1 actually matches query params of data view 2),\ndataView2.getRecordsWithSelection() will return all loaded records in data view 2 and record 1.",name:"getRecordsWithSelection",required:!0,type:{name:"() => DataRecord[]"}},canSaveSourceRecords:{defaultValue:null,description:"Return whether current data source can save source records to itself.\nA data view / local data source doesn't save source records, instead, will use source records in main data source.\nSelection view is a special data view which will save selected records.\n@ignore",name:"canSaveSourceRecords",required:!0,type:{name:"() => boolean"}},getRecord:{defaultValue:null,description:"Get record by index",name:"getRecord",required:!0,type:{name:"(index: number) => DataRecord"}},getRecordById:{defaultValue:null,description:"Get record by ID",name:"getRecordById",required:!0,type:{name:"(id: string) => DataRecord"}},setRecords:{defaultValue:null,description:"Update the records in the data source object only, does not update the source data.",name:"setRecords",required:!0,type:{name:"(records: DataRecord[]) => void"}},nextRecord:{defaultValue:null,description:"@ignore",name:"nextRecord",required:!1,type:{name:"() => DataRecord"}},prevRecord:{defaultValue:null,description:"@ignore",name:"prevRecord",required:!1,type:{name:"() => DataRecord"}},clearRecords:{defaultValue:null,description:"This function will clear the loaded records and won't clear the sourceRecords. Once the loaded records are cleared, the version in the data source info will be updated.",name:"clearRecords",required:!1,type:{name:"() => void"}},clearRecordsNotAddVersion:{defaultValue:null,description:"@ignore Clear records but don't add version in data source info.",name:"clearRecordsNotAddVersion",required:!1,type:{name:"() => void"}},clearCountNotAddVersion:{defaultValue:null,description:"@ignore Clear the count but don't add version in data source info.",name:"clearCountNotAddVersion",required:!1,type:{name:"() => void"}},clearQueryByIdNotAddVersion:{defaultValue:null,description:"@ignore Clear the query by id promise but don't add version in data source info.",name:"clearQueryByIdNotAddVersion",required:!1,type:{name:"() => void"}},clearSourceRecords:{defaultValue:null,description:"Clear both sourceRecords and loaded records. Both source version and version in data source info will be updated.",name:"clearSourceRecords",required:!0,type:{name:"() => void"}},clearSourceRecordsNotAddVersion:{defaultValue:null,description:"@ignore Clear source records and records, neither source version nor version will be added.",name:"clearSourceRecordsNotAddVersion",required:!0,type:{name:"() => void"}},getStatus:{defaultValue:null,description:"Return data source status.",name:"getStatus",required:!0,type:{name:"() => DataSourceStatus"}},setStatus:{defaultValue:null,description:"Update data source status.",name:"setStatus",required:!1,type:{name:"(status: DataSourceStatus) => void"}},getCountStatus:{defaultValue:null,description:"Return data source count status.",name:"getCountStatus",required:!0,type:{name:"() => DataSourceStatus"}},setCountStatus:{defaultValue:null,description:"Update data source count status.",name:"setCountStatus",required:!1,type:{name:"(status: DataSourceStatus) => void"}},getVersion:{defaultValue:null,description:"Return data source version.",name:"getVersion",required:!0,type:{name:"() => number"}},addVersion:{defaultValue:null,description:"Update data source version.",name:"addVersion",required:!1,type:{name:"() => void"}},getSourceVersion:{defaultValue:null,description:"When current data source is created from an array of records, it will be saved in `sourceRecords`.\nReturn the version of `sourceRecords`.",name:"getSourceVersion",required:!0,type:{name:"() => number"}},addSourceVersion:{defaultValue:null,description:"When current data source is created from an array of records, it will be saved in `sourceRecords`.\nAdd the version of `sourceRecords`.\n`setSourceRecords` will add the version by default.",name:"addSourceVersion",required:!0,type:{name:"() => void"}},destroy:{defaultValue:null,description:"Destroy the data source.",name:"destroy",required:!0,type:{name:"() => void"}},ready:{defaultValue:null,description:"Ready is resolved means the data source instance is ready for use.\nPlease note that can not make sure all child data sources are created if a set data source is ready.\nTo make sure all child data sources are created, please use `childDataSourcesReady`.",name:"ready",required:!0,type:{name:"() => Promise<any>"}},getInfo:{defaultValue:null,description:"Return the data source info in redux store.",name:"getInfo",required:!0,type:{name:"() => IMDataSourceInfo"}},getOriginDataSources:{defaultValue:null,description:"For most of the widget output data source, it has an original data source from which it's generated.\nFor the configured data source, return null.\n@ignore",name:"getOriginDataSources",required:!1,type:{name:"() => DataSource[]"}},getAllDerivedDataSources:{defaultValue:null,description:"Return the derived data views and local data sources.",name:"getAllDerivedDataSources",required:!0,type:{name:"() => DataSource[]"}},isInAppConfig:{defaultValue:null,description:"Return whether the data source is added in builder and is saved in app config.",name:"isInAppConfig",required:!0,type:{name:"() => boolean"}},parentDataSource:{defaultValue:null,description:"The parent data source of this data source, mull means it's a root data source.",name:"parentDataSource",required:!0,type:{name:"DataSource & SetDataSourceMixin"}},jimuChildId:{defaultValue:null,description:"",name:"jimuChildId",required:!0,type:{name:"string"}},order:{defaultValue:null,description:"Order in the parent data source.",name:"order",required:!1,type:{name:"number"}},getRootDataSource:{defaultValue:null,description:"Return the root data source.",name:"getRootDataSource",required:!0,type:{name:"() => DataSource"}},belongToDataSource:{defaultValue:null,description:"The data source which this data source derives from.",name:"belongToDataSource",required:!1,type:{name:"DataSource"}},dataViewId:{defaultValue:null,description:"The data view ID configured in JSON.",name:"dataViewId",required:!1,type:{name:"string"}},isDataView:{defaultValue:null,description:"True means the data source is a data view.\nFor local data source, this is false even the local data source is created from a data view.",name:"isDataView",required:!0,type:{name:"boolean"}},isLocal:{defaultValue:null,description:"True means the data source is a local data source.",name:"isLocal",required:!0,type:{name:"boolean"}},localId:{defaultValue:null,description:"The local ID of the data source.",name:"localId",required:!1,type:{name:"string"}},getSelectionDataView:{defaultValue:null,description:"Get selection data view",name:"getSelectionDataView",required:!0,type:{name:"() => DataSource"}},getDataViewConfig:{defaultValue:null,description:"Return the config of the current data source.",name:"getDataViewConfig",required:!0,type:{name:"() => IMDataViewJson"}},getLocalDataSources:{defaultValue:null,description:"Return all local data sources created from a main data source or data view.",name:"getLocalDataSources",required:!0,type:{name:"() => DataSource[]"}},getLocalDataSource:{defaultValue:null,description:"Get local data source by local ID.",name:"getLocalDataSource",required:!0,type:{name:"(localId: string) => DataSource"}},useNoSelectionView:{defaultValue:null,description:"@ignore Get whether a data source should use records of no_selection view as its own source records.",name:"useNoSelectionView",required:!0,type:{name:"(dataSource?: DataSource) => boolean"}},updateRecords:{defaultValue:null,description:"@ignore These methods will update the source data of data source.\n\nThe data source object provides an interface interact with its source,\nthe source 1. may come from AGOL/portal item or a remote database, 2. may come from an array directly.\nIf the source comes from AGOL/portal item or a remote database, these operations will use ArcGIS Maps SDK for JavaScript or ArcGIS REST APIs to apply edits to it.\nIf the source comes from an array directly, will save it in `sourceRecords` and these operations will edit the `sourceRecords`.\n\nThe data source object also contains a subset of its source, the subset is saved in `records` and loaded from source.\nTo update the subset, please use `setRecords()`, to update the source, please use these operations.\nTo get the subset, please use `getRecords()`, to get the source:\n  - for data source which comes from an array directly, please use `getSourceRecords()`,\n  - for data source which comes from AGOL/portal item or a remote database:\n    - for queriable data source, please use `query()` or `load()`,\n    - for stream data source, please use `onData` (TBD).",name:"updateRecords",required:!0,type:{name:"(records: DataRecord[]) => Promise<boolean>"}},addRecord:{defaultValue:null,description:"",name:"addRecord",required:!0,type:{name:"(record: DataRecord) => Promise<DataRecord>"}},updateRecord:{defaultValue:null,description:"",name:"updateRecord",required:!0,type:{name:"(record: DataRecord) => Promise<boolean>"}},deleteRecord:{defaultValue:null,description:"",name:"deleteRecord",required:!0,type:{name:"(index: number) => Promise<boolean>"}},deleteRecordById:{defaultValue:null,description:"",name:"deleteRecordById",required:!0,type:{name:"(id: string) => Promise<boolean>"}},afterUpdateRecords:{defaultValue:null,description:"@ignore These methods are used to update records in data source after editing data out of data source (**the edit operation isn't done by data source**).\n\nNo need to use these methods if the edit operation is done by data source.",name:"afterUpdateRecords",required:!0,type:{name:"(records: DataRecord[]) => void"}},afterAddRecord:{defaultValue:null,description:"",name:"afterAddRecord",required:!0,type:{name:"(record: DataRecord) => void"}},afterUpdateRecord:{defaultValue:null,description:"",name:"afterUpdateRecord",required:!0,type:{name:"(record: DataRecord) => void"}},afterDeleteRecordById:{defaultValue:null,description:"",name:"afterDeleteRecordById",required:!0,type:{name:"(id: string) => void"}},afterDeleteRecordsByIds:{defaultValue:null,description:"",name:"afterDeleteRecordsByIds",required:!0,type:{name:"(ids: string[]) => void"}},selectRecord:{defaultValue:null,description:"@ignore\n@deprecated Select record by index.",name:"selectRecord",required:!0,type:{name:"(index: number) => void"}},getSelectedRecords:{defaultValue:null,description:"Get selected records",name:"getSelectedRecords",required:!0,type:{name:"() => DataRecord[]"}},getSelectedRecordIndexes:{defaultValue:null,description:"Get selected record indexes",name:"getSelectedRecordIndexes",required:!0,type:{name:"() => number[]"}},getSelectedRecordIds:{defaultValue:null,description:"Get selected record IDs",name:"getSelectedRecordIds",required:!0,type:{name:"() => string[]"}},getSelectedRecordIdsFromInfo:{defaultValue:null,description:"",name:"getSelectedRecordIdsFromInfo",required:!0,type:{name:"() => ImmutableArray<string>"}},getSelectOptionsFromInfo:{defaultValue:null,description:"",name:"getSelectOptionsFromInfo",required:!0,type:{name:"() => ImmutableObject<SelectOptions>"}},updateSelectionInfo:{defaultValue:null,description:"Update selected records in data source info if the current data source listens selection change (see `setListenSelection`) or the current data source is the trigger data source (that is to say, select via it).\n\nBefore update info, will check whether these selected records match filters of the current data source firstly, and then only set the matched selected records to info.\nWill skip the check in some cases to improve performance if the `forceCheck` is not passed in or is false. For example, if the current data source is main data source (we suppose that main data source contains all records, no need to check).\nBut if the `forceCheck` is true, won't skip the check.",name:"updateSelectionInfo",required:!0,type:{name:"(options: SelectOptions, triggerDataSource: DataSource, forceCheck?: boolean) => void"}},clearSelection:{defaultValue:null,description:"",name:"clearSelection",required:!0,type:{name:"() => void"}},setListenSelection:{defaultValue:null,description:"Whether listen selected records from other data sources which are derived from the same main data source.\nIf true, will update selected record IDs of current data source info when selecting records via other derived data sources. Will also update selected record IDs when selecting records via current data source itself.\nIf false, won't change selected record IDs when selecting records via other derived data sources. Will update selected record IDs only when selecting records via current data source itself.\n\nMain data source and its data views will listen selected records by default, local data source does not listen selected records by default.",name:"setListenSelection",required:!0,type:{name:"(listen: boolean) => void"}},getListenSelection:{defaultValue:null,description:"Return whether listen selection.",name:"getListenSelection",required:!0,type:{name:"() => boolean"}},jimuLayerId:{defaultValue:null,description:"",name:"jimuLayerId",required:!1,type:{name:"string"}},createJSAPILayerByDataSource:{defaultValue:null,description:"Default `dataSource` is the current data source.\nDefault `useDataSourceQueryParams` is true, that is to say apply the data source's query params to the created ArcGIS Maps SDK for JavaScript layer by default.\nDefault `throwError` is false, that is to say the method won't throw error and will return `undefined` if the creation fail.",name:"createJSAPILayerByDataSource",required:!0,type:{name:"(dataSource?: DataSource, useDataSourceQueryParams?: boolean, throwError?: boolean) => Promise<Layer | ArcGISSubLayer>"}},supportSpatialInfo:{defaultValue:null,description:"",name:"supportSpatialInfo",required:!0,type:{name:"() => boolean"}},getItemInfo:{defaultValue:null,description:"",name:"getItemInfo",required:!0,type:{name:"() => IItem"}},getItemData:{defaultValue:null,description:"",name:"getItemData",required:!0,type:{name:"() => any"}},fetchItemInfo:{defaultValue:null,description:"",name:"fetchItemInfo",required:!0,type:{name:"() => Promise<IItem>"}},fetchItemData:{defaultValue:null,description:"",name:"fetchItemData",required:!0,type:{name:"() => Promise<any>"}},restLayer:{defaultValue:null,description:"The [Feature Layer](https://developers.arcgis.com/web-map-specification/objects/featureLayer/) JSON object.",name:"restLayer",required:!1,type:{name:"IFeatureLayer"}},isAssociatedFeatureLayer:{defaultValue:null,description:"@ignore Whether the feature layer data source is other data source's associated data source, which means the feature layer data source is created automatically.",name:"isAssociatedFeatureLayer",required:!0,type:{name:"boolean"}},createRestAPILayerByDataSource:{defaultValue:null,description:"",name:"createRestAPILayerByDataSource",required:!0,type:{name:"() => IFeatureLayer"}},setAssociatedDataSource:{defaultValue:null,description:"",name:"setAssociatedDataSource",required:!0,type:{name:"(associatedDataSource: SceneLayerDataSource) => void"}},getCharts:{defaultValue:null,description:"",name:"getCharts",required:!0,type:{name:"() => WebMapWebChart[]"}},createRelatedDataSources:{defaultValue:null,description:"",name:"createRelatedDataSources",required:!0,type:{name:"() => Promise<FeatureLayerDataSource[]>"}},getRelatedDataSources:{defaultValue:null,description:"",name:"getRelatedDataSources",required:!0,type:{name:"() => FeatureLayerDataSource[]"}},queryRelatedRecords:{defaultValue:null,description:"",name:"queryRelatedRecords",required:!0,type:{name:"(relatedDataSource: FeatureLayerDataSource, ids: string[], params?: ArcGISQueryParams, ignoreFilter?: boolean) => Promise<RelatedRecordGroup[]>"}},queryRelatedFieldValues:{defaultValue:null,description:"",name:"queryRelatedFieldValues",required:!0,type:{name:"(records: FeatureDataRecord[], relatedDs: FeatureLayerDataSource, relatedFieldName: string) => Promise<any[]>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#getOutputJsonOriginDs"]={docgenInfo:getOutputJsonOriginDs.__docgenInfo,name:"getOutputJsonOriginDs",path:"../jimu-ui/advanced/setting-components.tsx#getOutputJsonOriginDs"})}catch(__react_docgen_typescript_loader_error){}try{checkIsWidgetJsonDsChanged.displayName="checkIsWidgetJsonDsChanged",checkIsWidgetJsonDsChanged.__docgenInfo={description:"Check is useDataSource or outputDataSource changed in widgetJson",displayName:"checkIsWidgetJsonDsChanged",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#checkIsWidgetJsonDsChanged"]={docgenInfo:checkIsWidgetJsonDsChanged.__docgenInfo,name:"checkIsWidgetJsonDsChanged",path:"../jimu-ui/advanced/setting-components.tsx#checkIsWidgetJsonDsChanged"})}catch(__react_docgen_typescript_loader_error){}try{getConfigIdList.displayName="getConfigIdList",getConfigIdList.__docgenInfo={description:"Get config id list",displayName:"getConfigIdList",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#getConfigIdList"]={docgenInfo:getConfigIdList.__docgenInfo,name:"getConfigIdList",path:"../jimu-ui/advanced/setting-components.tsx#getConfigIdList"})}catch(__react_docgen_typescript_loader_error){}try{getNewConfigId.displayName="getNewConfigId",getNewConfigId.__docgenInfo={description:"Get new dataSource config id",displayName:"getNewConfigId",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#getNewConfigId"]={docgenInfo:getNewConfigId.__docgenInfo,name:"getNewConfigId",path:"../jimu-ui/advanced/setting-components.tsx#getNewConfigId"})}catch(__react_docgen_typescript_loader_error){}try{getNewDsConfigItem.displayName="getNewDsConfigItem",getNewDsConfigItem.__docgenInfo={description:"",displayName:"getNewDsConfigItem",props:{datasourceConfig:{defaultValue:null,description:"",name:"datasourceConfig",required:!0,type:{name:"ImmutableArray<SearchDataConfig>"}},dsJsonOriginDs:{defaultValue:null,description:"",name:"dsJsonOriginDs",required:!0,type:{name:"FeatureLayerDataSource"}},useDataSource:{defaultValue:null,description:"",name:"useDataSource",required:!0,type:{name:"UseDataSource"}},datasourceConfigItem:{defaultValue:null,description:"",name:"datasourceConfigItem",required:!1,type:{name:"IMSearchDataConfig"}},configId:{defaultValue:null,description:"",name:"configId",required:!1,type:{name:"string"}},viewId:{defaultValue:null,description:"",name:"viewId",required:!1,type:{name:"string"}},fieldsInMapSearchProperties:{defaultValue:null,description:"",name:"fieldsInMapSearchProperties",required:!1,type:{name:"FieldItemInMapSearchProperties[]"}},exactMatch:{defaultValue:null,description:"",name:"exactMatch",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},searchInCurrentMapExtent:{defaultValue:null,description:"",name:"searchInCurrentMapExtent",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#getNewDsConfigItem"]={docgenInfo:getNewDsConfigItem.__docgenInfo,name:"getNewDsConfigItem",path:"../jimu-ui/advanced/setting-components.tsx#getNewDsConfigItem"})}catch(__react_docgen_typescript_loader_error){}try{initNewDatasourceConfigByField.displayName="initNewDatasourceConfigByField",initNewDatasourceConfigByField.__docgenInfo={description:"",displayName:"initNewDatasourceConfigByField",props:{configId:{defaultValue:null,description:"",name:"configId",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},useDataSource:{defaultValue:null,description:"",name:"useDataSource",required:!0,type:{name:"ImmutableObject<UseDataSource>"}},icon:{defaultValue:null,description:"",name:"icon",required:!1,type:{name:"any"}},searchFields:{defaultValue:null,description:"",name:"searchFields",required:!1,type:{name:"ImmutableArray<FieldSchema>"}},searchExact:{defaultValue:null,description:"",name:"searchExact",required:!1,type:{name:"boolean"}},displayFields:{defaultValue:null,description:"",name:"displayFields",required:!1,type:{name:"ImmutableArray<FieldSchema>"}},hint:{defaultValue:null,description:"",name:"hint",required:!1,type:{name:"string"}},searchServiceType:{defaultValue:null,description:"",name:"searchServiceType",required:!1,type:{name:"enum",value:[{value:'"GeocodeService"'},{value:'"FeatureService"'}]}},layerViewId:{defaultValue:null,description:"",name:"layerViewId",required:!1,type:{name:"string"}},searchInCurrentMapExtent:{defaultValue:null,description:"Search in current map extent",name:"searchInCurrentMapExtent",required:!1,type:{name:"boolean"}},useUtility:{defaultValue:null,description:"",name:"useUtility",required:!0,type:{name:"ImmutableObject<UseUtility>"}},outputDataSourceId:{defaultValue:null,description:"",name:"outputDataSourceId",required:!1,type:{name:"string"}},singleLineFieldName:{defaultValue:null,description:"",name:"singleLineFieldName",required:!1,type:{name:"string"}},addressFields:{defaultValue:null,description:"",name:"addressFields",required:!1,type:{name:"ImmutableArray<FieldSchema>"}},defaultAddressFieldName:{defaultValue:null,description:"",name:"defaultAddressFieldName",required:!1,type:{name:"string"}},isSupportSuggest:{defaultValue:null,description:"",name:"isSupportSuggest",required:!1,type:{name:"boolean"}},spatialReference:{defaultValue:null,description:"",name:"spatialReference",required:!1,type:{name:"ImmutableObject<ISpatialReference>"}},synchronizeSettings:{defaultValue:null,description:"",name:"synchronizeSettings",required:!1,type:{name:"boolean"}},enableCountryCode:{defaultValue:null,description:"",name:"enableCountryCode",required:!1,type:{name:"boolean"}},enableLocalSearch:{defaultValue:null,description:"",name:"enableLocalSearch",required:!1,type:{name:"boolean"}},minScale:{defaultValue:null,description:"",name:"minScale",required:!1,type:{name:"number"}},countryCode:{defaultValue:null,description:"",name:"countryCode",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#initNewDatasourceConfigByField"]={docgenInfo:initNewDatasourceConfigByField.__docgenInfo,name:"initNewDatasourceConfigByField",path:"../jimu-ui/advanced/setting-components.tsx#initNewDatasourceConfigByField"})}catch(__react_docgen_typescript_loader_error){}try{getNewDataSourceConfig.displayName="getNewDataSourceConfig",getNewDataSourceConfig.__docgenInfo={description:"Get layer default config",displayName:"getNewDataSourceConfig",props:{datasourceConfig:{defaultValue:null,description:"",name:"datasourceConfig",required:!0,type:{name:"ImmutableArray<SearchDataConfig>"}},dsJsonOriginDs:{defaultValue:null,description:"",name:"dsJsonOriginDs",required:!0,type:{name:"FeatureLayerDataSource"}},useDataSource:{defaultValue:null,description:"",name:"useDataSource",required:!0,type:{name:"UseDataSource"}},datasourceConfigItem:{defaultValue:null,description:"",name:"datasourceConfigItem",required:!1,type:{name:"IMSearchDataConfig"}},configId:{defaultValue:null,description:"",name:"configId",required:!1,type:{name:"string"}},viewId:{defaultValue:null,description:"",name:"viewId",required:!1,type:{name:"string"}},fieldsInMapSearchProperties:{defaultValue:null,description:"",name:"fieldsInMapSearchProperties",required:!1,type:{name:"FieldItemInMapSearchProperties[]"}},exactMatch:{defaultValue:null,description:"",name:"exactMatch",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},searchInCurrentMapExtent:{defaultValue:null,description:"",name:"searchInCurrentMapExtent",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#getNewDataSourceConfig"]={docgenInfo:getNewDataSourceConfig.__docgenInfo,name:"getNewDataSourceConfig",path:"../jimu-ui/advanced/setting-components.tsx#getNewDataSourceConfig"})}catch(__react_docgen_typescript_loader_error){}try{getDefaultField.displayName="getDefaultField",getDefaultField.__docgenInfo={description:"Get default field after add layer",displayName:"getDefaultField",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#getDefaultField"]={docgenInfo:getDefaultField.__docgenInfo,name:"getDefaultField",path:"../jimu-ui/advanced/setting-components.tsx#getDefaultField"})}catch(__react_docgen_typescript_loader_error){}try{getDsJsonOfOriginDs.displayName="getDsJsonOfOriginDs",getDsJsonOfOriginDs.__docgenInfo={description:"Create output datasource by useDataSource",displayName:"getDsJsonOfOriginDs",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#getDsJsonOfOriginDs"]={docgenInfo:getDsJsonOfOriginDs.__docgenInfo,name:"getDsJsonOfOriginDs",path:"../jimu-ui/advanced/setting-components.tsx#getDsJsonOfOriginDs"})}catch(__react_docgen_typescript_loader_error){}try{getAllDsByDataConfigWithMapCentric.displayName="getAllDsByDataConfigWithMapCentric",getAllDsByDataConfigWithMapCentric.__docgenInfo={description:"",displayName:"getAllDsByDataConfigWithMapCentric",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#getAllDsByDataConfigWithMapCentric"]={docgenInfo:getAllDsByDataConfigWithMapCentric.__docgenInfo,name:"getAllDsByDataConfigWithMapCentric",path:"../jimu-ui/advanced/setting-components.tsx#getAllDsByDataConfigWithMapCentric"})}catch(__react_docgen_typescript_loader_error){}try{getAllDataSourceBySearchDataConfig.displayName="getAllDataSourceBySearchDataConfig",getAllDataSourceBySearchDataConfig.__docgenInfo={description:"Get all useDataSources and outputDataSources",displayName:"getAllDataSourceBySearchDataConfig",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#getAllDataSourceBySearchDataConfig"]={docgenInfo:getAllDataSourceBySearchDataConfig.__docgenInfo,name:"getAllDataSourceBySearchDataConfig",path:"../jimu-ui/advanced/setting-components.tsx#getAllDataSourceBySearchDataConfig"})}catch(__react_docgen_typescript_loader_error){}try{getDsInWidgetJson.displayName="getDsInWidgetJson",getDsInWidgetJson.__docgenInfo={description:"get new ds in widgetJson after select layer.",displayName:"getDsInWidgetJson",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#getDsInWidgetJson"]={docgenInfo:getDsInWidgetJson.__docgenInfo,name:"getDsInWidgetJson",path:"../jimu-ui/advanced/setting-components.tsx#getDsInWidgetJson"})}catch(__react_docgen_typescript_loader_error){}try{MultipleJimuMapConfig.displayName="MultipleJimuMapConfig",MultipleJimuMapConfig.__docgenInfo={description:"This component is used for configuring one or multiple `JimuMap`. If two data sources are selected in the connected map widget,\nclicking on the list item of this component switches the map widget's active view to the corresponding one. The switch behavior\nis on the fly (discarded when refreshing the page).\nUse this component by `import { MultipleJimuMapConfig } from 'jimu-ui/advanced/setting-components'`.",displayName:"MultipleJimuMapConfig",props:{mapWidgetId:{defaultValue:null,description:"The map widget ID that is using this component.",name:"mapWidgetId",required:!0,type:{name:"string"}},sidePopperContent:{defaultValue:null,description:"The JSX content that you want to put in the `SidePopper` panel. DO NOT wrap it with the `SidePopper` component.",name:"sidePopperContent",required:!1,type:{name:"Element"}},disableSwitchMap:{defaultValue:{value:"false"},description:"Whether to disable the map-switch behavior when clicking on different `JimuMap` items. The default value is `false`.",name:"disableSwitchMap",required:!1,type:{name:"boolean"}},disabled:{defaultValue:{value:"false"},description:"Whether to disable the whole list.",name:"disabled",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"The callback function of clicking an item in the list.",name:"onClick",required:!1,type:{name:"(dataSourceId: string) => void"}},isDataSourceValid:{defaultValue:null,description:"Used for checking whether a specific `dataSourceId` is valid for configuration.\nIt will show a warning icon if the return value is `false`.",name:"isDataSourceValid",required:!1,type:{name:"(dataSourceId: string) => MultipleJimuMapValidateResult"}},showDefaultMapWhenEmpty:{defaultValue:{value:"false"},description:"Display a default `JimuMap` item when no web map is added to the map widget.",name:"showDefaultMapWhenEmpty",required:!1,type:{name:"boolean"}},forwardRef:{defaultValue:null,description:"ForwardRef to component outer div.\n@ignore",name:"forwardRef",required:!1,type:{name:"(ref: any) => void"}},keepLastTimeMap:{defaultValue:{value:"false"},description:"Keep the last time clicked `JimuMap` when closing the side popper",name:"keepLastTimeMap",required:!1,type:{name:"boolean"}},"aria-describedby":{defaultValue:null,description:"The id of the description element\n@ignore",name:"aria-describedby",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#MultipleJimuMapConfig"]={docgenInfo:MultipleJimuMapConfig.__docgenInfo,name:"MultipleJimuMapConfig",path:"../jimu-ui/advanced/setting-components.tsx#MultipleJimuMapConfig"})}catch(__react_docgen_typescript_loader_error){}try{CardLayoutSetting.displayName="CardLayoutSetting",CardLayoutSetting.__docgenInfo={description:"",displayName:"CardLayoutSetting",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},onSettingChange:{defaultValue:null,description:"",name:"onSettingChange",required:!0,type:{name:"SettingChangeFunction"}},cardLayout:{defaultValue:null,description:"",name:"cardLayout",required:!0,type:{name:"enum",value:[{value:'"Auto"'},{value:'"Custom"'}]}},status:{defaultValue:null,description:"",name:"status",required:!0,type:{name:"enum",value:[{value:'"DEFAULT"'},{value:'"SELECTED"'},{value:'"HOVER"'}]}},browserSizeMode:{defaultValue:null,description:"",name:"browserSizeMode",required:!0,type:{name:"enum",value:[{value:'"SMALL"'},{value:'"MEDIUM"'},{value:'"LARGE"'}]}},mainSizeMode:{defaultValue:null,description:"",name:"mainSizeMode",required:!0,type:{name:"enum",value:[{value:'"SMALL"'},{value:'"MEDIUM"'},{value:'"LARGE"'}]}},layouts:{defaultValue:null,description:"",name:"layouts",required:!0,type:{name:"any"}},config:{defaultValue:null,description:"",name:"config",required:!0,type:{name:"any"}},appConfig:{defaultValue:null,description:"",name:"appConfig",required:!0,type:{name:"IMAppConfig"}},isCardWidget:{defaultValue:null,description:"",name:"isCardWidget",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#CardLayoutSetting"]={docgenInfo:CardLayoutSetting.__docgenInfo,name:"CardLayoutSetting",path:"../jimu-ui/advanced/setting-components.tsx#CardLayoutSetting"})}catch(__react_docgen_typescript_loader_error){}try{setLayoutAuto.displayName="setLayoutAuto",setLayoutAuto.__docgenInfo={description:"",displayName:"setLayoutAuto",props:{layout:{defaultValue:null,description:"",name:"layout",required:!0,type:{name:"enum",value:[{value:'"Auto"'},{value:'"Custom"'}]}},config:{defaultValue:null,description:"",name:"config",required:!0,type:{name:"any"}},widgetId:{defaultValue:null,description:"",name:"widgetId",required:!0,type:{name:"string"}},appConfig:{defaultValue:null,description:"",name:"appConfig",required:!0,type:{name:"IMAppConfig"}},status:{defaultValue:null,description:"",name:"status",required:!0,type:{name:"enum",value:[{value:'"DEFAULT"'},{value:'"SELECTED"'},{value:'"HOVER"'}]}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},isCardWidget:{defaultValue:null,description:"",name:"isCardWidget",required:!1,type:{name:"boolean"}},layouts:{defaultValue:null,description:"",name:"layouts",required:!0,type:{name:"any"}},mainSizeMode:{defaultValue:null,description:"",name:"mainSizeMode",required:!0,type:{name:"enum",value:[{value:'"SMALL"'},{value:'"MEDIUM"'},{value:'"LARGE"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#setLayoutAuto"]={docgenInfo:setLayoutAuto.__docgenInfo,name:"setLayoutAuto",path:"../jimu-ui/advanced/setting-components.tsx#setLayoutAuto"})}catch(__react_docgen_typescript_loader_error){}try{setLayoutCustom.displayName="setLayoutCustom",setLayoutCustom.__docgenInfo={description:"",displayName:"setLayoutCustom",props:{layout:{defaultValue:null,description:"",name:"layout",required:!0,type:{name:"enum",value:[{value:'"Auto"'},{value:'"Custom"'}]}},config:{defaultValue:null,description:"",name:"config",required:!0,type:{name:"any"}},widgetId:{defaultValue:null,description:"",name:"widgetId",required:!0,type:{name:"string"}},appConfig:{defaultValue:null,description:"",name:"appConfig",required:!0,type:{name:"IMAppConfig"}},status:{defaultValue:null,description:"",name:"status",required:!0,type:{name:"enum",value:[{value:'"DEFAULT"'},{value:'"SELECTED"'},{value:'"HOVER"'}]}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},isCardWidget:{defaultValue:null,description:"",name:"isCardWidget",required:!1,type:{name:"boolean"}},layouts:{defaultValue:null,description:"",name:"layouts",required:!0,type:{name:"any"}},mainSizeMode:{defaultValue:null,description:"",name:"mainSizeMode",required:!0,type:{name:"enum",value:[{value:'"SMALL"'},{value:'"MEDIUM"'},{value:'"LARGE"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/setting-components.tsx#setLayoutCustom"]={docgenInfo:setLayoutCustom.__docgenInfo,name:"setLayoutCustom",path:"../jimu-ui/advanced/setting-components.tsx#setLayoutCustom"})}catch(__react_docgen_typescript_loader_error){}}}]);
//# sourceMappingURL=5091.2ff18208.iframe.bundle.js.map