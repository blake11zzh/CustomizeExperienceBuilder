(self.webpackChunkarcgis_experience_builder_design_system=self.webpackChunkarcgis_experience_builder_design_system||[]).push([[6990],{"../jimu-icons/filled/data/layer.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{s:()=>LayerFilled});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_filled_data_layer_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/filled/data/layer.svg"),_svg_filled_data_layer_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_filled_data_layer_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const LayerFilled=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_filled_data_layer_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{LayerFilled.displayName="LayerFilled",LayerFilled.__docgenInfo={description:"",displayName:"LayerFilled",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/filled/data/layer.tsx#LayerFilled"]={docgenInfo:LayerFilled.__docgenInfo,name:"LayerFilled",path:"../jimu-icons/filled/data/layer.tsx#LayerFilled"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/filled/data/widget.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{h:()=>WidgetFilled});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_filled_data_widget_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/filled/data/widget.svg"),_svg_filled_data_widget_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_filled_data_widget_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const WidgetFilled=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_filled_data_widget_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{WidgetFilled.displayName="WidgetFilled",WidgetFilled.__docgenInfo={description:"",displayName:"WidgetFilled",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/filled/data/widget.tsx#WidgetFilled"]={docgenInfo:WidgetFilled.__docgenInfo,name:"WidgetFilled",path:"../jimu-icons/filled/data/widget.tsx#WidgetFilled"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/outlined/application/invisible.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{u:()=>InvisibleOutlined});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_outlined_application_invisible_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/outlined/application/invisible.svg"),_svg_outlined_application_invisible_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_outlined_application_invisible_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const InvisibleOutlined=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_outlined_application_invisible_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{InvisibleOutlined.displayName="InvisibleOutlined",InvisibleOutlined.__docgenInfo={description:"",displayName:"InvisibleOutlined",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/outlined/application/invisible.tsx#InvisibleOutlined"]={docgenInfo:InvisibleOutlined.__docgenInfo,name:"InvisibleOutlined",path:"../jimu-icons/outlined/application/invisible.tsx#InvisibleOutlined"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/outlined/data/globe.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{w:()=>GlobeOutlined});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_outlined_data_globe_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/outlined/data/globe.svg"),_svg_outlined_data_globe_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_outlined_data_globe_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const GlobeOutlined=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_outlined_data_globe_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{GlobeOutlined.displayName="GlobeOutlined",GlobeOutlined.__docgenInfo={description:"",displayName:"GlobeOutlined",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/outlined/data/globe.tsx#GlobeOutlined"]={docgenInfo:GlobeOutlined.__docgenInfo,name:"GlobeOutlined",path:"../jimu-icons/outlined/data/globe.tsx#GlobeOutlined"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/outlined/directional/up.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{k:()=>UpOutlined});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_outlined_directional_up_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/outlined/directional/up.svg"),_svg_outlined_directional_up_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_outlined_directional_up_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const UpOutlined=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_outlined_directional_up_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{UpOutlined.displayName="UpOutlined",UpOutlined.__docgenInfo={description:"",displayName:"UpOutlined",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/outlined/directional/up.tsx#UpOutlined"]={docgenInfo:UpOutlined.__docgenInfo,name:"UpOutlined",path:"../jimu-icons/outlined/directional/up.tsx#UpOutlined"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/outlined/editor/duplicate.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{k:()=>DuplicateOutlined});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_outlined_editor_duplicate_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/outlined/editor/duplicate.svg"),_svg_outlined_editor_duplicate_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_outlined_editor_duplicate_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const DuplicateOutlined=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_outlined_editor_duplicate_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{DuplicateOutlined.displayName="DuplicateOutlined",DuplicateOutlined.__docgenInfo={description:"",displayName:"DuplicateOutlined",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/outlined/editor/duplicate.tsx#DuplicateOutlined"]={docgenInfo:DuplicateOutlined.__docgenInfo,name:"DuplicateOutlined",path:"../jimu-icons/outlined/editor/duplicate.tsx#DuplicateOutlined"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/outlined/editor/edit.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{x:()=>EditOutlined});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_outlined_editor_edit_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/outlined/editor/edit.svg"),_svg_outlined_editor_edit_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_outlined_editor_edit_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const EditOutlined=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_outlined_editor_edit_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{EditOutlined.displayName="EditOutlined",EditOutlined.__docgenInfo={description:"",displayName:"EditOutlined",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/outlined/editor/edit.tsx#EditOutlined"]={docgenInfo:EditOutlined.__docgenInfo,name:"EditOutlined",path:"../jimu-icons/outlined/editor/edit.tsx#EditOutlined"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/outlined/editor/preview.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{P:()=>PreviewOutlined});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_outlined_editor_preview_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/outlined/editor/preview.svg"),_svg_outlined_editor_preview_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_outlined_editor_preview_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const PreviewOutlined=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_outlined_editor_preview_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{PreviewOutlined.displayName="PreviewOutlined",PreviewOutlined.__docgenInfo={description:"",displayName:"PreviewOutlined",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/outlined/editor/preview.tsx#PreviewOutlined"]={docgenInfo:PreviewOutlined.__docgenInfo,name:"PreviewOutlined",path:"../jimu-icons/outlined/editor/preview.tsx#PreviewOutlined"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/svg/filled/data/layer.svg":module=>{module.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M14.629 9.143 16 10.286 8 16l-8-5.714 1.371-1.143L8 13.714zM8 0l8 5.714-8 5.715-8-5.715z" clip-rule="evenodd"></path></svg>'},"../jimu-icons/svg/filled/data/widget.svg":module=>{module.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M6.667 4.667 11.333 0 16 4.667l-4.667 4.666zM0 1.333V8h6.667V1.333zM6.667 16H0V9.333h6.667zM8 16V9.333h6.667V16z" clip-rule="evenodd"></path></svg>'},"../jimu-icons/svg/outlined/application/invisible.svg":module=>{module.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M3.154 3.154a.527.527 0 0 1 .746 0l1.317 1.317A8.6 8.6 0 0 1 8 4c2.667 0 5.667 1.333 7 4-.696 1.393-1.847 2.422-3.168 3.087l1.014 1.013a.527.527 0 1 1-.746.746l-1.317-1.317A8.6 8.6 0 0 1 8 12c-2.667 0-5.667-1.333-7-4 .696-1.393 1.847-2.422 3.168-3.087L3.154 3.9a.527.527 0 0 1 0-.746m1.698 2.443C3.726 6.087 2.782 6.882 2 8c1.422 2.033 3.382 3 6 3a8.7 8.7 0 0 0 2.03-.225l-.675-.674A2.5 2.5 0 0 1 5.9 6.644zm6.296 4.805C12.275 9.913 13.218 9.119 14 8c-1.422-2.033-3.382-3-6-3q-1.088 0-2.03.225l.675.674a2.5 2.5 0 0 1 3.457 3.456zM6.5 8c0-.221.048-.431.134-.62l1.987 1.986A1.5 1.5 0 0 1 6.5 8m.88-1.366 1.986 1.987a1.5 1.5 0 0 0-1.987-1.987" clip-rule="evenodd"></path></svg>'},"../jimu-icons/svg/outlined/data/date.svg":module=>{module.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M5.5 1a.5.5 0 0 0-.5.5V2H2a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1h-3v-.5a.5.5 0 0 0-1 0V2H6v-.5a.5.5 0 0 0-.5-.5M10 3.5V3H6v.5a.5.5 0 0 1-1 0V3H2v2h12V3h-3v.5a.5.5 0 0 1-1 0M14 6H2v8h12zM5 8.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5m.5 2.5a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1z" clip-rule="evenodd"></path></svg>'},"../jimu-icons/svg/outlined/data/globe.svg":module=>{module.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#C5C5C5" d="M2.56 12.801a7.284 7.284 0 0 0 11.48 0h.005v-.006a7.27 7.27 0 0 0 0-8.988v-.006h-.004a7.283 7.283 0 0 0-11.482 0h-.004v.006a7.27 7.27 0 0 0 0 8.988v.006zm1.95-8a11.5 11.5 0 0 0-.495 3h-1.99a6.26 6.26 0 0 1 1.04-3zm9.025 0a6.26 6.26 0 0 1 1.04 3h-1.99a11.5 11.5 0 0 0-.495-3zm-1.445 7c.297-.974.464-1.983.495-3h1.99a6.26 6.26 0 0 1-1.04 3zm-4.29 1v1.716a3.32 3.32 0 0 1-1.78-1.716zm-2.225-1a10.3 10.3 0 0 1-.56-3H7.8v3zM8.8 14.517v-1.716h1.78a3.32 3.32 0 0 1-1.78 1.716m0-2.716v-3h2.786a10.3 10.3 0 0 1-.56 3zm2.786-4H8.8v-3h2.225c.335.967.524 1.978.561 3m-2.786-4V2.085c.792.322 1.43.936 1.78 1.716zm-1-1.716v1.716H6.02c.351-.78.988-1.394 1.78-1.716m0 2.716v3H5.014c.038-1.022.227-2.033.561-3zm-3.785 4a11.5 11.5 0 0 0 .495 3H3.065a6.26 6.26 0 0 1-1.04-3zm.881 4q.275.614.662 1.163A6.3 6.3 0 0 1 3.9 12.801zm6.146 1.163q.388-.55.662-1.163h.996a6.3 6.3 0 0 1-1.658 1.163m.662-10.163a7 7 0 0 0-.662-1.163A6.3 6.3 0 0 1 12.7 3.801zM5.558 2.638q-.388.55-.662 1.163H3.9a6.3 6.3 0 0 1 1.66-1.163z"></path></svg>'},"../jimu-icons/svg/outlined/data/number.svg":module=>{module.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="m5.635 9.86 2.168-2.18L8 7.471q.102-.11.185-.233t.138-.258a.7.7 0 0 0 .055-.283.73.73 0 0 0-.244-.558.8.8 0 0 0-.256-.151.9.9 0 0 0-.312-.054.82.82 0 0 0-.583.214.92.92 0 0 0-.276.573l-.993-.082q.03-.401.185-.709.153-.307.398-.512.244-.205.568-.311A2.2 2.2 0 0 1 7.566 5q.38 0 .706.102.327.103.572.304.244.2.386.512.142.311.142.73 0 .549-.24.946-.24.398-.62.758l-1.726 1.664h2.586v.886H5.635zM3.6 6.23 2.55 7.238 2 6.558l1.687-1.46h.86v5.804H3.6zm8.23 1.204h-.244v.886h.229q.212 0 .434.032.22.033.398.128a.8.8 0 0 1 .292.27q.114.177.114.455 0 .204-.075.373a.9.9 0 0 1-.205.287.986.986 0 0 1-.658.25q-.379 0-.6-.197a1.05 1.05 0 0 1-.307-.557l-1.01.278q.096.36.277.62.18.257.43.421.247.164.555.242.307.078.655.078.37 0 .713-.11.343-.111.603-.328.261-.217.414-.537.154-.321.154-.738 0-.54-.276-.935-.276-.393-.812-.475v-.016q.45-.115.702-.48.252-.364.252-.832a1.41 1.41 0 0 0-.536-1.16 1.7 1.7 0 0 0-.568-.29A2.4 2.4 0 0 0 12.076 5q-.307 0-.591.074-.285.074-.52.225-.237.151-.41.39a1.8 1.8 0 0 0-.268.557l1 .279a.95.95 0 0 1 .328-.472.83.83 0 0 1 .508-.168q.355 0 .576.213a.73.73 0 0 1 .22.55.8.8 0 0 1-.094.418.64.64 0 0 1-.248.237 1 1 0 0 1-.347.107 3 3 0 0 1-.398.024" clip-rule="evenodd"></path></svg>'},"../jimu-icons/svg/outlined/data/string.svg":module=>{module.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M12.89 6.032q.214.113.442.452l.574-.58q-.31-.493-.67-.698A1.55 1.55 0 0 0 12.454 5q-.48 0-.882.214a2.05 2.05 0 0 0-.69.609 3 3 0 0 0-.454.955 4.4 4.4 0 0 0-.165 1.246q0 .669.165 1.218.164.549.453.94t.691.604.882.214q.456 0 .86-.242.405-.242.686-.774l-.61-.597q-.204.363-.441.528a.85.85 0 0 1-.49.166q-.321 0-.582-.162a1.5 1.5 0 0 1-.448-.443 2.2 2.2 0 0 1-.29-.67 3.3 3.3 0 0 1-.102-.846q0-.427.102-.799.102-.37.29-.649.187-.277.448-.435.26-.158.583-.158.216 0 .43.113m-8.448-.887h-.638L2 10.855h.826L3.2 9.548h1.798l.386 1.307h.843zm-.34 1.21.639 2.322H3.452zm2.59-1.21h1.615q.235 0 .463.077.228.076.407.25.18.173.29.447.111.275.111.662 0 .483-.199.798t-.521.452v.016a.9.9 0 0 1 .36.149q.167.117.284.298.117.182.185.42.067.237.067.512 0 .468-.135.778t-.354.5a1.3 1.3 0 0 1-.504.27 2.1 2.1 0 0 1-.577.08H6.691zm1.41 2.323H7.43V6.016h.61q.42 0 .611.182.19.18.19.552a.73.73 0 0 1-.184.52q-.185.198-.554.198M7.43 9.984h.68q.14 0 .301-.024a.675.675 0 0 0 .518-.367.96.96 0 0 0 .088-.448q0-.45-.214-.629-.213-.177-.664-.177h-.709z" clip-rule="evenodd"></path></svg>'},"../jimu-icons/svg/outlined/editor/duplicate.svg":module=>{module.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M1.5 11a.5.5 0 0 0 .5-.5V2h8.5a.5.5 0 0 0 0-1H2a1 1 0 0 0-1 1v8.5a.5.5 0 0 0 .5.5M5 4h9a1 1 0 0 1 1 1v9a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1m0 1v9h9V5z" clip-rule="evenodd"></path></svg>'},"../jimu-icons/svg/outlined/editor/edit.svg":module=>{module.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M11.227 1.312c-.404-.404-1.045-.417-1.432-.03L2.49 8.587l-.48 2.674a.637.637 0 0 0 .73.73l2.673-.48 7.305-7.306c.387-.387.374-1.028-.03-1.431zm-8.114 9.575.32-1.781 4.991-4.992 1.462 1.462-4.992 4.991zm7.473-6.012 1.402-1.4-1.462-1.463-1.401 1.402z" clip-rule="evenodd"></path><path fill="#000" d="M1.5 14a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1z"></path></svg>'},"../jimu-icons/svg/outlined/editor/preview.svg":module=>{module.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M13 1a2 2 0 0 1 2 2v6.5a.5.5 0 0 1-1 0V3a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h6.5a.5.5 0 0 1 0 1H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2zm-1.849 10.151a.517.517 0 0 1 .73 0l2.923 2.923a.517.517 0 0 1-.73.73l-2.923-2.922a.517.517 0 0 1 0-.73M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8m0-1a3 3 0 1 1 0-6 3 3 0 0 1 0 6" clip-rule="evenodd"></path></svg>'},"../jimu-ui/advanced/data-source-selector.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AddDefinitionStatus:()=>AddDefinitionStatus,AllDataSourceTypes:()=>jimu_core.at,DEFAULT_DATA_VIEW_ID:()=>DEFAULT_DATA_VIEW_ID,DataSourceErrorItem:()=>data_source_error_item_DataSourceErrorItem,DataSourceItem:()=>data_source_item_DataSourceItem,DataSourceList:()=>data_source_list_DataSourceList,DataSourceRemoveWaringReason:()=>data_source_remove_warning_popup_DataSourceRemoveWaringReason,DataSourceRemoveWarningPopup:()=>data_source_remove_warning_popup_DataSourceRemoveWarningPopup,DataSourceSelector:()=>components_data_source_selector_DataSourceSelector,DataSourceTree:()=>data_source_tree_DataSourceTree,DataViewPriority:()=>main_data_and_view_selector_DataViewPriority,DataViewSettingPopup:()=>data_view_setting_popup_DataViewSettingPopup,ExternalDataSourceSelector:()=>external_data_source_selector_ExternalDataSourceSelector,FieldSelector:()=>field_selector_FieldSelector,FieldSelectorWithFullTextIndex:()=>field_selector_with_full_text_index_FieldSelectorWithFullTextIndex,MainDataAndViewSelector:()=>main_data_and_view_selector_MainDataAndViewSelector,_DataSourceSelector:()=>data_source_selector_DataSourceSelector,dataComponentsUtils:()=>data_source_selector_utils_namespaceObject});var styles_namespaceObject={};__webpack_require__.r(styles_namespaceObject),__webpack_require__.d(styles_namespaceObject,{DataSourceErrorItem:()=>dataSourceErrorItemStyles,DataSourceItem:()=>dataSourceItemStyles,DataSourceList:()=>dataSourceListStyles,DataSourceRemoveWarningPopup:()=>dataSourceRemoveWarningPopupStyles,DataSourceSelector:()=>dataSourceSelectorStyles,DataSourceTree:()=>dataSourceTreeStyles,DataViewSettingPopup:()=>dataViewSettingPopupStyles,ExternalDataSourceSelector:()=>externalDataSourceSelectorStyles,FieldSelector:()=>fieldSelectorStyles,MainDataAndViewSelector:()=>mainDataAndViewSelectorStyles});var data_source_selector_utils_namespaceObject={};__webpack_require__.r(data_source_selector_utils_namespaceObject),__webpack_require__.d(data_source_selector_utils_namespaceObject,{editDataSourceJson:()=>editDataSourceJson,getAppConfig:()=>getAppConfig,getDescendantDssAndViews:()=>getDescendantDssAndViews,getIconFromFieldType:()=>getIconFromFieldType,getOriginalDataUrl:()=>getOriginalDataUrl,getOutputDssFromOriginDs:()=>getOutputDssFromOriginDs,getWhetherDataSourceIsInited:()=>getWhetherDataSourceIsInited,getWidgetsUsingDescendantDss:()=>getWidgetsUsingDescendantDss,getWidgetsUsingDsOrItsDescendantDss:()=>getWidgetsUsingDsOrItsDescendantDss,getWidgetsUsingDsOrItsViews:()=>getWidgetsUsingDsOrItsViews,getWidgetsUsingOneDs:()=>getWidgetsUsingOneDs,getWidgetsUsingOutputDsFromOneWidget:()=>getWidgetsUsingOutputDsFromOneWidget,isFuzzyFromDsIds:()=>isFuzzyFromDsIds,isFuzzySearch:()=>isFuzzySearch,isMapWidget:()=>isMapWidget});var jimu_core=__webpack_require__("../jimu-core/index.tsx");function dataSourceSelectorStyles(props){const theme=props.theme;return jimu_core.AHW`
    .component-data-source-selector{
      .font-dark-600{
        color: ${theme.ref.palette.neutral[1e3]};
      }
      .font-weight-500{
        font-weight: 500;
      }
      .added-ds-item{
        position: relative;
        .loading-container{
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
        }
        .loading-placeholder{
          width: 100%;
          background-color: ${theme.ref.palette.neutral[500]};
          padding: ${jimu_core.PLL.rem(10)};
          .first-line{
            .first-line-left{
              width: ${jimu_core.PLL.rem(18)};
              height: ${jimu_core.PLL.rem(18)};
              background-color: ${theme.ref.palette.neutral[600]};
            }
            .first-line-right{
              height: ${jimu_core.PLL.rem(10)};
              background-color: ${theme.ref.palette.neutral[600]};
            }
          }
          .second-line{
            height: ${jimu_core.PLL.rem(26)};
            background-color: ${theme.ref.palette.neutral[600]};
          }
        }
      }
      .data-view-dropdown-menu-button{
        background: ${theme.sys.color.secondary.dark};
        text-align: left;
      }
      .dv-select-container{
        margin-top: ${jimu_core.PLL.rem(12)};
        .jimu-dropdown-button{
          .settings-icon{
            display: none;
          }
        }
      }
      .create-view-button{
        position: relative;
        margin-top: 2px;
        padding-top: 8px;
        .create-view-button-border{
          width: 90%;
          border-top: 1px solid ${theme.ref.palette.neutral[700]};
          position: absolute;
          top: 0;
          left: 50%;
          transform: translate(-50%, 0);
        }
      }
      .ds-selector-button{
        height: ${jimu_core.PLL.rem(40)};
        line-height: ${jimu_core.PLL.rem(40)};
        padding: 0;
        border: 1px dashed ${theme.ref.palette.neutral[800]};
        border-radius: ${jimu_core.PLL.rem(2)};
        cursor: pointer;
        color: ${theme.sys.color.primary.light};
        font-size: ${jimu_core.PLL.rem(14)};
        text-decoration: none;
        &:hover{
          border-color: ${theme.ref.palette.neutral[900]};
          color: ${theme.sys.color.primary.light};
        }
      }
      .ds-item.ds-error-item{
        background-color: ${theme.sys.color.secondary.main};
        *{
          color: ${theme.ref.palette.neutral[900]} !important;
        }
        .ds-thumbnail{
          background-color: ${theme.sys.color.secondary.dark};
        }
      }
      .ds-item{
        &:not(:first-of-type) {
          margin-top: ${jimu_core.PLL.rem(8)};
        }

        padding: ${jimu_core.PLL.rem(8)} ${jimu_core.PLL.rem(10)} ${jimu_core.PLL.rem(10)} ${jimu_core.PLL.rem(10)};
        background-color: ${theme.sys.color.secondary.main};
        cursor: pointer;

        &:hover{
          background-color: ${theme.ref.palette.neutral[600]};
        }

        .mr-30{
          margin-right: ${jimu_core.PLL.rem(30)};
        }

        &.disable-cursor{
          cursor: default;
        }

        .ds-item-close{
          height: 100%;
          cursor: pointer;
          margin-left: ${jimu_core.PLL.rem(5)};
          margin-right: -5px;
        }

        .ds-item-filter{
          height: 100%;
          cursor: pointer;
        }

        .ds-item-sort{
          height: 100%;
          cursor: pointer;
          margin-left: ${jimu_core.PLL.rem(5)};
        }

        .ds-thumbnail{
          width:  ${jimu_core.PLL.rem(18)};
          height:  ${jimu_core.PLL.rem(18)};
          background-color: ${theme.sys.color.info.main};
        }
        .ds-type{
          font-size: ${jimu_core.PLL.rem(14)};
          color: ${theme.ref.palette.neutral[1100]};
        }
        .top-right-red-dot-container{
          position: relative;
        }
        .top-right-red-dot{
          position: absolute;
          top: 0;
          right: 0;
          display: inline-block;
          width: 8px;
          height: 8px;
          border-radius: 4px;
          background-color: ${theme.sys.color.error.dark};
        }
      }
    }

  `}function dataSourceListStyles(props){const theme=props.theme;return jimu_core.AHW`
    .component-data-source-list{
      font-size: ${theme.ref.typeface.fontSize};
      overflow: hidden;

      .loading-container{
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
      }
      .loading-container-for-label {
        margin-top: -5px;
      }
      .loading-container-for-item {
        margin-top: -2px;
      }

      .ds-item.ds-item-loading {
        overflow: visible;
        background-color: ${theme.sys.color.secondary.main};
          *:not(.item-active-icon svg, .ds-close-icon){
            color: ${theme.ref.palette.neutral[900]} !important;
          }
          .ds-thumbnail{
            background-color: ${theme.ref.palette.neutral[700]};
          }
          .ds-close-icon{
            color: ${theme.ref.palette.neutral[1e3]} !important;
          }
        }
      .remove-link-style {
        color: inherit !important;
        text-decoration: none !important;
        background-color: transparent !important;
      }
      .remove-link-style:hover {
          color: inherit !important;
          text-decoration: none !important;
      }

      .data-tabs .tab-content .tab-pane {
        padding-top: 16px;
      }

      .search{
        position: relative;
      }
      .search-input{
        height: 26px;
        border-radius: 2px;
      }
      .search-icon{
        color: ${theme.ref.palette.neutral[1e3]};
      }

      .empty-placeholder{
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        padding-left: 16px;
        padding-right: 16px;
        .empty-placeholder-text, .empty-placeholder-icon{
          display: table;
          margin: 0 auto;
        }
        .empty-placeholder-text{
          color: ${theme.ref.palette.neutral[900]};
          font-size: ${jimu_core.PLL.rem(14)};
          margin-top: 16px;
          text-align: center;
        }
        .empty-placeholder-icon{
          color: ${theme.ref.palette.neutral[800]};
        }
      }

      .jimu-tabs{
        height: 100%;
        .tab-content{
          height: calc(100% - 40px);
        }
        .tab-pane{
          width: 100%;
        }
        .jimu-nav.nav-pills{
            margin: 0 ${jimu_core.PLL.rem(16)} !important;
          }
      }

      .ds-list-container{
        height: calc(100% - 120px);
      }

      .ds-list{
        height: calc(100% - 20px);
        overflow: auto;
      }

      .ds-list-header{
        width: 100%;
      }

      .ds-add-data{
        position: absolute;
        bottom: 0;
        height: ${jimu_core.PLL.rem(40)};
        width: 100%;
        color: ${theme.sys.color.primary.light};
        font-size: ${jimu_core.PLL.rem(14)};
        border-top: 1px solid ${theme.sys.color.secondary.light};
        cursor: pointer;
        &:hover{
          .add-data-icon-container{
            background-color: ${jimu_core.PLL.rgba(theme.sys.color.primary.light,.8)};
          }
          color: ${jimu_core.PLL.rgba(theme.sys.color.primary.light,.8)};
        }
        .add-data-icon-container{
          width: ${jimu_core.PLL.rem(20)};
          height: ${jimu_core.PLL.rem(20)};
          background-color: ${theme.sys.color.primary.light};
          border-radius: ${jimu_core.PLL.rem(10)};
        }
        .add-data-icon{
          color: ${theme.ref.palette.neutral[400]};
        }
      }

      .ds-list-close{
        width: ${jimu_core.PLL.rem(30)};
        height: 100%;
        cursor: pointer;
      }

      .ds-widget-back{
        width: ${jimu_core.PLL.rem(80)};
        height: ${jimu_core.PLL.rem(30)};
        cursor: pointer;
      }

      .ds-types{
        color: ${theme.ref.palette.black};
        font-size: ${theme.ref.typeface.fontSize};
      }

      .ds-remove{
        width: 26px;
        margin-left: -6px;
        display: none;
      }

      .ds-link{
        width: 26px;
        margin-left: -12px;
        display: none;
      }

      .ds-widget-outputs{
        padding: 0;
      }

      .ds-added-data{
        padding: 0;
      }

      .to-use-types{
        color: ${theme.ref.palette.black};
        .types-selected{
          max-width: ${jimu_core.PLL.rem(150)};
        }
        .to-use-dp{
          width: ${jimu_core.PLL.rem(120)};
          height: ${jimu_core.PLL.rem(26)};
        }
      }

      .ds-thumbnail{
        width:  ${jimu_core.PLL.rem(26)};
        height:  ${jimu_core.PLL.rem(26)};
        background-color: ${theme.sys.color.info.main};
      }
      .ds-type{
        font-size: ${jimu_core.PLL.rem(14)};
        color: ${theme.ref.palette.neutral[1100]};
      }
      .ds-item.ds-error-item{
        background-color: ${theme.sys.color.secondary.main};
        *{
          color: ${theme.ref.palette.neutral[900]} !important;
        }
        .ds-thumbnail{
          background-color: ${theme.sys.color.secondary.dark};
        }
      }
      .ds-item{
        border: 1px solid transparent;
        border-radius: 0;
        position: relative;
        left: -2px;
        cursor: pointer;
        .item{
          height: 26px;
          background-color: ${theme.sys.color.secondary.main};
          padding-left: 0;
          padding-right: 0;
        }
        .item-active-icon{
          position: absolute;
          top: -1px;
          right: -1px;
          .item-active-icon-container{
            width: 0;
            height: 0;
            border-top: ${jimu_core.PLL.rem(12)} ${theme.sys.color.primary.light} solid;
            border-left: ${jimu_core.PLL.rem(12)} transparent solid;
            background-color: transparent;
          }
        }
      }
      .ds-item.ds-item-selected{
        border: 1px solid ${theme.sys.color.primary.light};
      }
      .ds-item:not(.ds-item-selected):hover{
        .ds-remove{
            display: flex !important;
          }
      }
      .ds-item:hover{
        .ds-link{
            display: flex !important;
          }
      }
    }

  `}function dataSourceTreeStyles(props){const theme=props.theme;return jimu_core.AHW`
    *{
      margin: 0;
      padding: 0;
    }
    .bg{
      padding: ${jimu_core.PLL.rem(16)} ${jimu_core.PLL.rem(2)};
      background-color: ${theme.ref.palette.neutral[300]};
      border-top: 2px solid ${theme.sys.color.primary.light};
    }
    .tree-root{
      padding-left: ${jimu_core.PLL.rem(20)};
      padding-right: ${jimu_core.PLL.rem(5)};
    }
    .component-data-source-tree{
      position: relative;
      .collapse-button{
        position: absolute;
        left: 2px;
        z-index: 1;
      }
      .collapse-content{
        padding-left: ${jimu_core.PLL.rem(20)};
        padding-top: ${jimu_core.PLL.rem(16)};
        position: relative;
      }
      .collapse-button:not(.root):not(.leaf){
        left: ${jimu_core.PLL.rem(-18)};
      }
      .collapse-button.leaf{
        left: 2px;
      }
      .z-index-1 {
        z-index: 1;
      }
      .collapse-button:not(.root):before{
        content: '';
        position: absolute;
        top: 50%;
        left: -2px;
        border-top: 1px solid ${theme.ref.palette.neutral[900]};
        width: ${jimu_core.PLL.rem(21)};
        transform: translateY(-50%);
      }
      .collapse-line{
        border-left: 1px solid ${theme.ref.palette.neutral[900]};
        border-bottom: 1px solid ${theme.ref.palette.neutral[900]};
        position: absolute;
        top: -2px;
        left: 0;
        z-index: 0;
        transform-origin: top;
        height: 1rem;
        transition: transform 0s;
      }
      .collapse-line:not(.root){
        top: -2px;
      }
    }

  `}function externalDataSourceSelectorStyles(props){const theme=props.theme;return jimu_core.AHW`
    .component-external-data-source-selector{
      height: 100%;
      overflow: hidden;
      position: relative;

      .selected-ds-loading {
        margin-left: ${jimu_core.PLL.rem(-25)};
      }

      .added-ds-item{
        position: relative;
        cursor: pointer;
        margin: ${jimu_core.PLL.rem(16)} ${jimu_core.PLL.rem(8)} ${jimu_core.PLL.rem(16)} ${jimu_core.PLL.rem(10)};
        .ds-thumbnail{
          width:  ${jimu_core.PLL.rem(26)};
          height:  ${jimu_core.PLL.rem(26)};
          background-color: ${theme.sys.color.info.main};
        }
        .ds-type{
          font-size: ${jimu_core.PLL.rem(13)};
          color: ${theme.ref.palette.neutral[1200]};
        }
        .item{
          height: ${jimu_core.PLL.rem(26)};
        }
      }

      .added-ds-container{
        width: ${jimu_core.PLL.rem(300)};
        background-color: ${theme.ref.palette.neutral[600]};
        box-shadow: 0 0 10px 4px ${jimu_core.PLL.rgba(theme.ref.palette.white,.3)};
        position: absolute;
        right: 30px;
        bottom: 30px;
        .added-ds-items{
          max-height: ${jimu_core.PLL.rem(500)};
          overflow-y: auto;
          overflow-x: hidden;
        }
        .small-done-btn{
          max-width: ${jimu_core.PLL.rem(100)};
        }
      }

      .selector-left{
        @media only screen and (max-width: 1100px){
          &{
            width: ${jimu_core.PLL.rem(160)};
          }
        }
        @media only screen and (min-width: 1100px){
          &{
            width: ${jimu_core.PLL.rem(200)};
          }
        }
        @media only screen and (min-width: 1300px){
          &{
            width: ${jimu_core.PLL.rem(260)};
          }
        }
        background-color: ${theme.ref.palette.neutral[500]};
        border-right: 1px solid ${theme.ref.palette.neutral[700]};
        .selector-left-title{
          padding: ${jimu_core.PLL.rem(20)} ${jimu_core.PLL.rem(20)} ${jimu_core.PLL.rem(27)} ${jimu_core.PLL.rem(20)};
          margin: 0;
          font-size: ${jimu_core.PLL.rem(20)};
          color: ${theme.ref.palette.neutral[1e3]};
        }
        .nav.nav-underline{
          border: 0;
          .nav-item{
            .nav-link{
              padding: 0;
              border: 0;
              .jimu-nav-link-wrapper{
                display: flex;
                justify-content: flex-start;
                align-items: center;
                padding: ${jimu_core.PLL.rem(7)} ${jimu_core.PLL.rem(20)};
                font-size: ${jimu_core.PLL.rem(16)};
                color: ${theme.ref.palette.neutral[1e3]};
              }
            }
          }

          .nav-item:hover{
            .nav-link{
              .jimu-nav-link-wrapper{
                color: ${theme.ref.palette.black};
              }
            }
          }

          .nav-item.active-tab{
            background-color: ${theme.ref.palette.neutral[500]};
            border-left: 4px solid ${theme.sys.color.primary.light};
            .nav-link{
              .jimu-nav-link-wrapper{
                color: ${theme.ref.palette.black};
                font-weight: 500;
                padding-left: ${jimu_core.PLL.rem(16)};
              }
            }
          }
        }
      }

      .selector-right{
        @media only screen and (max-width: 1100px){
          &{
            width: calc(100% - ${jimu_core.PLL.rem(160)});
          }
        }
        @media only screen and (min-width: 1100px){
          &{
            width: calc(100% - ${jimu_core.PLL.rem(200)});
          }
        }
        @media only screen and (min-width: 1300px){
          &{
            width: calc(100% - ${jimu_core.PLL.rem(260)});
          }
        }
        .selector-right-header{
          padding: ${jimu_core.PLL.rem(23)} ${jimu_core.PLL.rem(20)} ${jimu_core.PLL.rem(12)} ${jimu_core.PLL.rem(20)};
        }
        .selector-right-body{
          height: calc(100% - 70px);
          @media only screen and (max-width: 1100px){
            &{
              padding: ${jimu_core.PLL.rem(10)} ${jimu_core.PLL.rem(25)};
            }
          }
          @media only screen and (min-width: 1100px){
            &{
              padding: ${jimu_core.PLL.rem(10)} ${jimu_core.PLL.rem(45)};
            }
          }
          @media only screen and (min-width: 1300px){
            &{
              padding: ${jimu_core.PLL.rem(10)} ${jimu_core.PLL.rem(65)};
            }
          }
        }
        .external-data-source-url-input{
          .url-type-select{
            width: ${jimu_core.PLL.rem(250)};
          }
          .url-input{
            width: ${jimu_core.PLL.rem(500)};
          }
          .url-input-add-btn{
            height: ${jimu_core.PLL.rem(30)};
          }
          .url-input-label{
            font-size: ${jimu_core.PLL.rem(13)};
            color: ${theme.ref.palette.neutral[900]};
            margin-bottom: 12px;
            font-weight: 500;
          }
        }

      }

    }

  `}function dataSourceItemStyles(props){const theme=props.theme;return jimu_core.AHW`
    .component-data-source-item{
      background-color: ${theme.ref.palette.neutral[500]};
      font-size: ${jimu_core.PLL.rem(12)};
      border-radius: 2px;
      padding: 0;
      position: relative;
      &:hover{
        background-color: ${jimu_core.PLL.rgba(theme.ref.palette.neutral[600],.8)};
      }
      .font-dark-600{
        color: ${theme.ref.palette.neutral[1e3]} !important;
      }
      .loading-container{
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
      }
      .ds-item-header{
        width: 100%;
        height: ${jimu_core.PLL.rem(38)};
        padding: 0 10px;
        background-color: ${theme.ref.palette.neutral[600]};
      }
      .ds-item-body{
        width: 100%;
        height: 100%;
        padding: 14px 10px 6px 10px;
      }
      .two-line-truncate{
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        word-break: break-all;
        word-wrap: break-word;
      }
      .ds-more{
        margin-right: ${jimu_core.PLL.rem(-8)};
      }
      .ds-label{
        font-size: ${jimu_core.PLL.rem(14)};
        color: ${theme.ref.palette.neutral[1100]};
      }
      .ds-type{
        font-size: ${jimu_core.PLL.rem(13)};
        color: ${theme.ref.palette.neutral[1100]};
      }
      .ds-thumbnail{
        width:  ${jimu_core.PLL.rem(18)};
        height:  ${jimu_core.PLL.rem(18)};
        background-color: ${theme.sys.color.info.main};
      }
      .ds-related-widgets, .ds-child-dss{
        font-size: ${jimu_core.PLL.rem(13)};
      }
      .warning-icon, .warning-icon>*{
        color: ${theme.sys.color.error.dark};
        fill: ${theme.sys.color.error.dark};
      }
    }

    .component-data-source-item.component-data-source-item-selected-item{
      border: ${jimu_core.PLL.rem(2)} solid ${theme.sys.color.primary.main};
    }

    .cursor-pointer{
      cursor: pointer;
    }

  `}function dataSourceErrorItemStyles(props){const theme=props.theme;return jimu_core.AHW`
    .component-data-source-error-item{
      .component-data-source-item{
        background-color: ${theme.sys.color.secondary.main};
        *:not(.ds-badge svg, .ds-close-icon){
          color: ${theme.ref.palette.neutral[900]} !important;
        }

        .ds-origin-label{
          max-width: 100%;
        }
        .ds-item-header{
          background-color: ${theme.sys.color.secondary.main};
        }
        .ds-thumbnail{
          background-color: ${theme.ref.palette.neutral[700]};
        }
        .ds-close-icon{
          color: ${theme.ref.palette.neutral[1e3]} !important;
          width: ${jimu_core.PLL.rem(14)};
          height: ${jimu_core.PLL.rem(14)};
        }
      }

    }

  `}function fieldSelectorStyles(props){const theme=props.theme;return jimu_core.AHW`
    .component-field-selector{
      font-size: ${theme.ref.typeface.fontSize};
      .ds-name{
        color: ${theme.ref.palette.black};
      }
      .ds-name-label{
        font-size: ${jimu_core.PLL.rem(14)};
        color: ${theme.ref.palette.neutral[900]};
        font-weight: 400;
      }
      .field-data-selected{
        width: 70%;
      }

      .item-selector-search{
        height: ${jimu_core.PLL.rem(26)};
        position: relative;
      }

      .field-list{
        height: calc(100% - 160px);
        overflow-y: auto;
        .field-item.field-item-selected{
          border: 2px solid ${theme.sys.color.primary.main};
        }
        .field-item{
          border: 1px solid transparent;
          cursor: pointer;
          background-color: ${theme.ref.palette.neutral[500]};
          user-select: none;
          text-align: left;
          border-radius: 0;
        }
        .field-item:hover{
          background-color: ${theme.ref.palette.neutral[500]};
        }
        .field-item:active.field-item:hover{
          background-color: ${theme.ref.palette.white};
        }
      }

      .search-input{
        height: ${jimu_core.PLL.rem(26)};
        width: 100%;
      }

    }

  `}function mainDataAndViewSelectorStyles(props){const theme=props.theme;return jimu_core.AHW`
    .component-main-data-and-view{
      .option-label{
        font-size: ${jimu_core.PLL.rem(13)};
        font-weight: 500;
        color: ${theme.ref.palette.neutral[900]};
      }
    }
  `}function dataViewSettingPopupStyles(props){const theme=props.theme;return jimu_core.AHW`
    .data-view-container{
      width: ${jimu_core.PLL.rem(960)};
      height: ${jimu_core.PLL.rem(600)};
      border: 0;
    }
    .circle-button{
      width: ${jimu_core.PLL.rem(32)};
      height: ${jimu_core.PLL.rem(32)};
      border-radius: ${jimu_core.PLL.rem(16)};
    }
    .domain-field-icon {
      color: ${theme.ref.palette.neutral[1e3]};
      vertical-align: sub;
    }
    .w-38{
      width: 38%;
    }
    .w-62{
      width: 62%;
    }
    .pb-30{
      padding-bottom: ${jimu_core.PLL.rem(30)};
    }
    .preview-table{
      position: relative;
      padding-left: ${jimu_core.PLL.rem(30)};
    }
    .setting-table{
      padding-right: ${jimu_core.PLL.rem(30)};
      border-right-width: 2px;
      border-right-style: solid;
      border-image: linear-gradient(180deg, transparent 0%, ${theme.ref.palette.neutral[500]} 52.08%, transparent 100%) 1;
      border-left: 0;
    }
    .table-container{
      height : 100%;
      overflow-x: auto;
      .table-body{
        overflow-y: auto;
        overflow-x: hidden;
        width: fit-content;
      }
      .table-header{
        position: sticky;
        top: 0;
      }
      tr{
        border-top: 1px solid ${theme.ref.palette.neutral[500]};
      }
      tr:last-child{
        border-bottom: 1px solid ${theme.ref.palette.neutral[500]};
      }
      td, th{
        width: ${jimu_core.PLL.rem(86)};
        height: ${jimu_core.PLL.rem(32)};
        display: inline-block !important;
        border-left: 1px solid ${theme.ref.palette.neutral[500]};
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        padding: 6px 4px;
      }
      td{
        background-color: ${theme.ref.palette.neutral[300]};
      }
      th{
        background-color: ${theme.ref.palette.neutral[500]};
      }
      td:last-child, th:last-child{
        border-right: 1px solid ${theme.ref.palette.neutral[500]};
      }
    }
    .modal-body{
      height: calc(100% - ${jimu_core.PLL.rem(150)});
      padding: ${jimu_core.PLL.rem(30)};
      padding-bottom: ${jimu_core.PLL.rem(14)};
    }
    &.modal-dialog{
      max-width: ${jimu_core.PLL.rem(960)};
    }
    .modal-header{
      .close{
        display: none;
      }
      .modal-title{
        width: 100%;
        display: flex !important;
        align-items: center !important;
      }
    }

    .jimu-nav{
      margin-bottom: ${jimu_core.PLL.rem(20)};
    }

    .label{
      font-size: ${jimu_core.PLL.rem(13)};
      color: ${theme.ref.palette.neutral[900]};
    }

    .header{
      height: ${jimu_core.PLL.rem(54)};
      padding-left: ${jimu_core.PLL.rem(30)};
      padding-right: ${jimu_core.PLL.rem(30)};
    }

    .modal-footer{
      padding-left: ${jimu_core.PLL.rem(30)};
      padding-right: ${jimu_core.PLL.rem(30)};
    }

    .tab-content{
      height: ${jimu_core.PLL.rem(426)};
      overflow-y: auto;
    }

    .sql-exp-warning{
      color: ${theme.sys.color.error.main};
      font-size: ${theme.sys.spacing(4)};
      max-width: ${jimu_core.PLL.rem(600)};
      .sql-exp-warning-icon{
        color: ${theme.sys.color.error.main};
      }
    }

  `}function dataSourceRemoveWarningPopupStyles(props){const theme=props.theme;return jimu_core.AHW`
    &.modal-dialog{
      position: fixed !important;
      top: 50% !important;
      left: 50% !important;
      transform: translate(-50%, -50%) !important;
      width: 480px;
    }
    .modal-content{
      border: 0;
    }
    .modal-header, .modal-body{
      padding-left: 20px;
      padding-right: 20px;
    }
    .modal-footer{
      padding-top: 0;
      padding-bottom: 20px;
    }
    .font-16{
      font-size: ${jimu_core.PLL.rem(16)};
    }
    .font-14{
      font-size: ${jimu_core.PLL.rem(14)};
    }
    .font-13{
      font-size: ${jimu_core.PLL.rem(13)};
    }
    .font-dark-800{
      color: ${theme.ref.palette.neutral[1100]};
    }
    .font-dark-600{
      color: ${theme.ref.palette.neutral[1e3]};
    }
    .related-widgets{
      width: 100%;
      height: ${jimu_core.PLL.rem(160)};
      overflow: auto;
      background-color: ${theme.ref.palette.neutral[300]};
    }
    .related-outputs{
      width: 100%;
      max-height: ${jimu_core.PLL.rem(80)};
      overflow: auto;
      background-color: ${theme.ref.palette.neutral[300]};
      div.output-ds-label+div.output-ds-label{
        margin-top: ${jimu_core.PLL.rem(8)};
      }
    }
  `}var jimu_theme=__webpack_require__("../jimu-theme/index.ts");const DEFAULT_DATA_VIEW_ID="USE_MAIN_DATA_SOURCE";var jimu_ui=__webpack_require__("../jimu-ui/index.tsx"),number=__webpack_require__("../jimu-icons/svg/outlined/data/number.svg"),number_default=__webpack_require__.n(number),string=__webpack_require__("../jimu-icons/svg/outlined/data/string.svg"),string_default=__webpack_require__.n(string),date=__webpack_require__("../jimu-icons/svg/outlined/data/date.svg"),date_default=__webpack_require__.n(date);const NO_SELECTION_ID="CLICK_ME_TO_CLEAR_SELECTION";function getIconFromFieldType(type,theme,intl){if(!type||!theme)return null;const fieldTypeToTitle=intl&&{[jimu_core.Eo3.Number]:intl.formatMessage({id:"numberField",defaultMessage:jimu_ui.defaultMessages.numberField}),[jimu_core.Eo3.String]:intl.formatMessage({id:"stringField",defaultMessage:jimu_ui.defaultMessages.stringField}),[jimu_core.Eo3.Date]:intl.formatMessage({id:"dateField",defaultMessage:jimu_ui.defaultMessages.dateField})},fieldTypeToIcon={[jimu_core.Eo3.Number]:number_default(),[jimu_core.Eo3.String]:string_default(),[jimu_core.Eo3.Date]:date_default()},fieldTypeToIconColor={[jimu_core.Eo3.Number]:theme.sys.color.info.main,[jimu_core.Eo3.String]:theme.sys.color.success.main,[jimu_core.Eo3.Date]:theme.sys.color.warning.main};return{icon:fieldTypeToIcon[type],color:fieldTypeToIconColor[type],title:null==fieldTypeToTitle?void 0:fieldTypeToTitle[type]}}function getWidgetsUsingDsOrItsViews(dsId,allWidgets,considerOutputDs=!0){if(!dsId||!allWidgets)return[];const widgetsUsingMainDs=getWidgetsUsingOneDs(dsId,allWidgets,considerOutputDs),ds=jimu_core.zAk.getInstance().getDataSource(dsId);if(!ds)return widgetsUsingMainDs;let widgetsUsingDataView=[];return ds.getDataViews().forEach((dataView=>{widgetsUsingDataView=widgetsUsingDataView.concat(getWidgetsUsingOneDs(dataView.id,allWidgets,considerOutputDs))})),Array.from(new Set(widgetsUsingMainDs.concat(widgetsUsingDataView)))}function getWidgetsUsingDsOrItsDescendantDss(dsId,allWidgets){if(!dsId||!allWidgets)return[];const widgetsUsingDsOrItsViewsOrItsOutputDss=getWidgetsUsingDsOrItsViews(dsId,allWidgets),ds=jimu_core.zAk.getInstance().getDataSource(dsId);if(!ds)return widgetsUsingDsOrItsViewsOrItsOutputDss;let widgetsUsingChildDssOrTheirViews=[];return ds.isDataSourceSet()&&ds.getChildDataSources().forEach((childDs=>{widgetsUsingChildDssOrTheirViews=widgetsUsingChildDssOrTheirViews.concat(getWidgetsUsingDsOrItsDescendantDss(childDs.id,allWidgets))})),Array.from(new Set(widgetsUsingDsOrItsViewsOrItsOutputDss.concat(widgetsUsingChildDssOrTheirViews)))}function getWidgetsUsingDescendantDss(dsId,allWidgets){if(!dsId||!allWidgets)return[];const ds=jimu_core.zAk.getInstance().getDataSource(dsId);if(!ds)return[];let widgetsUsingChildDssOrTheirViews=[];return ds.isDataSourceSet()&&ds.getChildDataSources().forEach((childDs=>{widgetsUsingChildDssOrTheirViews=widgetsUsingChildDssOrTheirViews.concat(getWidgetsUsingDsOrItsDescendantDss(childDs.id,allWidgets))})),Array.from(new Set(widgetsUsingChildDssOrTheirViews))}function getWidgetsUsingOneDs(dsId,allWidgets,considerOutputDs=!1){if(!dsId||!allWidgets)return[];const widgetsDirectlyUsingDs=function getWidgetsDirectlyUsingOneDs(dsId,allWidgets){if(!dsId||!allWidgets)return[];return function getAllWidgetsArray(widgets){if(!widgets)return[];const w=[];return Object.keys(widgets).forEach((wId=>{w.push(widgets[wId])})),w}(allWidgets).filter((w=>w&&!1!==w.useDataSourcesEnabled&&w.useDataSources&&w.useDataSources.some((d=>d.dataSourceId===dsId)))).map((w=>w.id))}(dsId,allWidgets),widgetsUsingOutputDsOrItsViews=considerOutputDs?function getWidgetsUsingOutputDssFromOneDsAndWidgetsUsingViewsOfTheseOutputDss(dsId,allWidgets){if(!dsId||!allWidgets)return[];const ds=jimu_core.zAk.getInstance().getDataSource(dsId),outputDss=getOutputDssFromOriginDs(ds);let widgetsUsingOutputDssOrTheirViews=[],widgetsUsingOneOutputDsOrItsViews=[];return outputDss.forEach((ds=>{ds&&ds.id&&(widgetsUsingOneOutputDsOrItsViews=getWidgetsUsingDsOrItsViews(ds.id,allWidgets).map((w=>w.id)),widgetsUsingOutputDssOrTheirViews=widgetsUsingOutputDssOrTheirViews.concat(widgetsUsingOneOutputDsOrItsViews))})),Array.from(new Set(widgetsUsingOutputDssOrTheirViews))}(dsId,allWidgets):[];return Array.from(new Set(widgetsDirectlyUsingDs.concat(widgetsUsingOutputDsOrItsViews))).map((wId=>allWidgets[wId]))}function getDescendantDssAndViews(dsId){var _a,_b;if(!dsId)return[];const ds=jimu_core.zAk.getInstance().getDataSource(dsId);if(!ds)return[dsId];let ids=[dsId];return null===(_a=ds.getDataViews())||void 0===_a||_a.forEach((dv=>{ids=ids.concat(dv.id)})),ds.isDataSourceSet()&&(null===(_b=ds.getChildDataSources())||void 0===_b||_b.forEach((childDs=>{ids=ids.concat(getDescendantDssAndViews(childDs.id))}))),ids}function isFuzzySearch(label,searchValue){return!!label&&(!searchValue||label.toLocaleLowerCase().includes(searchValue.toLocaleLowerCase()))}function isFuzzyFromDsIds(dsJson,fromDsIds,hideDs){return!(!dsJson||!dsJson.id)&&(!fromDsIds&&!hideDs||(fromDsIds?hideDs?fromDsIds.includes(dsJson.id)&&!hideDs(dsJson):fromDsIds.includes(dsJson.id):!hideDs(dsJson)))}function getOutputDssFromOriginDs(ds){if(!ds||!ds.id)return[];const appConfig=getAppConfig(),dataSources=appConfig&&appConfig.dataSources;let outputDss=[];return dataSources&&Object.keys(dataSources).forEach((dsId=>{dataSources[dsId]&&dataSources[dsId].isOutputFromWidget&&dataSources[dsId].originDataSources&&dataSources[dsId].originDataSources.some((useDs=>useDs.dataSourceId===ds.id))&&(outputDss=outputDss.concat(jimu_core.zAk.getInstance().getDataSource(dsId)))})),outputDss}function getAppConfig(){const appState=window&&window.jimuConfig&&window.jimuConfig.isBuilder?(0,jimu_core.Vp3)().getState().appStateInBuilder:(0,jimu_core.Vp3)().getState();return appState&&appState.appConfig}function getWhetherDataSourceIsInited(dataSources,dataSourcesInfo){if(!dataSources)return!!jimu_core.zAk.getInstance();if(dataSourcesInfo){const appConfig=getAppConfig();if(Object.keys(dataSourcesInfo).filter((dsId=>1===dsId.split("-").length)).filter((dsId=>{var _a;return null===(_a=null==appConfig?void 0:appConfig.dataSources)||void 0===_a?void 0:_a[dsId]})).length>Object.keys(dataSources).length)return!1}return Object.keys(dataSources).every((dsId=>{var _a,_b;if((null===(_a=dataSourcesInfo[dsId])||void 0===_a?void 0:_a.instanceStatus)===jimu_core.e3_.CreateError)return!0;if((null===(_b=dataSourcesInfo[dsId])||void 0===_b?void 0:_b.instanceStatus)===jimu_core.e3_.Created){const ds=jimu_core.zAk.getInstance().getDataSource(dsId);return!(null==ds?void 0:ds.isDataSourceSet())||ds.areChildDataSourcesCreated()}return!1}))}function editDataSourceJson(dsJson){const ds=jimu_core.zAk.getInstance().getDataSource(null==dsJson?void 0:dsJson.id);if(!ds||!dsJson)return null;let rootDs=ds,rootDsJson=dsJson;for(;rootDs.parentDataSource&&rootDs.jimuChildId;)rootDsJson=rootDs.parentDataSource.getDataSourceJson().setIn(["childDataSourceJsons",rootDs.jimuChildId],rootDsJson),rootDs=rootDs.parentDataSource;return function makeSureIsHiddenRight(rootDsJson,editDsJson){return makeSureChildDssOfHiddenDsAreHidden(function makeSureParentDsOfUnhiddenDsIsUnhidden(rootDsJson,editDsJson){if(null==editDsJson?void 0:editDsJson.isHidden)return rootDsJson;const editDs=jimu_core.zAk.getInstance().getDataSource(null==editDsJson?void 0:editDsJson.id);if(!editDs||!editDsJson)return null;let ds=editDs,dsJson=editDsJson;for(;ds.parentDataSource;){const isDsUnhidden=!dsJson.isHidden;ds=ds.parentDataSource,dsJson=findChildDsJson(rootDsJson,ds.id),isDsUnhidden&&(dsJson=dsJson.set("isHidden",!1),rootDsJson=setChildDsJson(rootDsJson,dsJson))}return rootDsJson}(rootDsJson,editDsJson))}(rootDsJson,dsJson)}function findChildDsJson(rootDsJson,childDsId){if(!rootDsJson)return null;if(rootDsJson.id===childDsId)return rootDsJson;const childDsJsons=Object.values(rootDsJson.childDataSourceJsons||{});let result=null;for(const dsJson of childDsJsons){const res=findChildDsJson(dsJson,childDsId);if(res){result=res;break}}return result}function setChildDsJson(rootDsJson,childDsJson){if(!rootDsJson)return null;if(rootDsJson.id===childDsJson.id)return rootDsJson.merge(childDsJson);let result=rootDsJson;return Object.keys(rootDsJson.childDataSourceJsons||{}).forEach((childId=>{result=result.setIn(["childDataSourceJsons",childId],setChildDsJson(rootDsJson.childDataSourceJsons[childId],childDsJson))})),result}function makeSureChildDssOfHiddenDsAreHidden(rootDsJson){var _a;const rootDs=jimu_core.zAk.getInstance().getDataSource(null==rootDsJson?void 0:rootDsJson.id);if(!rootDs||!rootDsJson)return null;let rightRootDsJson=rootDsJson;const startToHide=!!rightRootDsJson.isHidden;return rootDs.isDataSourceSet()&&(null===(_a=rootDs.getChildDataSources())||void 0===_a?void 0:_a.length)>0&&rootDs.getChildDataSources().forEach((childDs=>{var _a;let childDsJson=null===(_a=childDs.getDataSourceJson())||void 0===_a?void 0:_a.merge(rightRootDsJson.getIn(["childDataSourceJsons",childDs.jimuChildId])||{});childDsJson&&(startToHide&&(childDsJson=childDsJson.set("isHidden",!0)),rightRootDsJson=rightRootDsJson.setIn(["childDataSourceJsons",childDs.jimuChildId],makeSureChildDssOfHiddenDsAreHidden(childDsJson)))})),rightRootDsJson}function getOriginalDataUrl(dsJson){var _a,_b;if(!dsJson)return null;if(dsJson.itemId&&dsJson.portalUrl)return`${dsJson.portalUrl.replace(/\/$/,"")}/home/item.html?id=${dsJson.itemId}`;if(dsJson.url){if(!!(null===(_a=jimu_core.ljd.getInstance().getServerInfoByServiceUrl(dsJson.url))||void 0===_a?void 0:_a.owningSystemUrl)){const token=null===(_b=jimu_core.Cvv.getInstance().getSessionByUrl(dsJson.url))||void 0===_b?void 0:_b.token;return token?`${dsJson.url}?token=${token}`:dsJson.url}return dsJson.url}return null}function getWidgetsUsingOutputDsFromOneWidget(widgetId){var _a;let ids=[];const appConfig=getAppConfig(),widgets=null==appConfig?void 0:appConfig.widgets;if(widgets){const outputDss=null===(_a=widgets[widgetId])||void 0===_a?void 0:_a.outputDataSources;outputDss&&outputDss.length>0&&(ids=ids.concat(widgetId),outputDss.forEach((outputDsId=>{Object.keys(widgets).forEach((wId=>{var _a,_b;(null===(_b=null===(_a=widgets[wId])||void 0===_a?void 0:_a.useDataSources)||void 0===_b?void 0:_b.some((u=>u.mainDataSourceId===outputDsId)))&&(ids=ids.concat(getWidgetsUsingOutputDsFromOneWidget(wId)))}))})))}return ids}function isMapWidget(widgetId){var _a,_b,_c,_d;return widgetId&&"arcgis-map"===(null===(_d=null===(_c=null===(_b=null===(_a=getAppConfig())||void 0===_a?void 0:_a.widgets)||void 0===_b?void 0:_b[widgetId])||void 0===_c?void 0:_c.manifest)||void 0===_d?void 0:_d.name)}var item_selector=__webpack_require__("../jimu-ui/basic/item-selector.tsx");const dataSourceJsonCreator=jimu_core.ZkX.dataSourceJsonCreator;var AddDataErrorCode;function getErrorTextFromErrorCode(errorCode,intl){switch(errorCode){case AddDataErrorCode.DataTypeIsNotSupported:return null==intl?void 0:intl.formatMessage({id:"addDataErrorNotSupported",defaultMessage:jimu_ui.defaultMessages.addDataErrorNotSupported});case AddDataErrorCode.SceneLayerWithoutAssociatedLayer:return null==intl?void 0:intl.formatMessage({id:"addDataErrorInvalidSceneLayer",defaultMessage:jimu_ui.defaultMessages.addDataErrorInvalidSceneLayer});case AddDataErrorCode.WebMapUnsupportedVersion:return null==intl?void 0:intl.formatMessage({id:"addDataErrorUnsupportedMap",defaultMessage:jimu_ui.defaultMessages.addDataErrorUnsupportedMap});case AddDataErrorCode.BuildingSceneLayerWithoutAssociatedLayer:return null==intl?void 0:intl.formatMessage({id:"addDataErrorInvalidBuildingSceneLayer",defaultMessage:jimu_ui.defaultMessages.addDataErrorInvalidBuildingSceneLayer});default:return null==intl?void 0:intl.formatMessage({id:"invalidResourceItem",defaultMessage:jimu_core.kgw.invalidResourceItem})}}function getDsJsonFromService(url,dsId,portalUrl,itemId,forceLogin){return url&&dsId?(url=url.replace(/^http:/,"https:"),jimu_core.Le1.requestWrapper(url,(session=>jimu_core._2M.restRequest.request(url,{authentication:session,httpMethod:"GET"}).then((response=>jimu_core.ljd.getInstance().fetchServiceInfo(url).then((res=>{const serviceDefinition=res.definition;if(!serviceDefinition)return Promise.reject(new Error(AddDataErrorCode.ItemInaccessible));let dsJson=dataSourceJsonCreator.createDataSourceJsonByLayerDefinition(dsId,serviceDefinition,url);return dsJson=function addItemInfoToDsJson(dsJson,portalUrl,itemId){if(!dsJson)return null;portalUrl&&(dsJson=dsJson.set("portalUrl",portalUrl));itemId&&(dsJson=dsJson.set("itemId",itemId));return dsJson}(dsJson,portalUrl,itemId),{dsJson,label:serviceDefinition.name||jimu_core.ZkX.getLabelFromArcGISServiceUrl(url)}}))))),1,forceLogin)):Promise.reject(new Error(AddDataErrorCode.ItemInaccessible))}!function(AddDataErrorCode){AddDataErrorCode.DataTypeIsNotSupported="DATA_TYPE_IS_NOT_SUPPORTED_YET",AddDataErrorCode.ItemInaccessible="ITEM_INACCESSIBLE",AddDataErrorCode.SceneLayerWithoutAssociatedLayer="SCENE_LAYER_WITHOUT_ASSOCIATED_LAYER",AddDataErrorCode.BuildingSceneLayerWithoutAssociatedLayer="BUILDING_SCENE_LAYER_WITHOUT_ASSOCIATED_LAYER",AddDataErrorCode.WebMapUnsupportedVersion="WEBMAP:UNSUPPORTED-VERSION"}(AddDataErrorCode||(AddDataErrorCode={}));let selectDataHelpUrlPromise=null;const url_input=class extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.__unmounted=!1,this.dataSourceUrlTypes=[{label:this.props.intl.formatMessage({id:"anArcGISServerWebService",defaultMessage:jimu_ui.defaultMessages.anArcGISServerWebService})}],this.onUrlTypesClicked=e=>{this.setState({selectedDataSourceUrlType:e.target.value})},this.onInputUrl=e=>{this.setState({url:e.target.value})},this.onAdded=()=>{if(this.state.url){const url=this.state.url.split("?")[0];if(!url)return;return this.props.toggleLoadedStatus(!1),getDsJsonFromService(url,this.props.getDsId(),null,null,!0).then((res=>{this.props.onAdded(res.dsJson,res.label),this.props.toggleLoadedStatus(!0)}),(err=>{console.error(err);let errorMsg="";(null==err?void 0:err.code)!==jimu_core.Agn.SignInCanceled&&(errorMsg=(null==err?void 0:err.isSignInError)?err.message2:getErrorTextFromErrorCode(err,this.props.intl)),errorMsg&&this.props.toggleToastStatus(!0,errorMsg),this.props.toggleLoadedStatus(!0)}))}},this.checkServiceUrl=url=>{let isSupported=!1;return(/^https:\/\//.test(url)||/^\/\//.test(url))&&jimu_core.ZkX.isSupportedArcGISService(url,[jimu_core.nSB.FeatureService,jimu_core.nSB.MapService,jimu_core.nSB.SceneService,jimu_core.nSB.ImageService])&&(isSupported=!0),{valid:isSupported}},this.state={selectedDataSourceUrlType:this.dataSourceUrlTypes[0],url:"",selectDataHelpUrl:null}}componentDidMount(){this.__unmounted=!1,selectDataHelpUrlPromise||(selectDataHelpUrlPromise=Promise.all([__webpack_require__.e(9530),__webpack_require__.e(6448),__webpack_require__.e(7568),__webpack_require__.e(2922),__webpack_require__.e(6428)]).then(__webpack_require__.bind(__webpack_require__,"../jimu-for-builder/index.tsx")).then((module=>module.helpUtils)).then((helpUtils=>helpUtils.getBuildAppsHelpLink("select-data")))),selectDataHelpUrlPromise.then((url=>{this.__unmounted||this.setState({selectDataHelpUrl:url})}))}componentWillUnmount(){this.__unmounted=!0}render(){const add=this.props.intl.formatMessage({id:"add",defaultMessage:jimu_ui.defaultMessages.add});return jimu_core.q_G.createElement("div",{className:"external-data-source-url-input"},jimu_core.q_G.createElement("div",{className:"mt-4 ml-2"},jimu_core.q_G.createElement("h5",{className:"url-input-label"},this.props.intl.formatMessage({id:"serviceType",defaultMessage:jimu_ui.defaultMessages.serviceType})),jimu_core.q_G.createElement(jimu_ui.Select,{value:this.state.selectedDataSourceUrlType.label,title:this.state.selectedDataSourceUrlType.label,onChange:this.onUrlTypesClicked,className:"url-type-select"},this.dataSourceUrlTypes.map((t=>jimu_core.q_G.createElement("option",{key:t.label,value:t.label},t.label))))),jimu_core.q_G.createElement("div",{className:"mt-5 ml-2"},jimu_core.q_G.createElement("h5",{className:"url-input-label"},this.props.intl.formatMessage({id:"url",defaultMessage:jimu_ui.defaultMessages.url})),jimu_core.q_G.createElement(jimu_ui.TextInput,{checkValidityOnChange:this.checkServiceUrl,placeholder:"URL",onChange:this.onInputUrl,className:"url-input",value:this.state.url}),jimu_core.q_G.createElement("div",{className:"d-flex"},jimu_core.q_G.createElement("p",{className:"mt-2 hint-label"},this.props.intl.formatMessage({id:"addDataByUrlHint",defaultMessage:jimu_ui.defaultMessages.addDataByUrlHint})),this.state.selectDataHelpUrl&&jimu_core.q_G.createElement(jimu_ui.Link,{to:this.state.selectDataHelpUrl,className:"ml-2 font-size-12",target:"_blank"},this.props.intl.formatMessage({id:"details",defaultMessage:jimu_ui.defaultMessages.details})))),jimu_core.q_G.createElement("div",{className:"mt-4 ml-2"},jimu_core.q_G.createElement(jimu_ui.Button,{onClick:this.onAdded,type:"primary",disabled:!this.checkServiceUrl(this.state.url).valid,className:"url-input-add-btn px-4",title:add,"aria-label":add},add)))}};try{urlinput.displayName="urlinput",urlinput.__docgenInfo={description:"",displayName:"urlinput",props:{intl:{defaultValue:null,description:"",name:"intl",required:!0,type:{name:"IntlShape"}},getDsId:{defaultValue:null,description:"",name:"getDsId",required:!0,type:{name:"() => string"}},toggleLoadedStatus:{defaultValue:null,description:"",name:"toggleLoadedStatus",required:!0,type:{name:"(loaded: boolean) => void"}},toggleToastStatus:{defaultValue:null,description:"",name:"toggleToastStatus",required:!0,type:{name:"(isOpen: boolean, errorMsg: string) => void"}},onAdded:{defaultValue:null,description:"",name:"onAdded",required:!0,type:{name:"(dsJson: IMDataSourceJson, label: string) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/external-data-source-selector/components/url-input.tsx#urlinput"]={docgenInfo:urlinput.__docgenInfo,name:"urlinput",path:"../jimu-ui/advanced/lib/data-source-selector/components/external-data-source-selector/components/url-input.tsx#urlinput"})}catch(__react_docgen_typescript_loader_error){}var minus_circle=__webpack_require__("../jimu-icons/svg/outlined/editor/minus-circle.svg"),minus_circle_default=__webpack_require__.n(minus_circle),plus_circle=__webpack_require__("../jimu-icons/svg/outlined/editor/plus-circle.svg"),plus_circle_default=__webpack_require__.n(plus_circle);class _DataSourceTree extends jimu_core.q_G.PureComponent{constructor(props){var _a,_b;super(props),this.__unmounted=!1,this.baseFontSize=parseFloat(null===(_b=null===(_a=getComputedStyle(document.documentElement))||void 0===_a?void 0:_a.fontSize)||void 0===_b?void 0:_b.replace("px",""))||16,this.getNeedAutoOpen=dataSource=>{if(!this.props.useDataSources||!dataSource)return!1;if(this.props.useDataSources.some((u=>(null==u?void 0:u.mainDataSourceId)===dataSource.id)))return!0;return!!this.props.getChildDataSources(dataSource).some((cDs=>this.getNeedAutoOpen(cDs)))},this.toggleChildDss=()=>{"boolean"==typeof this.props.isOpen?this.props.toggle&&this.props.toggle():this.setState({isOpen:!this.state.isOpen})},this.drawCollapseLine=()=>{jimu_core.CM0.defer((()=>{var _a,_b;if(this.collapseRef&&this.lastNodeInCollapseRef){const firstNodeOfLastNodeInCollapse=this.lastNodeInCollapseRef.querySelector(".first_node_in_collapse")||this.lastNodeInCollapseRef,paddingTopOfLastNodeInCollapse=window&&(null===(_a=window.getComputedStyle(this.lastNodeInCollapseRef))||void 0===_a?void 0:_a.paddingTop),paddingTopNumOfLastNodeInCollapse=paddingTopOfLastNodeInCollapse?parseFloat(paddingTopOfLastNodeInCollapse)+2:0,paddingTopFirstNodeOfLastNodeInCollapse=window&&(null===(_b=window.getComputedStyle(firstNodeOfLastNodeInCollapse))||void 0===_b?void 0:_b.paddingTop),paddingTopNumOfFirstNodeOfLastNodeInCollapse=paddingTopFirstNodeOfLastNodeInCollapse?parseFloat(paddingTopFirstNodeOfLastNodeInCollapse):0;this.__unmounted||this.setState({heightOfCollapseExceptForLastNode:this.collapseRef.offsetHeight-this.lastNodeInCollapseRef.offsetHeight+paddingTopNumOfLastNodeInCollapse,heightOfFirstNodeOfLastNodeInCollapse:firstNodeOfLastNodeInCollapse.offsetHeight-paddingTopNumOfFirstNodeOfLastNodeInCollapse})}this.props.drawCollapseLine&&this.props.drawCollapseLine()}))},this.getSelectableChildNodes=ds=>{if(!ds)return[];return(this.props.getChildDataSources(ds)||[]).filter((d=>this.props.isNodeSelectable(d)))},this.getChildNodes=ds=>{if(!ds)return[];return(this.props.getChildDataSources(ds)||[]).filter((d=>this.props.isNodeSelectable(d)||this.getChildNodes(d).length>0))},this.getLabel=()=>{const parentDsLabel=this.props.getLabel(this.props.dataSource)||this.props.dataSource.id;return this.props.label?`${this.props.label} / ${parentDsLabel}`:parentDsLabel},this.getHideLineStyle=()=>({transform:`scaleY(${(this.state.heightOfCollapseExceptForLastNode+this.state.heightOfFirstNodeOfLastNodeInCollapse/2)/this.baseFontSize})`}),this.getWhetherUnselectableParentAndChildNodeCanJoin=()=>{if(this.props.isNodeSelectable(this.props.dataSource))return!1;{const childNodes=this.getChildNodes(this.props.dataSource);return!(this.getSelectableChildNodes(this.props.dataSource).length>0)&&1===childNodes.length}},this.getIsOpen=()=>"boolean"==typeof this.props.isOpen?this.props.isOpen:this.state.isOpen,this.getRenderContent=(isRootTree,isChildTreeTheRealRootTree)=>{var _a;if(!this.props.dataSource)return null;const childNodes=this.getChildNodes(this.props.dataSource),hasChildNodes=childNodes.length>0,isRootNodeSelectable=this.props.isNodeSelectable(this.props.dataSource);if(!isRootNodeSelectable&&!hasChildNodes)return null;const hasSelectableChildNodes=this.getSelectableChildNodes(this.props.dataSource).length>0,label=this.getLabel(),canUnselectableParentAndChildNodeJoin=this.getWhetherUnselectableParentAndChildNodeCanJoin(),DsItems=childNodes.map(((ds,index)=>{var _a;return ds&&ds.id?jimu_core.q_G.createElement("div",{key:ds.id,ref:n=>{index===childNodes.length-1&&(this.lastNodeInCollapseRef=n)},className:(0,jimu_core.xWm)({"pt-4":0!==index})},this.props.getChildDataSources(ds).length>0?jimu_core.q_G.createElement(data_source_tree_DataSourceTree,Object.assign({},this.props,{dataSource:ds,label:canUnselectableParentAndChildNodeJoin?label:"",drawCollapseLine:this.drawCollapseLine,isChildTree:!isChildTreeTheRealRootTree})):jimu_core.q_G.createElement("div",{className:"d-flex align-items-center"},jimu_core.q_G.createElement("div",{className:(0,jimu_core.xWm)("collapse-button leaf")}),jimu_core.q_G.createElement("div",{className:(0,jimu_core.xWm)("d-flex align-items-center w-100 z-index-1"),role:"option","aria-selected":null===(_a=this.props.useDataSources)||void 0===_a?void 0:_a.some((u=>(null==u?void 0:u.mainDataSourceId)===ds.id))},this.props.renderSelectableNode&&this.props.renderSelectableNode(ds)))):null}));return hasSelectableChildNodes||isRootNodeSelectable||!canUnselectableParentAndChildNodeJoin?jimu_core.q_G.createElement("div",{role:"group"},jimu_core.q_G.createElement("div",{className:"d-flex align-items-center"},jimu_core.q_G.createElement("div",{className:(0,jimu_core.xWm)("collapse-button",{root:!this.props.isChildTree})},hasChildNodes&&jimu_core.q_G.createElement(jimu_ui.Button,{type:"tertiary",icon:!0,size:"sm",onClick:this.toggleChildDss,className:"w-10 px-0 d-flex align-items-center jimu-outline-inside",title:this.getIsOpen()?this.props.intl.formatMessage({id:"collapse",defaultMessage:jimu_ui.defaultMessages.collapse}):this.props.intl.formatMessage({id:"expand",defaultMessage:jimu_ui.defaultMessages.expand}),"aria-label":this.getIsOpen()?`${this.props.intl.formatMessage({id:"collapse",defaultMessage:jimu_ui.defaultMessages.collapse})}. ${this.props.getLabel(this.props.dataSource)}`:`${this.props.intl.formatMessage({id:"expand",defaultMessage:jimu_ui.defaultMessages.expand})}. ${this.props.getLabel(this.props.dataSource)}`},jimu_core.q_G.createElement(jimu_ui.Icon,{icon:this.getIsOpen()?minus_circle_default():plus_circle_default(),size:"12"}))),jimu_core.q_G.createElement("div",{className:"d-flex align-items-center w-100 z-index-1 first_node_in_collapse",role:isRootNodeSelectable?"option":void 0,"aria-selected":isRootNodeSelectable?null===(_a=this.props.useDataSources)||void 0===_a?void 0:_a.some((u=>(null==u?void 0:u.mainDataSourceId)===this.props.dataSource.id)):void 0},isRootNodeSelectable?this.props.renderSelectableNode&&this.props.renderSelectableNode(this.props.dataSource):this.props.renderUnselectableNode&&this.props.renderUnselectableNode(label,this.props.dataSource,isRootTree))),hasChildNodes&&jimu_core.q_G.createElement(jimu_ui.Collapse,{isOpen:this.getIsOpen(),className:"collapse-content",ref:n=>{this.collapseRef=n},onEntering:this.drawCollapseLine,onExiting:this.drawCollapseLine,timeout:200,onEntered:this.drawCollapseLine,onExited:this.drawCollapseLine},DsItems,jimu_core.q_G.createElement("div",{className:(0,jimu_core.xWm)("collapse-line",{root:!this.props.isChildTree}),style:this.getHideLineStyle()}))):hasChildNodes?jimu_core.q_G.createElement("div",{role:"group"},DsItems):null},this.getWhetherChildTreeIsTheRealRootTree=()=>{const canUnselectableParentAndChildNodeJoin=this.getWhetherUnselectableParentAndChildNodeCanJoin();return!this.props.isChildTree&&canUnselectableParentAndChildNodeJoin},this.state={isOpen:"boolean"==typeof this.props.defaultOpen?this.props.defaultOpen:this.getNeedAutoOpen(this.props.dataSource),heightOfFirstNodeOfLastNodeInCollapse:0,heightOfCollapseExceptForLastNode:0}}componentDidMount(){this.intersectionObserver=new IntersectionObserver((entries=>{entries[0].intersectionRatio>0&&this.drawCollapseLine()})),this.intersectionObserver.observe(this.rootRef)}componentDidUpdate(prevProps){this.props.isNodeSelectable===prevProps.isNodeSelectable&&this.props.getChildDataSources(this.props.dataSource).length===prevProps.getChildDataSources(prevProps.dataSource).length||this.drawCollapseLine()}componentWillUnmount(){this.__unmounted=!0,this.intersectionObserver.disconnect()}render(){const isChildTreeTheRealRootTree=this.getWhetherChildTreeIsTheRealRootTree(),isRootTree=!this.props.isChildTree&&!isChildTreeTheRealRootTree;return jimu_core.q_G.createElement("div",{className:(0,jimu_core.xWm)("w-100 h-100",{[this.props.className]:!!this.props.className}),ref:n=>{this.rootRef=n}},jimu_core.q_G.createElement("div",{className:(0,jimu_core.xWm)("component-data-source-tree",{bg:this.props.useDefaultBackground&&isRootTree&&this.getIsOpen()&&this.getChildNodes(this.props.dataSource).length>0,"tree-root":isRootTree})},this.getRenderContent(isRootTree,isChildTreeTheRealRootTree)))}}const data_source_tree_DataSourceTree=(0,jimu_core.j4T)((0,jimu_theme.Xy)(_DataSourceTree,"DataSourceTree"));try{data_source_tree_DataSourceTree.displayName="DataSourceTree",data_source_tree_DataSourceTree.__docgenInfo={description:"The data source tree has two kinds of node, selectable node and unselectable node.\nSelectable node means the node can be selected and unselectable node means the node can not be selected.\nThe rules to generate unselectable node:\n1. If node A can not be selected and all descendant nodes of A can not be selected, the subtree using A as root node will be hidden.\n2. If node A can not be selected and some descendant nodes of A can be selected, A will only render as a label.\n3. If node A can not be selected, A's child node A1 also can not be selected and A1's child node A11 can be selected,\n   A11's parent node will be a unselectable node and the label will be `A / A11`.",displayName:"DataSourceTree",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/data-source-tree.tsx#DataSourceTree"]={docgenInfo:data_source_tree_DataSourceTree.__docgenInfo,name:"DataSourceTree",path:"../jimu-ui/advanced/lib/data-source-selector/components/data-source-tree.tsx#DataSourceTree"})}catch(__react_docgen_typescript_loader_error){}var editor_close=__webpack_require__("../jimu-icons/outlined/editor/close.tsx"),visible=__webpack_require__("../jimu-icons/outlined/application/visible.tsx"),invisible=__webpack_require__("../jimu-icons/outlined/application/invisible.tsx"),down=__webpack_require__("../jimu-icons/outlined/directional/down.tsx"),up=__webpack_require__("../jimu-icons/outlined/directional/up.tsx"),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};const external_data_source_selector_dataSourceJsonCreator=jimu_core.ZkX.dataSourceJsonCreator;var TabTypes;!function(TabTypes){TabTypes.WebMap="Web Map",TabTypes.WebScene="Web Scene",TabTypes.Layers="Layers",TabTypes.Url="URL"}(TabTypes||(TabTypes={}));const TabTypeToItemType={[TabTypes.WebMap]:item_selector.ll.WebMap,[TabTypes.WebScene]:item_selector.ll.WebScene,[TabTypes.Layers]:[item_selector.ll.FeatureService,item_selector.ll.MapService,item_selector.ll.SceneService,item_selector.ll.FeatureCollection,item_selector.ll.GroupLayer,item_selector.ll.ImageService]},DsTypeToItemType={[jimu_core.at.WebMap]:item_selector.ll.WebMap,[jimu_core.at.WebScene]:item_selector.ll.WebScene,[jimu_core.at.FeatureLayer]:[item_selector.ll.WebMap,item_selector.ll.WebScene,item_selector.ll.FeatureService,item_selector.ll.MapService,item_selector.ll.FeatureCollection],[jimu_core.at.SceneLayer]:[item_selector.ll.WebScene,item_selector.ll.SceneService],[jimu_core.at.GroupLayer]:[item_selector.ll.WebMap,item_selector.ll.WebScene,item_selector.ll.MapService,item_selector.ll.FeatureCollection,item_selector.ll.GroupLayer],[jimu_core.at.FeatureService]:item_selector.ll.FeatureService,[jimu_core.at.MapService]:item_selector.ll.MapService,[jimu_core.at.SceneService]:item_selector.ll.SceneService,[jimu_core.at.ImageryLayer]:item_selector.ll.ImageService,[jimu_core.at.ImageryTileLayer]:item_selector.ll.ImageService,[jimu_core.at.ElevationLayer]:item_selector.ll.ImageService},DsTypeToTabType={[jimu_core.at.WebMap]:TabTypes.WebMap,[jimu_core.at.WebScene]:TabTypes.WebScene,[jimu_core.at.FeatureLayer]:[TabTypes.WebMap,TabTypes.WebScene,TabTypes.Layers,TabTypes.Url],[jimu_core.at.SceneLayer]:[TabTypes.WebScene,TabTypes.Layers,TabTypes.Url],[jimu_core.at.GroupLayer]:[TabTypes.WebMap,TabTypes.WebScene,TabTypes.Layers,TabTypes.Url],[jimu_core.at.FeatureService]:[TabTypes.Layers,TabTypes.Url],[jimu_core.at.MapService]:[TabTypes.Layers,TabTypes.Url],[jimu_core.at.SceneService]:[TabTypes.Layers,TabTypes.Url],[jimu_core.at.ImageryLayer]:[TabTypes.Layers,TabTypes.Url],[jimu_core.at.ImageryTileLayer]:[TabTypes.Layers,TabTypes.Url],[jimu_core.at.ElevationLayer]:[TabTypes.Layers,TabTypes.Url]},TabIcon={[TabTypes.WebMap]:__webpack_require__("../jimu-ui/lib/icons/data-map.svg"),[TabTypes.WebScene]:__webpack_require__("../jimu-ui/lib/icons/data-scene.svg"),[TabTypes.Layers]:__webpack_require__("../jimu-ui/lib/icons/data-layer-16.svg"),[TabTypes.Url]:__webpack_require__("../jimu-ui/lib/icons/widget-link.svg")};class _ExternalDataSourceSelector extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.loadingItemNumber=0,this.tabLabel={[TabTypes.WebMap]:this.props.intl.formatMessage({id:"webMap",defaultMessage:jimu_core.kgw.webMap}),[TabTypes.WebScene]:this.props.intl.formatMessage({id:"webScene",defaultMessage:jimu_core.kgw.webScene}),[TabTypes.Layers]:this.props.intl.formatMessage({id:"layers",defaultMessage:jimu_ui.defaultMessages.layers}),[TabTypes.Url]:this.props.intl.formatMessage({id:"url",defaultMessage:jimu_ui.defaultMessages.url})},this.__unmount=!1,this.getTabTypeFromDsType=dsType=>dsType?Array.isArray(DsTypeToTabType[dsType])?DsTypeToTabType[dsType]:[DsTypeToTabType[dsType]]:[],this.getTabIcon=tab=>tab?TabIcon[tab]:null,this.getTabLabel=tab=>tab?this.tabLabel[tab]:null,this.getElementPosition=element=>{if(!element)return null;let x=element.offsetLeft,y=element.offsetTop,parent=element.offsetParent;for(;null!==parent;)x+=parent.offsetLeft,y+=parent.offsetTop,parent=parent.offsetParent;return{x,y}},this.getNextDsId=()=>jimu_core.VbA.getUniqueId("dataSource"),this.onItemAdded=(allSelectedItems,latestSelectedItem)=>__awaiter(this,void 0,void 0,(function*(){const dsId=this.getNextDsId();try{allSelectedItems=allSelectedItems||[],this.setState({selectedItems:(0,jimu_core.J3Z)(allSelectedItems.map((item=>item.id))),partSelectedItems:this.state.partSelectedItems.filter((id=>!allSelectedItems.some((selectedItem=>selectedItem.id===id))))}),this.toggleLoadedStatus(!1);const dsJson=yield this.getDsJsonFromItemOrService(dsId,latestSelectedItem);this.toggleLoadedStatus(!0),this.onDsJsonAdded(dsJson,latestSelectedItem.title)}catch(err){this.__unmount||(this.toggleLoadedStatus(!0),this.toggleToastStatus(!0,getErrorTextFromErrorCode(AddDataErrorCode.ItemInaccessible,this.props.intl)),this.setState({selectedItems:this.state.selectedItems.filter((id=>id!==latestSelectedItem.id)),partSelectedItems:this.state.partSelectedItems.filter((id=>id!==latestSelectedItem.id))})),console.error("Failed to add data. ",latestSelectedItem,err)}})),this.getDsJsonFromItemOrService=(dsId,item)=>__awaiter(this,void 0,void 0,(function*(){return item.url&&jimu_core.ZkX.isSupportedSingleArcGISLayerService(item.url)?getDsJsonFromService(item.url,dsId,item.portalUrl,item.id).then((res=>{var _a;return item.title?null===(_a=res.dsJson)||void 0===_a?void 0:_a.set("sourceLabel",item.title):res.dsJson})):external_data_source_selector_dataSourceJsonCreator.createDataSourceJsonByItemInfo(dsId,item,item.portalUrl)})),this.onItemRemoved=(allSelectedItems,latestRemovedItem)=>{this.setState({selectedItems:(0,jimu_core.J3Z)(allSelectedItems.map((item=>item.id))),partSelectedItems:this.state.partSelectedItems.filter((id=>id!==latestRemovedItem.id))}),this.onDsJsonRemoved(latestRemovedItem.id,null)},this.onDsJsonAdded=(dsJson,label)=>__awaiter(this,void 0,void 0,(function*(){var _a,_b;try{if(!dsJson)throw new Error(getErrorTextFromErrorCode(AddDataErrorCode.DataTypeIsNotSupported,this.props.intl));if(this.setState({selectedDss:this.state.selectedDss.concat(dsJson),selectedDssLabels:this.state.selectedDssLabels.concat({id:dsJson.id,label})}),yield this.checkSceneLayer(dsJson),yield this.checkImageryLayer(dsJson),yield this.checkBuildingSceneLayer(dsJson),this.state.isSelectedDataCollapseOpen){const ds=yield jimu_core.zAk.getInstance().createDataSource(dsJson);ds.isDataSourceSet()&&(yield ds.childDataSourcesReady()),this.checkCreatedDss([ds]),this.__unmount||this.setState({loadedSelectedDssVersion:this.state.loadedSelectedDssVersion+1})}this.props.onSelect&&this.props.onSelect([dsJson])}catch(err){this.clearCacheOfErrorDs(dsJson),this.__unmount||((null===(_b=null===(_a=null==err?void 0:err.message)||void 0===_a?void 0:_a.toUpperCase())||void 0===_b?void 0:_b.includes(AddDataErrorCode.WebMapUnsupportedVersion))?this.toggleToastStatus(!0,getErrorTextFromErrorCode(AddDataErrorCode.WebMapUnsupportedVersion,this.props.intl)):(null==err?void 0:err.code)!==jimu_core.Agn.SignInCanceled&&((null==err?void 0:err.isSignInError)?this.toggleToastStatus(!0,err.message1):this.toggleToastStatus(!0,getErrorTextFromErrorCode(AddDataErrorCode.ItemInaccessible,this.props.intl))),this.setState({loadedSelectedDssVersion:this.state.loadedSelectedDssVersion+1,selectedDss:this.state.selectedDss.filter((d=>d.id!==(null==dsJson?void 0:dsJson.id))),selectedDssLabels:this.state.selectedDssLabels.filter((d=>d.id!==(null==dsJson?void 0:dsJson.id))),selectedItems:this.state.selectedItems.filter((id=>id!==(null==dsJson?void 0:dsJson.itemId))),partSelectedItems:this.state.partSelectedItems.filter((id=>id!==(null==dsJson?void 0:dsJson.itemId)))})),console.error("Failed to create data source. ",dsJson,err)}})),this.clearCacheOfErrorDs=dsJson=>{jimu_core.zAk.getInstance().destroyDataSource(null==dsJson?void 0:dsJson.id),this.__unmount||this.onDsJsonRemoved(null==dsJson?void 0:dsJson.itemId,null==dsJson?void 0:dsJson.id)},this.checkSceneLayer=dsJson=>__awaiter(this,void 0,void 0,(function*(){const isSceneLayer=(null==dsJson?void 0:dsJson.type)===jimu_core.at.SceneLayer;if(dsJson&&isSceneLayer)try{this.toggleLoadedStatus(!1);const ds=yield jimu_core.zAk.getInstance().createDataSource(dsJson);this.checkCreatedDss([ds]),this.toggleLoadedStatus(!0)}catch(err){this.clearCacheOfErrorDs(dsJson),this.__unmount||(this.toggleLoadedStatus(!0),this.toggleToastStatus(!0,getErrorTextFromErrorCode(AddDataErrorCode.SceneLayerWithoutAssociatedLayer,this.props.intl)),this.setState({selectedDss:this.state.selectedDss.filter((d=>d.id!==dsJson.id)),selectedDssLabels:this.state.selectedDssLabels.filter((d=>d.id!==dsJson.id)),selectedItems:this.state.selectedItems.filter((id=>id!==dsJson.itemId)),partSelectedItems:this.state.partSelectedItems.filter((id=>id!==dsJson.itemId))}))}})),this.checkImageryLayer=dsJson=>__awaiter(this,void 0,void 0,(function*(){const isImageryLayer=(null==dsJson?void 0:dsJson.type)===jimu_core.at.ImageryLayer;if(dsJson&&isImageryLayer)try{this.toggleLoadedStatus(!1);const ds=yield jimu_core.zAk.getInstance().createDataSource(dsJson);this.checkCreatedDss([ds]),this.toggleLoadedStatus(!0)}catch(err){this.clearCacheOfErrorDs(dsJson),this.__unmount||(this.toggleLoadedStatus(!0),this.setState({selectedDss:this.state.selectedDss.filter((d=>d.id!==dsJson.id)),selectedDssLabels:this.state.selectedDssLabels.filter((d=>d.id!==dsJson.id)),selectedItems:this.state.selectedItems.filter((id=>id!==dsJson.itemId)),partSelectedItems:this.state.partSelectedItems.filter((id=>id!==dsJson.itemId))}))}})),this.checkBuildingSceneLayer=dsJson=>__awaiter(this,void 0,void 0,(function*(){const isBuildingSceneLayer=(null==dsJson?void 0:dsJson.type)===jimu_core.at.BuildingSceneLayer;if(dsJson&&isBuildingSceneLayer)try{this.toggleLoadedStatus(!1);const associatedFeatureServerUrl=jimu_core.ZkX.getFullArcGISServiceUrl(null==dsJson?void 0:dsJson.url,!1).replace("SceneServer","FeatureServer");yield jimu_core.Le1.requestWrapper(associatedFeatureServerUrl,(session=>__awaiter(this,void 0,void 0,(function*(){return yield jimu_core._2M.restRequest.request(associatedFeatureServerUrl,{authentication:session,httpMethod:"GET"})})))),this.toggleLoadedStatus(!0)}catch(err){this.clearCacheOfErrorDs(dsJson),this.__unmount||(this.toggleLoadedStatus(!0),this.toggleToastStatus(!0,getErrorTextFromErrorCode(AddDataErrorCode.BuildingSceneLayerWithoutAssociatedLayer,this.props.intl)),this.setState({selectedDss:this.state.selectedDss.filter((d=>d.id!==dsJson.id)),selectedDssLabels:this.state.selectedDssLabels.filter((d=>d.id!==dsJson.id)),selectedItems:this.state.selectedItems.filter((id=>id!==dsJson.itemId)),partSelectedItems:this.state.partSelectedItems.filter((id=>id!==dsJson.itemId))}))}})),this.checkCreatedDss=dss=>{null==dss||dss.forEach((ds=>{ds&&!this.state.selectedDss.some((dsJson=>dsJson.id===ds.id&&(!ds.getDataSourceJson().itemId||dsJson.itemId===ds.getDataSourceJson().itemId)))&&jimu_core.zAk.getInstance().destroyDataSource(ds.id)}))},this.onDsJsonRemoved=(itemId,dsId)=>{if(!itemId&&!dsId)return;const removeDsJsons=itemId?this.state.selectedDss.filter((dsJson=>dsJson.itemId===itemId)):[this.state.selectedDss.find((dsJson=>dsJson.id===dsId))].filter((dsJson=>dsJson));if(removeDsJsons.length>0){removeDsJsons.forEach((dsJson=>{jimu_core.zAk.getInstance().destroyDataSource(dsJson.id)}));const selectedDss=this.state.selectedDss.filter((selectedDs=>itemId?selectedDs.itemId!==itemId:selectedDs.id!==dsId));this.setState({selectedDss,selectedDssLabels:this.state.selectedDssLabels.filter((d=>selectedDss.some((selectedDs=>selectedDs.id===d.id)))),selectedItems:this.state.selectedItems.filter((id=>id!==itemId)),partSelectedItems:this.state.partSelectedItems.filter((id=>id!==itemId)),isSelectedDataCollapseOpen:0!==selectedDss.length&&this.state.isSelectedDataCollapseOpen}),this.props.onRemove&&this.props.onRemove(removeDsJsons)}},this.onDsJsonChange=dsJson=>{const changedDsIndex=this.state.selectedDss.findIndex((d=>d.id===dsJson.id)),selectedDssCopy=this.state.selectedDss.slice();selectedDssCopy.splice(changedDsIndex,1,dsJson);const ds=jimu_core.zAk.getInstance().getDataSource(dsJson.id);ds&&jimu_core.zAk.getInstance().updateDataSourceByDataSourceJson(ds,dsJson);const changedItem=this.state.selectedItems.concat(this.state.partSelectedItems).find((id=>id===(null==dsJson?void 0:dsJson.itemId)));let selectedItems=this.state.selectedItems,partSelectedItems=this.state.partSelectedItems;if(changedItem){this.getWhetherIsPartSelected(dsJson)?(selectedItems=this.state.selectedItems.filter((id=>dsJson.itemId&&id!==dsJson.itemId)),partSelectedItems=this.state.partSelectedItems.concat(changedItem)):(selectedItems=this.state.selectedItems.concat(changedItem),partSelectedItems=this.state.partSelectedItems.filter((id=>dsJson.itemId&&id!==dsJson.itemId)))}this.setState({selectedDss:selectedDssCopy,selectedItems,partSelectedItems})},this.getWhetherIsPartSelected=dsJson=>{let isPartSelected=!1;if(null==dsJson?void 0:dsJson.childDataSourceJsons){for(let i=0;i<Object.values(dsJson.childDataSourceJsons).length;i++)if(this.getWhetherIsPartSelected(Object.values(dsJson.childDataSourceJsons)[i])){isPartSelected=!0;break}}else isPartSelected=dsJson.isHidden;return isPartSelected},this.toggleSelectedDataCollapse=()=>{this.state.isSelectedDataCollapseOpen||this.createSelectedDss(),this.setState({isSelectedDataCollapseOpen:!this.state.isSelectedDataCollapseOpen})},this.createSelectedDss=()=>{const needToCreateDss=this.state.selectedDss.filter((dsJson=>!jimu_core.zAk.getInstance().getDataSource(dsJson.id)));return needToCreateDss.length>0?Promise.allSettled(needToCreateDss.map((dsJson=>jimu_core.zAk.getInstance().createDataSource(dsJson).then((ds=>ds.isDataSourceSet()?ds.childDataSourcesReady().then((()=>ds)):ds)).then((ds=>(this.__unmount||this.setState({loadedSelectedDssVersion:this.state.loadedSelectedDssVersion+1}),ds)))))).then((res=>{var _a,_b;const createdDss=res.filter((r=>"fulfilled"===r.status)).map((r=>r.value)),failedRes=res.filter((r=>"rejected"===r.status));if(failedRes.length>0){needToCreateDss.filter((needToCreateDs=>!createdDss.some((createdDs=>createdDs.id===needToCreateDs.id)))).forEach((failedDs=>{this.clearCacheOfErrorDs(failedDs)})),failedRes.some((r=>{var _a,_b,_c;return null===(_c=null===(_b=null===(_a=r.reason)||void 0===_a?void 0:_a.message)||void 0===_b?void 0:_b.toUpperCase())||void 0===_c?void 0:_c.includes(AddDataErrorCode.WebMapUnsupportedVersion)}))?this.toggleToastStatus(!0,getErrorTextFromErrorCode(AddDataErrorCode.WebMapUnsupportedVersion,this.props.intl)):failedRes.some((r=>{var _a;return(null===(_a=r.reason)||void 0===_a?void 0:_a.code)===jimu_core.Agn.SignInCanceled}))||(failedRes.some((r=>{var _a;return null===(_a=r.reason)||void 0===_a?void 0:_a.isSignInError}))?this.toggleToastStatus(!0,null===(_b=null===(_a=failedRes.find((r=>{var _a;return null===(_a=r.reason)||void 0===_a?void 0:_a.isSignInError})))||void 0===_a?void 0:_a.reason)||void 0===_b?void 0:_b.message1):this.toggleToastStatus(!0,getErrorTextFromErrorCode(AddDataErrorCode.ItemInaccessible,this.props.intl)))}return this.checkCreatedDss(createdDss),jimu_core.CM0.defer((()=>{this.createSelectedDss()})),Promise.resolve()})):Promise.resolve()},this.onFinish=()=>{this.props.onFinish&&this.props.onFinish(this.state.selectedDss)},this.onCancel=()=>{this.state.selectedDss.forEach((dsJson=>{jimu_core.zAk.getInstance().destroyDataSource(dsJson.id)})),this.setState({selectedDss:[]},(()=>{this.props.onCancel&&this.props.onCancel()}))},this.onActiveTabChange=tab=>{this.setState({activeTab:tab})},this.toggleLoadedStatus=isLoaded=>{isLoaded?this.loadingItemNumber-=1:this.loadingItemNumber+=1,this.loadingItemNumber>0?this.setState({isLoaded:!1}):this.setState({isLoaded:!0})},this.toggleToastStatus=(isToastOpen,errorMsg)=>{isToastOpen?this.setState({isToastOpen,errorMsg},(()=>{setTimeout((()=>{this.__unmount||this.setState({isToastOpen:!1,errorMsg:null})}),5e3)})):this.setState({isToastOpen,errorMsg})},this.toggleHideData=(rootDsJson,dataSource)=>{rootDsJson&&(dataSource&&dataSource.getDataSourceJson().isHidden?this.onDsJsonChange(function traverseUnhideParentDs(dataSource){if(!dataSource)return null;let dsJson=dataSource.getDataSourceJson();return dsJson=dsJson.set("isHidden",!1),editDataSourceJson(dsJson)}(dataSource)):dataSource&&dataSource.id!==rootDsJson.id?this.onDsJsonChange(function traverseHideChildDs(dataSource){if(!dataSource)return null;let dsJson=dataSource.getDataSourceJson();return dsJson=dsJson.set("isHidden",!0),editDataSourceJson(dsJson)}(dataSource)):this.onDsJsonRemoved(rootDsJson.itemId,rootDsJson.id))},this.SelectedDataSourceItem=({rootDsJson,dsJson,rootDsLabel})=>{const dataSource=jimu_core.zAk.getInstance().getDataSource(dsJson.id);return(0,jimu_core.Yac)("div",{className:"added-ds-item"},!dataSource&&(0,jimu_core.Yac)(jimu_ui.Loading,{type:jimu_ui.LoadingType.Donut,width:16,height:16,className:"w-25 selected-ds-loading"}),(0,jimu_core.Yac)(data_source_tree_DataSourceTree,{dataSource:dataSource||dsJson,isNodeSelectable:()=>!0,renderSelectableNode:ds=>this.renderDataItem(ds,rootDsJson,rootDsLabel),getChildDataSources:this.getChildDataSources,getLabel:this.getDataSourceLabel}))},this.getChildDataSources=dataSource=>dataSource&&dataSource.isDataSourceSet&&dataSource.isDataSourceSet()?dataSource.getChildDataSources():[],this.getDataSourceLabel=dataSource=>(null==dataSource?void 0:dataSource.getLabel)?dataSource.getLabel()||dataSource.id:null,this.getItemTypes=(dsTypes,tabType)=>{const itemTypesFromTabType=TabTypeToItemType[tabType];if(dsTypes&&0!==dsTypes.length){const itemTypesFromDsType=Array.from(new Set(dsTypes.asMutable().reduce(((itemTypes,dsType)=>itemTypes.concat(DsTypeToItemType[dsType])),[])));let finalItemTypes=[];return itemTypesFromDsType.forEach((itemType=>{(Array.isArray(itemTypesFromTabType)?itemTypesFromTabType.some((t=>t===itemType)):itemType===itemTypesFromTabType)&&(finalItemTypes=finalItemTypes.concat(itemType))})),(0,jimu_core.J3Z)(finalItemTypes)}return Array.isArray(itemTypesFromTabType)?(0,jimu_core.J3Z)(itemTypesFromTabType):itemTypesFromTabType},this.getWhetherHideSingleLayer=(dsTypes,tabType)=>!(!dsTypes||tabType!==TabTypes.Layers)&&!dsTypes.some((t=>t===jimu_core.at.FeatureLayer||t===jimu_core.at.SceneLayer)),this.renderDataItem=(ds,rootDsJson,rootDsLabel)=>{if(!ds)return null;const dsJson=ds.getDataSourceJson?ds.getDataSourceJson():ds,dataSource=jimu_core.zAk.getInstance().getDataSource(ds.id),l=ds.id===(null==rootDsJson?void 0:rootDsJson.id)&&rootDsLabel?rootDsLabel:this.getDataSourceLabel(dataSource)||ds.id,clickToShowOrHide=dsJson.isHidden?this.props.intl.formatMessage({id:"clickToShow",defaultMessage:jimu_ui.defaultMessages.clickToShow}):(null==dataSource?void 0:dataSource.parentDataSource)?this.props.intl.formatMessage({id:"clickToHide",defaultMessage:jimu_ui.defaultMessages.clickToHide}):this.props.intl.formatMessage({id:"remove",defaultMessage:jimu_ui.defaultMessages.remove});return(0,jimu_core.Yac)("div",{className:"d-flex align-items-center justify-content-between w-100 item"},(0,jimu_core.Yac)("div",{className:"d-flex align-items-center flex-grow-1 text-truncate",title:jimu_core.ZkX.getDsTypeString(null==dsJson?void 0:dsJson.type,this.props.intl)},(0,jimu_core.Yac)("div",{className:"d-flex justify-content-center align-items-center flex-shrink-0 ds-thumbnail"},(0,jimu_core.Yac)(jimu_ui.Icon,{icon:jimu_core.ZkX.getDsIcon(dsJson),className:"text-default",size:"12"})),(0,jimu_core.Yac)("div",{className:"flex-grow-1 text-truncate pl-2 ds-type",title:l},l)),(0,jimu_core.Yac)("div",{className:"d-flex align-items-center flex-shrink-0"},(0,jimu_core.Yac)(jimu_ui.Button,{type:"tertiary",size:"sm",icon:!0,onClick:()=>{this.toggleHideData(rootDsJson,dataSource)},title:clickToShowOrHide,"aria-label":clickToShowOrHide},dsJson.isHidden?(0,jimu_core.Yac)(invisible.u,{size:"s"}):(null==dataSource?void 0:dataSource.parentDataSource)?(0,jimu_core.Yac)(visible.T,{size:"s"}):(0,jimu_core.Yac)(editor_close.r,{size:"s"}))))},this.getRootDsLabel=rootDsJson=>{var _a;return(null===(_a=this.state.selectedDssLabels.find((d=>d.id===(null==rootDsJson?void 0:rootDsJson.id))))||void 0===_a?void 0:_a.label)||(null==rootDsJson?void 0:rootDsJson.id)},this.setSearchValue=value=>{this.setState({searchValue:value})},this.onKeyDown=e=>{"Esc"!==e.key&&"Escape"!==e.key||(e.target!==this.closeBtnRef.current&&e.target!==this.doneBtnRef.current?this.doneBtnRef.current?(0,jimu_core.u02)(this.doneBtnRef.current):(0,jimu_core.u02)(this.closeBtnRef.current):e.target===this.doneBtnRef.current?(0,jimu_core.u02)(this.closeBtnRef.current):this.onCancel())},this.leftMenuRef=jimu_core.q_G.createRef(),this.closeBtnRef=jimu_core.q_G.createRef(),this.doneBtnRef=jimu_core.q_G.createRef(),this.state={searchValue:"",selectedDss:[],selectedItems:(0,jimu_core.J3Z)([]),partSelectedItems:(0,jimu_core.J3Z)([]),selectedDssLabels:[],activeTab:this.props.types&&this.getTabTypeFromDsType(this.props.types[0])?this.getTabTypeFromDsType(this.props.types[0])[0]:TabTypes.WebMap,isLoaded:!0,isToastOpen:!1,isSelectedDataCollapseOpen:!1,loadedSelectedDssVersion:0,errorMsg:null}}componentDidMount(){setTimeout((()=>{(0,jimu_core.u02)(this.closeBtnRef.current)}),500)}componentWillUnmount(){this.__unmount=!0}render(){const SelectedDataSourceItem=this.SelectedDataSourceItem;let tabs=[];if(this.props.types){const usedTabs=Array.from(new Set(Array.prototype.concat.apply([],this.props.types.map((t=>this.getTabTypeFromDsType(t))).filter((t=>!!t)))));tabs=Object.values(TabTypes).filter((t=>usedTabs.includes(t)))}else tabs=Object.values(TabTypes);if((null==tabs?void 0:tabs.length)<1)return null;const close=this.props.intl.formatMessage({id:"close",defaultMessage:jimu_core.kgw.close}),downUp=this.state.isSelectedDataCollapseOpen?this.props.intl.formatMessage({id:"down",defaultMessage:jimu_ui.defaultMessages.down}):this.props.intl.formatMessage({id:"up",defaultMessage:jimu_ui.defaultMessages.up}),done=this.props.intl.formatMessage({id:"done",defaultMessage:jimu_ui.defaultMessages.done});return(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)("h-100",{[this.props.className]:!!this.props.className}),onKeyDown:this.onKeyDown},(0,jimu_core.Yac)("div",{className:"w-100 component-external-data-source-selector"},(0,jimu_core.Yac)("div",{className:"d-flex flex-wrap align-items-stretch w-100 h-100"},(0,jimu_core.Yac)("div",{className:"selector-left",ref:this.leftMenuRef},(0,jimu_core.Yac)("h3",{className:"selector-left-title",role:"heading"},this.props.isMultiple?this.props.intl.formatMessage({id:"addData",defaultMessage:jimu_ui.defaultMessages.addData}):this.props.intl.formatMessage({id:"selectData",defaultMessage:jimu_ui.defaultMessages.selectData})),(0,jimu_core.Yac)(jimu_ui.Nav,{underline:!0,vertical:!0,right:!0,className:"selector-left-tabs"},tabs.map((tab=>(0,jimu_core.Yac)(jimu_ui.NavItem,{key:tab,className:(0,jimu_core.xWm)("w-100 mb-2",{"active-tab":this.state.activeTab===tab})},(0,jimu_core.Yac)(jimu_ui.NavLink,{onClick:()=>{this.onActiveTabChange(tab)},className:"d-flex"},(0,jimu_core.Yac)(jimu_ui.Icon,{icon:this.getTabIcon(tab),size:"16",className:"mr-2 flex-shrink-0"}),(0,jimu_core.Yac)("div",{className:"flex-grow-1 text-truncate text-left",title:this.getTabLabel(tab)},this.getTabLabel(tab)))))))),(0,jimu_core.Yac)("div",{className:"selector-right h-100"},(0,jimu_core.Yac)("div",{className:"selector-right-header w-100 d-flex justify-content-end"},(0,jimu_core.Yac)(jimu_ui.Button,{type:"tertiary",size:"sm",icon:!0,className:"close-icon",onClick:this.onCancel,title:close,"aria-label":close,ref:this.closeBtnRef},(0,jimu_core.Yac)(editor_close.r,{size:"l"}))),(0,jimu_core.Yac)("div",{className:"selector-right-body w-100"},tabs.map(((t,i)=>(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)("inner-item-selector-container h-100 w-100",{"d-none":t!==this.state.activeTab}),key:i},t===TabTypes.Url?(0,jimu_core.Yac)(url_input,{onAdded:this.onDsJsonAdded,getDsId:this.getNextDsId,intl:this.props.intl,toggleLoadedStatus:this.toggleLoadedStatus,toggleToastStatus:this.toggleToastStatus}):(0,jimu_core.Yac)(item_selector.dj,{itemType:this.getItemTypes(this.props.types,t),portalUrl:this.props.portalUrl,isMultiple:this.props.isMultiple,onSelect:this.onItemAdded,onRemove:this.onItemRemoved,detailReference:this.leftMenuRef,selectedItems:this.state.selectedItems,partSelectedItems:this.state.partSelectedItems,hideSingleLayer:this.getWhetherHideSingleLayer(this.props.types,t)}))))))),(0,jimu_core.Yac)("div",null,this.state.selectedDss&&this.state.selectedDss.length>0&&(0,jimu_core.Yac)("div",{className:"added-ds-container py-4"},(0,jimu_core.Yac)("div",{className:"d-flex justify-content-between align-items-center px-4"},(0,jimu_core.Yac)("div",{className:"d-flex align-items-center"},(0,jimu_core.Yac)("span",{className:"mr-2"},this.state.selectedDss.length),(0,jimu_core.Yac)("span",{className:"mr-2"},this.props.intl.formatMessage({id:"selected",defaultMessage:jimu_ui.defaultMessages.selected})),(0,jimu_core.Yac)(jimu_ui.Button,{type:"tertiary",size:"sm",icon:!0,onClick:this.toggleSelectedDataCollapse,title:downUp,"aria-label":downUp},this.state.isSelectedDataCollapseOpen?(0,jimu_core.Yac)(down.l,{size:"s"}):(0,jimu_core.Yac)(up.k,{size:"s"}))),(0,jimu_core.Yac)("div",{className:"small-done-btn"},!this.state.isSelectedDataCollapseOpen&&(0,jimu_core.Yac)(jimu_ui.Button,{onClick:this.onFinish,type:"primary",className:"text-truncate w-100",disabled:!this.state.isLoaded,title:done,"aria-label":done,ref:this.doneBtnRef},done))),this.state.isSelectedDataCollapseOpen&&(0,jimu_core.Yac)("div",{className:"added-ds-items"},(0,jimu_core.Yac)("div",null,this.state.selectedDss.map(((dsJson,i)=>(0,jimu_core.Yac)(SelectedDataSourceItem,{key:i,rootDsJson:dsJson,dsJson,rootDsLabel:this.getRootDsLabel(dsJson)}))))),this.state.isSelectedDataCollapseOpen&&(0,jimu_core.Yac)("div",{className:"big-done-btn w-100 px-4"},(0,jimu_core.Yac)(jimu_ui.Button,{onClick:this.onFinish,type:"primary",className:"text-truncate w-100",disabled:!this.state.isLoaded,title:done,"aria-label":done},done)))),(0,jimu_core.Yac)("div",null,!this.state.isLoaded&&(0,jimu_core.Yac)(jimu_ui.Loading,{type:jimu_ui.LoadingType.Primary})),(0,jimu_core.Yac)(jimu_ui.Toast,{text:this.state.errorMsg,type:jimu_ui.ToastType.Error,open:this.state.isToastOpen})))}}const external_data_source_selector_ExternalDataSourceSelector=(0,jimu_core.j4T)((0,jimu_theme.Xy)(_ExternalDataSourceSelector,"ExternalDataSourceSelector"));try{external_data_source_selector_ExternalDataSourceSelector.displayName="ExternalDataSourceSelector",external_data_source_selector_ExternalDataSourceSelector.__docgenInfo={description:"",displayName:"ExternalDataSourceSelector",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!1,type:{name:"(dsJsons: IMDataSourceJson[]) => void"}},portalUrl:{defaultValue:null,description:"",name:"portalUrl",required:!0,type:{name:"string"}},isMultiple:{defaultValue:null,description:"",name:"isMultiple",required:!1,type:{name:"boolean"}},types:{defaultValue:null,description:"",name:"types",required:!1,type:{name:"ImmutableArray<DataSourceTypes>"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!1,type:{name:"(dsJsons: IMDataSourceJson[]) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!1,type:{name:"() => void"}},onFinish:{defaultValue:null,description:"",name:"onFinish",required:!1,type:{name:"(dsJsons: IMDataSourceJson[]) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/external-data-source-selector/index.tsx#ExternalDataSourceSelector"]={docgenInfo:external_data_source_selector_ExternalDataSourceSelector.__docgenInfo,name:"ExternalDataSourceSelector",path:"../jimu-ui/advanced/lib/data-source-selector/components/external-data-source-selector/index.tsx#ExternalDataSourceSelector"})}catch(__react_docgen_typescript_loader_error){}function traverseGetToUseDss(parentDs,toUseDss,toUseTypes){parentDs.isDataSourceSet()&&parentDs.getChildDataSources().forEach((ds=>{ds&&ds.getDataSourceJson()&&ds.id&&(getWhetherUseDataSourceByTypes(ds.getDataSourceJson(),toUseTypes)&&toUseDss.push(ds),traverseGetToUseDss(ds,toUseDss,toUseTypes))}))}function getWhetherUseDataSourceByTypes(dsJson,toUseTypes){return!!dsJson&&toUseTypes.some((curDsType=>dsJson.type&&curDsType===dsJson.type))}function getToUseChildDss(rootDss,toUseTypes){const toUseDss={};return 0===toUseTypes.length?Promise.resolve(toUseDss):Promise.all(rootDss.filter((rootDs=>rootDs&&rootDs.id&&!rootDs.getDataSourceJson().isHidden&&rootDs.isDataSourceSet()&&!rootDs.isDataView&&!rootDs.isLocal)).map((rootDs=>(toUseDss[rootDs.id]||(toUseDss[rootDs.id]=[]),traverseGetToUseDss(rootDs,toUseDss[rootDs.id],toUseTypes),toUseDss[rootDs.id])))).then((()=>(Object.keys(toUseDss).forEach((rootId=>{0===toUseDss[rootId].length&&delete toUseDss[rootId]})),toUseDss)))}function getAllToUseRootDss(toUseRootDss,toUseChildDss){let allToUseRootDss=toUseRootDss||[];return toUseChildDss&&Object.keys(toUseChildDss).forEach((rootDsId=>{if(!allToUseRootDss.some((ds=>ds.id===rootDsId))){const rootDs=jimu_core.zAk.getInstance().getDataSource(rootDsId);rootDs&&(allToUseRootDss=allToUseRootDss.concat(rootDs))}})),allToUseRootDss}function getAllToUseDss(toUseRootDss,toUseChildDss){let allToUseRootDss=toUseRootDss||[];return toUseChildDss&&Object.values(toUseChildDss).forEach((dss=>{dss&&dss.length>0&&(allToUseRootDss=allToUseRootDss.concat(dss))})),allToUseRootDss}var DataSourceTab;function getDefaultSelectedTypes(types,useDataSources,hideAllOptionOfTypeDropdown){var _a;if(hideAllOptionOfTypeDropdown){if((null==useDataSources?void 0:useDataSources.length)>0){const firstSelectedDs=jimu_core.zAk.getInstance().getDataSource(null===(_a=useDataSources[0])||void 0===_a?void 0:_a.dataSourceId),firstSelectedDsType=null==firstSelectedDs?void 0:firstSelectedDs.type;return firstSelectedDsType&&(null==types?void 0:types.includes(firstSelectedDsType))?(0,jimu_core.J3Z)([firstSelectedDsType]):(null==types?void 0:types[0])?(0,jimu_core.J3Z)([types[0]]):null}return(null==types?void 0:types[0])?(0,jimu_core.J3Z)([types[0]]):null}return null}function isDataSourceInstance(ds){return!!(null==ds?void 0:ds.getDataSourceJson)}!function(DataSourceTab){DataSourceTab.Added="ADDED",DataSourceTab.Output="OUTPUT"}(DataSourceTab||(DataSourceTab={}));var preview=__webpack_require__("../jimu-icons/outlined/editor/preview.tsx");class DsItem extends jimu_core.q_G.PureComponent{constructor(){super(...arguments),this.getWhetherSelected=()=>this.props.useDataSources&&this.props.useDataSources.some((useDs=>{const dsId=(null==useDs?void 0:useDs.mainDataSourceId)||(null==useDs?void 0:useDs.dataSourceId);return isDataSourceInstance(this.props.ds)?dsId===this.props.ds.getMainDataSource().id:dsId===this.props.ds.id})),this.getUseDs=()=>{var _a,_b;const useDs={dataSourceId:this.props.ds.id,mainDataSourceId:this.props.ds.id},isInstance=isDataSourceInstance(this.props.ds),rootDsId=isInstance?null===(_a=this.props.ds.getRootDataSource())||void 0===_a?void 0:_a.id:Object.keys((null===(_b=getAppConfig())||void 0===_b?void 0:_b.dataSources)||{}).find((dsId=>this.props.ds.id!==dsId&&this.props.ds.id.split("-")[0]===dsId));rootDsId&&(useDs.rootDataSourceId=rootDsId);return(isInstance?this.props.ds.getDataSourceJson():this.props.ds).isOutputFromWidget&&(useDs.mainDataSourceId=isInstance?this.props.ds.getMainDataSource().id:this.props.ds.id,useDs.dataSourceId=jimu_core.zAk.getInstance().getDataViewDataSourceId(useDs.mainDataSourceId,jimu_core.aH5.VA),useDs.dataViewId=jimu_core.aH5.VA),useDs},this.getDsLabel=()=>{if(!this.props.ds)return"";return(isDataSourceInstance(this.props.ds)?this.props.ds.getLabel():this.props.ds.label||this.props.ds.sourceLabel)||this.props.ds.id},this.onItemClick=e=>{const useDs=this.getUseDs();if(isDataSourceInstance(this.props.ds))if(this.getWhetherSelected()){if(this.props.disableRemove)return;this.onDsRemoved(useDs)}else{if(this.props.disableSelection)return void(this.props.onClickDisabledDsItem&&this.props.onClickDisabledDsItem());this.onDsSelected(useDs)}else jimu_core.zAk.getInstance().createDataSourceAndItsDataViewsByUseDataSource(useDs)},this.onRemoveClick=e=>{var _a;this.stopPropagation(e);const dsId=null===(_a=this.props.ds)||void 0===_a?void 0:_a.id;dsId&&Promise.all([__webpack_require__.e(9530),__webpack_require__.e(6448),__webpack_require__.e(7568),__webpack_require__.e(2922),__webpack_require__.e(6428)]).then(__webpack_require__.bind(__webpack_require__,"../jimu-for-builder/index.tsx")).then((res=>{const{getAppConfigAction}=res;getAppConfigAction().removeDataSource(dsId).exec(),jimu_core.zAk.getInstance().destroyDataSource(dsId)}))},this.stopPropagation=e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},this.onDsSelected=selectedDs=>{var _a;if(!selectedDs)return;let useDataSources;if(this.props.isMultiple){let selectedDss=[selectedDs];if(this.props.isBatched){const ds=jimu_core.zAk.getInstance().getDataSource(selectedDs.dataSourceId);(null==ds?void 0:ds.isDataSourceSet())&&!this.props.isDataSourceSelectable(ds)&&(selectedDss=ds.getAllChildDataSources().filter((d=>{var _a;return this.props.isDataSourceSelectable(d)&&!(null===(_a=this.props.useDataSources)||void 0===_a?void 0:_a.some((u=>u.dataSourceId===d.id)))})).map((d=>{var _a;return{dataSourceId:d.id,mainDataSourceId:d.id,rootDataSourceId:null===(_a=d.getRootDataSource())||void 0===_a?void 0:_a.id}})))}useDataSources=((null===(_a=this.props.useDataSources)||void 0===_a?void 0:_a.asMutable({deep:!0}))||[]).concat(selectedDss)}else useDataSources=[selectedDs];this.props.onChange&&this.props.onChange(useDataSources)},this.onDsRemoved=removedDs=>{if(!removedDs||!this.props.useDataSources)return;window.isExpressBuilder&&isMapWidget(this.props.widgetId)&&Promise.all([__webpack_require__.e(9530),__webpack_require__.e(6448),__webpack_require__.e(7568),__webpack_require__.e(2922),__webpack_require__.e(6428)]).then(__webpack_require__.bind(__webpack_require__,"../jimu-for-builder/index.tsx")).then((m=>{m.getAppConfigAction().removeUseDataSource(removedDs.dataSourceId).exec()}));const selectedDsJsons=this.props.useDataSources.filter((useDs=>(null==useDs?void 0:useDs.mainDataSourceId)!==removedDs.mainDataSourceId));this.props.onChange&&this.props.onChange(selectedDsJsons.asMutable({deep:!0}))}}render(){var _a,_b,_c;if(!this.props.ds)return null;const isSelected=this.getWhetherSelected(),isLoading=!isDataSourceInstance(this.props.ds),label=this.getDsLabel(),isRootDataSource=isDataSourceInstance(this.props.ds)?!this.props.ds.getRootDataSource():!!(null===(_b=null===(_a=getAppConfig())||void 0===_a?void 0:_a.dataSources)||void 0===_b?void 0:_b[this.props.ds.id]),showRemoveAndLink=window.isExpressBuilder&&isRootDataSource&&isMapWidget(this.props.widgetId);return jimu_core.q_G.createElement(jimu_ui.Button,{type:"tertiary",onClick:this.onItemClick,className:(0,jimu_core.xWm)("ds-item text-left",{"ds-item-selected":isSelected,"ds-item-loading":isLoading,[this.props.className]:!!this.props.className}),"aria-pressed":isSelected,"aria-label":label,title:label},isLoading&&jimu_core.q_G.createElement("div",{className:"loading-container loading-container-for-item"},jimu_core.q_G.createElement(jimu_ui.Loading,{type:jimu_ui.LoadingType.Bar})),jimu_core.q_G.createElement("div",{className:(0,jimu_core.xWm)({"item-active-icon":isSelected},{"d-none":!isSelected})},jimu_core.q_G.createElement("div",{className:"text-center item-active-icon-container"})),jimu_core.q_G.createElement("div",{className:"d-flex align-items-center w-100 item"},jimu_core.q_G.createElement("div",{className:"d-flex align-items-center justify-content-center flex-shrink-0 ds-thumbnail",title:jimu_core.ZkX.getDsTypeString(null===(_c=this.props.ds)||void 0===_c?void 0:_c.type,this.props.intl)},jimu_core.q_G.createElement(jimu_ui.Icon,{icon:jimu_core.ZkX.getDsIcon(isDataSourceInstance(this.props.ds)?this.props.ds.getDataSourceJson():this.props.ds),className:"text-default m-0",size:"12"})),jimu_core.q_G.createElement("div",{className:"flex-grow-1 text-truncate px-2 ds-type"},jimu_core.q_G.createElement("div",{className:"text-truncate ds-type-name"},label)),showRemoveAndLink&&jimu_core.q_G.createElement(jimu_ui.Button,{type:"tertiary",icon:!0,className:"align-items-center justify-content-center flex-shrink-0 remove-link-style ds-link",href:getOriginalDataUrl(isDataSourceInstance(this.props.ds)?this.props.ds.getDataSourceJson():this.props.ds),target:"_blank",onClick:this.stopPropagation,title:this.props.intl.formatMessage({id:"source",defaultMessage:jimu_ui.defaultMessages.source})},jimu_core.q_G.createElement(preview.P,{className:"m-0",size:"m"})),showRemoveAndLink&&jimu_core.q_G.createElement(jimu_ui.Button,{tag:"div",type:"tertiary",icon:!0,onClick:this.onRemoveClick,className:"align-items-center justify-content-center flex-shrink-0 remove-link-style ds-remove",title:this.props.intl.formatMessage({id:"remove",defaultMessage:jimu_ui.defaultMessages.remove})},jimu_core.q_G.createElement(editor_close.r,{className:"m-0",size:"s"}))))}}try{dsitem.displayName="dsitem",dsitem.__docgenInfo={description:"",displayName:"dsitem",props:{intl:{defaultValue:null,description:"",name:"intl",required:!0,type:{name:"IntlShape"}},ds:{defaultValue:null,description:"",name:"ds",required:!0,type:{name:"DataSource | IMDataSourceJson"}},widgetId:{defaultValue:null,description:"",name:"widgetId",required:!0,type:{name:"string"}},useDataSources:{defaultValue:null,description:"",name:"useDataSources",required:!0,type:{name:"ImmutableArray<UseDataSource>"}},isMultiple:{defaultValue:null,description:"",name:"isMultiple",required:!0,type:{name:"boolean"}},isBatched:{defaultValue:null,description:"",name:"isBatched",required:!0,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(useDataSources: UseDataSource[]) => void"}},isDataSourceSelectable:{defaultValue:null,description:"",name:"isDataSourceSelectable",required:!0,type:{name:"(ds: DataSource) => boolean"}},onClickDisabledDsItem:{defaultValue:null,description:"",name:"onClickDisabledDsItem",required:!1,type:{name:"() => void"}},disableSelection:{defaultValue:null,description:"",name:"disableSelection",required:!0,type:{name:"boolean"}},disableRemove:{defaultValue:null,description:"",name:"disableRemove",required:!0,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/data-source-list/components/common/ds-item.tsx#dsitem"]={docgenInfo:dsitem.__docgenInfo,name:"dsitem",path:"../jimu-ui/advanced/lib/data-source-selector/components/data-source-list/components/common/ds-item.tsx#dsitem"})}catch(__react_docgen_typescript_loader_error){}class OutputDsItemTree extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.getIsNodeSelectable=()=>nodeJson=>{const ds=jimu_core.zAk.getInstance().getDataSource(nodeJson.id),isCurrentNodeSelectable=this.props.allToUseDss.some((d=>d.id===nodeJson.id));return this.props.isMultiple&&this.props.isBatched&&!isCurrentNodeSelectable&&(null==ds?void 0:ds.isDataSourceSet())?ds.getAllChildDataSources().some((cDs=>this.props.allToUseDss.some((d=>d.id===cDs.id)))):isCurrentNodeSelectable},this.getRootNode=nodeJson=>{var _a;return(null===(_a=nodeJson.manifest.properties)||void 0===_a?void 0:_a.canGenerateMultipleOutputDataSources)?nodeJson:this.getChildNodes(nodeJson)[0]},this.getChildNodes=nodeJson=>{if(nodeJson.manifest)return this.props.allToUseRootDss.map((d=>isDataSourceInstance(d)?d.getDataSourceJson():d));{const ds=jimu_core.zAk.getInstance().getDataSource(nodeJson.id);return(null==ds?void 0:ds.isDataSourceSet())?ds.getChildDataSources().map((d=>d.getDataSourceJson())):[]}},this.getLabel=nodeJson=>nodeJson.label,this.renderUnselectableNode=(label,widgetJson)=>{const icon="string"==typeof widgetJson.icon?widgetJson.icon:widgetJson.icon&&widgetJson.icon.svg,color="string"==typeof widgetJson.icon?null:widgetJson.icon&&widgetJson.icon.properties&&widgetJson.icon.properties.color;return jimu_core.q_G.createElement("div",{className:"d-flex w-100",title:label},jimu_core.q_G.createElement("div",{className:"d-flex align-items-center justify-content-center flex-shrink-0 ds-thumbnail"},jimu_core.q_G.createElement(jimu_ui.Icon,{icon,color,size:"12"})),jimu_core.q_G.createElement("div",{className:"flex-grow-1 text-truncate pl-2 ds-type"},jimu_core.q_G.createElement("div",{className:"text-truncate ds-type-name"},label)))},this.renderSelectableNode=dsJson=>{if(!dsJson)return null;let ds=jimu_core.zAk.getInstance().getDataSource(dsJson.id);return ds?(ds.getDataSourceJson().isOutputFromWidget&&(ds=ds.getMainDataSource().getDataView(jimu_core.aH5.VA)),jimu_core.q_G.createElement(DsItem,{useDataSources:this.props.useDataSources,ds,widgetId:this.props.widgetId,isBatched:this.props.isBatched,key:ds.id,onChange:this.props.onChange,isMultiple:this.props.isMultiple,intl:this.props.intl,isDataSourceSelectable:ds=>this.props.allToUseDss.some((d=>d.id===(null==ds?void 0:ds.id))),disableSelection:this.props.disableSelection,disableRemove:this.props.disableRemove,className:"w-100"})):null},this.toggle=()=>{this.setState({isOpen:!this.state.isOpen})},this.state={isNodeSelectable:this.getIsNodeSelectable(),isOpen:this.props.isSearching}}componentDidUpdate(prevProps){prevProps.allToUseDss===this.props.allToUseDss&&prevProps.isBatched===this.props.isBatched&&prevProps.isMultiple===this.props.isMultiple||this.setState({isNodeSelectable:this.getIsNodeSelectable()}),this.props.isSearching!==prevProps.isSearching&&this.setState({isOpen:this.props.isSearching})}render(){return this.props.widgetJson&&this.props.allToUseRootDss?jimu_core.q_G.createElement("div",{className:"mb-4"},jimu_core.q_G.createElement(data_source_tree_DataSourceTree,{dataSource:this.getRootNode(this.props.widgetJson),useDataSources:this.props.useDataSources,isNodeSelectable:this.state.isNodeSelectable,renderSelectableNode:this.renderSelectableNode,renderUnselectableNode:this.renderUnselectableNode,useDefaultBackground:!0,getChildDataSources:this.getChildNodes,getLabel:this.getLabel,isOpen:this.props.isSearching?this.state.isOpen:void 0,toggle:this.props.isSearching?this.toggle:void 0})):null}}try{outputdsitemtree.displayName="outputdsitemtree",outputdsitemtree.__docgenInfo={description:"",displayName:"outputdsitemtree",props:{widgetJson:{defaultValue:null,description:"",name:"widgetJson",required:!0,type:{name:"IMWidgetJson"}},allToUseDss:{defaultValue:null,description:"All to [to-use data sources](../ds-add-data.tsx)., including child data sources and parent data sources.",name:"allToUseDss",required:!0,type:{name:"(DataSource | IMDataSourceJson)[]"}},allToUseRootDss:{defaultValue:null,description:"All to use root data sources (see [to-use data sources](../ds-add-data.tsx) for more details), which doesn't have parent data source,\nincluding -\n1. the root data source is to use data source, or,\n2. the root data source contains descendant data source which is to use data source.",name:"allToUseRootDss",required:!0,type:{name:"(DataSource | IMDataSourceJson)[]"}},intl:{defaultValue:null,description:"",name:"intl",required:!0,type:{name:"IntlShape"}},widgetId:{defaultValue:null,description:"",name:"widgetId",required:!0,type:{name:"string"}},isMultiple:{defaultValue:null,description:"",name:"isMultiple",required:!0,type:{name:"boolean"}},isBatched:{defaultValue:null,description:"",name:"isBatched",required:!0,type:{name:"boolean"}},isSearching:{defaultValue:null,description:"",name:"isSearching",required:!0,type:{name:"boolean"}},useDataSources:{defaultValue:null,description:"",name:"useDataSources",required:!0,type:{name:"ImmutableArray<UseDataSource>"}},disableSelection:{defaultValue:null,description:"",name:"disableSelection",required:!0,type:{name:"boolean"}},disableRemove:{defaultValue:null,description:"",name:"disableRemove",required:!0,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(useDataSources: UseDataSource[]) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/data-source-list/components/ds-widget-outputs/output-ds-item-tree.tsx#outputdsitemtree"]={docgenInfo:outputdsitemtree.__docgenInfo,name:"outputdsitemtree",path:"../jimu-ui/advanced/lib/data-source-selector/components/data-source-list/components/ds-widget-outputs/output-ds-item-tree.tsx#outputdsitemtree"})}catch(__react_docgen_typescript_loader_error){}var empty=__webpack_require__("../jimu-icons/outlined/application/empty.tsx"),ds_widget_outputs_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};class DataSourceWidgetOutputs extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.__unmount=!1,this.initData=()=>{var _a;const excludeWidgetId=this.props.enableToSelectOutputDsFromSelf?null:this.props.widgetId;this.setToUseDataSources((null===(_a=this.props.selectedTypes)||void 0===_a?void 0:_a.length)?this.props.selectedTypes:this.props.types,this.props.fromRootDsIds,this.props.fromDsIds,this.props.hideDs,this.props.searchValue,excludeWidgetId)},this.setToUseDataSources=(usedTypes,fromRootDsIds,fromDsIds,hideDs,searchValue,widgetId)=>{const toUseRootDss=this.getToUseRootDss(usedTypes,fromRootDsIds,fromDsIds,hideDs,searchValue,widgetId);this.getToUseChildDss(usedTypes,fromRootDsIds,fromDsIds,hideDs,searchValue).then((toUseChildDss=>{const toUseWidgets=this.getToUseWidgets(toUseRootDss,toUseChildDss);this.__unmount||this.setState({toUseRootDss,toUseChildDss,toUseWidgets})}))},this.getRootDss=()=>{const rootDss=jimu_core.zAk.getInstance().getWidgetGeneratedDataSources();return Object.keys(rootDss).forEach((wId=>{rootDss[wId]=rootDss[wId].filter((ds=>ds&&ds.id&&ds.getDataSourceJson()))})),rootDss},this.getToUseWidgets=(toUseRootDss,toUseChildDss)=>jimu_core.VbA.getAllWidgets(getAppConfig()).filter((wJson=>toUseRootDss[wJson.id]||this.getRootDss()[wJson.id]&&this.getRootDss()[wJson.id].some((rootDs=>!!toUseChildDss[rootDs.id])))),this.getToUseRootDss=(usedTypes,fromRootDsIds,fromDsIds,hideDs,searchValue,excludeWidgetId)=>{const toUseRootDss={};if(fromRootDsIds)return toUseRootDss;{const widgetOutputRootDss=this.getRootDss();Object.keys(widgetOutputRootDss).forEach((wId=>{const dss=widgetOutputRootDss[wId].filter((ds=>ds&&!ds.parentDataSource&&getWhetherUseDataSourceByTypes(ds.getDataSourceJson(),usedTypes)&&this.isValid(ds,fromDsIds,hideDs,searchValue)));dss.length>0&&(toUseRootDss[wId]||(toUseRootDss[wId]=[]),toUseRootDss[wId]=toUseRootDss[wId].concat(dss))}));const widgetOutputRootDsJsons={},appConfig=getAppConfig();Object.keys(appConfig.widgets).filter((wId=>appConfig.widgets[wId].outputDataSources)).forEach((wId=>{widgetOutputRootDsJsons[wId]=appConfig.widgets[wId].outputDataSources.asMutable().map((dsId=>{var _a;return null===(_a=null==appConfig?void 0:appConfig.dataSources)||void 0===_a?void 0:_a[dsId]})).filter((d=>{if(d){const ds=jimu_core.zAk.getInstance().getDataSource(d.id);return(null==ds?void 0:ds.isDataSourceSet())?!ds.areChildDataSourcesCreated():!ds}return!1}))})),Object.keys(widgetOutputRootDsJsons).forEach((wId=>{widgetOutputRootDsJsons[wId].length>0&&(toUseRootDss[wId]||(toUseRootDss[wId]=[]),toUseRootDss[wId]=toUseRootDss[wId].concat(widgetOutputRootDsJsons[wId]))}))}const allExcludeWidgetIds=getWidgetsUsingOutputDsFromOneWidget(excludeWidgetId);return Object.keys(toUseRootDss).forEach((wId=>{(0===toUseRootDss[wId].length||allExcludeWidgetIds.some((excludeWId=>excludeWId===wId)))&&delete toUseRootDss[wId]})),toUseRootDss},this.getToUseChildDss=(usedTypes,fromRootDsIds,fromDsIds,hideDs,searchValue)=>ds_widget_outputs_awaiter(this,void 0,void 0,(function*(){let rootDss=[];if(fromRootDsIds)rootDss=fromRootDsIds.asMutable().map((dsId=>jimu_core.zAk.getInstance().getDataSource(dsId)));else{const widgetOutputRootDss=this.getRootDss();Object.keys(widgetOutputRootDss).forEach((wId=>{rootDss=rootDss.concat(widgetOutputRootDss[wId])}))}return getToUseChildDss(rootDss,usedTypes).then((toUseChildDss=>{const realToUseChildDss={};return Object.keys(toUseChildDss).forEach((rootDsId=>{toUseChildDss[rootDsId].some((ds=>this.isValid(ds,fromDsIds,hideDs,searchValue)))&&(realToUseChildDss[rootDsId]=toUseChildDss[rootDsId].filter((ds=>this.isValid(ds,fromDsIds,hideDs,searchValue))))})),realToUseChildDss}))})),this.getToUseChildDssByWidgetId=wId=>{const toUseDss={};return this.getRootDss()[wId].forEach((rootDs=>{toUseDss[rootDs.id]||(toUseDss[rootDs.id]=[]),toUseDss[rootDs.id]=this.state.toUseChildDss[rootDs.id]?toUseDss[rootDs.id].concat(this.state.toUseChildDss[rootDs.id]):toUseDss[rootDs.id]})),Object.keys(toUseDss).forEach((rootId=>{0===toUseDss[rootId].length&&delete toUseDss[rootId]})),toUseDss},this.isValid=(ds,fromDsIds,hideDs,searchValue)=>ds&&ds.getDataSourceJson()&&ds.getDataSourceJson().isOutputFromWidget&&!ds.isDataView&&!ds.isLocal&&!ds.getDataSourceJson().isHidden&&isFuzzySearch(ds.getLabel(),searchValue)&&isFuzzyFromDsIds(ds.getDataSourceJson(),fromDsIds,hideDs),this.getWhetherShowList=()=>this.getWhetherShowRootDss()||this.getWhetherShowChildDss(),this.getWhetherShowRootDss=()=>this.state.toUseRootDss&&Object.keys(this.state.toUseRootDss).length>0,this.getWhetherShowChildDss=()=>this.state.toUseChildDss&&Object.keys(this.state.toUseChildDss).length>0,this.state={toUseRootDss:null,toUseChildDss:null,toUseWidgets:null}}componentDidMount(){this.__unmount=!1,this.initData()}componentDidUpdate(prevProps,prevState){prevProps.searchValue===this.props.searchValue&&prevProps.showQueriableDataSourceWithoutFields===this.props.showQueriableDataSourceWithoutFields&&jimu_core.CM0.isDeepEqual(prevProps.types,this.props.types)&&jimu_core.CM0.isDeepEqual(prevProps.selectedTypes,this.props.selectedTypes)&&jimu_core.CM0.isDeepEqual(prevProps.fromRootDsIds,this.props.fromRootDsIds)&&jimu_core.CM0.isDeepEqual(prevProps.fromDsIds,this.props.fromDsIds)&&Object.keys(prevProps.dataSourcesInfo||{}).length===Object.keys(this.props.dataSourcesInfo||{}).length||this.initData(),this.state.toUseRootDss===prevState.toUseRootDss&&this.state.toUseChildDss===prevState.toUseChildDss||(this.getWhetherShowList()?this.props.addDataTab(DataSourceTab.Output):this.props.removeDataTab(DataSourceTab.Output))}componentWillUnmount(){this.__unmount=!0}render(){var _a,_b;if(!this.state.toUseChildDss||!this.state.toUseRootDss||!this.state.toUseWidgets)return null;const types=function getOutputTypes(types){return types?types.filter((t=>!!t)):(0,jimu_core.J3Z)([])}(this.props.types);return jimu_core.q_G.createElement("div",{className:"ds-widget-outputs h-100 w-100"},types&&types.length>0?jimu_core.q_G.createElement("div",{className:"h-100"},this.getWhetherShowList()?jimu_core.q_G.createElement("div",{className:"ds-list px-4 pt-1",role:"listbox"},this.state.toUseWidgets.map((w=>jimu_core.q_G.createElement(OutputDsItemTree,{key:w.id,widgetJson:w,isBatched:this.props.isBatched,allToUseDss:getAllToUseDss(this.state.toUseRootDss[w.id],this.getToUseChildDssByWidgetId(w.id)),allToUseRootDss:getAllToUseRootDss(this.state.toUseRootDss[w.id],this.getToUseChildDssByWidgetId(w.id)),useDataSources:this.props.useDataSources,isMultiple:this.props.isMultiple,intl:this.props.intl,widgetId:this.props.widgetId,onChange:this.props.onChange,disableSelection:this.props.disableSelection,disableRemove:this.props.disableRemove,isSearching:!!this.props.searchValue})))):jimu_core.q_G.createElement("div",null,(null===(_b=null===(_a=(0,jimu_core.Vp3)().getState())||void 0===_a?void 0:_a.appStateInBuilder)||void 0===_b?void 0:_b.appConfig)&&this.props.isDataSourceInited&&jimu_core.q_G.createElement("div",{className:"empty-placeholder w-100"},jimu_core.q_G.createElement("div",{className:"empty-placeholder-icon"},jimu_core.q_G.createElement(empty.q,{size:48})),jimu_core.q_G.createElement("div",{className:"empty-placeholder-text",dangerouslySetInnerHTML:{__html:`${this.props.intl.formatMessage({id:"noWidgetOutputCanBeUsed",defaultMessage:jimu_ui.defaultMessages.noWidgetOutputCanBeUsed})}<br/>${this.props.intl.formatMessage({id:"pleaseAddData",defaultMessage:jimu_ui.defaultMessages.pleaseAddData})}`}})))):this.props.intl.formatMessage({id:"noSelectedType",defaultMessage:jimu_ui.defaultMessages.noSelectedType}))}}try{dswidgetoutputs.displayName="dswidgetoutputs",dswidgetoutputs.__docgenInfo={description:"",displayName:"dswidgetoutputs",props:{isDataSourceInited:{defaultValue:null,description:"",name:"isDataSourceInited",required:!0,type:{name:"boolean"}},dataSourcesInfo:{defaultValue:null,description:"",name:"dataSourcesInfo",required:!0,type:{name:"ImmutableObject<{ [dsId: string]: DataSourceInfo; }>"}},types:{defaultValue:null,description:"",name:"types",required:!0,type:{name:"ImmutableArray<DataSourceTypes>"}},selectedTypes:{defaultValue:null,description:"",name:"selectedTypes",required:!0,type:{name:"ImmutableArray<DataSourceTypes>"}},intl:{defaultValue:null,description:"",name:"intl",required:!0,type:{name:"IntlShape"}},searchValue:{defaultValue:null,description:"",name:"searchValue",required:!0,type:{name:"string"}},widgetId:{defaultValue:null,description:"",name:"widgetId",required:!0,type:{name:"string"}},isMultiple:{defaultValue:null,description:"",name:"isMultiple",required:!0,type:{name:"boolean"}},isBatched:{defaultValue:null,description:"",name:"isBatched",required:!0,type:{name:"boolean"}},hideTypeDropdown:{defaultValue:null,description:"",name:"hideTypeDropdown",required:!0,type:{name:"boolean"}},hideAllOptionOfTypeDropdown:{defaultValue:null,description:"",name:"hideAllOptionOfTypeDropdown",required:!0,type:{name:"boolean"}},fromDsIds:{defaultValue:null,description:"",name:"fromDsIds",required:!0,type:{name:"ImmutableArray<string>"}},fromRootDsIds:{defaultValue:null,description:"",name:"fromRootDsIds",required:!0,type:{name:"ImmutableArray<string>"}},enableToSelectOutputDsFromSelf:{defaultValue:null,description:"",name:"enableToSelectOutputDsFromSelf",required:!0,type:{name:"boolean"}},showQueriableDataSourceWithoutFields:{defaultValue:null,description:"",name:"showQueriableDataSourceWithoutFields",required:!0,type:{name:"boolean"}},useDataSources:{defaultValue:null,description:"",name:"useDataSources",required:!0,type:{name:"ImmutableArray<UseDataSource>"}},disableSelection:{defaultValue:null,description:"",name:"disableSelection",required:!0,type:{name:"boolean"}},disableRemove:{defaultValue:null,description:"",name:"disableRemove",required:!0,type:{name:"boolean"}},hideDs:{defaultValue:null,description:"",name:"hideDs",required:!0,type:{name:"(dsJson: IMDataSourceJson) => boolean"}},removeDataTab:{defaultValue:null,description:"",name:"removeDataTab",required:!0,type:{name:"(tab: DataSourceTab) => void"}},addDataTab:{defaultValue:null,description:"",name:"addDataTab",required:!0,type:{name:"(tab: DataSourceTab) => void"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(useDataSources: UseDataSource[]) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/data-source-list/components/ds-widget-outputs/index.tsx#dswidgetoutputs"]={docgenInfo:dswidgetoutputs.__docgenInfo,name:"dswidgetoutputs",path:"../jimu-ui/advanced/lib/data-source-selector/components/data-source-list/components/ds-widget-outputs/index.tsx#dswidgetoutputs"})}catch(__react_docgen_typescript_loader_error){}class DsErrorItem extends jimu_core.q_G.PureComponent{constructor(){super(...arguments),this.getWhetherSelected=()=>this.props.useDataSources&&this.props.useDataSources.some((useDs=>((null==useDs?void 0:useDs.mainDataSourceId)||(null==useDs?void 0:useDs.dataSourceId))===this.props.dsId)),this.getUseDs=()=>({dataSourceId:this.props.dsId,mainDataSourceId:this.props.dsId}),this.onItemClick=()=>{if(this.getWhetherSelected()){if(this.props.disableRemove)return;this.onDsRemoved(this.getUseDs())}else{if(this.props.disableSelection)return;this.onDsSelected(this.getUseDs())}},this.onDsSelected=selectedDs=>{if(!selectedDs)return;let useDataSources;useDataSources=this.props.useDataSources&&this.props.isMultiple?this.props.useDataSources.asMutable({deep:!0}).concat(selectedDs):[selectedDs],this.props.onChange&&this.props.onChange(useDataSources)},this.onDsRemoved=removedDs=>{if(!removedDs||!this.props.useDataSources)return;const selectedDsJsons=this.props.useDataSources.filter((useDs=>(null==useDs?void 0:useDs.dataSourceId)!==removedDs.dataSourceId));this.props.onChange&&this.props.onChange(selectedDsJsons.asMutable({deep:!0}))}}render(){var _a;if(!this.props.dsId)return null;const isSelected=this.getWhetherSelected(),dataSources=null===(_a=getAppConfig())||void 0===_a?void 0:_a.dataSources,dsJson=dataSources&&dataSources[this.props.dsId];if(!dsJson)return null;const label=dsJson.label||dsJson.sourceLabel||dsJson.id||"";return jimu_core.q_G.createElement("div",{onClick:this.onItemClick,className:(0,jimu_core.xWm)("ds-item ds-error-item",{"ds-item-selected":isSelected,[this.props.className]:!!this.props.className})},jimu_core.q_G.createElement("div",{className:"d-flex align-items-center w-100 item"},jimu_core.q_G.createElement("div",{className:"d-flex align-items-center justify-content-center flex-shrink-0 ds-thumbnail"},jimu_core.q_G.createElement(jimu_ui.Icon,{icon:jimu_core.ZkX.getDsIcon(dsJson),className:"text-default",size:"12"})),jimu_core.q_G.createElement("div",{className:"flex-grow-1 text-truncate pl-2 ds-type"},jimu_core.q_G.createElement("div",{className:"text-truncate ds-type-name",title:label},label))))}}try{dserroritem.displayName="dserroritem",dserroritem.__docgenInfo={description:"",displayName:"dserroritem",props:{dsId:{defaultValue:null,description:"",name:"dsId",required:!0,type:{name:"string"}},intl:{defaultValue:null,description:"",name:"intl",required:!0,type:{name:"IntlShape"}},widgetId:{defaultValue:null,description:"",name:"widgetId",required:!1,type:{name:"string"}},useDataSources:{defaultValue:null,description:"",name:"useDataSources",required:!1,type:{name:"ImmutableArray<UseDataSource>"}},isMultiple:{defaultValue:null,description:"",name:"isMultiple",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(useDataSources: UseDataSource[]) => void"}},disableSelection:{defaultValue:null,description:"",name:"disableSelection",required:!1,type:{name:"boolean"}},disableRemove:{defaultValue:null,description:"",name:"disableRemove",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/data-source-list/components/ds-added-data/ds-error-item.tsx#dserroritem"]={docgenInfo:dserroritem.__docgenInfo,name:"dserroritem",path:"../jimu-ui/advanced/lib/data-source-selector/components/data-source-list/components/ds-added-data/ds-error-item.tsx#dserroritem"})}catch(__react_docgen_typescript_loader_error){}class DsItemTree extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.getIsNodeSelectable=()=>ds=>{const isCurrentNodeSelectable=this.props.allToUseDss.some((d=>d.id===ds.id));return this.props.isMultiple&&this.props.isBatched&&!isCurrentNodeSelectable&&ds.isDataSourceSet()?ds.getAllChildDataSources().some((cDs=>this.props.allToUseDss.some((d=>d.id===cDs.id)))):isCurrentNodeSelectable},this.renderDsItem=ds=>jimu_core.q_G.createElement(DsItem,{useDataSources:this.props.useDataSources,ds,widgetId:this.props.widgetId,isBatched:this.props.isBatched,key:ds.id,onChange:this.props.onChange,isMultiple:this.props.isMultiple,intl:this.props.intl,disableSelection:this.props.disableSelection,disableRemove:this.props.disableRemove,className:"w-100",onClickDisabledDsItem:this.props.onClickDisabledDsItem,isDataSourceSelectable:ds=>this.props.allToUseDss.some((d=>d.id===(null==ds?void 0:ds.id)))}),this.renderDsLabel=(label,dataSource,isRootTree)=>{const ds=isRootTree?this.props.ds:dataSource,isInstance=isDataSourceInstance(ds),dsInstance=isInstance?ds:jimu_core.zAk.getInstance().getDataSource(ds.id),isLoading=isRootTree&&(null==dsInstance?void 0:dsInstance.isDataSourceSet())&&!dsInstance.areChildDataSourcesCreated();return jimu_core.q_G.createElement("div",{className:"d-flex w-100",title:label},isLoading&&jimu_core.q_G.createElement("div",{className:"loading-container loading-container-for-label"},jimu_core.q_G.createElement(jimu_ui.Loading,{type:jimu_ui.LoadingType.Bar})),jimu_core.q_G.createElement("div",{className:"d-flex align-items-center justify-content-center flex-shrink-0 ds-thumbnail",title:jimu_core.ZkX.getDsTypeString(null==ds?void 0:ds.type,this.props.intl)},jimu_core.q_G.createElement(jimu_ui.Icon,{icon:jimu_core.ZkX.getDsIcon(isInstance?ds.getDataSourceJson():ds),className:"text-default",size:"12"})),jimu_core.q_G.createElement("div",{className:"flex-grow-1 text-truncate pl-2 ds-type"},jimu_core.q_G.createElement("div",{className:"text-truncate ds-type-name"},label)))},this.getChildDataSources=ds=>isDataSourceInstance(ds)&&(null==ds?void 0:ds.isDataSourceSet())?ds.getChildDataSources():[],this.getLabel=ds=>isDataSourceInstance(ds)?(null==ds?void 0:ds.getLabel())||(null==ds?void 0:ds.id):ds.label||ds.sourceLabel||ds.id,this.toggle=()=>{this.setState({isOpen:!this.state.isOpen})},this.state={isNodeSelectable:this.getIsNodeSelectable(),isOpen:this.props.isSearching}}componentDidUpdate(prevProps){prevProps.allToUseDss===this.props.allToUseDss&&prevProps.isBatched===this.props.isBatched&&prevProps.isMultiple===this.props.isMultiple||this.setState({isNodeSelectable:this.getIsNodeSelectable()}),this.props.isSearching!==prevProps.isSearching&&this.setState({isOpen:this.props.isSearching})}render(){return this.props.ds?jimu_core.q_G.createElement("div",{className:"mb-4"},jimu_core.q_G.createElement(data_source_tree_DataSourceTree,{dataSource:this.props.ds,useDataSources:this.props.useDataSources,isNodeSelectable:this.state.isNodeSelectable,renderSelectableNode:this.renderDsItem,renderUnselectableNode:this.renderDsLabel,useDefaultBackground:!0,getChildDataSources:this.getChildDataSources,getLabel:this.getLabel,isOpen:this.props.isSearching?this.state.isOpen:void 0,toggle:this.props.isSearching?this.toggle:void 0})):null}}try{dsitemtree.displayName="dsitemtree",dsitemtree.__docgenInfo={description:"",displayName:"dsitemtree",props:{ds:{defaultValue:null,description:"",name:"ds",required:!0,type:{name:"DataSource | IMDataSourceJson"}},allToUseDss:{defaultValue:null,description:"All [to-use data sources](../ds-add-data.tsx).\nUse the array to get whether a data source can be list here and select.",name:"allToUseDss",required:!0,type:{name:"(DataSource | IMDataSourceJson)[]"}},intl:{defaultValue:null,description:"",name:"intl",required:!0,type:{name:"IntlShape"}},widgetId:{defaultValue:null,description:"",name:"widgetId",required:!0,type:{name:"string"}},isMultiple:{defaultValue:null,description:"",name:"isMultiple",required:!0,type:{name:"boolean"}},isBatched:{defaultValue:null,description:"",name:"isBatched",required:!0,type:{name:"boolean"}},isSearching:{defaultValue:null,description:"",name:"isSearching",required:!0,type:{name:"boolean"}},useDataSources:{defaultValue:null,description:"",name:"useDataSources",required:!0,type:{name:"ImmutableArray<UseDataSource>"}},disableSelection:{defaultValue:null,description:"",name:"disableSelection",required:!0,type:{name:"boolean"}},disableRemove:{defaultValue:null,description:"",name:"disableRemove",required:!0,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(useDataSources: UseDataSource[]) => void"}},onClickDisabledDsItem:{defaultValue:null,description:"",name:"onClickDisabledDsItem",required:!1,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/data-source-list/components/ds-added-data/ds-item-tree.tsx#dsitemtree"]={docgenInfo:dsitemtree.__docgenInfo,name:"dsitemtree",path:"../jimu-ui/advanced/lib/data-source-selector/components/data-source-list/components/ds-added-data/ds-item-tree.tsx#dsitemtree"})}catch(__react_docgen_typescript_loader_error){}class DsList extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.dsManager=jimu_core.zAk.getInstance(),this.getWhetherShowSingleDss=()=>this.props.rootDss&&this.props.rootDss.length>0,this.getSelectedErrorDss=()=>this.props.useDataSources?this.props.useDataSources.asMutable().filter((useDs=>!(this.dsManager&&this.dsManager.getDataSource(null==useDs?void 0:useDs.mainDataSourceId)))).map((useDs=>useDs.mainDataSourceId)):null,this.state={isTypeDropdownOpen:!1,selectedErrorDss:null}}componentDidMount(){if(this.props.showErrorDss){const selectedErrorDss=this.getSelectedErrorDss();this.setState({selectedErrorDss}),selectedErrorDss&&selectedErrorDss.length>0?this.props.changeHasErrorSelectedDss&&this.props.changeHasErrorSelectedDss(!0):this.props.changeHasErrorSelectedDss&&this.props.changeHasErrorSelectedDss(!1)}}componentDidUpdate(prevProps){if(this.props.showErrorDss&&(!this.state.selectedErrorDss||0===this.state.selectedErrorDss.length)&&(!prevProps.useDataSources||0===prevProps.useDataSources.length)&&this.props.useDataSources&&0!==this.props.useDataSources.length){const selectedErrorDss=this.getSelectedErrorDss();this.setState({selectedErrorDss}),selectedErrorDss&&selectedErrorDss.length>0?this.props.changeHasErrorSelectedDss&&this.props.changeHasErrorSelectedDss(!0):this.props.changeHasErrorSelectedDss&&this.props.changeHasErrorSelectedDss(!1)}}render(){return jimu_core.q_G.createElement("div",{className:"ds-list px-4 pt-1",role:"listbox"},this.props.showErrorDss&&this.state.selectedErrorDss&&this.state.selectedErrorDss.map((dsId=>jimu_core.q_G.createElement(DsErrorItem,{useDataSources:this.props.useDataSources,dsId,key:dsId,onChange:this.props.onChange,isMultiple:this.props.isMultiple,disableSelection:this.props.disableSelection,disableRemove:this.props.disableRemove,intl:this.props.intl,className:"mb-4 ml-5",widgetId:this.props.widgetId}))),this.getWhetherShowSingleDss()&&jimu_core.ZkX.getSortedArrayByLabel(this.props.rootDss).map((ds=>ds&&ds.id?jimu_core.q_G.createElement(DsItemTree,{useDataSources:this.props.useDataSources,ds,isBatched:this.props.isBatched,key:ds.id,onChange:this.props.onChange,isMultiple:this.props.isMultiple,allToUseDss:this.props.allToUseDss,disableSelection:this.props.disableSelection,disableRemove:this.props.disableRemove,intl:this.props.intl,widgetId:this.props.widgetId,isSearching:this.props.isSearching,onClickDisabledDsItem:this.props.onClickDisabledDsItem}):null)))}}try{dslist.displayName="dslist",dslist.__docgenInfo={description:"",displayName:"dslist",props:{intl:{defaultValue:null,description:"",name:"intl",required:!0,type:{name:"IntlShape"}},rootDss:{defaultValue:null,description:"",name:"rootDss",required:!0,type:{name:"(DataSource | IMDataSourceJson)[]"}},allToUseDss:{defaultValue:null,description:"",name:"allToUseDss",required:!0,type:{name:"(DataSource | IMDataSourceJson)[]"}},widgetId:{defaultValue:null,description:"",name:"widgetId",required:!0,type:{name:"string"}},showErrorDss:{defaultValue:null,description:"",name:"showErrorDss",required:!0,type:{name:"boolean"}},useDataSources:{defaultValue:null,description:"",name:"useDataSources",required:!0,type:{name:"ImmutableArray<UseDataSource>"}},isMultiple:{defaultValue:null,description:"",name:"isMultiple",required:!0,type:{name:"boolean"}},isBatched:{defaultValue:null,description:"",name:"isBatched",required:!0,type:{name:"boolean"}},isSearching:{defaultValue:null,description:"",name:"isSearching",required:!0,type:{name:"boolean"}},disableSelection:{defaultValue:null,description:"",name:"disableSelection",required:!0,type:{name:"boolean"}},disableRemove:{defaultValue:null,description:"",name:"disableRemove",required:!0,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(useDataSources: UseDataSource[]) => void"}},onClickDisabledDsItem:{defaultValue:null,description:"",name:"onClickDisabledDsItem",required:!1,type:{name:"() => void"}},changeHasErrorSelectedDss:{defaultValue:null,description:"",name:"changeHasErrorSelectedDss",required:!0,type:{name:"(hasErrorDss: boolean) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/data-source-list/components/ds-added-data/ds-list.tsx#dslist"]={docgenInfo:dslist.__docgenInfo,name:"dslist",path:"../jimu-ui/advanced/lib/data-source-selector/components/data-source-list/components/ds-added-data/ds-list.tsx#dslist"})}catch(__react_docgen_typescript_loader_error){}var ds_added_data_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};class DataSourceAddedData extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.__unmount=!1,this.initData=()=>{var _a;this.setToUseDataSources((null===(_a=this.props.selectedTypes)||void 0===_a?void 0:_a.length)?this.props.selectedTypes:this.props.types,this.props.fromRootDsIds,this.props.fromDsIds,this.props.hideDs,this.props.searchValue,this.props.showQueriableDataSourceWithoutFields)},this.setHasErrorDss=hasErrorDss=>{this.setState({hasErrorSelectedDss:hasErrorDss})},this.setToUseDataSources=(toUseTypes,fromRootDsIds,fromDsIds,hideDs,searchValue,showQueriableDataSourceWithoutFields)=>{const toUseRootDss=this.getToUseRootDss(toUseTypes,fromRootDsIds,fromDsIds,hideDs,searchValue,showQueriableDataSourceWithoutFields);this.getToUseChildDss(toUseTypes,fromRootDsIds,fromDsIds,hideDs,searchValue,showQueriableDataSourceWithoutFields).then((toUseChildDss=>{this.__unmount||this.setState({toUseRootDss,toUseChildDss})}))},this.getRootDss=()=>jimu_core.zAk.getInstance().getConfiguredDataSources().filter((ds=>ds&&ds.id&&ds.getDataSourceJson()&&!ds.parentDataSource)),this.getToUseRootDss=(toUseTypes,fromRootDsIds,fromDsIds,hideDs,searchValue,showQueriableDataSourceWithoutFields)=>{var _a;if(fromRootDsIds)return[];{const dss=jimu_core.zAk.getInstance().getConfiguredDataSources().filter((ds=>ds&&!ds.parentDataSource&&ds.id===ds.getMainDataSource().id&&getWhetherUseDataSourceByTypes(ds.getDataSourceJson(),toUseTypes)&&this.isValidInProps(ds.getDataSourceJson(),fromDsIds,hideDs,searchValue,showQueriableDataSourceWithoutFields)&&this.isValidInMode(ds.getDataSourceJson())));return Object.values((null===(_a=getAppConfig())||void 0===_a?void 0:_a.dataSources)||{}).filter((d=>{if(!d||d.isOutputFromWidget||!this.isValidInMode(d)||dss.some((ds=>ds.id===d.id)))return!1;{const ds=jimu_core.zAk.getInstance().getDataSource(d.id);return(null==ds?void 0:ds.isDataSourceSet())?!ds.areChildDataSourcesCreated()&&!ds.getAllChildDataSources().some((cDs=>getWhetherUseDataSourceByTypes(cDs.getDataSourceJson(),toUseTypes)&&this.isValidInProps(cDs.getDataSourceJson(),fromDsIds,hideDs,searchValue,showQueriableDataSourceWithoutFields))):!ds}})).concat(dss)}},this.getToUseChildDss=(toUseTypes,fromRootDsIds,fromDsIds,hideDs,searchValue,showQueriableDataSourceWithoutFields)=>ds_added_data_awaiter(this,void 0,void 0,(function*(){let rootDss;return rootDss=fromRootDsIds?fromRootDsIds.asMutable().map((dsId=>jimu_core.zAk.getInstance().getDataSource(dsId))):this.getRootDss(),getToUseChildDss(rootDss,toUseTypes).then((toUseChildDss=>{const realToUseChildDss={};return Object.keys(toUseChildDss).forEach((rootDsId=>{var _a;this.isValidInMode(null===(_a=jimu_core.zAk.getInstance().getDataSource(rootDsId))||void 0===_a?void 0:_a.getDataSourceJson())&&toUseChildDss[rootDsId].some((ds=>this.isValidInProps(null==ds?void 0:ds.getDataSourceJson(),fromDsIds,hideDs,searchValue,showQueriableDataSourceWithoutFields)))&&(realToUseChildDss[rootDsId]=toUseChildDss[rootDsId].filter((ds=>this.isValidInProps(null==ds?void 0:ds.getDataSourceJson(),fromDsIds,hideDs,searchValue,showQueriableDataSourceWithoutFields))))})),realToUseChildDss}))})),this.isValidInProps=(dsJson,fromDsIds,hideDs,searchValue,showQueriableDataSourceWithoutFields)=>{var _a;if(!dsJson)return!1;if(showQueriableDataSourceWithoutFields)return!dsJson.isOutputFromWidget&&!dsJson.isHidden&&isFuzzySearch(dsJson.label||dsJson.sourceLabel||dsJson.id,searchValue)&&isFuzzyFromDsIds(dsJson,fromDsIds,hideDs);{const ds=jimu_core.zAk.getInstance().getDataSource(null==dsJson?void 0:dsJson.id),isQueriableDs=!!(null==ds?void 0:ds.query),hasFields=Object.keys((null===(_a=null==ds?void 0:ds.getSchema())||void 0===_a?void 0:_a.fields)||{}).length>0;return(!isQueriableDs||hasFields)&&!dsJson.isOutputFromWidget&&!dsJson.isHidden&&isFuzzySearch(dsJson.label||dsJson.sourceLabel||dsJson.id,searchValue)&&isFuzzyFromDsIds(dsJson,fromDsIds,hideDs)}},this.isValidInMode=dsJson=>{var _a,_b;return!window.isExpressBuilder||(isMapWidget(this.props.widgetId)||(null===(_b=getWidgetsUsingOneDs(dsJson.id,null===(_a=getAppConfig())||void 0===_a?void 0:_a.widgets))||void 0===_b?void 0:_b.some((w=>isMapWidget(w.id)))))},this.getWhetherShowList=()=>this.getWhetherShowRootDss()||this.getWhetherShowChildDss()||!(!this.state.hasErrorSelectedDss||!this.props.useDataSources),this.getWhetherShowRootDss=()=>this.state.toUseRootDss&&this.state.toUseRootDss.length>0,this.getWhetherShowChildDss=()=>this.state.toUseChildDss&&Object.keys(this.state.toUseChildDss).length>0,this.state={toUseRootDss:null,toUseChildDss:null,hasErrorSelectedDss:!0}}componentDidMount(){this.__unmount=!1,this.initData()}componentDidUpdate(prevProps,prevState){prevProps.searchValue===this.props.searchValue&&prevProps.showQueriableDataSourceWithoutFields===this.props.showQueriableDataSourceWithoutFields&&jimu_core.CM0.isDeepEqual(prevProps.types,this.props.types)&&jimu_core.CM0.isDeepEqual(prevProps.selectedTypes,this.props.selectedTypes)&&jimu_core.CM0.isDeepEqual(prevProps.fromRootDsIds,this.props.fromRootDsIds)&&jimu_core.CM0.isDeepEqual(prevProps.fromDsIds,this.props.fromDsIds)&&Object.keys(prevProps.dataSourcesInfo||{}).length===Object.keys(this.props.dataSourcesInfo||{}).length&&Object.keys(prevProps.dataSourcesInfo||{}).filter((dsId=>[jimu_core.e3_.Created,jimu_core.e3_.CreateError].includes(prevProps.dataSourcesInfo[dsId].instanceStatus))).length===Object.keys(this.props.dataSourcesInfo||{}).filter((dsId=>[jimu_core.e3_.Created,jimu_core.e3_.CreateError].includes(this.props.dataSourcesInfo[dsId].instanceStatus))).length||this.initData(),this.state.toUseRootDss===prevState.toUseRootDss&&this.state.toUseChildDss===prevState.toUseChildDss||(this.getWhetherShowList()?this.props.addDataTab(DataSourceTab.Added):this.props.removeDataTab(DataSourceTab.Added))}componentWillUnmount(){this.__unmount=!0}render(){var _a,_b;const types=function getAddedDataTypes(types){return types?types.filter((t=>!!t)):(0,jimu_core.J3Z)([])}(this.props.types);return jimu_core.q_G.createElement("div",{className:"ds-added-data h-100 w-100"},types&&types.length>0?jimu_core.q_G.createElement("div",{className:"h-100"},this.getWhetherShowList()?jimu_core.q_G.createElement(DsList,{rootDss:getAllToUseRootDss(this.state.toUseRootDss,this.state.toUseChildDss),allToUseDss:getAllToUseDss(this.state.toUseRootDss,this.state.toUseChildDss),onChange:this.props.onChange,isMultiple:this.props.isMultiple,changeHasErrorSelectedDss:this.setHasErrorDss,useDataSources:this.props.useDataSources,showErrorDss:this.props.isDataSourceInited,isBatched:this.props.isBatched,disableRemove:this.props.disableRemove,disableSelection:this.props.disableSelection,intl:this.props.intl,widgetId:this.props.widgetId,isSearching:!!this.props.searchValue,onClickDisabledDsItem:this.props.onClickDisabledDsItem}):jimu_core.q_G.createElement("div",null,(null===(_b=null===(_a=(0,jimu_core.Vp3)().getState())||void 0===_a?void 0:_a.appStateInBuilder)||void 0===_b?void 0:_b.appConfig)&&this.props.isDataSourceInited&&jimu_core.q_G.createElement("div",{className:"empty-placeholder w-100"},jimu_core.q_G.createElement("div",{className:"empty-placeholder-icon"},jimu_core.q_G.createElement(empty.q,{size:48})),jimu_core.q_G.createElement("div",{className:"empty-placeholder-text",dangerouslySetInnerHTML:{__html:`${window.isExpressBuilder?this.props.intl.formatMessage({id:"noDataCanBeUsedPleaseSelectDataForMap",defaultMessage:jimu_ui.defaultMessages.noDataCanBeUsedPleaseSelectDataForMap}):this.props.intl.formatMessage({id:"noDataIsAvailableForWidgetPleaseEnsureCorrectData",defaultMessage:jimu_ui.defaultMessages.noDataIsAvailableForWidgetPleaseEnsureCorrectData})}`}})))):this.props.intl.formatMessage({id:"noSelectedType",defaultMessage:jimu_ui.defaultMessages.noSelectedType}))}}try{dsaddeddata.displayName="dsaddeddata",dsaddeddata.__docgenInfo={description:"Prepare all needed data in the component, including to-use root data sources, to-use child data sources (including descendant data sources).\n**To-use data source** means the data source meets all of the following conditions and it can be list here:\n1. type of the data source is in `selectedTypes` array (if there is `selectedTypes`), or, in `types` array\n2. label of the data source matches the `searchValue` (if there is `searchValue`)\n3. parent data source of the data source is in `fromRootDsIds` array (if there is `fromRootDsIds`)\n4. the data source is in `fromDsIds` array (if there is `fromDsIds`)\n\nThe reasons why prepare the needed data here rather than in the component which use the data directly:\n1. can not know whether to show the empty icon util we get all the needed data, that is to say,\n   the empty icon should show only when there isn't any data can be list\n2. there are multiple conditions (see above) to decide whether a data source can be list here,\n   preparing data before use it can prevent from executing these logic multiple times",displayName:"dsaddeddata",props:{isDataSourceInited:{defaultValue:null,description:"",name:"isDataSourceInited",required:!0,type:{name:"boolean"}},dataSourcesInfo:{defaultValue:null,description:"",name:"dataSourcesInfo",required:!0,type:{name:"ImmutableObject<{ [dsId: string]: DataSourceInfo; }>"}},types:{defaultValue:null,description:"",name:"types",required:!0,type:{name:"ImmutableArray<DataSourceTypes>"}},selectedTypes:{defaultValue:null,description:"",name:"selectedTypes",required:!0,type:{name:"ImmutableArray<DataSourceTypes>"}},intl:{defaultValue:null,description:"",name:"intl",required:!0,type:{name:"IntlShape"}},searchValue:{defaultValue:null,description:"",name:"searchValue",required:!0,type:{name:"string"}},widgetId:{defaultValue:null,description:"",name:"widgetId",required:!0,type:{name:"string"}},isMultiple:{defaultValue:null,description:"",name:"isMultiple",required:!0,type:{name:"boolean"}},isBatched:{defaultValue:null,description:"",name:"isBatched",required:!0,type:{name:"boolean"}},hideTypeDropdown:{defaultValue:null,description:"",name:"hideTypeDropdown",required:!0,type:{name:"boolean"}},hideAllOptionOfTypeDropdown:{defaultValue:null,description:"",name:"hideAllOptionOfTypeDropdown",required:!0,type:{name:"boolean"}},showQueriableDataSourceWithoutFields:{defaultValue:null,description:"",name:"showQueriableDataSourceWithoutFields",required:!0,type:{name:"boolean"}},fromRootDsIds:{defaultValue:null,description:"",name:"fromRootDsIds",required:!0,type:{name:"ImmutableArray<string>"}},fromDsIds:{defaultValue:null,description:"",name:"fromDsIds",required:!0,type:{name:"ImmutableArray<string>"}},useDataSources:{defaultValue:null,description:"",name:"useDataSources",required:!0,type:{name:"ImmutableArray<UseDataSource>"}},disableSelection:{defaultValue:null,description:"",name:"disableSelection",required:!0,type:{name:"boolean"}},disableRemove:{defaultValue:null,description:"",name:"disableRemove",required:!0,type:{name:"boolean"}},hideDs:{defaultValue:null,description:"",name:"hideDs",required:!0,type:{name:"(dsJson: IMDataSourceJson) => boolean"}},removeDataTab:{defaultValue:null,description:"",name:"removeDataTab",required:!0,type:{name:"(tab: DataSourceTab) => void"}},addDataTab:{defaultValue:null,description:"",name:"addDataTab",required:!0,type:{name:"(tab: DataSourceTab) => void"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(useDataSources: UseDataSource[]) => void"}},onClickDisabledDsItem:{defaultValue:null,description:"",name:"onClickDisabledDsItem",required:!1,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/data-source-list/components/ds-added-data/index.tsx#dsaddeddata"]={docgenInfo:dsaddeddata.__docgenInfo,name:"dsaddeddata",path:"../jimu-ui/advanced/lib/data-source-selector/components/data-source-list/components/ds-added-data/index.tsx#dsaddeddata"})}catch(__react_docgen_typescript_loader_error){}class DsTypes extends jimu_core.q_G.PureComponent{constructor(){super(...arguments),this.getWhetherDisableSelectionType=types=>types.length<=1,this.onTypeSelected=e=>{const t=e.target.value;let types;types="All"===t?null:(0,jimu_core.J3Z)([t]),this.props.onTypeSelected(types)}}render(){var _a;const types=this.props.toUseTypes?(0,jimu_core.J3Z)(Array.from(new Set(this.props.toUseTypes.asMutable()))):(0,jimu_core.J3Z)([]),hideAll=this.props.hideAllOptionOfTypeDropdown;return jimu_core.q_G.createElement("div",{className:"d-flex justify-content-between align-items-center to-use-types"},jimu_core.q_G.createElement("div",{className:"mr-2 w-25 text-truncate",title:this.props.intl.formatMessage({id:"type",defaultMessage:jimu_ui.defaultMessages.type})},this.props.intl.formatMessage({id:"type",defaultMessage:jimu_ui.defaultMessages.type})),this.getWhetherDisableSelectionType(types)?jimu_core.q_G.createElement("div",{className:"types-selected text-truncate mr-1",title:jimu_core.ZkX.getDsTypeString(types[0],this.props.intl)},jimu_core.ZkX.getDsTypeString(types[0],this.props.intl)):jimu_core.q_G.createElement(jimu_ui.Select,{size:"sm",value:(null===(_a=this.props.selectedTypes)||void 0===_a?void 0:_a[0])||"All",onChange:this.onTypeSelected,className:"flex-shrink-0 to-use-dp",title:this.props.intl.formatMessage({id:"type",defaultMessage:jimu_ui.defaultMessages.type})},function getSortedLabels(labels){return labels.sort(((l1,l2)=>null==l1?void 0:l1.localeCompare(l2)))}(types.asMutable()).map((t=>jimu_core.q_G.createElement("option",{value:t,key:t},jimu_core.ZkX.getDsTypeString(t,this.props.intl)))),!hideAll&&types&&types.length>1&&jimu_core.q_G.createElement("option",{value:"All"},this.props.intl.formatMessage({id:"all",defaultMessage:jimu_ui.defaultMessages.all}))))}}try{dstypes.displayName="dstypes",dstypes.__docgenInfo={description:"",displayName:"dstypes",props:{toUseTypes:{defaultValue:null,description:"",name:"toUseTypes",required:!0,type:{name:"ImmutableArray<DataSourceTypes>"}},selectedTypes:{defaultValue:null,description:"",name:"selectedTypes",required:!0,type:{name:"ImmutableArray<DataSourceTypes>"}},hideAllOptionOfTypeDropdown:{defaultValue:null,description:"",name:"hideAllOptionOfTypeDropdown",required:!0,type:{name:"boolean"}},intl:{defaultValue:null,description:"",name:"intl",required:!0,type:{name:"IntlShape"}},onTypeSelected:{defaultValue:null,description:"",name:"onTypeSelected",required:!0,type:{name:"(types: ImmutableArray<DataSourceTypes>) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/data-source-list/components/common/ds-types.tsx#dstypes"]={docgenInfo:dstypes.__docgenInfo,name:"dstypes",path:"../jimu-ui/advanced/lib/data-source-selector/components/data-source-list/components/common/ds-types.tsx#dstypes"})}catch(__react_docgen_typescript_loader_error){}var plus=__webpack_require__("../jimu-icons/outlined/editor/plus.tsx"),search=__webpack_require__("../jimu-icons/outlined/editor/search.tsx");class _DataSourceList extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.externalDsStyle={width:"100%",height:"100%",maxWidth:"5000px",margin:0},this.__unmount=!1,this.showExternalDs=()=>{this.setState({isExternalDsShown:!0})},this.addDataTab=tab=>{this.props.hideTabs||this.state.dataTabs.some((t=>t===tab))||this.setState({dataTabs:this.state.dataTabs.concat(tab)})},this.removeDataTab=tab=>{!this.props.hideTabs&&this.state.dataTabs.some((t=>t===tab))&&this.setState({dataTabs:this.state.dataTabs.filter((t=>t!==tab))})},this.onActiveTabChange=tab=>{this.setState({activeTab:tab})},this.onSelectDataFinished=dsJsons=>{if(dsJsons)if(this.state.getAppConfigAction){(0,this.state.getAppConfigAction)().addDataSources(dsJsons).exec(),Promise.all(dsJsons.map((dsJson=>jimu_core.zAk.getInstance().createDataSource(dsJson).then((dsObj=>{if(dsObj.isDataSourceSet()&&!dsObj.getRootDataSource())return dsObj.childDataSourcesReady()}))))).catch((err=>{var _a,_b;(null===(_b=null===(_a=null==err?void 0:err.message)||void 0===_a?void 0:_a.toUpperCase())||void 0===_b?void 0:_b.includes(AddDataErrorCode.WebMapUnsupportedVersion))?this.setState({errorMsg:this.props.intl.formatMessage({id:"addDataErrorUnsupportedMap",defaultMessage:jimu_ui.defaultMessages.addDataErrorUnsupportedMap})}):(null==err?void 0:err.code)!==jimu_core.Agn.SignInCanceled&&((null==err?void 0:err.isSignInError)?this.setState({errorMsg:err.message1}):this.setState({errorMsg:this.props.intl.formatMessage({id:"invalidResourceItem",defaultMessage:jimu_core.kgw.invalidResourceItem})})),setTimeout((()=>{this.setState({errorMsg:null})}),5e3)})),this.props.changeInitStatus&&this.props.changeInitStatus(!1),this.__unmount||this.setState({isExternalDsShown:!1,activeTab:this.state.dataTabs.some((t=>t===DataSourceTab.Added))?DataSourceTab.Added:this.state.activeTab})}else console.error("Can not load jimu-for-builder");else this.setState({isExternalDsShown:!1})},this.onSelectDataCanceled=()=>{this.setState({isExternalDsShown:!1})},this.onToggleExternalDs=()=>{this.setState({isExternalDsShown:!this.state.isExternalDsShown})},this.onSearchValueChange=e=>{this.setState({searchValue:e.target.value})},this.setSelectedType=types=>{this.setState({selectedTypes:types})},this.ExternalDs=(0,jimu_core.Yac)(external_data_source_selector_ExternalDataSourceSelector,{portalUrl:(0,jimu_core.Vp3)().getState().portalUrl,onCancel:this.onSelectDataCanceled,onFinish:this.onSelectDataFinished,isMultiple:!0,types:this.props.types}),this.allowAddNewData=()=>{const allowInProps=!this.props.disableAddData&&!this.props.hideAddDataButton,allowInMode=!window.isExpressBuilder,isMap=isMapWidget(this.props.widgetId);return allowInProps&&(allowInMode||isMap)},this.isMapInExpressMode=()=>window.isExpressBuilder&&isMapWidget(this.props.widgetId);const dataTabs=[DataSourceTab.Added,DataSourceTab.Output].filter((t=>{var _a;return!(null===(_a=this.props.hideTabs)||void 0===_a?void 0:_a.includes(t))}));this.state={isExternalDsShown:!1,getAppConfigAction:null,searchValue:"",dataTabs,activeTab:dataTabs[0],selectedTypes:getDefaultSelectedTypes(this.props.types,this.props.useDataSources,this.props.hideAllOptionOfTypeDropdown),errorMsg:null}}componentDidMount(){this.__unmount=!1,Promise.all([__webpack_require__.e(9530),__webpack_require__.e(6448),__webpack_require__.e(7568),__webpack_require__.e(2922),__webpack_require__.e(6428)]).then(__webpack_require__.bind(__webpack_require__,"../jimu-for-builder/index.tsx")).then((JimuForBuilder=>{this.__unmount||this.setState({getAppConfigAction:JimuForBuilder.getAppConfigAction})}))}componentDidUpdate(prevProps){prevProps.types!==this.props.types&&this.setSelectedType(getDefaultSelectedTypes(this.props.types,this.props.useDataSources,this.props.hideAllOptionOfTypeDropdown))}componentWillUnmount(){this.__unmount=!0}render(){var _a;if(!jimu_core.zAk.getInstance())return null;const onlyUseAdded=1===this.state.dataTabs.length&&this.state.dataTabs[0]===DataSourceTab.Added,onlyUseOutput=1===this.state.dataTabs.length&&this.state.dataTabs[0]===DataSourceTab.Output,AddedData=(0,jimu_core.Yac)(DataSourceAddedData,{types:this.props.types,selectedTypes:this.state.selectedTypes,isDataSourceInited:this.props.isDataSourceInited,useDataSources:this.props.useDataSources,onChange:this.props.onChange,isMultiple:this.props.isMultiple,disableSelection:this.props.disableSelection,disableRemove:this.props.disableRemove,intl:this.props.intl,fromRootDsIds:this.props.fromRootDsIds,hideTypeDropdown:this.props.hideTypeDropdown,widgetId:this.props.widgetId,searchValue:this.state.searchValue,fromDsIds:this.props.fromDsIds,dataSourcesInfo:this.props.dataSourcesInfo,hideDs:this.props.hideDs,removeDataTab:this.removeDataTab,addDataTab:this.addDataTab,hideAllOptionOfTypeDropdown:this.props.hideAllOptionOfTypeDropdown,showQueriableDataSourceWithoutFields:this.props.showQueriableDataSourceWithoutFields,onClickDisabledDsItem:this.props.onClickDisabledDsItem,isBatched:this.props.isBatched}),WidgetOutput=(0,jimu_core.Yac)(DataSourceWidgetOutputs,{types:this.props.types,selectedTypes:this.state.selectedTypes,isDataSourceInited:this.props.isDataSourceInited,useDataSources:this.props.useDataSources,onChange:this.props.onChange,isMultiple:this.props.isMultiple,disableSelection:this.props.disableSelection,disableRemove:this.props.disableRemove,intl:this.props.intl,fromRootDsIds:this.props.fromRootDsIds,hideTypeDropdown:this.props.hideTypeDropdown,searchValue:this.state.searchValue,dataSourcesInfo:this.props.dataSourcesInfo,widgetId:this.props.widgetId,fromDsIds:this.props.fromDsIds,isBatched:this.props.isBatched,hideDs:this.props.hideDs,enableToSelectOutputDsFromSelf:this.props.enableToSelectOutputDsFromSelf,showQueriableDataSourceWithoutFields:this.props.showQueriableDataSourceWithoutFields,removeDataTab:this.removeDataTab,addDataTab:this.addDataTab,hideAllOptionOfTypeDropdown:this.props.hideAllOptionOfTypeDropdown}),DsTabs=(0,jimu_core.Yac)(jimu_ui.Tabs,{type:"pills",fill:!0,className:"data-tabs",value:this.state.activeTab,onChange:this.onActiveTabChange},(0,jimu_core.Yac)(jimu_ui.Tab,{id:DataSourceTab.Added,title:this.props.intl.formatMessage({id:"added",defaultMessage:jimu_ui.defaultMessages.added})},AddedData),(0,jimu_core.Yac)(jimu_ui.Tab,{id:DataSourceTab.Output,title:this.props.intl.formatMessage({id:"outputs",defaultMessage:jimu_ui.defaultMessages.outputs})},WidgetOutput)),addDataButtonString=this.isMapInExpressMode()?this.props.intl.formatMessage({id:"addNewMapOrScene",defaultMessage:jimu_ui.defaultMessages.addNewMapOrScene}):this.props.intl.formatMessage({id:"addNewData",defaultMessage:jimu_ui.defaultMessages.addNewData});return(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)("w-100 h-100",{[this.props.className]:!!this.props.className})},(0,jimu_core.Yac)("div",{className:"component-data-source-list h-100 w-100"},!this.props.hideHeader&&(0,jimu_core.Yac)("div",{className:"ds-list-header jimu-widget-setting--header d-flex px-4 py-0",title:this.props.intl.formatMessage({id:"setDataSource",defaultMessage:jimu_ui.defaultMessages.setDataSource})},(0,jimu_core.Yac)(jimu_ui.PanelHeader,{level:1,className:"px-0 py-4",showClose:!!this.props.onCloseClick,onClose:this.props.onCloseClick,title:this.props.intl.formatMessage({id:"setDataSource",defaultMessage:jimu_ui.defaultMessages.setDataSource})})),(0,jimu_core.Yac)("div",{className:"w-100 px-4 mb-4 search"},(0,jimu_core.Yac)(jimu_ui.TextInput,{prefix:(0,jimu_core.Yac)(search.V,{size:"m",className:"search-icon"}),value:this.state.searchValue,onChange:this.onSearchValueChange,className:"search-input",placeholder:this.props.intl.formatMessage({id:"search",defaultMessage:jimu_core.kgw.search}),size:"sm"})),(0,jimu_core.Yac)("div",{className:"w-100 px-4"},!this.props.hideTypeDropdown&&(null===(_a=this.props.types)||void 0===_a?void 0:_a.length)>0&&(0,jimu_core.Yac)("div",{className:"ds-types my-4"},(0,jimu_core.Yac)(DsTypes,{toUseTypes:this.props.types,onTypeSelected:this.setSelectedType,selectedTypes:this.state.selectedTypes,intl:this.props.intl,hideAllOptionOfTypeDropdown:this.props.hideAllOptionOfTypeDropdown}))),(0,jimu_core.Yac)("div",{className:"w-100 ds-list-container"},(0,jimu_core.Yac)("div",{className:"ds-list-tabs h-100"},onlyUseAdded||window.isExpressBuilder?(0,jimu_core.Yac)("div",{className:"h-100"},AddedData,(0,jimu_core.Yac)("div",{className:"d-none"},WidgetOutput)):(0,jimu_core.Yac)("div",{className:"h-100"},onlyUseOutput?(0,jimu_core.Yac)("div",{className:"h-100"},WidgetOutput,(0,jimu_core.Yac)("div",{className:"d-none"},AddedData)):DsTabs)),this.allowAddNewData()&&(0,jimu_core.Yac)(jimu_ui.Button,{type:"tertiary",className:" d-flex align-items-center px-4 ds-add-data text-left jimu-outline-inside",onClick:this.showExternalDs,title:addDataButtonString},(0,jimu_core.Yac)("div",{className:"add-data-icon-container d-flex align-items-center justify-content-center mr-2"},(0,jimu_core.Yac)(plus.b,{size:"s",className:"add-data-icon m-0"})),(0,jimu_core.Yac)("div",{className:"text-truncate flex-grow-1"},addDataButtonString)))),this.state.isExternalDsShown?(0,jimu_core.Yac)(jimu_ui.Modal,{isOpen:this.state.isExternalDsShown,style:this.externalDsStyle,toggle:this.onToggleExternalDs,contentClassName:"h-100",className:"widget-ds-setting-add-data-popup",keyboard:!1},this.ExternalDs):null,this.state.errorMsg&&(0,jimu_core.Yac)(jimu_ui.Alert,{className:"w-100",css:jimu_core.AHW`position: absolute; bottom: 40px;`,closable:!0,form:"basic",onClose:()=>{this.setState({errorMsg:null})},open:!0,text:this.state.errorMsg,type:"warning",withIcon:!0}))}}const data_source_list_DataSourceList=(0,jimu_theme.Xy)(jimu_core.E_S.connect((state=>{var _a,_b;return{dataSourcesInfo:(null===(_a=null===window||void 0===window?void 0:window.jimuConfig)||void 0===_a?void 0:_a.isBuilder)?null===(_b=state.appStateInBuilder)||void 0===_b?void 0:_b.dataSourcesInfo:state.dataSourcesInfo}}))((0,jimu_core.j4T)(_DataSourceList)),"DataSourceList");try{data_source_list_DataSourceList.displayName="DataSourceList",data_source_list_DataSourceList.__docgenInfo={description:"",displayName:"DataSourceList",props:{className:{defaultValue:null,description:"only used by theme.",name:"className",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"Callback when selected data sources are changed.",name:"onChange",required:!1,type:{name:"(useDataSources: UseDataSource[]) => void"}},isMultiple:{defaultValue:{value:"false"},description:"Whether to support multiple selection.",name:"isMultiple",required:!1,type:{name:"boolean"}},hideHeader:{defaultValue:{value:"false"},description:"Whether to hide header of the component.",name:"hideHeader",required:!1,type:{name:"boolean"}},widgetId:{defaultValue:null,description:"Must pass `widgetId` to use parent widget's data view by default when using the same data source as parent widget.",name:"widgetId",required:!1,type:{name:"string"}},useDataSources:{defaultValue:null,description:"Selected data sources.",name:"useDataSources",required:!1,type:{name:"Readonly<Remaining<UseDataSource>> & Additions<UseDataSource> & Overrides<UseDataSource> & ReadOnlyIndexer<...>"}},types:{defaultValue:null,description:"Supported data source types.\n`AllDataSourceTypes` is union of `DataSourceTypes` **(see `jimu-core` API documentation)** and `ArcGISDataSourceTypes` **(see `jimu-arcgis` API documentation)**.\n\n```ts\nimport { AllDataSourceTypes } from 'jimu-ui/advanced/data-source-selector'\n```",name:"types",required:!0,type:{name:"Readonly<Remaining<DataSourceTypes>> & Additions<DataSourceTypes> & Overrides<DataSourceTypes> & ReadOnlyIndexer<...>"}},isDataSourceInited:{defaultValue:null,description:"If `true`, data sources are inited.",name:"isDataSourceInited",required:!0,type:{name:"boolean"}},onCloseClick:{defaultValue:null,description:"Callback when close icon is clicked.",name:"onCloseClick",required:!1,type:{name:"() => void"}},changeInitStatus:{defaultValue:null,description:"Change data source init status, it will be necessary if the user is allowed to add new data source in the component.",name:"changeInitStatus",required:!1,type:{name:"(isInitialized: boolean) => void"}},disableSelection:{defaultValue:null,description:"Before selecting the component, this will check the variable to make sure it can continue selecting.",name:"disableSelection",required:!1,type:{name:"boolean"}},disableRemove:{defaultValue:null,description:"Before removing the component, this will check the variable to make sure it can continue removing.",name:"disableRemove",required:!1,type:{name:"boolean"}},fromRootDsIds:{defaultValue:null,description:"Only list child data sources generated by these root data sources.",name:"fromRootDsIds",required:!1,type:{name:"Readonly<Remaining<string>> & Additions<string> & Overrides<string> & ReadOnlyIndexer<string>"}},fromDsIds:{defaultValue:null,description:"Only list these data sources.",name:"fromDsIds",required:!1,type:{name:"Readonly<Remaining<string>> & Additions<string> & Overrides<string> & ReadOnlyIndexer<string>"}},hideDs:{defaultValue:null,description:"Whether to hide the data source in the list.",name:"hideDs",required:!1,type:{name:"(dsJson: IMDataSourceJson) => boolean"}},hideTypeDropdown:{defaultValue:{value:"false"},description:"Whether to hide dropdown that is used to filter the list by data source type.",name:"hideTypeDropdown",required:!1,type:{name:"boolean"}},hideAllOptionOfTypeDropdown:{defaultValue:{value:"false"},description:"Whether to hide `All` option of type dropdown. Works only when `hideTypeDropdown` is not true.",name:"hideAllOptionOfTypeDropdown",required:!1,type:{name:"boolean"}},hideAddDataButton:{defaultValue:{value:"false"},description:"Whether to hide the add data button at bottom.",name:"hideAddDataButton",required:!1,type:{name:"boolean"}},disableAddData:{defaultValue:{value:"false"},description:"Whether to hide the add data button at bottom.\n@deprecated",name:"disableAddData",required:!1,type:{name:"boolean"}},hideTabs:{defaultValue:null,description:"Hide some of the tabs.\nPlease note that if pass in `hideTabs`, won't calculate which tabs need to be displayed automatically, will only show tabs that are not included in the array.",name:"hideTabs",required:!1,type:{name:'Readonly<Remaining<"ADDED" | "OUTPUT">> & Additions<"ADDED" | "OUTPUT"> & Overrides<"ADDED" | "OUTPUT"> & ReadOnlyIndexer<"ADDED" | "OUTPUT">'}},isBatched:{defaultValue:{value:"false"},description:"Whether support batch selection. If true, selecting a parent data source will automatically select all supported child data sources.\nOnly takes effect when `isMultiple` is true.",name:"isBatched",required:!1,type:{name:"boolean"}},enableToSelectOutputDsFromSelf:{defaultValue:{value:"false"},description:"Allow to select output data sources which are generated by current widget itself.\nDo not allow widgets to select these data sources by default.",name:"enableToSelectOutputDsFromSelf",required:!1,type:{name:"boolean"}},showQueriableDataSourceWithoutFields:{defaultValue:{value:"false"},description:"Whether or not to show queriable data sources that have no fields.\nThese data sources extend from the `QueriableDataSource` but do not have fields, which means it will throw error if call `query` method or `load` method.",name:"showQueriableDataSourceWithoutFields",required:!1,type:{name:"boolean"}},onClickDisabledDsItem:{defaultValue:null,description:"",name:"onClickDisabledDsItem",required:!1,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/data-source-list/index.tsx#DataSourceList"]={docgenInfo:data_source_list_DataSourceList.__docgenInfo,name:"DataSourceList",path:"../jimu-ui/advanced/lib/data-source-selector/components/data-source-list/index.tsx#DataSourceList"})}catch(__react_docgen_typescript_loader_error){}var data_source_remove_warning_popup_DataSourceRemoveWaringReason,data_source_remove_warning_popup_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};!function(DataSourceRemoveWaringReason){DataSourceRemoveWaringReason.DataSourceRemoved="DATA_SOURCE_REMOVED",DataSourceRemoveWaringReason.SourceWidgetRemoved="SOURCE_WIDGET_REMOVED",DataSourceRemoveWaringReason.MapChanged="MAP_CHANGED"}(data_source_remove_warning_popup_DataSourceRemoveWaringReason||(data_source_remove_warning_popup_DataSourceRemoveWaringReason={}));class _DataSourceRemoveWarningPopup extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.__unmount=!1,this.close=()=>{this.props.isOpen&&!this.__unmount&&this.props.toggle()},this.onCheckboxBtnClick=(selected,e)=>{this.stopPropagation(e);const index=this.state.selectedWidgets.indexOf(selected);index<0?this.state.selectedWidgets.push(selected):this.state.selectedWidgets.splice(index,1),this.setState({selectedWidgets:[...this.state.selectedWidgets]})},this.onRemove=e=>data_source_remove_warning_popup_awaiter(this,void 0,void 0,(function*(){var _a,_b,_c;if(this.stopPropagation(e),this.state.getAppConfigAction){this.props.beforeRemove&&this.props.beforeRemove();const action=this.state.getAppConfigAction();if(this.state.selectedWidgets.length>0&&this.state.selectedWidgets.forEach(((widgetId,i)=>{action.removeWidget(widgetId)})),this.props.dataSourceId){const ds=jimu_core.zAk.getInstance().getDataSource(this.props.dataSourceId);if(null==ds?void 0:ds.isDataView){const dsJson=ds.getDataSourceJson(),dataViewId=ds.dataViewId;let dataViews=dsJson.dataViews||(0,jimu_core.J3Z)({});dataViews=dataViews.without(dataViewId);const rootDsJson=editDataSourceJson(dsJson.setIn(["dataViews"],dataViews));action.editDataSource(rootDsJson)}else{const appProxies=null===(_a=getAppConfig())||void 0===_a?void 0:_a.appProxies;let needProxyDataSourcesFromCurrentDataSource={};const toDeleteProxyIds=[],toDeleteProxyJsonId=[];let existingProxyJson;needProxyDataSourcesFromCurrentDataSource=(null===(_b=this.state.proxySettingUtils)||void 0===_b?void 0:_b.traverseToGetNeedProxyDataSources)?yield this.state.proxySettingUtils.traverseToGetNeedProxyDataSources(ds):{},Object.keys(needProxyDataSourcesFromCurrentDataSource).forEach((sourceUrl=>{var _a;existingProxyJson=null===(_a=this.state.proxySettingUtils)||void 0===_a?void 0:_a.getProxyJsonFromSourceUrl(sourceUrl,appProxies),existingProxyJson&&(toDeleteProxyJsonId.push(existingProxyJson.id),toDeleteProxyIds.push(existingProxyJson.proxyId))})),action.removeDataSource(this.props.dataSourceId).exec(),null===(_c=this.state.proxySettingUtils)||void 0===_c||_c.deleteProxies(toDeleteProxyIds,action).then((()=>{const action=this.state.getAppConfigAction();toDeleteProxyJsonId.forEach((id=>{action.removeAppProxy(id)}))}))}}else this.props.widgetId&&action.removeWidget(this.props.widgetId);action.exec(),this.props.afterRemove&&this.props.afterRemove()}this.close()})),this.onCancel=e=>{this.stopPropagation(e),this.props.onCancel&&this.props.onCancel(),this.close()},this.stopPropagation=e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},this.state={selectedWidgets:[],getAppConfigAction:null,proxySettingUtils:null}}componentDidMount(){this.__unmount=!1,Promise.all([Promise.all([__webpack_require__.e(9530),__webpack_require__.e(6448),__webpack_require__.e(7568),__webpack_require__.e(2922),__webpack_require__.e(6428)]).then(__webpack_require__.bind(__webpack_require__,"../jimu-for-builder/index.tsx")),Promise.all([__webpack_require__.e(9530),__webpack_require__.e(3162),__webpack_require__.e(9294),__webpack_require__.e(6448),__webpack_require__.e(7568),__webpack_require__.e(2922),__webpack_require__.e(6428),__webpack_require__.e(5233),__webpack_require__.e(3212),__webpack_require__.e(8007),__webpack_require__.e(1623),__webpack_require__.e(5091)]).then(__webpack_require__.bind(__webpack_require__,"../jimu-ui/advanced/setting-components.tsx"))]).then((res=>{const[{getAppConfigAction},{proxySettingUtils}]=res;this.__unmount||this.setState({getAppConfigAction,proxySettingUtils})}))}componentWillUnmount(){this.__unmount=!0}render(){var _a,_b;if(!this.props.reason||!this.props.dataSourceId&&!this.props.widgetId)return null;const ds=jimu_core.zAk.getInstance().getDataSource(this.props.dataSourceId),widgetJson=null===(_a=this.props.widgets)||void 0===_a?void 0:_a[this.props.widgetId],label=this.props.label||(this.props.dataSourceId?(null==ds?void 0:ds.getLabel())||this.props.dataSourceId:(null==widgetJson?void 0:widgetJson.label)||this.props.widgetId);let headerString,warningString,affectedWidgetsString,removeButtonString,howToRemoveWidgetsTipString,relatedWidgets=[];const cancelButtonString=this.props.intl.formatMessage({id:"cancel",defaultMessage:jimu_core.kgw.cancel}),relatedWidgetsString=this.props.intl.formatMessage({id:"relatedWidgets",defaultMessage:jimu_ui.defaultMessages.relatedWidgets});switch(this.props.reason){case data_source_remove_warning_popup_DataSourceRemoveWaringReason.DataSourceRemoved:relatedWidgets=getWidgetsUsingDsOrItsDescendantDss(this.props.dataSourceId,this.props.widgets),headerString=this.props.intl.formatMessage({id:"removeDataSource",defaultMessage:jimu_ui.defaultMessages.removeDataSource}),warningString=this.props.intl.formatMessage({id:"removeDataWarningTip",defaultMessage:jimu_ui.defaultMessages.removeDataWarningTip}),affectedWidgetsString=this.props.intl.formatMessage({id:"removeDataAffectedWidgets",defaultMessage:jimu_ui.defaultMessages.removeDataAffectedWidgets}),removeButtonString=this.props.intl.formatMessage({id:"removeDataSource",defaultMessage:jimu_ui.defaultMessages.removeDataSource}),howToRemoveWidgetsTipString=this.props.intl.formatMessage({id:"howToRemoveWidgetsTip",defaultMessage:jimu_ui.defaultMessages.howToRemoveWidgetsTip});break;case data_source_remove_warning_popup_DataSourceRemoveWaringReason.SourceWidgetRemoved:const outputDataSourceIds=null==widgetJson?void 0:widgetJson.outputDataSources;(null==outputDataSourceIds?void 0:outputDataSourceIds.length)>0&&outputDataSourceIds.forEach((outputDsId=>{getWidgetsUsingDsOrItsDescendantDss(outputDsId,this.props.widgets).forEach((w=>{relatedWidgets.some((rw=>w.id===rw.id))||(relatedWidgets=relatedWidgets.concat(w))}))})),headerString=this.props.intl.formatMessage({id:"outputDataWillBeRemovedTogether",defaultMessage:jimu_ui.defaultMessages.outputDataWillBeRemovedTogether}),warningString=this.props.intl.formatMessage({id:"removeSourceWidgetWarningTip",defaultMessage:jimu_ui.defaultMessages.removeSourceWidgetWarningTip},{widgetName:label}),affectedWidgetsString=this.props.intl.formatMessage({id:"removeSourceWidgetAffectedWidgets",defaultMessage:jimu_ui.defaultMessages.removeSourceWidgetAffectedWidgets}),removeButtonString=this.props.intl.formatMessage({id:"delete",defaultMessage:jimu_core.kgw.delete}),howToRemoveWidgetsTipString=this.props.intl.formatMessage({id:"howToRemoveWidgetsTip",defaultMessage:jimu_ui.defaultMessages.howToRemoveWidgetsTip});break;case data_source_remove_warning_popup_DataSourceRemoveWaringReason.MapChanged:relatedWidgets=getWidgetsUsingDescendantDss(this.props.dataSourceId,this.props.widgets),headerString=this.props.intl.formatMessage({id:"changeDataSource",defaultMessage:jimu_ui.defaultMessages.changeDataSource}),warningString=null,affectedWidgetsString=this.props.intl.formatMessage({id:"changeDataAffectedWidgets",defaultMessage:jimu_ui.defaultMessages.changeDataAffectedWidgets},{dataType:jimu_core.ZkX.getDsTypeString(null==ds?void 0:ds.type,this.props.intl)}),removeButtonString=this.props.intl.formatMessage({id:"removeDataSource",defaultMessage:jimu_ui.defaultMessages.removeDataSource}),howToRemoveWidgetsTipString=this.props.intl.formatMessage({id:"howToRemoveWidgetsTip2",defaultMessage:jimu_ui.defaultMessages.howToRemoveWidgetsTip2})}const removeDescId=`${this.props.dataSourceId}-desc`;return(0,jimu_core.Yac)(jimu_ui.Modal,{isOpen:this.props.isOpen,className:(0,jimu_core.xWm)("bg-light-300 d-flex justify-content-between",{[this.props.className]:!!this.props.className}),onClick:this.stopPropagation,role:"dialog","aria-label":headerString,"aria-describedby":removeDescId},(0,jimu_core.Yac)(jimu_ui.ModalHeader,{className:"d-flex justify-content-between border-color-gray-300 py-4 font-16 font-dark-600",onClick:this.stopPropagation,toggle:this.props.toggle,title:headerString},headerString),(0,jimu_core.Yac)(jimu_ui.ModalBody,{onClick:this.stopPropagation,id:removeDescId},(0,jimu_core.Yac)("div",{className:"px-2 py-0"},warningString&&(0,jimu_core.Yac)("p",{className:"font-13 font-dark-600","data-testid":"confirmDeleteMessage"},warningString),this.props.reason===data_source_remove_warning_popup_DataSourceRemoveWaringReason.DataSourceRemoved&&(0,jimu_core.Yac)("p",{className:"font-14 font-dark-800 mt-4"},label),this.props.reason===data_source_remove_warning_popup_DataSourceRemoveWaringReason.SourceWidgetRemoved&&(0,jimu_core.Yac)("div",{className:"related-outputs px-2 py-4"},null===(_b=null==widgetJson?void 0:widgetJson.outputDataSources)||void 0===_b?void 0:_b.map((outputDsId=>{var _a;return(0,jimu_core.Yac)("div",{className:"font-13 font-dark-800 output-ds-label",key:outputDsId},(null===(_a=jimu_core.zAk.getInstance().getDataSource(outputDsId))||void 0===_a?void 0:_a.getLabel())||outputDsId)}))),(0,jimu_core.Yac)("p",{className:"font-13 font-dark-600 mt-4"},affectedWidgetsString),(0,jimu_core.Yac)("div",{role:"group","aria-label":relatedWidgetsString},(0,jimu_core.Yac)("p",{className:"font-14 font-dark-400 mt-4"},relatedWidgetsString),(0,jimu_core.Yac)("div",{className:"related-widgets px-2 py-4"},(0,jimu_core.Yac)("div",null,relatedWidgets.map((w=>w&&w.id?(0,jimu_core.Yac)(jimu_ui.Label,{key:w.id,className:"d-flex"},(0,jimu_core.Yac)(jimu_ui.Checkbox,{className:"mr-2 font-13",onClick:e=>{this.onCheckboxBtnClick(w.id,e)},checked:this.state.selectedWidgets.includes(w.id)}),(0,jimu_core.Yac)(jimu_ui.Icon,{icon:w.icon,size:"16",className:"mr-1 font-dark-800"}),w.label):null))))),(0,jimu_core.Yac)("p",{className:"font-13 font-dark-600 mt-2 mb-0"},howToRemoveWidgetsTipString))),(0,jimu_core.Yac)(jimu_ui.ModalFooter,null,(0,jimu_core.Yac)("div",{className:"d-flex justify-content-end mt10"},(0,jimu_core.Yac)(jimu_ui.Button,{type:"primary",className:"mr-2",onClick:this.onRemove,"aria-label":removeButtonString},removeButtonString),(0,jimu_core.Yac)(jimu_ui.Button,{type:"default",onClick:this.onCancel,"aria-label":cancelButtonString},cancelButtonString))))}}const __DataSourceRemoveWarningPopup=jimu_core.E_S.connect(((state,ownProps)=>{var _a,_b,_c,_d;return{widgets:(null===(_a=null==state?void 0:state.appContext)||void 0===_a?void 0:_a.isBuilder)?null===(_c=null===(_b=null==state?void 0:state.appStateInBuilder)||void 0===_b?void 0:_b.appConfig)||void 0===_c?void 0:_c.widgets:null===(_d=null==state?void 0:state.appConfig)||void 0===_d?void 0:_d.widgets}}))(_DataSourceRemoveWarningPopup),data_source_remove_warning_popup_DataSourceRemoveWarningPopup=(0,jimu_theme.Xy)((0,jimu_core.j4T)(__DataSourceRemoveWarningPopup),"DataSourceRemoveWarningPopup");try{DataSourceRemoved.displayName="DataSourceRemoveWaringReason.DataSourceRemoved",DataSourceRemoved.__docgenInfo={description:"Data source is removed.",displayName:"DataSourceRemoveWaringReason.DataSourceRemoved",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/data-source-remove-warning-popup.tsx#DataSourceRemoveWaringReason.DataSourceRemoved"]={docgenInfo:data_source_remove_warning_popup_DataSourceRemoveWaringReason.DataSourceRemoved.__docgenInfo,name:"DataSourceRemoveWaringReason.DataSourceRemoved",path:"../jimu-ui/advanced/lib/data-source-selector/components/data-source-remove-warning-popup.tsx#DataSourceRemoveWaringReason.DataSourceRemoved"})}catch(__react_docgen_typescript_loader_error){}try{SourceWidgetRemoved.displayName="DataSourceRemoveWaringReason.SourceWidgetRemoved",SourceWidgetRemoved.__docgenInfo={description:"Source widget of output data source is removed.",displayName:"DataSourceRemoveWaringReason.SourceWidgetRemoved",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/data-source-remove-warning-popup.tsx#DataSourceRemoveWaringReason.SourceWidgetRemoved"]={docgenInfo:data_source_remove_warning_popup_DataSourceRemoveWaringReason.SourceWidgetRemoved.__docgenInfo,name:"DataSourceRemoveWaringReason.SourceWidgetRemoved",path:"../jimu-ui/advanced/lib/data-source-selector/components/data-source-remove-warning-popup.tsx#DataSourceRemoveWaringReason.SourceWidgetRemoved"})}catch(__react_docgen_typescript_loader_error){}try{MapChanged.displayName="DataSourceRemoveWaringReason.MapChanged",MapChanged.__docgenInfo={description:"In express mode, widgets can only select the child data sources of the map widget's data sources.\nIf change the map widget's data source, will affect other widgets.",displayName:"DataSourceRemoveWaringReason.MapChanged",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/data-source-remove-warning-popup.tsx#DataSourceRemoveWaringReason.MapChanged"]={docgenInfo:data_source_remove_warning_popup_DataSourceRemoveWaringReason.MapChanged.__docgenInfo,name:"DataSourceRemoveWaringReason.MapChanged",path:"../jimu-ui/advanced/lib/data-source-selector/components/data-source-remove-warning-popup.tsx#DataSourceRemoveWaringReason.MapChanged"})}catch(__react_docgen_typescript_loader_error){}try{data_source_remove_warning_popup_DataSourceRemoveWarningPopup.displayName="DataSourceRemoveWarningPopup",data_source_remove_warning_popup_DataSourceRemoveWarningPopup.__docgenInfo={description:"",displayName:"DataSourceRemoveWarningPopup",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"Label of the removed data source/source widget.\nIf do not pass in the props, will use data source label or widget label.",name:"label",required:!1,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},toggle:{defaultValue:null,description:"",name:"toggle",required:!0,type:{name:"() => void"}},widgetId:{defaultValue:null,description:"If `widgetId` is passed in, will list all widgets related to output data sources of the widget.\nPlease note that this props can be superseded by `dataSourceId`.\nMust pass in one of `dataSourceId` and `widgetId`.",name:"widgetId",required:!1,type:{name:"string"}},dataSourceId:{defaultValue:null,description:"If `dataSourceId` is passed in, will list all widgets related to the data source and ignore `widgetId`.\nMust pass in one of `dataSourceId` and `widgetId`.",name:"dataSourceId",required:!1,type:{name:"string"}},onCancel:{defaultValue:null,description:"Will call this function if cancel button is clicked.",name:"onCancel",required:!1,type:{name:"() => void"}},afterRemove:{defaultValue:null,description:"Will call this function after removing data source/source widget and related widgets.",name:"afterRemove",required:!1,type:{name:"() => void"}},reason:{defaultValue:null,description:"Reasons why need to show the warning popup.",name:"reason",required:!0,type:{name:"enum",value:[{value:'"DATA_SOURCE_REMOVED"'},{value:'"SOURCE_WIDGET_REMOVED"'},{value:'"MAP_CHANGED"'}]}},beforeRemove:{defaultValue:null,description:"Will call this function before removing data source/source widget and related widgets.",name:"beforeRemove",required:!1,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/data-source-remove-warning-popup.tsx#DataSourceRemoveWarningPopup"]={docgenInfo:data_source_remove_warning_popup_DataSourceRemoveWarningPopup.__docgenInfo,name:"DataSourceRemoveWarningPopup",path:"../jimu-ui/advanced/lib/data-source-selector/components/data-source-remove-warning-popup.tsx#DataSourceRemoveWarningPopup"})}catch(__react_docgen_typescript_loader_error){}var warning_circle=__webpack_require__("../jimu-icons/filled/suggested/warning-circle.tsx"),editor_edit=__webpack_require__("../jimu-icons/outlined/editor/edit.tsx"),editor_duplicate=__webpack_require__("../jimu-icons/outlined/editor/duplicate.tsx"),trash=__webpack_require__("../jimu-icons/outlined/editor/trash.tsx"),globe=__webpack_require__("../jimu-icons/outlined/data/globe.tsx");const LOCAL_LOAD_PREFIX="DATA_VIEW_SETTING_"+(new Date).getTime();class _DataViewSettingPopup extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.titleInput=jimu_core.q_G.createRef(),this.editButton=jimu_core.q_G.createRef(),this.__unmount=!1,this.lastScrollTop=0,this.lastTimeToggleTileInput=(new Date).getTime(),this.pendingLoadLocalDsPromise=null,this.previousLabel="",this.getLocalDataSource=()=>jimu_core.zAk.getInstance().getDataSource(this.getLocalDataSourceId()),this.initPagination=()=>{this.setState({pagination:{page:1,pageSize:"number"==typeof this.state.dataView.maximum?Math.min(this.state.dataView.maximum,15):15}})},this.setQueryParams=()=>{const dataView=this.state.dataView,maxPage="number"==typeof(null==dataView?void 0:dataView.maximum)?dataView.maximum<=15?1:Math.ceil(dataView.maximum/15):null,pageSize="number"==typeof(null==dataView?void 0:dataView.maximum)?Math.min(dataView.maximum,15):15;let page=this.state.pagination.page;maxPage?page+1<=maxPage&&(page+=1):page+=1,this.setState({pagination:{page,pageSize}})},this.setLocalDataSource=()=>{var _a,_b,_c,_d,_e;this.setState({isLocalDataSourceCreated:!1});const dataView=null===(_a=this.state.dataView)||void 0===_a?void 0:_a.set("orderBy",null===(_c=null===(_b=this.state.dataView)||void 0===_b?void 0:_b.orderBy)||void 0===_c?void 0:_c.filter((orderByOptions=>!!orderByOptions.jimuFieldName))),dsJson=this.props.mainDataSource.getDataSourceJson().set("id",this.getLocalDataSourceId()).set("query",dataView).set("isHidden",!0).without("dataViews"),ds=jimu_core.zAk.getInstance().getDataSource(this.getLocalDataSourceId());ds?(jimu_core.zAk.getInstance().updateDataSourceByDataSourceJson(ds,dsJson),jimu_core.CM0.defer((()=>{!this.__unmount&&this.props.isOpen&&this.setState({isLocalDataSourceCreated:!0})}))):jimu_core.zAk.getInstance().createDataSource({id:dsJson.id,dataSourceJson:dsJson,layer:null===(_d=this.props.mainDataSource)||void 0===_d?void 0:_d.layer,parentDataSource:(null===(_e=this.props.mainDataSource)||void 0===_e?void 0:_e.parentDataSource)&&jimu_core.zAk.getInstance().createLocalDataSource(this.props.mainDataSource.parentDataSource,LOCAL_LOAD_PREFIX)}).then((localDs=>{var _a;(null===(_a=this.props.mainDataSource)||void 0===_a?void 0:_a.isDataSourceSet())&&this.props.mainDataSource.getChildDataSources().forEach((c=>{jimu_core.zAk.getInstance().createLocalDataSource(c,LOCAL_LOAD_PREFIX).parentDataSource=localDs})),!this.__unmount&&this.props.isOpen&&this.setState({isLocalDataSourceCreated:!0})}),(err=>{console.error("Preview table error: ",err),!this.__unmount&&this.props.isOpen&&this.setState({isLocalDataSourceCreated:!0})}))},this.loadLocalDataSource=()=>{if(!this.getLocalDataSource())return;this.pendingLoadLocalDsPromise&&this.pendingLoadLocalDsPromise.cancel(),this.setState({isLocalDataSourceLoaded:!1});let query=Object.assign({page:1,pageSize:this.state.pagination.page*this.state.pagination.pageSize},{outFields:["*"]});if(!this.props.isSettingMainDataSource){const mainDsQuery=this.props.mainDataSource.getConfigQueryParams()||{};delete mainDsQuery.orderByFields,query=this.props.mainDataSource.mergeQueryParams(mainDsQuery,query)}this.pendingLoadLocalDsPromise=jimu_core.iE4.cancelable(this.getLocalDataSource().load(query,{widgetId:this.getLocalDataSourceId(),scope:jimu_core.pQB.InConfigView}).then((()=>{var _a;!this.__unmount&&this.props.isOpen&&(this.setState({isLocalDataSourceLoaded:!0,previewTableRecords:null===(_a=this.getLocalDataSource())||void 0===_a?void 0:_a.getRecordsByPage(1,this.state.pagination.pageSize*this.state.pagination.page)}),this.pendingLoadLocalDsPromise=null)}),(err=>{console.error("Preview table error: ",err),!this.__unmount&&this.props.isOpen&&(this.setState({isLocalDataSourceLoaded:!0,previewTableRecords:[]}),this.pendingLoadLocalDsPromise=null)})))},this.getUseDataSource=dataSource=>{if(!dataSource)return null;const rootDs=dataSource.getRootDataSource(),mainDs=dataSource.getMainDataSource();return(0,jimu_core.J3Z)({dataSourceId:dataSource.id,rootDataSourceId:rootDs&&rootDs.id,mainDataSourceId:mainDs&&mainDs.id})},this.getNewDataView=dataSource=>{if(!dataSource)return(0,jimu_core.J3Z)({});const dsJson=dataSource.getDataSourceJson(),dataViewIds=(null==dsJson?void 0:dsJson.dataViews)?Object.keys(dsJson.dataViews):null,nextViewIndex=dataViewIds&&dataViewIds.map((id=>id.split("_")[1])).filter((splittedId=>this.isNumeric(splittedId))).length>0?Math.max.apply(null,dataViewIds.map((id=>id.split("_")[1])).filter((splittedId=>this.isNumeric(splittedId))))+1:1;return(0,jimu_core.J3Z)({id:this.props.newDataViewId||`dataView_${nextViewIndex}`,label:this.props.newDataViewLabel||`${this.props.intl.formatMessage({id:"dataView",defaultMessage:jimu_ui.defaultMessages.dataView})} ${nextViewIndex}`})},this.getPreviewTable=(ds,records,label)=>{const schema=null==ds?void 0:ds.getSchema(),fields=null==schema?void 0:schema.fields;if(!records||!fields)return null;const sortedFields=Object.values(fields).sort(((f1,f2)=>{var _a;return null===(_a=f1.name)||void 0===_a?void 0:_a.localeCompare(f2.name)}));return(0,jimu_core.Yac)("div",{className:"table-container mr-2",onScroll:this.onScroll},(0,jimu_core.Yac)("div",{className:"table-header"},(0,jimu_core.Yac)("table",null,(0,jimu_core.Yac)("caption",{className:"sr-only"},label),(0,jimu_core.Yac)("thead",null,(0,jimu_core.Yac)("tr",{className:"d-flex"},sortedFields.map(((f,index)=>{const isDomainField=!(!ds||!jimu_core.ZkX.getCodedValueListForCodedValueOrSubtypeField(ds.getLayerDefinition(),f.jimuName));return(0,jimu_core.Yac)("th",{key:index},isDomainField&&(0,jimu_core.Yac)(globe.w,{className:"mr-1 domain-field-icon",title:this.props.intl.formatMessage({id:"domainField",defaultMessage:jimu_ui.defaultMessages.domainField})}),(0,jimu_core.Yac)("span",{title:f.alias||f.name},f.alias||f.name))})))))),(0,jimu_core.Yac)("div",{className:"table-body"},(0,jimu_core.Yac)("table",null,(0,jimu_core.Yac)("tbody",null,records.map(((r,index)=>(0,jimu_core.Yac)("tr",{className:"d-flex",key:index},sortedFields.map(((f,index)=>{const value=r.getFormattedFieldValue(f.jimuName,this.props.intl);return(0,jimu_core.Yac)("td",{key:index,title:value},value)})))))))))},this.isNumeric=n=>!isNaN(parseFloat(n))&&isFinite(n),this.onScroll=e=>{const clientHeight=e.target.clientHeight,scrollHeight=e.target.scrollHeight,scrollTop=e.target.scrollTop,isBottom=scrollHeight-(clientHeight+scrollTop)<=10,isScrollDown=scrollTop>this.lastScrollTop;this.lastScrollTop=scrollTop<=0?0:scrollTop,this.state.isLocalDataSourceCreated&&this.state.isLocalDataSourceLoaded&&isBottom&&isScrollDown&&this.setQueryParams()},this.onDuplicate=()=>{var _a;if(!this.props.onDuplicate)return;let newDataView=this.getNewDataView(this.props.mainDataSource);newDataView=this.state.dataView?this.state.dataView.merge(newDataView.asMutable({deep:!0})):newDataView,(null===(_a=this.state.dataView)||void 0===_a?void 0:_a.label)&&(newDataView=newDataView.set("label",this.getDuplicateLabel(this.state.dataView.label))),this.props.onDuplicate(newDataView)},this.onRemove=e=>{var _a,_b,_c;e.stopPropagation(),e.nativeEvent.stopImmediatePropagation();const dsId=jimu_core.zAk.getInstance().getDataViewDataSourceId(null===(_a=this.props.mainDataSource)||void 0===_a?void 0:_a.id,null===(_b=this.props.dataView)||void 0===_b?void 0:_b.id);0===getWidgetsUsingDsOrItsDescendantDss(dsId,this.props.widgets).length?(this.state.getAppConfigAction&&(this.removeDataView(null===(_c=this.props.dataView)||void 0===_c?void 0:_c.id),jimu_core.zAk.getInstance().destroyDataSource(dsId)),this.afterRemove(),this.props.toggle()):this.setState({isRemoveWarningOpen:!0},(()=>{this.props.toggle()}))},this.afterRemove=()=>{this.props.afterRemove&&this.props.afterRemove(this.props.dataView)},this.removeDataView=dataViewId=>{var _a;if(!dataViewId||!this.state.getAppConfigAction)return;const dsJson=null===(_a=this.props.mainDataSource)||void 0===_a?void 0:_a.getDataSourceJson();let dataViews=dsJson.dataViews||(0,jimu_core.J3Z)({});dataViews=dataViews.without(dataViewId);const rootDsJson=editDataSourceJson(dsJson.setIn(["dataViews"],dataViews));this.state.getAppConfigAction().editDataSource(rootDsJson).exec()},this.onLabelChange=e=>{this.changeLabel(e.target.value)},this.changeLabel=value=>{let dataView=this.state.dataView;dataView=dataView.set("label",value),this.setState({dataView})},this.checkLabelOnAccept=value=>{const res=this.checkLabel(value);return res.valid||this.changeLabel(this.previousLabel),res},this.checkLabelOnChange=value=>this.checkLabel(value),this.checkLabel=value=>{var _a,_b,_c;return!(value!==(null===(_a=this.props.dataView)||void 0===_a?void 0:_a.label))||value&&!(null===(_c=null===(_b=this.props.mainDataSource)||void 0===_b?void 0:_b.getDataViews())||void 0===_c?void 0:_c.some((v=>v.getLabel()===value)))?{valid:!0}:{valid:!1,msg:value&&this.props.intl.formatMessage({id:"duplicatedLabel",defaultMessage:jimu_ui.defaultMessages.duplicatedLabel})}},this.onSqlExprBuilderChange=sqlExprObj=>{let dataView=this.state.dataView;dataView=dataView.set("where",sqlExprObj),this.setState({dataView})},this.onSortChange=(sortData,index)=>{let dataView=this.state.dataView;dataView=dataView.set("orderBy",sortData),this.setState({dataView})},this.onPageSizeChange=value=>{let dataView=this.state.dataView;const numberValue="string"==typeof value?parseInt(value):value;dataView=numberValue&&numberValue>=1?dataView.set("pageSize",numberValue):dataView.without("pageSize"),this.setState({dataView})},this.onToggleMaximum=(e,checked)=>{let dataView=this.state.dataView;dataView=checked?dataView.set("maximum",100):dataView.without("maximum"),this.setState({dataView})},this.onMaximumChange=value=>{let dataView=this.state.dataView;const numberValue="string"==typeof value?parseInt(value):value;dataView=numberValue&&numberValue>=1?dataView.set("maximum",numberValue):dataView.set("maximum",100),this.setState({dataView})},this.onApply=()=>{var _a;let dataView=this.state.dataView;dataView=null==dataView?void 0:dataView.set("orderBy",null===(_a=null==dataView?void 0:dataView.orderBy)||void 0===_a?void 0:_a.filter((orderByOptions=>!!orderByOptions.jimuFieldName))),this.props.onApply(dataView)},this.toggleTitleInput=()=>{var _a;const time=(new Date).getTime();time-this.lastTimeToggleTileInput>500&&(this.previousLabel=null===(_a=this.state.dataView)||void 0===_a?void 0:_a.label,this.setState({isTitleInputShown:!this.state.isTitleInputShown}),this.lastTimeToggleTileInput=time)},this.toggleRemoveWarning=()=>{this.setState({isRemoveWarningOpen:!this.state.isRemoveWarningOpen})},_DataViewSettingPopup.count++;const dataView=this.props.dataView||this.getNewDataView(this.props.mainDataSource);this.state={dataView,previewTableRecords:[],isTitleInputShown:!1,isRemoveWarningOpen:!1,isLocalDataSourceCreated:!1,isLocalDataSourceLoaded:!1,SqlExpressionBuilder:null,Sort:null,getAppConfigAction:null,isSqlExpressionValid:null,pagination:{page:1,pageSize:"number"==typeof(null==dataView?void 0:dataView.maximum)?Math.min(dataView.maximum,15):15}}}componentDidMount(){this.__unmount=!1,Promise.all([Promise.all([__webpack_require__.e(6448),__webpack_require__.e(7568),__webpack_require__.e(2820)]).then(__webpack_require__.bind(__webpack_require__,"../jimu-ui/advanced/sql-expression-builder.tsx")),Promise.all([__webpack_require__.e(6448),__webpack_require__.e(7568)]).then(__webpack_require__.bind(__webpack_require__,"../jimu-ui/basic/sql-expression-runtime.tsx")),Promise.all([__webpack_require__.e(9530),__webpack_require__.e(6448),__webpack_require__.e(7568),__webpack_require__.e(2922),__webpack_require__.e(6428)]).then(__webpack_require__.bind(__webpack_require__,"../jimu-for-builder/index.tsx"))]).then((res=>{const[sqlBuilder,{isSqlExpressionValid},{getAppConfigAction}]=res;this.__unmount||this.setState({SqlExpressionBuilder:sqlBuilder.SqlExpressionBuilder,Sort:sqlBuilder.Sort,getAppConfigAction,isSqlExpressionValid})})),this.props.isOpen&&this.setLocalDataSource()}componentDidUpdate(prevProps,prevState){var _a,_b,_c,_d;!jimu_core.CM0.isDeepEqual(prevProps.dataView,this.props.dataView)||!prevProps.isOpen&&this.props.isOpen?(this.initPagination(),this.setState({dataView:this.props.dataView||this.getNewDataView(this.props.mainDataSource)},(()=>{var _a;(0,jimu_core.u02)(null===(_a=null===document||void 0===document?void 0:document.querySelector)||void 0===_a?void 0:_a.call(document,".modal.jimu-outline-inside.show"),!0)}))):this.props.isOpen&&(this.getLocalDataSource()&&prevProps.mainDataSource===this.props.mainDataSource&&jimu_core.CM0.isDeepEqual(null===(_a=prevState.dataView)||void 0===_a?void 0:_a.without("label"),null===(_b=this.state.dataView)||void 0===_b?void 0:_b.without("label"))||this.setLocalDataSource(),(!jimu_core.CM0.isDeepEqual(prevState.pagination,this.state.pagination)||!prevState.isLocalDataSourceCreated&&this.state.isLocalDataSourceCreated)&&this.loadLocalDataSource()),(null===(_c=prevState.dataView)||void 0===_c?void 0:_c.maximum)!==(null===(_d=this.state.dataView)||void 0===_d?void 0:_d.maximum)&&this.initPagination(),prevProps.isOpen&&!this.props.isOpen&&this.destroyLocalDataSource(),prevState.isTitleInputShown!==this.state.isTitleInputShown&&(this.state.isTitleInputShown&&this.titleInput.current?((0,jimu_core.u02)(this.titleInput.current,!0),this.titleInput.current.select()):!this.state.isTitleInputShown&&this.editButton.current&&(0,jimu_core.u02)(this.editButton.current,!0))}componentWillUnmount(){var _a;this.__unmount=!0,this.destroyLocalDataSource(),null===(_a=this.pendingLoadLocalDsPromise)||void 0===_a||_a.cancel()}destroyLocalDataSource(){jimu_core.zAk.getInstance().getDataSourcesAsArray().forEach((ds=>{ds.id.includes(LOCAL_LOAD_PREFIX)&&jimu_core.zAk.getInstance().destroyDataSource(ds.id)})),this.__unmount||(this.setState({isLocalDataSourceCreated:!1,isLocalDataSourceLoaded:!1,previewTableRecords:[],dataView:this.props.dataView||this.getNewDataView(this.props.mainDataSource)}),this.initPagination())}getLocalDataSourceId(){return`${LOCAL_LOAD_PREFIX}-${_DataViewSettingPopup.count}`}getDuplicateLabel(label){var _a;const copy=null===(_a=this.props.intl.formatMessage({id:"copy",defaultMessage:jimu_ui.defaultMessages.copy}))||void 0===_a?void 0:_a.toLocaleLowerCase();let newLabel=`${label} ${copy}`,num=1;for(;this.props.mainDataSource.getDataSourceJson().dataViews&&Object.keys(this.props.mainDataSource.getDataSourceJson().dataViews).find((id=>{var _a;return(null===(_a=this.props.mainDataSource.getDataSourceJson().dataViews[id])||void 0===_a?void 0:_a.label)===newLabel}));)num++,newLabel=`${label} ${copy} ${num}`;return newLabel}render(){var _a,_b,_c,_d;if(!this.props.mainDataSource.query)return null;const dataView=this.state.dataView,dataViewDsId=jimu_core.zAk.getInstance().getDataViewDataSourceId(null===(_a=this.props.mainDataSource)||void 0===_a?void 0:_a.id,null===(_b=this.props.dataView)||void 0===_b?void 0:_b.id),SqlExpressionBuilder=this.state.SqlExpressionBuilder,Sort=this.state.Sort,isSqlValid=!this.state.isSqlExpressionValid||this.state.isSqlExpressionValid(null==dataView?void 0:dataView.where),edit=this.props.intl.formatMessage({id:"edit",defaultMessage:jimu_ui.defaultMessages.edit}),duplicate=this.props.intl.formatMessage({id:"duplicate",defaultMessage:jimu_ui.defaultMessages.duplicate}),remove=this.props.intl.formatMessage({id:"delete",defaultMessage:jimu_core.kgw.delete}),apply=this.props.intl.formatMessage({id:"applyChanges",defaultMessage:jimu_ui.defaultMessages.applyChanges}),cancel=this.props.intl.formatMessage({id:"cancel",defaultMessage:jimu_core.kgw.cancel});return(0,jimu_core.Yac)("div",null,(0,jimu_core.Yac)(jimu_ui.Modal,{className:(0,jimu_core.xWm)({[this.props.className]:!!this.props.className}),isOpen:this.props.isOpen,centered:!0,toggle:this.props.toggle,trapFocus:!0,returnfocusafterclose:"true",contentClassName:"data-view-container",backdrop:"static",keyboard:!1,"aria-label":null===(_c=this.state.dataView)||void 0===_c?void 0:_c.label},(0,jimu_core.Yac)(jimu_ui.ModalHeader,{className:"d-flex justify-content-between align-items-center header"},(0,jimu_core.Yac)("div",{className:"flex-grow-1 text-truncate"},this.props.disableRename?(0,jimu_core.Yac)("div",{className:"flex-grow-1 text-truncate",title:null==dataView?void 0:dataView.label},null==dataView?void 0:dataView.label):(0,jimu_core.Yac)("div",{className:"d-flex align-items-center pr-4"},this.state.isTitleInputShown?(0,jimu_core.Yac)(jimu_ui.TextInput,{className:"flex-grow-1",value:null==dataView?void 0:dataView.label,onChange:this.onLabelChange,ref:this.titleInput,onBlur:this.toggleTitleInput,onPressEnter:this.toggleTitleInput,checkValidityOnChange:this.checkLabelOnChange,checkValidityOnAccept:this.checkLabelOnAccept}):(0,jimu_core.Yac)("div",{className:"text-truncate"},null==dataView?void 0:dataView.label),(0,jimu_core.Yac)(jimu_ui.Button,{className:"flex-shrink-0 ml-2 jimu-outline-inside",type:"tertiary",size:"sm",icon:!0,onClick:this.toggleTitleInput,title:edit,"aria-label":edit,ref:this.editButton},(0,jimu_core.Yac)(editor_edit.x,{size:"m"})))),(0,jimu_core.Yac)("div",{className:"flex-shrink-0"},!this.props.disableDuplicate&&this.props.dataView&&(0,jimu_core.Yac)(jimu_ui.Button,{className:"flex-shrink-0 circle-button mr-4",type:"default",size:"sm",icon:!0,onClick:this.onDuplicate,title:duplicate,"aria-label":duplicate,disabled:!isSqlValid},(0,jimu_core.Yac)(editor_duplicate.k,{size:"m"})),!this.props.disableRemove&&this.props.dataView&&(0,jimu_core.Yac)(jimu_ui.Button,{className:"flex-shrink-0 circle-button",type:"default",size:"sm",icon:!0,onClick:this.onRemove,title:remove,"aria-label":remove},(0,jimu_core.Yac)(trash.z,{size:"m"})))),dataView?(0,jimu_core.Yac)(jimu_ui.ModalBody,{className:"d-flex"},(0,jimu_core.Yac)("div",{className:"w-38 h-100 flex-shrink-0 setting-table"},(0,jimu_core.Yac)(jimu_ui.Tabs,{type:"underline",fill:!0,className:"h-100",defaultValue:"filter"},(0,jimu_core.Yac)(jimu_ui.Tab,{id:"filter",className:"view-tab",title:this.props.intl.formatMessage({id:"filter",defaultMessage:jimu_ui.defaultMessages.filter})},SqlExpressionBuilder&&(0,jimu_core.Yac)(SqlExpressionBuilder,{dataSource:this.props.mainDataSource,mode:jimu_core.YuP.Simple,expression:dataView.where,onChange:this.onSqlExprBuilderChange,queryScope:this.props.isSettingMainDataSource&&jimu_core.pQB.InRemoteConfigView})),(0,jimu_core.Yac)(jimu_ui.Tab,{id:"sort",className:"view-tab",title:this.props.intl.formatMessage({id:"sort",defaultMessage:jimu_ui.defaultMessages.sort})},Sort&&(0,jimu_core.Yac)(Sort,{onChange:this.onSortChange,value:dataView.orderBy||(0,jimu_core.J3Z)([]),useDataSource:this.getUseDataSource(this.props.mainDataSource)})),(0,jimu_core.Yac)(jimu_ui.Tab,{id:"records",className:"view-tab",title:this.props.intl.formatMessage({id:"records",defaultMessage:jimu_ui.defaultMessages.records})},(0,jimu_core.Yac)("div",{css:{paddingRight:2,paddingTop:2}},(0,jimu_core.Yac)("div",{className:"d-flex justify-content-between mb-4"},(0,jimu_core.Yac)(jimu_ui.Label,{for:"data-view-setting-page-size-input",className:"label"},this.props.intl.formatMessage({id:"pageSize",defaultMessage:jimu_ui.defaultMessages.pageSize})),(0,jimu_core.Yac)(jimu_ui.NumericInput,{size:"sm",value:dataView.pageSize||jimu_core.aH5.Rn,onAcceptValue:this.onPageSizeChange,showHandlers:!1,precision:0,min:1,id:"data-view-setting-page-size-input"})),(0,jimu_core.Yac)("div",{className:"d-flex justify-content-between mb-2"},(0,jimu_core.Yac)(jimu_ui.Label,{for:"data-view-setting-max-records",className:"label"},this.props.intl.formatMessage({id:"maximum",defaultMessage:jimu_ui.defaultMessages.maximum})),(0,jimu_core.Yac)(jimu_ui.Switch,{id:"data-view-setting-max-records",checked:"number"==typeof dataView.maximum,onChange:this.onToggleMaximum})),"number"==typeof dataView.maximum&&(0,jimu_core.Yac)("div",{className:"d-flex justify-content-between mb-4"},(0,jimu_core.Yac)(jimu_ui.Label,{for:"data-view-setting-max-records-hint",className:"label"},this.props.intl.formatMessage({id:"maximumLimitationWarning",defaultMessage:jimu_ui.defaultMessages.maximumLimitationWarning})),(0,jimu_core.Yac)(jimu_ui.Link,{to:"https://developers.arcgis.com/javascript/latest/api-reference/esri-views-layers-FeatureLayerView.html#maximumNumberOfFeatures",className:"ml-2 jimu-outline-inside",target:"_blank",id:"data-view-setting-max-records-hint"},this.props.intl.formatMessage({id:"details",defaultMessage:jimu_ui.defaultMessages.details}))),"number"==typeof dataView.maximum&&(0,jimu_core.Yac)("div",{className:"d-flex justify-content-between mb-4"},(0,jimu_core.Yac)(jimu_ui.Label,{for:"data-view-setting-max-records-num",className:"label"},this.props.intl.formatMessage({id:"maximumRecordCount",defaultMessage:jimu_ui.defaultMessages.maximumRecordCount})),(0,jimu_core.Yac)(jimu_ui.NumericInput,{size:"sm",value:dataView.maximum,onAcceptValue:this.onMaximumChange,precision:0,min:1,showHandlers:!1,id:"data-view-setting-max-records-num"})))))),(0,jimu_core.Yac)("div",{className:"w-62 h-100 flex-grow-1 preview-table"},this.getPreviewTable(this.getLocalDataSource(),this.state.previewTableRecords,null===(_d=this.props.dataView)||void 0===_d?void 0:_d.label),(!this.state.isLocalDataSourceCreated||!this.state.isLocalDataSourceLoaded)&&(0,jimu_core.Yac)(jimu_ui.Loading,{type:jimu_ui.LoadingType.Primary}))):null,(0,jimu_core.Yac)(jimu_ui.ModalFooter,{className:"d-flex justify-content-between pb-30"},(0,jimu_core.Yac)("div",null,!isSqlValid&&(0,jimu_core.Yac)("div",{className:"sql-exp-warning text-truncate",title:this.props.intl.formatMessage({id:"sqlExprIncomplete",defaultMessage:jimu_ui.defaultMessages.sqlExprIncomplete})},(0,jimu_core.Yac)(warning_circle.$,{size:"l",className:"sql-exp-warning-icon mr-2"}),this.props.intl.formatMessage({id:"sqlExprIncomplete",defaultMessage:jimu_ui.defaultMessages.sqlExprIncomplete}))),(0,jimu_core.Yac)("div",null,(0,jimu_core.Yac)(jimu_ui.Button,{className:"mr-2",type:"primary",onClick:this.onApply,disabled:!isSqlValid,title:apply,"aria-label":apply},apply),(0,jimu_core.Yac)(jimu_ui.Button,{type:"default",onClick:this.props.toggle,title:cancel,"aria-label":cancel},cancel)))),(0,jimu_core.Yac)(data_source_remove_warning_popup_DataSourceRemoveWarningPopup,{dataSourceId:dataViewDsId,isOpen:this.state.isRemoveWarningOpen,afterRemove:this.afterRemove,toggle:this.toggleRemoveWarning,reason:data_source_remove_warning_popup_DataSourceRemoveWaringReason.DataSourceRemoved}))}}_DataViewSettingPopup.count=-1;const __DataViewSettingPopup=jimu_core.E_S.connect(((state,ownProps)=>{var _a,_b,_c,_d;return{widgets:(null===(_a=null==state?void 0:state.appContext)||void 0===_a?void 0:_a.isBuilder)?null===(_c=null===(_b=null==state?void 0:state.appStateInBuilder)||void 0===_b?void 0:_b.appConfig)||void 0===_c?void 0:_c.widgets:null===(_d=null==state?void 0:state.appConfig)||void 0===_d?void 0:_d.widgets}}))(_DataViewSettingPopup),data_view_setting_popup_DataViewSettingPopup=(0,jimu_theme.Xy)((0,jimu_core.j4T)(__DataViewSettingPopup),"DataViewSettingPopup");try{data_view_setting_popup_DataViewSettingPopup.displayName="DataViewSettingPopup",data_view_setting_popup_DataViewSettingPopup.__docgenInfo={description:"",displayName:"DataViewSettingPopup",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},toggle:{defaultValue:null,description:"",name:"toggle",required:!0,type:{name:"() => void"}},disableRemove:{defaultValue:null,description:"",name:"disableRemove",required:!1,type:{name:"boolean"}},mainDataSource:{defaultValue:null,description:"",name:"mainDataSource",required:!0,type:{name:"DataSource"}},dataView:{defaultValue:null,description:"",name:"dataView",required:!0,type:{name:"IMDataViewJson"}},isSettingMainDataSource:{defaultValue:null,description:"Whether is setting main data source or data view.",name:"isSettingMainDataSource",required:!1,type:{name:"boolean"}},disableRename:{defaultValue:null,description:"",name:"disableRename",required:!1,type:{name:"boolean"}},disableDuplicate:{defaultValue:null,description:"",name:"disableDuplicate",required:!1,type:{name:"boolean"}},newDataViewId:{defaultValue:null,description:"If there is no data view, will create a new data view using this value as data view id.",name:"newDataViewId",required:!1,type:{name:"string"}},newDataViewLabel:{defaultValue:null,description:"If there is no data view, will create a new data view using this value as data view label.",name:"newDataViewLabel",required:!1,type:{name:"string"}},onApply:{defaultValue:null,description:"",name:"onApply",required:!0,type:{name:"(dataView: IMDataViewJson) => void"}},onDuplicate:{defaultValue:null,description:"",name:"onDuplicate",required:!1,type:{name:"(dataView: IMDataViewJson) => void"}},afterRemove:{defaultValue:null,description:"Will call this function after removing data view.",name:"afterRemove",required:!1,type:{name:"(dataView: IMDataViewJson) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/data-view-setting-popup.tsx#DataViewSettingPopup"]={docgenInfo:data_view_setting_popup_DataViewSettingPopup.__docgenInfo,name:"DataViewSettingPopup",path:"../jimu-ui/advanced/lib/data-source-selector/components/data-view-setting-popup.tsx#DataViewSettingPopup"})}catch(__react_docgen_typescript_loader_error){}var setting=__webpack_require__("../jimu-icons/outlined/application/setting.tsx");class added_ds_item_DsItem extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.__unmount=!1,this.widthForDropdownItem={width:"calc(100% - 30px)"},this.widthForDropdownItemLabel={width:"calc(100% - 40px)"},this.widthForMultiDropdownItemLabel={width:"calc(100% - 60px)"},this.dropdownNode=jimu_core.q_G.createRef(),this.onRemove=e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation();const dsId=this.props.mainDataSourceId;window.isExpressBuilder&&isMapWidget(this.props.widgetId)&&Promise.all([__webpack_require__.e(9530),__webpack_require__.e(6448),__webpack_require__.e(7568),__webpack_require__.e(2922),__webpack_require__.e(6428)]).then(__webpack_require__.bind(__webpack_require__,"../jimu-for-builder/index.tsx")).then((m=>{m.getAppConfigAction().removeUseDataSource(dsId).exec()}));const{onRemove}=this.props;onRemove&&onRemove(dsId)},this.onDataViewChange=dataViewId=>{if(!dataViewId||"create_a_view"===dataViewId)return;const changedDataView=this.getAllDataViews()[dataViewId],newDataViews=(0,jimu_core.J3Z)([changedDataView.asMutable({deep:!0})]);this.onChange(this.props.mainDataSourceId,newDataViews)},this.onDataViewKeyDown=(dataViewId,evt)=>{evt.target!==evt.currentTarget||"Enter"!==evt.key&&" "!==evt.key||this.onDataViewChange(dataViewId)},this.onMultiDataViewChange=(e,value)=>{if(!value||"create_a_view"===value)return;const changedDataView=this.getAllDataViews()[value],dataViews=this.props.dataViews||(0,jimu_core.J3Z)([]),newDataViews=this.props.dataViews&&this.props.dataViews.find((v=>v.id===changedDataView.id))?dataViews.filter((v=>v.id!==changedDataView.id)):dataViews.concat(changedDataView);this.onChange(this.props.mainDataSourceId,newDataViews)},this.onChange=(mainDataSourceId,dataViews)=>{this.props.hideRemove&&!(null==dataViews?void 0:dataViews.length)||this.props.onChange(mainDataSourceId,dataViews)},this.formatMessage=(id,values)=>{const messages=Object.assign({},jimu_ui.defaultMessages);return this.props.intl.formatMessage({id,defaultMessage:messages[id]},values)},this.getDsLabel=dataSourceId=>{const dsObj=this.getDsObj(dataSourceId);return dsObj&&dsObj.getLabel()||this.formatMessage("none")},this.getWhetherItemError=(dataSourceId,rootDataSourceId)=>{var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m;const rootDoNotHaveTheChild=(null===(_c=null===(_b=null===(_a=(0,jimu_core.Vp3)().getState().appStateInBuilder)||void 0===_a?void 0:_a.dataSourcesInfo)||void 0===_b?void 0:_b[rootDataSourceId])||void 0===_c?void 0:_c.instanceStatus)===jimu_core.e3_.Created&&!(null===(_f=null===(_e=null===(_d=(0,jimu_core.Vp3)().getState().appStateInBuilder)||void 0===_d?void 0:_d.dataSourcesInfo)||void 0===_e?void 0:_e[dataSourceId])||void 0===_f?void 0:_f.instanceStatus),rootCreatedError=(null===(_j=null===(_h=null===(_g=(0,jimu_core.Vp3)().getState().appStateInBuilder)||void 0===_g?void 0:_g.dataSourcesInfo)||void 0===_h?void 0:_h[rootDataSourceId])||void 0===_j?void 0:_j.instanceStatus)===jimu_core.e3_.CreateError,dsCreatedError=!("string"==typeof dataSourceId&&"undefined"!==dataSourceId)||(null===(_m=null===(_l=null===(_k=(0,jimu_core.Vp3)().getState().appStateInBuilder)||void 0===_k?void 0:_k.dataSourcesInfo)||void 0===_l?void 0:_l[dataSourceId])||void 0===_m?void 0:_m.instanceStatus)===jimu_core.e3_.CreateError;return rootDoNotHaveTheChild||rootCreatedError||dsCreatedError},this.getAllDataViews=()=>{if(!this.props.mainDataSourceId)return null;const dsObj=jimu_core.zAk.getInstance().getDataSource(this.props.mainDataSourceId);if(!jimu_core.ZkX.doesDsSupportQuery(dsObj))return null;const dataSourceJson=dsObj.getDataSourceJson();let dataViews=(null==dataSourceJson?void 0:dataSourceJson.dataViews)||(0,jimu_core.J3Z)({});dataViews=dataViews.set(this.props.DefaultDataView.id,(null==dataSourceJson?void 0:dataSourceJson.query)?dataSourceJson.query.merge(this.props.DefaultDataView.asMutable({deep:!0})):this.props.DefaultDataView);const selectionDataView={id:jimu_core.aH5.W7,label:this.props.intl.formatMessage({id:"selectionDataView",defaultMessage:jimu_ui.defaultMessages.selectionDataView})};dataViews=dataViews.set(jimu_core.aH5.W7,selectionDataView),dataViews=dataViews.without(jimu_core.aH5.kf),dataViews=dataViews.without(jimu_core.aH5.VA);const hideDataView="function"==typeof this.props.hideDataView?this.props.hideDataView:null;return hideDataView&&Object.values(dataViews).forEach((dv=>{hideDataView(dv,this.props.mainDataSourceId)&&(dataViews=dataViews.without(dv.id))})),dataViews},this.getMultiSelectItems=dataViews=>{if(!this.props.mainDataSourceId)return(0,jimu_core.J3Z)([]);const res=[];dataViews&&Object.keys(dataViews).forEach((vId=>{res.push({value:vId,label:dataViews[vId].label,render:(item,values)=>(0,jimu_core.Yac)("div",{className:"d-flex w-100 align-items-center justify-content-start w-100"},(0,jimu_core.Yac)(jimu_ui.Checkbox,{checked:this.getSelectedValueForMutiSelect().includes(item.value)}),(0,jimu_core.Yac)("div",{className:"ml-2 text-truncate",style:this.widthForMultiDropdownItemLabel,title:dataViews[vId].label},dataViews[vId].label),this.getWhetherAllowToChangeViewSetting(vId)&&(0,jimu_core.Yac)(jimu_ui.Button,{type:"tertiary",icon:!0,disableHoverEffect:!0,disableRipple:!0,size:"sm",className:"px-2 py-0",onClick:e=>{this.onDataViewClick(e,dataViews[vId])},title:this.props.intl.formatMessage({id:"settings",defaultMessage:jimu_ui.defaultMessages.settings})},(0,jimu_core.Yac)(setting.J,{size:"s"})))})}));return this.getWhetherAllowToCreateView()&&!jimu_core.zAk.getInstance().getDataSource(this.props.mainDataSourceId).isDataSourceSet()&&res.push({value:"create_a_view",render:()=>this.getCreateViewButton()}),(0,jimu_core.J3Z)(res)},this.getCreateViewButton=()=>(0,jimu_core.Yac)(jimu_ui.Button,{type:"tertiary",disableHoverEffect:!0,disableRipple:!0,block:!0,size:"sm",onClick:this.onCreateViewClick,className:"p-0 justify-content-start flex-shrink-1"},(0,jimu_core.Yac)(plus.b,{size:"s",className:"mr-1"}),(0,jimu_core.Yac)("span",null,this.formatMessage("createAView")),(0,jimu_core.Yac)("div",{className:"create-view-button-border"})),this.getSelectedValueForSingleSelect=()=>{var _a;return this.props.dataViews&&this.props.dataViews.length>0?null===(_a=this.props.dataViews[0])||void 0===_a?void 0:_a.id:this.props.DefaultDataView.id},this.getSelectedValueForMutiSelect=()=>this.props.dataViews&&this.props.dataViews.length>0?this.props.dataViews.map((v=>v.id)):(0,jimu_core.J3Z)([this.props.DefaultDataView.id]),this.getMultiSelectSelectedString=values=>{if(values)return this.formatMessage("numSelected",{number:values.length})},this.onDataViewClick=(e,dataView)=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),this.setState({settingDataView:dataView,isViewSelectOpen:!1}),this.toggleViewSetting()},this.onCreateViewClick=()=>{this.setState({settingDataView:null}),this.toggleViewSetting()},this.onCreateViewKeyDown=evt=>{evt.target!==evt.currentTarget||"Enter"!==evt.key&&" "!==evt.key||this.onCreateViewClick()},this.toggleViewSetting=()=>{this.setState({isViewSettingOpen:!this.state.isViewSettingOpen})},this.toggleViewSelect=()=>{this.setState({isViewSelectOpen:!this.state.isViewSelectOpen})},this.stopPropagation=e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},this.onDataViewSettingApply=dataView=>{dataView.id===this.props.DefaultDataView.id?this.editQuery(dataView):this.editDataView(dataView)},this.editQuery=dataView=>{if(!dataView)return;const getAppConfigAction=this.state.getAppConfigAction;if(!getAppConfigAction)return;const dsObj=jimu_core.zAk.getInstance().getDataSource(this.props.mainDataSourceId),dsJson=dsObj&&dsObj.getDataSourceJson();if(!dsJson)return;const rootDsJson=editDataSourceJson(dsJson.setIn(["query"],(null==dsJson?void 0:dsJson.query)?dsJson.query.merge(dataView.without("id").without("label").asMutable({deep:!0})):dataView.set("id","default").set("label",dsObj.getLabel())));getAppConfigAction().editDataSource(rootDsJson).exec(),dsObj.addSourceVersion(),this.toggleViewSetting()},this.editDataView=dataView=>{if(!dataView)return;const getAppConfigAction=this.state.getAppConfigAction;if(!getAppConfigAction)return;const dsObj=jimu_core.zAk.getInstance().getDataSource(this.props.mainDataSourceId),dsJson=dsObj&&dsObj.getDataSourceJson();let dataViews=dsJson.dataViews||(0,jimu_core.J3Z)({});dataViews=dataViews.set(dataView.id,dataView);const rootDsJson=editDataSourceJson(dsJson.setIn(["dataViews"],dataViews));getAppConfigAction().editDataSource(rootDsJson).exec(),dsObj.getDataView(null==dataView?void 0:dataView.id)?(this.setState({settingDataView:dataView}),dsObj.addSourceVersion(),this.toggleViewSetting()):jimu_core.zAk.getInstance().createDataSource(dsJson,dataView.id).then((()=>{this.__unmount||(this.setState({settingDataView:dataView}),this.toggleViewSetting())}))},this.getWhetherAllowToCreateView=()=>{if(this.props.hideCreateViewButton)return!1;const dsObj=jimu_core.zAk.getInstance().getDataSource(this.props.mainDataSourceId);return jimu_core.ZkX.doesDsSupportQuery(dsObj)&&!dsObj.getDataSourceJson().isOutputFromWidget},this.getWhetherAllowToChangeViewSetting=vId=>{var _a;if(vId===jimu_core.aH5.W7)return!1;const mainDs=jimu_core.zAk.getInstance().getDataSource(this.props.mainDataSourceId);return!(null===(_a=null==mainDs?void 0:mainDs.getDataSourceJson())||void 0===_a?void 0:_a.isOutputFromWidget)},this.onClick=()=>{this.props.onClick&&this.props.onClick(this.props.mainDataSourceId)},this.onKeyDown=evt=>{evt.target!==evt.currentTarget||"Enter"!==evt.key&&" "!==evt.key||this.onClick()},this.afterRemoveDataView=dataView=>{var _a;(null===(_a=this.props.dataViews)||void 0===_a?void 0:_a.some((v=>v.id===dataView.id)))&&this.onDataViewChange(DEFAULT_DATA_VIEW_ID)},this.getDsObj=mainDsId=>{var _a;let ds=jimu_core.zAk.getInstance().getDataSource(mainDsId);return(null===(_a=null==ds?void 0:ds.getDataSourceJson())||void 0===_a?void 0:_a.isOutputFromWidget)&&(ds=ds.getMainDataSource().getDataView(jimu_core.aH5.VA)),ds},this.state={isViewSettingOpen:!1,isViewSelectOpen:!1,settingDataView:null,getAppConfigAction:null}}componentDidMount(){this.__unmount=!1,Promise.all([__webpack_require__.e(9530),__webpack_require__.e(6448),__webpack_require__.e(7568),__webpack_require__.e(2922),__webpack_require__.e(6428)]).then(__webpack_require__.bind(__webpack_require__,"../jimu-for-builder/index.tsx")).then((JimuForBuilder=>{this.__unmount||this.setState({getAppConfigAction:JimuForBuilder.getAppConfigAction})}))}componentDidUpdate(prevProps,prevState){prevState.isViewSettingOpen&&!this.state.isViewSettingOpen&&setTimeout((()=>{var _a;(0,jimu_core.u02)(null===(_a=this.dropdownNode)||void 0===_a?void 0:_a.current)}),200)}componentWillUnmount(){this.__unmount=!0}render(){var _a,_b,_c,_d,_e,_f,_g;const mainDataSourceId=this.props.mainDataSourceId;if(!mainDataSourceId)return null;const dsObj=this.getDsObj(mainDataSourceId),dataSourceJson=null==dsObj?void 0:dsObj.getDataSourceJson(),rootDataSourceId=this.props.rootDataSourceId||mainDataSourceId,isDataInConfig=null===(_b=null===(_a=getAppConfig())||void 0===_a?void 0:_a.dataSources)||void 0===_b?void 0:_b[rootDataSourceId],isDataError=this.getWhetherItemError(mainDataSourceId,rootDataSourceId),isLoadingShown=!dsObj&&isDataInConfig&&!isDataError,allowToSelectMultipleDataViews=this.props.isMultiple&&"boolean"!=typeof this.props.isMultipleDataView||this.props.isMultipleDataView,closeIconComponent=(0,jimu_core.Yac)(jimu_ui.Button,{icon:!0,size:"sm",type:"tertiary",disableHoverEffect:!0,disableRipple:!0,title:this.formatMessage("remove"),onClick:this.onRemove,className:"ds-item-close"},(0,jimu_core.Yac)(editor_close.r,{size:"s"})),allowToCreateView=this.getWhetherAllowToCreateView(),showDataViewDropdown=!0!==this.props.hideDataView&&!window.isExpressBuilder,dataViews=showDataViewDropdown&&this.getAllDataViews(),dsLabel=this.getDsLabel(mainDataSourceId);return(0,jimu_core.Yac)("div",{className:this.props.className?`w-100 added-ds-item ${this.props.className}`:"w-100 added-ds-item"},isLoadingShown&&(0,jimu_core.Yac)("div",{className:"loading-container"},(0,jimu_core.Yac)(jimu_ui.Loading,{type:jimu_ui.LoadingType.Bar})),isLoadingShown&&(0,jimu_core.Yac)("div",{className:"loading-placeholder",onClick:this.onClick,onKeyDown:this.onKeyDown,role:"menuitem",tabIndex:0,ref:this.props.innerRef,"aria-label":dsLabel},(0,jimu_core.Yac)("div",{className:"first-line d-flex align-items-center justify-content-between mb-2 pb-1"},(0,jimu_core.Yac)("div",{className:"first-line-left mr-2"}),(0,jimu_core.Yac)("div",{className:"first-line-right flex-grow-1"})),(0,jimu_core.Yac)("div",{className:"second-line w-100"})),!isLoadingShown&&(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)("ds-item",{"ds-error-item":isDataError,"disable-cursor":this.props.disableDataSourceList}),onClick:this.onClick,onKeyDown:this.onKeyDown,role:"menuitem",tabIndex:0,ref:this.props.innerRef,"aria-label":dsLabel},(0,jimu_core.Yac)("div",{className:"d-flex align-items-center w-100 item"},(0,jimu_core.Yac)("div",{className:"d-flex align-items-center justify-content-center flex-shrink-0 ds-thumbnail"},(0,jimu_core.Yac)(jimu_ui.Icon,{icon:jimu_core.ZkX.getDsIcon(dataSourceJson),className:"text-default",size:"12"})),(0,jimu_core.Yac)("div",{className:"flex-grow-1 text-truncate pl-2 ds-type"},(0,jimu_core.Yac)("div",{className:"text-truncate ds-type-name",title:dsLabel},dsLabel)),!this.props.hideRemove&&closeIconComponent),showDataViewDropdown&&dataViews&&Object.keys(dataViews).length>0&&(0,jimu_core.Yac)("div",{className:"dv-select-container"},allowToSelectMultipleDataViews?(0,jimu_core.Yac)(jimu_ui.MultiSelect,{isOpen:this.state.isViewSelectOpen,toggle:this.toggleViewSelect,fluid:!0,items:this.getMultiSelectItems(dataViews),onClickItem:this.onMultiDataViewChange,values:this.getSelectedValueForMutiSelect(),"aria-label":this.formatMessage("selectADataView"),buttonProps:{disabled:this.props.disableDataView||isDataError,arrow:!this.props.disableDataView,innerRef:this.dropdownNode},displayByValues:this.getMultiSelectSelectedString,menuItemProps:{tag:"div"},size:"sm",autoWidth:!0}):(0,jimu_core.Yac)(jimu_ui.Dropdown,{fluid:!0,activeIcon:!0,autoWidth:!0,onClick:this.stopPropagation,isOpen:this.state.isViewSelectOpen,toggle:this.toggleViewSelect,disabled:this.props.disableDataView||isDataError,"aria-label":this.formatMessage("selectADataView"),menuItemCheckMode:"singleCheck",supportInsideNodesAccessible:!0},(0,jimu_core.Yac)(jimu_ui.DropdownButton,{onClick:this.toggleViewSelect,type:"tertiary",className:"data-view-dropdown-menu-button",size:"sm",arrow:!this.props.disableDataView,innerRef:this.dropdownNode},null===(_c=dataViews[this.getSelectedValueForSingleSelect()])||void 0===_c?void 0:_c.label),(0,jimu_core.Yac)(jimu_ui.DropdownMenu,null,Object.values(dataViews).map(((v,i)=>(0,jimu_core.Yac)(jimu_ui.DropdownItem,{key:i,tag:"div",tabIndex:0,onClick:()=>{this.onDataViewChange(v.id)},onKeyDown:e=>{this.onDataViewKeyDown(v.id,e)},active:this.getSelectedValueForSingleSelect()===v.id},(0,jimu_core.Yac)("div",{className:"d-flex justify-content-between align-items-center",style:this.widthForDropdownItem},(0,jimu_core.Yac)("div",{className:"text-truncate",title:v.label,style:this.widthForDropdownItemLabel},v.label),this.state.isViewSelectOpen&&this.getWhetherAllowToChangeViewSetting(v.id)&&(0,jimu_core.Yac)(jimu_ui.Button,{type:"tertiary",disableHoverEffect:!0,disableRipple:!0,size:"sm",icon:!0,className:"px-2 settings-icon py-0",onClick:e=>{this.onDataViewClick(e,v)},title:this.props.intl.formatMessage({id:"settings",defaultMessage:jimu_ui.defaultMessages.settings})},(0,jimu_core.Yac)(setting.J,{size:"s"})))))),allowToCreateView&&!jimu_core.zAk.getInstance().getDataSource(this.props.mainDataSourceId).isDataSourceSet()&&(0,jimu_core.Yac)(jimu_ui.DropdownItem,{tag:"div",onKeyDown:this.onCreateViewKeyDown,className:"create-view-button"},this.getCreateViewButton()))))),allowToCreateView&&(0,jimu_core.Yac)(data_view_setting_popup_DataViewSettingPopup,{isOpen:this.state.isViewSettingOpen,toggle:this.toggleViewSetting,onApply:this.onDataViewSettingApply,onDuplicate:this.onDataViewSettingApply,afterRemove:this.afterRemoveDataView,mainDataSource:dsObj,dataView:this.state.settingDataView,isSettingMainDataSource:(null===(_d=this.state.settingDataView)||void 0===_d?void 0:_d.id)===this.props.DefaultDataView.id,disableDuplicate:!this.state.settingDataView||(null===(_e=this.state.settingDataView)||void 0===_e?void 0:_e.id)===this.props.DefaultDataView.id,disableRemove:!this.state.settingDataView||(null===(_f=this.state.settingDataView)||void 0===_f?void 0:_f.id)===this.props.DefaultDataView.id,disableRename:(null===(_g=this.state.settingDataView)||void 0===_g?void 0:_g.id)===this.props.DefaultDataView.id}))}}try{addeddsitem.displayName="addeddsitem",addeddsitem.__docgenInfo={description:"",displayName:"addeddsitem",props:{mainDataSourceId:{defaultValue:null,description:"",name:"mainDataSourceId",required:!0,type:{name:"string"}},dataViews:{defaultValue:null,description:"Selected data views.",name:"dataViews",required:!0,type:{name:"ImmutableArray<DataViewJson>"}},intl:{defaultValue:null,description:"",name:"intl",required:!0,type:{name:"IntlShape"}},DefaultDataView:{defaultValue:null,description:"",name:"DefaultDataView",required:!0,type:{name:"IMDataViewJson"}},rootDataSourceId:{defaultValue:null,description:"",name:"rootDataSourceId",required:!0,type:{name:"string"}},widgetId:{defaultValue:null,description:"",name:"widgetId",required:!0,type:{name:"string"}},innerRef:{defaultValue:null,description:"",name:"innerRef",required:!1,type:{name:"RefObject<HTMLDivElement>"}},isMultiple:{defaultValue:null,description:"",name:"isMultiple",required:!1,type:{name:"boolean"}},isMultipleDataView:{defaultValue:null,description:"",name:"isMultipleDataView",required:!1,type:{name:"boolean"}},disableDataSourceList:{defaultValue:null,description:"",name:"disableDataSourceList",required:!1,type:{name:"boolean"}},disableDataView:{defaultValue:null,description:"",name:"disableDataView",required:!1,type:{name:"boolean"}},hideCreateViewButton:{defaultValue:null,description:"",name:"hideCreateViewButton",required:!1,type:{name:"boolean"}},hideDataView:{defaultValue:null,description:"",name:"hideDataView",required:!1,type:{name:"boolean | ((dataViewJson: IMDataViewJson, mainDataSourceId: string) => boolean)"}},hideRemove:{defaultValue:null,description:"",name:"hideRemove",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(mainDataSourceId: string, dataViews: ImmutableArray<DataViewJson>) => void"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!1,type:{name:"(mainDataSourceId: string) => void"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(mainDataSourceId: string) => void"}},theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:"IMThemeVariables"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/data-source-selector/components/added-ds-item.tsx#addeddsitem"]={docgenInfo:addeddsitem.__docgenInfo,name:"addeddsitem",path:"../jimu-ui/advanced/lib/data-source-selector/components/data-source-selector/components/added-ds-item.tsx#addeddsitem"})}catch(__react_docgen_typescript_loader_error){}class _SetDsBtnDsList extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.__unmount=!1,this.DefaultDataView=(0,jimu_core.J3Z)({id:DEFAULT_DATA_VIEW_ID,label:this.props.intl.formatMessage({id:"default",defaultMessage:jimu_ui.defaultMessages.default})}),this.sidePopperTrigger=jimu_core.q_G.createRef(),this.backToFocusNode=jimu_core.q_G.createRef(),this.changeInitStatus=isInited=>{this.setState({isDataSourceInited:isInited})},this.getIsLoading=dsId=>{var _a;const dsInfo=null===(_a=this.props.dataSourcesInfo)||void 0===_a?void 0:_a[dsId];if(!dsInfo)return!1;if(dsInfo.instanceStatus===jimu_core.e3_.CreateError)return!1;if(dsInfo.instanceStatus===jimu_core.e3_.Created){const ds=jimu_core.zAk.getInstance().getDataSource(dsId);return!!(null==ds?void 0:ds.isDataSourceSet())&&!ds.areChildDataSourcesCreated()}return!0},this.disableSelection=()=>{if(this.props.disableSelection){const useDataSources=this.props.useDataSources||(0,jimu_core.J3Z)([]);return this.props.disableSelection(useDataSources.asMutable({deep:!0}))}return!1},this.disableRemove=()=>{if(this.props.disableRemove){const useDataSources=this.props.useDataSources||(0,jimu_core.J3Z)([]);return this.props.disableRemove(useDataSources.asMutable({deep:!0}))}return!1},this.onModalClose=()=>{this.setState({modalType:"none"})},this.onMainDsChanged=useDataSources=>{useDataSources&&(this.props.onChange&&this.props.onChange(useDataSources),setTimeout((()=>{this.props.closeDataSourceListOnChange&&this.setState({modalType:"none"})}),200))},this.onMainDsRemoved=mainDataSourceId=>{if(!mainDataSourceId||!this.props.useDataSources)return;const useDataSources=this.props.useDataSources.filter((useDs=>(null==useDs?void 0:useDs.mainDataSourceId)+""!==mainDataSourceId));this.props.onChange&&this.props.onChange(useDataSources.asMutable({deep:!0}))},this.onDataViewChanged=(mainDataSourceId,dataViews)=>{if(!mainDataSourceId||!this.props.useDataSources)return;const useDs=(0,jimu_core.J3Z)(this.props.useDataSources.find((u=>u.mainDataSourceId===mainDataSourceId))||{dataSourceId:mainDataSourceId,mainDataSourceId}).without("fields","useFieldsInPopupInfo","useFieldsInSymbol"),newUseDataSources=dataViews.map((v=>{var _a;if(v.id===DEFAULT_DATA_VIEW_ID){const mainDs=jimu_core.zAk.getInstance().getDataSource(mainDataSourceId);if(null===(_a=null==mainDs?void 0:mainDs.getDataSourceJson())||void 0===_a?void 0:_a.isOutputFromWidget){const dsId=jimu_core.zAk.getInstance().getDataViewDataSourceId(mainDataSourceId,jimu_core.aH5.VA),dataViewId=jimu_core.aH5.VA,previousUseDs=this.props.useDataSources.find((u=>u.dataSourceId===dsId));return previousUseDs||useDs.set("dataSourceId",dsId).set("dataViewId",dataViewId).asMutable({deep:!0})}{const previousUseDs=this.props.useDataSources.find((u=>u.dataSourceId===mainDataSourceId));return previousUseDs||useDs.without("dataViewId").set("dataSourceId",mainDataSourceId).asMutable({deep:!0})}}{const dataSourceId=jimu_core.zAk.getInstance().getDataViewDataSourceId(mainDataSourceId,v.id),previousUseDs=this.props.useDataSources.find((u=>u.dataSourceId===dataSourceId));return previousUseDs||useDs.set("dataViewId",v.id).set("dataSourceId",dataSourceId).asMutable({deep:!0})}})),useDataSources=this.props.useDataSources.filter((useDs=>(null==useDs?void 0:useDs.mainDataSourceId)!==mainDataSourceId)).concat(newUseDataSources);this.props.onChange&&this.props.onChange(useDataSources.asMutable({deep:!0}))},this.toggleDsList=()=>{this.props.disableDataSourceList||this.setState({modalType:"ds"===this.state.modalType?"none":"ds"})},this.getWhetherShowPlaceholder=()=>{var _a;if(null===(_a=this.props.useDataSources)||void 0===_a?void 0:_a.some((useDs=>!jimu_core.zAk.getInstance().getDataSource(useDs.dataSourceId))))return!0;if(this.props.disableSelection){const useDataSources=this.props.useDataSources||(0,jimu_core.J3Z)([]);return!this.props.disableSelection(useDataSources.asMutable({deep:!0}))}return this.props.isMultiple||!this.props.isMultiple&&(!this.props.useDataSources||0===this.props.useDataSources.filter((useDs=>!!useDs)).length)},this.groupUseDssByMainDataSource=useDataSources=>{if(!useDataSources||0===useDataSources.length)return null;const res={};return useDataSources.forEach((u=>{if(res[u.mainDataSourceId]||(res[u.mainDataSourceId]=(0,jimu_core.J3Z)([])),u.dataViewId===jimu_core.aH5.W7)res[u.mainDataSourceId]=res[u.mainDataSourceId].concat({id:jimu_core.aH5.W7,label:this.props.intl.formatMessage({id:"selectionDataView",defaultMessage:jimu_ui.defaultMessages.selectionDataView})});else if(u.dataViewId===jimu_core.aH5.VA)res[u.mainDataSourceId]=res[u.mainDataSourceId].concat(this.DefaultDataView);else if(u.dataViewId){const dsObj=jimu_core.zAk.getInstance().getDataSource(u.mainDataSourceId),dataSourceJson=dsObj&&dsObj.getDataSourceJson(),dataViews=dataSourceJson&&dataSourceJson.dataViews;(null==dataViews?void 0:dataViews[u.dataViewId])&&(res[u.mainDataSourceId]=res[u.mainDataSourceId].concat(dataViews[u.dataViewId]))}else res[u.mainDataSourceId]=res[u.mainDataSourceId].concat(this.DefaultDataView)})),res},this.onDsItemClick=mainDsId=>{this.toggleDsList()},this.getIsDsListOpen=()=>"ds"===this.state.modalType&&!jimu_core.v6q.getAppIdPageIdFromUrl().pageId,this.onSelectDataKeyDown=evt=>{evt.target!==evt.currentTarget||"Enter"!==evt.key&&" "!==evt.key||this.toggleDsList()},this.state={isDataSourceInited:getWhetherDataSourceIsInited(this.props.dataSources,this.props.dataSourcesInfo),modalType:"none",SidePopper:null}}componentDidMount(){this.__unmount=!1,Promise.all([__webpack_require__.e(9530),__webpack_require__.e(3162),__webpack_require__.e(9294),__webpack_require__.e(6448),__webpack_require__.e(7568),__webpack_require__.e(2922),__webpack_require__.e(6428),__webpack_require__.e(5233),__webpack_require__.e(3212),__webpack_require__.e(8007),__webpack_require__.e(1623),__webpack_require__.e(5091)]).then(__webpack_require__.bind(__webpack_require__,"../jimu-ui/advanced/setting-components.tsx")).then((SettingComponents=>{this.__unmount||this.setState({SidePopper:SettingComponents.SidePopper})}))}componentWillUnmount(){this.__unmount=!0}componentDidUpdate(prevProps){if(!jimu_core.CM0.isDeepEqual(this.props.dataSources,prevProps.dataSources)||!jimu_core.CM0.isDeepEqual(this.props.dataSourcesInfo,prevProps.dataSourcesInfo)){const isInited=getWhetherDataSourceIsInited(this.props.dataSources,this.props.dataSourcesInfo);this.changeInitStatus(isInited),isInited||this.props.dataSourcesInfo&&Object.keys(this.props.dataSourcesInfo).forEach((dsId=>{this.getIsLoading(dsId)&&this.waitForChildDataSourcesReady(dsId).finally((()=>{this.changeInitStatus(getWhetherDataSourceIsInited(this.props.dataSources,this.props.dataSourcesInfo))}))}))}}waitForChildDataSourcesReady(dsId){const ds=jimu_core.zAk.getInstance().getDataSource(dsId);return(null==ds?void 0:ds.isDataSourceSet())&&!ds.areChildDataSourcesCreated()?ds.childDataSourcesReady().then((()=>ds)).catch((err=>ds)):Promise.resolve(ds)}render(){const SidePopper=this.state.SidePopper,showPlaceholder=this.getWhetherShowPlaceholder(),groupedUseDss=this.groupUseDssByMainDataSource(this.props.useDataSources),selectDataLabel=this.props.buttonLabel||this.props.intl.formatMessage({id:"setDataSource",defaultMessage:jimu_ui.defaultMessages.setDataSource}),groupedUseDssLength=groupedUseDss?Object.keys(groupedUseDss).length:0,sidePopperTrigger=[],ariaLabel=this.props["aria-label"]||this.props.intl.formatMessage({id:"data",defaultMessage:jimu_ui.defaultMessages.data});return this.sidePopperTrigger.current&&sidePopperTrigger.push(this.sidePopperTrigger.current),this.props.sidePopperTrigger&&(Array.isArray(this.props.sidePopperTrigger)?sidePopperTrigger.push(...this.props.sidePopperTrigger):sidePopperTrigger.push(this.props.sidePopperTrigger)),(0,jimu_core.Yac)("div",{className:"w-100",ref:this.sidePopperTrigger,role:"menu","aria-label":ariaLabel},groupedUseDss&&Object.keys(groupedUseDss).sort(((d1,d2)=>null==d1?void 0:d1.localeCompare(d2))).map(((mainDataSourceId,index)=>{var _a,_b;return mainDataSourceId?(0,jimu_core.Yac)(added_ds_item_DsItem,{key:index,mainDataSourceId,onRemove:this.onMainDsRemoved,intl:this.props.intl,hideRemove:this.disableRemove(),theme:this.props.theme,disableDataSourceList:this.props.disableDataSourceList,onClick:this.onDsItemClick,className:(showPlaceholder||index!==groupedUseDssLength-1)&&"mb-4",onChange:this.onDataViewChanged,disableDataView:this.props.disableDataView,isMultiple:this.props.isMultiple,rootDataSourceId:null===(_b=null===(_a=this.props.useDataSources)||void 0===_a?void 0:_a.find((u=>u.mainDataSourceId===mainDataSourceId)))||void 0===_b?void 0:_b.rootDataSourceId,dataViews:groupedUseDss[mainDataSourceId],DefaultDataView:this.DefaultDataView,hideDataView:this.props.hideDataView,isMultipleDataView:this.props.isMultipleDataView,hideCreateViewButton:this.props.hideCreateViewButton,widgetId:this.props.widgetId,innerRef:showPlaceholder||index!==groupedUseDssLength-1?null:this.backToFocusNode}):null})),SidePopper&&(0,jimu_core.Yac)(SidePopper,{isOpen:this.getIsDsListOpen(),position:"right",trigger:sidePopperTrigger,toggle:this.toggleDsList,widgetId:this.props.widgetId,backToFocusNode:this.backToFocusNode.current,title:this.props.hideHeader?null:this.props.intl.formatMessage({id:"setDataSource",defaultMessage:jimu_ui.defaultMessages.setDataSource})},(0,jimu_core.Yac)("div",{className:"bg-default h-100 w-100"},(0,jimu_core.Yac)(data_source_list_DataSourceList,{types:this.props.types,onChange:this.onMainDsChanged,changeInitStatus:this.changeInitStatus,hideDs:this.props.hideDs,onCloseClick:this.onModalClose,isMultiple:this.props.isMultiple,isBatched:this.props.isBatched,fromDsIds:this.props.fromDsIds,useDataSources:this.props.useDataSources,isDataSourceInited:this.state.isDataSourceInited,widgetId:this.props.widgetId,disableSelection:this.disableSelection(),disableRemove:this.disableRemove(),fromRootDsIds:this.props.fromRootDsIds,hideHeader:!0,hideTypeDropdown:this.props.hideTypeDropdown,hideAllOptionOfTypeDropdown:this.props.hideAllOptionOfTypeDropdown,disableAddData:this.props.disableAddData,hideAddDataButton:this.props.hideAddDataButton,enableToSelectOutputDsFromSelf:this.props.enableToSelectOutputDsFromSelf,hideTabs:this.props.hideTabs,onClickDisabledDsItem:this.props.onClickDisabledDsItem,showQueriableDataSourceWithoutFields:this.props.showQueriableDataSourceWithoutFields}))),showPlaceholder&&(0,jimu_core.Yac)(jimu_ui.Link,{className:"ds-selector-button w-100 mt-0 d-flex justify-content-center align-items-center px-2",onClick:this.toggleDsList,title:selectDataLabel,"aria-label":selectDataLabel,onKeyDown:this.onSelectDataKeyDown,"aria-describedby":this.props["aria-describedby"],innerRef:this.backToFocusNode},(0,jimu_core.Yac)("div",{className:"text-truncate font-weight-500"},selectDataLabel)))}}const set_ds_btn_ds_list=(0,jimu_theme.SL)(_SetDsBtnDsList);try{_SetDsBtnDsList.displayName="_SetDsBtnDsList",_SetDsBtnDsList.__docgenInfo={description:"",displayName:"_SetDsBtnDsList",props:{types:{defaultValue:null,description:"",name:"types",required:!0,type:{name:"ImmutableArray<DataSourceTypes>"}},widgetId:{defaultValue:null,description:"",name:"widgetId",required:!0,type:{name:"string"}},fromRootDsIds:{defaultValue:null,description:"",name:"fromRootDsIds",required:!0,type:{name:"ImmutableArray<string>"}},buttonLabel:{defaultValue:null,description:"",name:"buttonLabel",required:!0,type:{name:"string"}},useDataSources:{defaultValue:null,description:"",name:"useDataSources",required:!0,type:{name:"ImmutableArray<UseDataSource>"}},isMultiple:{defaultValue:null,description:"",name:"isMultiple",required:!0,type:{name:"boolean"}},isBatched:{defaultValue:null,description:"",name:"isBatched",required:!0,type:{name:"boolean"}},isMultipleDataView:{defaultValue:null,description:"",name:"isMultipleDataView",required:!0,type:{name:"boolean"}},closeDataSourceListOnChange:{defaultValue:null,description:"",name:"closeDataSourceListOnChange",required:!0,type:{name:"boolean"}},fromDsIds:{defaultValue:null,description:"",name:"fromDsIds",required:!0,type:{name:"ImmutableArray<string>"}},hideDs:{defaultValue:null,description:"",name:"hideDs",required:!0,type:{name:"(dsJson: IMDataSourceJson) => boolean"}},hideTabs:{defaultValue:null,description:"",name:"hideTabs",required:!0,type:{name:'ImmutableArray<"ADDED" | "OUTPUT">'}},hideHeader:{defaultValue:null,description:"",name:"hideHeader",required:!0,type:{name:"boolean"}},hideTypeDropdown:{defaultValue:null,description:"",name:"hideTypeDropdown",required:!0,type:{name:"boolean"}},hideAllOptionOfTypeDropdown:{defaultValue:null,description:"",name:"hideAllOptionOfTypeDropdown",required:!0,type:{name:"boolean"}},disableAddData:{defaultValue:null,description:"",name:"disableAddData",required:!0,type:{name:"boolean"}},hideAddDataButton:{defaultValue:null,description:"",name:"hideAddDataButton",required:!0,type:{name:"boolean"}},disableDataSourceList:{defaultValue:null,description:"",name:"disableDataSourceList",required:!0,type:{name:"boolean"}},disableDataView:{defaultValue:null,description:"",name:"disableDataView",required:!0,type:{name:"boolean"}},hideCreateViewButton:{defaultValue:null,description:"",name:"hideCreateViewButton",required:!0,type:{name:"boolean"}},enableToSelectOutputDsFromSelf:{defaultValue:null,description:"",name:"enableToSelectOutputDsFromSelf",required:!0,type:{name:"boolean"}},showQueriableDataSourceWithoutFields:{defaultValue:null,description:"",name:"showQueriableDataSourceWithoutFields",required:!0,type:{name:"boolean"}},hideDataView:{defaultValue:null,description:"",name:"hideDataView",required:!0,type:{name:"boolean | ((dataViewJson: IMDataViewJson, mainDataSourceId: string) => boolean)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(useDataSources: UseDataSource[]) => void"}},onClickDisabledDsItem:{defaultValue:null,description:"",name:"onClickDisabledDsItem",required:!0,type:{name:"() => void"}},disableSelection:{defaultValue:null,description:"",name:"disableSelection",required:!0,type:{name:"(useDataSources: UseDataSource[]) => boolean"}},disableRemove:{defaultValue:null,description:"",name:"disableRemove",required:!0,type:{name:"(useDataSources: UseDataSource[]) => boolean"}},"aria-describedby":{defaultValue:null,description:"",name:"aria-describedby",required:!0,type:{name:"string"}},"aria-label":{defaultValue:null,description:"",name:"aria-label",required:!0,type:{name:"string"}},sidePopperTrigger:{defaultValue:null,description:"",name:"sidePopperTrigger",required:!0,type:{name:"HTMLElement | HTMLElement[]"}},theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:"IMThemeVariables"}},intl:{defaultValue:null,description:"",name:"intl",required:!0,type:{name:"IntlShape"}},dataSources:{defaultValue:null,description:"",name:"dataSources",required:!0,type:{name:"ImmutableObject<{ [dsId: string]: DataSourceJson; }>"}},dataSourcesInfo:{defaultValue:null,description:"",name:"dataSourcesInfo",required:!0,type:{name:"ImmutableObject<{ [dsId: string]: DataSourceInfo; }>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/data-source-selector/components/set-ds-btn-ds-list.tsx#_SetDsBtnDsList"]={docgenInfo:_SetDsBtnDsList.__docgenInfo,name:"_SetDsBtnDsList",path:"../jimu-ui/advanced/lib/data-source-selector/components/data-source-selector/components/set-ds-btn-ds-list.tsx#_SetDsBtnDsList"})}catch(__react_docgen_typescript_loader_error){}var __rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};class data_source_selector_DataSourceSelector extends jimu_core.q_G.PureComponent{constructor(){super(...arguments),this.onToggleUseDataEnabled=()=>{this.props.onToggleUseDataEnabled&&this.props.onToggleUseDataEnabled(!this.props.useDataSourcesEnabled)},this.onChange=useDataSources=>{var _a;if(this.props.onChange){if(!this.props.isMultiple&&(null===(_a=this.props.useDataSources)||void 0===_a?void 0:_a.length)===(null==useDataSources?void 0:useDataSources.length)){const oldUseDs=this.props.useDataSources[0],newUseDs=useDataSources[0];(null==newUseDs?void 0:newUseDs.mainDataSourceId)===(null==oldUseDs?void 0:oldUseDs.mainDataSourceId)&&Object.keys(oldUseDs).forEach((key=>{"dataViewId"===key||newUseDs[key]||(newUseDs[key]=oldUseDs[key])}))}this.props.onChange(useDataSources)}}}render(){if(!jimu_core.zAk.getInstance())return null;const _a=this.props,{onChange}=_a,otherProps=__rest(_a,["onChange"]);return(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)("w-100",{[this.props.className]:!!this.props.className})},(0,jimu_core.Yac)("div",{className:"component-data-source-selector"},!this.props.mustUseDataSource&&(0,jimu_core.Yac)(jimu_ui.Label,{className:(0,jimu_core.xWm)("d-flex justify-content-between w-100 align-items-center",{"mb-4":this.props.useDataSourcesEnabled})},(0,jimu_core.Yac)("div",{className:"w-75 d-inline-block font-dark-600 title3 hint-default"},this.props.intl.formatMessage({id:"connectToData",defaultMessage:jimu_ui.defaultMessages.connectToData})),(0,jimu_core.Yac)(jimu_ui.Switch,{checked:!!this.props.useDataSourcesEnabled,onChange:this.onToggleUseDataEnabled})),(this.props.mustUseDataSource||this.props.useDataSourcesEnabled)&&(0,jimu_core.Yac)(set_ds_btn_ds_list,Object.assign({types:this.props.types},otherProps,{onChange:this.onChange,intl:this.props.intl,closeDataSourceListOnChange:this.props.closeDataSourceListOnChange,fromDsIds:this.props.fromDsIds,widgetId:this.props.widgetId,isMultipleDataView:this.props.isMultipleDataView,onClickDisabledDsItem:this.props.onClickDisabledDsItem,sidePopperTrigger:this.props.sidePopperTrigger}))))}}const _DataSourceSelectorWithStyle=(0,jimu_core.j4T)((0,jimu_theme.Xy)(data_source_selector_DataSourceSelector,"DataSourceSelector")),components_data_source_selector_DataSourceSelector=jimu_core.E_S.connect((state=>{var _a,_b,_c,_d,_e,_f;return{dataSources:(null===(_a=null===window||void 0===window?void 0:window.jimuConfig)||void 0===_a?void 0:_a.isBuilder)?null===(_c=null===(_b=state.appStateInBuilder)||void 0===_b?void 0:_b.appConfig)||void 0===_c?void 0:_c.dataSources:null===(_d=state.appConfig)||void 0===_d?void 0:_d.dataSources,dataSourcesInfo:(null===(_e=null===window||void 0===window?void 0:window.jimuConfig)||void 0===_e?void 0:_e.isBuilder)?null===(_f=state.appStateInBuilder)||void 0===_f?void 0:_f.dataSourcesInfo:state.dataSourcesInfo}}))(_DataSourceSelectorWithStyle);try{data_source_selector_DataSourceSelector.displayName="_DataSourceSelector",data_source_selector_DataSourceSelector.__docgenInfo={description:"The `DataSourceSelector` component allows an Experience author to select a data source for widgets. This is usually used in a settings panel.\n\n```ts\nimport { DataSourceSelector } from 'jimu-ui/advanced/data-source-selector'\n```",displayName:"_DataSourceSelector",props:{isMultipleDataView:{defaultValue:{value:"false"},description:"Whether to support multiple selection of data views.\n\nOnly allow to select single data source item and single data view by default.\nTo allow to select multiple data source items and multiple data views for each selected data source item, please pass in `isMultiple=true`.\nTo allow to select single data source item and multiple data views for the selected source item, please pass in `isMultipleDataView=true`.\nTo allow to select multiple data source items and single data view for each selected data source item, please pass in `isMultiple=true` and `isMultipleDataView=false`.",name:"isMultipleDataView",required:!1,type:{name:"boolean"}},buttonLabel:{defaultValue:{value:"Select data"},description:"Label of the button which can trigger data source selector popup.",name:"buttonLabel",required:!1,type:{name:"string"}},useDataSourcesEnabled:{defaultValue:{value:"false"},description:"Whether or not to enable data source use.",name:"useDataSourcesEnabled",required:!1,type:{name:"boolean"}},mustUseDataSource:{defaultValue:{value:"false"},description:"Whether or not to show toggle data button, will hide toggle data button if the value is true.",name:"mustUseDataSource",required:!1,type:{name:"boolean"}},disableDataSourceList:{defaultValue:{value:"false"},description:"Whether or not to show data source list panel after clicking a selected data source.",name:"disableDataSourceList",required:!1,type:{name:"boolean"}},disableDataView:{defaultValue:{value:"false"},description:"Whether or not to allow to select data view,\nthe props will make data view dropdown disabled.",name:"disableDataView",required:!1,type:{name:"boolean"}},hideDataView:{defaultValue:{value:"false"},description:"Whether or not to hide the data view dropdown/some data views.\nIf the props is true, will make the entire data view dropdown hidden.\nIf the props is a function, will call it to decide whether or not to hide some items of the data view dropdown.\nPlease note that -\n1. Id of default view is `DEFAULT_DATA_VIEW_ID`, you can import it from `jimu-ui/advanced/data-source-selector`.\n2. Id of selection view is `CONSTANTS.SELECTION_DATA_VIEW_ID`, you can import `CONSTANTS` from `jimu-core`.",name:"hideDataView",required:!1,type:{name:"boolean | ((dataViewJson: IMDataViewJson, mainDataSourceId: string) => boolean)"}},hideCreateViewButton:{defaultValue:{value:"false"},description:"Whether or not to hide the 'create a view' button at the bottom of data view dropdown.",name:"hideCreateViewButton",required:!1,type:{name:"boolean"}},closeDataSourceListOnChange:{defaultValue:{value:"false"},description:"Whether or not to close data source list panel after selected data sources are changed.",name:"closeDataSourceListOnChange",required:!1,type:{name:"boolean"}},onToggleUseDataEnabled:{defaultValue:null,description:"Callback when toggle data button is clicked.",name:"onToggleUseDataEnabled",required:!1,type:{name:"(useDataSourcesEnabled: boolean) => void"}},disableSelection:{defaultValue:null,description:"Before selecting, the component will call this method to check if it can continue selecting.",name:"disableSelection",required:!1,type:{name:"(useDataSources: UseDataSource[]) => boolean"}},disableRemove:{defaultValue:null,description:"Before remove, the component will call this method to check if it can continue removing.",name:"disableRemove",required:!1,type:{name:"(useDataSources: UseDataSource[]) => boolean"}},className:{defaultValue:null,description:"only used by theme.\n@ignore Only used by theme.",name:"className",required:!1,type:{name:"string"}},"aria-label":{defaultValue:null,description:"The label used for accessibility purpose.",name:"aria-label",required:!1,type:{name:"string"}},"aria-describedby":{defaultValue:null,description:"`aria-describedby` is used to indicate the IDs of the elements that describe the component.\nIt is for accessibility purposes.",name:"aria-describedby",required:!1,type:{name:"string"}},onClickDisabledDsItem:{defaultValue:null,description:"@ignore The callback prop is called when clicking an unselectable data source item.\nOnly used by map setting.",name:"onClickDisabledDsItem",required:!1,type:{name:"() => void"}},sidePopperTrigger:{defaultValue:null,description:"@ignore The prop is passed as 'trigger' prop of SidePopper.\nOnly used by map setting.",name:"sidePopperTrigger",required:!1,type:{name:"HTMLElement | HTMLElement[]"}},onChange:{defaultValue:null,description:"Callback when selected data sources are changed.",name:"onChange",required:!1,type:{name:"(useDataSources: UseDataSource[]) => void"}},isMultiple:{defaultValue:{value:"false"},description:"Whether to support multiple selection.",name:"isMultiple",required:!1,type:{name:"boolean"}},hideHeader:{defaultValue:{value:"false"},description:"Whether to hide header of the component.",name:"hideHeader",required:!1,type:{name:"boolean"}},widgetId:{defaultValue:null,description:"Must pass `widgetId` to use parent widget's data view by default when using the same data source as parent widget.",name:"widgetId",required:!1,type:{name:"string"}},useDataSources:{defaultValue:null,description:"Selected data sources.",name:"useDataSources",required:!1,type:{name:"ImmutableArray<UseDataSource>"}},types:{defaultValue:null,description:"Supported data source types.\n`AllDataSourceTypes` is union of `DataSourceTypes` **(see `jimu-core` API documentation)** and `ArcGISDataSourceTypes` **(see `jimu-arcgis` API documentation)**.\n\n```ts\nimport { AllDataSourceTypes } from 'jimu-ui/advanced/data-source-selector'\n```",name:"types",required:!0,type:{name:"ImmutableArray<DataSourceTypes>"}},fromRootDsIds:{defaultValue:null,description:"Only list child data sources generated by these root data sources.",name:"fromRootDsIds",required:!1,type:{name:"ImmutableArray<string>"}},fromDsIds:{defaultValue:null,description:"Only list these data sources.",name:"fromDsIds",required:!1,type:{name:"ImmutableArray<string>"}},hideDs:{defaultValue:null,description:"Whether to hide the data source in the list.",name:"hideDs",required:!1,type:{name:"(dsJson: IMDataSourceJson) => boolean"}},hideTypeDropdown:{defaultValue:{value:"false"},description:"Whether to hide dropdown that is used to filter the list by data source type.",name:"hideTypeDropdown",required:!1,type:{name:"boolean"}},hideAllOptionOfTypeDropdown:{defaultValue:{value:"false"},description:"Whether to hide `All` option of type dropdown. Works only when `hideTypeDropdown` is not true.",name:"hideAllOptionOfTypeDropdown",required:!1,type:{name:"boolean"}},hideAddDataButton:{defaultValue:{value:"false"},description:"Whether to hide the add data button at bottom.",name:"hideAddDataButton",required:!1,type:{name:"boolean"}},disableAddData:{defaultValue:{value:"false"},description:"Whether to hide the add data button at bottom.\n@deprecated",name:"disableAddData",required:!1,type:{name:"boolean"}},hideTabs:{defaultValue:null,description:"Hide some of the tabs.\nPlease note that if pass in `hideTabs`, won't calculate which tabs need to be displayed automatically, will only show tabs that are not included in the array.",name:"hideTabs",required:!1,type:{name:'ImmutableArray<"ADDED" | "OUTPUT">'}},isBatched:{defaultValue:{value:"false"},description:"Whether support batch selection. If true, selecting a parent data source will automatically select all supported child data sources.\nOnly takes effect when `isMultiple` is true.",name:"isBatched",required:!1,type:{name:"boolean"}},enableToSelectOutputDsFromSelf:{defaultValue:{value:"false"},description:"Allow to select output data sources which are generated by current widget itself.\nDo not allow widgets to select these data sources by default.",name:"enableToSelectOutputDsFromSelf",required:!1,type:{name:"boolean"}},showQueriableDataSourceWithoutFields:{defaultValue:{value:"false"},description:"Whether or not to show queriable data sources that have no fields.\nThese data sources extend from the `QueriableDataSource` but do not have fields, which means it will throw error if call `query` method or `load` method.",name:"showQueriableDataSourceWithoutFields",required:!1,type:{name:"boolean"}},dataSources:{defaultValue:null,description:"@ignore",name:"dataSources",required:!0,type:{name:"ImmutableObject<{ [dsId: string]: DataSourceJson; }>"}},dataSourcesInfo:{defaultValue:null,description:"@ignore",name:"dataSourcesInfo",required:!0,type:{name:"ImmutableObject<{ [dsId: string]: DataSourceInfo; }>"}},intl:{defaultValue:null,description:"@ignore",name:"intl",required:!0,type:{name:"IntlShape"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/data-source-selector/index.tsx#_DataSourceSelector"]={docgenInfo:data_source_selector_DataSourceSelector.__docgenInfo,name:"_DataSourceSelector",path:"../jimu-ui/advanced/lib/data-source-selector/components/data-source-selector/index.tsx#_DataSourceSelector"})}catch(__react_docgen_typescript_loader_error){}try{components_data_source_selector_DataSourceSelector.displayName="DataSourceSelector",components_data_source_selector_DataSourceSelector.__docgenInfo={description:"A component that allows an Experience author to select a data source for widgets. This is usually used in a settings panel.",displayName:"DataSourceSelector",props:{className:{defaultValue:null,description:"only used by theme.\n@ignore Only used by theme.",name:"className",required:!1,type:{name:"string"}},"aria-describedby":{defaultValue:null,description:"`aria-describedby` is used to indicate the IDs of the elements that describe the component.\nIt is for accessibility purposes.",name:"aria-describedby",required:!1,type:{name:"string"}},"aria-label":{defaultValue:null,description:"The label used for accessibility purpose.",name:"aria-label",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"Callback when selected data sources are changed.",name:"onChange",required:!1,type:{name:"(useDataSources: UseDataSource[]) => void"}},isMultiple:{defaultValue:{value:"false"},description:"Whether to support multiple selection.",name:"isMultiple",required:!1,type:{name:"boolean"}},hideHeader:{defaultValue:{value:"false"},description:"Whether to hide header of the component.",name:"hideHeader",required:!1,type:{name:"boolean"}},widgetId:{defaultValue:null,description:"Must pass `widgetId` to use parent widget's data view by default when using the same data source as parent widget.",name:"widgetId",required:!1,type:{name:"string"}},useDataSources:{defaultValue:null,description:"Selected data sources.",name:"useDataSources",required:!1,type:{name:"Readonly<Remaining<UseDataSource>> & Additions<UseDataSource> & Overrides<UseDataSource> & ReadOnlyIndexer<...>"}},useDataSourcesEnabled:{defaultValue:{value:"false"},description:"Whether or not to enable data source use.",name:"useDataSourcesEnabled",required:!1,type:{name:"boolean"}},buttonLabel:{defaultValue:{value:"Select data"},description:"Label of the button which can trigger data source selector popup.",name:"buttonLabel",required:!1,type:{name:"string"}},types:{defaultValue:null,description:"Supported data source types.\n`AllDataSourceTypes` is union of `DataSourceTypes` **(see `jimu-core` API documentation)** and `ArcGISDataSourceTypes` **(see `jimu-arcgis` API documentation)**.\n\n```ts\nimport { AllDataSourceTypes } from 'jimu-ui/advanced/data-source-selector'\n```",name:"types",required:!0,type:{name:"Readonly<Remaining<DataSourceTypes>> & Additions<DataSourceTypes> & Overrides<DataSourceTypes> & ReadOnlyIndexer<...>"}},disableSelection:{defaultValue:null,description:"Before selecting, the component will call this method to check if it can continue selecting.",name:"disableSelection",required:!1,type:{name:"(useDataSources: UseDataSource[]) => boolean"}},disableRemove:{defaultValue:null,description:"Before remove, the component will call this method to check if it can continue removing.",name:"disableRemove",required:!1,type:{name:"(useDataSources: UseDataSource[]) => boolean"}},fromRootDsIds:{defaultValue:null,description:"Only list child data sources generated by these root data sources.",name:"fromRootDsIds",required:!1,type:{name:"Readonly<Remaining<string>> & Additions<string> & Overrides<string> & ReadOnlyIndexer<string>"}},fromDsIds:{defaultValue:null,description:"Only list these data sources.",name:"fromDsIds",required:!1,type:{name:"Readonly<Remaining<string>> & Additions<string> & Overrides<string> & ReadOnlyIndexer<string>"}},hideDs:{defaultValue:null,description:"Whether to hide the data source in the list.",name:"hideDs",required:!1,type:{name:"(dsJson: IMDataSourceJson) => boolean"}},hideTypeDropdown:{defaultValue:{value:"false"},description:"Whether to hide dropdown that is used to filter the list by data source type.",name:"hideTypeDropdown",required:!1,type:{name:"boolean"}},hideAllOptionOfTypeDropdown:{defaultValue:{value:"false"},description:"Whether to hide `All` option of type dropdown. Works only when `hideTypeDropdown` is not true.",name:"hideAllOptionOfTypeDropdown",required:!1,type:{name:"boolean"}},hideAddDataButton:{defaultValue:{value:"false"},description:"Whether to hide the add data button at bottom.",name:"hideAddDataButton",required:!1,type:{name:"boolean"}},disableAddData:{defaultValue:{value:"false"},description:"Whether to hide the add data button at bottom.\n@deprecated",name:"disableAddData",required:!1,type:{name:"boolean"}},hideTabs:{defaultValue:null,description:"Hide some of the tabs.\nPlease note that if pass in `hideTabs`, won't calculate which tabs need to be displayed automatically, will only show tabs that are not included in the array.",name:"hideTabs",required:!1,type:{name:'Readonly<Remaining<"ADDED" | "OUTPUT">> & Additions<"ADDED" | "OUTPUT"> & Overrides<"ADDED" | "OUTPUT"> & ReadOnlyIndexer<"ADDED" | "OUTPUT">'}},isBatched:{defaultValue:{value:"false"},description:"Whether support batch selection. If true, selecting a parent data source will automatically select all supported child data sources.\nOnly takes effect when `isMultiple` is true.",name:"isBatched",required:!1,type:{name:"boolean"}},enableToSelectOutputDsFromSelf:{defaultValue:{value:"false"},description:"Allow to select output data sources which are generated by current widget itself.\nDo not allow widgets to select these data sources by default.",name:"enableToSelectOutputDsFromSelf",required:!1,type:{name:"boolean"}},showQueriableDataSourceWithoutFields:{defaultValue:{value:"false"},description:"Whether or not to show queriable data sources that have no fields.\nThese data sources extend from the `QueriableDataSource` but do not have fields, which means it will throw error if call `query` method or `load` method.",name:"showQueriableDataSourceWithoutFields",required:!1,type:{name:"boolean"}},isMultipleDataView:{defaultValue:{value:"false"},description:"Whether to support multiple selection of data views.\n\nOnly allow to select single data source item and single data view by default.\nTo allow to select multiple data source items and multiple data views for each selected data source item, please pass in `isMultiple=true`.\nTo allow to select single data source item and multiple data views for the selected source item, please pass in `isMultipleDataView=true`.\nTo allow to select multiple data source items and single data view for each selected data source item, please pass in `isMultiple=true` and `isMultipleDataView=false`.",name:"isMultipleDataView",required:!1,type:{name:"boolean"}},mustUseDataSource:{defaultValue:{value:"false"},description:"Whether or not to show toggle data button, will hide toggle data button if the value is true.",name:"mustUseDataSource",required:!1,type:{name:"boolean"}},disableDataSourceList:{defaultValue:{value:"false"},description:"Whether or not to show data source list panel after clicking a selected data source.",name:"disableDataSourceList",required:!1,type:{name:"boolean"}},disableDataView:{defaultValue:{value:"false"},description:"Whether or not to allow to select data view,\nthe props will make data view dropdown disabled.",name:"disableDataView",required:!1,type:{name:"boolean"}},hideDataView:{defaultValue:{value:"false"},description:"Whether or not to hide the data view dropdown/some data views.\nIf the props is true, will make the entire data view dropdown hidden.\nIf the props is a function, will call it to decide whether or not to hide some items of the data view dropdown.\nPlease note that -\n1. Id of default view is `DEFAULT_DATA_VIEW_ID`, you can import it from `jimu-ui/advanced/data-source-selector`.\n2. Id of selection view is `CONSTANTS.SELECTION_DATA_VIEW_ID`, you can import `CONSTANTS` from `jimu-core`.",name:"hideDataView",required:!1,type:{name:"boolean | ((dataViewJson: IMDataViewJson, mainDataSourceId: string) => boolean)"}},hideCreateViewButton:{defaultValue:{value:"false"},description:"Whether or not to hide the 'create a view' button at the bottom of data view dropdown.",name:"hideCreateViewButton",required:!1,type:{name:"boolean"}},closeDataSourceListOnChange:{defaultValue:{value:"false"},description:"Whether or not to close data source list panel after selected data sources are changed.",name:"closeDataSourceListOnChange",required:!1,type:{name:"boolean"}},onToggleUseDataEnabled:{defaultValue:null,description:"Callback when toggle data button is clicked.",name:"onToggleUseDataEnabled",required:!1,type:{name:"(useDataSourcesEnabled: boolean) => void"}},onClickDisabledDsItem:{defaultValue:null,description:"@ignore The callback prop is called when clicking an unselectable data source item.\nOnly used by map setting.",name:"onClickDisabledDsItem",required:!1,type:{name:"() => void"}},sidePopperTrigger:{defaultValue:null,description:"@ignore The prop is passed as 'trigger' prop of SidePopper.\nOnly used by map setting.",name:"sidePopperTrigger",required:!1,type:{name:"HTMLElement | HTMLElement[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/data-source-selector/index.tsx#DataSourceSelector"]={docgenInfo:components_data_source_selector_DataSourceSelector.__docgenInfo,name:"DataSourceSelector",path:"../jimu-ui/advanced/lib/data-source-selector/components/data-source-selector/index.tsx#DataSourceSelector"})}catch(__react_docgen_typescript_loader_error){}var more_horizontal=__webpack_require__("../jimu-icons/outlined/application/more-horizontal.tsx"),data_layer=__webpack_require__("../jimu-icons/filled/data/layer.tsx"),widget=__webpack_require__("../jimu-icons/filled/data/widget.tsx"),info=__webpack_require__("../jimu-icons/outlined/suggested/info.tsx");class _DataSourceItem extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.onLabelChange=e=>{this.setState({newLabel:e.target.value})},this.onMoreIconClick=e=>{this.stopPropagation(e),this.props.onMoreIconClick&&this.props.onMoreIconClick(this.props.dataSourceJson)},this.onCloseIconClick=e=>{this.stopPropagation(e),this.props.onCloseIconClick&&this.props.onCloseIconClick(this.props.dataSourceJson)},this.onRename=()=>{const newLabel=this.state.newLabel.trim();this.props.onRename&&this.props.onRename(newLabel)},this.onDataSourceItemClick=e=>{this.stopPropagation(e),this.props.onDataSourceItemClick&&this.props.onDataSourceItemClick(this.props.dataSourceJson)},this.onDataSourceItemKeyDown=e=>{e.target!==e.currentTarget||"Enter"!==e.key&&" "!==e.key||this.onDataSourceItemClick(e)},this.onMappingIconClick=e=>{this.stopPropagation(e),this.props.onMappingIconClick&&this.props.onMappingIconClick(this.props.dataSourceJson)},this.onHideIconClick=e=>{this.stopPropagation(e),this.props.onToggleHidden&&this.props.onToggleHidden(this.props.dataSourceJson)},this.onChildDataIconClick=e=>{this.stopPropagation(e),this.props.onChildDataIconClick&&this.props.onChildDataIconClick(this.props.dataSourceJson)},this.onRelatedWidgetsIconClick=e=>{this.stopPropagation(e),this.props.onRelatedWidgetsIconClick&&this.props.onRelatedWidgetsIconClick(this.props.dataSourceJson)},this.stopPropagation=e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},this.getWhetherIsSetDs=dsJson=>{if(!dsJson)return!1;const ds=jimu_core.zAk.getInstance().getDataSource(dsJson.id);return!!ds&&ds.isDataSourceSet()},this.getChildDssLength=dsJson=>{if(!dsJson)return null;const ds=jimu_core.zAk.getInstance().getDataSource(dsJson.id);return ds&&ds.isDataSourceSet()?ds.getChildDataSources().length:null},this.getLabel=()=>{var _a,_b,_c,_d;const ds=jimu_core.zAk.getInstance().getDataSource(null===(_a=this.props.dataSourceJson)||void 0===_a?void 0:_a.id);return(null==ds?void 0:ds.getLabel())||(null===(_b=this.props.dataSourceJson)||void 0===_b?void 0:_b.label)||(null===(_c=this.props.dataSourceJson)||void 0===_c?void 0:_c.sourceLabel)||(null===(_d=this.props.dataSourceJson)||void 0===_d?void 0:_d.id)||""},this.state={newLabel:this.getLabel()}}componentDidUpdate(prevProps,prevState){prevProps.isRenameInputShown!==this.props.isRenameInputShown&&this.props.isRenameInputShown&&this.renameInput&&setTimeout((()=>{(0,jimu_core.u02)(this.renameInput,!0)}),200),prevProps.dataSourceJson!==this.props.dataSourceJson&&this.setState({newLabel:this.getLabel()})}render(){var _a,_b,_c,_d,_e,_f;if(!this.props.dataSourceJson)return null;const relatedWidgets=getWidgetsUsingDsOrItsViews(this.props.dataSourceJson.id,this.props.widgets,!1),allRelatedWidgets=getWidgetsUsingDsOrItsDescendantDss(this.props.dataSourceJson.id,this.props.widgets),originalDataUrl=getOriginalDataUrl(this.props.dataSourceJson),isSetDs=this.getWhetherIsSetDs(this.props.dataSourceJson);let childDssLength;isSetDs&&(childDssLength=this.getChildDssLength(this.props.dataSourceJson));const dsTypeString=jimu_core.ZkX.getDsTypeString(this.props.dataSourceJson.type,this.props.intl),label=this.getLabel(),ds=jimu_core.zAk.getInstance().getDataSource(this.props.dataSourceJson.id),itemInfo=jimu_core.ZkX.isItemMixin(ds)?ds.getItemInfo():null;return(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)({[this.props.className]:!!this.props.className})},(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)("component-data-source-item",{"component-data-source-item-selected-item":this.props.isSelected,"cursor-pointer":!!this.props.onDataSourceItemClick}),onClick:this.onDataSourceItemClick,tabIndex:0,onKeyDown:this.onDataSourceItemKeyDown,role:"option"},this.props.isLoadingShown&&(0,jimu_core.Yac)("div",{className:"loading-container"},(0,jimu_core.Yac)(jimu_ui.Loading,{type:jimu_ui.LoadingType.Bar})),(0,jimu_core.Yac)("div",{className:"d-flex justify-content-between align-items-center ds-item-header"},(0,jimu_core.Yac)("div",{className:"d-flex align-items-center flex-grow-1 text-truncate",title:dsTypeString},(0,jimu_core.Yac)("div",{className:"d-flex align-items-center justify-content-center flex-shrink-0 ds-thumbnail"},(0,jimu_core.Yac)(jimu_ui.Icon,{icon:jimu_core.ZkX.getDsIcon(this.props.dataSourceJson),className:"text-default",size:"12"})),(0,jimu_core.Yac)("div",{className:"flex-grow-1 text-truncate pl-2 ds-type"},(0,jimu_core.Yac)("div",{className:"text-truncate ds-type-name"},dsTypeString))),(0,jimu_core.Yac)("div",{className:"d-flex flex-shrink-0"},(0,jimu_core.Yac)("div",{className:"ml-1 flex-shrink-0 d-flex align-items-center ds-badge"},!this.props.isLoadingShown&&(0,jimu_core.Yac)(item_selector.KE,{item:itemInfo,itemId:null===(_a=this.props.dataSourceJson)||void 0===_a?void 0:_a.itemId,portalUrl:null===(_b=this.props.dataSourceJson)||void 0===_b?void 0:_b.portalUrl,url:null===(_c=this.props.dataSourceJson)||void 0===_c?void 0:_c.url})),this.props.isErrorIconShown?(0,jimu_core.Yac)("div",{className:"ml-1 flex-shrink-0 d-flex align-items-center ds-more p-2"},(0,jimu_core.Yac)("span",{className:"d-flex justify-content-center",title:null!==(_d=this.props.errorTitle)&&void 0!==_d?_d:this.props.intl.formatMessage({id:"uploadImageError",defaultMessage:jimu_ui.defaultMessages.uploadImageError})},(0,jimu_core.Yac)(info.J,{className:"align-baseline warning-icon",size:"m"}))):null,this.props.isHideable?(0,jimu_core.Yac)(jimu_ui.Button,{size:"sm",icon:!0,type:"tertiary",disableRipple:!0,className:"flex-shrink-0 ds-more p-2",onClick:this.onHideIconClick},(0,jimu_core.Yac)("span",{className:"d-flex justify-content-center",title:(null===(_e=this.props.dataSourceJson)||void 0===_e?void 0:_e.isHidden)?this.props.intl.formatMessage({id:"clickToShow",defaultMessage:jimu_ui.defaultMessages.clickToShow}):this.props.intl.formatMessage({id:"clickToHide",defaultMessage:jimu_ui.defaultMessages.clickToHide})},(null===(_f=this.props.dataSourceJson)||void 0===_f?void 0:_f.isHidden)?(0,jimu_core.Yac)(invisible.u,{className:"align-baseline",size:"m"}):(0,jimu_core.Yac)(visible.T,{className:"align-baseline",size:"m"}))):null,this.props.isMoreIconShown?(0,jimu_core.Yac)(jimu_ui.Button,{size:"sm",icon:!0,"aria-label":this.props.intl.formatMessage({id:"more",defaultMessage:jimu_ui.defaultMessages.more}),title:this.props.intl.formatMessage({id:"more",defaultMessage:jimu_ui.defaultMessages.more}),type:"tertiary",disableRipple:!0,className:"flex-shrink-0 ds-more data-source-item-more-button",onClick:this.onMoreIconClick,"aria-haspopup":!!this.props.onMoreIconClick},(0,jimu_core.Yac)("span",{className:"d-flex justify-content-center"},(0,jimu_core.Yac)(more_horizontal.S,{className:"align-baseline",size:"m"}))):null,this.props.isCloseIconShown?(0,jimu_core.Yac)(jimu_ui.Button,{size:"sm",icon:!0,"aria-label":this.props.intl.formatMessage({id:"remove",defaultMessage:jimu_ui.defaultMessages.remove}),title:this.props.intl.formatMessage({id:"remove",defaultMessage:jimu_ui.defaultMessages.remove}),type:"tertiary",disableRipple:!0,className:"flex-shrink-0 ds-more p-2",onClick:this.onCloseIconClick},(0,jimu_core.Yac)("span",{className:"d-flex justify-content-center"},(0,jimu_core.Yac)(editor_close.r,{className:"align-baseline ds-close-icon",size:"m"}))):null)),(0,jimu_core.Yac)("div",{className:"ds-item-body"},this.props.isRenameInputShown?(0,jimu_core.Yac)(jimu_ui.TextInput,{className:"flex-grow-1 text-truncate p-1 ds-label ds-label-input",ref:n=>{this.renameInput=n},onBlur:this.onRename,onPressEnter:this.onRename,onChange:this.onLabelChange,value:this.state.newLabel,onClick:this.stopPropagation}):(0,jimu_core.Yac)("div",{className:"flex-grow-1 two-line-truncate ds-label text-left",title:label},label),(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)("d-flex justify-content-between",{"mt-4":originalDataUrl||this.props.isMappingIconShown||this.props.isRelatedWidgetsShown||isSetDs})},(0,jimu_core.Yac)("div",{className:"d-flex"},isSetDs?(0,jimu_core.Yac)(jimu_ui.Button,{type:"tertiary",disableHoverEffect:!0,disableRipple:!0,className:"mr-6 p-0 ds-child-dss",onClick:this.onChildDataIconClick,title:this.props.intl.formatMessage({id:"containLayersWithNum",defaultMessage:jimu_ui.defaultMessages.containLayersWithNum},{layerNum:childDssLength})},(0,jimu_core.Yac)("span",null,(0,jimu_core.Yac)(data_layer.s,{size:"m",className:"mr-1"}),(0,jimu_core.Yac)("span",{className:"align-middle"},childDssLength))):null,this.props.isRelatedWidgetsShown?(0,jimu_core.Yac)(jimu_ui.Button,{type:"tertiary",disableHoverEffect:!0,disableRipple:!0,className:"p-0 flex-grow-1 text-truncate flex-row ds-related-widgets",onClick:this.onRelatedWidgetsIconClick,title:this.props.intl.formatMessage({id:"relatedWidgetsWithNum",defaultMessage:jimu_ui.defaultMessages.relatedWidgetsWithNum},{directlyNum:relatedWidgets.length,totalNum:allRelatedWidgets.length})},(0,jimu_core.Yac)("span",null,(0,jimu_core.Yac)(widget.h,{size:"m",className:"mr-1"}),(0,jimu_core.Yac)("span",{className:"align-middle"},`${relatedWidgets.length} / ${allRelatedWidgets.length}`))):null),originalDataUrl?(0,jimu_core.Yac)(jimu_ui.Button,{size:"sm",icon:!0,type:"tertiary",href:originalDataUrl,target:"_blank",onClick:this.stopPropagation,title:this.props.intl.formatMessage({id:"source",defaultMessage:jimu_ui.defaultMessages.source}),"aria-label":this.props.intl.formatMessage({id:"openInNewWindow",defaultMessage:jimu_ui.defaultMessages.openInNewWindow})},(0,jimu_core.Yac)(preview.P,{className:"m-0",size:"m"})):null))))}}const data_source_item_DataSourceItem=jimu_core.E_S.connect(((state,ownProps)=>{var _a,_b;const appState=(null===(_a=null===window||void 0===window?void 0:window.jimuConfig)||void 0===_a?void 0:_a.isBuilder)?state.appStateInBuilder:state;return ownProps.isRelatedWidgetsShown?{widgets:null===(_b=null==appState?void 0:appState.appConfig)||void 0===_b?void 0:_b.widgets}:null}))((0,jimu_core.j4T)((0,jimu_theme.Xy)(_DataSourceItem,"DataSourceItem")));try{data_source_item_DataSourceItem.displayName="DataSourceItem",data_source_item_DataSourceItem.__docgenInfo={description:"",displayName:"DataSourceItem",props:{dataSourceJson:{defaultValue:null,description:"",name:"dataSourceJson",required:!0,type:{name:"IMDataSourceJson"}},isMoreIconShown:{defaultValue:null,description:"",name:"isMoreIconShown",required:!1,type:{name:"boolean"}},isCloseIconShown:{defaultValue:null,description:"",name:"isCloseIconShown",required:!1,type:{name:"boolean"}},isRenameInputShown:{defaultValue:null,description:"",name:"isRenameInputShown",required:!1,type:{name:"boolean"}},isRelatedWidgetsShown:{defaultValue:null,description:"",name:"isRelatedWidgetsShown",required:!1,type:{name:"boolean"}},isMappingIconShown:{defaultValue:null,description:"",name:"isMappingIconShown",required:!1,type:{name:"boolean"}},isErrorIconShown:{defaultValue:null,description:"",name:"isErrorIconShown",required:!1,type:{name:"boolean"}},isSelected:{defaultValue:null,description:"",name:"isSelected",required:!1,type:{name:"boolean"}},isHideable:{defaultValue:null,description:"",name:"isHideable",required:!1,type:{name:"boolean"}},isLoadingShown:{defaultValue:null,description:"",name:"isLoadingShown",required:!1,type:{name:"boolean"}},errorTitle:{defaultValue:null,description:"",name:"errorTitle",required:!1,type:{name:"string"}},onDataSourceItemClick:{defaultValue:null,description:"",name:"onDataSourceItemClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onMappingIconClick:{defaultValue:null,description:"",name:"onMappingIconClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onCloseIconClick:{defaultValue:null,description:"",name:"onCloseIconClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onMoreIconClick:{defaultValue:null,description:"",name:"onMoreIconClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onRename:{defaultValue:null,description:"",name:"onRename",required:!1,type:{name:"(dsLabel: string) => void"}},onToggleHidden:{defaultValue:null,description:"",name:"onToggleHidden",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onChildDataIconClick:{defaultValue:null,description:"",name:"onChildDataIconClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onRelatedWidgetsIconClick:{defaultValue:null,description:"",name:"onRelatedWidgetsIconClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/data-source-item.tsx#DataSourceItem"]={docgenInfo:data_source_item_DataSourceItem.__docgenInfo,name:"DataSourceItem",path:"../jimu-ui/advanced/lib/data-source-selector/components/data-source-item.tsx#DataSourceItem"})}catch(__react_docgen_typescript_loader_error){}class _DataSourceErrorItem extends jimu_core.q_G.PureComponent{render(){return this.props.dataSourceJson?(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)({[this.props.className]:!!this.props.className})},(0,jimu_core.Yac)("div",{className:"component-data-source-error-item"},(0,jimu_core.Yac)(data_source_item_DataSourceItem,Object.assign({},this.props)))):null}}const data_source_error_item_DataSourceErrorItem=(0,jimu_theme.Xy)(_DataSourceErrorItem,"DataSourceErrorItem");try{data_source_error_item_DataSourceErrorItem.displayName="DataSourceErrorItem",data_source_error_item_DataSourceErrorItem.__docgenInfo={description:"",displayName:"DataSourceErrorItem",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},dataSourceJson:{defaultValue:null,description:"",name:"dataSourceJson",required:!0,type:{name:"IMDataSourceJson"}},isMoreIconShown:{defaultValue:null,description:"",name:"isMoreIconShown",required:!1,type:{name:"boolean"}},isCloseIconShown:{defaultValue:null,description:"",name:"isCloseIconShown",required:!1,type:{name:"boolean"}},isRelatedWidgetsShown:{defaultValue:null,description:"",name:"isRelatedWidgetsShown",required:!1,type:{name:"boolean"}},isErrorIconShown:{defaultValue:null,description:"",name:"isErrorIconShown",required:!1,type:{name:"boolean"}},isSelected:{defaultValue:null,description:"",name:"isSelected",required:!1,type:{name:"boolean"}},isHideable:{defaultValue:null,description:"",name:"isHideable",required:!1,type:{name:"boolean"}},isLoadingShown:{defaultValue:null,description:"",name:"isLoadingShown",required:!1,type:{name:"boolean"}},errorTitle:{defaultValue:null,description:"",name:"errorTitle",required:!1,type:{name:"string"}},onDataSourceItemClick:{defaultValue:null,description:"",name:"onDataSourceItemClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onCloseIconClick:{defaultValue:null,description:"",name:"onCloseIconClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onMoreIconClick:{defaultValue:null,description:"",name:"onMoreIconClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onToggleHidden:{defaultValue:null,description:"",name:"onToggleHidden",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onChildDataIconClick:{defaultValue:null,description:"",name:"onChildDataIconClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onRelatedWidgetsIconClick:{defaultValue:null,description:"",name:"onRelatedWidgetsIconClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/data-source-error-item.tsx#DataSourceErrorItem"]={docgenInfo:data_source_error_item_DataSourceErrorItem.__docgenInfo,name:"DataSourceErrorItem",path:"../jimu-ui/advanced/lib/data-source-selector/components/data-source-error-item.tsx#DataSourceErrorItem"})}catch(__react_docgen_typescript_loader_error){}class CommonList extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.state={isOpen:!1}}render(){const fields=this.props.fields;if(!fields||!this.props.ds)return null;const noSelectionId=fields[NO_SELECTION_ID]?[NO_SELECTION_ID]:[];return jimu_core.q_G.createElement("div",{className:"field-list px-4",role:"menu"},fields&&noSelectionId.concat(Object.keys(fields).filter((fieldId=>fieldId!==NO_SELECTION_ID))).map((fieldId=>{const iconAndColor=getIconFromFieldType(fields[fieldId].type,this.props.theme,this.props.intl),isSelected=this.props.selectedFields&&(this.props.isMultiple?this.props.selectedFields.some((name=>name===fieldId)):fieldId===this.props.selectedFields[0]),label=fields[fieldId].alias||fields[fieldId].name;return jimu_core.q_G.createElement(jimu_ui.Button,{role:"menuitem"+(this.props.isMultiple?"checkbox":"radio"),title:label,"aria-checked":isSelected,"aria-label":`${null==iconAndColor?void 0:iconAndColor.title} ${label}`,key:fieldId,onClick:()=>{this.props.onFieldClick([fields[fieldId]])},className:(0,jimu_core.xWm)("field-item mt-2 py-1 px-2 d-flex w-100 align-items-center",{"field-item-selected":isSelected})},iconAndColor&&jimu_core.q_G.createElement(jimu_ui.Icon,{icon:iconAndColor.icon,color:iconAndColor.color,className:"mr-2 flex-shrink-0",size:16}),jimu_core.q_G.createElement("div",{className:"flex-grow-1 text-truncate"},label))})))}}try{commonlist.displayName="commonlist",commonlist.__docgenInfo={description:"",displayName:"commonlist",props:{intl:{defaultValue:null,description:"",name:"intl",required:!0,type:{name:"IntlShape"}},theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:"IMThemeVariables"}},fields:{defaultValue:null,description:"",name:"fields",required:!0,type:{name:"ImmutableObject<{ [jimuName: string]: FieldSchema; }>"}},ds:{defaultValue:null,description:"",name:"ds",required:!0,type:{name:"DataSource"}},selectedFields:{defaultValue:null,description:"",name:"selectedFields",required:!1,type:{name:"ImmutableArray<string>"}},isMultiple:{defaultValue:null,description:"",name:"isMultiple",required:!1,type:{name:"boolean"}},onFieldClick:{defaultValue:null,description:"",name:"onFieldClick",required:!0,type:{name:"(clickedFields: IMFieldSchema[]) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/field-selector/components/common-list.tsx#commonlist"]={docgenInfo:commonlist.__docgenInfo,name:"commonlist",path:"../jimu-ui/advanced/lib/data-source-selector/components/field-selector/components/common-list.tsx#commonlist"})}catch(__react_docgen_typescript_loader_error){}class MultipleDropdownList extends jimu_core.q_G.PureComponent{constructor(){super(...arguments),this.dropdownProps={autoWidth:!0},this.onChange=selectedFieldPairs=>{var _a,_b;const prevSelectedFields=(null===(_a=this.props.selectedFields)||void 0===_a?void 0:_a.asMutable().filter((f=>f!==NO_SELECTION_ID)))||[],disabledFieldsInPrevSelected=[],disableFieldsNotInPrevSelected=[];null===(_b=this.props.disabledFields)||void 0===_b||_b.forEach((disabledField=>{prevSelectedFields.includes(disabledField)?disabledFieldsInPrevSelected.push(disabledField):disableFieldsNotInPrevSelected.push(disabledField)}));const selectedFields=((null==selectedFieldPairs?void 0:selectedFieldPairs.map((p=>p.value)))||[]).filter((f=>!disableFieldsNotInPrevSelected.includes(f))).concat(disabledFieldsInPrevSelected),diffFields=jimu_core.WpD.diffArrays(!0,prevSelectedFields,selectedFields),clickedFields=diffFields.deleted.concat(diffFields.added);clickedFields.length>0&&this.props.onFieldClick(clickedFields.map((f=>this.props.fields[f])))},this.getFields=()=>{if(this.props.fields){const res=[];return(this.props.fields[NO_SELECTION_ID]?[NO_SELECTION_ID]:[]).concat(Object.keys(this.props.fields).filter((fieldId=>fieldId!==NO_SELECTION_ID))).forEach((fieldId=>{const fieldItem=this.getFieldItem(fieldId);res.push(fieldItem)})),res}return[]},this.getSelectedFields=()=>{if(this.props.fields&&this.props.selectedFields){const res=[];return this.props.selectedFields.filter((fieldId=>!!this.props.fields[fieldId])).forEach((fieldId=>{const fieldItem=this.getFieldItem(fieldId);res.push(fieldItem)})),res}return[]},this.getFieldItem=fieldId=>{var _a,_b,_c,_d;const label=(null===(_a=this.props.fields[fieldId])||void 0===_a?void 0:_a.alias)||(null===(_b=this.props.fields[fieldId])||void 0===_b?void 0:_b.name),iconAndColor=getIconFromFieldType(null===(_c=this.props.fields[fieldId])||void 0===_c?void 0:_c.type,this.props.theme,this.props.intl);return{value:fieldId,label,disabled:null===(_d=this.props.disabledFields)||void 0===_d?void 0:_d.includes(fieldId),render:()=>jimu_core.q_G.createElement("div",{className:"d-flex justify-content-start align-items-center text-truncate","aria-label":`${null==iconAndColor?void 0:iconAndColor.title} ${label}`},iconAndColor&&jimu_core.q_G.createElement(jimu_ui.Icon,{icon:iconAndColor.icon,color:iconAndColor.color,className:"d-inline-block mr-2",size:16}),jimu_core.q_G.createElement("div",{className:"text-truncate",title:label},label))}},this.toggleAdvancedSelect=isOpen=>{this.props.toggle&&this.props.toggle(isOpen)}}render(){if(!this.props.fields||!this.props.ds)return null;const dropdownProps=this.props.dropdownProps?Object.assign(Object.assign({},this.props.dropdownProps),this.dropdownProps):this.dropdownProps;return jimu_core.q_G.createElement("div",null,jimu_core.q_G.createElement(jimu_ui.AdvancedSelect,Object.assign({size:"sm"},dropdownProps,{fluid:!0,staticValues:this.getFields(),sortValuesByLabel:!1,selectedValues:this.getSelectedFields(),onChange:this.onChange,placeholder:this.props.placeholder,isMultiple:this.props.isMultiple,hideSearchInput:this.props.isSearchInputHidden,hideBottomTools:!this.props.useMultiDropdownBottomTools,isEmptyOptionHidden:!0,title:this.getSelectedFields().map((field=>field.label)).toString(),toggle:this.toggleAdvancedSelect})))}}try{dropdownlist.displayName="dropdownlist",dropdownlist.__docgenInfo={description:"",displayName:"dropdownlist",props:{intl:{defaultValue:null,description:"",name:"intl",required:!0,type:{name:"IntlShape"}},theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:"IMThemeVariables"}},fields:{defaultValue:null,description:"",name:"fields",required:!0,type:{name:"ImmutableObject<{ [jimuName: string]: FieldSchema; }>"}},ds:{defaultValue:null,description:"",name:"ds",required:!0,type:{name:"DataSource"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},dropdownProps:{defaultValue:null,description:"",name:"dropdownProps",required:!1,type:{name:"AdvancedSelectProps"}},selectedFields:{defaultValue:null,description:"",name:"selectedFields",required:!1,type:{name:"ImmutableArray<string>"}},disabledFields:{defaultValue:null,description:"",name:"disabledFields",required:!1,type:{name:"ImmutableArray<string>"}},isMultiple:{defaultValue:null,description:"",name:"isMultiple",required:!1,type:{name:"boolean"}},useMultiDropdownBottomTools:{defaultValue:null,description:"",name:"useMultiDropdownBottomTools",required:!1,type:{name:"boolean"}},isSearchInputHidden:{defaultValue:null,description:"",name:"isSearchInputHidden",required:!1,type:{name:"boolean"}},onFieldClick:{defaultValue:null,description:"",name:"onFieldClick",required:!0,type:{name:"(clickedFields: IMFieldSchema[]) => void"}},toggle:{defaultValue:null,description:"Callback fired when toggling the select menu.",name:"toggle",required:!1,type:{name:"(isOpen?: boolean) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/field-selector/components/dropdown-list.tsx#dropdownlist"]={docgenInfo:dropdownlist.__docgenInfo,name:"dropdownlist",path:"../jimu-ui/advanced/lib/data-source-selector/components/field-selector/components/dropdown-list.tsx#dropdownlist"})}catch(__react_docgen_typescript_loader_error){}var main_data_and_view_selector_DataViewPriority,layout_runtime=__webpack_require__("../jimu-layouts/layout-runtime.tsx");!function(DataViewPriority){DataViewPriority.First="POPULATED_VIEW_SELECTION_DEFAULT",DataViewPriority.Second="VIEW_DEFAULT_SELECTION_POPULATED"}(main_data_and_view_selector_DataViewPriority||(main_data_and_view_selector_DataViewPriority={}));class _MainDataAndViewSelector extends jimu_core.q_G.PureComponent{constructor(){super(...arguments),this.getWhetherUseDsIsShallowEqual=(u1,u2)=>{let isEqual=!1;return u1&&u2&&u1.length===u2.length&&(isEqual=!u1.some(((v,i)=>v.dataSourceId!==u2[i].dataSourceId))),isEqual},this.isPopulatedView=u=>(null==u?void 0:u.dataViewId)===jimu_core.aH5.RP,this.isSelectionView=u=>(null==u?void 0:u.dataViewId)===jimu_core.aH5.W7,this.isDefaultView=u=>"USE_MAIN_DATA_SOURCE"===(null==u?void 0:u.dataViewId)||(null==u?void 0:u.dataViewId)===jimu_core.aH5.VA,this.isCommonView=u=>(null==u?void 0:u.dataViewId)&&!this.isPopulatedView(u)&&!this.isSelectionView(u)&&!this.isDefaultView(u),this.getOneDefaultUseDs=(widgetId,allUseDataSources,browserSizeMode)=>{const groupedUseDss=this.groupUseDataSourcesByMainDsAndAddAutoViews(widgetId,allUseDataSources,browserSizeMode);let priority=[];priority=this.props.defaultDataViewPriority===main_data_and_view_selector_DataViewPriority.Second?[this.isCommonView,this.isDefaultView,this.isSelectionView,this.isPopulatedView]:[this.isPopulatedView,this.isCommonView,this.isSelectionView,this.isDefaultView];const useDssFromRandomMainDs=Object.values(groupedUseDss).find((useDss=>useDss.some((u=>priority[0](u)))))||Object.values(groupedUseDss).find((useDss=>useDss.some((u=>priority[1](u)))))||Object.values(groupedUseDss).find((useDss=>useDss.some((u=>priority[2](u)))))||Object.values(groupedUseDss).find((useDss=>useDss.some((u=>priority[3](u)))))||Object.values(groupedUseDss)[0];return useDssFromRandomMainDs?useDssFromRandomMainDs.find((u=>priority[0](u)))||useDssFromRandomMainDs.find((u=>priority[1](u)))||useDssFromRandomMainDs.find((u=>priority[2](u)))||useDssFromRandomMainDs.find((u=>priority[3](u)))||useDssFromRandomMainDs[0]:null},this.getSelectedUseDsFromProps=(widgetId,selectedUseDataSource,allUseDataSources,isSelectedFromRepeatedDataSourceContext,browserSizeMode)=>{var _a,_b;const groupedUseDss=this.groupUseDataSourcesByMainDsAndAddAutoViews(widgetId,allUseDataSources,browserSizeMode),defaultSelectedUseDs=this.getOneDefaultUseDs(widgetId,allUseDataSources,browserSizeMode);return selectedUseDataSource?isSelectedFromRepeatedDataSourceContext?null===(_a=groupedUseDss[selectedUseDataSource.mainDataSourceId])||void 0===_a?void 0:_a.find((u=>u.dataViewId===jimu_core.aH5.RP)):selectedUseDataSource.dataViewId?selectedUseDataSource:null===(_b=groupedUseDss[selectedUseDataSource.mainDataSourceId])||void 0===_b?void 0:_b.find((u=>"USE_MAIN_DATA_SOURCE"===u.dataViewId)):defaultSelectedUseDs},this.getWhetherUseRepeatedDataSourceContext=(widgetId,useDataSourcesWithSameMainDs,allUseDataSources,browserSizeMode)=>{var _a;const config=getAppConfig();if(!(config&&widgetId&&useDataSourcesWithSameMainDs&&0!==useDataSourcesWithSameMainDs.length&&allUseDataSources&&browserSizeMode))return!1;const parentWidgetId=layout_runtime.searchUtils.getParentWidgetIdOfContent(config,widgetId,jimu_core.K6q.Widget,browserSizeMode),parentWidgetJson=config.widgets[parentWidgetId],isInRepeatedDataSourceContext=parentWidgetJson&&(null===(_a=parentWidgetJson.manifest.properties)||void 0===_a?void 0:_a.canProvideRepeatDataSource);let haveSameUseDataSources=!1;for(let i=0;i<useDataSourcesWithSameMainDs.length;i++){const realUseDataSource=this.getRealUseDataSources(useDataSourcesWithSameMainDs[i],allUseDataSources);if(haveSameUseDataSources=(null==parentWidgetJson?void 0:parentWidgetJson.useDataSources)&&parentWidgetJson.useDataSources.some((parentU=>(null==realUseDataSource?void 0:realUseDataSource.dataSourceId)===parentU.dataSourceId)),haveSameUseDataSources)break}return isInRepeatedDataSourceContext&&haveSameUseDataSources},this.groupUseDataSourcesByMainDsAndAddAutoViews=(widgetId,allUseDataSources,browserSizeMode)=>{if(!browserSizeMode||!allUseDataSources||0===allUseDataSources.length)return{};const groupedUseDss={};return allUseDataSources.forEach((u=>{if(groupedUseDss[u.mainDataSourceId]||(groupedUseDss[u.mainDataSourceId]=[]),!groupedUseDss[u.mainDataSourceId].some((v=>v.dataSourceId===u.dataSourceId))){if(!u.dataViewId&&u.dataSourceId===u.mainDataSourceId){const defaultDataView=u.set("dataSourceId",jimu_core.zAk.getInstance().getDataViewDataSourceId(u.mainDataSourceId,"USE_MAIN_DATA_SOURCE")).set("dataViewId","USE_MAIN_DATA_SOURCE");groupedUseDss[u.mainDataSourceId]=groupedUseDss[u.mainDataSourceId].concat(defaultDataView)}else groupedUseDss[u.mainDataSourceId]=groupedUseDss[u.mainDataSourceId].concat(u)}})),Object.keys(groupedUseDss).forEach((mainDataSourceId=>{groupedUseDss[mainDataSourceId]=groupedUseDss[mainDataSourceId].concat(this.getAutoAddedDataViews(widgetId,groupedUseDss[mainDataSourceId],allUseDataSources,browserSizeMode))})),groupedUseDss},this.getAutoAddedDataViews=(widgetId,useDataSourcesWithSameMainDs,allUseDataSources,browserSizeMode)=>{if(!useDataSourcesWithSameMainDs||0===useDataSourcesWithSameMainDs.length||!browserSizeMode)return[];const mainDs=jimu_core.zAk.getInstance().getDataSource(useDataSourcesWithSameMainDs[0].mainDataSourceId);if(!!!(null==mainDs?void 0:mainDs.query))return[];let defaultDataViews=[];if(this.props.useSelectionDataView&&!useDataSourcesWithSameMainDs.some((u=>u.dataViewId===jimu_core.aH5.W7))){const selectionView=useDataSourcesWithSameMainDs[0].set("dataSourceId",jimu_core.zAk.getInstance().getDataViewDataSourceId(useDataSourcesWithSameMainDs[0].mainDataSourceId,jimu_core.aH5.W7)).set("dataViewId",jimu_core.aH5.W7);defaultDataViews=defaultDataViews.concat(selectionView)}if(this.props.usePopulatedDataView&&this.getWhetherUseRepeatedDataSourceContext(widgetId,useDataSourcesWithSameMainDs,allUseDataSources,browserSizeMode)){const repeatContextView=useDataSourcesWithSameMainDs[0].set("dataSourceId",jimu_core.zAk.getInstance().getDataViewDataSourceId(useDataSourcesWithSameMainDs[0].mainDataSourceId,jimu_core.aH5.RP)).set("dataViewId",jimu_core.aH5.RP);defaultDataViews=defaultDataViews.concat(repeatContextView)}return defaultDataViews},this.getDsLabel=(dataSourceId,dataViewId)=>{if(dataViewId&&dataViewId===jimu_core.aH5.W7)return this.props.intl.formatMessage({id:"selectionDataView",defaultMessage:jimu_ui.defaultMessages.selectionDataView});if(dataViewId&&dataViewId===jimu_core.aH5.RP)return this.props.intl.formatMessage({id:"populatedDataView",defaultMessage:jimu_ui.defaultMessages.populatedDataView});if(dataViewId&&("USE_MAIN_DATA_SOURCE"===dataViewId||dataViewId===jimu_core.aH5.VA))return this.props.intl.formatMessage({id:"default",defaultMessage:jimu_ui.defaultMessages.default});const ds=jimu_core.zAk.getInstance().getDataSource(dataSourceId);return ds?ds.getLabel()||ds.id:dataSourceId},this.getRealUseDataSources=(tempSelectUseDs,allUseDataSources)=>{if(!tempSelectUseDs)return null;if("USE_MAIN_DATA_SOURCE"===tempSelectUseDs.dataViewId)return tempSelectUseDs.set("dataSourceId",tempSelectUseDs.mainDataSourceId).without("dataViewId");if(tempSelectUseDs.dataViewId===jimu_core.aH5.RP){const useDsHasSameMainDsAsSelectedUseDs=allUseDataSources.find((u=>u.mainDataSourceId===tempSelectUseDs.mainDataSourceId));return useDsHasSameMainDsAsSelectedUseDs&&(0,jimu_core.J3Z)(useDsHasSameMainDsAsSelectedUseDs)}return tempSelectUseDs},this.onMainDataChange=e=>{const mainDataSourceId=e.target.value;if(mainDataSourceId!==this.props.selectedUseDataSource.mainDataSourceId){const useDs=this.props.useDataSources.find((u=>u.mainDataSourceId===mainDataSourceId))||{dataSourceId:mainDataSourceId,mainDataSourceId},tempSelectUseDs=this.getOneDefaultUseDs(this.props.widgetId,(0,jimu_core.J3Z)([useDs]),this.props.browserSizeMode);this.props.onChange(this.getRealUseDataSources(tempSelectUseDs,this.props.useDataSources),(null==tempSelectUseDs?void 0:tempSelectUseDs.dataViewId)===jimu_core.aH5.RP)}},this.onDataViewChange=e=>{if(!this.props.selectedUseDataSource)return;const dataViewId=e.target.value,tempSelectUseDs=this.props.selectedUseDataSource.set("dataSourceId",jimu_core.zAk.getInstance().getDataViewDataSourceId(this.props.selectedUseDataSource.mainDataSourceId,dataViewId)).set("dataViewId",dataViewId);this.props.onChange(this.getRealUseDataSources(tempSelectUseDs,this.props.useDataSources),(null==tempSelectUseDs?void 0:tempSelectUseDs.dataViewId)===jimu_core.aH5.RP)}}componentDidMount(){if(!this.props.selectedUseDataSource){const tempSelectUseDs=this.getOneDefaultUseDs(this.props.widgetId,this.props.useDataSources,this.props.browserSizeMode);this.props.onChange(this.getRealUseDataSources(tempSelectUseDs,this.props.useDataSources),(null==tempSelectUseDs?void 0:tempSelectUseDs.dataViewId)===jimu_core.aH5.RP)}}componentDidUpdate(prevProps){if(prevProps.widgetId!==this.props.widgetId||!this.getWhetherUseDsIsShallowEqual(prevProps.useDataSources,this.props.useDataSources)||prevProps.browserSizeMode!==this.props.browserSizeMode||!this.props.selectedUseDataSource){const tempSelectUseDs=this.getOneDefaultUseDs(this.props.widgetId,this.props.useDataSources,this.props.browserSizeMode);this.props.onChange(this.getRealUseDataSources(tempSelectUseDs,this.props.useDataSources),(null==tempSelectUseDs?void 0:tempSelectUseDs.dataViewId)===jimu_core.aH5.RP)}}render(){var _a;if(!this.props.useDataSources)return null;const groupedUseDss=this.groupUseDataSourcesByMainDsAndAddAutoViews(this.props.widgetId,this.props.useDataSources,this.props.browserSizeMode),tempSelectUseDs=this.getSelectedUseDsFromProps(this.props.widgetId,this.props.selectedUseDataSource,this.props.useDataSources,this.props.isSelectedFromRepeatedDataSourceContext,this.props.browserSizeMode);return(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)("w-100",{[this.props.className]:!!this.props.className})},(0,jimu_core.Yac)("div",{className:"component-main-data-and-view",role:"group","aria-label":this.props.intl.formatMessage({id:"data",defaultMessage:jimu_ui.defaultMessages.data})},!this.props.hideMainDataSourceSelect&&(0,jimu_core.Yac)("div",{className:"w-100 text-truncate mb-3 option-label mb-2"},this.props.intl.formatMessage({id:"data",defaultMessage:jimu_ui.defaultMessages.data})),!this.props.hideMainDataSourceSelect&&(0,jimu_core.Yac)("div",{className:"flex-grow-1"},(0,jimu_core.Yac)(jimu_ui.Select,{value:null==tempSelectUseDs?void 0:tempSelectUseDs.mainDataSourceId,className:"jimu-outline-inside",onChange:this.onMainDataChange,size:"sm"},Object.keys(groupedUseDss).sort(((d1,d2)=>null==d1?void 0:d1.localeCompare(d2))).map(((mainDataSourceId,i)=>(0,jimu_core.Yac)("option",{value:mainDataSourceId,key:i,title:this.getDsLabel(mainDataSourceId)},(0,jimu_core.Yac)("div",{className:"text-truncate"},this.getDsLabel(mainDataSourceId))))))),(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)("flex-grow-1",{"mt-2":!this.props.hideMainDataSourceSelect})},(0,jimu_core.Yac)(jimu_ui.Select,{value:null==tempSelectUseDs?void 0:tempSelectUseDs.dataViewId,className:"jimu-outline-inside",onChange:this.onDataViewChange,size:"sm"},null===(_a=groupedUseDss[null==tempSelectUseDs?void 0:tempSelectUseDs.mainDataSourceId])||void 0===_a?void 0:_a.sort(((u1,u2)=>{var _a;return null===(_a=null==u1?void 0:u1.dataSourceId)||void 0===_a?void 0:_a.localeCompare(null==u2?void 0:u2.dataSourceId)})).map(((u,i)=>(0,jimu_core.Yac)("option",{value:u.dataViewId,key:i,title:this.getDsLabel(u.dataSourceId,u.dataViewId)},(0,jimu_core.Yac)("div",{className:"text-truncate"},this.getDsLabel(u.dataSourceId,u.dataViewId)))))))))}}const __MainDataAndViewSelector=jimu_core.E_S.connect(((state,ownProps)=>{var _a,_b;return{browserSizeMode:(null===(_a=null==state?void 0:state.appContext)||void 0===_a?void 0:_a.isBuilder)?null===(_b=null==state?void 0:state.appStateInBuilder)||void 0===_b?void 0:_b.browserSizeMode:null==state?void 0:state.browserSizeMode}}))(_MainDataAndViewSelector),main_data_and_view_selector_MainDataAndViewSelector=(0,jimu_core.j4T)((0,jimu_theme.Xy)(__MainDataAndViewSelector,"MainDataAndViewSelector"));try{First.displayName="DataViewPriority.First",First.__docgenInfo={description:"populated data view > common data view (aka user added data view) > selection data view > default data view (aka main data source)",displayName:"DataViewPriority.First",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/main-data-and-view-selector.tsx#DataViewPriority.First"]={docgenInfo:main_data_and_view_selector_DataViewPriority.First.__docgenInfo,name:"DataViewPriority.First",path:"../jimu-ui/advanced/lib/data-source-selector/components/main-data-and-view-selector.tsx#DataViewPriority.First"})}catch(__react_docgen_typescript_loader_error){}try{Second.displayName="DataViewPriority.Second",Second.__docgenInfo={description:"common data view > default data view > selection data view > populated data view",displayName:"DataViewPriority.Second",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/main-data-and-view-selector.tsx#DataViewPriority.Second"]={docgenInfo:main_data_and_view_selector_DataViewPriority.Second.__docgenInfo,name:"DataViewPriority.Second",path:"../jimu-ui/advanced/lib/data-source-selector/components/main-data-and-view-selector.tsx#DataViewPriority.Second"})}catch(__react_docgen_typescript_loader_error){}try{main_data_and_view_selector_MainDataAndViewSelector.displayName="MainDataAndViewSelector",main_data_and_view_selector_MainDataAndViewSelector.__docgenInfo={description:"",displayName:"MainDataAndViewSelector",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(useDataSource: IMUseDataSource, isFromRepeatedDataSourceContext: boolean) => void"}},widgetId:{defaultValue:null,description:"Use widget id to get widget context, e.g. whether widget is in repeated data source context.",name:"widgetId",required:!1,type:{name:"string"}},useDataSources:{defaultValue:null,description:"",name:"useDataSources",required:!0,type:{name:"Readonly<Remaining<UseDataSource>> & Additions<UseDataSource> & Overrides<UseDataSource> & ReadOnlyIndexer<...>"}},isSelectedFromRepeatedDataSourceContext:{defaultValue:null,description:"Whether selected use data source is from repeated data source context.",name:"isSelectedFromRepeatedDataSourceContext",required:!1,type:{name:"boolean"}},useSelectionDataView:{defaultValue:null,description:"Whether to use selection data view.",name:"useSelectionDataView",required:!1,type:{name:"boolean"}},usePopulatedDataView:{defaultValue:null,description:"Whether to use populated data view.",name:"usePopulatedDataView",required:!1,type:{name:"boolean"}},selectedUseDataSource:{defaultValue:null,description:"",name:"selectedUseDataSource",required:!1,type:{name:"ImmutableObjectMixin<UseDataSource> & { readonly dataSourceId: string; readonly mainDataSourceId: string; readonly dataViewId?: string; readonly rootDataSourceId?: string; readonly fields?: ImmutableArray<...>; readonly useFieldsInPopupInfo?: boolean; readonly useFieldsInSymbol?: boolean; }"}},defaultDataViewPriority:{defaultValue:null,description:"The priority of default selected data view if no `selectedUseDataSource`.",name:"defaultDataViewPriority",required:!1,type:{name:"enum",value:[{value:'"POPULATED_VIEW_SELECTION_DEFAULT"'},{value:'"VIEW_DEFAULT_SELECTION_POPULATED"'}]}},hideMainDataSourceSelect:{defaultValue:null,description:"Whether to hide the select component which is to select main data source.",name:"hideMainDataSourceSelect",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/main-data-and-view-selector.tsx#MainDataAndViewSelector"]={docgenInfo:main_data_and_view_selector_MainDataAndViewSelector.__docgenInfo,name:"MainDataAndViewSelector",path:"../jimu-ui/advanced/lib/data-source-selector/components/main-data-and-view-selector.tsx#MainDataAndViewSelector"})}catch(__react_docgen_typescript_loader_error){}class _FieldSelectorInner extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.getWhetherArrayIsShallowEqual=(arr1,arr2)=>{let isEqual=!1;return arr1&&arr2&&arr1.length===arr2.length&&(isEqual=!arr1.some(((v,i)=>v!==arr2[i]))),isEqual},this.getDefaultSelectedDs=(dataSources,selectedFields)=>this.hasSelectedFields()||this.props.isDataSourceDropDownHidden?this.getDsFromSelectedFieldsAndUseDss(dataSources,selectedFields):null,this.hasSelectedFields=()=>!!this.props.selectedFields&&(Array.isArray(this.props.selectedFields)?this.props.selectedFields.length>0:"object"==typeof this.props.selectedFields&&Object.values(this.props.selectedFields).every((s=>s&&s.length>0))),this.getDsFromSelectedFieldsAndUseDss=(dataSources,selectedFields)=>{let ds;if(selectedFields&&dataSources){if(this.getAreFromMultipleDss(dataSources,selectedFields)){const dsId=Object.keys(this.props.selectedFields)[0];if(dsId.split("-").reverse()[0]===jimu_core.aH5.W7){const dataView=jimu_core.zAk.getInstance().getDataSource(dsId),mainDs=dataView&&dataView.getMainDataSource(),mainDsId=mainDs&&mainDs.id;ds=this.props.dataSources.some((ds=>ds&&ds.getMainDataSource().id===mainDsId))?dataView:null}else ds=this.props.dataSources.find((ds=>ds&&ds.id===dsId))}else ds=dataSources[0]}else dataSources&&(ds=dataSources[0]);return ds},this.getAreFromMultipleDss=(dataSources,selectedFields)=>selectedFields?!Array.isArray(selectedFields):(null==dataSources?void 0:dataSources.length)>1,this.getDsLabel=ds=>ds&&ds.getDataSourceJson()&&(ds.getLabel()||ds.id)||"",this.getFieldsJimuNameFromMultiDssFields=(selectedDs,dataSources,multiDssFields,isMultiple)=>{if(!selectedDs||!selectedDs.id||!multiDssFields)return(0,jimu_core.J3Z)([]);const fields=this.getAreFromMultipleDss(dataSources,multiDssFields)?(0,jimu_core.J3Z)(multiDssFields[selectedDs.id]):multiDssFields;return fields?isMultiple?fields:fields.slice(0,1):(0,jimu_core.J3Z)([])},this.getSelectedUseDataSource=()=>this.state.selectedDs?this.getUseDataSources([this.state.selectedDs])[0]:null,this.getWhetherJimuNameIsInHiddenFields=jimuName=>{var _a;let isInHiddenFields=!1;if(this.props.hiddenFields){const areFromMultipleDataSources=this.getAreFromMultipleDss(this.props.dataSources,this.props.selectedFields);let hiddenFields=(0,jimu_core.J3Z)([]);hiddenFields=areFromMultipleDataSources?this.props.hiddenFields[null===(_a=this.state.selectedDs)||void 0===_a?void 0:_a.id]:this.props.hiddenFields,isInHiddenFields=hiddenFields.some((f=>f===jimuName))}return isInHiddenFields},this.getValidFields=ds=>{const allFields=this.getAllFields(ds);if(!allFields)return null;let fields;if(this.props.types||this.props.hiddenFields||this.state.searchValue){let type,name,f=(0,jimu_core.J3Z)({});Object.keys(allFields).forEach((jimuName=>{type=allFields[jimuName].type,name=allFields[jimuName].alias||allFields[jimuName].name;const isInTypes=!this.props.types||type&&this.props.types&&this.props.types.some((t=>t===type)),isInHiddenFields=this.getWhetherJimuNameIsInHiddenFields(jimuName),isMatchingSearchValue=!this.state.searchValue||this.state.searchValue&&name&&name.toLowerCase().includes(this.state.searchValue.toLowerCase());isInTypes&&!isInHiddenFields&&isMatchingSearchValue&&(f=f.setIn([jimuName],allFields[jimuName]))})),fields=f}else fields=allFields;return fields&&this.props.noSelectionItem&&(fields=fields.set(NO_SELECTION_ID,this.getNoSelectionItem())),fields},this.getNoSelectionItem=()=>(0,jimu_core.J3Z)(Object.assign(Object.assign({},this.props.noSelectionItem),{jimuName:NO_SELECTION_ID})),this.getUseDataSources=dataSources=>{if(!dataSources)return null;let useDataSources=(0,jimu_core.J3Z)([]);return dataSources.forEach((d=>{var _a;d&&(useDataSources=useDataSources.concat({dataSourceId:d.id,mainDataSourceId:d.getMainDataSource().id,dataViewId:d.dataViewId,rootDataSourceId:null===(_a=d.getRootDataSource())||void 0===_a?void 0:_a.id}))})),useDataSources},this.onSelectedUseDsChange=(useDataSource,isSelectedFromRepeatedDataSourceContext)=>{const selectedDs=jimu_core.zAk.getInstance().getDataSource(useDataSource.dataSourceId);if(this.setState({selectedDs,isFromRepeatedDs:isSelectedFromRepeatedDataSourceContext}),this.hasSelectedFields()){const selectedFields=this.getFieldsJimuNameFromMultiDssFields(this.state.selectedDs,this.props.dataSources,this.props.selectedFields,this.props.isMultiple).map((jimuName=>{var _a;return selectedDs&&(null===(_a=this.getAllFields(selectedDs))||void 0===_a?void 0:_a[jimuName])})).filter((f=>!!f));this.props.onChange&&this.props.onChange(selectedFields.asMutable(),selectedDs,isSelectedFromRepeatedDataSourceContext)}},this.onSearchChange=e=>{this.setState({searchValue:e.target.value})},this.onSelectedFieldsChange=clickedFields=>{if(clickedFields.some((f=>(null==f?void 0:f.jimuName)===NO_SELECTION_ID)))return void(this.props.onChange&&this.props.onChange([],this.state.selectedDs,this.state.isFromRepeatedDs));const prevSelectedFieldsJimuName=this.getFieldsJimuNameFromMultiDssFields(this.state.selectedDs,this.props.dataSources,this.props.selectedFields,this.props.isMultiple).asMutable(),fields=this.getAllFields(this.state.selectedDs);let currentSelectedFields=prevSelectedFieldsJimuName.map((jimuName=>null==fields?void 0:fields[jimuName])).filter((f=>f));clickedFields.forEach((clickedField=>{clickedField&&(currentSelectedFields=prevSelectedFieldsJimuName.some((selectedFieldJimuName=>selectedFieldJimuName===clickedField.jimuName))?currentSelectedFields.filter((selectedField=>selectedField.jimuName!==clickedField.jimuName)):currentSelectedFields.concat(clickedField))})),this.props.onChange&&this.props.onChange(this.props.isMultiple?currentSelectedFields:[currentSelectedFields.pop()],this.state.selectedDs,this.state.isFromRepeatedDs)},this.toggleDropdown=isOpen=>{this.props.toggle&&this.props.toggle(isOpen)},this.state={selectedDs:this.getDefaultSelectedDs(this.props.dataSources,this.props.selectedFields),searchValue:"",isFromRepeatedDs:!!this.props.isSelectedFromRepeatedDataSourceContext}}componentDidMount(){var _a;if(this.props.useDefault&&!this.props.selectedFields){const defaultSelectedField=Object.values(null!==(_a=this.getValidFields(this.state.selectedDs))&&void 0!==_a?_a:{})[0];defaultSelectedField&&this.props.onChange([defaultSelectedField],this.state.selectedDs,this.state.isFromRepeatedDs)}}componentDidUpdate(prevProps,prevState){var _a;if(this.getWhetherArrayIsShallowEqual(this.props.dataSources,prevProps.dataSources)&&this.props.selectedFields===prevProps.selectedFields||this.setState({selectedDs:this.getDefaultSelectedDs(this.props.dataSources,this.props.selectedFields)}),this.props.useDefault&&!this.props.selectedFields&&prevState.selectedDs!==this.state.selectedDs){const defaultSelectedField=Object.values(null!==(_a=this.getValidFields(this.state.selectedDs))&&void 0!==_a?_a:{})[0];defaultSelectedField&&this.props.onChange([defaultSelectedField],this.state.selectedDs,this.state.isFromRepeatedDs)}prevProps.isSelectedFromRepeatedDataSourceContext!==this.props.isSelectedFromRepeatedDataSourceContext&&this.setState({isFromRepeatedDs:!!this.props.isSelectedFromRepeatedDataSourceContext})}getAllFields(ds){var _a;const selectedFieldJimuNames=null==ds?void 0:ds.getSelectedFields(),fields=null===(_a=null==ds?void 0:ds.getSchema())||void 0===_a?void 0:_a.fields,toBeRemovedFieldJimuNames=fields?Object.keys(fields).filter((jimuName=>!selectedFieldJimuNames.includes(jimuName))):[];return null==fields?void 0:fields.without(...toBeRemovedFieldJimuNames)}render(){if(!this.props.dataSources||0===this.props.dataSources.filter((ds=>!!ds)).length)return console.warn("No data sources"),null;const validFields=this.getValidFields(this.state.selectedDs),selectedFieldsJimuName=this.getFieldsJimuNameFromMultiDssFields(this.state.selectedDs,this.props.dataSources,this.props.selectedFields,this.props.isMultiple),disableFieldsJimuName=this.getFieldsJimuNameFromMultiDssFields(this.state.selectedDs,this.props.dataSources,this.props.disabledFields,this.props.isMultiple),selectedFieldsForUI=this.props.noSelectionItem&&0===selectedFieldsJimuName.length?(0,jimu_core.J3Z)([this.getNoSelectionItem().jimuName]):selectedFieldsJimuName,dropdownProps=Object.assign(Object.assign({},this.props.dropdownProps),{useKeyUpEvent:this.props.useKeyUpEvent,"aria-label":this.props["aria-label"]});return(0,jimu_core.Yac)("div",{style:this.props.style,className:(0,jimu_core.xWm)("w-100 h-100",{[this.props.className]:!!this.props.className})},(0,jimu_core.Yac)("div",{className:"component-field-selector w-100 h-100"},this.props.isDataSourceDropDownHidden?null:(0,jimu_core.Yac)("div",{className:"ds-name p-4 d-flex justify-content-between align-items-center"},(0,jimu_core.Yac)(main_data_and_view_selector_MainDataAndViewSelector,{widgetId:this.props.widgetId,useDataSources:this.getUseDataSources(this.props.dataSources),onChange:this.onSelectedUseDsChange,useSelectionDataView:this.props.useSelectionDataView,usePopulatedDataView:this.props.usePopulatedDataView,selectedUseDataSource:this.getSelectedUseDataSource(),isSelectedFromRepeatedDataSourceContext:this.state.isFromRepeatedDs})),this.props.isSearchInputHidden||this.props.useDropdown?null:(0,jimu_core.Yac)("div",{className:"d-inline-block w-100 px-4 mb-2 item-selector-search"},(0,jimu_core.Yac)(jimu_ui.TextInput,{placeholder:this.props.intl.formatMessage({id:"search",defaultMessage:jimu_core.kgw.search}),onChange:this.onSearchChange,className:"d-inline-block search-input",value:this.state.searchValue,prefix:(0,jimu_core.Yac)(search.V,{color:this.props.theme.ref.palette.neutral[1200]})})),this.props.useDropdown?(0,jimu_core.Yac)(MultipleDropdownList,{placeholder:this.props.placeholder,ds:this.state.selectedDs,fields:validFields,selectedFields:selectedFieldsForUI,isMultiple:this.props.isMultiple,isSearchInputHidden:this.props.isSearchInputHidden,onFieldClick:this.onSelectedFieldsChange,theme:this.props.theme,dropdownProps,useMultiDropdownBottomTools:this.props.useMultiDropdownBottomTools,intl:this.props.intl,toggle:this.props.toggle,disabledFields:disableFieldsJimuName}):(0,jimu_core.Yac)(CommonList,{ds:this.state.selectedDs,fields:validFields,selectedFields:selectedFieldsForUI,intl:this.props.intl,isMultiple:this.props.isMultiple,onFieldClick:this.onSelectedFieldsChange,theme:this.props.theme})))}}const FieldSelectorInner=(0,jimu_theme.Xy)((0,jimu_theme.SL)((0,jimu_core.j4T)(_FieldSelectorInner)),"FieldSelector");try{_FieldSelectorInner.displayName="_FieldSelectorInner",_FieldSelectorInner.__docgenInfo={description:"The `FieldSelector` component allows users to select fields from a data source.\n\n```ts\nimport { FieldSelector } from 'jimu-ui/advanced/data-source-selector'\n```",displayName:"_FieldSelectorInner",props:{dataSources:{defaultValue:null,description:"",name:"dataSources",required:!0,type:{name:"DataSource[]"}},types:{defaultValue:null,description:"",name:"types",required:!1,type:{name:"ImmutableArray<JimuFieldType>"}},selectedFields:{defaultValue:null,description:"",name:"selectedFields",required:!1,type:{name:"ImmutableArray<string> | ImmutableObject<{ [dataSourceId: string]: string[]; }>"}},hiddenFields:{defaultValue:null,description:"",name:"hiddenFields",required:!1,type:{name:"ImmutableArray<string> | ImmutableObject<{ [dataSourceId: string]: string[]; }>"}},disabledFields:{defaultValue:null,description:"",name:"disabledFields",required:!1,type:{name:"ImmutableArray<string> | ImmutableObject<{ [dataSourceId: string]: string[]; }>"}},isDataSourceDropDownHidden:{defaultValue:null,description:"",name:"isDataSourceDropDownHidden",required:!1,type:{name:"boolean"}},isSearchInputHidden:{defaultValue:null,description:"",name:"isSearchInputHidden",required:!1,type:{name:"boolean"}},useMultiDropdownBottomTools:{defaultValue:null,description:"",name:"useMultiDropdownBottomTools",required:!1,type:{name:"boolean"}},isSelectedFromRepeatedDataSourceContext:{defaultValue:null,description:"",name:"isSelectedFromRepeatedDataSourceContext",required:!1,type:{name:"boolean"}},useDropdown:{defaultValue:null,description:"",name:"useDropdown",required:!1,type:{name:"boolean"}},useDefault:{defaultValue:null,description:"",name:"useDefault",required:!1,type:{name:"boolean"}},isMultiple:{defaultValue:null,description:"",name:"isMultiple",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},dropdownProps:{defaultValue:null,description:"",name:"dropdownProps",required:!1,type:{name:"AdvancedSelectProps"}},widgetId:{defaultValue:null,description:"",name:"widgetId",required:!1,type:{name:"string"}},useSelectionDataView:{defaultValue:null,description:"",name:"useSelectionDataView",required:!1,type:{name:"boolean"}},usePopulatedDataView:{defaultValue:null,description:"",name:"usePopulatedDataView",required:!1,type:{name:"boolean"}},noSelectionItem:{defaultValue:null,description:"",name:"noSelectionItem",required:!1,type:{name:"{ name: string; }"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(allSelectedFields: IMFieldSchema[], ds: DataSource, isSelectedFromRepeatedDataSourceContext: boolean) => void"}},useKeyUpEvent:{defaultValue:null,description:"",name:"useKeyUpEvent",required:!1,type:{name:"boolean"}},toggle:{defaultValue:null,description:"Callback fired when toggling the select menu.",name:"toggle",required:!1,type:{name:"(isOpen?: boolean) => void"}},intl:{defaultValue:null,description:"",name:"intl",required:!0,type:{name:"IntlShape"}},theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:"IMThemeVariables"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/field-selector/components/field-selector-inner.tsx#_FieldSelectorInner"]={docgenInfo:_FieldSelectorInner.__docgenInfo,name:"_FieldSelectorInner",path:"../jimu-ui/advanced/lib/data-source-selector/components/field-selector/components/field-selector-inner.tsx#_FieldSelectorInner"})}catch(__react_docgen_typescript_loader_error){}try{FieldSelectorInner.displayName="FieldSelectorInner",FieldSelectorInner.__docgenInfo={description:"",displayName:"FieldSelectorInner",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(allSelectedFields: IMFieldSchema[], ds: DataSource, isSelectedFromRepeatedDataSourceContext: boolean) => void"}},toggle:{defaultValue:null,description:"Callback fired when toggling the select menu.",name:"toggle",required:!1,type:{name:"(isOpen?: boolean) => void"}},isMultiple:{defaultValue:null,description:"",name:"isMultiple",required:!1,type:{name:"boolean"}},useKeyUpEvent:{defaultValue:null,description:"",name:"useKeyUpEvent",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},widgetId:{defaultValue:null,description:"",name:"widgetId",required:!1,type:{name:"string"}},types:{defaultValue:null,description:"",name:"types",required:!1,type:{name:"ImmutableArray<JimuFieldType>"}},dataSources:{defaultValue:null,description:"",name:"dataSources",required:!0,type:{name:"DataSource[]"}},selectedFields:{defaultValue:null,description:"",name:"selectedFields",required:!1,type:{name:"ImmutableArray<string> | ImmutableObject<{ [dataSourceId: string]: string[]; }>"}},hiddenFields:{defaultValue:null,description:"",name:"hiddenFields",required:!1,type:{name:"ImmutableArray<string> | ImmutableObject<{ [dataSourceId: string]: string[]; }>"}},disabledFields:{defaultValue:null,description:"",name:"disabledFields",required:!1,type:{name:"ImmutableArray<string> | ImmutableObject<{ [dataSourceId: string]: string[]; }>"}},isDataSourceDropDownHidden:{defaultValue:null,description:"",name:"isDataSourceDropDownHidden",required:!1,type:{name:"boolean"}},isSearchInputHidden:{defaultValue:null,description:"",name:"isSearchInputHidden",required:!1,type:{name:"boolean"}},useMultiDropdownBottomTools:{defaultValue:null,description:"",name:"useMultiDropdownBottomTools",required:!1,type:{name:"boolean"}},isSelectedFromRepeatedDataSourceContext:{defaultValue:null,description:"",name:"isSelectedFromRepeatedDataSourceContext",required:!1,type:{name:"boolean"}},useDropdown:{defaultValue:null,description:"",name:"useDropdown",required:!1,type:{name:"boolean"}},useDefault:{defaultValue:null,description:"",name:"useDefault",required:!1,type:{name:"boolean"}},dropdownProps:{defaultValue:null,description:"",name:"dropdownProps",required:!1,type:{name:"AdvancedSelectProps"}},useSelectionDataView:{defaultValue:null,description:"",name:"useSelectionDataView",required:!1,type:{name:"boolean"}},usePopulatedDataView:{defaultValue:null,description:"",name:"usePopulatedDataView",required:!1,type:{name:"boolean"}},noSelectionItem:{defaultValue:null,description:"",name:"noSelectionItem",required:!1,type:{name:"{ name: string; }"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"IMThemeVariables"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/field-selector/components/field-selector-inner.tsx#FieldSelectorInner"]={docgenInfo:FieldSelectorInner.__docgenInfo,name:"FieldSelectorInner",path:"../jimu-ui/advanced/lib/data-source-selector/components/field-selector/components/field-selector-inner.tsx#FieldSelectorInner"})}catch(__react_docgen_typescript_loader_error){}var field_selector_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};class field_selector_FieldSelector extends jimu_core.q_G.PureComponent{render(){const _a=this.props,{useDataSources,dataSources}=_a,otherProps=field_selector_rest(_a,["useDataSources","dataSources"]);return dataSources?jimu_core.q_G.createElement(FieldSelectorInner,Object.assign({},this.props)):1===(null==useDataSources?void 0:useDataSources.length)?jimu_core.q_G.createElement(jimu_core.pjH,{useDataSource:useDataSources[0]},((ds,info)=>jimu_core.q_G.createElement(FieldSelectorInner,Object.assign({},otherProps,{dataSources:[ds]})))):jimu_core.q_G.createElement(jimu_core.P0p,{useDataSources},((dss,infos)=>jimu_core.q_G.createElement(FieldSelectorInner,Object.assign({},otherProps,{dataSources:dss&&Object.values(dss)}))))}}try{field_selector_FieldSelector.displayName="FieldSelector",field_selector_FieldSelector.__docgenInfo={description:"A component to select field from a data source.",displayName:"FieldSelector",props:{useDataSources:{defaultValue:null,description:"Data sources only supports feature layer.\nIf your data source is initialized, please use `dataSources`, or use `useDataSources`.",name:"useDataSources",required:!1,type:{name:"ImmutableArray<UseDataSource>"}},dataSources:{defaultValue:null,description:"@ignore",name:"dataSources",required:!1,type:{name:"DataSource[]"}},types:{defaultValue:null,description:"Field type.\nIf `types` is not defined, will list all types of fields.",name:"types",required:!1,type:{name:"ImmutableArray<JimuFieldType>"}},selectedFields:{defaultValue:null,description:"Selected fields, use object when selected fields are from multiple data sources.",name:"selectedFields",required:!1,type:{name:"ImmutableArray<string> | ImmutableObject<{ [dataSourceId: string]: string[]; }>"}},hiddenFields:{defaultValue:null,description:"Fields which should be hidden, use object when selected fields are from multiple data sources.",name:"hiddenFields",required:!1,type:{name:"ImmutableArray<string> | ImmutableObject<{ [dataSourceId: string]: string[]; }>"}},disabledFields:{defaultValue:null,description:"Fields which should be disabled, use object when selected fields are from multiple data sources.",name:"disabledFields",required:!1,type:{name:"ImmutableArray<string> | ImmutableObject<{ [dataSourceId: string]: string[]; }>"}},isDataSourceDropDownHidden:{defaultValue:{value:"false"},description:"Whether or not to hide the data source dropdown, the dropdown is used to change the data source when multiple data sources are passed.",name:"isDataSourceDropDownHidden",required:!1,type:{name:"boolean"}},isSearchInputHidden:{defaultValue:{value:"false"},description:"Whether or not to hide the search input, the input is used to filter fields.",name:"isSearchInputHidden",required:!1,type:{name:"boolean"}},useMultiDropdownBottomTools:{defaultValue:{value:"false"},description:"Whether to use tools in the bottom of multi-select dropdown.\nPlease note the props works only when both of `useDropdown` and `isMultiple` are true.",name:"useMultiDropdownBottomTools",required:!1,type:{name:"boolean"}},isSelectedFromRepeatedDataSourceContext:{defaultValue:{value:"false"},description:"Whether selected fields are from repeated data source context.",name:"isSelectedFromRepeatedDataSourceContext",required:!1,type:{name:"boolean"}},useDropdown:{defaultValue:{value:"false"},description:"Whether or not to use dropdown to show the field list. If true, it will show dropdown, otherwise it will not use dropdown.",name:"useDropdown",required:!1,type:{name:"boolean"}},useDefault:{defaultValue:{value:"false"},description:"Whether or not to use a default field as selected. If true, will call `onChange` if data source changes and no `selectedFields`.",name:"useDefault",required:!1,type:{name:"boolean"}},isMultiple:{defaultValue:{value:"false"},description:"Whether or not to support multiple selection.",name:"isMultiple",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"Placeholder for dropdown, if `useDropdown` is true.",name:"placeholder",required:!1,type:{name:"string"}},dropdownProps:{defaultValue:null,description:"Dropdown props, if `useDropdown` is true.",name:"dropdownProps",required:!1,type:{name:"AdvancedSelectProps"}},widgetId:{defaultValue:null,description:"Use widget id to get widget context, e.g., whether widget is in repeated data source context.",name:"widgetId",required:!1,type:{name:"string"}},useSelectionDataView:{defaultValue:{value:"false"},description:"Whether to use selection data view.",name:"useSelectionDataView",required:!1,type:{name:"boolean"}},usePopulatedDataView:{defaultValue:{value:"false"},description:"Whether to use populated data view.",name:"usePopulatedDataView",required:!1,type:{name:"boolean"}},noSelectionItem:{defaultValue:null,description:"If there is no selected fields, will highlight or select this item.\nIf click this item, will clear all selected fields.",name:"noSelectionItem",required:!1,type:{name:"{ name: string; }"}},className:{defaultValue:null,description:"@ignore",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"@ignore",name:"style",required:!1,type:{name:"CSSProperties"}},onChange:{defaultValue:null,description:"Callback when selected fields change.",name:"onChange",required:!1,type:{name:"(allSelectedFields: IMFieldSchema[], ds: DataSource, isSelectedFromRepeatedDataSourceContext: boolean) => void"}},useKeyUpEvent:{defaultValue:null,description:"Whether pass `useKeyUpEvent` to the AdvanceSelect",name:"useKeyUpEvent",required:!1,type:{name:"boolean"}},"aria-label":{defaultValue:null,description:"aria-label used for the screen reader",name:"aria-label",required:!1,type:{name:"string"}},toggle:{defaultValue:null,description:"Callback fired when toggling the select menu.",name:"toggle",required:!1,type:{name:"(isOpen?: boolean) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/field-selector/index.tsx#FieldSelector"]={docgenInfo:field_selector_FieldSelector.__docgenInfo,name:"FieldSelector",path:"../jimu-ui/advanced/lib/data-source-selector/components/field-selector/index.tsx#FieldSelector"})}catch(__react_docgen_typescript_loader_error){}var esm=__webpack_require__("../node_modules/@esri/arcgis-rest-request/dist/esm/index.js"),field_selector_with_full_text_index_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};const{useState,useEffect,useRef}=jimu_core.q_G;var AddDefinitionStatus;!function(AddDefinitionStatus){AddDefinitionStatus.Success="SUCCESS",AddDefinitionStatus.Error="ERROR"}(AddDefinitionStatus||(AddDefinitionStatus={}));const field_selector_with_full_text_index_FieldSelectorWithFullTextIndex=props=>{const hadUpdateDefaultIndexes=useRef(!1),nls=jimu_core.JLE.useTranslation(jimu_ui.defaultMessages),{useDataSources,selectedFields,addDefinitionStatusChange,onChange}=props,[showLoading,setShowLoading]=useState(!1),[allSelectedFields,setAllSelectedFields]=useState(null);useEffect((()=>{if(!hadUpdateDefaultIndexes.current&&selectedFields){const newSelectedFields=getFieldSchema(selectedFields);setAllSelectedFields(newSelectedFields),hadUpdateDefaultIndexes.current=!0,addIndexesForDs(newSelectedFields)}}),[selectedFields]),useEffect((()=>()=>{addIndexesForDs()}),[]);const getFieldSchema=selectedFields=>{var _a;const ds=getDs();if(!ds||!selectedFields)return[];const fields=(null===(_a=null==ds?void 0:ds.getSchema())||void 0===_a?void 0:_a.fields)||{},fieldSchema=[];for(const jimuName in fields)selectedFields.includes(fields[jimuName].name)&&fieldSchema.push((0,jimu_core.J3Z)(fields[jimuName]));return fieldSchema},onFieldChange=jimu_core.JLE.useEventCallback(((allSelectedFields,ds,isSelectedFromRepeatedDataSourceContext)=>{setAllSelectedFields(allSelectedFields),onChange&&onChange(allSelectedFields,ds,isSelectedFromRepeatedDataSourceContext)})),updateDsDefinition=(newIndexes=[])=>{const ds=getDs(),definition=ds.getLayerDefinition();let indexes=(null==definition?void 0:definition.indexes)||[];indexes=indexes.concat(newIndexes);const newDefinition=Object.assign(Object.assign({},definition),{indexes});ds.setLayerDefinition(newDefinition)},getCurrentDsIndexesField=()=>field_selector_with_full_text_index_awaiter(void 0,void 0,void 0,(function*(){let indexesField=[];return field_selector_with_full_text_index_awaiter(void 0,void 0,void 0,(function*(){const dsUrl=getDs().getDataSourceJson().url;return jimu_core.Le1.requestWrapper(dsUrl,(session=>field_selector_with_full_text_index_awaiter(void 0,void 0,void 0,(function*(){return esm.request(dsUrl,{params:{f:"json"},authentication:session,httpMethod:"GET"}).then((res=>{const indexes=(null==res?void 0:res.indexes)||[];return Promise.resolve(indexes)}))}))))})).then((indexes=>(null==indexes||indexes.forEach((item=>{var _a;if(item.fields&&"FullText"===(null==item?void 0:item.indexType)){const currentFields=(null===(_a=item.fields)||void 0===_a?void 0:_a.split(", "))||[];indexesField=indexesField.concat(currentFields)}})),Promise.resolve(indexesField))))})),getIndexesByField=allSelectedFields=>{var _a,_b;const indexes=[];allSelectedFields.forEach((fields=>{fields.esriType!==jimu_core.oX.GlobalID&&fields.type===jimu_core.Eo3.String&&indexes.push({name:`exb_${fields.name}`,fields:fields.name})}));const totalIndex={name:`exb_${null===(_a=null==allSelectedFields?void 0:allSelectedFields[0])||void 0===_a?void 0:_a.name}_total`,fields:null===(_b=null==allSelectedFields?void 0:allSelectedFields.map((field=>field.name)))||void 0===_b?void 0:_b.join(", "),indexType:"FullText"};return indexes.push(totalIndex),indexes},getDs=()=>{var _a;const dsId=null===(_a=useDataSources[0])||void 0===_a?void 0:_a.dataSourceId;return jimu_core.zAk.getInstance().getDataSource(dsId)},addIndexesForDs=selectedFields=>field_selector_with_full_text_index_awaiter(void 0,void 0,void 0,(function*(){var _a,_b;const ds=getDs();if(null===(_b=null===(_a=null==ds?void 0:ds.getLayerDefinition())||void 0===_a?void 0:_a.advancedQueryCapabilities)||void 0===_b?void 0:_b.supportsFullTextSearch){const currentSelectedFields=selectedFields||allSelectedFields;((fields,ds)=>{field_selector_with_full_text_index_awaiter(void 0,void 0,void 0,(function*(){if(!fields||0===(null==fields?void 0:fields.length))return!1;const dsUrl=ds.getDataSourceJson().url,indexes=getIndexesByField(fields);if(!indexes||0===(null==indexes?void 0:indexes.length))return!1;setShowLoading(!0),yield jimu_core.Le1.requestWrapper(dsUrl,(session=>field_selector_with_full_text_index_awaiter(void 0,void 0,void 0,(function*(){if(!session)return void setShowLoading(!1);let addToDefinitionUrl=`${dsUrl}/addToDefinition`;addToDefinitionUrl=addToDefinitionUrl.replace(/rest\/services/g,"rest/admin/services"),yield esm.request(addToDefinitionUrl,{params:{f:"json",async:!0,addToDefinition:{indexes}},authentication:session,httpMethod:"POST"}).then((res=>{(null==res?void 0:res.error)?addDefinitionStatusChange&&addDefinitionStatusChange(AddDefinitionStatus.Error):(addDefinitionStatusChange&&addDefinitionStatusChange(AddDefinitionStatus.Success),updateDsDefinition(indexes)),setShowLoading(!1)})).catch((err=>{addDefinitionStatusChange&&addDefinitionStatusChange(AddDefinitionStatus.Error),setShowLoading(!1)}))}))))}))})(yield(fields=>field_selector_with_full_text_index_awaiter(void 0,void 0,void 0,(function*(){return fields?getCurrentDsIndexesField().then((indexesField=>{const shouldAddIndexFields=fields.filter((field=>!(null==indexesField?void 0:indexesField.includes(field.name))));return Promise.resolve(shouldAddIndexFields)})):[]})))(currentSelectedFields),ds)}})),STYLE=jimu_core.AHW`
    .loading {
      margin-top: ${jimu_core.PLL.rem(6)};
      color: var(--ref-palette-neutral-900);
      align
    }
    .loading-msg {
      margin-left: ${jimu_core.PLL.rem(10)};
    }
    .loading-icon-con {
      @keyframes loading {
        0% {transform: rotate(0deg); };
        100% {transform: rotate(360deg)};
      }
      width: ${jimu_core.PLL.rem(16)};
      height: ${jimu_core.PLL.rem(16)};
      min-width: ${jimu_core.PLL.rem(16)};
      border: 2px solid var(--ref-palette-neutral-900);
      border-radius: 50%;
      border-top: 2px solid var(--sys-color-primary-main);
      box-sizing: border-box;
      animation:loading 2s infinite linear;
      box-sizing: border-box;
    }
  `;return(0,jimu_core.Yac)("div",{className:"field-selector-with-full-text-index-con w-100",css:STYLE},(0,jimu_core.Yac)(field_selector_FieldSelector,Object.assign({},props,{onChange:onFieldChange,toggle:isOpen=>{if(isOpen)return!1;addIndexesForDs()}})),showLoading&&(0,jimu_core.Yac)("div",{className:"loading d-flex align-items-center"},(0,jimu_core.Yac)("div",{className:"loading-icon-con"}),(0,jimu_core.Yac)("div",{className:"loading-msg"},nls("creatingIndexes"))))};try{field_selector_with_full_text_index_FieldSelectorWithFullTextIndex.displayName="FieldSelectorWithFullTextIndex",field_selector_with_full_text_index_FieldSelectorWithFullTextIndex.__docgenInfo={description:"",displayName:"FieldSelectorWithFullTextIndex",props:{widgetId:{defaultValue:null,description:"Use widget id to get widget context, e.g., whether widget is in repeated data source context.",name:"widgetId",required:!0,type:{name:"string"}},addDefinitionStatusChange:{defaultValue:null,description:"",name:"addDefinitionStatusChange",required:!1,type:{name:"(status: AddDefinitionStatus) => void"}},useDataSources:{defaultValue:null,description:"Data sources only supports feature layer.\nIf your data source is initialized, please use `dataSources`, or use `useDataSources`.",name:"useDataSources",required:!1,type:{name:"ImmutableArray<UseDataSource>"}},dataSources:{defaultValue:null,description:"@ignore",name:"dataSources",required:!1,type:{name:"DataSource[]"}},types:{defaultValue:null,description:"Field type.\nIf `types` is not defined, will list all types of fields.",name:"types",required:!1,type:{name:"ImmutableArray<JimuFieldType>"}},selectedFields:{defaultValue:null,description:"Selected fields, use object when selected fields are from multiple data sources.",name:"selectedFields",required:!1,type:{name:"ImmutableArray<string> | ImmutableObject<{ [dataSourceId: string]: string[]; }>"}},hiddenFields:{defaultValue:null,description:"Fields which should be hidden, use object when selected fields are from multiple data sources.",name:"hiddenFields",required:!1,type:{name:"ImmutableArray<string> | ImmutableObject<{ [dataSourceId: string]: string[]; }>"}},disabledFields:{defaultValue:null,description:"Fields which should be disabled, use object when selected fields are from multiple data sources.",name:"disabledFields",required:!1,type:{name:"ImmutableArray<string> | ImmutableObject<{ [dataSourceId: string]: string[]; }>"}},isDataSourceDropDownHidden:{defaultValue:{value:"false"},description:"Whether or not to hide the data source dropdown, the dropdown is used to change the data source when multiple data sources are passed.",name:"isDataSourceDropDownHidden",required:!1,type:{name:"boolean"}},isSearchInputHidden:{defaultValue:{value:"false"},description:"Whether or not to hide the search input, the input is used to filter fields.",name:"isSearchInputHidden",required:!1,type:{name:"boolean"}},useMultiDropdownBottomTools:{defaultValue:{value:"false"},description:"Whether to use tools in the bottom of multi-select dropdown.\nPlease note the props works only when both of `useDropdown` and `isMultiple` are true.",name:"useMultiDropdownBottomTools",required:!1,type:{name:"boolean"}},isSelectedFromRepeatedDataSourceContext:{defaultValue:{value:"false"},description:"Whether selected fields are from repeated data source context.",name:"isSelectedFromRepeatedDataSourceContext",required:!1,type:{name:"boolean"}},useDropdown:{defaultValue:{value:"false"},description:"Whether or not to use dropdown to show the field list. If true, it will show dropdown, otherwise it will not use dropdown.",name:"useDropdown",required:!1,type:{name:"boolean"}},useDefault:{defaultValue:{value:"false"},description:"Whether or not to use a default field as selected. If true, will call `onChange` if data source changes and no `selectedFields`.",name:"useDefault",required:!1,type:{name:"boolean"}},isMultiple:{defaultValue:{value:"false"},description:"Whether or not to support multiple selection.",name:"isMultiple",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"Placeholder for dropdown, if `useDropdown` is true.",name:"placeholder",required:!1,type:{name:"string"}},dropdownProps:{defaultValue:null,description:"Dropdown props, if `useDropdown` is true.",name:"dropdownProps",required:!1,type:{name:"AdvancedSelectProps"}},useSelectionDataView:{defaultValue:{value:"false"},description:"Whether to use selection data view.",name:"useSelectionDataView",required:!1,type:{name:"boolean"}},usePopulatedDataView:{defaultValue:{value:"false"},description:"Whether to use populated data view.",name:"usePopulatedDataView",required:!1,type:{name:"boolean"}},noSelectionItem:{defaultValue:null,description:"If there is no selected fields, will highlight or select this item.\nIf click this item, will clear all selected fields.",name:"noSelectionItem",required:!1,type:{name:"{ name: string; }"}},className:{defaultValue:null,description:"@ignore",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"@ignore",name:"style",required:!1,type:{name:"CSSProperties"}},onChange:{defaultValue:null,description:"Callback when selected fields change.",name:"onChange",required:!1,type:{name:"(allSelectedFields: IMFieldSchema[], ds: DataSource, isSelectedFromRepeatedDataSourceContext: boolean) => void"}},useKeyUpEvent:{defaultValue:null,description:"Whether pass `useKeyUpEvent` to the AdvanceSelect",name:"useKeyUpEvent",required:!1,type:{name:"boolean"}},"aria-label":{defaultValue:null,description:"aria-label used for the screen reader",name:"aria-label",required:!1,type:{name:"string"}},toggle:{defaultValue:null,description:"Callback fired when toggling the select menu.",name:"toggle",required:!1,type:{name:"(isOpen?: boolean) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/components/field-selector-with-full-text-index.tsx#FieldSelectorWithFullTextIndex"]={docgenInfo:field_selector_with_full_text_index_FieldSelectorWithFullTextIndex.__docgenInfo,name:"FieldSelectorWithFullTextIndex",path:"../jimu-ui/advanced/lib/data-source-selector/components/field-selector-with-full-text-index.tsx#FieldSelectorWithFullTextIndex"})}catch(__react_docgen_typescript_loader_error){}try{DataSourceTypes.displayName="DataSourceTypes",DataSourceTypes.__docgenInfo={description:"The data source types.",displayName:"DataSourceTypes",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/index.tsx#DataSourceTypes"]={docgenInfo:DataSourceTypes.__docgenInfo,name:"DataSourceTypes",path:"../jimu-ui/advanced/lib/data-source-selector/index.tsx#DataSourceTypes"})}catch(__react_docgen_typescript_loader_error){}try{_DataSourceSelector.displayName="_DataSourceSelector",_DataSourceSelector.__docgenInfo={description:"The `DataSourceSelector` component allows an Experience author to select a data source for widgets. This is usually used in a settings panel.\n\n```ts\nimport { DataSourceSelector } from 'jimu-ui/advanced/data-source-selector'\n```",displayName:"_DataSourceSelector",props:{isMultipleDataView:{defaultValue:{value:"false"},description:"Whether to support multiple selection of data views.\n\nOnly allow to select single data source item and single data view by default.\nTo allow to select multiple data source items and multiple data views for each selected data source item, please pass in `isMultiple=true`.\nTo allow to select single data source item and multiple data views for the selected source item, please pass in `isMultipleDataView=true`.\nTo allow to select multiple data source items and single data view for each selected data source item, please pass in `isMultiple=true` and `isMultipleDataView=false`.",name:"isMultipleDataView",required:!1,type:{name:"boolean"}},buttonLabel:{defaultValue:{value:"Select data"},description:"Label of the button which can trigger data source selector popup.",name:"buttonLabel",required:!1,type:{name:"string"}},useDataSourcesEnabled:{defaultValue:{value:"false"},description:"Whether or not to enable data source use.",name:"useDataSourcesEnabled",required:!1,type:{name:"boolean"}},mustUseDataSource:{defaultValue:{value:"false"},description:"Whether or not to show toggle data button, will hide toggle data button if the value is true.",name:"mustUseDataSource",required:!1,type:{name:"boolean"}},disableDataSourceList:{defaultValue:{value:"false"},description:"Whether or not to show data source list panel after clicking a selected data source.",name:"disableDataSourceList",required:!1,type:{name:"boolean"}},disableDataView:{defaultValue:{value:"false"},description:"Whether or not to allow to select data view,\nthe props will make data view dropdown disabled.",name:"disableDataView",required:!1,type:{name:"boolean"}},hideDataView:{defaultValue:{value:"false"},description:"Whether or not to hide the data view dropdown/some data views.\nIf the props is true, will make the entire data view dropdown hidden.\nIf the props is a function, will call it to decide whether or not to hide some items of the data view dropdown.\nPlease note that -\n1. Id of default view is `DEFAULT_DATA_VIEW_ID`, you can import it from `jimu-ui/advanced/data-source-selector`.\n2. Id of selection view is `CONSTANTS.SELECTION_DATA_VIEW_ID`, you can import `CONSTANTS` from `jimu-core`.",name:"hideDataView",required:!1,type:{name:"boolean | ((dataViewJson: IMDataViewJson, mainDataSourceId: string) => boolean)"}},hideCreateViewButton:{defaultValue:{value:"false"},description:"Whether or not to hide the 'create a view' button at the bottom of data view dropdown.",name:"hideCreateViewButton",required:!1,type:{name:"boolean"}},closeDataSourceListOnChange:{defaultValue:{value:"false"},description:"Whether or not to close data source list panel after selected data sources are changed.",name:"closeDataSourceListOnChange",required:!1,type:{name:"boolean"}},onToggleUseDataEnabled:{defaultValue:null,description:"Callback when toggle data button is clicked.",name:"onToggleUseDataEnabled",required:!1,type:{name:"(useDataSourcesEnabled: boolean) => void"}},disableSelection:{defaultValue:null,description:"Before selecting, the component will call this method to check if it can continue selecting.",name:"disableSelection",required:!1,type:{name:"(useDataSources: UseDataSource[]) => boolean"}},disableRemove:{defaultValue:null,description:"Before remove, the component will call this method to check if it can continue removing.",name:"disableRemove",required:!1,type:{name:"(useDataSources: UseDataSource[]) => boolean"}},className:{defaultValue:null,description:"only used by theme.\n@ignore Only used by theme.",name:"className",required:!1,type:{name:"string"}},"aria-label":{defaultValue:null,description:"The label used for accessibility purpose.",name:"aria-label",required:!1,type:{name:"string"}},"aria-describedby":{defaultValue:null,description:"`aria-describedby` is used to indicate the IDs of the elements that describe the component.\nIt is for accessibility purposes.",name:"aria-describedby",required:!1,type:{name:"string"}},onClickDisabledDsItem:{defaultValue:null,description:"@ignore The callback prop is called when clicking an unselectable data source item.\nOnly used by map setting.",name:"onClickDisabledDsItem",required:!1,type:{name:"() => void"}},sidePopperTrigger:{defaultValue:null,description:"@ignore The prop is passed as 'trigger' prop of SidePopper.\nOnly used by map setting.",name:"sidePopperTrigger",required:!1,type:{name:"HTMLElement | HTMLElement[]"}},onChange:{defaultValue:null,description:"Callback when selected data sources are changed.",name:"onChange",required:!1,type:{name:"(useDataSources: UseDataSource[]) => void"}},isMultiple:{defaultValue:{value:"false"},description:"Whether to support multiple selection.",name:"isMultiple",required:!1,type:{name:"boolean"}},hideHeader:{defaultValue:{value:"false"},description:"Whether to hide header of the component.",name:"hideHeader",required:!1,type:{name:"boolean"}},widgetId:{defaultValue:null,description:"Must pass `widgetId` to use parent widget's data view by default when using the same data source as parent widget.",name:"widgetId",required:!1,type:{name:"string"}},useDataSources:{defaultValue:null,description:"Selected data sources.",name:"useDataSources",required:!1,type:{name:"ImmutableArray<UseDataSource>"}},types:{defaultValue:null,description:"Supported data source types.\n`AllDataSourceTypes` is union of `DataSourceTypes` **(see `jimu-core` API documentation)** and `ArcGISDataSourceTypes` **(see `jimu-arcgis` API documentation)**.\n\n```ts\nimport { AllDataSourceTypes } from 'jimu-ui/advanced/data-source-selector'\n```",name:"types",required:!0,type:{name:"ImmutableArray<DataSourceTypes>"}},fromRootDsIds:{defaultValue:null,description:"Only list child data sources generated by these root data sources.",name:"fromRootDsIds",required:!1,type:{name:"ImmutableArray<string>"}},fromDsIds:{defaultValue:null,description:"Only list these data sources.",name:"fromDsIds",required:!1,type:{name:"ImmutableArray<string>"}},hideDs:{defaultValue:null,description:"Whether to hide the data source in the list.",name:"hideDs",required:!1,type:{name:"(dsJson: IMDataSourceJson) => boolean"}},hideTypeDropdown:{defaultValue:{value:"false"},description:"Whether to hide dropdown that is used to filter the list by data source type.",name:"hideTypeDropdown",required:!1,type:{name:"boolean"}},hideAllOptionOfTypeDropdown:{defaultValue:{value:"false"},description:"Whether to hide `All` option of type dropdown. Works only when `hideTypeDropdown` is not true.",name:"hideAllOptionOfTypeDropdown",required:!1,type:{name:"boolean"}},hideAddDataButton:{defaultValue:{value:"false"},description:"Whether to hide the add data button at bottom.",name:"hideAddDataButton",required:!1,type:{name:"boolean"}},disableAddData:{defaultValue:{value:"false"},description:"Whether to hide the add data button at bottom.\n@deprecated",name:"disableAddData",required:!1,type:{name:"boolean"}},hideTabs:{defaultValue:null,description:"Hide some of the tabs.\nPlease note that if pass in `hideTabs`, won't calculate which tabs need to be displayed automatically, will only show tabs that are not included in the array.",name:"hideTabs",required:!1,type:{name:'ImmutableArray<"ADDED" | "OUTPUT">'}},isBatched:{defaultValue:{value:"false"},description:"Whether support batch selection. If true, selecting a parent data source will automatically select all supported child data sources.\nOnly takes effect when `isMultiple` is true.",name:"isBatched",required:!1,type:{name:"boolean"}},enableToSelectOutputDsFromSelf:{defaultValue:{value:"false"},description:"Allow to select output data sources which are generated by current widget itself.\nDo not allow widgets to select these data sources by default.",name:"enableToSelectOutputDsFromSelf",required:!1,type:{name:"boolean"}},showQueriableDataSourceWithoutFields:{defaultValue:{value:"false"},description:"Whether or not to show queriable data sources that have no fields.\nThese data sources extend from the `QueriableDataSource` but do not have fields, which means it will throw error if call `query` method or `load` method.",name:"showQueriableDataSourceWithoutFields",required:!1,type:{name:"boolean"}},dataSources:{defaultValue:null,description:"@ignore",name:"dataSources",required:!0,type:{name:"ImmutableObject<{ [dsId: string]: DataSourceJson; }>"}},dataSourcesInfo:{defaultValue:null,description:"@ignore",name:"dataSourcesInfo",required:!0,type:{name:"ImmutableObject<{ [dsId: string]: DataSourceInfo; }>"}},intl:{defaultValue:null,description:"@ignore",name:"intl",required:!0,type:{name:"IntlShape"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/index.tsx#_DataSourceSelector"]={docgenInfo:_DataSourceSelector.__docgenInfo,name:"_DataSourceSelector",path:"../jimu-ui/advanced/lib/data-source-selector/index.tsx#_DataSourceSelector"})}catch(__react_docgen_typescript_loader_error){}try{DataSourceSelector.displayName="DataSourceSelector",DataSourceSelector.__docgenInfo={description:"A component that allows an Experience author to select a data source for widgets. This is usually used in a settings panel.",displayName:"DataSourceSelector",props:{className:{defaultValue:null,description:"only used by theme.\n@ignore Only used by theme.",name:"className",required:!1,type:{name:"string"}},"aria-describedby":{defaultValue:null,description:"`aria-describedby` is used to indicate the IDs of the elements that describe the component.\nIt is for accessibility purposes.",name:"aria-describedby",required:!1,type:{name:"string"}},"aria-label":{defaultValue:null,description:"The label used for accessibility purpose.",name:"aria-label",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"Callback when selected data sources are changed.",name:"onChange",required:!1,type:{name:"(useDataSources: UseDataSource[]) => void"}},isMultiple:{defaultValue:{value:"false"},description:"Whether to support multiple selection.",name:"isMultiple",required:!1,type:{name:"boolean"}},hideHeader:{defaultValue:{value:"false"},description:"Whether to hide header of the component.",name:"hideHeader",required:!1,type:{name:"boolean"}},widgetId:{defaultValue:null,description:"Must pass `widgetId` to use parent widget's data view by default when using the same data source as parent widget.",name:"widgetId",required:!1,type:{name:"string"}},useDataSources:{defaultValue:null,description:"Selected data sources.",name:"useDataSources",required:!1,type:{name:"Readonly<Remaining<UseDataSource>> & Additions<UseDataSource> & Overrides<UseDataSource> & ReadOnlyIndexer<...>"}},useDataSourcesEnabled:{defaultValue:{value:"false"},description:"Whether or not to enable data source use.",name:"useDataSourcesEnabled",required:!1,type:{name:"boolean"}},buttonLabel:{defaultValue:{value:"Select data"},description:"Label of the button which can trigger data source selector popup.",name:"buttonLabel",required:!1,type:{name:"string"}},types:{defaultValue:null,description:"Supported data source types.\n`AllDataSourceTypes` is union of `DataSourceTypes` **(see `jimu-core` API documentation)** and `ArcGISDataSourceTypes` **(see `jimu-arcgis` API documentation)**.\n\n```ts\nimport { AllDataSourceTypes } from 'jimu-ui/advanced/data-source-selector'\n```",name:"types",required:!0,type:{name:"Readonly<Remaining<DataSourceTypes>> & Additions<DataSourceTypes> & Overrides<DataSourceTypes> & ReadOnlyIndexer<...>"}},disableSelection:{defaultValue:null,description:"Before selecting, the component will call this method to check if it can continue selecting.",name:"disableSelection",required:!1,type:{name:"(useDataSources: UseDataSource[]) => boolean"}},disableRemove:{defaultValue:null,description:"Before remove, the component will call this method to check if it can continue removing.",name:"disableRemove",required:!1,type:{name:"(useDataSources: UseDataSource[]) => boolean"}},fromRootDsIds:{defaultValue:null,description:"Only list child data sources generated by these root data sources.",name:"fromRootDsIds",required:!1,type:{name:"Readonly<Remaining<string>> & Additions<string> & Overrides<string> & ReadOnlyIndexer<string>"}},fromDsIds:{defaultValue:null,description:"Only list these data sources.",name:"fromDsIds",required:!1,type:{name:"Readonly<Remaining<string>> & Additions<string> & Overrides<string> & ReadOnlyIndexer<string>"}},hideDs:{defaultValue:null,description:"Whether to hide the data source in the list.",name:"hideDs",required:!1,type:{name:"(dsJson: IMDataSourceJson) => boolean"}},hideTypeDropdown:{defaultValue:{value:"false"},description:"Whether to hide dropdown that is used to filter the list by data source type.",name:"hideTypeDropdown",required:!1,type:{name:"boolean"}},hideAllOptionOfTypeDropdown:{defaultValue:{value:"false"},description:"Whether to hide `All` option of type dropdown. Works only when `hideTypeDropdown` is not true.",name:"hideAllOptionOfTypeDropdown",required:!1,type:{name:"boolean"}},hideAddDataButton:{defaultValue:{value:"false"},description:"Whether to hide the add data button at bottom.",name:"hideAddDataButton",required:!1,type:{name:"boolean"}},disableAddData:{defaultValue:{value:"false"},description:"Whether to hide the add data button at bottom.\n@deprecated",name:"disableAddData",required:!1,type:{name:"boolean"}},hideTabs:{defaultValue:null,description:"Hide some of the tabs.\nPlease note that if pass in `hideTabs`, won't calculate which tabs need to be displayed automatically, will only show tabs that are not included in the array.",name:"hideTabs",required:!1,type:{name:'Readonly<Remaining<"ADDED" | "OUTPUT">> & Additions<"ADDED" | "OUTPUT"> & Overrides<"ADDED" | "OUTPUT"> & ReadOnlyIndexer<"ADDED" | "OUTPUT">'}},isBatched:{defaultValue:{value:"false"},description:"Whether support batch selection. If true, selecting a parent data source will automatically select all supported child data sources.\nOnly takes effect when `isMultiple` is true.",name:"isBatched",required:!1,type:{name:"boolean"}},enableToSelectOutputDsFromSelf:{defaultValue:{value:"false"},description:"Allow to select output data sources which are generated by current widget itself.\nDo not allow widgets to select these data sources by default.",name:"enableToSelectOutputDsFromSelf",required:!1,type:{name:"boolean"}},showQueriableDataSourceWithoutFields:{defaultValue:{value:"false"},description:"Whether or not to show queriable data sources that have no fields.\nThese data sources extend from the `QueriableDataSource` but do not have fields, which means it will throw error if call `query` method or `load` method.",name:"showQueriableDataSourceWithoutFields",required:!1,type:{name:"boolean"}},isMultipleDataView:{defaultValue:{value:"false"},description:"Whether to support multiple selection of data views.\n\nOnly allow to select single data source item and single data view by default.\nTo allow to select multiple data source items and multiple data views for each selected data source item, please pass in `isMultiple=true`.\nTo allow to select single data source item and multiple data views for the selected source item, please pass in `isMultipleDataView=true`.\nTo allow to select multiple data source items and single data view for each selected data source item, please pass in `isMultiple=true` and `isMultipleDataView=false`.",name:"isMultipleDataView",required:!1,type:{name:"boolean"}},mustUseDataSource:{defaultValue:{value:"false"},description:"Whether or not to show toggle data button, will hide toggle data button if the value is true.",name:"mustUseDataSource",required:!1,type:{name:"boolean"}},disableDataSourceList:{defaultValue:{value:"false"},description:"Whether or not to show data source list panel after clicking a selected data source.",name:"disableDataSourceList",required:!1,type:{name:"boolean"}},disableDataView:{defaultValue:{value:"false"},description:"Whether or not to allow to select data view,\nthe props will make data view dropdown disabled.",name:"disableDataView",required:!1,type:{name:"boolean"}},hideDataView:{defaultValue:{value:"false"},description:"Whether or not to hide the data view dropdown/some data views.\nIf the props is true, will make the entire data view dropdown hidden.\nIf the props is a function, will call it to decide whether or not to hide some items of the data view dropdown.\nPlease note that -\n1. Id of default view is `DEFAULT_DATA_VIEW_ID`, you can import it from `jimu-ui/advanced/data-source-selector`.\n2. Id of selection view is `CONSTANTS.SELECTION_DATA_VIEW_ID`, you can import `CONSTANTS` from `jimu-core`.",name:"hideDataView",required:!1,type:{name:"boolean | ((dataViewJson: IMDataViewJson, mainDataSourceId: string) => boolean)"}},hideCreateViewButton:{defaultValue:{value:"false"},description:"Whether or not to hide the 'create a view' button at the bottom of data view dropdown.",name:"hideCreateViewButton",required:!1,type:{name:"boolean"}},closeDataSourceListOnChange:{defaultValue:{value:"false"},description:"Whether or not to close data source list panel after selected data sources are changed.",name:"closeDataSourceListOnChange",required:!1,type:{name:"boolean"}},onToggleUseDataEnabled:{defaultValue:null,description:"Callback when toggle data button is clicked.",name:"onToggleUseDataEnabled",required:!1,type:{name:"(useDataSourcesEnabled: boolean) => void"}},onClickDisabledDsItem:{defaultValue:null,description:"@ignore The callback prop is called when clicking an unselectable data source item.\nOnly used by map setting.",name:"onClickDisabledDsItem",required:!1,type:{name:"() => void"}},sidePopperTrigger:{defaultValue:null,description:"@ignore The prop is passed as 'trigger' prop of SidePopper.\nOnly used by map setting.",name:"sidePopperTrigger",required:!1,type:{name:"HTMLElement | HTMLElement[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/index.tsx#DataSourceSelector"]={docgenInfo:DataSourceSelector.__docgenInfo,name:"DataSourceSelector",path:"../jimu-ui/advanced/lib/data-source-selector/index.tsx#DataSourceSelector"})}catch(__react_docgen_typescript_loader_error){}try{DataSourceList.displayName="DataSourceList",DataSourceList.__docgenInfo={description:"",displayName:"DataSourceList",props:{className:{defaultValue:null,description:"only used by theme.",name:"className",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"Callback when selected data sources are changed.",name:"onChange",required:!1,type:{name:"(useDataSources: UseDataSource[]) => void"}},isMultiple:{defaultValue:{value:"false"},description:"Whether to support multiple selection.",name:"isMultiple",required:!1,type:{name:"boolean"}},hideHeader:{defaultValue:{value:"false"},description:"Whether to hide header of the component.",name:"hideHeader",required:!1,type:{name:"boolean"}},widgetId:{defaultValue:null,description:"Must pass `widgetId` to use parent widget's data view by default when using the same data source as parent widget.",name:"widgetId",required:!1,type:{name:"string"}},useDataSources:{defaultValue:null,description:"Selected data sources.",name:"useDataSources",required:!1,type:{name:"Readonly<Remaining<UseDataSource>> & Additions<UseDataSource> & Overrides<UseDataSource> & ReadOnlyIndexer<...>"}},types:{defaultValue:null,description:"Supported data source types.\n`AllDataSourceTypes` is union of `DataSourceTypes` **(see `jimu-core` API documentation)** and `ArcGISDataSourceTypes` **(see `jimu-arcgis` API documentation)**.\n\n```ts\nimport { AllDataSourceTypes } from 'jimu-ui/advanced/data-source-selector'\n```",name:"types",required:!0,type:{name:"Readonly<Remaining<DataSourceTypes>> & Additions<DataSourceTypes> & Overrides<DataSourceTypes> & ReadOnlyIndexer<...>"}},isDataSourceInited:{defaultValue:null,description:"If `true`, data sources are inited.",name:"isDataSourceInited",required:!0,type:{name:"boolean"}},onCloseClick:{defaultValue:null,description:"Callback when close icon is clicked.",name:"onCloseClick",required:!1,type:{name:"() => void"}},changeInitStatus:{defaultValue:null,description:"Change data source init status, it will be necessary if the user is allowed to add new data source in the component.",name:"changeInitStatus",required:!1,type:{name:"(isInitialized: boolean) => void"}},disableSelection:{defaultValue:null,description:"Before selecting the component, this will check the variable to make sure it can continue selecting.",name:"disableSelection",required:!1,type:{name:"boolean"}},disableRemove:{defaultValue:null,description:"Before removing the component, this will check the variable to make sure it can continue removing.",name:"disableRemove",required:!1,type:{name:"boolean"}},fromRootDsIds:{defaultValue:null,description:"Only list child data sources generated by these root data sources.",name:"fromRootDsIds",required:!1,type:{name:"Readonly<Remaining<string>> & Additions<string> & Overrides<string> & ReadOnlyIndexer<string>"}},fromDsIds:{defaultValue:null,description:"Only list these data sources.",name:"fromDsIds",required:!1,type:{name:"Readonly<Remaining<string>> & Additions<string> & Overrides<string> & ReadOnlyIndexer<string>"}},hideDs:{defaultValue:null,description:"Whether to hide the data source in the list.",name:"hideDs",required:!1,type:{name:"(dsJson: IMDataSourceJson) => boolean"}},hideTypeDropdown:{defaultValue:{value:"false"},description:"Whether to hide dropdown that is used to filter the list by data source type.",name:"hideTypeDropdown",required:!1,type:{name:"boolean"}},hideAllOptionOfTypeDropdown:{defaultValue:{value:"false"},description:"Whether to hide `All` option of type dropdown. Works only when `hideTypeDropdown` is not true.",name:"hideAllOptionOfTypeDropdown",required:!1,type:{name:"boolean"}},hideAddDataButton:{defaultValue:{value:"false"},description:"Whether to hide the add data button at bottom.",name:"hideAddDataButton",required:!1,type:{name:"boolean"}},disableAddData:{defaultValue:{value:"false"},description:"Whether to hide the add data button at bottom.\n@deprecated",name:"disableAddData",required:!1,type:{name:"boolean"}},hideTabs:{defaultValue:null,description:"Hide some of the tabs.\nPlease note that if pass in `hideTabs`, won't calculate which tabs need to be displayed automatically, will only show tabs that are not included in the array.",name:"hideTabs",required:!1,type:{name:'Readonly<Remaining<"ADDED" | "OUTPUT">> & Additions<"ADDED" | "OUTPUT"> & Overrides<"ADDED" | "OUTPUT"> & ReadOnlyIndexer<"ADDED" | "OUTPUT">'}},isBatched:{defaultValue:{value:"false"},description:"Whether support batch selection. If true, selecting a parent data source will automatically select all supported child data sources.\nOnly takes effect when `isMultiple` is true.",name:"isBatched",required:!1,type:{name:"boolean"}},enableToSelectOutputDsFromSelf:{defaultValue:{value:"false"},description:"Allow to select output data sources which are generated by current widget itself.\nDo not allow widgets to select these data sources by default.",name:"enableToSelectOutputDsFromSelf",required:!1,type:{name:"boolean"}},showQueriableDataSourceWithoutFields:{defaultValue:{value:"false"},description:"Whether or not to show queriable data sources that have no fields.\nThese data sources extend from the `QueriableDataSource` but do not have fields, which means it will throw error if call `query` method or `load` method.",name:"showQueriableDataSourceWithoutFields",required:!1,type:{name:"boolean"}},onClickDisabledDsItem:{defaultValue:null,description:"",name:"onClickDisabledDsItem",required:!1,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/index.tsx#DataSourceList"]={docgenInfo:DataSourceList.__docgenInfo,name:"DataSourceList",path:"../jimu-ui/advanced/lib/data-source-selector/index.tsx#DataSourceList"})}catch(__react_docgen_typescript_loader_error){}try{ExternalDataSourceSelector.displayName="ExternalDataSourceSelector",ExternalDataSourceSelector.__docgenInfo={description:"",displayName:"ExternalDataSourceSelector",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!1,type:{name:"(dsJsons: IMDataSourceJson[]) => void"}},portalUrl:{defaultValue:null,description:"",name:"portalUrl",required:!0,type:{name:"string"}},isMultiple:{defaultValue:null,description:"",name:"isMultiple",required:!1,type:{name:"boolean"}},types:{defaultValue:null,description:"",name:"types",required:!1,type:{name:"ImmutableArray<DataSourceTypes>"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!1,type:{name:"(dsJsons: IMDataSourceJson[]) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!1,type:{name:"() => void"}},onFinish:{defaultValue:null,description:"",name:"onFinish",required:!1,type:{name:"(dsJsons: IMDataSourceJson[]) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/index.tsx#ExternalDataSourceSelector"]={docgenInfo:ExternalDataSourceSelector.__docgenInfo,name:"ExternalDataSourceSelector",path:"../jimu-ui/advanced/lib/data-source-selector/index.tsx#ExternalDataSourceSelector"})}catch(__react_docgen_typescript_loader_error){}try{DataSourceItem.displayName="DataSourceItem",DataSourceItem.__docgenInfo={description:"",displayName:"DataSourceItem",props:{dataSourceJson:{defaultValue:null,description:"",name:"dataSourceJson",required:!0,type:{name:"IMDataSourceJson"}},isMoreIconShown:{defaultValue:null,description:"",name:"isMoreIconShown",required:!1,type:{name:"boolean"}},isCloseIconShown:{defaultValue:null,description:"",name:"isCloseIconShown",required:!1,type:{name:"boolean"}},isRenameInputShown:{defaultValue:null,description:"",name:"isRenameInputShown",required:!1,type:{name:"boolean"}},isRelatedWidgetsShown:{defaultValue:null,description:"",name:"isRelatedWidgetsShown",required:!1,type:{name:"boolean"}},isMappingIconShown:{defaultValue:null,description:"",name:"isMappingIconShown",required:!1,type:{name:"boolean"}},isErrorIconShown:{defaultValue:null,description:"",name:"isErrorIconShown",required:!1,type:{name:"boolean"}},isSelected:{defaultValue:null,description:"",name:"isSelected",required:!1,type:{name:"boolean"}},isHideable:{defaultValue:null,description:"",name:"isHideable",required:!1,type:{name:"boolean"}},isLoadingShown:{defaultValue:null,description:"",name:"isLoadingShown",required:!1,type:{name:"boolean"}},errorTitle:{defaultValue:null,description:"",name:"errorTitle",required:!1,type:{name:"string"}},onDataSourceItemClick:{defaultValue:null,description:"",name:"onDataSourceItemClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onMappingIconClick:{defaultValue:null,description:"",name:"onMappingIconClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onCloseIconClick:{defaultValue:null,description:"",name:"onCloseIconClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onMoreIconClick:{defaultValue:null,description:"",name:"onMoreIconClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onRename:{defaultValue:null,description:"",name:"onRename",required:!1,type:{name:"(dsLabel: string) => void"}},onToggleHidden:{defaultValue:null,description:"",name:"onToggleHidden",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onChildDataIconClick:{defaultValue:null,description:"",name:"onChildDataIconClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onRelatedWidgetsIconClick:{defaultValue:null,description:"",name:"onRelatedWidgetsIconClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/index.tsx#DataSourceItem"]={docgenInfo:DataSourceItem.__docgenInfo,name:"DataSourceItem",path:"../jimu-ui/advanced/lib/data-source-selector/index.tsx#DataSourceItem"})}catch(__react_docgen_typescript_loader_error){}try{DataSourceTree.displayName="DataSourceTree",DataSourceTree.__docgenInfo={description:"The data source tree has two kinds of node, selectable node and unselectable node.\nSelectable node means the node can be selected and unselectable node means the node can not be selected.\nThe rules to generate unselectable node:\n1. If node A can not be selected and all descendant nodes of A can not be selected, the subtree using A as root node will be hidden.\n2. If node A can not be selected and some descendant nodes of A can be selected, A will only render as a label.\n3. If node A can not be selected, A's child node A1 also can not be selected and A1's child node A11 can be selected,\n   A11's parent node will be a unselectable node and the label will be `A / A11`.",displayName:"DataSourceTree",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/index.tsx#DataSourceTree"]={docgenInfo:DataSourceTree.__docgenInfo,name:"DataSourceTree",path:"../jimu-ui/advanced/lib/data-source-selector/index.tsx#DataSourceTree"})}catch(__react_docgen_typescript_loader_error){}try{DataSourceErrorItem.displayName="DataSourceErrorItem",DataSourceErrorItem.__docgenInfo={description:"",displayName:"DataSourceErrorItem",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},dataSourceJson:{defaultValue:null,description:"",name:"dataSourceJson",required:!0,type:{name:"IMDataSourceJson"}},isMoreIconShown:{defaultValue:null,description:"",name:"isMoreIconShown",required:!1,type:{name:"boolean"}},isCloseIconShown:{defaultValue:null,description:"",name:"isCloseIconShown",required:!1,type:{name:"boolean"}},isRelatedWidgetsShown:{defaultValue:null,description:"",name:"isRelatedWidgetsShown",required:!1,type:{name:"boolean"}},isErrorIconShown:{defaultValue:null,description:"",name:"isErrorIconShown",required:!1,type:{name:"boolean"}},isSelected:{defaultValue:null,description:"",name:"isSelected",required:!1,type:{name:"boolean"}},isHideable:{defaultValue:null,description:"",name:"isHideable",required:!1,type:{name:"boolean"}},isLoadingShown:{defaultValue:null,description:"",name:"isLoadingShown",required:!1,type:{name:"boolean"}},errorTitle:{defaultValue:null,description:"",name:"errorTitle",required:!1,type:{name:"string"}},onDataSourceItemClick:{defaultValue:null,description:"",name:"onDataSourceItemClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onCloseIconClick:{defaultValue:null,description:"",name:"onCloseIconClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onMoreIconClick:{defaultValue:null,description:"",name:"onMoreIconClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onToggleHidden:{defaultValue:null,description:"",name:"onToggleHidden",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onChildDataIconClick:{defaultValue:null,description:"",name:"onChildDataIconClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onRelatedWidgetsIconClick:{defaultValue:null,description:"",name:"onRelatedWidgetsIconClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/index.tsx#DataSourceErrorItem"]={docgenInfo:DataSourceErrorItem.__docgenInfo,name:"DataSourceErrorItem",path:"../jimu-ui/advanced/lib/data-source-selector/index.tsx#DataSourceErrorItem"})}catch(__react_docgen_typescript_loader_error){}try{FieldSelector.displayName="FieldSelector",FieldSelector.__docgenInfo={description:"A component to select field from a data source.",displayName:"FieldSelector",props:{useDataSources:{defaultValue:null,description:"Data sources only supports feature layer.\nIf your data source is initialized, please use `dataSources`, or use `useDataSources`.",name:"useDataSources",required:!1,type:{name:"ImmutableArray<UseDataSource>"}},dataSources:{defaultValue:null,description:"@ignore",name:"dataSources",required:!1,type:{name:"DataSource[]"}},types:{defaultValue:null,description:"Field type.\nIf `types` is not defined, will list all types of fields.",name:"types",required:!1,type:{name:"ImmutableArray<JimuFieldType>"}},selectedFields:{defaultValue:null,description:"Selected fields, use object when selected fields are from multiple data sources.",name:"selectedFields",required:!1,type:{name:"ImmutableArray<string> | ImmutableObject<{ [dataSourceId: string]: string[]; }>"}},hiddenFields:{defaultValue:null,description:"Fields which should be hidden, use object when selected fields are from multiple data sources.",name:"hiddenFields",required:!1,type:{name:"ImmutableArray<string> | ImmutableObject<{ [dataSourceId: string]: string[]; }>"}},disabledFields:{defaultValue:null,description:"Fields which should be disabled, use object when selected fields are from multiple data sources.",name:"disabledFields",required:!1,type:{name:"ImmutableArray<string> | ImmutableObject<{ [dataSourceId: string]: string[]; }>"}},isDataSourceDropDownHidden:{defaultValue:{value:"false"},description:"Whether or not to hide the data source dropdown, the dropdown is used to change the data source when multiple data sources are passed.",name:"isDataSourceDropDownHidden",required:!1,type:{name:"boolean"}},isSearchInputHidden:{defaultValue:{value:"false"},description:"Whether or not to hide the search input, the input is used to filter fields.",name:"isSearchInputHidden",required:!1,type:{name:"boolean"}},useMultiDropdownBottomTools:{defaultValue:{value:"false"},description:"Whether to use tools in the bottom of multi-select dropdown.\nPlease note the props works only when both of `useDropdown` and `isMultiple` are true.",name:"useMultiDropdownBottomTools",required:!1,type:{name:"boolean"}},isSelectedFromRepeatedDataSourceContext:{defaultValue:{value:"false"},description:"Whether selected fields are from repeated data source context.",name:"isSelectedFromRepeatedDataSourceContext",required:!1,type:{name:"boolean"}},useDropdown:{defaultValue:{value:"false"},description:"Whether or not to use dropdown to show the field list. If true, it will show dropdown, otherwise it will not use dropdown.",name:"useDropdown",required:!1,type:{name:"boolean"}},useDefault:{defaultValue:{value:"false"},description:"Whether or not to use a default field as selected. If true, will call `onChange` if data source changes and no `selectedFields`.",name:"useDefault",required:!1,type:{name:"boolean"}},isMultiple:{defaultValue:{value:"false"},description:"Whether or not to support multiple selection.",name:"isMultiple",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"Placeholder for dropdown, if `useDropdown` is true.",name:"placeholder",required:!1,type:{name:"string"}},dropdownProps:{defaultValue:null,description:"Dropdown props, if `useDropdown` is true.",name:"dropdownProps",required:!1,type:{name:"AdvancedSelectProps"}},widgetId:{defaultValue:null,description:"Use widget id to get widget context, e.g., whether widget is in repeated data source context.",name:"widgetId",required:!1,type:{name:"string"}},useSelectionDataView:{defaultValue:{value:"false"},description:"Whether to use selection data view.",name:"useSelectionDataView",required:!1,type:{name:"boolean"}},usePopulatedDataView:{defaultValue:{value:"false"},description:"Whether to use populated data view.",name:"usePopulatedDataView",required:!1,type:{name:"boolean"}},noSelectionItem:{defaultValue:null,description:"If there is no selected fields, will highlight or select this item.\nIf click this item, will clear all selected fields.",name:"noSelectionItem",required:!1,type:{name:"{ name: string; }"}},className:{defaultValue:null,description:"@ignore",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"@ignore",name:"style",required:!1,type:{name:"CSSProperties"}},onChange:{defaultValue:null,description:"Callback when selected fields change.",name:"onChange",required:!1,type:{name:"(allSelectedFields: IMFieldSchema[], ds: DataSource, isSelectedFromRepeatedDataSourceContext: boolean) => void"}},useKeyUpEvent:{defaultValue:null,description:"Whether pass `useKeyUpEvent` to the AdvanceSelect",name:"useKeyUpEvent",required:!1,type:{name:"boolean"}},"aria-label":{defaultValue:null,description:"aria-label used for the screen reader",name:"aria-label",required:!1,type:{name:"string"}},toggle:{defaultValue:null,description:"Callback fired when toggling the select menu.",name:"toggle",required:!1,type:{name:"(isOpen?: boolean) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/index.tsx#FieldSelector"]={docgenInfo:FieldSelector.__docgenInfo,name:"FieldSelector",path:"../jimu-ui/advanced/lib/data-source-selector/index.tsx#FieldSelector"})}catch(__react_docgen_typescript_loader_error){}try{FieldSelectorWithFullTextIndex.displayName="FieldSelectorWithFullTextIndex",FieldSelectorWithFullTextIndex.__docgenInfo={description:"",displayName:"FieldSelectorWithFullTextIndex",props:{widgetId:{defaultValue:null,description:"Use widget id to get widget context, e.g., whether widget is in repeated data source context.",name:"widgetId",required:!0,type:{name:"string"}},addDefinitionStatusChange:{defaultValue:null,description:"",name:"addDefinitionStatusChange",required:!1,type:{name:"(status: AddDefinitionStatus) => void"}},useDataSources:{defaultValue:null,description:"Data sources only supports feature layer.\nIf your data source is initialized, please use `dataSources`, or use `useDataSources`.",name:"useDataSources",required:!1,type:{name:"ImmutableArray<UseDataSource>"}},dataSources:{defaultValue:null,description:"@ignore",name:"dataSources",required:!1,type:{name:"DataSource[]"}},types:{defaultValue:null,description:"Field type.\nIf `types` is not defined, will list all types of fields.",name:"types",required:!1,type:{name:"ImmutableArray<JimuFieldType>"}},selectedFields:{defaultValue:null,description:"Selected fields, use object when selected fields are from multiple data sources.",name:"selectedFields",required:!1,type:{name:"ImmutableArray<string> | ImmutableObject<{ [dataSourceId: string]: string[]; }>"}},hiddenFields:{defaultValue:null,description:"Fields which should be hidden, use object when selected fields are from multiple data sources.",name:"hiddenFields",required:!1,type:{name:"ImmutableArray<string> | ImmutableObject<{ [dataSourceId: string]: string[]; }>"}},disabledFields:{defaultValue:null,description:"Fields which should be disabled, use object when selected fields are from multiple data sources.",name:"disabledFields",required:!1,type:{name:"ImmutableArray<string> | ImmutableObject<{ [dataSourceId: string]: string[]; }>"}},isDataSourceDropDownHidden:{defaultValue:{value:"false"},description:"Whether or not to hide the data source dropdown, the dropdown is used to change the data source when multiple data sources are passed.",name:"isDataSourceDropDownHidden",required:!1,type:{name:"boolean"}},isSearchInputHidden:{defaultValue:{value:"false"},description:"Whether or not to hide the search input, the input is used to filter fields.",name:"isSearchInputHidden",required:!1,type:{name:"boolean"}},useMultiDropdownBottomTools:{defaultValue:{value:"false"},description:"Whether to use tools in the bottom of multi-select dropdown.\nPlease note the props works only when both of `useDropdown` and `isMultiple` are true.",name:"useMultiDropdownBottomTools",required:!1,type:{name:"boolean"}},isSelectedFromRepeatedDataSourceContext:{defaultValue:{value:"false"},description:"Whether selected fields are from repeated data source context.",name:"isSelectedFromRepeatedDataSourceContext",required:!1,type:{name:"boolean"}},useDropdown:{defaultValue:{value:"false"},description:"Whether or not to use dropdown to show the field list. If true, it will show dropdown, otherwise it will not use dropdown.",name:"useDropdown",required:!1,type:{name:"boolean"}},useDefault:{defaultValue:{value:"false"},description:"Whether or not to use a default field as selected. If true, will call `onChange` if data source changes and no `selectedFields`.",name:"useDefault",required:!1,type:{name:"boolean"}},isMultiple:{defaultValue:{value:"false"},description:"Whether or not to support multiple selection.",name:"isMultiple",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"Placeholder for dropdown, if `useDropdown` is true.",name:"placeholder",required:!1,type:{name:"string"}},dropdownProps:{defaultValue:null,description:"Dropdown props, if `useDropdown` is true.",name:"dropdownProps",required:!1,type:{name:"AdvancedSelectProps"}},useSelectionDataView:{defaultValue:{value:"false"},description:"Whether to use selection data view.",name:"useSelectionDataView",required:!1,type:{name:"boolean"}},usePopulatedDataView:{defaultValue:{value:"false"},description:"Whether to use populated data view.",name:"usePopulatedDataView",required:!1,type:{name:"boolean"}},noSelectionItem:{defaultValue:null,description:"If there is no selected fields, will highlight or select this item.\nIf click this item, will clear all selected fields.",name:"noSelectionItem",required:!1,type:{name:"{ name: string; }"}},className:{defaultValue:null,description:"@ignore",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"@ignore",name:"style",required:!1,type:{name:"CSSProperties"}},onChange:{defaultValue:null,description:"Callback when selected fields change.",name:"onChange",required:!1,type:{name:"(allSelectedFields: IMFieldSchema[], ds: DataSource, isSelectedFromRepeatedDataSourceContext: boolean) => void"}},useKeyUpEvent:{defaultValue:null,description:"Whether pass `useKeyUpEvent` to the AdvanceSelect",name:"useKeyUpEvent",required:!1,type:{name:"boolean"}},"aria-label":{defaultValue:null,description:"aria-label used for the screen reader",name:"aria-label",required:!1,type:{name:"string"}},toggle:{defaultValue:null,description:"Callback fired when toggling the select menu.",name:"toggle",required:!1,type:{name:"(isOpen?: boolean) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/index.tsx#FieldSelectorWithFullTextIndex"]={docgenInfo:FieldSelectorWithFullTextIndex.__docgenInfo,name:"FieldSelectorWithFullTextIndex",path:"../jimu-ui/advanced/lib/data-source-selector/index.tsx#FieldSelectorWithFullTextIndex"})}catch(__react_docgen_typescript_loader_error){}try{First.displayName="DataViewPriority.First",First.__docgenInfo={description:"populated data view > common data view (aka user added data view) > selection data view > default data view (aka main data source)",displayName:"DataViewPriority.First",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/index.tsx#DataViewPriority.First"]={docgenInfo:DataViewPriority.First.__docgenInfo,name:"DataViewPriority.First",path:"../jimu-ui/advanced/lib/data-source-selector/index.tsx#DataViewPriority.First"})}catch(__react_docgen_typescript_loader_error){}try{Second.displayName="DataViewPriority.Second",Second.__docgenInfo={description:"common data view > default data view > selection data view > populated data view",displayName:"DataViewPriority.Second",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/index.tsx#DataViewPriority.Second"]={docgenInfo:DataViewPriority.Second.__docgenInfo,name:"DataViewPriority.Second",path:"../jimu-ui/advanced/lib/data-source-selector/index.tsx#DataViewPriority.Second"})}catch(__react_docgen_typescript_loader_error){}try{MainDataAndViewSelector.displayName="MainDataAndViewSelector",MainDataAndViewSelector.__docgenInfo={description:"",displayName:"MainDataAndViewSelector",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(useDataSource: IMUseDataSource, isFromRepeatedDataSourceContext: boolean) => void"}},widgetId:{defaultValue:null,description:"Use widget id to get widget context, e.g. whether widget is in repeated data source context.",name:"widgetId",required:!1,type:{name:"string"}},useDataSources:{defaultValue:null,description:"",name:"useDataSources",required:!0,type:{name:"Readonly<Remaining<UseDataSource>> & Additions<UseDataSource> & Overrides<UseDataSource> & ReadOnlyIndexer<...>"}},isSelectedFromRepeatedDataSourceContext:{defaultValue:null,description:"Whether selected use data source is from repeated data source context.",name:"isSelectedFromRepeatedDataSourceContext",required:!1,type:{name:"boolean"}},useSelectionDataView:{defaultValue:null,description:"Whether to use selection data view.",name:"useSelectionDataView",required:!1,type:{name:"boolean"}},usePopulatedDataView:{defaultValue:null,description:"Whether to use populated data view.",name:"usePopulatedDataView",required:!1,type:{name:"boolean"}},selectedUseDataSource:{defaultValue:null,description:"",name:"selectedUseDataSource",required:!1,type:{name:"ImmutableObjectMixin<UseDataSource> & { readonly dataSourceId: string; readonly mainDataSourceId: string; readonly dataViewId?: string; readonly rootDataSourceId?: string; readonly fields?: ImmutableArray<...>; readonly useFieldsInPopupInfo?: boolean; readonly useFieldsInSymbol?: boolean; }"}},defaultDataViewPriority:{defaultValue:null,description:"The priority of default selected data view if no `selectedUseDataSource`.",name:"defaultDataViewPriority",required:!1,type:{name:"enum",value:[{value:'"POPULATED_VIEW_SELECTION_DEFAULT"'},{value:'"VIEW_DEFAULT_SELECTION_POPULATED"'}]}},hideMainDataSourceSelect:{defaultValue:null,description:"Whether to hide the select component which is to select main data source.",name:"hideMainDataSourceSelect",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/index.tsx#MainDataAndViewSelector"]={docgenInfo:MainDataAndViewSelector.__docgenInfo,name:"MainDataAndViewSelector",path:"../jimu-ui/advanced/lib/data-source-selector/index.tsx#MainDataAndViewSelector"})}catch(__react_docgen_typescript_loader_error){}try{DataViewSettingPopup.displayName="DataViewSettingPopup",DataViewSettingPopup.__docgenInfo={description:"",displayName:"DataViewSettingPopup",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},toggle:{defaultValue:null,description:"",name:"toggle",required:!0,type:{name:"() => void"}},disableRemove:{defaultValue:null,description:"",name:"disableRemove",required:!1,type:{name:"boolean"}},mainDataSource:{defaultValue:null,description:"",name:"mainDataSource",required:!0,type:{name:"DataSource"}},dataView:{defaultValue:null,description:"",name:"dataView",required:!0,type:{name:"IMDataViewJson"}},isSettingMainDataSource:{defaultValue:null,description:"Whether is setting main data source or data view.",name:"isSettingMainDataSource",required:!1,type:{name:"boolean"}},disableRename:{defaultValue:null,description:"",name:"disableRename",required:!1,type:{name:"boolean"}},disableDuplicate:{defaultValue:null,description:"",name:"disableDuplicate",required:!1,type:{name:"boolean"}},newDataViewId:{defaultValue:null,description:"If there is no data view, will create a new data view using this value as data view id.",name:"newDataViewId",required:!1,type:{name:"string"}},newDataViewLabel:{defaultValue:null,description:"If there is no data view, will create a new data view using this value as data view label.",name:"newDataViewLabel",required:!1,type:{name:"string"}},onApply:{defaultValue:null,description:"",name:"onApply",required:!0,type:{name:"(dataView: IMDataViewJson) => void"}},onDuplicate:{defaultValue:null,description:"",name:"onDuplicate",required:!1,type:{name:"(dataView: IMDataViewJson) => void"}},afterRemove:{defaultValue:null,description:"Will call this function after removing data view.",name:"afterRemove",required:!1,type:{name:"(dataView: IMDataViewJson) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/index.tsx#DataViewSettingPopup"]={docgenInfo:DataViewSettingPopup.__docgenInfo,name:"DataViewSettingPopup",path:"../jimu-ui/advanced/lib/data-source-selector/index.tsx#DataViewSettingPopup"})}catch(__react_docgen_typescript_loader_error){}try{DataSourceRemoved.displayName="DataSourceRemoveWaringReason.DataSourceRemoved",DataSourceRemoved.__docgenInfo={description:"Data source is removed.",displayName:"DataSourceRemoveWaringReason.DataSourceRemoved",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/index.tsx#DataSourceRemoveWaringReason.DataSourceRemoved"]={docgenInfo:DataSourceRemoveWaringReason.DataSourceRemoved.__docgenInfo,name:"DataSourceRemoveWaringReason.DataSourceRemoved",path:"../jimu-ui/advanced/lib/data-source-selector/index.tsx#DataSourceRemoveWaringReason.DataSourceRemoved"})}catch(__react_docgen_typescript_loader_error){}try{SourceWidgetRemoved.displayName="DataSourceRemoveWaringReason.SourceWidgetRemoved",SourceWidgetRemoved.__docgenInfo={description:"Source widget of output data source is removed.",displayName:"DataSourceRemoveWaringReason.SourceWidgetRemoved",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/index.tsx#DataSourceRemoveWaringReason.SourceWidgetRemoved"]={docgenInfo:DataSourceRemoveWaringReason.SourceWidgetRemoved.__docgenInfo,name:"DataSourceRemoveWaringReason.SourceWidgetRemoved",path:"../jimu-ui/advanced/lib/data-source-selector/index.tsx#DataSourceRemoveWaringReason.SourceWidgetRemoved"})}catch(__react_docgen_typescript_loader_error){}try{MapChanged.displayName="DataSourceRemoveWaringReason.MapChanged",MapChanged.__docgenInfo={description:"In express mode, widgets can only select the child data sources of the map widget's data sources.\nIf change the map widget's data source, will affect other widgets.",displayName:"DataSourceRemoveWaringReason.MapChanged",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/index.tsx#DataSourceRemoveWaringReason.MapChanged"]={docgenInfo:DataSourceRemoveWaringReason.MapChanged.__docgenInfo,name:"DataSourceRemoveWaringReason.MapChanged",path:"../jimu-ui/advanced/lib/data-source-selector/index.tsx#DataSourceRemoveWaringReason.MapChanged"})}catch(__react_docgen_typescript_loader_error){}try{DataSourceRemoveWarningPopup.displayName="DataSourceRemoveWarningPopup",DataSourceRemoveWarningPopup.__docgenInfo={description:"",displayName:"DataSourceRemoveWarningPopup",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"Label of the removed data source/source widget.\nIf do not pass in the props, will use data source label or widget label.",name:"label",required:!1,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},toggle:{defaultValue:null,description:"",name:"toggle",required:!0,type:{name:"() => void"}},widgetId:{defaultValue:null,description:"If `widgetId` is passed in, will list all widgets related to output data sources of the widget.\nPlease note that this props can be superseded by `dataSourceId`.\nMust pass in one of `dataSourceId` and `widgetId`.",name:"widgetId",required:!1,type:{name:"string"}},dataSourceId:{defaultValue:null,description:"If `dataSourceId` is passed in, will list all widgets related to the data source and ignore `widgetId`.\nMust pass in one of `dataSourceId` and `widgetId`.",name:"dataSourceId",required:!1,type:{name:"string"}},onCancel:{defaultValue:null,description:"Will call this function if cancel button is clicked.",name:"onCancel",required:!1,type:{name:"() => void"}},afterRemove:{defaultValue:null,description:"Will call this function after removing data source/source widget and related widgets.",name:"afterRemove",required:!1,type:{name:"() => void"}},reason:{defaultValue:null,description:"Reasons why need to show the warning popup.",name:"reason",required:!0,type:{name:"enum",value:[{value:'"DATA_SOURCE_REMOVED"'},{value:'"SOURCE_WIDGET_REMOVED"'},{value:'"MAP_CHANGED"'}]}},beforeRemove:{defaultValue:null,description:"Will call this function before removing data source/source widget and related widgets.",name:"beforeRemove",required:!1,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/lib/data-source-selector/index.tsx#DataSourceRemoveWarningPopup"]={docgenInfo:DataSourceRemoveWarningPopup.__docgenInfo,name:"DataSourceRemoveWarningPopup",path:"../jimu-ui/advanced/lib/data-source-selector/index.tsx#DataSourceRemoveWarningPopup"})}catch(__react_docgen_typescript_loader_error){}(0,jimu_theme.SF)("jimu-ui/advanced/data-source-selector/",styles_namespaceObject);try{DataSourceTypes.displayName="DataSourceTypes",DataSourceTypes.__docgenInfo={description:"The data source types.",displayName:"DataSourceTypes",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/data-source-selector.tsx#DataSourceTypes"]={docgenInfo:DataSourceTypes.__docgenInfo,name:"DataSourceTypes",path:"../jimu-ui/advanced/data-source-selector.tsx#DataSourceTypes"})}catch(__react_docgen_typescript_loader_error){}try{_DataSourceSelector.displayName="_DataSourceSelector",_DataSourceSelector.__docgenInfo={description:"The `DataSourceSelector` component allows an Experience author to select a data source for widgets. This is usually used in a settings panel.\n\n```ts\nimport { DataSourceSelector } from 'jimu-ui/advanced/data-source-selector'\n```",displayName:"_DataSourceSelector",props:{isMultipleDataView:{defaultValue:{value:"false"},description:"Whether to support multiple selection of data views.\n\nOnly allow to select single data source item and single data view by default.\nTo allow to select multiple data source items and multiple data views for each selected data source item, please pass in `isMultiple=true`.\nTo allow to select single data source item and multiple data views for the selected source item, please pass in `isMultipleDataView=true`.\nTo allow to select multiple data source items and single data view for each selected data source item, please pass in `isMultiple=true` and `isMultipleDataView=false`.",name:"isMultipleDataView",required:!1,type:{name:"boolean"}},buttonLabel:{defaultValue:{value:"Select data"},description:"Label of the button which can trigger data source selector popup.",name:"buttonLabel",required:!1,type:{name:"string"}},useDataSourcesEnabled:{defaultValue:{value:"false"},description:"Whether or not to enable data source use.",name:"useDataSourcesEnabled",required:!1,type:{name:"boolean"}},mustUseDataSource:{defaultValue:{value:"false"},description:"Whether or not to show toggle data button, will hide toggle data button if the value is true.",name:"mustUseDataSource",required:!1,type:{name:"boolean"}},disableDataSourceList:{defaultValue:{value:"false"},description:"Whether or not to show data source list panel after clicking a selected data source.",name:"disableDataSourceList",required:!1,type:{name:"boolean"}},disableDataView:{defaultValue:{value:"false"},description:"Whether or not to allow to select data view,\nthe props will make data view dropdown disabled.",name:"disableDataView",required:!1,type:{name:"boolean"}},hideDataView:{defaultValue:{value:"false"},description:"Whether or not to hide the data view dropdown/some data views.\nIf the props is true, will make the entire data view dropdown hidden.\nIf the props is a function, will call it to decide whether or not to hide some items of the data view dropdown.\nPlease note that -\n1. Id of default view is `DEFAULT_DATA_VIEW_ID`, you can import it from `jimu-ui/advanced/data-source-selector`.\n2. Id of selection view is `CONSTANTS.SELECTION_DATA_VIEW_ID`, you can import `CONSTANTS` from `jimu-core`.",name:"hideDataView",required:!1,type:{name:"boolean | ((dataViewJson: IMDataViewJson, mainDataSourceId: string) => boolean)"}},hideCreateViewButton:{defaultValue:{value:"false"},description:"Whether or not to hide the 'create a view' button at the bottom of data view dropdown.",name:"hideCreateViewButton",required:!1,type:{name:"boolean"}},closeDataSourceListOnChange:{defaultValue:{value:"false"},description:"Whether or not to close data source list panel after selected data sources are changed.",name:"closeDataSourceListOnChange",required:!1,type:{name:"boolean"}},onToggleUseDataEnabled:{defaultValue:null,description:"Callback when toggle data button is clicked.",name:"onToggleUseDataEnabled",required:!1,type:{name:"(useDataSourcesEnabled: boolean) => void"}},disableSelection:{defaultValue:null,description:"Before selecting, the component will call this method to check if it can continue selecting.",name:"disableSelection",required:!1,type:{name:"(useDataSources: UseDataSource[]) => boolean"}},disableRemove:{defaultValue:null,description:"Before remove, the component will call this method to check if it can continue removing.",name:"disableRemove",required:!1,type:{name:"(useDataSources: UseDataSource[]) => boolean"}},className:{defaultValue:null,description:"only used by theme.\n@ignore Only used by theme.",name:"className",required:!1,type:{name:"string"}},"aria-label":{defaultValue:null,description:"The label used for accessibility purpose.",name:"aria-label",required:!1,type:{name:"string"}},"aria-describedby":{defaultValue:null,description:"`aria-describedby` is used to indicate the IDs of the elements that describe the component.\nIt is for accessibility purposes.",name:"aria-describedby",required:!1,type:{name:"string"}},onClickDisabledDsItem:{defaultValue:null,description:"@ignore The callback prop is called when clicking an unselectable data source item.\nOnly used by map setting.",name:"onClickDisabledDsItem",required:!1,type:{name:"() => void"}},sidePopperTrigger:{defaultValue:null,description:"@ignore The prop is passed as 'trigger' prop of SidePopper.\nOnly used by map setting.",name:"sidePopperTrigger",required:!1,type:{name:"HTMLElement | HTMLElement[]"}},onChange:{defaultValue:null,description:"Callback when selected data sources are changed.",name:"onChange",required:!1,type:{name:"(useDataSources: UseDataSource[]) => void"}},isMultiple:{defaultValue:{value:"false"},description:"Whether to support multiple selection.",name:"isMultiple",required:!1,type:{name:"boolean"}},hideHeader:{defaultValue:{value:"false"},description:"Whether to hide header of the component.",name:"hideHeader",required:!1,type:{name:"boolean"}},widgetId:{defaultValue:null,description:"Must pass `widgetId` to use parent widget's data view by default when using the same data source as parent widget.",name:"widgetId",required:!1,type:{name:"string"}},useDataSources:{defaultValue:null,description:"Selected data sources.",name:"useDataSources",required:!1,type:{name:"ImmutableArray<UseDataSource>"}},types:{defaultValue:null,description:"Supported data source types.\n`AllDataSourceTypes` is union of `DataSourceTypes` **(see `jimu-core` API documentation)** and `ArcGISDataSourceTypes` **(see `jimu-arcgis` API documentation)**.\n\n```ts\nimport { AllDataSourceTypes } from 'jimu-ui/advanced/data-source-selector'\n```",name:"types",required:!0,type:{name:"ImmutableArray<DataSourceTypes>"}},fromRootDsIds:{defaultValue:null,description:"Only list child data sources generated by these root data sources.",name:"fromRootDsIds",required:!1,type:{name:"ImmutableArray<string>"}},fromDsIds:{defaultValue:null,description:"Only list these data sources.",name:"fromDsIds",required:!1,type:{name:"ImmutableArray<string>"}},hideDs:{defaultValue:null,description:"Whether to hide the data source in the list.",name:"hideDs",required:!1,type:{name:"(dsJson: IMDataSourceJson) => boolean"}},hideTypeDropdown:{defaultValue:{value:"false"},description:"Whether to hide dropdown that is used to filter the list by data source type.",name:"hideTypeDropdown",required:!1,type:{name:"boolean"}},hideAllOptionOfTypeDropdown:{defaultValue:{value:"false"},description:"Whether to hide `All` option of type dropdown. Works only when `hideTypeDropdown` is not true.",name:"hideAllOptionOfTypeDropdown",required:!1,type:{name:"boolean"}},hideAddDataButton:{defaultValue:{value:"false"},description:"Whether to hide the add data button at bottom.",name:"hideAddDataButton",required:!1,type:{name:"boolean"}},disableAddData:{defaultValue:{value:"false"},description:"Whether to hide the add data button at bottom.\n@deprecated",name:"disableAddData",required:!1,type:{name:"boolean"}},hideTabs:{defaultValue:null,description:"Hide some of the tabs.\nPlease note that if pass in `hideTabs`, won't calculate which tabs need to be displayed automatically, will only show tabs that are not included in the array.",name:"hideTabs",required:!1,type:{name:'ImmutableArray<"ADDED" | "OUTPUT">'}},isBatched:{defaultValue:{value:"false"},description:"Whether support batch selection. If true, selecting a parent data source will automatically select all supported child data sources.\nOnly takes effect when `isMultiple` is true.",name:"isBatched",required:!1,type:{name:"boolean"}},enableToSelectOutputDsFromSelf:{defaultValue:{value:"false"},description:"Allow to select output data sources which are generated by current widget itself.\nDo not allow widgets to select these data sources by default.",name:"enableToSelectOutputDsFromSelf",required:!1,type:{name:"boolean"}},showQueriableDataSourceWithoutFields:{defaultValue:{value:"false"},description:"Whether or not to show queriable data sources that have no fields.\nThese data sources extend from the `QueriableDataSource` but do not have fields, which means it will throw error if call `query` method or `load` method.",name:"showQueriableDataSourceWithoutFields",required:!1,type:{name:"boolean"}},dataSources:{defaultValue:null,description:"@ignore",name:"dataSources",required:!0,type:{name:"ImmutableObject<{ [dsId: string]: DataSourceJson; }>"}},dataSourcesInfo:{defaultValue:null,description:"@ignore",name:"dataSourcesInfo",required:!0,type:{name:"ImmutableObject<{ [dsId: string]: DataSourceInfo; }>"}},intl:{defaultValue:null,description:"@ignore",name:"intl",required:!0,type:{name:"IntlShape"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/data-source-selector.tsx#_DataSourceSelector"]={docgenInfo:_DataSourceSelector.__docgenInfo,name:"_DataSourceSelector",path:"../jimu-ui/advanced/data-source-selector.tsx#_DataSourceSelector"})}catch(__react_docgen_typescript_loader_error){}try{DataSourceSelector.displayName="DataSourceSelector",DataSourceSelector.__docgenInfo={description:"A component that allows an Experience author to select a data source for widgets. This is usually used in a settings panel.",displayName:"DataSourceSelector",props:{className:{defaultValue:null,description:"only used by theme.\n@ignore Only used by theme.",name:"className",required:!1,type:{name:"string"}},"aria-describedby":{defaultValue:null,description:"`aria-describedby` is used to indicate the IDs of the elements that describe the component.\nIt is for accessibility purposes.",name:"aria-describedby",required:!1,type:{name:"string"}},"aria-label":{defaultValue:null,description:"The label used for accessibility purpose.",name:"aria-label",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"Callback when selected data sources are changed.",name:"onChange",required:!1,type:{name:"(useDataSources: UseDataSource[]) => void"}},isMultiple:{defaultValue:{value:"false"},description:"Whether to support multiple selection.",name:"isMultiple",required:!1,type:{name:"boolean"}},hideHeader:{defaultValue:{value:"false"},description:"Whether to hide header of the component.",name:"hideHeader",required:!1,type:{name:"boolean"}},widgetId:{defaultValue:null,description:"Must pass `widgetId` to use parent widget's data view by default when using the same data source as parent widget.",name:"widgetId",required:!1,type:{name:"string"}},useDataSources:{defaultValue:null,description:"Selected data sources.",name:"useDataSources",required:!1,type:{name:"Readonly<Remaining<UseDataSource>> & Additions<UseDataSource> & Overrides<UseDataSource> & ReadOnlyIndexer<...>"}},useDataSourcesEnabled:{defaultValue:{value:"false"},description:"Whether or not to enable data source use.",name:"useDataSourcesEnabled",required:!1,type:{name:"boolean"}},buttonLabel:{defaultValue:{value:"Select data"},description:"Label of the button which can trigger data source selector popup.",name:"buttonLabel",required:!1,type:{name:"string"}},types:{defaultValue:null,description:"Supported data source types.\n`AllDataSourceTypes` is union of `DataSourceTypes` **(see `jimu-core` API documentation)** and `ArcGISDataSourceTypes` **(see `jimu-arcgis` API documentation)**.\n\n```ts\nimport { AllDataSourceTypes } from 'jimu-ui/advanced/data-source-selector'\n```",name:"types",required:!0,type:{name:"Readonly<Remaining<DataSourceTypes>> & Additions<DataSourceTypes> & Overrides<DataSourceTypes> & ReadOnlyIndexer<...>"}},disableSelection:{defaultValue:null,description:"Before selecting, the component will call this method to check if it can continue selecting.",name:"disableSelection",required:!1,type:{name:"(useDataSources: UseDataSource[]) => boolean"}},disableRemove:{defaultValue:null,description:"Before remove, the component will call this method to check if it can continue removing.",name:"disableRemove",required:!1,type:{name:"(useDataSources: UseDataSource[]) => boolean"}},fromRootDsIds:{defaultValue:null,description:"Only list child data sources generated by these root data sources.",name:"fromRootDsIds",required:!1,type:{name:"Readonly<Remaining<string>> & Additions<string> & Overrides<string> & ReadOnlyIndexer<string>"}},fromDsIds:{defaultValue:null,description:"Only list these data sources.",name:"fromDsIds",required:!1,type:{name:"Readonly<Remaining<string>> & Additions<string> & Overrides<string> & ReadOnlyIndexer<string>"}},hideDs:{defaultValue:null,description:"Whether to hide the data source in the list.",name:"hideDs",required:!1,type:{name:"(dsJson: IMDataSourceJson) => boolean"}},hideTypeDropdown:{defaultValue:{value:"false"},description:"Whether to hide dropdown that is used to filter the list by data source type.",name:"hideTypeDropdown",required:!1,type:{name:"boolean"}},hideAllOptionOfTypeDropdown:{defaultValue:{value:"false"},description:"Whether to hide `All` option of type dropdown. Works only when `hideTypeDropdown` is not true.",name:"hideAllOptionOfTypeDropdown",required:!1,type:{name:"boolean"}},hideAddDataButton:{defaultValue:{value:"false"},description:"Whether to hide the add data button at bottom.",name:"hideAddDataButton",required:!1,type:{name:"boolean"}},disableAddData:{defaultValue:{value:"false"},description:"Whether to hide the add data button at bottom.\n@deprecated",name:"disableAddData",required:!1,type:{name:"boolean"}},hideTabs:{defaultValue:null,description:"Hide some of the tabs.\nPlease note that if pass in `hideTabs`, won't calculate which tabs need to be displayed automatically, will only show tabs that are not included in the array.",name:"hideTabs",required:!1,type:{name:'Readonly<Remaining<"ADDED" | "OUTPUT">> & Additions<"ADDED" | "OUTPUT"> & Overrides<"ADDED" | "OUTPUT"> & ReadOnlyIndexer<"ADDED" | "OUTPUT">'}},isBatched:{defaultValue:{value:"false"},description:"Whether support batch selection. If true, selecting a parent data source will automatically select all supported child data sources.\nOnly takes effect when `isMultiple` is true.",name:"isBatched",required:!1,type:{name:"boolean"}},enableToSelectOutputDsFromSelf:{defaultValue:{value:"false"},description:"Allow to select output data sources which are generated by current widget itself.\nDo not allow widgets to select these data sources by default.",name:"enableToSelectOutputDsFromSelf",required:!1,type:{name:"boolean"}},showQueriableDataSourceWithoutFields:{defaultValue:{value:"false"},description:"Whether or not to show queriable data sources that have no fields.\nThese data sources extend from the `QueriableDataSource` but do not have fields, which means it will throw error if call `query` method or `load` method.",name:"showQueriableDataSourceWithoutFields",required:!1,type:{name:"boolean"}},isMultipleDataView:{defaultValue:{value:"false"},description:"Whether to support multiple selection of data views.\n\nOnly allow to select single data source item and single data view by default.\nTo allow to select multiple data source items and multiple data views for each selected data source item, please pass in `isMultiple=true`.\nTo allow to select single data source item and multiple data views for the selected source item, please pass in `isMultipleDataView=true`.\nTo allow to select multiple data source items and single data view for each selected data source item, please pass in `isMultiple=true` and `isMultipleDataView=false`.",name:"isMultipleDataView",required:!1,type:{name:"boolean"}},mustUseDataSource:{defaultValue:{value:"false"},description:"Whether or not to show toggle data button, will hide toggle data button if the value is true.",name:"mustUseDataSource",required:!1,type:{name:"boolean"}},disableDataSourceList:{defaultValue:{value:"false"},description:"Whether or not to show data source list panel after clicking a selected data source.",name:"disableDataSourceList",required:!1,type:{name:"boolean"}},disableDataView:{defaultValue:{value:"false"},description:"Whether or not to allow to select data view,\nthe props will make data view dropdown disabled.",name:"disableDataView",required:!1,type:{name:"boolean"}},hideDataView:{defaultValue:{value:"false"},description:"Whether or not to hide the data view dropdown/some data views.\nIf the props is true, will make the entire data view dropdown hidden.\nIf the props is a function, will call it to decide whether or not to hide some items of the data view dropdown.\nPlease note that -\n1. Id of default view is `DEFAULT_DATA_VIEW_ID`, you can import it from `jimu-ui/advanced/data-source-selector`.\n2. Id of selection view is `CONSTANTS.SELECTION_DATA_VIEW_ID`, you can import `CONSTANTS` from `jimu-core`.",name:"hideDataView",required:!1,type:{name:"boolean | ((dataViewJson: IMDataViewJson, mainDataSourceId: string) => boolean)"}},hideCreateViewButton:{defaultValue:{value:"false"},description:"Whether or not to hide the 'create a view' button at the bottom of data view dropdown.",name:"hideCreateViewButton",required:!1,type:{name:"boolean"}},closeDataSourceListOnChange:{defaultValue:{value:"false"},description:"Whether or not to close data source list panel after selected data sources are changed.",name:"closeDataSourceListOnChange",required:!1,type:{name:"boolean"}},onToggleUseDataEnabled:{defaultValue:null,description:"Callback when toggle data button is clicked.",name:"onToggleUseDataEnabled",required:!1,type:{name:"(useDataSourcesEnabled: boolean) => void"}},onClickDisabledDsItem:{defaultValue:null,description:"@ignore The callback prop is called when clicking an unselectable data source item.\nOnly used by map setting.",name:"onClickDisabledDsItem",required:!1,type:{name:"() => void"}},sidePopperTrigger:{defaultValue:null,description:"@ignore The prop is passed as 'trigger' prop of SidePopper.\nOnly used by map setting.",name:"sidePopperTrigger",required:!1,type:{name:"HTMLElement | HTMLElement[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/data-source-selector.tsx#DataSourceSelector"]={docgenInfo:DataSourceSelector.__docgenInfo,name:"DataSourceSelector",path:"../jimu-ui/advanced/data-source-selector.tsx#DataSourceSelector"})}catch(__react_docgen_typescript_loader_error){}try{DataSourceList.displayName="DataSourceList",DataSourceList.__docgenInfo={description:"",displayName:"DataSourceList",props:{className:{defaultValue:null,description:"only used by theme.",name:"className",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"Callback when selected data sources are changed.",name:"onChange",required:!1,type:{name:"(useDataSources: UseDataSource[]) => void"}},isMultiple:{defaultValue:{value:"false"},description:"Whether to support multiple selection.",name:"isMultiple",required:!1,type:{name:"boolean"}},hideHeader:{defaultValue:{value:"false"},description:"Whether to hide header of the component.",name:"hideHeader",required:!1,type:{name:"boolean"}},widgetId:{defaultValue:null,description:"Must pass `widgetId` to use parent widget's data view by default when using the same data source as parent widget.",name:"widgetId",required:!1,type:{name:"string"}},useDataSources:{defaultValue:null,description:"Selected data sources.",name:"useDataSources",required:!1,type:{name:"Readonly<Remaining<UseDataSource>> & Additions<UseDataSource> & Overrides<UseDataSource> & ReadOnlyIndexer<...>"}},types:{defaultValue:null,description:"Supported data source types.\n`AllDataSourceTypes` is union of `DataSourceTypes` **(see `jimu-core` API documentation)** and `ArcGISDataSourceTypes` **(see `jimu-arcgis` API documentation)**.\n\n```ts\nimport { AllDataSourceTypes } from 'jimu-ui/advanced/data-source-selector'\n```",name:"types",required:!0,type:{name:"Readonly<Remaining<DataSourceTypes>> & Additions<DataSourceTypes> & Overrides<DataSourceTypes> & ReadOnlyIndexer<...>"}},isDataSourceInited:{defaultValue:null,description:"If `true`, data sources are inited.",name:"isDataSourceInited",required:!0,type:{name:"boolean"}},onCloseClick:{defaultValue:null,description:"Callback when close icon is clicked.",name:"onCloseClick",required:!1,type:{name:"() => void"}},changeInitStatus:{defaultValue:null,description:"Change data source init status, it will be necessary if the user is allowed to add new data source in the component.",name:"changeInitStatus",required:!1,type:{name:"(isInitialized: boolean) => void"}},disableSelection:{defaultValue:null,description:"Before selecting the component, this will check the variable to make sure it can continue selecting.",name:"disableSelection",required:!1,type:{name:"boolean"}},disableRemove:{defaultValue:null,description:"Before removing the component, this will check the variable to make sure it can continue removing.",name:"disableRemove",required:!1,type:{name:"boolean"}},fromRootDsIds:{defaultValue:null,description:"Only list child data sources generated by these root data sources.",name:"fromRootDsIds",required:!1,type:{name:"Readonly<Remaining<string>> & Additions<string> & Overrides<string> & ReadOnlyIndexer<string>"}},fromDsIds:{defaultValue:null,description:"Only list these data sources.",name:"fromDsIds",required:!1,type:{name:"Readonly<Remaining<string>> & Additions<string> & Overrides<string> & ReadOnlyIndexer<string>"}},hideDs:{defaultValue:null,description:"Whether to hide the data source in the list.",name:"hideDs",required:!1,type:{name:"(dsJson: IMDataSourceJson) => boolean"}},hideTypeDropdown:{defaultValue:{value:"false"},description:"Whether to hide dropdown that is used to filter the list by data source type.",name:"hideTypeDropdown",required:!1,type:{name:"boolean"}},hideAllOptionOfTypeDropdown:{defaultValue:{value:"false"},description:"Whether to hide `All` option of type dropdown. Works only when `hideTypeDropdown` is not true.",name:"hideAllOptionOfTypeDropdown",required:!1,type:{name:"boolean"}},hideAddDataButton:{defaultValue:{value:"false"},description:"Whether to hide the add data button at bottom.",name:"hideAddDataButton",required:!1,type:{name:"boolean"}},disableAddData:{defaultValue:{value:"false"},description:"Whether to hide the add data button at bottom.\n@deprecated",name:"disableAddData",required:!1,type:{name:"boolean"}},hideTabs:{defaultValue:null,description:"Hide some of the tabs.\nPlease note that if pass in `hideTabs`, won't calculate which tabs need to be displayed automatically, will only show tabs that are not included in the array.",name:"hideTabs",required:!1,type:{name:'Readonly<Remaining<"ADDED" | "OUTPUT">> & Additions<"ADDED" | "OUTPUT"> & Overrides<"ADDED" | "OUTPUT"> & ReadOnlyIndexer<"ADDED" | "OUTPUT">'}},isBatched:{defaultValue:{value:"false"},description:"Whether support batch selection. If true, selecting a parent data source will automatically select all supported child data sources.\nOnly takes effect when `isMultiple` is true.",name:"isBatched",required:!1,type:{name:"boolean"}},enableToSelectOutputDsFromSelf:{defaultValue:{value:"false"},description:"Allow to select output data sources which are generated by current widget itself.\nDo not allow widgets to select these data sources by default.",name:"enableToSelectOutputDsFromSelf",required:!1,type:{name:"boolean"}},showQueriableDataSourceWithoutFields:{defaultValue:{value:"false"},description:"Whether or not to show queriable data sources that have no fields.\nThese data sources extend from the `QueriableDataSource` but do not have fields, which means it will throw error if call `query` method or `load` method.",name:"showQueriableDataSourceWithoutFields",required:!1,type:{name:"boolean"}},onClickDisabledDsItem:{defaultValue:null,description:"",name:"onClickDisabledDsItem",required:!1,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/data-source-selector.tsx#DataSourceList"]={docgenInfo:DataSourceList.__docgenInfo,name:"DataSourceList",path:"../jimu-ui/advanced/data-source-selector.tsx#DataSourceList"})}catch(__react_docgen_typescript_loader_error){}try{ExternalDataSourceSelector.displayName="ExternalDataSourceSelector",ExternalDataSourceSelector.__docgenInfo={description:"",displayName:"ExternalDataSourceSelector",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!1,type:{name:"(dsJsons: IMDataSourceJson[]) => void"}},portalUrl:{defaultValue:null,description:"",name:"portalUrl",required:!0,type:{name:"string"}},isMultiple:{defaultValue:null,description:"",name:"isMultiple",required:!1,type:{name:"boolean"}},types:{defaultValue:null,description:"",name:"types",required:!1,type:{name:"ImmutableArray<DataSourceTypes>"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!1,type:{name:"(dsJsons: IMDataSourceJson[]) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!1,type:{name:"() => void"}},onFinish:{defaultValue:null,description:"",name:"onFinish",required:!1,type:{name:"(dsJsons: IMDataSourceJson[]) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/data-source-selector.tsx#ExternalDataSourceSelector"]={docgenInfo:ExternalDataSourceSelector.__docgenInfo,name:"ExternalDataSourceSelector",path:"../jimu-ui/advanced/data-source-selector.tsx#ExternalDataSourceSelector"})}catch(__react_docgen_typescript_loader_error){}try{DataSourceItem.displayName="DataSourceItem",DataSourceItem.__docgenInfo={description:"",displayName:"DataSourceItem",props:{dataSourceJson:{defaultValue:null,description:"",name:"dataSourceJson",required:!0,type:{name:"IMDataSourceJson"}},isMoreIconShown:{defaultValue:null,description:"",name:"isMoreIconShown",required:!1,type:{name:"boolean"}},isCloseIconShown:{defaultValue:null,description:"",name:"isCloseIconShown",required:!1,type:{name:"boolean"}},isRenameInputShown:{defaultValue:null,description:"",name:"isRenameInputShown",required:!1,type:{name:"boolean"}},isRelatedWidgetsShown:{defaultValue:null,description:"",name:"isRelatedWidgetsShown",required:!1,type:{name:"boolean"}},isMappingIconShown:{defaultValue:null,description:"",name:"isMappingIconShown",required:!1,type:{name:"boolean"}},isErrorIconShown:{defaultValue:null,description:"",name:"isErrorIconShown",required:!1,type:{name:"boolean"}},isSelected:{defaultValue:null,description:"",name:"isSelected",required:!1,type:{name:"boolean"}},isHideable:{defaultValue:null,description:"",name:"isHideable",required:!1,type:{name:"boolean"}},isLoadingShown:{defaultValue:null,description:"",name:"isLoadingShown",required:!1,type:{name:"boolean"}},errorTitle:{defaultValue:null,description:"",name:"errorTitle",required:!1,type:{name:"string"}},onDataSourceItemClick:{defaultValue:null,description:"",name:"onDataSourceItemClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onMappingIconClick:{defaultValue:null,description:"",name:"onMappingIconClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onCloseIconClick:{defaultValue:null,description:"",name:"onCloseIconClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onMoreIconClick:{defaultValue:null,description:"",name:"onMoreIconClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onRename:{defaultValue:null,description:"",name:"onRename",required:!1,type:{name:"(dsLabel: string) => void"}},onToggleHidden:{defaultValue:null,description:"",name:"onToggleHidden",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onChildDataIconClick:{defaultValue:null,description:"",name:"onChildDataIconClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onRelatedWidgetsIconClick:{defaultValue:null,description:"",name:"onRelatedWidgetsIconClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/data-source-selector.tsx#DataSourceItem"]={docgenInfo:DataSourceItem.__docgenInfo,name:"DataSourceItem",path:"../jimu-ui/advanced/data-source-selector.tsx#DataSourceItem"})}catch(__react_docgen_typescript_loader_error){}try{DataSourceTree.displayName="DataSourceTree",DataSourceTree.__docgenInfo={description:"The data source tree has two kinds of node, selectable node and unselectable node.\nSelectable node means the node can be selected and unselectable node means the node can not be selected.\nThe rules to generate unselectable node:\n1. If node A can not be selected and all descendant nodes of A can not be selected, the subtree using A as root node will be hidden.\n2. If node A can not be selected and some descendant nodes of A can be selected, A will only render as a label.\n3. If node A can not be selected, A's child node A1 also can not be selected and A1's child node A11 can be selected,\n   A11's parent node will be a unselectable node and the label will be `A / A11`.",displayName:"DataSourceTree",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/data-source-selector.tsx#DataSourceTree"]={docgenInfo:DataSourceTree.__docgenInfo,name:"DataSourceTree",path:"../jimu-ui/advanced/data-source-selector.tsx#DataSourceTree"})}catch(__react_docgen_typescript_loader_error){}try{DataSourceErrorItem.displayName="DataSourceErrorItem",DataSourceErrorItem.__docgenInfo={description:"",displayName:"DataSourceErrorItem",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},dataSourceJson:{defaultValue:null,description:"",name:"dataSourceJson",required:!0,type:{name:"IMDataSourceJson"}},isMoreIconShown:{defaultValue:null,description:"",name:"isMoreIconShown",required:!1,type:{name:"boolean"}},isCloseIconShown:{defaultValue:null,description:"",name:"isCloseIconShown",required:!1,type:{name:"boolean"}},isRelatedWidgetsShown:{defaultValue:null,description:"",name:"isRelatedWidgetsShown",required:!1,type:{name:"boolean"}},isErrorIconShown:{defaultValue:null,description:"",name:"isErrorIconShown",required:!1,type:{name:"boolean"}},isSelected:{defaultValue:null,description:"",name:"isSelected",required:!1,type:{name:"boolean"}},isHideable:{defaultValue:null,description:"",name:"isHideable",required:!1,type:{name:"boolean"}},isLoadingShown:{defaultValue:null,description:"",name:"isLoadingShown",required:!1,type:{name:"boolean"}},errorTitle:{defaultValue:null,description:"",name:"errorTitle",required:!1,type:{name:"string"}},onDataSourceItemClick:{defaultValue:null,description:"",name:"onDataSourceItemClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onCloseIconClick:{defaultValue:null,description:"",name:"onCloseIconClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onMoreIconClick:{defaultValue:null,description:"",name:"onMoreIconClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onToggleHidden:{defaultValue:null,description:"",name:"onToggleHidden",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onChildDataIconClick:{defaultValue:null,description:"",name:"onChildDataIconClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}},onRelatedWidgetsIconClick:{defaultValue:null,description:"",name:"onRelatedWidgetsIconClick",required:!1,type:{name:"(dsJson: IMDataSourceJson) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/data-source-selector.tsx#DataSourceErrorItem"]={docgenInfo:DataSourceErrorItem.__docgenInfo,name:"DataSourceErrorItem",path:"../jimu-ui/advanced/data-source-selector.tsx#DataSourceErrorItem"})}catch(__react_docgen_typescript_loader_error){}try{FieldSelector.displayName="FieldSelector",FieldSelector.__docgenInfo={description:"A component to select field from a data source.",displayName:"FieldSelector",props:{useDataSources:{defaultValue:null,description:"Data sources only supports feature layer.\nIf your data source is initialized, please use `dataSources`, or use `useDataSources`.",name:"useDataSources",required:!1,type:{name:"ImmutableArray<UseDataSource>"}},dataSources:{defaultValue:null,description:"@ignore",name:"dataSources",required:!1,type:{name:"DataSource[]"}},types:{defaultValue:null,description:"Field type.\nIf `types` is not defined, will list all types of fields.",name:"types",required:!1,type:{name:"ImmutableArray<JimuFieldType>"}},selectedFields:{defaultValue:null,description:"Selected fields, use object when selected fields are from multiple data sources.",name:"selectedFields",required:!1,type:{name:"ImmutableArray<string> | ImmutableObject<{ [dataSourceId: string]: string[]; }>"}},hiddenFields:{defaultValue:null,description:"Fields which should be hidden, use object when selected fields are from multiple data sources.",name:"hiddenFields",required:!1,type:{name:"ImmutableArray<string> | ImmutableObject<{ [dataSourceId: string]: string[]; }>"}},disabledFields:{defaultValue:null,description:"Fields which should be disabled, use object when selected fields are from multiple data sources.",name:"disabledFields",required:!1,type:{name:"ImmutableArray<string> | ImmutableObject<{ [dataSourceId: string]: string[]; }>"}},isDataSourceDropDownHidden:{defaultValue:{value:"false"},description:"Whether or not to hide the data source dropdown, the dropdown is used to change the data source when multiple data sources are passed.",name:"isDataSourceDropDownHidden",required:!1,type:{name:"boolean"}},isSearchInputHidden:{defaultValue:{value:"false"},description:"Whether or not to hide the search input, the input is used to filter fields.",name:"isSearchInputHidden",required:!1,type:{name:"boolean"}},useMultiDropdownBottomTools:{defaultValue:{value:"false"},description:"Whether to use tools in the bottom of multi-select dropdown.\nPlease note the props works only when both of `useDropdown` and `isMultiple` are true.",name:"useMultiDropdownBottomTools",required:!1,type:{name:"boolean"}},isSelectedFromRepeatedDataSourceContext:{defaultValue:{value:"false"},description:"Whether selected fields are from repeated data source context.",name:"isSelectedFromRepeatedDataSourceContext",required:!1,type:{name:"boolean"}},useDropdown:{defaultValue:{value:"false"},description:"Whether or not to use dropdown to show the field list. If true, it will show dropdown, otherwise it will not use dropdown.",name:"useDropdown",required:!1,type:{name:"boolean"}},useDefault:{defaultValue:{value:"false"},description:"Whether or not to use a default field as selected. If true, will call `onChange` if data source changes and no `selectedFields`.",name:"useDefault",required:!1,type:{name:"boolean"}},isMultiple:{defaultValue:{value:"false"},description:"Whether or not to support multiple selection.",name:"isMultiple",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"Placeholder for dropdown, if `useDropdown` is true.",name:"placeholder",required:!1,type:{name:"string"}},dropdownProps:{defaultValue:null,description:"Dropdown props, if `useDropdown` is true.",name:"dropdownProps",required:!1,type:{name:"AdvancedSelectProps"}},widgetId:{defaultValue:null,description:"Use widget id to get widget context, e.g., whether widget is in repeated data source context.",name:"widgetId",required:!1,type:{name:"string"}},useSelectionDataView:{defaultValue:{value:"false"},description:"Whether to use selection data view.",name:"useSelectionDataView",required:!1,type:{name:"boolean"}},usePopulatedDataView:{defaultValue:{value:"false"},description:"Whether to use populated data view.",name:"usePopulatedDataView",required:!1,type:{name:"boolean"}},noSelectionItem:{defaultValue:null,description:"If there is no selected fields, will highlight or select this item.\nIf click this item, will clear all selected fields.",name:"noSelectionItem",required:!1,type:{name:"{ name: string; }"}},className:{defaultValue:null,description:"@ignore",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"@ignore",name:"style",required:!1,type:{name:"CSSProperties"}},onChange:{defaultValue:null,description:"Callback when selected fields change.",name:"onChange",required:!1,type:{name:"(allSelectedFields: IMFieldSchema[], ds: DataSource, isSelectedFromRepeatedDataSourceContext: boolean) => void"}},useKeyUpEvent:{defaultValue:null,description:"Whether pass `useKeyUpEvent` to the AdvanceSelect",name:"useKeyUpEvent",required:!1,type:{name:"boolean"}},"aria-label":{defaultValue:null,description:"aria-label used for the screen reader",name:"aria-label",required:!1,type:{name:"string"}},toggle:{defaultValue:null,description:"Callback fired when toggling the select menu.",name:"toggle",required:!1,type:{name:"(isOpen?: boolean) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/data-source-selector.tsx#FieldSelector"]={docgenInfo:FieldSelector.__docgenInfo,name:"FieldSelector",path:"../jimu-ui/advanced/data-source-selector.tsx#FieldSelector"})}catch(__react_docgen_typescript_loader_error){}try{FieldSelectorWithFullTextIndex.displayName="FieldSelectorWithFullTextIndex",FieldSelectorWithFullTextIndex.__docgenInfo={description:"",displayName:"FieldSelectorWithFullTextIndex",props:{widgetId:{defaultValue:null,description:"Use widget id to get widget context, e.g., whether widget is in repeated data source context.",name:"widgetId",required:!0,type:{name:"string"}},addDefinitionStatusChange:{defaultValue:null,description:"",name:"addDefinitionStatusChange",required:!1,type:{name:"(status: AddDefinitionStatus) => void"}},useDataSources:{defaultValue:null,description:"Data sources only supports feature layer.\nIf your data source is initialized, please use `dataSources`, or use `useDataSources`.",name:"useDataSources",required:!1,type:{name:"ImmutableArray<UseDataSource>"}},dataSources:{defaultValue:null,description:"@ignore",name:"dataSources",required:!1,type:{name:"DataSource[]"}},types:{defaultValue:null,description:"Field type.\nIf `types` is not defined, will list all types of fields.",name:"types",required:!1,type:{name:"ImmutableArray<JimuFieldType>"}},selectedFields:{defaultValue:null,description:"Selected fields, use object when selected fields are from multiple data sources.",name:"selectedFields",required:!1,type:{name:"ImmutableArray<string> | ImmutableObject<{ [dataSourceId: string]: string[]; }>"}},hiddenFields:{defaultValue:null,description:"Fields which should be hidden, use object when selected fields are from multiple data sources.",name:"hiddenFields",required:!1,type:{name:"ImmutableArray<string> | ImmutableObject<{ [dataSourceId: string]: string[]; }>"}},disabledFields:{defaultValue:null,description:"Fields which should be disabled, use object when selected fields are from multiple data sources.",name:"disabledFields",required:!1,type:{name:"ImmutableArray<string> | ImmutableObject<{ [dataSourceId: string]: string[]; }>"}},isDataSourceDropDownHidden:{defaultValue:{value:"false"},description:"Whether or not to hide the data source dropdown, the dropdown is used to change the data source when multiple data sources are passed.",name:"isDataSourceDropDownHidden",required:!1,type:{name:"boolean"}},isSearchInputHidden:{defaultValue:{value:"false"},description:"Whether or not to hide the search input, the input is used to filter fields.",name:"isSearchInputHidden",required:!1,type:{name:"boolean"}},useMultiDropdownBottomTools:{defaultValue:{value:"false"},description:"Whether to use tools in the bottom of multi-select dropdown.\nPlease note the props works only when both of `useDropdown` and `isMultiple` are true.",name:"useMultiDropdownBottomTools",required:!1,type:{name:"boolean"}},isSelectedFromRepeatedDataSourceContext:{defaultValue:{value:"false"},description:"Whether selected fields are from repeated data source context.",name:"isSelectedFromRepeatedDataSourceContext",required:!1,type:{name:"boolean"}},useDropdown:{defaultValue:{value:"false"},description:"Whether or not to use dropdown to show the field list. If true, it will show dropdown, otherwise it will not use dropdown.",name:"useDropdown",required:!1,type:{name:"boolean"}},useDefault:{defaultValue:{value:"false"},description:"Whether or not to use a default field as selected. If true, will call `onChange` if data source changes and no `selectedFields`.",name:"useDefault",required:!1,type:{name:"boolean"}},isMultiple:{defaultValue:{value:"false"},description:"Whether or not to support multiple selection.",name:"isMultiple",required:!1,type:{name:"boolean"}},placeholder:{defaultValue:null,description:"Placeholder for dropdown, if `useDropdown` is true.",name:"placeholder",required:!1,type:{name:"string"}},dropdownProps:{defaultValue:null,description:"Dropdown props, if `useDropdown` is true.",name:"dropdownProps",required:!1,type:{name:"AdvancedSelectProps"}},useSelectionDataView:{defaultValue:{value:"false"},description:"Whether to use selection data view.",name:"useSelectionDataView",required:!1,type:{name:"boolean"}},usePopulatedDataView:{defaultValue:{value:"false"},description:"Whether to use populated data view.",name:"usePopulatedDataView",required:!1,type:{name:"boolean"}},noSelectionItem:{defaultValue:null,description:"If there is no selected fields, will highlight or select this item.\nIf click this item, will clear all selected fields.",name:"noSelectionItem",required:!1,type:{name:"{ name: string; }"}},className:{defaultValue:null,description:"@ignore",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"@ignore",name:"style",required:!1,type:{name:"CSSProperties"}},onChange:{defaultValue:null,description:"Callback when selected fields change.",name:"onChange",required:!1,type:{name:"(allSelectedFields: IMFieldSchema[], ds: DataSource, isSelectedFromRepeatedDataSourceContext: boolean) => void"}},useKeyUpEvent:{defaultValue:null,description:"Whether pass `useKeyUpEvent` to the AdvanceSelect",name:"useKeyUpEvent",required:!1,type:{name:"boolean"}},"aria-label":{defaultValue:null,description:"aria-label used for the screen reader",name:"aria-label",required:!1,type:{name:"string"}},toggle:{defaultValue:null,description:"Callback fired when toggling the select menu.",name:"toggle",required:!1,type:{name:"(isOpen?: boolean) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/data-source-selector.tsx#FieldSelectorWithFullTextIndex"]={docgenInfo:FieldSelectorWithFullTextIndex.__docgenInfo,name:"FieldSelectorWithFullTextIndex",path:"../jimu-ui/advanced/data-source-selector.tsx#FieldSelectorWithFullTextIndex"})}catch(__react_docgen_typescript_loader_error){}try{First.displayName="DataViewPriority.First",First.__docgenInfo={description:"populated data view > common data view (aka user added data view) > selection data view > default data view (aka main data source)",displayName:"DataViewPriority.First",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/data-source-selector.tsx#DataViewPriority.First"]={docgenInfo:DataViewPriority.First.__docgenInfo,name:"DataViewPriority.First",path:"../jimu-ui/advanced/data-source-selector.tsx#DataViewPriority.First"})}catch(__react_docgen_typescript_loader_error){}try{Second.displayName="DataViewPriority.Second",Second.__docgenInfo={description:"common data view > default data view > selection data view > populated data view",displayName:"DataViewPriority.Second",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/data-source-selector.tsx#DataViewPriority.Second"]={docgenInfo:DataViewPriority.Second.__docgenInfo,name:"DataViewPriority.Second",path:"../jimu-ui/advanced/data-source-selector.tsx#DataViewPriority.Second"})}catch(__react_docgen_typescript_loader_error){}try{MainDataAndViewSelector.displayName="MainDataAndViewSelector",MainDataAndViewSelector.__docgenInfo={description:"",displayName:"MainDataAndViewSelector",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(useDataSource: IMUseDataSource, isFromRepeatedDataSourceContext: boolean) => void"}},widgetId:{defaultValue:null,description:"Use widget id to get widget context, e.g. whether widget is in repeated data source context.",name:"widgetId",required:!1,type:{name:"string"}},useDataSources:{defaultValue:null,description:"",name:"useDataSources",required:!0,type:{name:"Readonly<Remaining<UseDataSource>> & Additions<UseDataSource> & Overrides<UseDataSource> & ReadOnlyIndexer<...>"}},isSelectedFromRepeatedDataSourceContext:{defaultValue:null,description:"Whether selected use data source is from repeated data source context.",name:"isSelectedFromRepeatedDataSourceContext",required:!1,type:{name:"boolean"}},useSelectionDataView:{defaultValue:null,description:"Whether to use selection data view.",name:"useSelectionDataView",required:!1,type:{name:"boolean"}},usePopulatedDataView:{defaultValue:null,description:"Whether to use populated data view.",name:"usePopulatedDataView",required:!1,type:{name:"boolean"}},selectedUseDataSource:{defaultValue:null,description:"",name:"selectedUseDataSource",required:!1,type:{name:"ImmutableObjectMixin<UseDataSource> & { readonly dataSourceId: string; readonly mainDataSourceId: string; readonly dataViewId?: string; readonly rootDataSourceId?: string; readonly fields?: ImmutableArray<...>; readonly useFieldsInPopupInfo?: boolean; readonly useFieldsInSymbol?: boolean; }"}},defaultDataViewPriority:{defaultValue:null,description:"The priority of default selected data view if no `selectedUseDataSource`.",name:"defaultDataViewPriority",required:!1,type:{name:"enum",value:[{value:'"POPULATED_VIEW_SELECTION_DEFAULT"'},{value:'"VIEW_DEFAULT_SELECTION_POPULATED"'}]}},hideMainDataSourceSelect:{defaultValue:null,description:"Whether to hide the select component which is to select main data source.",name:"hideMainDataSourceSelect",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/data-source-selector.tsx#MainDataAndViewSelector"]={docgenInfo:MainDataAndViewSelector.__docgenInfo,name:"MainDataAndViewSelector",path:"../jimu-ui/advanced/data-source-selector.tsx#MainDataAndViewSelector"})}catch(__react_docgen_typescript_loader_error){}try{DataViewSettingPopup.displayName="DataViewSettingPopup",DataViewSettingPopup.__docgenInfo={description:"",displayName:"DataViewSettingPopup",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},toggle:{defaultValue:null,description:"",name:"toggle",required:!0,type:{name:"() => void"}},disableRemove:{defaultValue:null,description:"",name:"disableRemove",required:!1,type:{name:"boolean"}},mainDataSource:{defaultValue:null,description:"",name:"mainDataSource",required:!0,type:{name:"DataSource"}},dataView:{defaultValue:null,description:"",name:"dataView",required:!0,type:{name:"IMDataViewJson"}},isSettingMainDataSource:{defaultValue:null,description:"Whether is setting main data source or data view.",name:"isSettingMainDataSource",required:!1,type:{name:"boolean"}},disableRename:{defaultValue:null,description:"",name:"disableRename",required:!1,type:{name:"boolean"}},disableDuplicate:{defaultValue:null,description:"",name:"disableDuplicate",required:!1,type:{name:"boolean"}},newDataViewId:{defaultValue:null,description:"If there is no data view, will create a new data view using this value as data view id.",name:"newDataViewId",required:!1,type:{name:"string"}},newDataViewLabel:{defaultValue:null,description:"If there is no data view, will create a new data view using this value as data view label.",name:"newDataViewLabel",required:!1,type:{name:"string"}},onApply:{defaultValue:null,description:"",name:"onApply",required:!0,type:{name:"(dataView: IMDataViewJson) => void"}},onDuplicate:{defaultValue:null,description:"",name:"onDuplicate",required:!1,type:{name:"(dataView: IMDataViewJson) => void"}},afterRemove:{defaultValue:null,description:"Will call this function after removing data view.",name:"afterRemove",required:!1,type:{name:"(dataView: IMDataViewJson) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/data-source-selector.tsx#DataViewSettingPopup"]={docgenInfo:DataViewSettingPopup.__docgenInfo,name:"DataViewSettingPopup",path:"../jimu-ui/advanced/data-source-selector.tsx#DataViewSettingPopup"})}catch(__react_docgen_typescript_loader_error){}try{DataSourceRemoved.displayName="DataSourceRemoveWaringReason.DataSourceRemoved",DataSourceRemoved.__docgenInfo={description:"Data source is removed.",displayName:"DataSourceRemoveWaringReason.DataSourceRemoved",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/data-source-selector.tsx#DataSourceRemoveWaringReason.DataSourceRemoved"]={docgenInfo:DataSourceRemoveWaringReason.DataSourceRemoved.__docgenInfo,name:"DataSourceRemoveWaringReason.DataSourceRemoved",path:"../jimu-ui/advanced/data-source-selector.tsx#DataSourceRemoveWaringReason.DataSourceRemoved"})}catch(__react_docgen_typescript_loader_error){}try{SourceWidgetRemoved.displayName="DataSourceRemoveWaringReason.SourceWidgetRemoved",SourceWidgetRemoved.__docgenInfo={description:"Source widget of output data source is removed.",displayName:"DataSourceRemoveWaringReason.SourceWidgetRemoved",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/data-source-selector.tsx#DataSourceRemoveWaringReason.SourceWidgetRemoved"]={docgenInfo:DataSourceRemoveWaringReason.SourceWidgetRemoved.__docgenInfo,name:"DataSourceRemoveWaringReason.SourceWidgetRemoved",path:"../jimu-ui/advanced/data-source-selector.tsx#DataSourceRemoveWaringReason.SourceWidgetRemoved"})}catch(__react_docgen_typescript_loader_error){}try{MapChanged.displayName="DataSourceRemoveWaringReason.MapChanged",MapChanged.__docgenInfo={description:"In express mode, widgets can only select the child data sources of the map widget's data sources.\nIf change the map widget's data source, will affect other widgets.",displayName:"DataSourceRemoveWaringReason.MapChanged",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/data-source-selector.tsx#DataSourceRemoveWaringReason.MapChanged"]={docgenInfo:DataSourceRemoveWaringReason.MapChanged.__docgenInfo,name:"DataSourceRemoveWaringReason.MapChanged",path:"../jimu-ui/advanced/data-source-selector.tsx#DataSourceRemoveWaringReason.MapChanged"})}catch(__react_docgen_typescript_loader_error){}try{DataSourceRemoveWarningPopup.displayName="DataSourceRemoveWarningPopup",DataSourceRemoveWarningPopup.__docgenInfo={description:"",displayName:"DataSourceRemoveWarningPopup",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},label:{defaultValue:null,description:"Label of the removed data source/source widget.\nIf do not pass in the props, will use data source label or widget label.",name:"label",required:!1,type:{name:"string"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},toggle:{defaultValue:null,description:"",name:"toggle",required:!0,type:{name:"() => void"}},widgetId:{defaultValue:null,description:"If `widgetId` is passed in, will list all widgets related to output data sources of the widget.\nPlease note that this props can be superseded by `dataSourceId`.\nMust pass in one of `dataSourceId` and `widgetId`.",name:"widgetId",required:!1,type:{name:"string"}},dataSourceId:{defaultValue:null,description:"If `dataSourceId` is passed in, will list all widgets related to the data source and ignore `widgetId`.\nMust pass in one of `dataSourceId` and `widgetId`.",name:"dataSourceId",required:!1,type:{name:"string"}},onCancel:{defaultValue:null,description:"Will call this function if cancel button is clicked.",name:"onCancel",required:!1,type:{name:"() => void"}},afterRemove:{defaultValue:null,description:"Will call this function after removing data source/source widget and related widgets.",name:"afterRemove",required:!1,type:{name:"() => void"}},reason:{defaultValue:null,description:"Reasons why need to show the warning popup.",name:"reason",required:!0,type:{name:"enum",value:[{value:'"DATA_SOURCE_REMOVED"'},{value:'"SOURCE_WIDGET_REMOVED"'},{value:'"MAP_CHANGED"'}]}},beforeRemove:{defaultValue:null,description:"Will call this function before removing data source/source widget and related widgets.",name:"beforeRemove",required:!1,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-ui/advanced/data-source-selector.tsx#DataSourceRemoveWarningPopup"]={docgenInfo:DataSourceRemoveWarningPopup.__docgenInfo,name:"DataSourceRemoveWarningPopup",path:"../jimu-ui/advanced/data-source-selector.tsx#DataSourceRemoveWarningPopup"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-ui/lib/icons/data-layer-16.svg":module=>{module.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#000" fill-rule="nonzero" d="m8 0 8 6-8 6-8-6zM1.887 6 8 10.82 14.113 6 8 1.18zM.563 9 8 14.775 15.437 9l.563.81L8 16 0 9.81z"></path></svg>'},"../jimu-ui/lib/icons/data-map.svg":module=>{module.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#000" fill-rule="nonzero" d="m6 11.943 4 1.711V4.057L6 2.346zm-1 .17V2.494l-4 1.48v9.619zm6 1.393 4-1.48V2.407l-4 1.48zM0 15V3.307L5.75 1.18l4.528 1.937L16 1v11.693l-5.75 2.127-4.528-1.937z"></path></svg>'},"../jimu-ui/lib/icons/data-scene.svg":module=>{module.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#000" fill-rule="nonzero" d="M7.5 4V1.39Q5.854 2.484 4.985 4zm0 3.5V5H4.512a8.1 8.1 0 0 0-.5 2.5zm0 3.5V8.5H4.012a8.1 8.1 0 0 0 .5 2.5zm0 3.61V12H4.985q.869 1.515 2.515 2.61m2.543.087A7 7 0 0 0 13.745 12h-1.6a8.3 8.3 0 0 1-2.102 2.697M11.015 12H8.5v2.61q1.646-1.095 2.515-2.61m1.974-3.5a9.3 9.3 0 0 1-.441 2.5h1.778c.365-.767.594-1.61.656-2.5zm-1.001 0H8.5V11h2.988a8.1 8.1 0 0 0 .5-2.5m.56-3.5q.381 1.163.441 2.5h1.993a7 7 0 0 0-.656-2.5zm-1.06 0H8.5v2.5h3.488a8.1 8.1 0 0 0-.5-2.5m-1.445-3.697Q11.408 2.473 12.145 4h1.6a7 7 0 0 0-3.702-2.697M8.5 4h2.515Q10.146 2.485 8.5 1.39zm-.527 12a8 8 0 1 1 .055-16 8 8 0 0 1-.055 16M5.957 1.302A7 7 0 0 0 2.255 4h1.6a8.3 8.3 0 0 1 2.102-2.697M3.011 7.5q.06-1.337.441-2.5H1.674a7 7 0 0 0-.656 2.5zm.441 3.5a9.3 9.3 0 0 1-.441-2.5H1.018c.062.89.291 1.733.656 2.5zm2.505 3.697A8.3 8.3 0 0 1 3.855 12h-1.6a7 7 0 0 0 3.702 2.697"></path></svg>'},"../jimu-ui/lib/icons/widget-link.svg":module=>{module.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#000" fill-rule="nonzero" d="m6.262 6.972-.893-.893a.5.5 0 0 1 0-.707l.003-.003a.5.5 0 0 1 .707 0l.893.893.709-.709a1.003 1.003 0 0 0 0-1.419L4.844 1.297a1.003 1.003 0 0 0-1.419 0L1.297 3.425a1.003 1.003 0 0 0 0 1.419L4.134 7.68a1.003 1.003 0 0 0 1.419 0zm1.419 0 1.347 1.347.71-.71a2.006 2.006 0 0 1 2.837 0l2.837 2.838a2.006 2.006 0 0 1 0 2.837l-2.128 2.128a2.006 2.006 0 0 1-2.837 0L7.61 12.575a2.006 2.006 0 0 1 0-2.837l.709-.71-1.347-1.347-.71.71a2.006 2.006 0 0 1-2.837 0L.588 5.552a2.006 2.006 0 0 1 0-2.837L2.716.588a2.006 2.006 0 0 1 2.837 0L8.39 3.425a2.006 2.006 0 0 1 0 2.837zm2.057 2.056.599.6a.5.5 0 0 1 0 .707l-.002.002a.5.5 0 0 1-.707 0l-.6-.6-.709.71a1.003 1.003 0 0 0 0 1.419l2.837 2.837a1.003 1.003 0 0 0 1.419 0l2.128-2.128a1.003 1.003 0 0 0 0-1.419L11.866 8.32a1.003 1.003 0 0 0-1.419 0z"></path></svg>'}}]);
//# sourceMappingURL=6990.0d4c3d59.iframe.bundle.js.map