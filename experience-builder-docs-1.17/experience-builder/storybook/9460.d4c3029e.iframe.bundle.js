"use strict";(self.webpackChunkarcgis_experience_builder_design_system=self.webpackChunkarcgis_experience_builder_design_system||[]).push([[9460],{"../jimu-for-builder/templates.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{TemplateType:()=>TemplateType,getAnchoredWindowTemplates:()=>getAnchoredWindowTemplates,getAppTemplates:()=>getAppTemplates,getBlockTemplates:()=>getBlockTemplates,getFixedModalWindowTemplates:()=>getFixedModalWindowTemplates,getFixedNonModalWindowTemplates:()=>getFixedNonModalWindowTemplates,getFooterTemplates:()=>getFooterTemplates,getFullScreenGridPageTemplates:()=>getFullScreenGridPageTemplates,getFullScreenPageTemplates:()=>getFullScreenPageTemplates,getGridTemplates:()=>getGridTemplates,getHeaderTemplates:()=>getHeaderTemplates,getScreenGroupTemplates:()=>getScreenGroupTemplates,getScreenTemplates:()=>getScreenTemplates,getScrollingPageTemplates:()=>getScrollingPageTemplates,getTemplateConfig:()=>getTemplateConfig,getWindowTemplates:()=>getWindowTemplates,init:()=>init,loadI18nMessage:()=>loadI18nMessage});var TemplateType,jimu_core=__webpack_require__("../jimu-core/index.tsx");!function(TemplateType){TemplateType.Block="block",TemplateType.Grid="grid-widget",TemplateType.Header="header",TemplateType.Footer="footer",TemplateType.FullScreenPage="full-screen-page",TemplateType.FullScreenGridPage="full-screen-grid-page",TemplateType.ScrollingPage="scrolling-page",TemplateType.Window="window",TemplateType.ScreenGroup="screen-group",TemplateType.Screen="screen",TemplateType.App="app"}(TemplateType||(TemplateType={}));var __awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};let templatesInfoPromise=null,templatesInfo={};function init(){return __awaiter(this,void 0,void 0,(function*(){return yield loadI18nMessage(),yield function loadTemplatesInfo(){if(templatesInfoPromise)return templatesInfoPromise;const locale=(0,jimu_core.Vp3)().getState().appContext.translatedLocale,templatesUrl=jimu_core.SRz.resolveModuleFullPath("templates/");return templatesInfoPromise=fetch(`${templatesUrl}templates-info.json`).then((res=>res.json())).then((_templatesInfo=>(templatesInfo=_templatesInfo,Object.keys(templatesInfo).forEach((tt=>{templatesInfo[tt]=templatesInfo[tt].filter((t=>{const portalUrl=(0,jimu_core.Vp3)().getState().portalUrl;return!jimu_core.zJ_.isAGOLDomain(portalUrl)||!t.notSupportAGOL})),templatesInfo[tt].forEach((t=>{const templateUrl=`${templatesUrl}${t.type}/${t.name}`;t.label=t.i18nLabel[locale]||t.label||t.name,t.description=t.i18nDescription[locale]||t.description||"",t.thumbnail=`${templateUrl}/${t.thumbnail}`,t.gifThumbnail&&(t.gifThumbnail=`${templateUrl}/${t.gifThumbnail}`),t.configUrl=`${templateUrl}/config.json`}))})),templatesInfo))),templatesInfoPromise}()}))}function getAppTemplates(filterTags){const templates=templatesInfo.app||[];if(!filterTags||0===(null==filterTags?void 0:filterTags.length))return templates;return templates.filter((itemInfo=>{const tags=(null==itemInfo?void 0:itemInfo.tags)||[];return filterTags.filter((tag=>tags.includes(tag))).length>0}))}function getFullScreenPageTemplates(includeBlankTemplate=!0){const templates=templatesInfo["full-screen-page"]||[];return includeBlankTemplate?templates:templates.filter((template=>!template.name.startsWith("blank")))}function getFullScreenGridPageTemplates(includeBlankTemplate=!0){const templates=templatesInfo["full-screen-grid-page"]||[];return includeBlankTemplate?templates:templates.filter((template=>!template.name.startsWith("blank")))}function getScrollingPageTemplates(includeBlankTemplate=!0){const templates=templatesInfo["scrolling-page"]||[];return includeBlankTemplate?templates:templates.filter((template=>!template.name.startsWith("blank")))}function getFixedModalWindowTemplates(includeBlankTemplate=!0){const templates=templatesInfo["fixed-modal-window"]||[];return includeBlankTemplate?templates:templates.filter((template=>!template.name.startsWith("blank")))}function getFixedNonModalWindowTemplates(){return templatesInfo["fixed-non-modal-window"]||[]}function getAnchoredWindowTemplates(){return templatesInfo["anchored-window"]||[]}function getWindowTemplates(includeBlankTemplate=!0){return getFixedModalWindowTemplates(includeBlankTemplate).concat(getFixedNonModalWindowTemplates()).concat(getAnchoredWindowTemplates())}function getHeaderTemplates(){return templatesInfo.header||[]}function getFooterTemplates(){return templatesInfo.footer||[]}function getBlockTemplates(){return templatesInfo.block||[]}function getGridTemplates(){return templatesInfo["grid-widget"]||[]}function getScreenGroupTemplates(){return templatesInfo["screen-group"]||[]}function getScreenTemplates(){return templatesInfo.screen||[]}function getTemplateConfig(templateType,templateName){return __awaiter(this,void 0,void 0,(function*(){return yield fetch(`../templates/${templateType}/${templateName}/config.json`).then((res=>__awaiter(this,void 0,void 0,(function*(){return yield res.json()})))).then((configJson=>configJson))}))}function loadI18nMessage(){return __awaiter(this,void 0,void 0,(function*(){const locale=(0,jimu_core.Vp3)().getState().appContext.locale;return yield function loadLocaleMessages(locale,supportedLocales){return __awaiter(this,void 0,void 0,(function*(){if(locale=jimu_core.Ruy.getLocaleToLoad(locale,supportedLocales)){const templatesUrl=jimu_core.SRz.resolveModuleFullPath("templates/");return yield jimu_core.Ruy.loadLocaleMessages(`${templatesUrl}/translations`,locale).then((messages=>messages))}return Promise.resolve({})}))}(locale,jimu_core.sof).then((messages=>(messages&&(0,jimu_core.Vp3)().dispatch(jimu_core.tRc.i18nMessagesLoaded("templates",messages)),jimu_core.Ruy.resetIntls(),messages)))}))}}}]);