(self.webpackChunkarcgis_experience_builder_design_system=self.webpackChunkarcgis_experience_builder_design_system||[]).push([[7373],{"../jimu-icons/outlined/application/maxgrid.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{z:()=>MaxgridOutlined});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_outlined_application_maxgrid_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/outlined/application/maxgrid.svg"),_svg_outlined_application_maxgrid_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_outlined_application_maxgrid_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const MaxgridOutlined=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_outlined_application_maxgrid_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{MaxgridOutlined.displayName="MaxgridOutlined",MaxgridOutlined.__docgenInfo={description:"",displayName:"MaxgridOutlined",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/outlined/application/maxgrid.tsx#MaxgridOutlined"]={docgenInfo:MaxgridOutlined.__docgenInfo,name:"MaxgridOutlined",path:"../jimu-icons/outlined/application/maxgrid.tsx#MaxgridOutlined"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/outlined/application/visible.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{T:()=>VisibleOutlined});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_outlined_application_visible_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/outlined/application/visible.svg"),_svg_outlined_application_visible_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_outlined_application_visible_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const VisibleOutlined=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_outlined_application_visible_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{VisibleOutlined.displayName="VisibleOutlined",VisibleOutlined.__docgenInfo={description:"",displayName:"VisibleOutlined",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/outlined/application/visible.tsx#VisibleOutlined"]={docgenInfo:VisibleOutlined.__docgenInfo,name:"VisibleOutlined",path:"../jimu-icons/outlined/application/visible.tsx#VisibleOutlined"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/outlined/directional/collapse-all.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{b:()=>CollapseAllOutlined});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/outlined/directional/collapse-all.svg"),_svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const CollapseAllOutlined=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_outlined_directional_collapse_all_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{CollapseAllOutlined.displayName="CollapseAllOutlined",CollapseAllOutlined.__docgenInfo={description:"",displayName:"CollapseAllOutlined",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/outlined/directional/collapse-all.tsx#CollapseAllOutlined"]={docgenInfo:CollapseAllOutlined.__docgenInfo,name:"CollapseAllOutlined",path:"../jimu-icons/outlined/directional/collapse-all.tsx#CollapseAllOutlined"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/outlined/directional/expand-all.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>ExpandAllOutlined});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/svg/outlined/directional/expand-all.svg"),_svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_1__),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};const ExpandAllOutlined=props=>{const SVG=window.SVG,{className}=props,others=__rest(props,["className"]),classes=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("jimu-icon jimu-icon-component",className);return SVG?jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement(SVG,Object.assign({className:classes,src:_svg_outlined_directional_expand_all_svg__WEBPACK_IMPORTED_MODULE_1___default()},others)):jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createElement("svg",Object.assign({className:classes},others))};try{ExpandAllOutlined.displayName="ExpandAllOutlined",ExpandAllOutlined.__docgenInfo={description:"",displayName:"ExpandAllOutlined",props:{children:{defaultValue:null,description:"The fallback content in case of a fetch error or unsupported browser.",name:"children",required:!1,type:{name:"ReactNode"}},title:{defaultValue:null,description:"The title of the component.",name:"title",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"Defines the styles added to the element.",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"Defines the class names added to the component.",name:"className",required:!1,type:{name:"string"}},role:{defaultValue:null,description:"To provide a role for this component.\nIt is for accessibility purposes.",name:"role",required:!1,type:{name:"AriaRole"}},"aria-hidden":{defaultValue:{value:"false"},description:"Indicates whether the element is exposed to an accessibility API.",name:"aria-hidden",required:!1,type:{name:'boolean | "true" | "false"'}},"aria-label":{defaultValue:null,description:"To provide a label for interactive components for accessibility purposes.",name:"aria-label",required:!1,type:{name:"string"}},size:{defaultValue:{value:"m"},description:"Defines the size, both width and height, of the icon.",name:"size",required:!1,type:{name:"string | number"}},loader:{defaultValue:null,description:"A component to be shown while the SVG is loading.",name:"loader",required:!1,type:{name:"ReactNode"}},isRTL:{defaultValue:null,description:"Whether it is in the RTL.\nNote: The default value is read from `getAppStore().getState().appContext?.isRTL` and is provided for use in testing and storybook environments.\n@ignore",name:"isRTL",required:!1,type:{name:"boolean"}},autoFlip:{defaultValue:{value:"false"},description:"Flips the SVG automatically for RTL.",name:"autoFlip",required:!1,type:{name:"boolean"}},currentColor:{defaultValue:{value:"true"},description:"If set to `true`, the `stroke` and `fill` properties on the child elements will be replaced with `currentColor`, in order to make `color` property effective.",name:"currentColor",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-icons/outlined/directional/expand-all.tsx#ExpandAllOutlined"]={docgenInfo:ExpandAllOutlined.__docgenInfo,name:"ExpandAllOutlined",path:"../jimu-icons/outlined/directional/expand-all.tsx#ExpandAllOutlined"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-icons/svg/outlined/application/maxgrid.svg":module=>{module.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 12"><path fill="#fff" fill-rule="evenodd" d="M12 0H7v1h4v4h1V0M0 12h5v-1H1V7H0v5" clip-rule="evenodd"></path></svg>'},"../jimu-icons/svg/outlined/application/visible.svg":module=>{module.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 12c-2.667 0-5.667-1.333-7-4 1.333-2.667 4.333-4 7-4s5.667 1.333 7 4c-1.333 2.667-4.333 4-7 4m0-7c-2.618 0-4.578.967-6 3 1.422 2.033 3.382 3 6 3s4.578-.967 6-3c-1.422-2.033-3.382-3-6-3m0 5.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5m0-1a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3" clip-rule="evenodd"></path></svg>'},"../jimu-icons/svg/outlined/brand/widget-section.svg":module=>{module.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" fill-rule="evenodd" d="M14 2a2 2 0 0 0-2-2H2a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2zM2 1h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1" clip-rule="evenodd"></path><path fill="#000" fill-rule="evenodd" d="M20 8a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2zM8 7h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1" clip-rule="evenodd"></path></svg>'},"../jimu-icons/svg/outlined/directional/collapse-all.svg":module=>{module.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M1 3h14v1H1zM9 7h6v1H9zM5.036 6.146a.5.5 0 0 0-.708 0L1.146 9.328a.5.5 0 1 0 .708.708l2.328-2.329V14.5h1V7.707l2.328 2.329a.5.5 0 1 0 .708-.708z"></path></svg>'},"../jimu-icons/svg/outlined/directional/expand-all.svg":module=>{module.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M1 3h14v1H1zM9 7h6v1H9zM4.328 14.354a.5.5 0 0 0 .708 0l3.182-3.182a.5.5 0 1 0-.708-.708l-2.328 2.329V6h-1v6.793l-2.328-2.328a.5.5 0 1 0-.708.707z"></path></svg>'},"../jimu-layouts/layout-runtime.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AccordionLayoutViewer:()=>accordion_layout_runtime_layout,CLICK_TOLERANCE:()=>types.NX,COLS_IN_ONE_ROW:()=>types.aQ,CONTEXT_MENU_ICON_SIZE:()=>types.cm,CONTEXT_MENU_ITEM_SIZE:()=>types.mE,ColumnLayoutViewer:()=>column_layout_runtime_layout,DEFAULT_AUTOPLAY_INTERVAL:()=>types.yd,FixedLayoutViewer:()=>runtime_layout,FlexRowLayoutViewer:()=>flex_row_layout_runtime_layout,GridLayoutViewer:()=>grid_layout_runtime_layout,LayoutContext:()=>LayoutContext,LayoutEntry:()=>layout_entry,LayoutItem:()=>LayoutItem,LayoutItemSizeModes:()=>types.Dy,LayoutZIndex:()=>types.NS,MIN_LAYOUT_ITEM_SIZE:()=>types.o7,OrderAdjustType:()=>types.Qr,PageContext:()=>page_context.NQ,PageRenderer:()=>page_renderer,PageVisibilityContext:()=>page_context.nj,RowLayoutViewer:()=>row_layout_runtime_layout,SectionRenderer:()=>section_renderer_SectionRenderer,ViewVisibilityContext:()=>page_context.ne,ViewportVisibilityContext:()=>page_context.EQ,WidgetRenderer:()=>WidgetRenderer,controlPanelUtils:()=>controller_panel_util,defaultMessages:()=>translations_default.A,findLayoutBuilder:()=>layout_factory_findLayoutBuilder,findLayoutViewer:()=>layout_factory_findLayoutViewer,init:()=>init,registerLayoutBuilder:()=>registerLayoutBuilder,registerLayoutViewer:()=>registerLayoutViewer,searchUtils:()=>search,utils:()=>utils});var jimu_core=__webpack_require__("../jimu-core/index.tsx"),translations_default=__webpack_require__("../jimu-layouts/lib/translations/default.ts"),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};function loadMessage(){return __awaiter(this,void 0,void 0,(function*(){let locale=(0,jimu_core.Vp3)().getState().appContext.locale;return locale=jimu_core.Ruy.getLocaleToLoad(locale,jimu_core.sof),locale?yield jimu_core.Ruy.loadLocaleMessages("jimu-layouts/lib/translations",locale).then((messages=>((0,jimu_core.Vp3)().dispatch(jimu_core.tRc.i18nMessagesLoaded("jimu-layouts",messages)),jimu_core.Ruy.resetIntls(),messages))):Promise.resolve(translations_default.A)}))}var page_context=__webpack_require__("../jimu-layouts/lib/builder/page-context.tsx");const LayoutContext=jimu_core.q_G.createContext({});var jimu_ui=__webpack_require__("../jimu-ui/index.tsx"),utils=__webpack_require__("../jimu-layouts/lib/utils.ts"),types=__webpack_require__("../jimu-layouts/lib/types.ts"),default_setting=__webpack_require__("../jimu-layouts/lib/fixed-layout/default-setting.ts"),search=__webpack_require__("../jimu-layouts/lib/search/index.ts"),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};class _WidgetRenderer extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.onMouseDown=()=>{var _a;if(this.props.widgetId){(null===(_a=(0,jimu_core.Vp3)().getState().widgetsRuntimeInfo[this.props.widgetId])||void 0===_a?void 0:_a.state)!==jimu_core.YGz.Active&&(0,jimu_core.Vp3)().dispatch(jimu_core.tRc.activateWidget(this.props.widgetId))}},this.onMouseDown=this.onMouseDown.bind(this),this.ref=jimu_core.q_G.createRef(),this.state={error:null}}loadWidgetClass(){const{widgetId,isClassLoaded}=this.props;widgetId&&!isClassLoaded&&jimu_core.SS0.getInstance().loadWidgetClass(widgetId).catch((err=>{console.log(err),this.setState({error:jimu_core.Ruy.getIntl().formatMessage({id:"widgetLoadError"})})}))}componentDidMount(){this.loadWidgetClass()}componentDidUpdate(){this.loadWidgetClass()}renderWidgetContent(){const{widgetId,layoutId,layoutItemId,autoWidth,autoHeight,onInitResizeHandler,onInitDragHandler}=this.props;let WidgetClass;return widgetId&&(WidgetClass=jimu_core.SS0.getInstance().getWidgetClass(widgetId)),this.state.error?(0,jimu_core.Yac)("div",{className:"widget-content"},this.state.error):(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)("widget-content",{"d-none":!widgetId})},WidgetClass&&(0,jimu_core.Yac)(jimu_core.tHk,null,(0,jimu_core.Yac)(WidgetClass,{widgetId,layoutId,layoutItemId,autoWidth,autoHeight,onInitResizeHandler,onInitDragHandler})))}getStyle(){const{forceAspectRatio,aspectRatio}=this.props,overflowScrollingStyle=jimu_core.AHW`
      -webkit-overflow-scrolling: touch;
    `;return jimu_core.AHW`
      ${"app-loader"===this.props.widgetId?overflowScrollingStyle:""};
      overflow: ${this.props.canCrossLayoutBoundary?"visible":"hidden"};
      position: relative;
      aspect-ratio: ${forceAspectRatio&&aspectRatio>0?aspectRatio:null};

      & > .widget-content {
        position: relative;
        height: 100%;
        width: 100%;
        z-index: 0;
      }
    `}render(){var _a,_b;const{className,widgetStyle,widgetId,rotate}=this.props,_c=jimu_ui.styleUtils.toCSSStyle(widgetStyle),{transform}=_c,otherStyle=__rest(_c,["transform"]),rotateStyle=rotate>0||rotate<0?`rotateZ(${rotate}deg)`:"";let mergedTransform=rotateStyle;return transform&&(mergedTransform=`${transform} ${rotateStyle}`),(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)(`widget-renderer layout-item-content w-100 ${null!==(_b=null===(_a=null==widgetStyle?void 0:widgetStyle.boxShadow)||void 0===_a?void 0:_a.presetStyle)&&void 0!==_b?_b:""}`,className),css:this.getStyle(),style:Object.assign(Object.assign({},otherStyle),{transform:mergedTransform}),onMouseDownCapture:this.onMouseDown,"data-widgetid":widgetId,ref:this.ref},this.renderWidgetContent(),this.props.children)}}const WidgetRenderer=jimu_core.E_S.connect(utils.mapStateToWidgetProps)(_WidgetRenderer);try{WidgetRenderer.displayName="WidgetRenderer",WidgetRenderer.__docgenInfo={description:"",displayName:"WidgetRenderer",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},draggable:{defaultValue:null,description:"",name:"draggable",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},onDoubleClick:{defaultValue:null,description:"",name:"onDoubleClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},autoWidth:{defaultValue:null,description:"",name:"autoWidth",required:!1,type:{name:"boolean"}},layoutId:{defaultValue:null,description:"",name:"layoutId",required:!0,type:{name:"string"}},layoutItemId:{defaultValue:null,description:"",name:"layoutItemId",required:!0,type:{name:"string"}},autoHeight:{defaultValue:null,description:"",name:"autoHeight",required:!1,type:{name:"boolean"}},isInSection:{defaultValue:null,description:"",name:"isInSection",required:!1,type:{name:"boolean"}},showDefaultTools:{defaultValue:null,description:"",name:"showDefaultTools",required:!1,type:{name:"boolean"}},resizable:{defaultValue:null,description:"",name:"resizable",required:!1,type:{name:"boolean"}},selectable:{defaultValue:null,description:"",name:"selectable",required:!1,type:{name:"boolean"}},forbidContextMenu:{defaultValue:null,description:"",name:"forbidContextMenu",required:!1,type:{name:"boolean"}},forbidToolbar:{defaultValue:null,description:"",name:"forbidToolbar",required:!1,type:{name:"boolean"}},trailOrder:{defaultValue:null,description:"",name:"trailOrder",required:!1,type:{name:"number"}},forceAspectRatio:{defaultValue:null,description:"",name:"forceAspectRatio",required:!1,type:{name:"boolean"}},aspectRatio:{defaultValue:null,description:"",name:"aspectRatio",required:!1,type:{name:"number"}},resizeObserver:{defaultValue:null,description:"",name:"resizeObserver",required:!1,type:{name:"ResizeObserver"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/runtime/widget-renderer.tsx#WidgetRenderer"]={docgenInfo:WidgetRenderer.__docgenInfo,name:"WidgetRenderer",path:"../jimu-layouts/lib/runtime/widget-renderer.tsx#WidgetRenderer"})}catch(__react_docgen_typescript_loader_error){}const layoutBuilders={},layoutViewers={};function registerLayoutBuilder(type,component){layoutBuilders[type]=component}function registerLayoutViewer(type,component){layoutViewers[type]=component}function layout_factory_findLayoutBuilder(type){return layoutBuilders[type]}function layout_factory_findLayoutViewer(type){return layoutViewers[type]}class LayoutEntry extends jimu_core.q_G.PureComponent{render(){const{layout}=this.props;if(!layout)return null;const LayoutElement=layout_factory_findLayoutViewer(layout.type||jimu_core.p5K.FlowLayout);return LayoutElement?jimu_core.q_G.createElement(LayoutElement,Object.assign({},this.props)):null}}const layout_entry=jimu_core.E_S.connect(utils.mapStateToLayoutProps)(LayoutEntry);try{layoutentry.displayName="layoutentry",layoutentry.__docgenInfo={description:"",displayName:"layoutentry",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"any"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},visible:{defaultValue:null,description:"",name:"visible",required:!1,type:{name:"boolean"}},layouts:{defaultValue:null,description:"",name:"layouts",required:!0,type:{name:"ImmutableObjectMixin<SizeModeLayoutJson> & { readonly [x: string]: string; }"}},isInSection:{defaultValue:null,description:"",name:"isInSection",required:!1,type:{name:"boolean"}},isInWidget:{defaultValue:null,description:"",name:"isInWidget",required:!1,type:{name:"boolean"}},isRepeat:{defaultValue:null,description:"",name:"isRepeat",required:!1,type:{name:"boolean"}},isPageItem:{defaultValue:null,description:"",name:"isPageItem",required:!1,type:{name:"boolean"}},itemDraggable:{defaultValue:null,description:"",name:"itemDraggable",required:!1,type:{name:"boolean"}},itemResizable:{defaultValue:null,description:"",name:"itemResizable",required:!1,type:{name:"boolean"}},itemSelectable:{defaultValue:null,description:"",name:"itemSelectable",required:!1,type:{name:"boolean"}},droppable:{defaultValue:null,description:"",name:"droppable",required:!1,type:{name:"boolean"}},showDefaultTools:{defaultValue:null,description:"",name:"showDefaultTools",required:!1,type:{name:"boolean"}},isItemAccepted:{defaultValue:null,description:"",name:"isItemAccepted",required:!1,type:{name:"(item: LayoutItemConstructorProps, isReplacePlaceholder: boolean) => boolean"}},onItemClick:{defaultValue:null,description:"",name:"onItemClick",required:!1,type:{name:"(e: any, widgetId: string) => void"}},ignoreMinHeight:{defaultValue:null,description:"",name:"ignoreMinHeight",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/runtime/layout-entry.tsx#layoutentry"]={docgenInfo:layoutentry.__docgenInfo,name:"layoutentry",path:"../jimu-layouts/lib/runtime/layout-entry.tsx#layoutentry"})}catch(__react_docgen_typescript_loader_error){}var section_renderer_base=__webpack_require__("../jimu-layouts/lib/runtime/section-renderer-base.tsx");class section_renderer_SectionRenderer extends jimu_core.q_G.PureComponent{render(){return jimu_core.q_G.createElement(section_renderer_base.S,Object.assign({},this.props,{layoutEntryComponent:layout_entry,viewVisibilityContext:page_context.ne}))}}try{section_renderer_SectionRenderer.displayName="SectionRenderer",section_renderer_SectionRenderer.__docgenInfo={description:"",displayName:"SectionRenderer",props:{layoutId:{defaultValue:null,description:"",name:"layoutId",required:!0,type:{name:"string"}},layoutItemId:{defaultValue:null,description:"",name:"layoutItemId",required:!0,type:{name:"string"}},draggable:{defaultValue:null,description:"",name:"draggable",required:!1,type:{name:"boolean"}},resizable:{defaultValue:null,description:"",name:"resizable",required:!1,type:{name:"boolean"}},selectable:{defaultValue:null,description:"",name:"selectable",required:!1,type:{name:"boolean"}},forbidContextMenu:{defaultValue:null,description:"",name:"forbidContextMenu",required:!1,type:{name:"boolean"}},forbidToolbar:{defaultValue:null,description:"",name:"forbidToolbar",required:!1,type:{name:"boolean"}},showDefaultTools:{defaultValue:null,description:"",name:"showDefaultTools",required:!1,type:{name:"boolean"}},isInSection:{defaultValue:null,description:"",name:"isInSection",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},trailOrder:{defaultValue:null,description:"",name:"trailOrder",required:!1,type:{name:"number"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},onDoubleClick:{defaultValue:null,description:"",name:"onDoubleClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},forceAspectRatio:{defaultValue:null,description:"",name:"forceAspectRatio",required:!1,type:{name:"boolean"}},aspectRatio:{defaultValue:null,description:"",name:"aspectRatio",required:!1,type:{name:"number"}},resizeObserver:{defaultValue:null,description:"",name:"resizeObserver",required:!1,type:{name:"ResizeObserver"}},autoWidth:{defaultValue:null,description:"",name:"autoWidth",required:!1,type:{name:"boolean"}},autoHeight:{defaultValue:null,description:"",name:"autoHeight",required:!1,type:{name:"boolean"}},layoutItem:{defaultValue:null,description:"",name:"layoutItem",required:!0,type:{name:"IMLayoutItemJson"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"boolean"}},autoScroll:{defaultValue:null,description:"",name:"autoScroll",required:!1,type:{name:"boolean"}},animationPreview:{defaultValue:null,description:"",name:"animationPreview",required:!1,type:{name:"boolean"}},hoverPreview:{defaultValue:null,description:"",name:"hoverPreview",required:!1,type:{name:"boolean"}},playMode:{defaultValue:null,description:"",name:"playMode",required:!1,type:{name:"enum",value:[{value:'"AS_ONE"'},{value:'"ONE_BY_ONE"'}]}},previewId:{defaultValue:null,description:"",name:"previewId",required:!1,type:{name:"number"}},watchViewportVisibility:{defaultValue:null,description:"",name:"watchViewportVisibility",required:!1,type:{name:"boolean"}},sectionId:{defaultValue:null,description:"",name:"sectionId",required:!0,type:{name:"string"}},views:{defaultValue:null,description:"",name:"views",required:!0,type:{name:"ImmutableArray<string>"}},activeView:{defaultValue:null,description:"",name:"activeView",required:!1,type:{name:"IMViewJson"}},rotate:{defaultValue:null,description:"",name:"rotate",required:!1,type:{name:"number"}},sectionStyle:{defaultValue:null,description:"",name:"sectionStyle",required:!0,type:{name:"any"}},navInfo:{defaultValue:null,description:"",name:"navInfo",required:!0,type:{name:"IMSectionNavInfo"}},transition:{defaultValue:null,description:"",name:"transition",required:!1,type:{name:"{ type: string; direction?: string; }"}},autoPlay:{defaultValue:null,description:"",name:"autoPlay",required:!1,type:{name:"boolean"}},interval:{defaultValue:null,description:"",name:"interval",required:!1,type:{name:"number"}},loop:{defaultValue:null,description:"",name:"loop",required:!1,type:{name:"boolean"}},focusable:{defaultValue:null,description:"",name:"focusable",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/runtime/section-renderer.tsx#SectionRenderer"]={docgenInfo:section_renderer_SectionRenderer.__docgenInfo,name:"SectionRenderer",path:"../jimu-layouts/lib/runtime/section-renderer.tsx#SectionRenderer"})}catch(__react_docgen_typescript_loader_error){}function useLiveviewPlayId(type,hasParentAnimation){const[liveViewPlayId,setLiveViewPlayId]=jimu_core.q_G.useState(null),isPageVisible=jimu_core.q_G.useContext(page_context.nj),visibleRef=jimu_core.q_G.useRef(!1);jimu_core.q_G.useEffect((()=>{null==type||hasParentAnimation||visibleRef.current===isPageVisible||(visibleRef.current=isPageVisible,setLiveViewPlayId((0,jimu_core.RqM)()))}),[isPageVisible,hasParentAnimation,type]);const resetPlayId=jimu_core.q_G.useCallback((()=>{setLiveViewPlayId(null)}),[]);return[liveViewPlayId,!isPageVisible,resetPlayId]}var use_viewport_intersection=__webpack_require__("../jimu-layouts/lib/use-viewport-intersection.ts"),layout_item_rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};function LayoutItem(props){var _a,_b,_c,_d,_e,_f,_g,_h,_j;const stateProps=jimu_core.E_S.useSelector((state=>function mapStateToProps(state,ownProps){var _a,_b;const layoutItemProps=(0,utils.mapStateToLayoutItemProps)(state,ownProps);if(!layoutItemProps.layoutItem)return layoutItemProps;if(layoutItemProps.layoutItem.type===jimu_core.K6q.Widget){const{layoutId,layoutItemId}=ownProps,widgetJson=state.appConfig.widgets[layoutItemProps.layoutItem.widgetId],supportInlineEditing=null===(_b=null===(_a=null==widgetJson?void 0:widgetJson.manifest)||void 0===_a?void 0:_a.properties)||void 0===_b?void 0:_b.supportInlineEditing,innerLayoutId=function findInnerLayoutId(state,layoutId,layoutItemId){var _a;const layoutItem=state.appConfig.layouts[layoutId].content[layoutItemId];if(layoutItem.type===jimu_core.K6q.Widget){const widgetJson=state.appConfig.widgets[layoutItem.widgetId],sizeModeLayout=null===(_a=null==widgetJson?void 0:widgetJson.layouts)||void 0===_a?void 0:_a.DEFAULT;if(sizeModeLayout)return sizeModeLayout[state.browserSizeMode]}return null}(state,layoutId,layoutItemId),result=Object.assign({widgetId:layoutItemProps.layoutItem.widgetId,supportInlineEditing},layoutItemProps);return innerLayoutId&&(result.innerLayoutId=innerLayoutId),result}const sectionProps=(0,search.getSectionInfo)(state,layoutItemProps.layoutItem.sectionId);return Object.assign(Object.assign({},layoutItemProps),sectionProps)}(state,props)),jimu_core.E_S.shallowEqual),isPrintPreview=jimu_core.E_S.useSelector((state=>{var _a,_b;return null!==(_b=null===(_a=state.appRuntimeInfo)||void 0===_a?void 0:_a.isPrintPreview)&&void 0!==_b&&_b})),allProps=Object.assign(Object.assign({},props),stateProps),refObj=jimu_core.q_G.useRef(),{layoutId,layoutItemId,layoutItem}=allProps,{className,children,id,isLastChild}=allProps,otherProps=layout_item_rest(allProps,["className","children","id","isLastChild"]),isWidget=(null==layoutItem?void 0:layoutItem.type)===jimu_core.K6q.Widget,isSection=(null==layoutItem?void 0:layoutItem.type)===jimu_core.K6q.Section,{effect,oneByOneEffect,hoverEffect}=isPrintPreview?{}:null!==(_b=null===(_a=allProps.layoutItem)||void 0===_a?void 0:_a.setting)&&void 0!==_b?_b:{};let effectType=null===(_c=null==effect?void 0:effect[jimu_core.Zre.ScrollIntoView])||void 0===_c?void 0:_c.type;effectType=effectType&&effectType!==jimu_core.J6N.None?effectType:null;let oneByOneEffectType=null===(_d=null==oneByOneEffect?void 0:oneByOneEffect[jimu_core.Zre.ScrollIntoView])||void 0===_d?void 0:_d.type;oneByOneEffectType=oneByOneEffectType&&oneByOneEffectType!==jimu_core.J6N.None?oneByOneEffectType:null;const[mounted,setMounted]=jimu_core.q_G.useState(!1),[animationContext,setAnimationContext]=jimu_core.q_G.useState({setting:null==oneByOneEffect?void 0:oneByOneEffect[jimu_core.Zre.ScrollIntoView],playId:null,oid:stateProps.innerLayoutId,revert:null}),isInViewport=(0,use_viewport_intersection.l)(refObj.current,allProps.watchViewportVisibility);jimu_core.q_G.useEffect((()=>{setMounted(!0)}),[]);const{setting:parentAnimationSetting}=jimu_core.q_G.useContext(jimu_core.e8P),[asOnePlayId,asOneRevert,onAsOneAnimationEnd]=useLiveviewPlayId(effectType,null!=(null==parentAnimationSetting?void 0:parentAnimationSetting.type)&&parentAnimationSetting.type!==jimu_core.J6N.None),[oneByOnePlayId,oneByOneRevert,onOnebyOneAnimationEnd]=useLiveviewPlayId(oneByOneEffectType,null!=(null==parentAnimationSetting?void 0:parentAnimationSetting.type)&&parentAnimationSetting.type!==jimu_core.J6N.None);jimu_core.q_G.useEffect((()=>{null==asOnePlayId&&oneByOnePlayId&&setAnimationContext({setting:null==oneByOneEffect?void 0:oneByOneEffect[jimu_core.Zre.ScrollIntoView],playId:oneByOnePlayId,oid:stateProps.innerLayoutId,revert:oneByOneRevert,onContextAnimationEnd:oneByOneRevert?null:()=>{onOnebyOneAnimationEnd(),setAnimationContext({setting:null==oneByOneEffect?void 0:oneByOneEffect[jimu_core.Zre.ScrollIntoView],oid:stateProps.innerLayoutId,playId:-1})}})}),[asOnePlayId,oneByOnePlayId,onOnebyOneAnimationEnd,oneByOneEffect,oneByOneRevert,stateProps.innerLayoutId]);const handleSingleAnimationStart=jimu_core.q_G.useCallback((()=>{var _a;const setting=null==oneByOneEffect?void 0:oneByOneEffect[jimu_core.Zre.ScrollIntoView],revert=(null===(_a=null==setting?void 0:setting.option)||void 0===_a?void 0:_a.start)===jimu_core.mM5.AfterPrevious;setAnimationContext({setting,playId:(0,jimu_core.RqM)(),oid:stateProps.innerLayoutId,revert,onContextAnimationEnd:revert?null:()=>{setAnimationContext({setting,oid:stateProps.innerLayoutId,playId:-1})}})}),[oneByOneEffect,stateProps.innerLayoutId]),handleSingleAnimationEnd=jimu_core.q_G.useCallback((()=>{var _a;const setting=null==oneByOneEffect?void 0:oneByOneEffect[jimu_core.Zre.ScrollIntoView];(null===(_a=null==setting?void 0:setting.option)||void 0===_a?void 0:_a.start)===jimu_core.mM5.AfterPrevious&&setAnimationContext({setting,playId:(0,jimu_core.RqM)(),oid:stateProps.innerLayoutId,revert:!1,onContextAnimationEnd:()=>{setAnimationContext({setting,oid:stateProps.innerLayoutId,playId:-1})}}),asOnePlayId>0&&(null==onAsOneAnimationEnd||onAsOneAnimationEnd())}),[asOnePlayId,onAsOneAnimationEnd,oneByOneEffect,stateProps.innerLayoutId]);if(!allProps.layoutItem||isSection&&!layoutItem.sectionId)return null;const effectOption=null===(_e=null==effect?void 0:effect[jimu_core.Zre.ScrollIntoView])||void 0===_e?void 0:_e.option,rotate=null!==(_j=null===(_h=null===(_g=null===(_f=layoutItem.setting)||void 0===_f?void 0:_f.style)||void 0===_g?void 0:_g.transform)||void 0===_h?void 0:_h.rotate)&&void 0!==_j?_j:0;return(0,jimu_core.Yac)(page_context.EQ.Provider,{value:isInViewport},(0,jimu_core.Yac)(jimu_core.C6S,{id,parentId:layoutId,type:effectType,configType:null==effectOption?void 0:effectOption.configType,direction:null==effectOption?void 0:effectOption.direction,revert:asOneRevert,delay:props.delay,isLastChild,playId:asOnePlayId,onAnimationStart:handleSingleAnimationStart,onAnimationEnd:handleSingleAnimationEnd,ref:refObj,css:jimu_core.AHW`
          ${(0,jimu_core.AD2)(null==hoverEffect?void 0:hoverEffect.type,null==hoverEffect?void 0:hoverEffect.setting)};
          position: relative;
          overflow: visible;
          min-width: ${types.o7}px;
          min-height: ${types.o7}px;
        `,style:props.style,className:(0,jimu_core.xWm)("d-flex layout-item",className,{"is-widget":isWidget,"is-section":isSection}),"data-layoutitemid":layoutItemId,"data-layoutid":layoutId},(0,jimu_core.Yac)(jimu_core.e8P.Provider,{value:animationContext},isWidget&&(0,jimu_core.Yac)(WidgetRenderer,Object.assign({rotate},otherProps)),isSection&&(0,jimu_core.Yac)(section_renderer_SectionRenderer,Object.assign({rotate},otherProps))),props.children))}try{layoutitem.displayName="layoutitem",layoutitem.__docgenInfo={description:"",displayName:"layoutitem",props:{layoutId:{defaultValue:null,description:"",name:"layoutId",required:!0,type:{name:"string"}},layoutItemId:{defaultValue:null,description:"",name:"layoutItemId",required:!0,type:{name:"string"}},draggable:{defaultValue:null,description:"",name:"draggable",required:!1,type:{name:"boolean"}},resizable:{defaultValue:null,description:"",name:"resizable",required:!1,type:{name:"boolean"}},selectable:{defaultValue:null,description:"",name:"selectable",required:!1,type:{name:"boolean"}},forbidContextMenu:{defaultValue:null,description:"",name:"forbidContextMenu",required:!1,type:{name:"boolean"}},forbidToolbar:{defaultValue:null,description:"",name:"forbidToolbar",required:!1,type:{name:"boolean"}},showDefaultTools:{defaultValue:null,description:"",name:"showDefaultTools",required:!1,type:{name:"boolean"}},isInSection:{defaultValue:null,description:"",name:"isInSection",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},trailOrder:{defaultValue:null,description:"",name:"trailOrder",required:!1,type:{name:"number"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},onDoubleClick:{defaultValue:null,description:"",name:"onDoubleClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},forceAspectRatio:{defaultValue:null,description:"",name:"forceAspectRatio",required:!1,type:{name:"boolean"}},aspectRatio:{defaultValue:null,description:"",name:"aspectRatio",required:!1,type:{name:"number"}},resizeObserver:{defaultValue:null,description:"",name:"resizeObserver",required:!1,type:{name:"ResizeObserver"}},autoWidth:{defaultValue:null,description:"",name:"autoWidth",required:!1,type:{name:"boolean"}},autoHeight:{defaultValue:null,description:"",name:"autoHeight",required:!1,type:{name:"boolean"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},delay:{defaultValue:null,description:"",name:"delay",required:!1,type:{name:"number"}},isLastChild:{defaultValue:null,description:"",name:"isLastChild",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/runtime/layout-item.tsx#layoutitem"]={docgenInfo:layoutitem.__docgenInfo,name:"layoutitem",path:"../jimu-layouts/lib/runtime/layout-item.tsx#layoutitem"})}catch(__react_docgen_typescript_loader_error){}var fixed_layout_util=__webpack_require__("../jimu-layouts/lib/fixed-layout/fixed-layout-util.ts"),util=__webpack_require__("../jimu-layouts/lib/fixed-layout/common/util.ts");class FixedLayoutItem extends jimu_core.q_G.PureComponent{getPositionStyle(itemSetting){const{layoutItem,transformedBBox}=this.props,bbox=null!=transformedBBox?transformedBBox:layoutItem.bbox,pos=(0,fixed_layout_util.wK)(bbox,itemSetting),mergedStyle=Object.assign(Object.assign({},pos),(0,fixed_layout_util.WQ)(layoutItem.bbox,itemSetting));return util.Z(mergedStyle)}render(){const{layoutItem,layoutId}=this.props;if(null==layoutItem||layoutItem.isPending)return null;const itemSetting=jimu_core.CM0.assign({},default_setting.E,layoutItem.setting),ratio=(0,utils.parseAspectRatio)(itemSetting.aspectRatio),useAspectRatio=(0,utils.shouldUseAspectRatio)(itemSetting),oneByOneAnimationProps=(0,utils.handleOnebyOneAnimation)(this.props),[cssStyle,transform]=this.getPositionStyle(itemSetting),widthMode=(0,utils.getLayoutItemSizeMode)("width",layoutItem.bbox,itemSetting.autoProps),heightMode=(0,utils.getLayoutItemSizeMode)("height",layoutItem.bbox,itemSetting.autoProps);return(0,jimu_core.Yac)(LayoutItem,Object.assign({css:cssStyle,style:{transform},layoutId,layoutItemId:layoutItem.id,forceAspectRatio:useAspectRatio,aspectRatio:ratio,isInSection:this.props.isInSection,autoWidth:widthMode===types.Dy.Auto,autoHeight:heightMode===types.Dy.Auto},oneByOneAnimationProps))}}try{layoutitem.displayName="layoutitem",layoutitem.__docgenInfo={description:"",displayName:"layoutitem",props:{layoutId:{defaultValue:null,description:"",name:"layoutId",required:!0,type:{name:"string"}},layoutItemId:{defaultValue:null,description:"",name:"layoutItemId",required:!0,type:{name:"string"}},draggable:{defaultValue:null,description:"",name:"draggable",required:!1,type:{name:"boolean"}},resizable:{defaultValue:null,description:"",name:"resizable",required:!1,type:{name:"boolean"}},selectable:{defaultValue:null,description:"",name:"selectable",required:!1,type:{name:"boolean"}},forbidContextMenu:{defaultValue:null,description:"",name:"forbidContextMenu",required:!1,type:{name:"boolean"}},forbidToolbar:{defaultValue:null,description:"",name:"forbidToolbar",required:!1,type:{name:"boolean"}},showDefaultTools:{defaultValue:null,description:"",name:"showDefaultTools",required:!1,type:{name:"boolean"}},isInSection:{defaultValue:null,description:"",name:"isInSection",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},trailOrder:{defaultValue:null,description:"",name:"trailOrder",required:!1,type:{name:"number"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},onDoubleClick:{defaultValue:null,description:"",name:"onDoubleClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},forceAspectRatio:{defaultValue:null,description:"",name:"forceAspectRatio",required:!1,type:{name:"boolean"}},aspectRatio:{defaultValue:null,description:"",name:"aspectRatio",required:!1,type:{name:"number"}},resizeObserver:{defaultValue:null,description:"",name:"resizeObserver",required:!1,type:{name:"ResizeObserver"}},autoWidth:{defaultValue:null,description:"",name:"autoWidth",required:!1,type:{name:"boolean"}},autoHeight:{defaultValue:null,description:"",name:"autoHeight",required:!1,type:{name:"boolean"}},transformedBBox:{defaultValue:null,description:"",name:"transformedBBox",required:!1,type:{name:"IMBoundingBox"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},layoutItem:{defaultValue:null,description:"",name:"layoutItem",required:!0,type:{name:"IMLayoutItemJson"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/fixed-layout/runtime/layout-item.tsx#layoutitem"]={docgenInfo:layoutitem.__docgenInfo,name:"layoutitem",path:"../jimu-layouts/lib/fixed-layout/runtime/layout-item.tsx#layoutitem"})}catch(__react_docgen_typescript_loader_error){}class FixedLayoutViewer extends jimu_core.q_G.PureComponent{createItem(layout,itemId,index,transformed){const layoutItem=layout.content[itemId];return(0,jimu_core.Yac)(FixedLayoutItem,{key:`${layout.id}_${itemId}`,index,layoutId:layout.id,layoutItemId:itemId,layoutItem,transformedBBox:transformed?layout.content[itemId].bbox:null,isInSection:this.props.isInSection})}render(){const{layout,layouts,className,style,browserSizeMode}=this.props;if(!layout)return null;let targetLayout=layout,transformed=!1;if(layouts[browserSizeMode]!==layout.id&&this.layoutTransform){let fromSizeMode;Object.keys(layouts).some((mode=>layouts[mode]===layout.id&&(fromSizeMode=mode,!0))),targetLayout=this.layoutTransform(layout,fromSizeMode,browserSizeMode),transformed=!0}const layoutSetting=jimu_core.CM0.assign({},default_setting.i,targetLayout.setting),layoutIds=targetLayout.order||[],mergedClasses=(0,jimu_core.xWm)("layout fixed-layout d-flex",className);return(0,jimu_core.Yac)("div",{className:mergedClasses,style:Object.assign(Object.assign(Object.assign({position:"relative",height:"auto"},style),jimu_ui.styleUtils.toCSSStyle(layoutSetting.style)),{width:"100%",overflow:"hidden"}),"data-layoutid":targetLayout.id},layoutIds.length>0&&(0,jimu_core.Yac)(jimu_core.zKZ.Provider,{value:{monitor:!1}},(0,jimu_core.Yac)(jimu_core._kc,{css:jimu_core.AHW`
                position: absolute;
                left: 0;
                right: 0;
                top: 0;
                bottom: 0;
              `,oid:layout.id,"data-layoutid":layout.id},layoutIds.map(((itemId,index)=>this.createItem(targetLayout,itemId,index,transformed))))))}}const runtime_layout=jimu_core.E_S.connect(utils.mapStateToLayoutProps)(FixedLayoutViewer);try{layout.displayName="layout",layout.__docgenInfo={description:"",displayName:"layout",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"any"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},visible:{defaultValue:null,description:"",name:"visible",required:!1,type:{name:"boolean"}},layouts:{defaultValue:null,description:"",name:"layouts",required:!0,type:{name:"ImmutableObjectMixin<SizeModeLayoutJson> & { readonly [x: string]: string; }"}},isInSection:{defaultValue:null,description:"",name:"isInSection",required:!1,type:{name:"boolean"}},isInWidget:{defaultValue:null,description:"",name:"isInWidget",required:!1,type:{name:"boolean"}},isRepeat:{defaultValue:null,description:"",name:"isRepeat",required:!1,type:{name:"boolean"}},isPageItem:{defaultValue:null,description:"",name:"isPageItem",required:!1,type:{name:"boolean"}},itemDraggable:{defaultValue:null,description:"",name:"itemDraggable",required:!1,type:{name:"boolean"}},itemResizable:{defaultValue:null,description:"",name:"itemResizable",required:!1,type:{name:"boolean"}},itemSelectable:{defaultValue:null,description:"",name:"itemSelectable",required:!1,type:{name:"boolean"}},droppable:{defaultValue:null,description:"",name:"droppable",required:!1,type:{name:"boolean"}},showDefaultTools:{defaultValue:null,description:"",name:"showDefaultTools",required:!1,type:{name:"boolean"}},isItemAccepted:{defaultValue:null,description:"",name:"isItemAccepted",required:!1,type:{name:"(item: LayoutItemConstructorProps, isReplacePlaceholder: boolean) => boolean"}},onItemClick:{defaultValue:null,description:"",name:"onItemClick",required:!1,type:{name:"(e: any, widgetId: string) => void"}},ignoreMinHeight:{defaultValue:null,description:"",name:"ignoreMinHeight",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/fixed-layout/runtime/layout.tsx#layout"]={docgenInfo:layout.__docgenInfo,name:"layout",path:"../jimu-layouts/lib/fixed-layout/runtime/layout.tsx#layout"})}catch(__react_docgen_typescript_loader_error){}var common_util=__webpack_require__("../jimu-layouts/lib/column-layout/common/util.ts");class ColumnItem extends jimu_core.q_G.PureComponent{isStretchInCrossAxis(){const{layoutItem}=this.props;return common_util.IW(layoutItem)}calHeight(itemSetting,bbox){return common_util.WW(itemSetting,bbox)}getStyle(layoutSetting,isStretch){const{layoutItem}=this.props,bbox=layoutItem.bbox||{},style=this.calHeight(layoutSetting,bbox);return style.width=isStretch?"auto":bbox.width,this.autoHeight="auto"===style.height,common_util.jX(style,layoutSetting,isStretch)}render(){var _a,_b;const{layoutId,layoutItem,onClick}=this.props;if(!layoutItem||layoutItem.isPending)return null;const layoutSetting=layoutItem.setting||{},heightMode=null!==(_b=null===(_a=layoutSetting.autoProps)||void 0===_a?void 0:_a.height)&&void 0!==_b?_b:types.Dy.Custom,mergedClass=(0,jimu_core.xWm)("flexbox-layout-item",{"d-flex":heightMode!==types.Dy.Auto}),isStretch=this.isStretchInCrossAxis(),keepAspectRatio=(0,utils.shouldUseAspectRatio)(layoutSetting),ratio=(0,utils.parseAspectRatio)(layoutSetting.aspectRatio),oneByOneAnimationProps=(0,utils.handleOnebyOneAnimation)(this.props);return(0,jimu_core.Yac)(LayoutItem,Object.assign({css:this.getStyle(layoutSetting,isStretch),layoutId,layoutItemId:layoutItem.id,onClick,className:mergedClass,forceAspectRatio:keepAspectRatio,aspectRatio:ratio,autoHeight:this.autoHeight},oneByOneAnimationProps))}}try{ColumnItem.displayName="ColumnItem",ColumnItem.__docgenInfo={description:"",displayName:"ColumnItem",props:{layoutId:{defaultValue:null,description:"",name:"layoutId",required:!0,type:{name:"string"}},layoutItemId:{defaultValue:null,description:"",name:"layoutItemId",required:!0,type:{name:"string"}},draggable:{defaultValue:null,description:"",name:"draggable",required:!1,type:{name:"boolean"}},resizable:{defaultValue:null,description:"",name:"resizable",required:!1,type:{name:"boolean"}},selectable:{defaultValue:null,description:"",name:"selectable",required:!1,type:{name:"boolean"}},forbidContextMenu:{defaultValue:null,description:"",name:"forbidContextMenu",required:!1,type:{name:"boolean"}},forbidToolbar:{defaultValue:null,description:"",name:"forbidToolbar",required:!1,type:{name:"boolean"}},showDefaultTools:{defaultValue:null,description:"",name:"showDefaultTools",required:!1,type:{name:"boolean"}},isInSection:{defaultValue:null,description:"",name:"isInSection",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},trailOrder:{defaultValue:null,description:"",name:"trailOrder",required:!1,type:{name:"number"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},onDoubleClick:{defaultValue:null,description:"",name:"onDoubleClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},forceAspectRatio:{defaultValue:null,description:"",name:"forceAspectRatio",required:!1,type:{name:"boolean"}},aspectRatio:{defaultValue:null,description:"",name:"aspectRatio",required:!1,type:{name:"number"}},resizeObserver:{defaultValue:null,description:"",name:"resizeObserver",required:!1,type:{name:"ResizeObserver"}},autoWidth:{defaultValue:null,description:"",name:"autoWidth",required:!1,type:{name:"boolean"}},autoHeight:{defaultValue:null,description:"",name:"autoHeight",required:!1,type:{name:"boolean"}},layoutItem:{defaultValue:null,description:"",name:"layoutItem",required:!0,type:{name:"IMLayoutItemJson"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},space:{defaultValue:null,description:"",name:"space",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/column-layout/runtime/layout-item.tsx#ColumnItem"]={docgenInfo:ColumnItem.__docgenInfo,name:"ColumnItem",path:"../jimu-layouts/lib/column-layout/runtime/layout-item.tsx#ColumnItem"})}catch(__react_docgen_typescript_loader_error){}var column_layout_default_setting=__webpack_require__("../jimu-layouts/lib/column-layout/default-setting.ts"),style=__webpack_require__("../jimu-layouts/lib/column-layout/common/style.ts");class Layout extends jimu_core.q_G.PureComponent{createItem(itemId,index,layoutSetting){const{layout}=this.props;return(0,jimu_core.Yac)(ColumnItem,{key:itemId,index,space:layoutSetting.space,layoutId:layout.id,layoutItemId:itemId,layoutItem:layout.content[itemId]})}render(){const{layout,className}=this.props,content=layout.order||(0,jimu_core.J3Z)([]),layoutSetting=Object.assign({},column_layout_default_setting.R,layout.setting),outClass=(0,jimu_core.xWm)("layout column-layout d-flex w-100",className);return(0,jimu_core.Yac)("div",{className:outClass,style:{position:"relative",overflow:"hidden"},"data-layoutid":layout.id},(0,jimu_core.Yac)(jimu_core.zKZ.Provider,{value:{monitor:!0,layoutId:layout.id}},(0,jimu_core.Yac)(jimu_core._kc,{oid:layout.id,className:"trail-container d-flex flex-column w-100",css:jimu_core.AHW`
              ${(0,style.A)(layoutSetting)};
              padding: ${jimu_ui.styleUtils.toCSSPadding(layoutSetting.padding)};
            `},content.asMutable().map(((layoutItem,index)=>this.createItem(layoutItem,index,layoutSetting))))))}}const column_layout_runtime_layout=jimu_core.E_S.connect(utils.mapStateToLayoutProps)(Layout);try{layout.displayName="layout",layout.__docgenInfo={description:"",displayName:"layout",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"any"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},visible:{defaultValue:null,description:"",name:"visible",required:!1,type:{name:"boolean"}},layouts:{defaultValue:null,description:"",name:"layouts",required:!0,type:{name:"ImmutableObjectMixin<SizeModeLayoutJson> & { readonly [x: string]: string; }"}},isInSection:{defaultValue:null,description:"",name:"isInSection",required:!1,type:{name:"boolean"}},isInWidget:{defaultValue:null,description:"",name:"isInWidget",required:!1,type:{name:"boolean"}},isRepeat:{defaultValue:null,description:"",name:"isRepeat",required:!1,type:{name:"boolean"}},isPageItem:{defaultValue:null,description:"",name:"isPageItem",required:!1,type:{name:"boolean"}},itemDraggable:{defaultValue:null,description:"",name:"itemDraggable",required:!1,type:{name:"boolean"}},itemResizable:{defaultValue:null,description:"",name:"itemResizable",required:!1,type:{name:"boolean"}},itemSelectable:{defaultValue:null,description:"",name:"itemSelectable",required:!1,type:{name:"boolean"}},droppable:{defaultValue:null,description:"",name:"droppable",required:!1,type:{name:"boolean"}},showDefaultTools:{defaultValue:null,description:"",name:"showDefaultTools",required:!1,type:{name:"boolean"}},isItemAccepted:{defaultValue:null,description:"",name:"isItemAccepted",required:!1,type:{name:"(item: LayoutItemConstructorProps, isReplacePlaceholder: boolean) => boolean"}},onItemClick:{defaultValue:null,description:"",name:"onItemClick",required:!1,type:{name:"(e: any, widgetId: string) => void"}},ignoreMinHeight:{defaultValue:null,description:"",name:"ignoreMinHeight",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/column-layout/runtime/layout.tsx#layout"]={docgenInfo:layout.__docgenInfo,name:"layout",path:"../jimu-layouts/lib/column-layout/runtime/layout.tsx#layout"})}catch(__react_docgen_typescript_loader_error){}var row_layout_utils=__webpack_require__("../jimu-layouts/lib/row-layout/utils.ts"),row_layout_default_setting=__webpack_require__("../jimu-layouts/lib/row-layout/default-setting.ts"),row_layout_common_util=__webpack_require__("../jimu-layouts/lib/row-layout/common/util.ts");class RowItem extends jimu_core.q_G.PureComponent{getStyle(itemSetting){const{gutter,layoutItem,isMultiRow}=this.props,bbox=layoutItem.bbox,sign=utils.isRTL()?-1:1,mergedStyle=(0,row_layout_utils.lD)(itemSetting,bbox,isMultiRow);return row_layout_common_util.j(isMultiRow,sign,gutter,mergedStyle,itemSetting)}render(){var _a;const{span,offset,layoutId,layoutItem}=this.props;if(null==layoutItem||layoutItem.isPending)return null;const itemSetting=jimu_core.CM0.assign({},row_layout_default_setting.i,layoutItem.setting),mergedClass=(0,jimu_core.xWm)("row-layout-item",`col-${span}`,`offset-${offset}`),heightMode=null===(_a=itemSetting.autoProps)||void 0===_a?void 0:_a.height,ratio=utils.parseAspectRatio(itemSetting.aspectRatio),oneByOneAnimationProps=utils.handleOnebyOneAnimation(this.props),[cssStyle,transform]=this.getStyle(itemSetting);return(0,jimu_core.Yac)(LayoutItem,Object.assign({css:cssStyle,style:{transform},className:mergedClass,layoutId,layoutItemId:layoutItem.id,forceAspectRatio:utils.shouldUseAspectRatio(itemSetting),aspectRatio:ratio,onClick:this.props.onClick,autoHeight:heightMode===types.Dy.Auto},oneByOneAnimationProps))}}try{layoutitem.displayName="layoutitem",layoutitem.__docgenInfo={description:"",displayName:"layoutitem",props:{layoutId:{defaultValue:null,description:"",name:"layoutId",required:!0,type:{name:"string"}},layoutItemId:{defaultValue:null,description:"",name:"layoutItemId",required:!0,type:{name:"string"}},draggable:{defaultValue:null,description:"",name:"draggable",required:!1,type:{name:"boolean"}},resizable:{defaultValue:null,description:"",name:"resizable",required:!1,type:{name:"boolean"}},selectable:{defaultValue:null,description:"",name:"selectable",required:!1,type:{name:"boolean"}},forbidContextMenu:{defaultValue:null,description:"",name:"forbidContextMenu",required:!1,type:{name:"boolean"}},forbidToolbar:{defaultValue:null,description:"",name:"forbidToolbar",required:!1,type:{name:"boolean"}},showDefaultTools:{defaultValue:null,description:"",name:"showDefaultTools",required:!1,type:{name:"boolean"}},isInSection:{defaultValue:null,description:"",name:"isInSection",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},trailOrder:{defaultValue:null,description:"",name:"trailOrder",required:!1,type:{name:"number"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},onDoubleClick:{defaultValue:null,description:"",name:"onDoubleClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},forceAspectRatio:{defaultValue:null,description:"",name:"forceAspectRatio",required:!1,type:{name:"boolean"}},aspectRatio:{defaultValue:null,description:"",name:"aspectRatio",required:!1,type:{name:"number"}},resizeObserver:{defaultValue:null,description:"",name:"resizeObserver",required:!1,type:{name:"ResizeObserver"}},autoWidth:{defaultValue:null,description:"",name:"autoWidth",required:!1,type:{name:"boolean"}},autoHeight:{defaultValue:null,description:"",name:"autoHeight",required:!1,type:{name:"boolean"}},layoutItem:{defaultValue:null,description:"",name:"layoutItem",required:!0,type:{name:"IMLayoutItemJson"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"boolean"}},autoScroll:{defaultValue:null,description:"",name:"autoScroll",required:!1,type:{name:"boolean"}},animationPreview:{defaultValue:null,description:"",name:"animationPreview",required:!1,type:{name:"boolean"}},hoverPreview:{defaultValue:null,description:"",name:"hoverPreview",required:!1,type:{name:"boolean"}},playMode:{defaultValue:null,description:"",name:"playMode",required:!1,type:{name:"enum",value:[{value:'"AS_ONE"'},{value:'"ONE_BY_ONE"'}]}},previewId:{defaultValue:null,description:"",name:"previewId",required:!1,type:{name:"number"}},watchViewportVisibility:{defaultValue:null,description:"",name:"watchViewportVisibility",required:!1,type:{name:"boolean"}},offset:{defaultValue:null,description:"",name:"offset",required:!0,type:{name:"number"}},span:{defaultValue:null,description:"",name:"span",required:!0,type:{name:"number"}},gutter:{defaultValue:null,description:"",name:"gutter",required:!0,type:{name:"number"}},isMultiRow:{defaultValue:null,description:"",name:"isMultiRow",required:!0,type:{name:"boolean"}},alignItems:{defaultValue:null,description:"",name:"alignItems",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/row-layout/runtime/layout-item.tsx#layoutitem"]={docgenInfo:layoutitem.__docgenInfo,name:"layoutitem",path:"../jimu-layouts/lib/row-layout/runtime/layout-item.tsx#layoutitem"})}catch(__react_docgen_typescript_loader_error){}class Row extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.flipLeftRight=utils.isRTL()}collectBounds(){var _a;const{transformedLayout}=this.props,content=null!==(_a=transformedLayout.order)&&void 0!==_a?_a:[];return this.childRects=[],content.forEach((itemId=>{var _a,_b;if(transformedLayout.content[itemId].isPending)return;const bbox=null===(_b=null===(_a=transformedLayout.content)||void 0===_a?void 0:_a[itemId])||void 0===_b?void 0:_b.bbox;null!=bbox&&this.childRects.push({layoutId:transformedLayout.id,id:itemId,left:parseInt(bbox.left,10),width:parseInt(bbox.width,10),height:parseInt(bbox.height,10)})})),this.childRects.sort(((a,b)=>a.left-b.left))}getConfig(){var _a;const{layout}=this.props;return null!==(_a=layout.setting)&&void 0!==_a?_a:row_layout_default_setting.r}createItem(childRects,index,layoutStyle){var _a;const{transformedLayout,isMultiRow}=this.props,config=this.getConfig(),childRect=childRects[index],gutter=null!==(_a=config.space)&&void 0!==_a?_a:0;let offset;if(0===index)offset=childRect.left;else{const previousBBox=childRects[index-1];offset=childRect.left-previousBBox.left-previousBBox.width}return(0,jimu_core.Yac)(RowItem,{key:`${childRect.layoutId}_${childRect.id}`,offset,gutter,span:childRect.width,isMultiRow,layoutId:transformedLayout.id,layoutItemId:childRect.id,layoutItem:transformedLayout.content[childRect.id],alignItems:layoutStyle.alignItems})}render(){var _a,_b;const{layout,className}=this.props;this.collectBounds();const content=this.childRects,config=this.getConfig(),layoutStyle=null!==(_a=config.style)&&void 0!==_a?_a:{},gutter=null!==(_b=config.space)&&void 0!==_b?_b:0;return(0,jimu_core.Yac)(page_context.NQ.Consumer,null,(props=>(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)("row-layout",className,{"row-rtl":this.flipLeftRight}),css:row_layout_utils.z$,"data-layoutid":layout.id},(0,jimu_core.Yac)("div",{css:jimu_core.AHW`
                  width: 100%;
                  max-width: ${props.maxWidth>0?`${props.maxWidth}px`:"none"};
                `},(0,jimu_core.Yac)("div",{css:jimu_core.AHW`
                    position: relative;
                    height: 100%;
                    margin-left: ${-gutter/2}px;
                    margin-right: ${-gutter/2}px;
                    display: flex;
                    flex-direction: column;
                  `},content.length>0&&(0,jimu_core.Yac)(jimu_core.zKZ.Provider,{value:{monitor:!1}},(0,jimu_core.Yac)(jimu_core._kc,{oid:layout.id,className:(0,jimu_core.xWm)("row h-100 m-0",{"flex-nowrap":!this.props.isMultiRow}),css:jimu_core.AHW`
                          position: relative;
                          height: 100%;
                          overflow: ${this.props.isMultiRow?"auto":"unset"};
                        `},content.map(((_,index)=>this.createItem(content,index,layoutStyle))))))))))}}try{Row.displayName="Row",Row.__docgenInfo={description:"",displayName:"Row",props:{layouts:{defaultValue:null,description:"",name:"layouts",required:!0,type:{name:"IMSizeModeLayoutJson"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"any"}},isInSection:{defaultValue:null,description:"",name:"isInSection",required:!1,type:{name:"boolean"}},isInWidget:{defaultValue:null,description:"",name:"isInWidget",required:!1,type:{name:"boolean"}},isRepeat:{defaultValue:null,description:"",name:"isRepeat",required:!1,type:{name:"boolean"}},isPageItem:{defaultValue:null,description:"",name:"isPageItem",required:!1,type:{name:"boolean"}},visible:{defaultValue:null,description:"",name:"visible",required:!1,type:{name:"boolean"}},itemDraggable:{defaultValue:null,description:"",name:"itemDraggable",required:!1,type:{name:"boolean"}},itemResizable:{defaultValue:null,description:"",name:"itemResizable",required:!1,type:{name:"boolean"}},itemSelectable:{defaultValue:null,description:"",name:"itemSelectable",required:!1,type:{name:"boolean"}},droppable:{defaultValue:null,description:"",name:"droppable",required:!1,type:{name:"boolean"}},showDefaultTools:{defaultValue:null,description:"",name:"showDefaultTools",required:!1,type:{name:"boolean"}},isItemAccepted:{defaultValue:null,description:"",name:"isItemAccepted",required:!1,type:{name:"(item: LayoutItemConstructorProps, isReplacePlaceholder: boolean) => boolean"}},onItemClick:{defaultValue:null,description:"",name:"onItemClick",required:!1,type:{name:"(e: any, widgetId: string) => void"}},ignoreMinHeight:{defaultValue:null,description:"",name:"ignoreMinHeight",required:!1,type:{name:"boolean"}},layout:{defaultValue:null,description:"",name:"layout",required:!0,type:{name:"IMLayoutJson"}},transformedLayout:{defaultValue:null,description:"",name:"transformedLayout",required:!0,type:{name:"IMLayoutJson"}},isMultiRow:{defaultValue:null,description:"",name:"isMultiRow",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/row-layout/runtime/row.tsx#Row"]={docgenInfo:Row.__docgenInfo,name:"Row",path:"../jimu-layouts/lib/row-layout/runtime/row.tsx#Row"})}catch(__react_docgen_typescript_loader_error){}var row_layout_types=__webpack_require__("../jimu-layouts/lib/row-layout/types.ts");class RowLayout extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.layoutConRef=jimu_core.q_G.createRef(),this.onResize=({width,height})=>{var _a;if(this.props.browserSizeMode!==this.props.mainSizeMode)return;if(0===width&&0===height)return;const{widgetId}=this.props;null!=(null===(_a=window.runtimeInfo.widgets)||void 0===_a?void 0:_a[widgetId])?window.runtimeInfo.widgets[widgetId].height=height:window.runtimeInfo.widgets[widgetId]={height}},this.handleDebounceResize=jimu_core.CM0.debounce(this.onResize,200)}findExtension(){const exts=jimu_core.nH3.getInstance().getExtensions(`${jimu_core.vZE.R6.LayoutTransformer}`);if((null==exts?void 0:exts.length)>0){const ext=exts.find((item=>item.layoutType===jimu_core.p5K.RowLayout));this.layoutTransform=null==ext?void 0:ext.transformLayout}}collectRowItems(){var _a;const content=null!==(_a=this.finalLayout.order)&&void 0!==_a?_a:[],rows=[];let row=[],rowIndex=0;return rows.push(row),content.forEach((itemId=>{if(this.finalLayout.content[itemId].isPending)return;const bbox=this.finalLayout.content[itemId].bbox,left=parseInt(bbox.left,10),rowNum=Math.floor(left/row_layout_types.$);rowNum>rowIndex&&(row=[],rowIndex=rowNum,rows.push(row)),row.push(itemId)})),rows}transform(){const{layout,layouts,browserSizeMode,mainSizeMode}=this.props;null==this.layoutTransform&&this.findExtension();let targetLayout=layout;layouts[browserSizeMode]!==layout.id&&null!=this.layoutTransform&&(targetLayout=this.layoutTransform(layout,mainSizeMode,browserSizeMode,utils.getAppConfig())),this.finalLayout=targetLayout,this.numOfRows=this.collectRowItems().length}createRow(){const{layout,layouts}=this.props;return(0,jimu_core.Yac)(Row,{layouts,layout,transformedLayout:this.finalLayout,isMultiRow:this.finalLayout!==layout||this.numOfRows>1})}render(){var _a,_b;const{layout,className}=this.props,style=null!==(_b=(null!==(_a=layout.setting)&&void 0!==_a?_a:row_layout_default_setting.r).style)&&void 0!==_b?_b:row_layout_default_setting.r.style;return this.transform(),(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)("layout d-flex",className),css:jimu_core.AHW`
          width: 100%;
          padding: ${jimu_ui.styleUtils.toCSSPadding(style.padding)};
        `,"data-layoutid":layout.id,ref:this.layoutConRef},this.createRow(),(0,jimu_core.Yac)(jimu_core.cQZ,{handleHeight:!0,onResize:this.handleDebounceResize,targetRef:this.layoutConRef}))}}const row_layout_runtime_layout=jimu_core.E_S.connect(utils.mapStateToLayoutProps)(RowLayout);try{layout.displayName="layout",layout.__docgenInfo={description:"",displayName:"layout",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"any"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},widgetId:{defaultValue:null,description:"",name:"widgetId",required:!0,type:{name:"string"}},visible:{defaultValue:null,description:"",name:"visible",required:!1,type:{name:"boolean"}},layouts:{defaultValue:null,description:"",name:"layouts",required:!0,type:{name:"ImmutableObjectMixin<SizeModeLayoutJson> & { readonly [x: string]: string; }"}},isInSection:{defaultValue:null,description:"",name:"isInSection",required:!1,type:{name:"boolean"}},isInWidget:{defaultValue:null,description:"",name:"isInWidget",required:!1,type:{name:"boolean"}},isRepeat:{defaultValue:null,description:"",name:"isRepeat",required:!1,type:{name:"boolean"}},isPageItem:{defaultValue:null,description:"",name:"isPageItem",required:!1,type:{name:"boolean"}},itemDraggable:{defaultValue:null,description:"",name:"itemDraggable",required:!1,type:{name:"boolean"}},itemResizable:{defaultValue:null,description:"",name:"itemResizable",required:!1,type:{name:"boolean"}},itemSelectable:{defaultValue:null,description:"",name:"itemSelectable",required:!1,type:{name:"boolean"}},droppable:{defaultValue:null,description:"",name:"droppable",required:!1,type:{name:"boolean"}},showDefaultTools:{defaultValue:null,description:"",name:"showDefaultTools",required:!1,type:{name:"boolean"}},isItemAccepted:{defaultValue:null,description:"",name:"isItemAccepted",required:!1,type:{name:"(item: LayoutItemConstructorProps, isReplacePlaceholder: boolean) => boolean"}},onItemClick:{defaultValue:null,description:"",name:"onItemClick",required:!1,type:{name:"(e: any, widgetId: string) => void"}},ignoreMinHeight:{defaultValue:null,description:"",name:"ignoreMinHeight",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/row-layout/runtime/layout.tsx#layout"]={docgenInfo:layout.__docgenInfo,name:"layout",path:"../jimu-layouts/lib/row-layout/runtime/layout.tsx#layout"})}catch(__react_docgen_typescript_loader_error){}var maxgrid=__webpack_require__("../jimu-icons/outlined/application/maxgrid.tsx"),editor_close=__webpack_require__("../jimu-icons/outlined/editor/close.tsx"),common_utils=__webpack_require__("../jimu-layouts/lib/grid-layout/common/utils.ts");const layout_item_style=jimu_core.AHW`
  & > .max-grid-item-btn {
    display: none;
    background: var(--ref-palette-neutral-500);
    width: 26px;
    height: 26px;
    position: absolute;
    top: 0;
    right: 0;
  }

  &:hover > .max-grid-item-btn {
    display: flex;
    justify-content: center;
    align-items: center;
  }
`,maximizedStyle=jimu_core.AHW`
  position: absolute;
  left: 0;
  top: 0;
  width: 100% !important;
  height: 100% !important;
  z-index: 30;
  background: var(--ref-palette-neutral-200);
`;function GridLayoutItem(props){const[maximized,setMaximized]=jimu_core.q_G.useState(!1),expandable=jimu_core.E_S.useSelector((state=>common_utils.tq(state,props.layoutId,props.layoutItemId))),toggleMaximize=jimu_core.q_G.useCallback((()=>{setMaximized(!maximized)}),[maximized]);return(0,jimu_core.Yac)(LayoutItem,Object.assign({},props,{css:jimu_core.AHW`${layout_item_style};${maximized?maximizedStyle:""}`}),expandable&&(0,jimu_core.Yac)(jimu_ui.Button,{icon:!0,type:"tertiary",className:"max-grid-item-btn p-0",onClick:toggleMaximize},maximized&&(0,jimu_core.Yac)(editor_close.r,null),!maximized&&(0,jimu_core.Yac)(maxgrid.z,null)))}try{GridLayoutItem.displayName="GridLayoutItem",GridLayoutItem.__docgenInfo={description:"",displayName:"GridLayoutItem",props:{layoutId:{defaultValue:null,description:"",name:"layoutId",required:!0,type:{name:"string"}},layoutItemId:{defaultValue:null,description:"",name:"layoutItemId",required:!0,type:{name:"string"}},draggable:{defaultValue:null,description:"",name:"draggable",required:!1,type:{name:"boolean"}},resizable:{defaultValue:null,description:"",name:"resizable",required:!1,type:{name:"boolean"}},selectable:{defaultValue:null,description:"",name:"selectable",required:!1,type:{name:"boolean"}},forbidContextMenu:{defaultValue:null,description:"",name:"forbidContextMenu",required:!1,type:{name:"boolean"}},forbidToolbar:{defaultValue:null,description:"",name:"forbidToolbar",required:!1,type:{name:"boolean"}},showDefaultTools:{defaultValue:null,description:"",name:"showDefaultTools",required:!1,type:{name:"boolean"}},isInSection:{defaultValue:null,description:"",name:"isInSection",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},trailOrder:{defaultValue:null,description:"",name:"trailOrder",required:!1,type:{name:"number"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},onDoubleClick:{defaultValue:null,description:"",name:"onDoubleClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},forceAspectRatio:{defaultValue:null,description:"",name:"forceAspectRatio",required:!1,type:{name:"boolean"}},aspectRatio:{defaultValue:null,description:"",name:"aspectRatio",required:!1,type:{name:"number"}},resizeObserver:{defaultValue:null,description:"",name:"resizeObserver",required:!1,type:{name:"ResizeObserver"}},autoWidth:{defaultValue:null,description:"",name:"autoWidth",required:!1,type:{name:"boolean"}},autoHeight:{defaultValue:null,description:"",name:"autoHeight",required:!1,type:{name:"boolean"}},delay:{defaultValue:null,description:"",name:"delay",required:!0,type:{name:"number"}},isLastChild:{defaultValue:null,description:"",name:"isLastChild",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/grid-layout/runtime/layout-item.tsx#GridLayoutItem"]={docgenInfo:GridLayoutItem.__docgenInfo,name:"GridLayoutItem",path:"../jimu-layouts/lib/grid-layout/runtime/layout-item.tsx#GridLayoutItem"})}catch(__react_docgen_typescript_loader_error){}var splitter=__webpack_require__("../jimu-layouts/lib/grid-layout/common/splitter.tsx");function GridItemComponent(props){const{layout,layoutItemId,isLast,className}=props,layoutItem=jimu_core.q_G.useMemo((()=>(0,common_utils.a2)(layout,layoutItemId)),[layout,layoutItemId]),parentType=jimu_core.q_G.useMemo((()=>{if(layoutItem.parent){return(0,common_utils.a2)(layout,layoutItem.parent).gridType}return null}),[layout,layoutItem]),size=+layoutItem.bbox.width,animationContext=jimu_core.q_G.useContext(jimu_core.e8P),interval=jimu_core.q_G.useMemo((()=>{var _a,_b;return(null===(_b=null===(_a=null==animationContext?void 0:animationContext.setting)||void 0===_a?void 0:_a.option)||void 0===_b?void 0:_b.parentMode)===jimu_core.Qkq.AllAtOnce?0:250}),[animationContext]),getStyle=jimu_core.q_G.useCallback((()=>parentType===jimu_core.Qwn.Row?jimu_core.AHW`
        height: 100%;
        width: ${size}%;
      `:parentType===jimu_core.Qwn.Column?jimu_core.AHW`
        width: 100%;
        height: ${size}%;
      `:jimu_core.AHW`
      width: 100%;
      height: 100%;
    `),[size,parentType]);if(layoutItem.gridType===jimu_core.Qwn.Row)return(0,jimu_core.Yac)(RowContainer,{className,css:getStyle(),layout,layoutItemId,items:layoutItem.children});if(layoutItem.gridType===jimu_core.Qwn.Column)return(0,jimu_core.Yac)(ColContainer,{className,css:getStyle(),layout,layoutItemId,items:layoutItem.children});if(layoutItem.gridType===jimu_core.Qwn.Tab)return(0,jimu_core.Yac)(TabContainer,{className,css:getStyle(),layout,layoutItemId,items:layoutItem.children});const idx=(0,common_utils.jG)(layout,layoutItemId),isLastChild=(0,common_utils.be)(layout,layoutItemId);return(0,jimu_core.Yac)(GridLayoutItem,{css:getStyle(),className:(0,jimu_core.xWm)(`d-flex ${className}`,{"is-last":isLast}),layoutId:layout.id,layoutItemId,delay:idx*interval,isLastChild})}function RowContainer(props){const{layout,layoutItemId,items,className}=props,getAppConfigActionFnRef=jimu_core.q_G.useRef();jimu_core.JLE.useEffectOnce((()=>{Promise.all([__webpack_require__.e(9530),__webpack_require__.e(6448),__webpack_require__.e(7568),__webpack_require__.e(2922),__webpack_require__.e(6428),__webpack_require__.e(4878)]).then(__webpack_require__.bind(__webpack_require__,"../jimu-for-builder/index.tsx")).then((m=>{getAppConfigActionFnRef.current=m.getAppConfigAction}))}));const handleResizeEnd=jimu_core.JLE.useEventCallback(((id,dx)=>{const appConfigAction=getAppConfigActionFnRef.current(),index=items.indexOf(id),nextId=items[index+1],layoutItem=layout.content[id],nextLayoutItem=layout.content[nextId];appConfigAction.editLayoutItemProperty({layoutId:layout.id,layoutItemId:id},"bbox",{width:+layoutItem.bbox.width+dx}).editLayoutItemProperty({layoutId:layout.id,layoutItemId:nextId},"bbox",{width:+nextLayoutItem.bbox.width-dx}).exec()}));return(0,jimu_core.Yac)("div",{className:`d-flex ${className}`,css:jimu_core.AHW`
        .is-last {
          width: auto;
          flex-grow: 1;
          flex-shrink: 1;
          flex-basis: 0;
        }
      `,"data-layoutid":layout.id,"data-layoutitemid":layoutItemId},items.map(((item,index)=>{return itemId=item,isLast=index===items.length-1,(0,jimu_core.Yac)(jimu_core.q_G.Fragment,{key:itemId},(0,jimu_core.Yac)(GridItemComponent,{key:itemId,layout,layoutItemId:itemId}),!isLast&&(0,jimu_core.Yac)(splitter.O,{referenceItemId:itemId,layoutId:layout.id,direction:"row",onResizeEnd:handleResizeEnd}));var itemId,isLast})))}function ColContainer(props){const{layout,layoutItemId,items,className}=props,getAppConfigActionFnRef=jimu_core.q_G.useRef();jimu_core.JLE.useEffectOnce((()=>{Promise.all([__webpack_require__.e(9530),__webpack_require__.e(6448),__webpack_require__.e(7568),__webpack_require__.e(2922),__webpack_require__.e(6428),__webpack_require__.e(4878)]).then(__webpack_require__.bind(__webpack_require__,"../jimu-for-builder/index.tsx")).then((m=>{getAppConfigActionFnRef.current=m.getAppConfigAction}))}));const handleResizeEnd=jimu_core.JLE.useEventCallback(((id,dx,dy)=>{const appConfigAction=getAppConfigActionFnRef.current(),index=items.indexOf(id),nextId=items[index+1],layoutItem=layout.content[id],nextLayoutItem=layout.content[nextId];appConfigAction.editLayoutItemProperty({layoutId:layout.id,layoutItemId:id},"bbox",{width:+layoutItem.bbox.width+dy}).editLayoutItemProperty({layoutId:layout.id,layoutItemId:nextId},"bbox",{width:+nextLayoutItem.bbox.width-dy}).exec()}));return(0,jimu_core.Yac)("div",{className:`d-flex flex-column ${className}`,css:jimu_core.AHW`
        .is-last {
          height: auto;
          flex-grow: 1;
          flex-shrink: 1;
          flex-basis: 0;
        }
      `,"data-layoutid":layout.id,"data-layoutitemid":layoutItemId},items.map(((item,index)=>{return itemId=item,isLast=index===items.length-1,(0,jimu_core.Yac)(jimu_core.q_G.Fragment,{key:itemId},(0,jimu_core.Yac)(GridItemComponent,{key:itemId,layout,layoutItemId:itemId}),!isLast&&(0,jimu_core.Yac)(splitter.O,{referenceItemId:itemId,layoutId:layout.id,direction:"col",onResizeEnd:handleResizeEnd}));var itemId,isLast})))}function TabContainer(props){const{layout,layoutItemId,items,className}=props,translate=jimu_core.JLE.useTranslation(jimu_ui.defaultMessages),getLabel=itemId=>{const appConfig=(0,jimu_core.Vp3)().getState().appConfig;return(0,common_utils.T9)(appConfig,{layoutId:layout.id,layoutItemId:itemId},translate)};return(0,jimu_core.Yac)("div",{className,"data-layoutid":layout.id,"data-layoutitemid":layoutItemId},(0,jimu_core.Yac)(jimu_ui.Tabs,{type:"tabs",fill:!0,scrollable:!0,className:"w-100 h-100",css:jimu_core.AHW`
          & > .tab-content {
            overflow: hidden;
          }
        `},[...items].map(((item,index)=>((itemId,index)=>(0,jimu_core.Yac)(jimu_ui.Tab,{key:index,id:`${index}`,title:getLabel(itemId)},(0,jimu_core.Yac)(GridItemComponent,{layout,layoutItemId:itemId})))(item,index)))))}try{GridItemComponent.displayName="GridItemComponent",GridItemComponent.__docgenInfo={description:"",displayName:"GridItemComponent",props:{layout:{defaultValue:null,description:"",name:"layout",required:!0,type:{name:"IMLayoutJson"}},layoutItemId:{defaultValue:null,description:"",name:"layoutItemId",required:!0,type:{name:"string"}},isLast:{defaultValue:null,description:"",name:"isLast",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/grid-layout/runtime/grid-item.tsx#GridItemComponent"]={docgenInfo:GridItemComponent.__docgenInfo,name:"GridItemComponent",path:"../jimu-layouts/lib/grid-layout/runtime/grid-item.tsx#GridItemComponent"})}catch(__react_docgen_typescript_loader_error){}class GridLayout extends jimu_core.q_G.PureComponent{findExtension(){const exts=jimu_core.nH3.getInstance().getExtensions(`${jimu_core.vZE.R6.LayoutTransformer}`);if((null==exts?void 0:exts.length)>0){const ext=exts.find((item=>item.layoutType===jimu_core.p5K.GridLayout));this.layoutTransform=null==ext?void 0:ext.transformLayout}}render(){var _a,_b;const{layouts,layout,browserSizeMode,mainSizeMode,className}=this.props;let finalLayout=layout;layouts[browserSizeMode]!==layout.id&&(null==this.layoutTransform&&this.findExtension(),null!=this.layoutTransform&&(finalLayout=this.layoutTransform(layout,mainSizeMode,browserSizeMode)));const{rootItem:rootItemId}=null!==(_a=finalLayout.setting)&&void 0!==_a?_a:{},rootItem=null===(_b=finalLayout.content)||void 0===_b?void 0:_b[rootItemId],outClass=(0,jimu_core.xWm)("layout grid-layout d-flex w-100 h-100",className);return(0,jimu_core.Yac)("div",{className:outClass,css:jimu_core.AHW`overflow: hidden;${(0,common_utils.lC)(finalLayout.setting)}`,"data-layoutid":finalLayout.id},(0,jimu_core.Yac)(jimu_core.zKZ.Provider,{value:{monitor:!1}},(0,jimu_core.Yac)(jimu_core._kc,{oid:finalLayout.id,"data-layoutid":finalLayout.id,className:"trail-container d-flex w-100 h-100",css:jimu_core.AHW`
              width: 100%;
            `},rootItem?(0,jimu_core.Yac)(GridItemComponent,{className:"w-100 h-100",layout:finalLayout,layoutItemId:rootItemId}):this.props.children)))}}const grid_layout_runtime_layout=jimu_core.E_S.connect(utils.mapStateToLayoutProps)(GridLayout);try{layout.displayName="layout",layout.__docgenInfo={description:"",displayName:"layout",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"any"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},visible:{defaultValue:null,description:"",name:"visible",required:!1,type:{name:"boolean"}},layouts:{defaultValue:null,description:"",name:"layouts",required:!0,type:{name:"ImmutableObjectMixin<SizeModeLayoutJson> & { readonly [x: string]: string; }"}},isInSection:{defaultValue:null,description:"",name:"isInSection",required:!1,type:{name:"boolean"}},isInWidget:{defaultValue:null,description:"",name:"isInWidget",required:!1,type:{name:"boolean"}},isRepeat:{defaultValue:null,description:"",name:"isRepeat",required:!1,type:{name:"boolean"}},isPageItem:{defaultValue:null,description:"",name:"isPageItem",required:!1,type:{name:"boolean"}},itemDraggable:{defaultValue:null,description:"",name:"itemDraggable",required:!1,type:{name:"boolean"}},itemResizable:{defaultValue:null,description:"",name:"itemResizable",required:!1,type:{name:"boolean"}},itemSelectable:{defaultValue:null,description:"",name:"itemSelectable",required:!1,type:{name:"boolean"}},droppable:{defaultValue:null,description:"",name:"droppable",required:!1,type:{name:"boolean"}},showDefaultTools:{defaultValue:null,description:"",name:"showDefaultTools",required:!1,type:{name:"boolean"}},isItemAccepted:{defaultValue:null,description:"",name:"isItemAccepted",required:!1,type:{name:"(item: LayoutItemConstructorProps, isReplacePlaceholder: boolean) => boolean"}},onItemClick:{defaultValue:null,description:"",name:"onItemClick",required:!1,type:{name:"(e: any, widgetId: string) => void"}},ignoreMinHeight:{defaultValue:null,description:"",name:"ignoreMinHeight",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/grid-layout/runtime/layout.tsx#layout"]={docgenInfo:layout.__docgenInfo,name:"layout",path:"../jimu-layouts/lib/grid-layout/runtime/layout.tsx#layout"})}catch(__react_docgen_typescript_loader_error){}var item_title=__webpack_require__("../jimu-layouts/lib/accordion-layout/common/item-title.tsx");const getStyle=(height,gap,headerConfig,panelConfig)=>{const config=null!=headerConfig?headerConfig:{},pConfig=null!=panelConfig?panelConfig:{},{padding,expandedColor,collapsedColor,border,borderLeft,borderRight,borderTop,borderBottom,borderRadius}=config,{padding:panelPadding,border:panelBorder,borderRadius:panelBD,backgroundColor}=pConfig;return jimu_core.AHW`
  position: relative;
  touch-action: none;
  user-select: none;
  & + .foldable-panel {
    margin-top: ${gap}px;
  }
  .panel-header {
    padding: ${jimu_ui.styleUtils.toCSSPadding(padding)};
    border: ${jimu_ui.styleUtils.toCSSBorder(border)};
    border-left: ${jimu_ui.styleUtils.toCSSBorder(borderLeft)};
    border-right: ${jimu_ui.styleUtils.toCSSBorder(borderRight)};
    border-top: ${jimu_ui.styleUtils.toCSSBorder(borderTop)};
    border-bottom: ${jimu_ui.styleUtils.toCSSBorder(borderBottom)};
    border-radius: ${jimu_ui.styleUtils.toCSSBorderRadius(borderRadius)};
    background-color: ${null!=expandedColor?expandedColor:"var(--sys-color-primary-main)"};
    .tool-drag-handler {
      cursor: pointer;
      flex-grow: 1;
      flex-shrink: 1;
    }
  }
  .panel-content {
    padding: ${jimu_ui.styleUtils.toCSSPadding(panelPadding)};
    border: ${jimu_ui.styleUtils.toCSSBorder(panelBorder)};
    border-left: ${jimu_ui.styleUtils.toCSSBorder(pConfig.borderLeft)};
    border-right: ${jimu_ui.styleUtils.toCSSBorder(pConfig.borderRight)};
    border-top: ${jimu_ui.styleUtils.toCSSBorder(pConfig.borderTop)};
    border-bottom: ${jimu_ui.styleUtils.toCSSBorder(pConfig.borderBottom)};
    border-radius: ${jimu_ui.styleUtils.toCSSBorderRadius(panelBD)};
    overflow: auto;
    background-color: ${null!=backgroundColor?backgroundColor:"none"};
    position: relative;
    height: ${height};
    opacity: 1;
    transition: opacity 400ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
  }
  &.collapsed {
    .panel-header {
      background-color: ${null!=collapsedColor?collapsedColor:"var(--sys-color-primary-main)"};
    }
    .panel-content {
      height: 0;
      padding: unset;
      border: none;
      visibility: hidden;
      .layout-item {
        display: none;
      }
    }
  }
  `};function Panel(props){var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,_l;const{layoutId,layoutItemId,expanded,height,gap,onExpandedChange}=props,translate=jimu_core.JLE.useTranslation(),layoutItem=jimu_core.E_S.useSelector((state=>search.findLayoutItem(state.appConfig,{layoutId,layoutItemId}))),label=jimu_core.E_S.useSelector((state=>{var _a,_b;if(layoutItem.type===jimu_core.K6q.Widget){const widgetId=layoutItem.widgetId,widgetJson=state.appConfig.widgets[widgetId];return null!==(_a=null==widgetJson?void 0:widgetJson.label)&&void 0!==_a?_a:""}const sectionId=layoutItem.sectionId,sectionJson=state.appConfig.sections[sectionId];return null!==(_b=null==sectionJson?void 0:sectionJson.label)&&void 0!==_b?_b:""})),headerConfig=jimu_core.E_S.useSelector((state=>{var _a;const parentWidgetId=state.appConfig.layouts[layoutId].parent.id;return null===(_a=state.appConfig.widgets[parentWidgetId].config)||void 0===_a?void 0:_a.header})),panelConfig=jimu_core.E_S.useSelector((state=>{var _a;const parentWidgetId=state.appConfig.layouts[layoutId].parent.id;return null===(_a=state.appConfig.widgets[parentWidgetId].config)||void 0===_a?void 0:_a.panel})),isFunctionalWidget=jimu_core.E_S.useSelector((state=>layoutItem.type===jimu_core.K6q.Widget&&utils.isFunctionalWidget(layoutItem.widgetId,state.appConfig))),togglePosition=null!==(_a=null==headerConfig?void 0:headerConfig.togglePosition)&&void 0!==_a?_a:"right",toggleCollapse=jimu_core.q_G.useCallback((()=>{onExpandedChange(layoutItemId,!expanded)}),[layoutItemId,expanded,onExpandedChange]),icon=expanded?null===(_b=null==headerConfig?void 0:headerConfig.collapseIcon)||void 0===_b?void 0:_b.svg:null===(_c=null==headerConfig?void 0:headerConfig.expandIcon)||void 0===_c?void 0:_c.svg;return(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)("layout-item foldable-panel",{collapsed:!expanded,"functional-widget":isFunctionalWidget}),"data-layoutid":layoutId,"data-layoutitemid":layoutItemId,css:getStyle(height,gap,headerConfig,panelConfig)},(0,jimu_core.Yac)("div",{className:"panel d-flex flex-column"},(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)("panel-header d-flex align-items-center",{"flex-row-reverse":"left"===togglePosition}),onClick:toggleCollapse,onKeyDown:null,role:"group","aria-label":label},(0,jimu_core.Yac)("div",{className:"tool-drag-handler"},layoutId&&layoutItemId&&(0,jimu_core.Yac)(item_title.E,{layoutId,layoutItemId})),icon&&(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)("actions",{"ml-auto":"right"===togglePosition})},(0,jimu_core.Yac)(jimu_ui.Button,{icon:!0,type:"tertiary",size:"sm","aria-expanded":expanded,title:translate(expanded?"clickToHide":"clickToShow"),"aria-label":translate(expanded?"clickToHide":"clickToShow")},(0,jimu_core.Yac)(jimu_ui.Icon,{icon,size:expanded?null===(_e=null===(_d=null==headerConfig?void 0:headerConfig.collapseIcon)||void 0===_d?void 0:_d.properties)||void 0===_e?void 0:_e.size:null===(_g=null===(_f=null==headerConfig?void 0:headerConfig.expandIcon)||void 0===_f?void 0:_f.properties)||void 0===_g?void 0:_g.size,color:expanded?null===(_j=null===(_h=null==headerConfig?void 0:headerConfig.collapseIcon)||void 0===_h?void 0:_h.properties)||void 0===_j?void 0:_j.color:null===(_l=null===(_k=null==headerConfig?void 0:headerConfig.expandIcon)||void 0===_k?void 0:_k.properties)||void 0===_l?void 0:_l.color})))),(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)("panel-content d-flex flex-grow-1 flex-shrink-1")},props.children)))}try{Panel.displayName="Panel",Panel.__docgenInfo={description:"",displayName:"Panel",props:{layoutId:{defaultValue:null,description:"",name:"layoutId",required:!1,type:{name:"string"}},layoutItemId:{defaultValue:null,description:"",name:"layoutItemId",required:!1,type:{name:"string"}},draggable:{defaultValue:null,description:"",name:"draggable",required:!1,type:{name:"boolean"}},resizable:{defaultValue:null,description:"",name:"resizable",required:!1,type:{name:"boolean"}},selectable:{defaultValue:null,description:"",name:"selectable",required:!1,type:{name:"boolean"}},forbidContextMenu:{defaultValue:null,description:"",name:"forbidContextMenu",required:!1,type:{name:"boolean"}},forbidToolbar:{defaultValue:null,description:"",name:"forbidToolbar",required:!1,type:{name:"boolean"}},showDefaultTools:{defaultValue:null,description:"",name:"showDefaultTools",required:!1,type:{name:"boolean"}},isInSection:{defaultValue:null,description:"",name:"isInSection",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},trailOrder:{defaultValue:null,description:"",name:"trailOrder",required:!1,type:{name:"number"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},onDoubleClick:{defaultValue:null,description:"",name:"onDoubleClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},forceAspectRatio:{defaultValue:null,description:"",name:"forceAspectRatio",required:!1,type:{name:"boolean"}},aspectRatio:{defaultValue:null,description:"",name:"aspectRatio",required:!1,type:{name:"number"}},resizeObserver:{defaultValue:null,description:"",name:"resizeObserver",required:!1,type:{name:"ResizeObserver"}},autoWidth:{defaultValue:null,description:"",name:"autoWidth",required:!1,type:{name:"boolean"}},autoHeight:{defaultValue:null,description:"",name:"autoHeight",required:!1,type:{name:"boolean"}},expanded:{defaultValue:null,description:"",name:"expanded",required:!0,type:{name:"boolean"}},gap:{defaultValue:null,description:"",name:"gap",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"string"}},onExpandedChange:{defaultValue:null,description:"",name:"onExpandedChange",required:!0,type:{name:"(layoutItemId: string, expanded: boolean) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/accordion-layout/runtime/panel.tsx#Panel"]={docgenInfo:Panel.__docgenInfo,name:"Panel",path:"../jimu-layouts/lib/accordion-layout/runtime/panel.tsx#Panel"})}catch(__react_docgen_typescript_loader_error){}function AccordionItem(props){var _a,_b,_c,_d;const{layoutId,layoutItem,layoutItemId,expanded,gap,onExpandedChange}=props,isWidget=(null==layoutItem?void 0:layoutItem.type)===jimu_core.K6q.Widget,isSection=(null==layoutItem?void 0:layoutItem.type)===jimu_core.K6q.Section,widgetProps=jimu_core.E_S.useSelector((state=>utils.mapStateToWidgetProps(state,props)),jimu_core.E_S.shallowEqual),sectionProps=jimu_core.E_S.useSelector((state=>{if(isSection)return(0,search.getSectionInfo)(state,layoutItem.sectionId)}),jimu_core.E_S.shallowEqual);let height;height=(null===(_b=null===(_a=layoutItem.setting)||void 0===_a?void 0:_a.autoProps)||void 0===_b?void 0:_b.height)===types.Dy.Auto?"auto":layoutItem.bbox.height;const useAspectRatio=utils.shouldUseAspectRatio(null!==(_c=layoutItem.setting)&&void 0!==_c?_c:{}),aspectRatio=utils.parseAspectRatio(null===(_d=layoutItem.setting)||void 0===_d?void 0:_d.aspectRatio);return(0,jimu_core.Yac)(Panel,{layoutId,layoutItemId,height,expanded,gap,onExpandedChange},isWidget&&(0,jimu_core.Yac)(WidgetRenderer,Object.assign({layoutId,layoutItemId,forceAspectRatio:useAspectRatio,aspectRatio},widgetProps)),isSection&&(0,jimu_core.Yac)(section_renderer_SectionRenderer,Object.assign({layoutId,layoutItemId},sectionProps)))}try{AccordionItem.displayName="AccordionItem",AccordionItem.__docgenInfo={description:"",displayName:"AccordionItem",props:{layoutId:{defaultValue:null,description:"",name:"layoutId",required:!0,type:{name:"string"}},layoutItemId:{defaultValue:null,description:"",name:"layoutItemId",required:!0,type:{name:"string"}},draggable:{defaultValue:null,description:"",name:"draggable",required:!1,type:{name:"boolean"}},resizable:{defaultValue:null,description:"",name:"resizable",required:!1,type:{name:"boolean"}},selectable:{defaultValue:null,description:"",name:"selectable",required:!1,type:{name:"boolean"}},forbidContextMenu:{defaultValue:null,description:"",name:"forbidContextMenu",required:!1,type:{name:"boolean"}},forbidToolbar:{defaultValue:null,description:"",name:"forbidToolbar",required:!1,type:{name:"boolean"}},showDefaultTools:{defaultValue:null,description:"",name:"showDefaultTools",required:!1,type:{name:"boolean"}},isInSection:{defaultValue:null,description:"",name:"isInSection",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},trailOrder:{defaultValue:null,description:"",name:"trailOrder",required:!1,type:{name:"number"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},onDoubleClick:{defaultValue:null,description:"",name:"onDoubleClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},forceAspectRatio:{defaultValue:null,description:"",name:"forceAspectRatio",required:!1,type:{name:"boolean"}},aspectRatio:{defaultValue:null,description:"",name:"aspectRatio",required:!1,type:{name:"number"}},resizeObserver:{defaultValue:null,description:"",name:"resizeObserver",required:!1,type:{name:"ResizeObserver"}},autoWidth:{defaultValue:null,description:"",name:"autoWidth",required:!1,type:{name:"boolean"}},autoHeight:{defaultValue:null,description:"",name:"autoHeight",required:!1,type:{name:"boolean"}},layoutItem:{defaultValue:null,description:"",name:"layoutItem",required:!0,type:{name:"LayoutItemJson | IMLayoutItemJson"}},gap:{defaultValue:null,description:"",name:"gap",required:!0,type:{name:"number"}},expanded:{defaultValue:null,description:"",name:"expanded",required:!0,type:{name:"boolean"}},onExpandedChange:{defaultValue:null,description:"",name:"onExpandedChange",required:!0,type:{name:"(layoutItemId: string, expanded: boolean) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/accordion-layout/runtime/layout-item.tsx#AccordionItem"]={docgenInfo:AccordionItem.__docgenInfo,name:"AccordionItem",path:"../jimu-layouts/lib/accordion-layout/runtime/layout-item.tsx#AccordionItem"})}catch(__react_docgen_typescript_loader_error){}var toggle_all=__webpack_require__("../jimu-layouts/lib/accordion-layout/common/toggle-all.tsx"),accordion_layout_util=__webpack_require__("../jimu-layouts/lib/accordion-layout/util.ts");class layout_Layout extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.handleExpandedChange=(layoutItemId,expanded)=>{expanded?this.props.singleMode?this.setState({expandedItems:[layoutItemId]}):this.state.expandedItems.includes(layoutItemId)||this.setState({expandedItems:[...this.state.expandedItems,layoutItemId]}):this.state.expandedItems.includes(layoutItemId)&&this.setState({expandedItems:this.state.expandedItems.filter((id=>id!==layoutItemId))})},this.expandAll=()=>{const{layout}=this.props;this.setState({expandedItems:[...layout.order]})},this.collapseAll=()=>{this.setState({expandedItems:[]})},this.state={expandedItems:this.props.expandByDefault.split(",")}}createItem(itemId){const{layout,gap}=this.props;return layout.content[itemId].isPending?null:(0,jimu_core.Yac)(AccordionItem,{key:itemId,layoutId:layout.id,layoutItemId:itemId,expanded:this.state.expandedItems.includes(itemId),gap,layoutItem:layout.content[itemId],onExpandedChange:this.handleExpandedChange})}render(){var _a;const{layout,className,showToggleAll,padding}=this.props,content=null!==(_a=layout.order)&&void 0!==_a?_a:[];return(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)("layout foldable-layout w-100 d-flex flex-column",className),css:jimu_core.AHW`position: relative; overflow: auto; padding: ${jimu_ui.styleUtils.toCSSPadding(padding)}`,"data-layoutid":layout.id},showToggleAll&&(0,jimu_core.Yac)(toggle_all.h,{onExpandAll:this.expandAll,onCollapseAll:this.collapseAll}),content.map((layoutItem=>this.createItem(layoutItem))))}}const layout_mapStateToProps=(0,jimu_core.Mz0)([(state,ownProps)=>utils.mapStateToLayoutProps(state,ownProps),(state,ownProps)=>{var _a,_b;return null!==(_b=null===(_a=(0,accordion_layout_util.H)(ownProps.layouts,state).config)||void 0===_a?void 0:_a.singleMode)&&void 0!==_b&&_b},(state,ownProps)=>{var _a,_b;return null!==(_b=null===(_a=(0,accordion_layout_util.H)(ownProps.layouts,state).config)||void 0===_a?void 0:_a.showToggleAll)&&void 0!==_b&&_b},(state,ownProps)=>{var _a,_b;return null!==(_b=null===(_a=(0,accordion_layout_util.H)(ownProps.layouts,state).config)||void 0===_a?void 0:_a.gap)&&void 0!==_b?_b:4},(state,ownProps)=>{var _a;return null===(_a=(0,accordion_layout_util.H)(ownProps.layouts,state).config)||void 0===_a?void 0:_a.padding},(state,ownProps)=>{var _a,_b,_c;const layoutId=ownProps.layouts[state.browserSizeMode]||ownProps.layouts[state.appConfig.mainSizeMode],layoutJson=state.appConfig.layouts[layoutId],list=null!==(_b=null===(_a=(0,accordion_layout_util.H)(ownProps.layouts,state).config)||void 0===_a?void 0:_a.expandedItems)&&void 0!==_b?_b:[],result=[];return list.length>0&&Object.keys(null!==(_c=layoutJson.content)&&void 0!==_c?_c:{}).forEach((layoutItemId=>{const layoutItem=layoutJson.content[layoutItemId];list.includes(layoutItem.widgetId)&&result.push(layoutItemId)})),result.join(",")}],((layoutProps,singleMode,showToggleAll,gap,padding,expandedItems)=>Object.assign({singleMode,showToggleAll,gap,padding,expandByDefault:expandedItems},layoutProps))),accordion_layout_runtime_layout=jimu_core.E_S.connect(layout_mapStateToProps)(layout_Layout);try{layout.displayName="layout",layout.__docgenInfo={description:"",displayName:"layout",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"any"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},gap:{defaultValue:null,description:"",name:"gap",required:!0,type:{name:"number"}},padding:{defaultValue:null,description:"",name:"padding",required:!0,type:{name:"FourSidesUnit"}},visible:{defaultValue:null,description:"",name:"visible",required:!1,type:{name:"boolean"}},layouts:{defaultValue:null,description:"",name:"layouts",required:!0,type:{name:"ImmutableObjectMixin<SizeModeLayoutJson> & { readonly [x: string]: string; }"}},isInSection:{defaultValue:null,description:"",name:"isInSection",required:!1,type:{name:"boolean"}},isInWidget:{defaultValue:null,description:"",name:"isInWidget",required:!1,type:{name:"boolean"}},isRepeat:{defaultValue:null,description:"",name:"isRepeat",required:!1,type:{name:"boolean"}},isPageItem:{defaultValue:null,description:"",name:"isPageItem",required:!1,type:{name:"boolean"}},itemDraggable:{defaultValue:null,description:"",name:"itemDraggable",required:!1,type:{name:"boolean"}},itemResizable:{defaultValue:null,description:"",name:"itemResizable",required:!1,type:{name:"boolean"}},itemSelectable:{defaultValue:null,description:"",name:"itemSelectable",required:!1,type:{name:"boolean"}},droppable:{defaultValue:null,description:"",name:"droppable",required:!1,type:{name:"boolean"}},showDefaultTools:{defaultValue:null,description:"",name:"showDefaultTools",required:!1,type:{name:"boolean"}},isItemAccepted:{defaultValue:null,description:"",name:"isItemAccepted",required:!1,type:{name:"(item: LayoutItemConstructorProps, isReplacePlaceholder: boolean) => boolean"}},onItemClick:{defaultValue:null,description:"",name:"onItemClick",required:!1,type:{name:"(e: any, widgetId: string) => void"}},ignoreMinHeight:{defaultValue:null,description:"",name:"ignoreMinHeight",required:!1,type:{name:"boolean"}},singleMode:{defaultValue:null,description:"",name:"singleMode",required:!0,type:{name:"boolean"}},showToggleAll:{defaultValue:null,description:"",name:"showToggleAll",required:!0,type:{name:"boolean"}},expandByDefault:{defaultValue:null,description:"",name:"expandByDefault",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/accordion-layout/runtime/layout.tsx#layout"]={docgenInfo:layout.__docgenInfo,name:"layout",path:"../jimu-layouts/lib/accordion-layout/runtime/layout.tsx#layout"})}catch(__react_docgen_typescript_loader_error){}var flex_row_layout_default_setting=__webpack_require__("../jimu-layouts/lib/flex-row-layout/default-setting.ts"),flex_row_layout_common_util=__webpack_require__("../jimu-layouts/lib/flex-row-layout/common/util.ts");class FlexRowItem extends jimu_core.q_G.PureComponent{isStretchInCrossAxis(){const{layoutItem}=this.props;return flex_row_layout_common_util.IW(layoutItem)}calWidth(itemSetting,bbox){return flex_row_layout_common_util.pg(itemSetting,bbox)}getStyle(layoutSetting,isHeightStretch,keepAspectRatio,isAutoHeight){const{layoutItem}=this.props,bbox=layoutItem.bbox||{},style=this.calWidth(layoutSetting,bbox);return style.height=isHeightStretch||keepAspectRatio||isAutoHeight?"auto":bbox.height,flex_row_layout_common_util.jX(style,layoutSetting,isHeightStretch)}render(){var _a,_b,_c;const{layoutId,layoutItem}=this.props;if(!layoutItem||layoutItem.isPending)return null;const layoutSetting=layoutItem.setting||{},widthMode=null!==(_b=null===(_a=layoutSetting.autoProps)||void 0===_a?void 0:_a.width)&&void 0!==_b?_b:types.Dy.Custom,isAutoHeight=(null===(_c=layoutSetting.autoProps)||void 0===_c?void 0:_c.height)===types.Dy.Auto,mergedClass=(0,jimu_core.xWm)("flex-row-layout-item",{"d-flex":widthMode!==types.Dy.Auto}),isStretch=this.isStretchInCrossAxis(),keepAspectRatio=utils.shouldUseAspectRatio(layoutSetting),ratio=utils.parseAspectRatio(layoutSetting.aspectRatio),oneByOneAnimationProps=utils.handleOnebyOneAnimation(this.props);return(0,jimu_core.Yac)(LayoutItem,Object.assign({css:this.getStyle(layoutSetting,isStretch,keepAspectRatio,isAutoHeight),layoutId,layoutItemId:layoutItem.id,className:mergedClass,forceAspectRatio:keepAspectRatio,aspectRatio:ratio,autoHeight:isAutoHeight},oneByOneAnimationProps))}}try{FlexRowItem.displayName="FlexRowItem",FlexRowItem.__docgenInfo={description:"",displayName:"FlexRowItem",props:{layoutId:{defaultValue:null,description:"",name:"layoutId",required:!0,type:{name:"string"}},layoutItemId:{defaultValue:null,description:"",name:"layoutItemId",required:!0,type:{name:"string"}},draggable:{defaultValue:null,description:"",name:"draggable",required:!1,type:{name:"boolean"}},resizable:{defaultValue:null,description:"",name:"resizable",required:!1,type:{name:"boolean"}},selectable:{defaultValue:null,description:"",name:"selectable",required:!1,type:{name:"boolean"}},forbidContextMenu:{defaultValue:null,description:"",name:"forbidContextMenu",required:!1,type:{name:"boolean"}},forbidToolbar:{defaultValue:null,description:"",name:"forbidToolbar",required:!1,type:{name:"boolean"}},showDefaultTools:{defaultValue:null,description:"",name:"showDefaultTools",required:!1,type:{name:"boolean"}},isInSection:{defaultValue:null,description:"",name:"isInSection",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},trailOrder:{defaultValue:null,description:"",name:"trailOrder",required:!1,type:{name:"number"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},onDoubleClick:{defaultValue:null,description:"",name:"onDoubleClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},forceAspectRatio:{defaultValue:null,description:"",name:"forceAspectRatio",required:!1,type:{name:"boolean"}},aspectRatio:{defaultValue:null,description:"",name:"aspectRatio",required:!1,type:{name:"number"}},resizeObserver:{defaultValue:null,description:"",name:"resizeObserver",required:!1,type:{name:"ResizeObserver"}},autoWidth:{defaultValue:null,description:"",name:"autoWidth",required:!1,type:{name:"boolean"}},autoHeight:{defaultValue:null,description:"",name:"autoHeight",required:!1,type:{name:"boolean"}},layoutItem:{defaultValue:null,description:"",name:"layoutItem",required:!0,type:{name:"ImmutableObjectMixin<LayoutItemJson> & { readonly id?: string; readonly bbox?: ImmutableObject<BoundingBox>; ... 8 more ...; readonly children?: ImmutableArray<...>; }"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"boolean"}},autoScroll:{defaultValue:null,description:"",name:"autoScroll",required:!1,type:{name:"boolean"}},animationPreview:{defaultValue:null,description:"",name:"animationPreview",required:!1,type:{name:"boolean"}},hoverPreview:{defaultValue:null,description:"",name:"hoverPreview",required:!1,type:{name:"boolean"}},playMode:{defaultValue:null,description:"",name:"playMode",required:!1,type:{name:"enum",value:[{value:'"AS_ONE"'},{value:'"ONE_BY_ONE"'}]}},previewId:{defaultValue:null,description:"",name:"previewId",required:!1,type:{name:"number"}},watchViewportVisibility:{defaultValue:null,description:"",name:"watchViewportVisibility",required:!1,type:{name:"boolean"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/flex-row-layout/runtime/layout-item.tsx#FlexRowItem"]={docgenInfo:FlexRowItem.__docgenInfo,name:"FlexRowItem",path:"../jimu-layouts/lib/flex-row-layout/runtime/layout-item.tsx#FlexRowItem"})}catch(__react_docgen_typescript_loader_error){}var common_style=__webpack_require__("../jimu-layouts/lib/flex-row-layout/common/style.ts");class runtime_layout_Layout extends jimu_core.q_G.PureComponent{createItem(itemId,index){const{layout}=this.props;return(0,jimu_core.Yac)(FlexRowItem,{key:itemId,index,layoutId:layout.id,layoutItemId:itemId,layoutItem:layout.content[itemId]})}isEmpty(){var _a;const{layout}=this.props,content=null!==(_a=layout.order)&&void 0!==_a?_a:[];return!(content.length>0&&content.some((id=>!layout.content[id].isPending)))}render(){var _a;const{layout,className}=this.props,content=null!==(_a=layout.order)&&void 0!==_a?_a:[],layoutSetting=Object.assign({},flex_row_layout_default_setting.N,layout.setting),isEmpty=this.isEmpty(),mergedStyle={position:"relative",minWidth:layoutSetting.min},outClass=(0,jimu_core.xWm)("layout flex-row-layout",className);return(0,jimu_core.Yac)("div",{className:outClass,style:mergedStyle,"data-layoutid":layout.id},(0,jimu_core.Yac)(jimu_core.zKZ.Provider,{value:{monitor:!0,layoutId:layout.id}},(0,jimu_core.Yac)(jimu_core._kc,{oid:layout.id,className:"trail-container d-flex w-100",css:jimu_core.AHW`
              position: ${isEmpty?"absolute":null};
              padding: ${jimu_ui.styleUtils.toCSSPadding(layoutSetting.padding)};
              ${(0,common_style.A)(layoutSetting)};
            `},content.map(((layoutItem,index)=>this.createItem(layoutItem,index))))))}}const flex_row_layout_runtime_layout=jimu_core.E_S.connect(utils.mapStateToLayoutProps)(runtime_layout_Layout);try{layout.displayName="layout",layout.__docgenInfo={description:"",displayName:"layout",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"any"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},visible:{defaultValue:null,description:"",name:"visible",required:!1,type:{name:"boolean"}},layouts:{defaultValue:null,description:"",name:"layouts",required:!0,type:{name:"ImmutableObjectMixin<SizeModeLayoutJson> & { readonly [x: string]: string; }"}},isInSection:{defaultValue:null,description:"",name:"isInSection",required:!1,type:{name:"boolean"}},isInWidget:{defaultValue:null,description:"",name:"isInWidget",required:!1,type:{name:"boolean"}},isRepeat:{defaultValue:null,description:"",name:"isRepeat",required:!1,type:{name:"boolean"}},isPageItem:{defaultValue:null,description:"",name:"isPageItem",required:!1,type:{name:"boolean"}},itemDraggable:{defaultValue:null,description:"",name:"itemDraggable",required:!1,type:{name:"boolean"}},itemResizable:{defaultValue:null,description:"",name:"itemResizable",required:!1,type:{name:"boolean"}},itemSelectable:{defaultValue:null,description:"",name:"itemSelectable",required:!1,type:{name:"boolean"}},droppable:{defaultValue:null,description:"",name:"droppable",required:!1,type:{name:"boolean"}},showDefaultTools:{defaultValue:null,description:"",name:"showDefaultTools",required:!1,type:{name:"boolean"}},isItemAccepted:{defaultValue:null,description:"",name:"isItemAccepted",required:!1,type:{name:"(item: LayoutItemConstructorProps, isReplacePlaceholder: boolean) => boolean"}},onItemClick:{defaultValue:null,description:"",name:"onItemClick",required:!1,type:{name:"(e: any, widgetId: string) => void"}},ignoreMinHeight:{defaultValue:null,description:"",name:"ignoreMinHeight",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/flex-row-layout/runtime/layout.tsx#layout"]={docgenInfo:layout.__docgenInfo,name:"layout",path:"../jimu-layouts/lib/flex-row-layout/runtime/layout.tsx#layout"})}catch(__react_docgen_typescript_loader_error){}var layout_transform=__webpack_require__("../jimu-layouts/lib/flow-layout/layout-transform.ts"),row_layout_layout_transform=__webpack_require__("../jimu-layouts/lib/row-layout/layout-transform.ts"),grid_layout_layout_transform=__webpack_require__("../jimu-layouts/lib/grid-layout/layout-transform.ts"),flow_layout_default_setting=__webpack_require__("../jimu-layouts/lib/flow-layout/default-setting.ts"),layout_utils=__webpack_require__("../jimu-layouts/lib/flow-layout/layout-utils.ts"),flow_layout_common_util=__webpack_require__("../jimu-layouts/lib/flow-layout/common/util.ts");class FlowLayoutItem extends jimu_core.q_G.PureComponent{componentDidMount(){var _a;const queryObject=null!==(_a=(0,jimu_core.Vp3)().getState().queryObject)&&void 0!==_a?_a:{},{layoutId,layoutItem}=this.props,domId=`${layoutId}_block_${layoutItem.id}`;if(queryObject.block_id===domId){const dom=document.getElementById(domId);setTimeout((()=>{dom.scrollIntoView({behavior:"smooth",block:"start"})}),500)}}calHeight(itemSetting){const height=flow_layout_common_util.W(this.props.layoutItem,itemSetting);return this.autoHeight="auto"===height,height}getStyle(itemSetting){const{index,gutter}=this.props,sign=(0,utils.isRTL)()?-1:1;return[jimu_core.AHW`
        margin-top: ${index>0?`${gutter}px`:"unset"};
        width: ${(0,layout_utils.p5)(itemSetting)};
        height: ${this.calHeight(itemSetting)};
        flex-shrink: 0;
      `,itemSetting.offsetX||itemSetting.offsetY?`translate(${(itemSetting.offsetX||0)*sign}px, ${itemSetting.offsetY||0}px)`:null]}render(){const{layoutId,layoutItem,onClick,isEmpty}=this.props;if(!layoutItem||isEmpty)return null;const mergedClass=(0,jimu_core.xWm)("flow-layout-item","d-flex"),itemSetting=jimu_core.CM0.assign({},flow_layout_default_setting.E,layoutItem.setting),oneByOneAnimationProps=(0,utils.handleOnebyOneAnimation)(this.props),[cssStyle,transform]=this.getStyle(itemSetting);return(0,jimu_core.Yac)(LayoutItem,Object.assign({id:`${layoutId}_block_${layoutItem.id}`,css:cssStyle,style:{transform},layoutId,layoutItemId:layoutItem.id,onClick,className:mergedClass,autoHeight:this.autoHeight},oneByOneAnimationProps))}}const layout_item=jimu_core.E_S.connect(layout_utils.aT)(FlowLayoutItem);try{layoutitem.displayName="layoutitem",layoutitem.__docgenInfo={description:"",displayName:"layoutitem",props:{index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},draggable:{defaultValue:null,description:"",name:"draggable",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},onDoubleClick:{defaultValue:null,description:"",name:"onDoubleClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},autoWidth:{defaultValue:null,description:"",name:"autoWidth",required:!1,type:{name:"boolean"}},layoutId:{defaultValue:null,description:"",name:"layoutId",required:!0,type:{name:"string"}},layoutItemId:{defaultValue:null,description:"",name:"layoutItemId",required:!0,type:{name:"string"}},autoHeight:{defaultValue:null,description:"",name:"autoHeight",required:!1,type:{name:"boolean"}},isInSection:{defaultValue:null,description:"",name:"isInSection",required:!1,type:{name:"boolean"}},showDefaultTools:{defaultValue:null,description:"",name:"showDefaultTools",required:!1,type:{name:"boolean"}},resizable:{defaultValue:null,description:"",name:"resizable",required:!1,type:{name:"boolean"}},selectable:{defaultValue:null,description:"",name:"selectable",required:!1,type:{name:"boolean"}},forbidContextMenu:{defaultValue:null,description:"",name:"forbidContextMenu",required:!1,type:{name:"boolean"}},forbidToolbar:{defaultValue:null,description:"",name:"forbidToolbar",required:!1,type:{name:"boolean"}},trailOrder:{defaultValue:null,description:"",name:"trailOrder",required:!1,type:{name:"number"}},forceAspectRatio:{defaultValue:null,description:"",name:"forceAspectRatio",required:!1,type:{name:"boolean"}},aspectRatio:{defaultValue:null,description:"",name:"aspectRatio",required:!1,type:{name:"number"}},resizeObserver:{defaultValue:null,description:"",name:"resizeObserver",required:!1,type:{name:"ResizeObserver"}},layoutItem:{defaultValue:null,description:"",name:"layoutItem",required:!0,type:{name:"ImmutableObjectMixin<LayoutItemJson> & { readonly id?: string; readonly bbox?: ImmutableObject<BoundingBox>; ... 8 more ...; readonly children?: ImmutableArray<...>; }"}},gutter:{defaultValue:null,description:"",name:"gutter",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/flow-layout/runtime/layout-item.tsx#layoutitem"]={docgenInfo:layoutitem.__docgenInfo,name:"layoutitem",path:"../jimu-layouts/lib/flow-layout/runtime/layout-item.tsx#layoutitem"})}catch(__react_docgen_typescript_loader_error){}class FloatingLayoutItem extends jimu_core.q_G.PureComponent{calculatePosition(){const{layoutItem}=this.props;return(0,layout_utils.ES)(layoutItem)}render(){const{layoutId,layoutItem,onClick}=this.props;if(!layoutItem)return null;const mergedClass=(0,jimu_core.xWm)("flow-layout-item floating","d-flex");return(0,jimu_core.Yac)(LayoutItem,{css:this.calculatePosition(),layoutId,layoutItemId:layoutItem.id,onClick,className:mergedClass})}}try{floatinglayoutitem.displayName="floatinglayoutitem",floatinglayoutitem.__docgenInfo={description:"",displayName:"floatinglayoutitem",props:{layoutId:{defaultValue:null,description:"",name:"layoutId",required:!0,type:{name:"string"}},layoutItemId:{defaultValue:null,description:"",name:"layoutItemId",required:!0,type:{name:"string"}},draggable:{defaultValue:null,description:"",name:"draggable",required:!1,type:{name:"boolean"}},resizable:{defaultValue:null,description:"",name:"resizable",required:!1,type:{name:"boolean"}},selectable:{defaultValue:null,description:"",name:"selectable",required:!1,type:{name:"boolean"}},forbidContextMenu:{defaultValue:null,description:"",name:"forbidContextMenu",required:!1,type:{name:"boolean"}},forbidToolbar:{defaultValue:null,description:"",name:"forbidToolbar",required:!1,type:{name:"boolean"}},showDefaultTools:{defaultValue:null,description:"",name:"showDefaultTools",required:!1,type:{name:"boolean"}},isInSection:{defaultValue:null,description:"",name:"isInSection",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},trailOrder:{defaultValue:null,description:"",name:"trailOrder",required:!1,type:{name:"number"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},onDoubleClick:{defaultValue:null,description:"",name:"onDoubleClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},forceAspectRatio:{defaultValue:null,description:"",name:"forceAspectRatio",required:!1,type:{name:"boolean"}},aspectRatio:{defaultValue:null,description:"",name:"aspectRatio",required:!1,type:{name:"number"}},resizeObserver:{defaultValue:null,description:"",name:"resizeObserver",required:!1,type:{name:"ResizeObserver"}},autoWidth:{defaultValue:null,description:"",name:"autoWidth",required:!1,type:{name:"boolean"}},autoHeight:{defaultValue:null,description:"",name:"autoHeight",required:!1,type:{name:"boolean"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},layoutItem:{defaultValue:null,description:"",name:"layoutItem",required:!0,type:{name:"IMLayoutItemJson"}},gutter:{defaultValue:null,description:"",name:"gutter",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/flow-layout/runtime/floating-layout-item.tsx#floatinglayoutitem"]={docgenInfo:floatinglayoutitem.__docgenInfo,name:"floatinglayoutitem",path:"../jimu-layouts/lib/flow-layout/runtime/floating-layout-item.tsx#floatinglayoutitem"})}catch(__react_docgen_typescript_loader_error){}var common=__webpack_require__("../jimu-layouts/lib/flow-layout/common/index.tsx"),type=__webpack_require__("../jimu-layouts/lib/flow-layout/common/type.ts");function screen_group_getStyle(transitionType,isOverlay){return jimu_core.AHW`
    position: relative;
    width: 100%;

    .main-panels {
      position: absolute;
      left: 0;
      right: 0;
      top: 0;
      bottom: 0;
      pointer-events: none;
      z-index: 0;
    }

    .side-panels {
      position: relative;
      z-index: 1;
      pointer-events: none;

      > div:first-of-type > div.panel-content {
        padding-top: ${Math.round(100*type.v)}vh;
        padding-top: calc(var(--vh) * ${Math.round(100*type.v)});
      }

      /* > div:nth-last-of-type(2) {
        min-height: 100vh;
      } */
    }

    &.small-size .main-panels {
      z-index: ${isOverlay?0:1};
    }

    &.small-size .side-panels {
      z-index: ${isOverlay?1:0};
    }

    &.print-preview {
      .screen-container {
        height: auto;
        position: relative;

        .screen-main-panel {
          position: relative;
          opacity: 1 !important;
        }
      }
      .screen-side-panel {
        min-height: calc(var(--vh) * 100);
        opacity: 1 !important;
        .panel-spacing {
          display: none;
        }
      }
      .screen-placeholder {
        display: none;
      }
    }
  `}function ScreenGroup(props){var _a;const{layoutId,layoutItemId,layoutItem}=props,{screenGroupId}=layoutItem,screenGroup=jimu_core.E_S.useSelector((state=>state.appConfig.screenGroups[layoutItem.screenGroupId])),isPrintPreview=jimu_core.E_S.useSelector((state=>{var _a,_b;return null!==(_b=null===(_a=state.appRuntimeInfo)||void 0===_a?void 0:_a.isPrintPreview)&&void 0!==_b&&_b})),hasPanel=jimu_core.E_S.useSelector((state=>state.appConfig.screenGroups[layoutItem.screenGroupId].screens.some((screenId=>null!=state.appConfig.screens[screenId].panel)))),browserSizeMode=jimu_core.E_S.useSelector((state=>state.browserSizeMode)),{pageId}=jimu_core.q_G.useContext(page_context.NQ),headerHeight=jimu_core.E_S.useSelector((state=>{const pageJson=state.appConfig.pages[pageId];if(null==pageJson?void 0:pageJson.header){const headerJson=state.appConfig.header;if(null==headerJson?void 0:headerJson.sticky){const browserSizeMode=state.browserSizeMode,mainSizeMode=state.appConfig.mainSizeMode,height=headerJson.height[browserSizeMode]||headerJson.height[mainSizeMode]||type.q;return parseInt(height,10)}}return 0})),{screens,stretchPanel=!0,triggerType=jimu_core.Lm.Bottom,verticalSpace="0",panelTransitionType=jimu_core.al_.Push}=screenGroup;let transitionType=isPrintPreview?null:null!==(_a=screenGroup.transitionType)&&void 0!==_a?_a:jimu_core.al_.Fade;isPrintPreview||browserSizeMode!==jimu_core.rHp.Small||hasPanel||(transitionType=jimu_core.al_.Cover);const navInfo=jimu_core.E_S.useSelector((state=>{var _a;return null===(_a=state.appRuntimeInfo.screenGroupNavInfos)||void 0===_a?void 0:_a[screenGroupId]})),domRef=jimu_core.q_G.useRef(),sidePanelRef=jimu_core.q_G.useRef(),screenGroupRef=jimu_core.q_G.useRef(),mainPanelRef=jimu_core.q_G.useRef(),[activeIndex,setActiveIndex]=jimu_core.q_G.useState(0),isOverlay=jimu_core.q_G.useMemo((()=>{var _a,_b,_c;if(browserSizeMode!==jimu_core.rHp.Small)return!1;const appConfig=(0,jimu_core.Vp3)().getState().appConfig,screens=null===(_b=null===(_a=appConfig.screenGroups)||void 0===_a?void 0:_a[screenGroupId])||void 0===_b?void 0:_b.screens;if(null==screens?void 0:screens[activeIndex]){return null===(_c=appConfig.screens[screens[activeIndex]].panel)||void 0===_c?void 0:_c.overlay}return!1}),[screenGroupId,activeIndex,browserSizeMode]);jimu_core.q_G.useEffect((()=>{null!=(null==navInfo?void 0:navInfo.activeIndex)&&navInfo.activeIndex!==activeIndex&&setActiveIndex(navInfo.activeIndex)}),[navInfo,activeIndex]);const onInteractionChange=jimu_core.q_G.useCallback(((index,isIntersecting)=>{isIntersecting&&index!==activeIndex?(0,jimu_core.Vp3)().dispatch(jimu_core.tRc.screenGroupNavInfoChanged(screenGroupId,index,!1)):!isIntersecting&&index>0&&(0,jimu_core.Vp3)().dispatch(jimu_core.tRc.screenGroupNavInfoChanged(screenGroupId,index-1,!1))}),[activeIndex,screenGroupId]),sidepanelResizeHandler=jimu_core.q_G.useCallback((()=>{if(!screenGroupRef.current)return;const mainPanelContainer=screenGroupRef.current.children[0],sidePanelContainer=screenGroupRef.current.children[1],count=sidePanelContainer.childElementCount;for(let i=0;i<count;i++){const elem=sidePanelContainer.children[i],screenId=elem.getAttribute("data-screenid"),mainPanelElem=mainPanelContainer.querySelector(`[data-screenid="${screenId}"]`);mainPanelElem&&(mainPanelElem.style.height=isPrintPreview?`${elem.clientHeight}px`:null)}mainPanelContainer.style.height=`${sidePanelContainer.clientHeight}px`}),[isPrintPreview]),debounceResizeHandler=jimu_core.q_G.useMemo((()=>jimu_core.CM0.debounce(sidepanelResizeHandler,200)),[sidepanelResizeHandler]),onSidePanelHeightChange=jimu_core.q_G.useCallback(((index,height)=>{if(!screenGroupRef.current)return;const mainPanelContainer=screenGroupRef.current.children[0],sidePanelContainer=screenGroupRef.current.children[1];if(transitionType!==jimu_core.al_.Fade)if(transitionType!==jimu_core.al_.Cover){if(transitionType===jimu_core.al_.Push){const relatedElement=mainPanelContainer.querySelector(`div.screen-main-panel[data-index="${index}"]`),panelElement=sidePanelContainer.querySelector(`div.screen-side-panel[data-index="${index}"]`);relatedElement.style.height=`${panelElement.clientHeight}px`,mainPanelContainer.style.height=`${sidePanelContainer.clientHeight}px`}}else(0,flow_layout_common_util.Z)(mainPanelContainer,sidePanelContainer,browserSizeMode);else mainPanelContainer.style.height=`${sidePanelContainer.clientHeight}px`}),[browserSizeMode,transitionType]);return screens.length>0?(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)("flow-layout-item",{"print-preview":isPrintPreview,"small-size":browserSizeMode===jimu_core.rHp.Small}),css:screen_group_getStyle(0,isOverlay),"data-layoutitemid":layoutItemId,"data-layoutid":layoutId,ref:domRef},(0,jimu_core.Yac)("div",{className:"screen-group",ref:screenGroupRef},(0,jimu_core.Yac)("div",{className:"main-panels",ref:mainPanelRef},(0,jimu_core.Yac)(common.yl,{rootLayoutId:layoutId,activeIndex,screens,transitionType,layoutEntry:layout_entry,headerHeight,isSmallSize:browserSizeMode===jimu_core.rHp.Small})),(0,jimu_core.Yac)("div",{className:"side-panels",ref:sidePanelRef},screens.map(((screenId,idx)=>(0,jimu_core.Yac)(common.O,{key:screenId,index:idx,isLast:idx===screens.length-1,screenId,refElement:null,layoutEntry:layout_entry,isActive:idx===activeIndex,stretched:stretchPanel,triggerType,verticalSpace,transitionType:panelTransitionType,screenTransitionType:transitionType,onHeightChange:onSidePanelHeightChange,onInteractionChange,isSmallSize:browserSizeMode===jimu_core.rHp.Small,headerHeight}))),(0,jimu_core.Yac)(jimu_core.cQZ,{targetRef:sidePanelRef,handleHeight:!0,onResize:debounceResizeHandler})))):null}try{ScreenGroup.displayName="ScreenGroup",ScreenGroup.__docgenInfo={description:"",displayName:"ScreenGroup",props:{layoutId:{defaultValue:null,description:"",name:"layoutId",required:!0,type:{name:"string"}},layoutItemId:{defaultValue:null,description:"",name:"layoutItemId",required:!0,type:{name:"string"}},draggable:{defaultValue:null,description:"",name:"draggable",required:!1,type:{name:"boolean"}},resizable:{defaultValue:null,description:"",name:"resizable",required:!1,type:{name:"boolean"}},selectable:{defaultValue:null,description:"",name:"selectable",required:!1,type:{name:"boolean"}},forbidContextMenu:{defaultValue:null,description:"",name:"forbidContextMenu",required:!1,type:{name:"boolean"}},forbidToolbar:{defaultValue:null,description:"",name:"forbidToolbar",required:!1,type:{name:"boolean"}},showDefaultTools:{defaultValue:null,description:"",name:"showDefaultTools",required:!1,type:{name:"boolean"}},isInSection:{defaultValue:null,description:"",name:"isInSection",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},trailOrder:{defaultValue:null,description:"",name:"trailOrder",required:!1,type:{name:"number"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},onDoubleClick:{defaultValue:null,description:"",name:"onDoubleClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},forceAspectRatio:{defaultValue:null,description:"",name:"forceAspectRatio",required:!1,type:{name:"boolean"}},aspectRatio:{defaultValue:null,description:"",name:"aspectRatio",required:!1,type:{name:"number"}},resizeObserver:{defaultValue:null,description:"",name:"resizeObserver",required:!1,type:{name:"ResizeObserver"}},autoWidth:{defaultValue:null,description:"",name:"autoWidth",required:!1,type:{name:"boolean"}},autoHeight:{defaultValue:null,description:"",name:"autoHeight",required:!1,type:{name:"boolean"}},itemIndex:{defaultValue:null,description:"",name:"itemIndex",required:!0,type:{name:"number"}},layoutItem:{defaultValue:null,description:"",name:"layoutItem",required:!0,type:{name:"IMLayoutItemJson"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/flow-layout/runtime/screen-group.tsx#ScreenGroup"]={docgenInfo:ScreenGroup.__docgenInfo,name:"ScreenGroup",path:"../jimu-layouts/lib/flow-layout/runtime/screen-group.tsx#ScreenGroup"})}catch(__react_docgen_typescript_loader_error){}class flow_layout_runtime_layout_Layout extends jimu_core.q_G.PureComponent{constructor(props){super(props);const exts=jimu_core.nH3.getInstance().getExtensions(`${jimu_core.vZE.R6.LayoutTransformer}`);if(exts&&exts.length>0){const ext=exts.find((item=>item.layoutType===this.props.layout.type));this.layoutTransform=null==ext?void 0:ext.transformLayout}}_createItem(item,index,layoutSetting){var _a;const{layout}=this.props;return(null==item?void 0:item.isPending)?null:item.type===jimu_core.K6q.ScreenGroup?(0,jimu_core.Yac)(ScreenGroup,{key:`${item.id}_${index}`,itemIndex:index,layoutId:layout.id,layoutItemId:item.id,layoutItem:item}):(null===(_a=item.setting)||void 0===_a?void 0:_a.isFloating)?(0,jimu_core.Yac)(FloatingLayoutItem,{key:item.id,index,gutter:layoutSetting.gutter,layoutId:layout.id,layoutItemId:item.id,layoutItem:item}):(0,jimu_core.Yac)(layout_item,{key:item.id,index,gutter:layoutSetting.gutter,layoutId:layout.id,layoutItemId:item.id,layoutItem:item})}render(){const{layout,className,style,layouts,browserSizeMode}=this.props;if(!layout)return null;let targetLayout=layout;if(layouts[browserSizeMode]!==layout.id&&this.layoutTransform){let fromSizeMode;Object.keys(layouts).some((mode=>layouts[mode]===layout.id&&(fromSizeMode=mode,!0))),targetLayout=this.layoutTransform(layout,fromSizeMode,browserSizeMode)}const content=targetLayout.order||[],layoutSetting=jimu_core.CM0.assign({},flow_layout_default_setting.e,targetLayout.setting),mergedStyle=Object.assign(Object.assign(Object.assign({},style),jimu_ui.styleUtils.toCSSStyle(layoutSetting.style)),{position:"relative"}),outClass=(0,jimu_core.xWm)("layout flow-layout w-100",className);return(0,jimu_core.Yac)("div",{className:outClass,style:mergedStyle,"data-layoutid":layout.id},(0,jimu_core.Yac)(jimu_core.zKZ.Provider,{value:{monitor:!0}},(0,jimu_core.Yac)(jimu_core._kc,{oid:targetLayout.id,"data-layoutid":targetLayout.id,className:"trail-container d-flex flex-column align-items-center",css:jimu_core.AHW`
              width: 100%;
            `},content.map(((layoutItemId,index)=>this._createItem(targetLayout.content[layoutItemId],index,layoutSetting))))))}}const flow_layout_runtime_layout=jimu_core.E_S.connect(utils.mapStateToLayoutProps)(flow_layout_runtime_layout_Layout);try{layout.displayName="layout",layout.__docgenInfo={description:"",displayName:"layout",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"any"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},visible:{defaultValue:null,description:"",name:"visible",required:!1,type:{name:"boolean"}},layouts:{defaultValue:null,description:"",name:"layouts",required:!0,type:{name:"ImmutableObjectMixin<SizeModeLayoutJson> & { readonly [x: string]: string; }"}},isInSection:{defaultValue:null,description:"",name:"isInSection",required:!1,type:{name:"boolean"}},isInWidget:{defaultValue:null,description:"",name:"isInWidget",required:!1,type:{name:"boolean"}},isRepeat:{defaultValue:null,description:"",name:"isRepeat",required:!1,type:{name:"boolean"}},isPageItem:{defaultValue:null,description:"",name:"isPageItem",required:!1,type:{name:"boolean"}},itemDraggable:{defaultValue:null,description:"",name:"itemDraggable",required:!1,type:{name:"boolean"}},itemResizable:{defaultValue:null,description:"",name:"itemResizable",required:!1,type:{name:"boolean"}},itemSelectable:{defaultValue:null,description:"",name:"itemSelectable",required:!1,type:{name:"boolean"}},droppable:{defaultValue:null,description:"",name:"droppable",required:!1,type:{name:"boolean"}},showDefaultTools:{defaultValue:null,description:"",name:"showDefaultTools",required:!1,type:{name:"boolean"}},isItemAccepted:{defaultValue:null,description:"",name:"isItemAccepted",required:!1,type:{name:"(item: LayoutItemConstructorProps, isReplacePlaceholder: boolean) => boolean"}},onItemClick:{defaultValue:null,description:"",name:"onItemClick",required:!1,type:{name:"(e: any, widgetId: string) => void"}},ignoreMinHeight:{defaultValue:null,description:"",name:"ignoreMinHeight",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/flow-layout/runtime/layout.tsx#layout"]={docgenInfo:layout.__docgenInfo,name:"layout",path:"../jimu-layouts/lib/flow-layout/runtime/layout.tsx#layout"})}catch(__react_docgen_typescript_loader_error){}var page_util=__webpack_require__("../jimu-layouts/lib/common/page-util.ts"),controller_panel_util=__webpack_require__("../jimu-layouts/lib/controller-panel/util.ts"),up_double=__webpack_require__("../jimu-icons/svg/outlined/directional/up-double.svg"),up_double_default=__webpack_require__.n(up_double),outlined_editor_close=__webpack_require__("../jimu-icons/svg/outlined/editor/close.svg"),close_default=__webpack_require__.n(outlined_editor_close);const{animated,useSpring}=jimu_core.ozl,panel_style=jimu_core.AHW`
  position: relative;
  display: flex;
  background-color: var(--ref-palette-white);
  box-shadow: 0px 0px 10px 1px rgba(0, 0, 0, 0.2);
  .panel-header {
    > .actions > .action-collapse {
      svg {
        transition: transform 0.3s ease-in-out;
      }
      &.collapsed svg {
        transform: rotate(180deg);
      }
    }
  }
  .panel-content {
    position: relative;
    overflow: hidden;

    .widget-content {
      z-index: 0;
    }

    .widget-mask {
      position: absolute;
      background: transparent;
      left: 0;
      right: 0;
      top: 0;
      bottom: 0;
      z-index: 1;
    }
  }
`;function panel_Panel(props){const{layoutId,layoutItemId,controllerId,minimized,onClose,onToggle}=props,[mounted,setMounted]=jimu_core.q_G.useState(!1),ref=jimu_core.q_G.useRef(),onCloseRef=jimu_core.JLE.useLatest(onClose),onToggleRef=jimu_core.JLE.useLatest(onToggle),translate=jimu_core.JLE.useTranslation(),widgetId=jimu_core.E_S.useSelector((state=>state.appConfig.layouts[layoutId].content[layoutItemId].widgetId)),isOpen=jimu_core.E_S.useSelector((state=>{var _a;const info=null===(_a=state.widgetsRuntimeInfo)||void 0===_a?void 0:_a[widgetId];return(null==info?void 0:info.state)===jimu_core.YGz.Opened})),label=jimu_core.E_S.useSelector((state=>{const widgetJson=state.appConfig.widgets[widgetId];return null==widgetJson?void 0:widgetJson.label}),jimu_core.E_S.shallowEqual),widgetClassLoaded=jimu_core.E_S.useSelector((state=>{var _a;const widgetRuntimeInfo=state.widgetsRuntimeInfo[widgetId];return null!==(_a=null==widgetRuntimeInfo?void 0:widgetRuntimeInfo.isClassLoaded)&&void 0!==_a&&_a})),effect=jimu_core.E_S.useSelector((state=>state.appConfig.controllerPanels[controllerId].effect)),animationObj=jimu_core.q_G.useMemo((()=>{var _a,_b;return(null==effect?void 0:effect.type)&&effect.type!==jimu_core.J6N.None?(0,jimu_core.aTz)(effect.type,{configType:null===(_a=effect.option)||void 0===_a?void 0:_a.configType,direction:null===(_b=effect.option)||void 0===_b?void 0:_b.direction}):null}),[effect]),[effectProps,api]=useSpring((()=>jimu_core._tX),[animationObj]),handleClose=jimu_core.q_G.useCallback((e=>{onCloseRef.current(e,widgetId);const button=document.querySelector(`.widget-controller .avatar-card[data-widgetid='${widgetId}'] button`);if(button)(0,jimu_core.u02)(button);else{const moreButton=document.querySelector(`[data-widgetid='${controllerId}'] .popup-more-button button`);(0,jimu_core.u02)(moreButton)}}),[onCloseRef,widgetId,controllerId]),autoFocus=jimu_core.E_S.useSelector((state=>{var _a;return null===(_a=state.widgetsState[widgetId])||void 0===_a?void 0:_a.autoFocus}));let WidgetClass;(0,jimu_ui.useTrapFocusBySelector)(ref,!0,autoFocus,".first-node",".last-virtual-node",mounted&&isOpen),jimu_core.q_G.useEffect((()=>{isOpen&&!mounted&&(setMounted(!0),jimu_core.SS0.getInstance().loadWidgetClass(widgetId).catch((err=>{console.log(err)})))}),[isOpen,widgetId,mounted]),jimu_core.q_G.useEffect((()=>{isOpen&&null!=animationObj&&api.start(Object.assign(Object.assign({},animationObj.animateProps()),{onRest:()=>{jimu_core.CM0.defer((()=>{ref.current.style.clipPath=null}))}}))}),[api,isOpen,animationObj]),mounted&&widgetClassLoaded&&(WidgetClass=jimu_core.SS0.getInstance().getWidgetClass(widgetId));const handleLastVirtualNodeFocus=(0,controller_panel_util.useHandleLastVirtualNodeFocus)(ref.current,"first-node","last-virtual-node"),actions=jimu_core.q_G.useMemo((()=>[{name:"collapse",className:minimized?"first-node action-collapse collapsed":"first-node action-collapse",label:translate(minimized?"expand":"collapse"),icon:up_double_default(),onClick:onToggleRef.current},{name:"close",className:"action-close",label:translate("close"),icon:close_default(),onClick:handleClose}]),[handleClose,minimized,onToggleRef,translate]);return(0,jimu_core.Yac)(animated.div,{className:(0,jimu_core.xWm)("controller-panel flex-column w-100 h-100",{"d-none":!mounted||!isOpen}),css:panel_style,ref,style:null!=animationObj?effectProps:null},(0,jimu_core.Yac)(jimu_ui.PanelHeader,{level:2,type:"primary",title:label,actions,moveable:!1}),(0,jimu_core.Yac)("div",{className:"panel-content d-flex flex-grow-1"},!widgetClassLoaded&&(0,jimu_core.Yac)(jimu_ui.Loading,{type:jimu_ui.LoadingType.Donut}),WidgetClass&&(0,jimu_core.Yac)("div",{className:"w-100 h-100 widget-content p-1"},(0,jimu_core.Yac)(jimu_core.tHk,null,(0,jimu_core.Yac)(WidgetClass,{widgetId,layoutId,layoutItemId}))),(0,jimu_core.Yac)("button",{className:"sr-only last-virtual-node",onKeyUp:handleLastVirtualNodeFocus})))}try{panel_Panel.displayName="Panel",panel_Panel.__docgenInfo={description:"",displayName:"Panel",props:{controllerId:{defaultValue:null,description:"",name:"controllerId",required:!0,type:{name:"string"}},layoutId:{defaultValue:null,description:"",name:"layoutId",required:!0,type:{name:"string"}},layoutItemId:{defaultValue:null,description:"",name:"layoutItemId",required:!0,type:{name:"string"}},minimized:{defaultValue:null,description:"",name:"minimized",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"(e: any, string: any) => void"}},onToggle:{defaultValue:null,description:"",name:"onToggle",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/controller-panel/runtime/panel.tsx#Panel"]={docgenInfo:panel_Panel.__docgenInfo,name:"Panel",path:"../jimu-layouts/lib/controller-panel/runtime/panel.tsx#Panel"})}catch(__react_docgen_typescript_loader_error){}function ControllerPanel(props){const{controllerId}=props,[minimized,setMinimized]=jimu_core.q_G.useState(!1),innerLayoutId=jimu_core.E_S.useSelector((state=>{const controllerJson=state.appConfig.widgets[controllerId],layoutName=controllerJson.manifest.layouts[0].name,sizeModeLayouts=controllerJson.layouts[layoutName];return sizeModeLayouts[state.browserSizeMode]||sizeModeLayouts[state.appConfig.mainSizeMode]})),items=jimu_core.E_S.useSelector((state=>{var _a;const layout=state.appConfig.layouts[innerLayoutId];if(!layout)return"";const widgetsJson=state.appConfig.widgets,itemIds=Object.keys(null!==(_a=layout.content)&&void 0!==_a?_a:{}).filter((itemId=>{const layoutItem=layout.content[itemId],widgetJson=widgetsJson[null==layoutItem?void 0:layoutItem.widgetId];return null!=(null==layoutItem?void 0:layoutItem.widgetId)&&!layoutItem.isPending&&!(null==widgetJson?void 0:widgetJson.offPanel)}));return itemIds.sort(),itemIds.join(",")})),hasItemOpened=jimu_core.E_S.useSelector((state=>{var _a,_b;const widgetsJson=state.appConfig.widgets,openedWidgets=Object.keys(null!==(_a=state.widgetsRuntimeInfo)&&void 0!==_a?_a:{}).filter((widgetId=>{var _a;return state.widgetsRuntimeInfo[widgetId].state===jimu_core.YGz.Opened&&!(null===(_a=widgetsJson[widgetId])||void 0===_a?void 0:_a.offPanel)})),layout=state.appConfig.layouts[innerLayoutId];return Object.keys(null!==(_b=layout.content)&&void 0!==_b?_b:{}).some((itemId=>{const layoutItem=layout.content[itemId];return null!=(null==layoutItem?void 0:layoutItem.widgetId)&&!layoutItem.isPending&&openedWidgets.includes(layoutItem.widgetId)}))})),itemIdList=jimu_core.q_G.useMemo((()=>items.split(",").filter((id=>""!==id))),[items]),panelJson=jimu_core.E_S.useSelector((state=>state.appConfig.controllerPanels[controllerId])),handleClose=jimu_core.q_G.useCallback(((e,widgetId)=>{e.stopPropagation(),(0,jimu_core.Vp3)().dispatch(jimu_core.tRc.closeWidget(widgetId))}),[]),toggleMinimized=jimu_core.q_G.useCallback((()=>{setMinimized(!minimized)}),[minimized]),style=jimu_core.q_G.useMemo((()=>jimu_core.AHW`
    ${(0,controller_panel_util.convertToStyle)(panelJson)}
    height: ${minimized?"36px":null==panelJson?void 0:panelJson.height};
    transition: height 0.3s ease-in-out;
    transform: ${(0,controller_panel_util.panelTransformStyle)(panelJson)}
  `),[panelJson,minimized]);return 0===itemIdList.length?null:(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)("panel-container",{"d-none":!hasItemOpened}),css:style},(0,jimu_core.Yac)(jimu_core.q_G.Fragment,null,itemIdList.map((itemId=>(0,jimu_core.Yac)(panel_Panel,{key:itemId,controllerId,layoutId:innerLayoutId,layoutItemId:itemId,minimized,onToggle:toggleMinimized,onClose:handleClose})))))}try{ControllerPanel.displayName="ControllerPanel",ControllerPanel.__docgenInfo={description:"",displayName:"ControllerPanel",props:{controllerId:{defaultValue:null,description:"",name:"controllerId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/controller-panel/runtime/layout.tsx#ControllerPanel"]={docgenInfo:ControllerPanel.__docgenInfo,name:"ControllerPanel",path:"../jimu-layouts/lib/controller-panel/runtime/layout.tsx#ControllerPanel"})}catch(__react_docgen_typescript_loader_error){}function ControllerPanelGroup(props){const{pageId}=props,controllerInfo=jimu_core.E_S.useSelector((state=>(0,controller_panel_util.findPageRelatedControllerIds)(state.appConfig,pageId,state.browserSizeMode))),controllerIds=jimu_core.q_G.useMemo((()=>controllerInfo.split(",").filter((id=>""!==id))),[controllerInfo]);return(0,jimu_core.Yac)(jimu_core.q_G.Fragment,null,controllerIds.map((id=>(0,jimu_core.Yac)(ControllerPanel,{key:id,controllerId:id}))))}try{ControllerPanelGroup.displayName="ControllerPanelGroup",ControllerPanelGroup.__docgenInfo={description:"",displayName:"ControllerPanelGroup",props:{pageId:{defaultValue:null,description:"",name:"pageId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/controller-panel/runtime/group.tsx#ControllerPanelGroup"]={docgenInfo:ControllerPanelGroup.__docgenInfo,name:"ControllerPanelGroup",path:"../jimu-layouts/lib/controller-panel/runtime/group.tsx#ControllerPanelGroup"})}catch(__react_docgen_typescript_loader_error){}function PageBody(props){const{pageJson,visible,pageContext,browserSizeMode,isPrintPreview,headerFooterHeight}=props,[playId,setPlayId]=jimu_core.q_G.useState(),layout=pageJson.layout,pageHeight=jimu_core.q_G.useMemo((()=>(0,page_util.IG)(pageJson,headerFooterHeight)),[headerFooterHeight]),oneByOneEffect=!isPrintPreview&&pageJson.oneByOneEffect&&pageJson.oneByOneEffect.type!==jimu_core.J6N.None?pageJson.oneByOneEffect:null,revert=oneByOneEffect?!visible:null;let maxWidth;jimu_core.q_G.useEffect((()=>{oneByOneEffect&&setPlayId((0,jimu_core.RqM)())}),[visible,oneByOneEffect]),jimu_core.q_G.useEffect((()=>{var _a;if(visible&&layout){const appConfig=(0,jimu_core.Vp3)().getState().appConfig,layoutId=layout[appConfig.mainSizeMode],layoutType=null===(_a=appConfig.layouts[layoutId])||void 0===_a?void 0:_a.type,htmlNode=document.getElementsByTagName("html")[0];layoutType===jimu_core.p5K.FlowLayout?htmlNode.classList.add("scrollable"):htmlNode.classList.remove("scrollable")}}),[visible,layout]),pageJson.mode!==jimu_core.bH$.FitWindow&&pageJson.maxWidth>0&&(maxWidth=pageJson.maxWidth);const pageContextValue=jimu_core.q_G.useMemo((()=>{const state=(0,jimu_core.Vp3)().getState();let rootLayoutId;return pageJson.layout&&(rootLayoutId=search.findLayoutId(pageJson.layout,browserSizeMode,state.appConfig.mainSizeMode)),Object.assign(Object.assign({},pageContext),{maxWidth,viewOnly:!0,rootLayoutId,pageId:pageJson.id})}),[pageContext,maxWidth,pageJson.id,pageJson.layout,browserSizeMode]),animationContextValue=jimu_core.q_G.useMemo((()=>({setting:oneByOneEffect,revert,playId:oneByOneEffect?playId:null,oid:pageContextValue.rootLayoutId,onContextAnimationEnd:()=>{setPlayId(-1)}})),[oneByOneEffect,revert,playId,pageContextValue.rootLayoutId]);if(layout)return(0,jimu_core.Yac)(page_context.NQ.Provider,{key:pageJson.id,value:pageContextValue},(0,jimu_core.Yac)(page_context.nj.Provider,{value:visible},(0,jimu_core.Yac)("div",{id:pageJson.id,"data-pageid":pageJson.id,className:"page",css:jimu_core.AHW`
            display: ${visible?"flex":"none"};
            background-color: ${pageJson.bodyBackgroundColor||"transparent"};
            height: ${pageHeight};
            flex: 1 0 auto;
            z-index: 1;
          `},(0,jimu_core.Yac)(jimu_core.e8P.Provider,{value:animationContextValue},(0,jimu_core.Yac)(layout_entry,{layouts:layout,className:"w-100 flex-grow-1",css:jimu_core.AHW`
                margin: 0 auto;
                background-color: transparent;
                z-index: 0;
              `})),browserSizeMode!==jimu_core.rHp.Small&&(0,jimu_core.Yac)(ControllerPanelGroup,{pageId:pageJson.id}))))}try{PageBody.displayName="PageBody",PageBody.__docgenInfo={description:"",displayName:"PageBody",props:{pageJson:{defaultValue:null,description:"",name:"pageJson",required:!0,type:{name:"IMPageJson"}},pageContext:{defaultValue:null,description:"",name:"pageContext",required:!0,type:{name:"PageContextProps"}},visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},browserSizeMode:{defaultValue:null,description:"",name:"browserSizeMode",required:!0,type:{name:"enum",value:[{value:'"SMALL"'},{value:'"MEDIUM"'},{value:'"LARGE"'}]}},isPrintPreview:{defaultValue:null,description:"",name:"isPrintPreview",required:!0,type:{name:"boolean"}},headerFooterHeight:{defaultValue:null,description:"",name:"headerFooterHeight",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/runtime/page-body.tsx#PageBody"]={docgenInfo:PageBody.__docgenInfo,name:"PageBody",path:"../jimu-layouts/lib/runtime/page-body.tsx#PageBody"})}catch(__react_docgen_typescript_loader_error){}function PageHeader(props){var _a,_b,_c,_d;const pageHeaderConRef=jimu_core.q_G.useRef(null),{headerJson,browserSizeMode,theme,mainSizeMode,pageContext,onHeightChange}=props,height=headerJson.height[browserSizeMode]||headerJson.height[mainSizeMode]||50,layout=headerJson.layout;let backgroundIMage;headerJson.backgroundIMage&&("string"==typeof headerJson.backgroundIMage?backgroundIMage=headerJson.backgroundIMage:"object"==typeof headerJson.backgroundIMage&&(backgroundIMage=headerJson.backgroundIMage.url));const headerStyle=jimu_core.q_G.useMemo((()=>{var _a,_b,_c;return jimu_core.AHW`
      display: flex;
      position: ${headerJson.sticky?"sticky":"relative"};
      z-index: ${headerJson.sticky?2:"0"};
      top: 0;
      width: 100%;
      min-height: ${Math.round(parseFloat(height))}px;
      height: auto;
      overflow: hidden;
      background-color: ${headerJson.backgroundColor||(null===(_a=theme.comp)||void 0===_a?void 0:_a.Header.root.vars.bg)||"transparent"};
      background-image: ${backgroundIMage};
      background-position: ${headerJson.backgroundPosition};
      color: ${null===(_c=null===(_b=null==theme?void 0:theme.comp)||void 0===_b?void 0:_b.Header.root.vars)||void 0===_c?void 0:_c.color};
      flex: 0 0 auto;
    `}),[height,headerJson.sticky,headerJson.backgroundColor,backgroundIMage,headerJson.backgroundPosition,null===(_b=null===(_a=null==theme?void 0:theme.comp)||void 0===_a?void 0:_a.Header.root.vars)||void 0===_b?void 0:_b.bg,null===(_d=null===(_c=null==theme?void 0:theme.comp)||void 0===_c?void 0:_c.Header.root.vars)||void 0===_d?void 0:_d.color]),pageContextValue=jimu_core.q_G.useMemo((()=>Object.assign(Object.assign({},pageContext),{viewOnly:!0})),[pageContext]),handleSizeChange=jimu_core.q_G.useCallback((({width,height})=>{onHeightChange(height)}),[onHeightChange]);return(0,jimu_core.Yac)(page_context.NQ.Provider,{value:pageContextValue},(0,jimu_core.Yac)(page_context.nj.Provider,{value:!0},(0,jimu_core.Yac)("div",{className:"header",css:headerStyle,ref:pageHeaderConRef},(0,jimu_core.Yac)(layout_entry,{layouts:layout,className:"w-100 flex-grow-1"}),(0,jimu_core.Yac)(jimu_core.cQZ,{targetRef:pageHeaderConRef,handleHeight:!0,handleWidth:!1,onResize:handleSizeChange}))))}try{PageHeader.displayName="PageHeader",PageHeader.__docgenInfo={description:"",displayName:"PageHeader",props:{headerJson:{defaultValue:null,description:"",name:"headerJson",required:!0,type:{name:"IMHeaderJson"}},pageContext:{defaultValue:null,description:"",name:"pageContext",required:!0,type:{name:"PageContextProps"}},browserSizeMode:{defaultValue:null,description:"",name:"browserSizeMode",required:!0,type:{name:"enum",value:[{value:'"SMALL"'},{value:'"MEDIUM"'},{value:'"LARGE"'}]}},mainSizeMode:{defaultValue:null,description:"",name:"mainSizeMode",required:!0,type:{name:"enum",value:[{value:'"SMALL"'},{value:'"MEDIUM"'},{value:'"LARGE"'}]}},theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:"IMThemeVariables"}},onHeightChange:{defaultValue:null,description:"",name:"onHeightChange",required:!0,type:{name:"(height: number) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/runtime/page-header.tsx#PageHeader"]={docgenInfo:PageHeader.__docgenInfo,name:"PageHeader",path:"../jimu-layouts/lib/runtime/page-header.tsx#PageHeader"})}catch(__react_docgen_typescript_loader_error){}function PageFooter(props){var _a,_b,_c,_d;const{footerJson,browserSizeMode,theme,mainSizeMode,pageContext,onHeightChange}=props,footerConRef=jimu_core.q_G.useRef(),height=footerJson.height[browserSizeMode]||footerJson.height[mainSizeMode]||50,layout=footerJson.layout;let backgroundIMage;footerJson.backgroundIMage&&("string"==typeof footerJson.backgroundIMage?backgroundIMage=footerJson.backgroundIMage:"object"==typeof footerJson.backgroundIMage&&(backgroundIMage=footerJson.backgroundIMage.url));const footerStyle=jimu_core.q_G.useMemo((()=>{var _a,_b,_c;return jimu_core.AHW`
      display: flex;
      width: 100%;
      min-height: ${Math.round(parseFloat(height))}px;
      height: auto;
      overflow: hidden;
      background-color: ${footerJson.backgroundColor||(null===(_a=theme.comp)||void 0===_a?void 0:_a.Footer.root.vars.bg)||"transparent"};
      background-image: ${backgroundIMage};
      background-position: ${footerJson.backgroundPosition};
      color: ${null===(_c=null===(_b=null==theme?void 0:theme.comp)||void 0===_b?void 0:_b.Footer.root.vars)||void 0===_c?void 0:_c.color};
      z-index: 0;
    `}),[height,footerJson.backgroundColor,backgroundIMage,footerJson.backgroundPosition,null===(_b=null===(_a=null==theme?void 0:theme.comp)||void 0===_a?void 0:_a.Footer.root.vars)||void 0===_b?void 0:_b.bg,null===(_d=null===(_c=null==theme?void 0:theme.comp)||void 0===_c?void 0:_c.Footer.root.vars)||void 0===_d?void 0:_d.color]),pageContextValue=jimu_core.q_G.useMemo((()=>Object.assign(Object.assign({},pageContext),{viewOnly:!0})),[pageContext]),handleSizeChange=jimu_core.q_G.useCallback((({width,height})=>{onHeightChange(height)}),[onHeightChange]);return(0,jimu_core.Yac)(page_context.NQ.Provider,{value:pageContextValue},(0,jimu_core.Yac)(page_context.nj.Provider,{value:!0},(0,jimu_core.Yac)("div",{className:"footer",css:footerStyle,ref:footerConRef},(0,jimu_core.Yac)(layout_entry,{layouts:layout,className:"w-100 flex-grow-1"}),(0,jimu_core.Yac)(jimu_core.cQZ,{targetRef:footerConRef,handleHeight:!0,handleWidth:!1,onResize:handleSizeChange}))))}try{PageFooter.displayName="PageFooter",PageFooter.__docgenInfo={description:"",displayName:"PageFooter",props:{footerJson:{defaultValue:null,description:"",name:"footerJson",required:!0,type:{name:"IMHeaderJson"}},pageContext:{defaultValue:null,description:"",name:"pageContext",required:!0,type:{name:"PageContextProps"}},browserSizeMode:{defaultValue:null,description:"",name:"browserSizeMode",required:!0,type:{name:"enum",value:[{value:'"SMALL"'},{value:'"MEDIUM"'},{value:'"LARGE"'}]}},mainSizeMode:{defaultValue:null,description:"",name:"mainSizeMode",required:!0,type:{name:"enum",value:[{value:'"SMALL"'},{value:'"MEDIUM"'},{value:'"LARGE"'}]}},theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:"IMThemeVariables"}},onHeightChange:{defaultValue:null,description:"",name:"onHeightChange",required:!0,type:{name:"(height: number) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/runtime/page-footer.tsx#PageFooter"]={docgenInfo:PageFooter.__docgenInfo,name:"PageFooter",path:"../jimu-layouts/lib/runtime/page-footer.tsx#PageFooter"})}catch(__react_docgen_typescript_loader_error){}var jimu_theme=__webpack_require__("../jimu-theme/index.ts");const print_preview_tool_style=jimu_core.AHW`
  display: flex;
  height: 100%;
  width: 100%;
  background: var(--ref-palette-neutral-1100);

  .jimu-btn {
    padding-left: 2rem;
    padding-right: 2rem;
  }

  .label {
    white-space: nowrap;
  }

  @media print {
    & {
      display: none;
    }
  }
`;function PrintPreviewTool(){const intl=jimu_core.Ruy.getIntl(),btnRef=jimu_core.q_G.useRef();jimu_core.q_G.useEffect((()=>{(0,jimu_core.u02)(btnRef.current)}),[]);const formatMessage=jimu_core.q_G.useCallback((id=>intl.formatMessage({id})),[intl]),handleClose=jimu_core.JLE.useEventCallback((()=>{jimu_core.e7y.changeQueryObject({print_preview:null}),(0,jimu_core.Vp3)().dispatch(jimu_core.tRc.quitPrintPreview())})),invokeBrowserPrint=jimu_core.JLE.useEventCallback((()=>{window.print()}));return(0,jimu_core.Yac)("div",{className:"print-preview-tool shadow-3",css:print_preview_tool_style},(0,jimu_core.Yac)("div",{className:"d-flex justify-content-center align-items-center flex-grow-1"},(0,jimu_core.Yac)(jimu_ui.Button,{ref:btnRef,"aria-label":formatMessage("printCurrentPage"),type:"primary",onClick:invokeBrowserPrint},formatMessage("printCurrentPage"))),(0,jimu_core.Yac)(jimu_ui.Button,{className:"ml-auto",icon:!0,type:"tertiary","aria-label":formatMessage("close"),onClick:handleClose},(0,jimu_core.Yac)(editor_close.r,{color:"var(--ref-palette-white)"})))}registerLayoutViewer(jimu_core.p5K.FixedLayout,runtime_layout),registerLayoutViewer(jimu_core.p5K.FlowLayout,flow_layout_runtime_layout),registerLayoutViewer(jimu_core.p5K.GridLayout,grid_layout_runtime_layout),registerLayoutViewer(jimu_core.p5K.ColumnLayout,column_layout_runtime_layout),registerLayoutViewer(jimu_core.p5K.AccordionLayout,accordion_layout_runtime_layout),registerLayoutViewer(jimu_core.p5K.FlexRowLayout,flex_row_layout_runtime_layout);class PageRenderer extends jimu_core.q_G.PureComponent{constructor(props){super(props),this.updateHeaderHeight=height=>{this.setState({headerHeight:height})},this.updateFooterHeight=height=>{this.setState({footerHeight:height})},this.isMac=()=>{var _a,_b;return"macOS"===(null===(_b=null===(_a=window.jimuUA)||void 0===_a?void 0:_a.os)||void 0===_b?void 0:_b.name)},this.handlePrintEvent=e=>{(0,jimu_core.Vp3)().dispatch(jimu_core.tRc.activePrintPreview()),jimu_core.e7y.changeQueryObject({print_preview:String(!0)}),e.cancelBubble=!0,e.preventDefault(),e.stopImmediatePropagation()},this.state={headerHeight:0,footerHeight:0},jimu_core.nH3.getInstance().registerExtension({epName:jimu_core.vZE.R6.LayoutTransformer,extension:new layout_transform.I}),jimu_core.nH3.getInstance().registerExtension({epName:jimu_core.vZE.R6.LayoutTransformer,extension:new row_layout_layout_transform.kF}),jimu_core.nH3.getInstance().registerExtension({epName:jimu_core.vZE.R6.LayoutTransformer,extension:new grid_layout_layout_transform.K}),this.pageContext={theme:this.props.theme},window.jimuConfig.isBuilder||(this.isMac()?this.keyBindings={"command+keyp":this.handlePrintEvent}:this.keyBindings={"ctrl+keyp":this.handlePrintEvent})}componentDidUpdate(prevProps){if(getVisiblePageId(prevProps.pageStatus)!==getVisiblePageId(this.props.pageStatus)){document.getElementsByTagName("html")[0].scrollTop=0}}render(){const{pageStatus,pages,theme,isPrintPreview,headerVisible,footerVisible}=this.props,visiblePageId=getVisiblePageId(pageStatus);if(!visiblePageId||!(null==pages?void 0:pages[visiblePageId]))return null;let width="100%";const pageJson=pages[visiblePageId]||{};pageJson&&!isNaN(+pageJson.width)&&(width=+pageJson.width+"px");const mergedStyle=jimu_core.AHW`
      width: ${width};
      margin: 0 auto;
      min-height: 100%;
      overflow: auto;
      position: relative;
      z-index: 0;
      height: 100%;
      background-color: ${pageJson&&pageJson.backgroundColor};

      html.scrollable & {
        height: auto;
        overflow: unset;
        min-height: 100vh;
      }
    `;return(0,jimu_core.Yac)("div",{className:"page-renderer d-flex flex-column",css:mergedStyle,ref:el=>{this.pageRef=el},"data-testid":"pageRenderer"},isPrintPreview&&(0,jimu_core.Yac)(jimu_ui.Modal,{isOpen:!0,css:jimu_core.AHW`
            max-width: 100% !important;
            margin: 0 !important;

            .modal-body.print-preview-content {
              height: 64px;
              position: fixed;
              top: 0;
              left: 0;
              right: 0;
              padding: 0;
            }
          `,backdrop:!1},(0,jimu_core.Yac)(jimu_ui.ModalBody,{className:"print-preview-content"},(0,jimu_core.Yac)(PrintPreviewTool,null))),this.renderDialog(),headerVisible&&this.renderHeader(),Object.keys(pageStatus).map((pId=>this.renderPageBody(pId,theme))),footerVisible&&this.renderFooter(),(0,jimu_core.Yac)(jimu_core.s3S,{bindings:this.keyBindings}))}renderHeader(){if(!this.props.header)return null;const{header,browserSizeMode,theme,mainSizeMode}=this.props;return(0,jimu_core.Yac)(PageHeader,{headerJson:header,pageContext:this.pageContext,browserSizeMode,mainSizeMode,theme,onHeightChange:this.updateHeaderHeight})}renderFooter(){if(!this.props.footer)return null;const{footer,browserSizeMode,mainSizeMode,theme}=this.props;return(0,jimu_core.Yac)(PageFooter,{footerJson:footer,pageContext:this.pageContext,browserSizeMode,mainSizeMode,theme,onHeightChange:this.updateFooterHeight})}renderPageBody(renderedPageId,theme){const{pageStatus,pages,isPrintPreview}=this.props,pageJson=pages[renderedPageId];if(!pageJson)return;const visible=!!pageStatus[renderedPageId];return(0,jimu_core.Yac)(PageBody,{key:pageJson.id,pageJson,pageContext:this.pageContext,browserSizeMode:this.props.browserSizeMode,visible,isPrintPreview,headerFooterHeight:this.state.headerHeight+this.state.footerHeight})}renderDialog(){const{dialogId,urlDialogJson,splashDialogJson,isSplashClosed,isPageDlgClosed,pageDialogJson,pageDialogId}=this.props;return(0,jimu_core.Yac)(jimu_core.q_G.Fragment,null,urlDialogJson&&(0,jimu_core.Yac)(page_context.NQ.Provider,{value:Object.assign(Object.assign({},this.pageContext),{dialogId,viewOnly:!0})},(0,jimu_core.Yac)(jimu_core.W2q,{dialogJson:urlDialogJson,runtime:!0})),!isPageDlgClosed&&pageDialogJson&&(null==urlDialogJson?void 0:urlDialogJson.id)!==pageDialogJson.id&&(0,jimu_core.Yac)(page_context.NQ.Provider,{value:Object.assign(Object.assign({},this.pageContext),{dialogId:pageDialogId,viewOnly:!0})},(0,jimu_core.Yac)(jimu_core.W2q,{dialogJson:pageDialogJson,runtime:!0,isOpenByPage:!0})),!isSplashClosed&&splashDialogJson&&(null==urlDialogJson?void 0:urlDialogJson.id)!==splashDialogJson.id&&(0,jimu_core.Yac)(page_context.NQ.Provider,{value:Object.assign(Object.assign({},this.pageContext),{dialogId:splashDialogJson.id,viewOnly:!0})},(0,jimu_core.Yac)(jimu_core.W2q,{dialogJson:splashDialogJson,runtime:!0})))}}PageRenderer.displayName="RuntimePageRenderer";const page_renderer_mapStateToProps=(0,jimu_core.Mz0)([state=>state.appConfig.pages,state=>state.appConfig.dialogs,state=>state.appConfig.header,state=>state.appConfig.footer,state=>state.browserSizeMode,state=>state.appConfig.mainSizeMode,state=>{var _a;const realState=window.jimuConfig.isBuilder?state.appStateInBuilder:state;return null===(_a=null==realState?void 0:realState.appRuntimeInfo)||void 0===_a?void 0:_a.dialogInfos},state=>{var _a;const realState=window.jimuConfig.isBuilder?state.appStateInBuilder:state;return null===(_a=null==realState?void 0:realState.appRuntimeInfo)||void 0===_a?void 0:_a.currentPageId},state=>{var _a,_b,_c;const realState=window.jimuConfig.isBuilder?state.appStateInBuilder:state,currentPageId=null===(_a=null==realState?void 0:realState.appRuntimeInfo)||void 0===_a?void 0:_a.currentPageId;return null===(_c=null===(_b=null==realState?void 0:realState.appConfig)||void 0===_b?void 0:_b.pages[currentPageId])||void 0===_c?void 0:_c.autoOpenDialogId},state=>{var _a,_b;return null!==(_b=null===(_a=state.appRuntimeInfo)||void 0===_a?void 0:_a.isPrintPreview)&&void 0!==_b&&_b},(_,ownProps)=>getVisiblePageId(ownProps.pageStatus),(_,ownProps)=>ownProps.dialogId],((pages,dialogs,header,footer,browserSizeMode,mainSizeMode,dialogInfos,currentPageId,pageDlgId,isPrintPreview,pageId,dialogId)=>{var _a,_b;if(!pageId||!pages[pageId])return{};const splashDlgJson=dialogs[Object.keys(dialogs).find((dlgId=>dialogs[dlgId].isSplash))];return{pages,header,headerVisible:!!pages[pageId].header,footer,footerVisible:!!pages[pageId].footer,browserSizeMode,mainSizeMode,splashDialogJson:splashDlgJson,isSplashClosed:null===(_a=null==dialogInfos?void 0:dialogInfos[null==splashDlgJson?void 0:splashDlgJson.id])||void 0===_a?void 0:_a.isClosed,pageDialogId:pageDlgId,pageDialogJson:dialogs[pageDlgId],isPageDlgClosed:null===(_b=null==dialogInfos?void 0:dialogInfos[currentPageId+"-"+pageDlgId])||void 0===_b?void 0:_b.isClosed,urlDialogJson:dialogs[dialogId],isPrintPreview}}));function getVisiblePageId(pageStatus){return Object.keys(pageStatus).find((pid=>pageStatus[pid]))}const page_renderer=jimu_core.E_S.connect(page_renderer_mapStateToProps)((0,jimu_theme.SL)(PageRenderer));try{pagerenderer.displayName="pagerenderer",pagerenderer.__docgenInfo={description:"",displayName:"pagerenderer",props:{dialogId:{defaultValue:null,description:"",name:"dialogId",required:!1,type:{name:"string"}},pageStatus:{defaultValue:null,description:"store pages that have been rendered\n\nOnly one page will be visible, all other pages will be hidden",name:"pageStatus",required:!0,type:{name:"ImmutableObject<{ [pageId: string]: boolean; }>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/runtime/page-renderer.tsx#pagerenderer"]={docgenInfo:pagerenderer.__docgenInfo,name:"pagerenderer",path:"../jimu-layouts/lib/runtime/page-renderer.tsx#pagerenderer"})}catch(__react_docgen_typescript_loader_error){}var layout_runtime_awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};function init(){return layout_runtime_awaiter(this,void 0,void 0,(function*(){return yield Promise.all([loadMessage()])}))}try{findLayoutBuilder.displayName="findLayoutBuilder",findLayoutBuilder.__docgenInfo={description:"",displayName:"findLayoutBuilder",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/layout-runtime.tsx#findLayoutBuilder"]={docgenInfo:findLayoutBuilder.__docgenInfo,name:"findLayoutBuilder",path:"../jimu-layouts/layout-runtime.tsx#findLayoutBuilder"})}catch(__react_docgen_typescript_loader_error){}try{findLayoutViewer.displayName="findLayoutViewer",findLayoutViewer.__docgenInfo={description:"",displayName:"findLayoutViewer",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/layout-runtime.tsx#findLayoutViewer"]={docgenInfo:findLayoutViewer.__docgenInfo,name:"findLayoutViewer",path:"../jimu-layouts/layout-runtime.tsx#findLayoutViewer"})}catch(__react_docgen_typescript_loader_error){}try{SectionRenderer.displayName="SectionRenderer",SectionRenderer.__docgenInfo={description:"",displayName:"SectionRenderer",props:{layoutId:{defaultValue:null,description:"",name:"layoutId",required:!0,type:{name:"string"}},layoutItemId:{defaultValue:null,description:"",name:"layoutItemId",required:!0,type:{name:"string"}},draggable:{defaultValue:null,description:"",name:"draggable",required:!1,type:{name:"boolean"}},resizable:{defaultValue:null,description:"",name:"resizable",required:!1,type:{name:"boolean"}},selectable:{defaultValue:null,description:"",name:"selectable",required:!1,type:{name:"boolean"}},forbidContextMenu:{defaultValue:null,description:"",name:"forbidContextMenu",required:!1,type:{name:"boolean"}},forbidToolbar:{defaultValue:null,description:"",name:"forbidToolbar",required:!1,type:{name:"boolean"}},showDefaultTools:{defaultValue:null,description:"",name:"showDefaultTools",required:!1,type:{name:"boolean"}},isInSection:{defaultValue:null,description:"",name:"isInSection",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},trailOrder:{defaultValue:null,description:"",name:"trailOrder",required:!1,type:{name:"number"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},onDoubleClick:{defaultValue:null,description:"",name:"onDoubleClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},forceAspectRatio:{defaultValue:null,description:"",name:"forceAspectRatio",required:!1,type:{name:"boolean"}},aspectRatio:{defaultValue:null,description:"",name:"aspectRatio",required:!1,type:{name:"number"}},resizeObserver:{defaultValue:null,description:"",name:"resizeObserver",required:!1,type:{name:"ResizeObserver"}},autoWidth:{defaultValue:null,description:"",name:"autoWidth",required:!1,type:{name:"boolean"}},autoHeight:{defaultValue:null,description:"",name:"autoHeight",required:!1,type:{name:"boolean"}},layoutItem:{defaultValue:null,description:"",name:"layoutItem",required:!0,type:{name:"IMLayoutItemJson"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"boolean"}},autoScroll:{defaultValue:null,description:"",name:"autoScroll",required:!1,type:{name:"boolean"}},animationPreview:{defaultValue:null,description:"",name:"animationPreview",required:!1,type:{name:"boolean"}},hoverPreview:{defaultValue:null,description:"",name:"hoverPreview",required:!1,type:{name:"boolean"}},playMode:{defaultValue:null,description:"",name:"playMode",required:!1,type:{name:"enum",value:[{value:'"AS_ONE"'},{value:'"ONE_BY_ONE"'}]}},previewId:{defaultValue:null,description:"",name:"previewId",required:!1,type:{name:"number"}},watchViewportVisibility:{defaultValue:null,description:"",name:"watchViewportVisibility",required:!1,type:{name:"boolean"}},sectionId:{defaultValue:null,description:"",name:"sectionId",required:!0,type:{name:"string"}},views:{defaultValue:null,description:"",name:"views",required:!0,type:{name:"ImmutableArray<string>"}},activeView:{defaultValue:null,description:"",name:"activeView",required:!1,type:{name:"IMViewJson"}},rotate:{defaultValue:null,description:"",name:"rotate",required:!1,type:{name:"number"}},sectionStyle:{defaultValue:null,description:"",name:"sectionStyle",required:!0,type:{name:"any"}},navInfo:{defaultValue:null,description:"",name:"navInfo",required:!0,type:{name:"IMSectionNavInfo"}},transition:{defaultValue:null,description:"",name:"transition",required:!1,type:{name:"{ type: string; direction?: string; }"}},autoPlay:{defaultValue:null,description:"",name:"autoPlay",required:!1,type:{name:"boolean"}},interval:{defaultValue:null,description:"",name:"interval",required:!1,type:{name:"number"}},loop:{defaultValue:null,description:"",name:"loop",required:!1,type:{name:"boolean"}},focusable:{defaultValue:null,description:"",name:"focusable",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/layout-runtime.tsx#SectionRenderer"]={docgenInfo:SectionRenderer.__docgenInfo,name:"SectionRenderer",path:"../jimu-layouts/layout-runtime.tsx#SectionRenderer"})}catch(__react_docgen_typescript_loader_error){}try{layoutruntime.displayName="layoutruntime",layoutruntime.__docgenInfo={description:"",displayName:"layoutruntime",props:{layoutId:{defaultValue:null,description:"",name:"layoutId",required:!0,type:{name:"string"}},layoutItemId:{defaultValue:null,description:"",name:"layoutItemId",required:!0,type:{name:"string"}},draggable:{defaultValue:null,description:"",name:"draggable",required:!1,type:{name:"boolean"}},resizable:{defaultValue:null,description:"",name:"resizable",required:!1,type:{name:"boolean"}},selectable:{defaultValue:null,description:"",name:"selectable",required:!1,type:{name:"boolean"}},forbidContextMenu:{defaultValue:null,description:"",name:"forbidContextMenu",required:!1,type:{name:"boolean"}},forbidToolbar:{defaultValue:null,description:"",name:"forbidToolbar",required:!1,type:{name:"boolean"}},showDefaultTools:{defaultValue:null,description:"",name:"showDefaultTools",required:!1,type:{name:"boolean"}},isInSection:{defaultValue:null,description:"",name:"isInSection",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},trailOrder:{defaultValue:null,description:"",name:"trailOrder",required:!1,type:{name:"number"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},onDoubleClick:{defaultValue:null,description:"",name:"onDoubleClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},forceAspectRatio:{defaultValue:null,description:"",name:"forceAspectRatio",required:!1,type:{name:"boolean"}},aspectRatio:{defaultValue:null,description:"",name:"aspectRatio",required:!1,type:{name:"number"}},resizeObserver:{defaultValue:null,description:"",name:"resizeObserver",required:!1,type:{name:"ResizeObserver"}},autoWidth:{defaultValue:null,description:"",name:"autoWidth",required:!1,type:{name:"boolean"}},autoHeight:{defaultValue:null,description:"",name:"autoHeight",required:!1,type:{name:"boolean"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},delay:{defaultValue:null,description:"",name:"delay",required:!1,type:{name:"number"}},isLastChild:{defaultValue:null,description:"",name:"isLastChild",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/layout-runtime.tsx#layoutruntime"]={docgenInfo:layoutruntime.__docgenInfo,name:"layoutruntime",path:"../jimu-layouts/layout-runtime.tsx#layoutruntime"})}catch(__react_docgen_typescript_loader_error){}try{Context.displayName="Context",Context.__docgenInfo={description:"Context lets components pass information deep down without explicitly\npassing props.\n\nCreated from {@link createContext}",displayName:"Context",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/layout-runtime.tsx#Context"]={docgenInfo:Context.__docgenInfo,name:"Context",path:"../jimu-layouts/layout-runtime.tsx#Context"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-layouts/lib/accordion-layout/common/item-title.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{E:()=>ItemTitle});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),jimu_ui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-ui/index.tsx"),jimu_icons_svg_outlined_brand_widget_section_svg__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../jimu-icons/svg/outlined/brand/widget-section.svg"),jimu_icons_svg_outlined_brand_widget_section_svg__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(jimu_icons_svg_outlined_brand_widget_section_svg__WEBPACK_IMPORTED_MODULE_2__);function ItemTitle(props){var _a,_b;const{layoutId,layoutItemId}=props,label=jimu_core__WEBPACK_IMPORTED_MODULE_0__.E_S.useSelector((state=>{var _a,_b;const layoutItem=state.appConfig.layouts[layoutId].content[layoutItemId];if(layoutItem.type===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget){const widgetId=layoutItem.widgetId,widgetJson=state.appConfig.widgets[widgetId];return null!==(_a=null==widgetJson?void 0:widgetJson.label)&&void 0!==_a?_a:""}const sectionId=layoutItem.sectionId,sectionJson=state.appConfig.sections[sectionId];return null!==(_b=null==sectionJson?void 0:sectionJson.label)&&void 0!==_b?_b:""})),icon=jimu_core__WEBPACK_IMPORTED_MODULE_0__.E_S.useSelector((state=>{var _a,_b,_c,_d;const layoutItem=state.appConfig.layouts[layoutId].content[layoutItemId];if(layoutItem.type===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget){const widgetId=layoutItem.widgetId,widgetJson=state.appConfig.widgets[widgetId];return"string"==typeof(null==widgetJson?void 0:widgetJson.icon)?widgetJson.icon:null!==(_b=null===(_a=null==widgetJson?void 0:widgetJson.icon)||void 0===_a?void 0:_a.svg)&&void 0!==_b?_b:""}const sectionId=layoutItem.sectionId,sectionJson=state.appConfig.sections[sectionId];return"string"==typeof(null==sectionJson?void 0:sectionJson.icon)?sectionJson.icon:null!==(_d=null===(_c=null==sectionJson?void 0:sectionJson.icon)||void 0===_c?void 0:_c.svg)&&void 0!==_d?_d:jimu_icons_svg_outlined_brand_widget_section_svg__WEBPACK_IMPORTED_MODULE_2___default()})),showWidgetIcon=jimu_core__WEBPACK_IMPORTED_MODULE_0__.E_S.useSelector((state=>{var _a,_b;const parentWidgetId=state.appConfig.layouts[layoutId].parent.id;return null===(_b=null===(_a=state.appConfig.widgets[parentWidgetId].config)||void 0===_a?void 0:_a.header)||void 0===_b?void 0:_b.showWidgetIcon})),widgetIconSize=jimu_core__WEBPACK_IMPORTED_MODULE_0__.E_S.useSelector((state=>{var _a,_b;const parentWidgetId=state.appConfig.layouts[layoutId].parent.id;return null===(_b=null===(_a=state.appConfig.widgets[parentWidgetId].config)||void 0===_a?void 0:_a.header)||void 0===_b?void 0:_b.widgetIconSize})),widgetIconColor=jimu_core__WEBPACK_IMPORTED_MODULE_0__.E_S.useSelector((state=>{var _a,_b;const parentWidgetId=state.appConfig.layouts[layoutId].parent.id;return null===(_b=null===(_a=state.appConfig.widgets[parentWidgetId].config)||void 0===_a?void 0:_a.header)||void 0===_b?void 0:_b.widgetIconColor})),textStyle=jimu_core__WEBPACK_IMPORTED_MODULE_0__.E_S.useSelector((state=>{var _a,_b;const parentWidgetId=state.appConfig.layouts[layoutId].parent.id;return null===(_b=null===(_a=state.appConfig.widgets[parentWidgetId].config)||void 0===_a?void 0:_a.header)||void 0===_b?void 0:_b.textStyle}));return(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Yac)("div",{className:"label d-flex align-items-center h-100"},(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Yac)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.Fragment,null,showWidgetIcon&&(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Yac)(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon,{icon,size:null!=widgetIconSize?widgetIconSize:16,color:widgetIconColor}),(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Yac)("div",{className:"ml-2 text-truncate",css:jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`
            font-size: ${null!==(_a=null==textStyle?void 0:textStyle.size)&&void 0!==_a?_a:"1rem"};
            font-weight: ${(null==textStyle?void 0:textStyle.bold)?"bold":"normal"};
            font-style: ${(null==textStyle?void 0:textStyle.italic)?"italic":"normal"};
            text-decoration: ${(null==textStyle?void 0:textStyle.underline)?"underline":""} ${(null==textStyle?void 0:textStyle.strike)?"line-through":""};
            color: ${null!==(_b=null==textStyle?void 0:textStyle.color)&&void 0!==_b?_b:"inherit"};
          `},label)))}try{ItemTitle.displayName="ItemTitle",ItemTitle.__docgenInfo={description:"",displayName:"ItemTitle",props:{layoutId:{defaultValue:null,description:"",name:"layoutId",required:!1,type:{name:"string"}},layoutItemId:{defaultValue:null,description:"",name:"layoutItemId",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/accordion-layout/common/item-title.tsx#ItemTitle"]={docgenInfo:ItemTitle.__docgenInfo,name:"ItemTitle",path:"../jimu-layouts/lib/accordion-layout/common/item-title.tsx#ItemTitle"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-layouts/lib/accordion-layout/common/toggle-all.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{h:()=>ToggleAllButtonGroup});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),jimu_icons_outlined_directional_collapse_all__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-icons/outlined/directional/collapse-all.tsx"),jimu_icons_outlined_directional_expand_all__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../jimu-icons/outlined/directional/expand-all.tsx"),jimu_ui__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../jimu-ui/index.tsx");const style=jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`
  // position: sticky;
  // top: 0;
  margin-bottom: 4px;
  z-index: 1;
`;function ToggleAllButtonGroup(props){const{onExpandAll,onCollapseAll}=props,translate=jimu_core__WEBPACK_IMPORTED_MODULE_0__.JLE.useTranslation();return(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Yac)("div",{css:style,className:"d-flex align-items-center justify-content-end"},(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Yac)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Tooltip,{title:translate("expandAll")},(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Yac)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Button,{type:"tertiary",icon:!0,size:"sm",onClick:onExpandAll},(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Yac)(jimu_icons_outlined_directional_expand_all__WEBPACK_IMPORTED_MODULE_2__.i,null))),(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Yac)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Tooltip,{title:translate("collapseAll")},(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Yac)(jimu_ui__WEBPACK_IMPORTED_MODULE_3__.Button,{type:"tertiary",icon:!0,size:"sm",onClick:onCollapseAll,className:"ml-1"},(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Yac)(jimu_icons_outlined_directional_collapse_all__WEBPACK_IMPORTED_MODULE_1__.b,null))))}try{ToggleAllButtonGroup.displayName="ToggleAllButtonGroup",ToggleAllButtonGroup.__docgenInfo={description:"",displayName:"ToggleAllButtonGroup",props:{onExpandAll:{defaultValue:null,description:"",name:"onExpandAll",required:!0,type:{name:"() => void"}},onCollapseAll:{defaultValue:null,description:"",name:"onCollapseAll",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/accordion-layout/common/toggle-all.tsx#ToggleAllButtonGroup"]={docgenInfo:ToggleAllButtonGroup.__docgenInfo,name:"ToggleAllButtonGroup",path:"../jimu-layouts/lib/accordion-layout/common/toggle-all.tsx#ToggleAllButtonGroup"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-layouts/lib/accordion-layout/util.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function getParentWidgetJson(layouts,state){const layoutId=layouts[state.browserSizeMode]||layouts[state.appConfig.mainSizeMode],widgetId=state.appConfig.layouts[layoutId].parent.id;return state.appConfig.widgets[widgetId]}__webpack_require__.d(__webpack_exports__,{H:()=>getParentWidgetJson})},"../jimu-layouts/lib/builder/page-context.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{EQ:()=>ViewportVisibilityContext,NQ:()=>PageContext,VZ:()=>ScreenGroupContext,ne:()=>ViewVisibilityContext,nj:()=>PageVisibilityContext});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx");const PageContext=jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createContext({viewOnly:!0}),ViewportVisibilityContext=jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createContext(!0),PageVisibilityContext=jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createContext(!0),ViewVisibilityContext=jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createContext({isInView:!1,isInCurrentView:!1}),ScreenGroupContext=jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.createContext("")},"../jimu-layouts/lib/builder/theme-tooltip.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{v:()=>ThemedTooltip});var jimu_ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-ui/index.tsx");const ThemedTooltip=(0,__webpack_require__("../jimu-theme/index.ts").ZS)(jimu_ui__WEBPACK_IMPORTED_MODULE_0__.Tooltip);try{ThemedTooltip.displayName="ThemedTooltip",ThemedTooltip.__docgenInfo={description:"",displayName:"ThemedTooltip",props:{children:{defaultValue:null,description:"Tooltip reference element (Must be able to receive ref)",name:"children",required:!0,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},title:{defaultValue:null,description:"Tooltip title. Zero-length titles string are never displayed.",name:"title",required:!0,type:{name:"ReactNode"}},id:{defaultValue:null,description:"This prop is used to help implement the accessibility logic.\nIf you don't provide this prop. It falls back to a randomly generated id.",name:"id",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"Whether this component is disabled",name:"disabled",required:!1,type:{name:"boolean"}},showArrow:{defaultValue:{value:"false"},description:"If `true`, adds an arrow to the tooltip.",name:"showArrow",required:!1,type:{name:"boolean"}},interactive:{defaultValue:{value:"false"},description:"Makes a tooltip interactive, i.e. will not close when the user\nhovers over the tooltip before the `leaveDelay` is expired.",name:"interactive",required:!1,type:{name:"boolean"}},leaveDelay:{defaultValue:{value:"0"},description:"The number of milliseconds to wait before hiding the tooltip.\nThis prop won't impact the leave touch delay (`leaveTouchDelay`).",name:"leaveDelay",required:!1,type:{name:"number"}},placement:{defaultValue:{value:"bottom"},description:"Describes the preferred placement of the popper.",name:"placement",required:!1,type:{name:"enum",value:[{value:'"auto"'},{value:'"bottom"'},{value:'"left"'},{value:'"right"'},{value:'"top"'},{value:'"bottom-end"'},{value:'"bottom-start"'},{value:'"left-end"'},{value:'"left-start"'},{value:'"right-end"'},{value:'"right-start"'},{value:'"top-end"'},{value:'"top-start"'},{value:'"auto-start"'},{value:'"auto-end"'}]}},modifiers:{defaultValue:null,description:"Modifiers for fine-tuning the behavior.\n@deprecated Use `hideOptions`, `shiftOptions`, `flipOptions`, `offsetOptions` and `sizeOptions` instead.\n\nNote: If `middleware`(`hideOptions`, `shiftOptions`, `flipOptions`, `offsetOptions`, `inlineOptions`, `autoPlacementOptions` and `arrowOptions`) is not provided, Popper will try to upgrade `modifiers` to `middleware`, otherwise it will be ignored.",name:"modifiers",required:!1,type:{name:"any[]"}},shiftOptions:{defaultValue:null,description:"The shift options can shift the popper when it will overflow the clipping boundary.\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.",name:"shiftOptions",required:!1,type:{name:"boolean | { mainAxis?: boolean; crossAxis?: boolean; limiter?: { fn: (state: MiddlewareState) => Coords; options?: any; }; rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; boundary?: Boundary; }"}},offsetOptions:{defaultValue:null,description:"The offset modifier can shift your popper on both its axis.\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.",name:"offsetOptions",required:!1,type:{name:"boolean | [number, number] | OffsetOptions"}},flipOptions:{defaultValue:{value:"true"},description:"The flip options can flip the popper when it will overflow the clipping boundary.\nIf it is a boolean value, it means enabling the default behavior of the component or disabling that behavior.\nNote: `flipOptions` and `autoPlacementOptions` cannot be used together inside the same middleware array; make sure you choose only one of them to use.",name:"flipOptions",required:!1,type:{name:"boolean | { mainAxis?: boolean; crossAxis?: boolean; rootBoundary?: RootBoundary; elementContext?: ElementContext; altBoundary?: boolean; padding?: Padding; ... 4 more ...; boundary?: Boundary; }"}},open:{defaultValue:null,description:"If `true`, the popper is visible.\nIf `open` is set, it means it's a controlled component,\nyou need to listen to `onOpen` and `onClose` to modify the value of `open`.",name:"open",required:!1,type:{name:"boolean"}},onClose:{defaultValue:null,description:"Callback fired when the component requests to be closed.\n@event\n@param event The event source of the callback.",name:"onClose",required:!1,type:{name:"(event: any) => void"}},arrowStyle:{defaultValue:null,description:"Define the style of the arrow.\n@ignore",name:"arrowStyle",required:!1,type:{name:"ArrowStyle"}},describeChild:{defaultValue:{value:"false"},description:"By default, the tooltip only labels its child element.\nThis is notably different from title which can either label or describe its child depending on whether the child already has a label.\n\nIf you want the tooltip to act as an accessible description you can pass `describeChild` as `true`.\n\nNote that you shouldn't use `describeChild` if the tooltip provides the only visual label(e.g, use `Tooptip` with icon button).\n\nOtherwise, the child would have no accessible name and the tooltip would violate [success criterion 2.5.3 in WCAG 2.1](https://www.w3.org/WAI/WCAG21/Understanding/label-in-name.html).",name:"describeChild",required:!1,type:{name:"boolean"}},disableFocusListener:{defaultValue:{value:"false"},description:"Do not respond to focus events.",name:"disableFocusListener",required:!1,type:{name:"boolean"}},disableHoverListener:{defaultValue:{value:"false"},description:"Do not respond to hover events.",name:"disableHoverListener",required:!1,type:{name:"boolean"}},disableTouchListener:{defaultValue:{value:"false"},description:"Do not respond to long press touch events.",name:"disableTouchListener",required:!1,type:{name:"boolean"}},enterDelay:{defaultValue:{value:"100"},description:"The number of milliseconds to wait before showing the tooltip.\nThis prop won't impact the enter touch delay (`enterTouchDelay`).",name:"enterDelay",required:!1,type:{name:"number"}},enterNextDelay:{defaultValue:{value:"0"},description:"The number of milliseconds to wait before showing the tooltip when one was already recently opened.",name:"enterNextDelay",required:!1,type:{name:"number"}},enterTouchDelay:{defaultValue:{value:"700"},description:"The number of milliseconds a user must touch the element before showing the tooltip.",name:"enterTouchDelay",required:!1,type:{name:"number"}},followCursor:{defaultValue:{value:"false"},description:"If `true`, the tooltip follow the cursor over the wrapped element.",name:"followCursor",required:!1,type:{name:"boolean"}},leaveTouchDelay:{defaultValue:{value:"1500"},description:"The number of milliseconds after the user stops touching an element before hiding the tooltip.",name:"leaveTouchDelay",required:!1,type:{name:"number"}},onOpen:{defaultValue:null,description:"Callback fired when the component requests to be open.\n@event\n@param event The event source of the callback.",name:"onOpen",required:!1,type:{name:"(event: any) => void"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"IMThemeVariables"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/builder/theme-tooltip.tsx#ThemedTooltip"]={docgenInfo:ThemedTooltip.__docgenInfo,name:"ThemedTooltip",path:"../jimu-layouts/lib/builder/theme-tooltip.tsx#ThemedTooltip"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-layouts/lib/column-layout/common/style.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>getLayoutStyle});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx");const getLayoutStyle=layoutSetting=>jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`
  height: 100%;
  overflow-x: hidden;
  justify-content: ${layoutSetting.justifyContent};
  overflow-y: auto !important;
  -ms-overflow-style: none;  /* Internet Explorer 10+ */
  scrollbar-width: none;  /* Firefox */
  &::-webkit-scrollbar {
    display: none;  /* Safari and Chrome */
  }
  &:hover {
    -ms-overflow-style: auto;  /* Internet Explorer 10+ */
    scrollbar-width: thin;  /* Firefox */
    &::-webkit-scrollbar {
      display: block;  /* Safari and Chrome */
    }
  }
  & > div.flexbox-layout-item ~ div.flexbox-layout-item {
    margin-top: ${layoutSetting.space}px;
  }
`},"../jimu-layouts/lib/column-layout/common/util.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{IW:()=>isStretchInCrossAxis,WW:()=>calHeight,jX:()=>getItemStyle});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-layouts/lib/types.ts"),_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../jimu-layouts/lib/utils.ts");function calHeight(itemSetting,bbox){var _a,_b;return(null===(_a=itemSetting.autoProps)||void 0===_a?void 0:_a.height)===_types__WEBPACK_IMPORTED_MODULE_1__.Dy.Auto||"ratio"===itemSetting.heightMode?"ratio"===itemSetting.heightMode?{height:"auto",flex:"0 0 auto"}:{height:"auto"}:(null===(_b=itemSetting.autoProps)||void 0===_b?void 0:_b.height)===_types__WEBPACK_IMPORTED_MODULE_1__.Dy.Stretch||"fit"===itemSetting.heightMode?{flex:"1 1 auto"}:{height:bbox.height,flexShrink:0}}function isStretchInCrossAxis(layoutItem){var _a,_b;return(null===(_b=null===(_a=layoutItem.setting)||void 0===_a?void 0:_a.autoProps)||void 0===_b?void 0:_b.width)!==_types__WEBPACK_IMPORTED_MODULE_1__.Dy.Custom}function getItemStyle(style,layoutSetting,isStretch){var _a,_b,_c;const isAutoHeight=(null===(_a=layoutSetting.autoProps)||void 0===_a?void 0:_a.height)===_types__WEBPACK_IMPORTED_MODULE_1__.Dy.Auto;return jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`
    align-self: ${isStretch?"stretch":null!==(_c=null===(_b=layoutSetting.style)||void 0===_b?void 0:_b.alignSelf)&&void 0!==_c?_c:"auto"};
    width: ${(0,_utils__WEBPACK_IMPORTED_MODULE_2__.getValueOfBBox)(style,"width")};
    height: ${(0,_utils__WEBPACK_IMPORTED_MODULE_2__.getValueOfBBox)(style,"height")};
    flex: ${style.flex};
    flex-shrink: ${style.flexShrink};
    min-height: ${isAutoHeight?"unset":null};
  `}},"../jimu-layouts/lib/column-layout/default-setting.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{R:()=>DEFAULT_COLUMN_LAYOUT_SETTING});const DEFAULT_COLUMN_LAYOUT_SETTING={min:16,space:10}},"../jimu-layouts/lib/common/page-util.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{IG:()=>computePageHeight,kA:()=>DEFAULT_FOOTER_HEIGHT,q8:()=>DEFAULT_HEADER_HEIGHT});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx");const DEFAULT_HEADER_HEIGHT=75,DEFAULT_FOOTER_HEIGHT=75;function computePageHeight(pageJson,headerFooterHeight){if(pageJson){const appConfig=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Vp3)().getState().appConfig,pageLayoutId=pageJson.layout[appConfig.mainSizeMode],layout=appConfig.layouts[pageLayoutId];if((null==layout?void 0:layout.type)===jimu_core__WEBPACK_IMPORTED_MODULE_0__.p5K.GridLayout)return headerFooterHeight>0?`calc(100% - ${headerFooterHeight}px)`:"100%"}return"auto"}},"../jimu-layouts/lib/controller-panel/util.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{convertToStyle:()=>convertToStyle,findPageRelatedControllerIds:()=>findPageRelatedControllerIds,panelTransformStyle:()=>panelTransformStyle,useHandleLastVirtualNodeFocus:()=>useHandleLastVirtualNodeFocus});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_search_contents__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-layouts/lib/search/contents.ts"),_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../jimu-layouts/lib/types.ts"),jimu_ui__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../jimu-ui/index.tsx");function findPageRelatedControllerIds(appConfig,pageId,browserSizeMode){var _a;const result=Object.keys(null!==(_a=appConfig.controllerPanels)&&void 0!==_a?_a:{}).filter((controllerId=>{const rootInfo=(0,_search_contents__WEBPACK_IMPORTED_MODULE_1__.JL)(appConfig,controllerId,jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget,browserSizeMode);return null!=rootInfo&&(rootInfo.type!==jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Page||rootInfo.id===pageId)}));return result.sort(),result.join(",")}function panelTransformStyle(panelJson){if(null==panelJson)return null;const{position,offsetX=0,offsetY=0}=panelJson;let translate;return panelJson.widthMode!==_types__WEBPACK_IMPORTED_MODULE_2__.Dy.Stretch&&(0!==offsetX&&(translate=`translateX(${offsetX}px)`),position!==jimu_core__WEBPACK_IMPORTED_MODULE_0__.M_h.TopCenter&&position!==jimu_core__WEBPACK_IMPORTED_MODULE_0__.M_h.MiddleCenter&&position!==jimu_core__WEBPACK_IMPORTED_MODULE_0__.M_h.BottomCenter||(translate=null!=translate?`${translate} translateX(-50%)`:"translateX(-50%)")),panelJson.heightMode!==_types__WEBPACK_IMPORTED_MODULE_2__.Dy.Stretch&&(0!==offsetY&&(translate=null!=translate?`${translate} translateY(${offsetY}px)`:`translateY(${offsetY}px)`),position!==jimu_core__WEBPACK_IMPORTED_MODULE_0__.M_h.MiddleLeft&&position!==jimu_core__WEBPACK_IMPORTED_MODULE_0__.M_h.MiddleCenter&&position!==jimu_core__WEBPACK_IMPORTED_MODULE_0__.M_h.MiddleRight||(translate=null!=translate?`${translate} translateY(-50%)`:"translateY(-50%)")),translate}function convertToStyle(panelJson){let posStyle,widthModeStyle,heightModeStyle;switch(null==panelJson?void 0:panelJson.position){case jimu_core__WEBPACK_IMPORTED_MODULE_0__.M_h.TopLeft:posStyle=jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`top: 0; left: 0; bottom: auto; right: auto;`;break;case jimu_core__WEBPACK_IMPORTED_MODULE_0__.M_h.TopRight:posStyle=jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`top: 0; left: auto; bottom: auto; right: 0;`;break;case jimu_core__WEBPACK_IMPORTED_MODULE_0__.M_h.BottomLeft:posStyle=jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`top: auto; left: 0; bottom: 0; right: auto;`;break;case jimu_core__WEBPACK_IMPORTED_MODULE_0__.M_h.BottomRight:posStyle=jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`top: auto; left: auto; bottom: 0; right: 0;`;break;case jimu_core__WEBPACK_IMPORTED_MODULE_0__.M_h.TopCenter:posStyle=jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`top: 0; left: 50%; bottom: auto; right: auto;`;break;case jimu_core__WEBPACK_IMPORTED_MODULE_0__.M_h.BottomCenter:posStyle=jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`top: auto; left: 50%; bottom: 0; right: auto;`;break;case jimu_core__WEBPACK_IMPORTED_MODULE_0__.M_h.MiddleLeft:posStyle=jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`top: 50%; left: 0; bottom: auto; right: auto;`;break;case jimu_core__WEBPACK_IMPORTED_MODULE_0__.M_h.MiddleRight:posStyle=jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`top: 50%; left: auto; bottom: auto; right: 0;`;break;case jimu_core__WEBPACK_IMPORTED_MODULE_0__.M_h.MiddleCenter:posStyle=jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`top: 50%; left: 50%; bottom: auto; right: auto;`;break;default:posStyle=jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`top: 0; left: 0; bottom: auto; right: auto;`}return panelJson.widthMode===_types__WEBPACK_IMPORTED_MODULE_2__.Dy.Stretch&&(widthModeStyle=jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`width:auto;left:${panelJson.left};right:${panelJson.right};`),panelJson.heightMode===_types__WEBPACK_IMPORTED_MODULE_2__.Dy.Stretch&&(heightModeStyle=jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`height:auto;top:${panelJson.top};bottom:${panelJson.bottom};`),jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`
    position: fixed;
    ${posStyle}
    width: ${null==panelJson?void 0:panelJson.width};
    height: ${null==panelJson?void 0:panelJson.height};
    ${widthModeStyle};
    ${heightModeStyle}
    overflow: visible;
    z-index: 2;
  `}const useHandleLastVirtualNodeFocus=(container,firstClass,lastVirtualClass)=>jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.useCallback((e=>{if(!container)return;const eventKey=e.key,shiftKey=e.shiftKey;if("Tab"===eventKey)if(shiftKey){const focusableElements=(0,jimu_ui__WEBPACK_IMPORTED_MODULE_3__.getFocusableElements)(container).filter((el=>{var _a,_b;return!(null===(_b=null===(_a=null==el?void 0:el.classList)||void 0===_a?void 0:_a.contains)||void 0===_b?void 0:_b.call(_a,lastVirtualClass))}));if(!focusableElements||0===focusableElements.length)return;(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.u02)(focusableElements[focusableElements.length-1],!0)}else{const firstFocusableElement=container.querySelector(`.${firstClass}`);(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.u02)(firstFocusableElement,!0)}}),[container,firstClass,lastVirtualClass])},"../jimu-layouts/lib/fixed-layout/common/util.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>getPositionStyle});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-layouts/lib/utils.ts");function getPositionStyle(mergedStyle){return[jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`
      position: absolute;
      left: ${(0,_utils__WEBPACK_IMPORTED_MODULE_1__.getValueOfBBox)(mergedStyle,"left")};
      right: ${(0,_utils__WEBPACK_IMPORTED_MODULE_1__.getValueOfBBox)(mergedStyle,"right")};
      top: ${(0,_utils__WEBPACK_IMPORTED_MODULE_1__.getValueOfBBox)(mergedStyle,"top")};
      bottom: ${(0,_utils__WEBPACK_IMPORTED_MODULE_1__.getValueOfBBox)(mergedStyle,"bottom")};
      width: ${(0,_utils__WEBPACK_IMPORTED_MODULE_1__.getValueOfBBox)(mergedStyle,"width")};
      height: ${(0,_utils__WEBPACK_IMPORTED_MODULE_1__.getValueOfBBox)(mergedStyle,"height")};
    `,mergedStyle.transform]}},"../jimu-layouts/lib/fixed-layout/default-setting.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{E:()=>DEFAULT_FIX_LAYOUT_ITEM_SETTING,i:()=>DEFAULT_FIX_LAYOUT_SETTING});var jimu_core=__webpack_require__("../jimu-core/index.tsx");const DEFAULT_FIX_LAYOUT_SETTING=jimu_core.CM0.assign({},{gridSize:1}),DEFAULT_FIX_LAYOUT_ITEM_SETTING=jimu_core.CM0.assign({},{order:0},{lockParent:!1,lockLayout:!1,autoProps:{}})},"../jimu-layouts/lib/fixed-layout/fixed-layout-util.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D_:()=>generateResizingBBoxStyle,Ov:()=>applySnapResult,WQ:()=>applyPositionSetting,fF:()=>flipBBox,wK:()=>generateBBoxStyle});var _utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-layouts/lib/utils.ts"),jimu_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-core/index.tsx"),_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../jimu-layouts/lib/types.ts");function generateResizingBBoxStyle(initRect,containerRect,delta,autoFlip=!1){const result={};result.left=initRect.left+delta.dx,result.width=initRect.width+delta.dw;const right=containerRect.right-initRect.right;0===delta.dw?result.right=right-delta.dx:0===delta.dx?(delta.dw>0&&(delta.dw=Math.min(right,delta.dw)),result.right=right-delta.dw,result.width=initRect.width+delta.dw):(result.right=right,delta.dx<0&&(delta.dx=Math.max(-initRect.left,delta.dx),delta.dw=-delta.dx,result.left=initRect.left+delta.dx,result.width=initRect.width+delta.dw)),result.top=initRect.top+delta.dy,result.height=initRect.height+delta.dh;const bottom=containerRect.bottom-initRect.bottom;return 0===delta.dh?result.bottom=bottom-delta.dy:0===delta.dy?(delta.dh>0&&(delta.dh=Math.min(bottom,delta.dh)),result.bottom=bottom-delta.dh,result.height=initRect.height+delta.dh):(result.bottom=bottom,delta.dy<0&&(delta.dy=Math.max(-initRect.top,delta.dy),delta.dh=-delta.dy,result.top=initRect.top+delta.dy,result.height=initRect.height+delta.dh)),autoFlip&&(0,_utils__WEBPACK_IMPORTED_MODULE_0__.isRTL)()?flipBBox(result):result}function generateBBoxStyle(bbox,setting){var _a,_b,_c,_d,_e;const result={};let autoProps=null!==(_a=null==setting?void 0:setting.autoProps)&&void 0!==_a?_a:{},box=bbox;const heightMode=(0,_utils__WEBPACK_IMPORTED_MODULE_0__.getLayoutItemSizeMode)("height",bbox,autoProps),widthMode=(0,_utils__WEBPACK_IMPORTED_MODULE_0__.getLayoutItemSizeMode)("width",bbox,autoProps);if(heightMode===_types__WEBPACK_IMPORTED_MODULE_2__.Dy.Stretch)result.top=box.top,result.bottom=box.bottom;else{const topAuto=null!==(_b=autoProps.top)&&void 0!==_b&&_b,bottomAuto=null!==(_c=autoProps.bottom)&&void 0!==_c&&_c;heightMode===_types__WEBPACK_IMPORTED_MODULE_2__.Dy.Custom&&(result.height=box.height),topAuto!==bottomAuto&&!bottomAuto||null==bbox.top?result.bottom=box.bottom:result.top=box.top,setting.vCenter&&"50%"===box.top&&(result.top="50%")}if(widthMode===_types__WEBPACK_IMPORTED_MODULE_2__.Dy.Stretch)result.left=box.left,result.right=box.right;else{const leftAuto=null!==(_d=autoProps.left)&&void 0!==_d&&_d,rightAuto=null!==(_e=autoProps.right)&&void 0!==_e&&_e;widthMode===_types__WEBPACK_IMPORTED_MODULE_2__.Dy.Custom&&(result.width=box.width),leftAuto===rightAuto?null!=box.left?result.left=box.left:result.right=box.right:leftAuto&&null!=box.right?result.right=box.right:result.left=box.left,setting.hCenter&&"50%"===box.left&&(result.left="50%")}return result}function flipBBox(bbox){const result=(0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.J3Z)(bbox),temp=bbox.left;return result.set("left",bbox.right).set("right",temp)}function applyPositionSetting(bbox,itemSetting,isResizing=!1){const extraStyle={},hCenter=itemSetting.hCenter&&"50%"===bbox.left,vCenter=itemSetting.vCenter&&"50%"===bbox.top,sign=(0,_utils__WEBPACK_IMPORTED_MODULE_0__.isRTL)()?-1:1;return hCenter&&vCenter?(extraStyle.right="auto",extraStyle.bottom="auto",extraStyle.transform=`translate(${-50*sign}%, -50%)`):hCenter?(extraStyle.right="auto",extraStyle.transform=`translateX(${-50*sign}%)`):vCenter&&(extraStyle.bottom="auto",extraStyle.transform="translateY(-50%)"),!isResizing&&(0,_utils__WEBPACK_IMPORTED_MODULE_0__.shouldUseAspectRatio)(itemSetting)&&(extraStyle.height="auto"),extraStyle}function applySnapResult(bbox,setting,containerRect,snapRect){var _a,_b;let outputBox=bbox,outSetting=(0,jimu_core__WEBPACK_IMPORTED_MODULE_1__.J3Z)(null!=setting?setting:{});return(null===(_a=null==setting?void 0:setting.autoProps)||void 0===_a?void 0:_a.width)!==_types__WEBPACK_IMPORTED_MODULE_2__.Dy.Stretch&&(outSetting=snapRect.left<snapRect.right?(0,_utils__WEBPACK_IMPORTED_MODULE_0__.isRTL)()?outSetting.setIn(["autoProps","right"],!1).setIn(["autoProps","left"],!0):outSetting.setIn(["autoProps","left"],!1).setIn(["autoProps","right"],!0):(0,_utils__WEBPACK_IMPORTED_MODULE_0__.isRTL)()?outSetting.setIn(["autoProps","left"],!1).setIn(["autoProps","right"],!0):outSetting.setIn(["autoProps","right"],!1).setIn(["autoProps","left"],!0)),(null===(_b=null==setting?void 0:setting.autoProps)||void 0===_b?void 0:_b.height)!==_types__WEBPACK_IMPORTED_MODULE_2__.Dy.Stretch&&(outSetting=snapRect.top<snapRect.bottom?outSetting.setIn(["autoProps","top"],!1).setIn(["autoProps","bottom"],!0):outSetting.setIn(["autoProps","top"],!0).setIn(["autoProps","bottom"],!1)),["left","right","top","bottom","width","height"].forEach((prop=>{const size="left"===prop||"right"===prop||"width"===prop?containerRect.width:containerRect.height;let usePercentage=(0,_utils__WEBPACK_IMPORTED_MODULE_0__.isPercentage)(bbox[prop]);(0,_utils__WEBPACK_IMPORTED_MODULE_0__.isRTL)()&&("left"===prop?usePercentage=(0,_utils__WEBPACK_IMPORTED_MODULE_0__.isPercentage)(bbox.right):"right"===prop&&(usePercentage=(0,_utils__WEBPACK_IMPORTED_MODULE_0__.isPercentage)(bbox.left))),outputBox=null==bbox[prop]||usePercentage?outputBox.set(prop,(0,_utils__WEBPACK_IMPORTED_MODULE_0__.toRatio)(snapRect[prop],size)):outputBox.set(prop,`${Math.round(snapRect[prop])}px`)})),{bbox:outputBox,setting:outSetting}}},"../jimu-layouts/lib/flex-row-layout/common/style.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>getLayoutStyle});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx");const getLayoutStyle=layoutSetting=>jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`
  height: 100%;
  overflow: hidden;
  justify-content: ${layoutSetting.justifyContent};
  & > div.flex-row-layout-item ~ div.flex-row-layout-item {
    margin-left: ${layoutSetting.space}px;
  }
`},"../jimu-layouts/lib/flex-row-layout/common/util.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{IW:()=>isStretchInCrossAxis,jX:()=>getItemStyle,pg:()=>calWidth});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-layouts/lib/types.ts"),_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../jimu-layouts/lib/utils.ts");function calWidth(itemSetting,bbox){var _a,_b;return(null===(_a=itemSetting.autoProps)||void 0===_a?void 0:_a.width)===_types__WEBPACK_IMPORTED_MODULE_1__.Dy.Auto||"ratio"===itemSetting.widthMode?"ratio"===itemSetting.widthMode?{width:"auto",flex:"0 0 auto"}:{width:"auto"}:(null===(_b=itemSetting.autoProps)||void 0===_b?void 0:_b.width)===_types__WEBPACK_IMPORTED_MODULE_1__.Dy.Stretch||"fit"===itemSetting.widthMode?{flex:"1 1 auto"}:{width:bbox.width,flexShrink:0}}function isStretchInCrossAxis(layoutItem){var _a,_b,_c;return(null!==(_c=null===(_b=null===(_a=layoutItem.setting)||void 0===_a?void 0:_a.autoProps)||void 0===_b?void 0:_b.height)&&void 0!==_c?_c:_types__WEBPACK_IMPORTED_MODULE_1__.Dy.Stretch)===_types__WEBPACK_IMPORTED_MODULE_1__.Dy.Stretch}function getItemStyle(style,layoutSetting,isStretch){var _a,_b,_c;const isAutoWidth=(null===(_a=layoutSetting.autoProps)||void 0===_a?void 0:_a.width)===_types__WEBPACK_IMPORTED_MODULE_1__.Dy.Auto;return jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`
    align-self: ${isStretch?"stretch":null!==(_c=null===(_b=layoutSetting.style)||void 0===_b?void 0:_b.alignSelf)&&void 0!==_c?_c:"flex-start"};
    width: ${(0,_utils__WEBPACK_IMPORTED_MODULE_2__.getValueOfBBox)(style,"width")};
    height: ${(0,_utils__WEBPACK_IMPORTED_MODULE_2__.getValueOfBBox)(style,"height")};
    flex: ${style.flex};
    flex-shrink: ${style.flexShrink};
    min-width: ${isAutoWidth?"unset":null};
  `}},"../jimu-layouts/lib/flex-row-layout/default-setting.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{N:()=>DEFAULT_FLEX_ROW_LAYOUT_SETTING});const DEFAULT_FLEX_ROW_LAYOUT_SETTING={min:16,space:10}},"../jimu-layouts/lib/flow-layout/common/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{yl:()=>screen_main_panel_list_ScreenMainPanelList,O:()=>screen_side_panel.O});var screen_side_panel=__webpack_require__("../jimu-layouts/lib/flow-layout/common/screen-side-panel.tsx"),jimu_core=__webpack_require__("../jimu-core/index.tsx"),jimu_ui=__webpack_require__("../jimu-ui/index.tsx"),page_context=__webpack_require__("../jimu-layouts/lib/builder/page-context.tsx"),type=__webpack_require__("../jimu-layouts/lib/flow-layout/common/type.ts"),visible=__webpack_require__("../jimu-icons/outlined/application/visible.tsx"),theme_tooltip=__webpack_require__("../jimu-layouts/lib/builder/theme-tooltip.tsx");function screen_main_panel_ScreenMainPanel(props){const{rootLayoutId,viewHeight,headerHeight,screenId,isActive,isAbsolute,isLast,isSmallSize,layoutEntry:LayoutEntry,isDesignMode,formatMessage,builderTheme}=props,screenJson=jimu_core.E_S.useSelector((state=>state.appConfig.screens[screenId])),panelVisible=jimu_core.E_S.useSelector((state=>{var _a,_b,_c;return null===(_c=null===(_b=null===(_a=state.appRuntimeInfo)||void 0===_a?void 0:_a.screenPanelStates)||void 0===_b?void 0:_b[screenId])||void 0===_c||_c})),{main}=screenJson,{side,size,overlay=!0}=screenJson.panel||{},elementRef=jimu_core.q_G.useRef(),showPanel=jimu_core.q_G.useCallback((()=>{(0,jimu_core.Vp3)().dispatch(jimu_core.tRc.screenPanelVisibleChanged(screenId,!0))}),[screenId]);const clazzName=(0,jimu_core.xWm)("screen-main-panel",{"is-active":isActive,"last-one":isLast});return(0,jimu_core.Yac)(page_context.nj.Provider,{value:!isAbsolute||isActive},(0,jimu_core.Yac)("div",{id:`${rootLayoutId}_screen_${screenId}`,className:clazzName,css:function getStyle(){var _a,_b,_c,_d;if(isSmallSize){const isDocked=!overlay&&null!=screenJson.panel,heightInDesignMode=isDocked?`${Math.round(viewHeight*type.v)}px`:`${viewHeight}px`,heightInRuntime=isDocked?`${Math.round(100*type.v)}`:"100";return jimu_core.AHW`
        pointer-events: none !important;
        display: flex;
        flex-direction: column;
        width: 100%;
        height: ${viewHeight}px;

        > .layout {
          ${jimu_ui.styleUtils.toBackgroundEmotionStyle(null!==(_b=null===(_a=screenJson.main)||void 0===_a?void 0:_a.background)&&void 0!==_b?_b:{})};
          height: ${heightInDesignMode} !important;
          border: none !important;
          pointer-events: auto;
        }

        body:not(.design-mode) & {
          height: ${headerHeight>0?`calc(100vh - ${headerHeight}px)`:"100vh"};
          height: ${headerHeight>0?`calc(var(--vh) * 100 - ${headerHeight}px)`:"calc(var(--vh) * 100)"};
          > .layout {
            height: ${heightInRuntime}vh !important;
            height: calc(var(--vh) * ${heightInRuntime}) !important;
          }
        }

        .spacing-area {
          flex: 1;
          background: transparent;
          pointer-events: none;
        }

        .toggle-visible-btn {
          position: absolute;
          bottom: 0;
          right: left;
          pointer-events: auto;
        }
      `}let left="0px",right="0px";"none"!==side&&(overlay||"right"===side||(left=size),overlay||"right"!==side||(right=size));const btnStyle=builderTheme?jimu_core.AHW`
      color: ${builderTheme.ref.palette.neutral[1200]};
      background-color: ${builderTheme.ref.palette.neutral[500]};
      border-color: ${builderTheme.ref.palette.neutral[600]};
      &:hover {
        color: ${builderTheme.ref.palette.black};
        background-color: ${builderTheme.ref.palette.neutral[600]};
      }
    `:null;return jimu_core.AHW`
      ${jimu_ui.styleUtils.toBackgroundEmotionStyle(null!==(_d=null===(_c=screenJson.main)||void 0===_c?void 0:_c.background)&&void 0!==_d?_d:{})};
      left: ${isAbsolute?left:null};
      right: ${isAbsolute?right:null};
      margin-left: ${isAbsolute?null:left};
      margin-right: ${isAbsolute?null:right};
      pointer-events: auto;
      display: flex;
      flex-direction: column;
      position: relative;

      > .layout {
        height: ${viewHeight}px !important;
        background: transparent;
        border: none !important;
      }

      body:not(.design-mode) & {
        > .layout {
          height: ${headerHeight>0?`calc(100vh - ${headerHeight}px)`:"100vh"} !important;
          height: ${headerHeight>0?`calc(var(--vh) * 100 - ${headerHeight}px)`:"calc(var(--vh) * 100)"} !important;
        }
      }

      .spacing-area {
        flex: 1;
        background: transparent;
        pointer-events: none;
      }

      .toggle-visible-btn {
        position: absolute;
        bottom: 0;
        right: 0;

        > button {
          ${btnStyle};
          svg {
            margin-right: 0;
            margin-left: 0;
          }
        }
      }
    `}(),ref:elementRef,"data-screenid":screenId,"data-index":props.index},(0,jimu_core.Yac)(LayoutEntry,{layouts:main.layout,isInWidget:!0}),(0,jimu_core.Yac)("div",{className:"spacing-area"}),isDesignMode&&!panelVisible&&(0,jimu_core.Yac)("div",{className:"toggle-visible-btn",onClick:showPanel,"data-testid":"toggleBtn"},(0,jimu_core.Yac)(theme_tooltip.v,{placement:"auto",title:formatMessage("showInDesignView")},(0,jimu_core.Yac)(jimu_ui.Button,{type:"default",size:"sm",className:"rounded-1"},(0,jimu_core.Yac)(visible.T,{size:"m"}))))))}try{screen_main_panel_ScreenMainPanel.displayName="ScreenMainPanel",screen_main_panel_ScreenMainPanel.__docgenInfo={description:"",displayName:"ScreenMainPanel",props:{rootLayoutId:{defaultValue:null,description:"",name:"rootLayoutId",required:!0,type:{name:"string"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},isActive:{defaultValue:null,description:"",name:"isActive",required:!0,type:{name:"boolean"}},isAbsolute:{defaultValue:null,description:"",name:"isAbsolute",required:!1,type:{name:"boolean"}},viewHeight:{defaultValue:null,description:"",name:"viewHeight",required:!0,type:{name:"number"}},headerHeight:{defaultValue:null,description:"",name:"headerHeight",required:!0,type:{name:"number"}},screenId:{defaultValue:null,description:"",name:"screenId",required:!0,type:{name:"string"}},isLast:{defaultValue:null,description:"",name:"isLast",required:!0,type:{name:"boolean"}},isSmallSize:{defaultValue:null,description:"",name:"isSmallSize",required:!0,type:{name:"boolean"}},layoutEntry:{defaultValue:null,description:"",name:"layoutEntry",required:!0,type:{name:"ComponentType<LayoutProps>"}},isDesignMode:{defaultValue:null,description:"",name:"isDesignMode",required:!1,type:{name:"boolean"}},formatMessage:{defaultValue:null,description:"",name:"formatMessage",required:!1,type:{name:"(id: string) => string"}},builderTheme:{defaultValue:null,description:"",name:"builderTheme",required:!1,type:{name:"IMThemeVariables"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/flow-layout/common/screen-main-panel.tsx#ScreenMainPanel"]={docgenInfo:screen_main_panel_ScreenMainPanel.__docgenInfo,name:"ScreenMainPanel",path:"../jimu-layouts/lib/flow-layout/common/screen-main-panel.tsx#ScreenMainPanel"})}catch(__react_docgen_typescript_loader_error){}function getContainerStyle(transitionType,viewHeight,headerHeight,isSmallSize,numOfScreens){return transitionType===jimu_core.al_.Fade?jimu_core.AHW`
      position: sticky;
      height: ${viewHeight}px;
      top: 0;

      body:not(.design-mode) & {
        height: ${headerHeight>0?`calc(100vh - ${headerHeight}px)`:"100vh"};
        height: ${headerHeight>0?`calc(var(--vh) * 100 - ${headerHeight}px)`:"calc(var(--vh) * 100)"};
        top: ${headerHeight>0?`${headerHeight}px`:0};
        .layout .exb-drop-area {
          pointer-events: none !important;
        }
      }

      .screen-main-panel {
        position: absolute;
        opacity: 0;
        visibility: hidden;
        z-index: 0;
        transition: ${isSmallSize?null:"opacity 400ms"};
        top: 0;
        /* height: ${isSmallSize?"unset":"100% !important"}; */

        .layout .exb-drop-area {
          pointer-events: none;
        }

        &.is-active {
          opacity: 1;
          visibility: visible;
          pointer-events: auto;
          z-index: 1;

          .layout .exb-drop-area {
            pointer-events: auto;
          }
        }
      }
    `:transitionType===jimu_core.al_.Cover?jimu_core.AHW`
      position: sticky;
      height: ${viewHeight}px;
      overflow: hidden;
      top: 0;

      body:not(.design-mode) & {
        height: 100%;
        overflow: unset;
        position: relative;

        .screen-main-panel {
          top: ${headerHeight>0?`${headerHeight}px`:0};
        }
      }

      & > div:first-of-type {
        margin-top: 0 !important;
      }

      .screen-main-panel {
        position: sticky;
        top: 0;
        margin-top: ${1===numOfScreens?"0 !important":null};

        .spacing-area {
          display: none;
        }
      }
    `:transitionType===jimu_core.al_.Push?jimu_core.AHW`
      position: sticky;
      height: ${viewHeight}px;
      overflow: hidden;
      top: 0;

      body:not(.design-mode) & {
        height: auto;
        overflow: unset;

        .screen-main-panel > .layout {
          top: ${headerHeight>0?`${headerHeight}px`:0};
        }
      }

      .screen-main-panel > .layout {
        position: sticky !important;
        top: 0;
      }
    `:void 0}function getPlaceholderStyle(transitionType,viewHeight,isSmallSize){return transitionType===jimu_core.al_.Fade?jimu_core.AHW`
      height: calc(100% - ${viewHeight}px);
      background: transparent;
      pointer-events: none;

      body:not(.design-mode) & {
        height: calc(100% - 100vh);
        height: calc(100% - var(--vh) * 100);
      }
    `:transitionType===jimu_core.al_.Cover||transitionType===jimu_core.al_.Push?jimu_core.AHW`
      height: calc(100% - ${viewHeight}px);
      background: transparent;
      pointer-events: none;
      display: block;

      body:not(.design-mode) & {
        height: calc(100% - 100vh);
        height: calc(100% - var(--vh) * 100);
        display: none;
      }
    `:void 0}function screen_main_panel_list_ScreenMainPanelList(props){const{rootLayoutId,activeIndex,viewHeight,headerHeight,screens,transitionType,isSmallSize,layoutEntry,isDesignMode,formatMessage,builderTheme}=props;return(0,jimu_core.Yac)(jimu_core.q_G.Fragment,null,(0,jimu_core.Yac)("div",{className:"screen-container",css:getContainerStyle(transitionType,viewHeight,headerHeight,isSmallSize,screens.length)},screens.map(((screenId,idx)=>(0,jimu_core.Yac)(screen_main_panel_ScreenMainPanel,{key:screenId,rootLayoutId,index:idx,isActive:activeIndex===idx,screenId,viewHeight,headerHeight,isAbsolute:transitionType===jimu_core.al_.Fade,isLast:idx===screens.length-1,isSmallSize,layoutEntry,isDesignMode,formatMessage,builderTheme})))),(0,jimu_core.Yac)("div",{className:"screen-placeholder",css:getPlaceholderStyle(transitionType,viewHeight)}))}try{screen_main_panel_list_ScreenMainPanelList.displayName="ScreenMainPanelList",screen_main_panel_list_ScreenMainPanelList.__docgenInfo={description:"",displayName:"ScreenMainPanelList",props:{rootLayoutId:{defaultValue:null,description:"",name:"rootLayoutId",required:!0,type:{name:"string"}},activeIndex:{defaultValue:null,description:"",name:"activeIndex",required:!0,type:{name:"number"}},viewHeight:{defaultValue:null,description:"",name:"viewHeight",required:!1,type:{name:"number"}},headerHeight:{defaultValue:null,description:"",name:"headerHeight",required:!0,type:{name:"number"}},screens:{defaultValue:null,description:"",name:"screens",required:!0,type:{name:"ImmutableArray<string>"}},isSmallSize:{defaultValue:null,description:"",name:"isSmallSize",required:!0,type:{name:"boolean"}},transitionType:{defaultValue:null,description:"",name:"transitionType",required:!0,type:{name:"enum",value:[{value:'"FADE"'},{value:'"COVER"'},{value:'"PUSH"'}]}},layoutEntry:{defaultValue:null,description:"",name:"layoutEntry",required:!0,type:{name:"ComponentType<LayoutProps>"}},isDesignMode:{defaultValue:null,description:"",name:"isDesignMode",required:!1,type:{name:"boolean"}},formatMessage:{defaultValue:null,description:"",name:"formatMessage",required:!1,type:{name:"(id: string) => string"}},builderTheme:{defaultValue:null,description:"",name:"builderTheme",required:!1,type:{name:"IMThemeVariables"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/flow-layout/common/screen-main-panel-list.tsx#ScreenMainPanelList"]={docgenInfo:screen_main_panel_list_ScreenMainPanelList.__docgenInfo,name:"ScreenMainPanelList",path:"../jimu-layouts/lib/flow-layout/common/screen-main-panel-list.tsx#ScreenMainPanelList"})}catch(__react_docgen_typescript_loader_error){}try{ScreenSidePanel.displayName="ScreenSidePanel",ScreenSidePanel.__docgenInfo={description:"",displayName:"ScreenSidePanel",props:{index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},isLast:{defaultValue:null,description:"",name:"isLast",required:!0,type:{name:"boolean"}},viewHeight:{defaultValue:null,description:"",name:"viewHeight",required:!1,type:{name:"number"}},headerHeight:{defaultValue:null,description:"",name:"headerHeight",required:!0,type:{name:"number"}},screenId:{defaultValue:null,description:"",name:"screenId",required:!0,type:{name:"string"}},refElement:{defaultValue:null,description:"",name:"refElement",required:!0,type:{name:"HTMLDivElement"}},layoutEntry:{defaultValue:null,description:"",name:"layoutEntry",required:!0,type:{name:"ComponentType<LayoutProps>"}},isActive:{defaultValue:null,description:"",name:"isActive",required:!0,type:{name:"boolean"}},transitionType:{defaultValue:null,description:"",name:"transitionType",required:!0,type:{name:"enum",value:[{value:'"FADE"'},{value:'"COVER"'},{value:'"PUSH"'}]}},screenTransitionType:{defaultValue:null,description:"",name:"screenTransitionType",required:!0,type:{name:"enum",value:[{value:'"FADE"'},{value:'"COVER"'},{value:'"PUSH"'}]}},triggerType:{defaultValue:null,description:"",name:"triggerType",required:!0,type:{name:"enum",value:[{value:'"TOP"'},{value:'"UPPER"'},{value:'"LOWER"'},{value:'"BOTTOM"'}]}},stretched:{defaultValue:null,description:"",name:"stretched",required:!0,type:{name:"boolean"}},verticalSpace:{defaultValue:null,description:"",name:"verticalSpace",required:!0,type:{name:"string"}},isSmallSize:{defaultValue:null,description:"",name:"isSmallSize",required:!0,type:{name:"boolean"}},onHeightChange:{defaultValue:null,description:"",name:"onHeightChange",required:!0,type:{name:"(index: number, height: number) => void"}},onInteractionChange:{defaultValue:null,description:"",name:"onInteractionChange",required:!0,type:{name:"(index: number, isIntersecting: boolean) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/flow-layout/common/index.tsx#ScreenSidePanel"]={docgenInfo:ScreenSidePanel.__docgenInfo,name:"ScreenSidePanel",path:"../jimu-layouts/lib/flow-layout/common/index.tsx#ScreenSidePanel"})}catch(__react_docgen_typescript_loader_error){}try{ScreenMainPanel.displayName="ScreenMainPanel",ScreenMainPanel.__docgenInfo={description:"",displayName:"ScreenMainPanel",props:{rootLayoutId:{defaultValue:null,description:"",name:"rootLayoutId",required:!0,type:{name:"string"}},index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},isActive:{defaultValue:null,description:"",name:"isActive",required:!0,type:{name:"boolean"}},isAbsolute:{defaultValue:null,description:"",name:"isAbsolute",required:!1,type:{name:"boolean"}},viewHeight:{defaultValue:null,description:"",name:"viewHeight",required:!0,type:{name:"number"}},headerHeight:{defaultValue:null,description:"",name:"headerHeight",required:!0,type:{name:"number"}},screenId:{defaultValue:null,description:"",name:"screenId",required:!0,type:{name:"string"}},isLast:{defaultValue:null,description:"",name:"isLast",required:!0,type:{name:"boolean"}},isSmallSize:{defaultValue:null,description:"",name:"isSmallSize",required:!0,type:{name:"boolean"}},layoutEntry:{defaultValue:null,description:"",name:"layoutEntry",required:!0,type:{name:"ComponentType<LayoutProps>"}},isDesignMode:{defaultValue:null,description:"",name:"isDesignMode",required:!1,type:{name:"boolean"}},formatMessage:{defaultValue:null,description:"",name:"formatMessage",required:!1,type:{name:"(id: string) => string"}},builderTheme:{defaultValue:null,description:"",name:"builderTheme",required:!1,type:{name:"IMThemeVariables"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/flow-layout/common/index.tsx#ScreenMainPanel"]={docgenInfo:ScreenMainPanel.__docgenInfo,name:"ScreenMainPanel",path:"../jimu-layouts/lib/flow-layout/common/index.tsx#ScreenMainPanel"})}catch(__react_docgen_typescript_loader_error){}try{ScreenMainPanelList.displayName="ScreenMainPanelList",ScreenMainPanelList.__docgenInfo={description:"",displayName:"ScreenMainPanelList",props:{rootLayoutId:{defaultValue:null,description:"",name:"rootLayoutId",required:!0,type:{name:"string"}},activeIndex:{defaultValue:null,description:"",name:"activeIndex",required:!0,type:{name:"number"}},viewHeight:{defaultValue:null,description:"",name:"viewHeight",required:!1,type:{name:"number"}},headerHeight:{defaultValue:null,description:"",name:"headerHeight",required:!0,type:{name:"number"}},screens:{defaultValue:null,description:"",name:"screens",required:!0,type:{name:"ImmutableArray<string>"}},isSmallSize:{defaultValue:null,description:"",name:"isSmallSize",required:!0,type:{name:"boolean"}},transitionType:{defaultValue:null,description:"",name:"transitionType",required:!0,type:{name:"enum",value:[{value:'"FADE"'},{value:'"COVER"'},{value:'"PUSH"'}]}},layoutEntry:{defaultValue:null,description:"",name:"layoutEntry",required:!0,type:{name:"ComponentType<LayoutProps>"}},isDesignMode:{defaultValue:null,description:"",name:"isDesignMode",required:!1,type:{name:"boolean"}},formatMessage:{defaultValue:null,description:"",name:"formatMessage",required:!1,type:{name:"(id: string) => string"}},builderTheme:{defaultValue:null,description:"",name:"builderTheme",required:!1,type:{name:"IMThemeVariables"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/flow-layout/common/index.tsx#ScreenMainPanelList"]={docgenInfo:ScreenMainPanelList.__docgenInfo,name:"ScreenMainPanelList",path:"../jimu-layouts/lib/flow-layout/common/index.tsx#ScreenMainPanelList"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-layouts/lib/flow-layout/common/screen-side-panel.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{O:()=>ScreenSidePanel,f:()=>getSidePanelStyle});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),jimu_ui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-ui/index.tsx"),_use_intersection__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../jimu-layouts/lib/flow-layout/use-intersection.tsx"),_type__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../jimu-layouts/lib/flow-layout/common/type.ts");const MIN_PANEL_RATIO=.25;function getSidePanelStyle(options){const{props,viewHeight,headerHeight,isActive,verticalSpace,stretched,transitionType,screenTransitionType,isSmallSize}=options,{side,size,offset,background,overlay=!0,padding}=props.panel||{},factor=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Vp3)().getState().appContext.isRTL?"left"===side?"-":"":"right"===side?"-":"",backgroundStyle=jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toBackgroundEmotionStyle(null!=background?background:{}),spacing=parseFloat(verticalSpace);if(isSmallSize){const docked=!overlay;return jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`
      width: 100%;
      background: transparent;
      pointer-events: none;
      position: relative;
      opacity: ${transitionType===jimu_core__WEBPACK_IMPORTED_MODULE_0__.al_.Fade?isActive?"1":"0.5":null};
      min-height: ${screenTransitionType===jimu_core__WEBPACK_IMPORTED_MODULE_0__.al_.Cover?`${viewHeight}px`:null};
      padding-top: ${screenTransitionType!==jimu_core__WEBPACK_IMPORTED_MODULE_0__.al_.Fade&&docked?`${Math.round(viewHeight*_type__WEBPACK_IMPORTED_MODULE_3__.v)}px`:null};

      &.top-spacing > .panel-content {
        /* margin-top: ${Math.round(viewHeight*_type__WEBPACK_IMPORTED_MODULE_3__.v)}px; */
      }

      .panel-content {
        width: 100%;
        ${overlay?"":backgroundStyle};
        /* margin-top: ${transitionType===jimu_core__WEBPACK_IMPORTED_MODULE_0__.al_.Push?"${Math.round(viewHeight * SCREEN_RATIO_IN_SMALL_SIZE)}px":"unset"}; */

        > .layout, > .layout-wrapper > .layout {
          pointer-events: auto;
          ${overlay?backgroundStyle:""};
          min-height: ${Math.round(viewHeight*MIN_PANEL_RATIO)}px;
          padding: ${jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toCSSPadding(padding)};
        }

        > .layout-wrapper > .column-layout > .trail-container,
        > .column-layout > .trail-container {
          overflow-y: hidden;
        }

        > .layout-wrapper > .placeholder-btn {
          pointer-events: auto;
          ${overlay?backgroundStyle:""};
        }

        .panel-spacing {
          height: ${Math.round(viewHeight*spacing/100)}px;
        }
      }

      .panel-content-placeholder {
        width: 1px;
        min-height: ${viewHeight}px;
      }

      body:not(.design-mode) & {
        min-height: ${screenTransitionType===jimu_core__WEBPACK_IMPORTED_MODULE_0__.al_.Cover?"100vh":null};
        min-height: ${screenTransitionType===jimu_core__WEBPACK_IMPORTED_MODULE_0__.al_.Cover?"calc(var(--vh) * 100)":null};
        padding-top: ${screenTransitionType!==jimu_core__WEBPACK_IMPORTED_MODULE_0__.al_.Fade&&docked?100*_type__WEBPACK_IMPORTED_MODULE_3__.v+"vh":null};
        padding-top: ${screenTransitionType!==jimu_core__WEBPACK_IMPORTED_MODULE_0__.al_.Fade&&docked?`calc(var(--vh) * ${100*_type__WEBPACK_IMPORTED_MODULE_3__.v})`:null};

        > .layout, > .layout-wrapper > .layout {
          min-height: ${Math.round(100*MIN_PANEL_RATIO)}vh;
          min-height: calc(var(--vh) * ${Math.round(100*MIN_PANEL_RATIO)});
        }

        .panel-content-placeholder {
          min-height: 100vh;
          min-height: calc(var(--vh) * 100);
        }

        .panel-spacing {
          height: ${spacing}vh;
          height: calc(var(--vh) * ${spacing});
        }
      }
    `}return jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`
    width: 100%;
    background: transparent;
    pointer-events: none;
    display: flex;
    flex-direction: ${"right"===side?"row-reverse":"row"};
    justify-content: ${"center"===side&&overlay?"center":"flex-start"};
    position: relative;
    opacity: ${transitionType===jimu_core__WEBPACK_IMPORTED_MODULE_0__.al_.Fade?isActive?"1":"0.5":null};

    &.top-spacing > .panel-content {
      /* margin-top: ${Math.round(2*viewHeight/3)}px; */
    }

    .panel-content {
      width: ${size};
      transform: ${overlay&&Math.abs(parseFloat(offset))>0?`translateX(${factor}${offset})`:null};
      flex: 0 auto;
      min-height: ${stretched?`${viewHeight}px`:"unset"};
      ${overlay?"":backgroundStyle};

      > .layout,
      > .layout-wrapper > .layout {
        pointer-events: auto;
        ${overlay?backgroundStyle:""};
        min-height: ${Math.round(viewHeight*MIN_PANEL_RATIO)}px;
        padding: ${jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toCSSPadding(padding)};
      }

      > .layout-wrapper > .column-layout > .trail-container,
      > .column-layout > .trail-container {
        overflow-y: hidden;
      }

      > .layout-wrapper > .placeholder-btn {
        pointer-events: auto;
        ${overlay?backgroundStyle:""};
      }

      .panel-spacing {
        height: ${Math.round(viewHeight*spacing/100)}px;

        &.last-item {
          height: ${stretched?`${Math.round(viewHeight*spacing/100)}`:viewHeight}px;
        }
      }
    }

    .panel-content-placeholder {
      width: 1px;
      min-height: ${stretched?viewHeight:Math.round(viewHeight*MIN_PANEL_RATIO)}px;
    }

    body:not(.design-mode) & {
      &.top-spacing > .panel-content {
        /* margin-top: 66.7vh; */
      }

      .panel-content {
        min-height: ${stretched?headerHeight>0?`calc(100vh - ${headerHeight}px)`:"100vh":"unset"};
        min-height: ${stretched?headerHeight>0?`calc(var(--vh) * 100 - ${headerHeight}px)`:"calc(var(--vh) * 100)":"unset"};
        > .layout, > .layout-wrapper > .layout {
          min-height: unset;
        }

        .panel-spacing {
          height: ${spacing}vh;
          height: calc(var(--vh) * ${spacing});

          &.last-item {
            height: ${stretched?spacing:100}vh;
            height: calc(var(--vh) * ${stretched?spacing:100});
          }
        }
      }
      .panel-content-placeholder {
        min-height: ${stretched?"100":Math.round(100*MIN_PANEL_RATIO)}vh;
        min-height: calc(var(--vh) * ${stretched?"100":Math.round(100*MIN_PANEL_RATIO)});
      }
    }
  `}function ScreenSidePanel(props){var _a;const{index,screenId,onInteractionChange,onHeightChange,viewHeight,headerHeight,layoutEntry:LayoutEntry,isActive,isSmallSize,transitionType,screenTransitionType,triggerType,stretched,verticalSpace="0"}=props,screenJson=jimu_core__WEBPACK_IMPORTED_MODULE_0__.E_S.useSelector((state=>state.appConfig.screens[screenId])),{panel}=screenJson,elementRef=jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.useRef(),[loaded,setLoaded]=jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.useState(!1),handleHeightChangeRef=jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.useRef(),intersectionChange=jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.useCallback((isIntersecting=>{onInteractionChange(index,isIntersecting)}),[index,onInteractionChange]);jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.useEffect((()=>(handleHeightChangeRef.current=jimu_core__WEBPACK_IMPORTED_MODULE_0__.CM0.debounce(onHeightChange,200),()=>{var _a;null===(_a=handleHeightChangeRef.current)||void 0===_a||_a.cancel()})),[onHeightChange]);const onSizeChange=jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.useCallback((({width,height})=>{var _a;null===(_a=handleHeightChangeRef.current)||void 0===_a||_a.call(handleHeightChangeRef,index,height)}),[index]);return(0,_use_intersection__WEBPACK_IMPORTED_MODULE_2__.v)(elementRef.current,props.refElement,isSmallSize?jimu_core__WEBPACK_IMPORTED_MODULE_0__.Lm.Lower:null!=triggerType?triggerType:jimu_core__WEBPACK_IMPORTED_MODULE_0__.Lm.Bottom,intersectionChange),jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.useEffect((()=>{setLoaded(!0)}),[]),(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Yac)("div",{className:(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("screen-side-panel",{"top-spacing":0===index&&((null===(_a=screenJson.panel)||void 0===_a?void 0:_a.overlay)||isSmallSize)}),"data-screenid":screenId,"data-index":index,ref:elementRef,css:getSidePanelStyle({props:screenJson,viewHeight,headerHeight,isActive,verticalSpace,stretched:stretched||null==panel,transitionType,screenTransitionType,isSmallSize})},panel&&(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Yac)("div",{className:"panel-content"},(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Yac)(LayoutEntry,{layouts:panel.layout}),(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Yac)("div",{className:(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("panel-spacing",{"last-item":props.isLast})})),!panel&&(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Yac)("div",{className:"panel-content-placeholder"}),(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Yac)(jimu_core__WEBPACK_IMPORTED_MODULE_0__.cQZ,{targetRef:elementRef,handleHeight:!0,onResize:onSizeChange}))}try{getSidePanelStyle.displayName="getSidePanelStyle",getSidePanelStyle.__docgenInfo={description:"",displayName:"getSidePanelStyle",props:{props:{defaultValue:null,description:"",name:"props",required:!0,type:{name:"IMScreenJson"}},viewHeight:{defaultValue:null,description:"",name:"viewHeight",required:!0,type:{name:"number"}},headerHeight:{defaultValue:null,description:"",name:"headerHeight",required:!0,type:{name:"number"}},isActive:{defaultValue:null,description:"",name:"isActive",required:!0,type:{name:"boolean"}},verticalSpace:{defaultValue:null,description:"",name:"verticalSpace",required:!0,type:{name:"string"}},stretched:{defaultValue:null,description:"",name:"stretched",required:!0,type:{name:"boolean"}},transitionType:{defaultValue:null,description:"",name:"transitionType",required:!0,type:{name:"enum",value:[{value:'"FADE"'},{value:'"COVER"'},{value:'"PUSH"'}]}},screenTransitionType:{defaultValue:null,description:"",name:"screenTransitionType",required:!0,type:{name:"enum",value:[{value:'"FADE"'},{value:'"COVER"'},{value:'"PUSH"'}]}},isSmallSize:{defaultValue:null,description:"",name:"isSmallSize",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/flow-layout/common/screen-side-panel.tsx#getSidePanelStyle"]={docgenInfo:getSidePanelStyle.__docgenInfo,name:"getSidePanelStyle",path:"../jimu-layouts/lib/flow-layout/common/screen-side-panel.tsx#getSidePanelStyle"})}catch(__react_docgen_typescript_loader_error){}try{ScreenSidePanel.displayName="ScreenSidePanel",ScreenSidePanel.__docgenInfo={description:"",displayName:"ScreenSidePanel",props:{index:{defaultValue:null,description:"",name:"index",required:!0,type:{name:"number"}},isLast:{defaultValue:null,description:"",name:"isLast",required:!0,type:{name:"boolean"}},viewHeight:{defaultValue:null,description:"",name:"viewHeight",required:!1,type:{name:"number"}},headerHeight:{defaultValue:null,description:"",name:"headerHeight",required:!0,type:{name:"number"}},screenId:{defaultValue:null,description:"",name:"screenId",required:!0,type:{name:"string"}},refElement:{defaultValue:null,description:"",name:"refElement",required:!0,type:{name:"HTMLDivElement"}},layoutEntry:{defaultValue:null,description:"",name:"layoutEntry",required:!0,type:{name:"ComponentType<LayoutProps>"}},isActive:{defaultValue:null,description:"",name:"isActive",required:!0,type:{name:"boolean"}},transitionType:{defaultValue:null,description:"",name:"transitionType",required:!0,type:{name:"enum",value:[{value:'"FADE"'},{value:'"COVER"'},{value:'"PUSH"'}]}},screenTransitionType:{defaultValue:null,description:"",name:"screenTransitionType",required:!0,type:{name:"enum",value:[{value:'"FADE"'},{value:'"COVER"'},{value:'"PUSH"'}]}},triggerType:{defaultValue:null,description:"",name:"triggerType",required:!0,type:{name:"enum",value:[{value:'"TOP"'},{value:'"UPPER"'},{value:'"LOWER"'},{value:'"BOTTOM"'}]}},stretched:{defaultValue:null,description:"",name:"stretched",required:!0,type:{name:"boolean"}},verticalSpace:{defaultValue:null,description:"",name:"verticalSpace",required:!0,type:{name:"string"}},isSmallSize:{defaultValue:null,description:"",name:"isSmallSize",required:!0,type:{name:"boolean"}},onHeightChange:{defaultValue:null,description:"",name:"onHeightChange",required:!0,type:{name:"(index: number, height: number) => void"}},onInteractionChange:{defaultValue:null,description:"",name:"onInteractionChange",required:!0,type:{name:"(index: number, isIntersecting: boolean) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/flow-layout/common/screen-side-panel.tsx#ScreenSidePanel"]={docgenInfo:ScreenSidePanel.__docgenInfo,name:"ScreenSidePanel",path:"../jimu-layouts/lib/flow-layout/common/screen-side-panel.tsx#ScreenSidePanel"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-layouts/lib/flow-layout/common/type.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{q:()=>DEFAULT_HEADER_HEIGHT,v:()=>SCREEN_RATIO_IN_SMALL_SIZE});const SCREEN_RATIO_IN_SMALL_SIZE=.33,DEFAULT_HEADER_HEIGHT=75},"../jimu-layouts/lib/flow-layout/common/util.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{W:()=>calHeight,Z:()=>updateScreenHeight});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-layouts/lib/utils.ts");function updateScreenHeight(mainPanelContainer,sidePanelContainer,browserSizeMode){const screenElements=mainPanelContainer.querySelectorAll("div.screen-main-panel"),panelElements=sidePanelContainer.querySelectorAll("div.screen-side-panel"),size=screenElements.length;for(let i=1;i<size;i++){const screenItem=screenElements.item(i),previousItem=screenElements.item(i-1),previousPanelItem=panelElements.item(i-1);screenItem.style.marginTop=previousPanelItem.clientHeight-previousItem.clientHeight+"px"}browserSizeMode!==jimu_core__WEBPACK_IMPORTED_MODULE_0__.rHp.Small&&(mainPanelContainer.style.height=`${sidePanelContainer.clientHeight}px`)}function calHeight(layoutItem,itemSetting){const bbox=layoutItem.bbox||{},height=(0,_utils__WEBPACK_IMPORTED_MODULE_1__.getValueOfBBox)(bbox,"height");if(!height||(0,_utils__WEBPACK_IMPORTED_MODULE_1__.isPercentage)(height))return"auto";switch(itemSetting.heightMode){case"auto":return"auto";case"fixed":return height;default:return null}}},"../jimu-layouts/lib/flow-layout/default-setting.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{E:()=>DEFAULT_FLOW_ITEM_SETTING,e:()=>DEFAULT_FLOW_SETTING});const DEFAULT_FLOW_SETTING={gutter:0,style:{padding:{number:[0],unit:"px"},justifyContent:"flex-start",alignItems:"stretch",borderRadius:{number:[0],unit:__webpack_require__("../jimu-ui/index.tsx").DistanceUnits.PIXEL}}},DEFAULT_FLOW_ITEM_SETTING={lockParent:!0,heightMode:"auto",offsetX:0,offsetY:0}},"../jimu-layouts/lib/flow-layout/layout-transform.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{I:()=>FlowLayoutTransformer});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx");class FlowLayoutTransformer{constructor(){this.id="flow-layout-transformer",this.layoutType=jimu_core__WEBPACK_IMPORTED_MODULE_0__.p5K.FlowLayout}transformLayout(layout,fromSizeMode,toSizeMode){if(fromSizeMode!==toSizeMode&&toSizeMode===jimu_core__WEBPACK_IMPORTED_MODULE_0__.rHp.Small){let updatedLayout=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.J3Z)(layout);return(layout.order||[]).forEach((itemId=>{updatedLayout=updatedLayout.setIn(["content",itemId,"setting","heightMode"],"auto")})),updatedLayout}return layout}transformLayoutItem(item,index,fromLayoutId,toLayoutId,fromSizeMode,toSizeMode){return{index,item}}}},"../jimu-layouts/lib/flow-layout/layout-utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{ES:()=>calculateFloatingPosition,aT:()=>mapStateToFlowItemProps,p5:()=>getWidthFromSetting});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),jimu_ui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-ui/index.tsx"),_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../jimu-layouts/lib/utils.ts"),_search_contents__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../jimu-layouts/lib/search/contents.ts");const mapStateToFlowItemProps=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Mz0)([(state,ownProps)=>{var _a;const{layoutItem}=ownProps,selection=null===(_a=state.appRuntimeInfo)||void 0===_a?void 0:_a.selection;return!!selection&&(selection.layoutId===ownProps.layoutId&&selection.layoutItemId===layoutItem.id)},(state,ownProps)=>{var _a,_b,_c;const{layoutItem}=ownProps;let padding=[0,0,0,0];if(layoutItem.type===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget){const widgetId=layoutItem.widgetId,widgetJson=state.appConfig.widgets[widgetId];widgetJson&&(padding=jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.expandStyleArray(null===(_c=null===(_b=null===(_a=widgetJson.config)||void 0===_a?void 0:_a.style)||void 0===_b?void 0:_b.padding)||void 0===_c?void 0:_c.number))}return padding[0]+padding[2]},(state,ownProps)=>{const{layoutItem}=ownProps;let isEmpty=!0;if(layoutItem.type===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget){const widgetId=layoutItem.widgetId,widgetJson=state.appConfig.widgets[widgetId];if(widgetJson){const layoutName=Object.keys(widgetJson.layouts)[0],layoutId=(0,_search_contents__WEBPACK_IMPORTED_MODULE_3__.Tv)(widgetJson.layouts[layoutName],state.browserSizeMode,state.appConfig.mainSizeMode),layout=state.appConfig.layouts[layoutId];layout&&Object.keys(layout.content||[]).length>0&&Object.keys(layout.content||[]).some((itemId=>!layout.content[itemId].isPending&&(isEmpty=!1,!0)))}}return isEmpty}],((selected,padding,isEmpty)=>({selected,padding,isEmpty})));function getWidthFromSetting(setting){const value=parseFloat(null==setting?void 0:setting.width);return value>0?`${setting.width}`.includes("px")?`${Math.round(value)}px`:`${Math.round(value)}%`:"100%"}function calculateFloatingPosition(layoutItem,resizingProps={}){var _a,_b,_c;const setting=layoutItem.setting,floatingArea=null!==(_a=null==setting?void 0:setting.floatingArea)&&void 0!==_a?_a:1,offsetX=`${null!==(_b=null==setting?void 0:setting.offsetX)&&void 0!==_b?_b:0}px`,offsetY=`${null!==(_c=null==setting?void 0:setting.offsetY)&&void 0!==_c?_c:0}px`,{dh,dw,initWidth,initHeight,isResizing}=resizingProps,translateX=(0,_utils__WEBPACK_IMPORTED_MODULE_2__.isRTL)()?`translateX(calc(50% + ${offsetX}))`:`translateX(calc(-50% + ${offsetX}))`,pos={};switch(floatingArea){case 1:pos.left=offsetX,pos.top=offsetY,pos.transform=null;break;case 2:pos.left="50%",pos.top=offsetY,pos.transform=translateX;break;case 3:pos.right=offsetX,pos.top=offsetY,pos.transform=null;break;case 4:pos.left=offsetX,pos.top="50%",pos.transform=`translateY(calc(-50% + ${offsetY}))`;break;case 5:pos.left="50%",pos.top="50%",pos.transform=`${translateX} translateY(calc(-50% + ${offsetY}))`;break;case 6:pos.right=offsetX,pos.top="50%",pos.transform=`translateY(calc(-50% + ${offsetY}))`;break;case 7:pos.left=offsetX,pos.bottom=offsetY,pos.transform=null;break;case 8:pos.left="50%",pos.bottom=offsetY,pos.transform=translateX;break;case 9:pos.right=offsetX,pos.bottom=offsetY,pos.transform=null}return jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`
    position: fixed;
    z-index: 1;
    width: ${isResizing?`${initWidth+dw}px`:(0,_utils__WEBPACK_IMPORTED_MODULE_2__.getValueOfBBox)(layoutItem.bbox,"width")};
    height: ${isResizing?`${initHeight+dh}px`:(0,_utils__WEBPACK_IMPORTED_MODULE_2__.getValueOfBBox)(layoutItem.bbox,"height")};
    left: ${pos.left};
    right: ${pos.right};
    top: ${pos.top};
    bottom: ${pos.bottom};
    transform: ${pos.transform};
  `}},"../jimu-layouts/lib/flow-layout/use-intersection.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{v:()=>useIntersection});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx");const INTERSECTION_HEIGHT=2;function buildThresholdList(){const result=[0];for(let i=1;i<=100;i++)result.push(i/100);return result}function getRootMargin(triggerType){switch(triggerType){case jimu_core__WEBPACK_IMPORTED_MODULE_0__.Lm.Top:return`0% 0% -${100-INTERSECTION_HEIGHT}% 0%`;case jimu_core__WEBPACK_IMPORTED_MODULE_0__.Lm.Bottom:return`-${100-INTERSECTION_HEIGHT}% 0% -2px 0%`;case jimu_core__WEBPACK_IMPORTED_MODULE_0__.Lm.Upper:return`-${100/3-INTERSECTION_HEIGHT/2}% 0% -${200/3-INTERSECTION_HEIGHT/2}% 0%`;case jimu_core__WEBPACK_IMPORTED_MODULE_0__.Lm.Lower:return`-${200/3-INTERSECTION_HEIGHT/2}% 0% -${100/3-INTERSECTION_HEIGHT/2}% 0%`;default:return}}function useIntersection(ref,rootElement,triggerType,onIntersectionChange){const observerRef=jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.useRef(),lastIntersecting=jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.useRef();jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.useEffect((()=>{observerRef.current&&(observerRef.current.unobserve(ref),observerRef.current=null);if(ref&&"function"==typeof IntersectionObserver){const observer=new IntersectionObserver((entries=>{(entry=>{const rect=entry.boundingClientRect,rootRect=entry.rootBounds,isTopIntersecting=Math.abs(rect.bottom-rootRect.top)>=Math.abs(rect.top-rootRect.top);if(entry.isIntersecting){if(lastIntersecting.current=!0,isTopIntersecting)onIntersectionChange(!0)}else if(lastIntersecting.current&&(lastIntersecting.current=!1,isTopIntersecting))onIntersectionChange(!1)})(entries[0])}),{threshold:buildThresholdList(),root:rootElement||document,rootMargin:getRootMargin(triggerType)});return observer.observe(ref),observerRef.current=observer,()=>{observerRef.current.unobserve(ref),observerRef.current=null}}}),[ref,rootElement,onIntersectionChange,triggerType])}},"../jimu-layouts/lib/grid-layout/common/splitter.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{O:()=>Splitter});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx");const MIN_SIZE=32;function restrictResizing(prevItemRect,nextItemRect,direction,dx,dy,isRTL){let x=dx,y=dy;if("row"===direction){const prevWidth=isRTL?nextItemRect.width:prevItemRect.width,nextWidth=isRTL?prevItemRect.width:nextItemRect.width;dx<0&&(x=prevWidth>MIN_SIZE?-Math.min(Math.abs(dx),prevWidth-MIN_SIZE):0),dx>0&&(x=nextWidth>MIN_SIZE?Math.min(dx,nextWidth-MIN_SIZE):0)}else dy<0&&(y=prevItemRect.height>MIN_SIZE?-Math.min(Math.abs(dy),prevItemRect.height-MIN_SIZE):0),dy>0&&(y=nextItemRect.height>MIN_SIZE?Math.min(dy,nextItemRect.height-MIN_SIZE):0);return{x,y}}function getSize(layoutItemElement){const layoutId=layoutItemElement.getAttribute("data-layoutid"),layoutItemId=layoutItemElement.getAttribute("data-layoutitemid");return+(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Vp3)().getState().appConfig.layouts[layoutId].content[layoutItemId].bbox.width}function Splitter(props){var _a,_b;const{referenceItemId,direction,layoutId,onResizeEnd}=props,domRef=jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.useRef(),interactableRef=jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.useRef(),interactRef=jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.useRef(null),isRTL=null!==(_b=null===(_a=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Vp3)().getState().appContext)||void 0===_a?void 0:_a.isRTL)&&void 0!==_b&&_b,isDesignMode=jimu_core__WEBPACK_IMPORTED_MODULE_0__.E_S.useSelector((state=>state.appRuntimeInfo.appMode===jimu_core__WEBPACK_IMPORTED_MODULE_0__.$0N.Design)),layoutResizable=jimu_core__WEBPACK_IMPORTED_MODULE_0__.E_S.useSelector((state=>{var _a,_b;return null===(_b=null===(_a=state.appConfig.layouts[props.layoutId].setting)||void 0===_a?void 0:_a.resizable)||void 0===_b||_b})),size=jimu_core__WEBPACK_IMPORTED_MODULE_0__.E_S.useSelector((state=>{var _a,_b;return null!==(_b=null===(_a=state.appConfig.layouts[layoutId].setting)||void 0===_a?void 0:_a.splitSize)&&void 0!==_b?_b:8})),color=jimu_core__WEBPACK_IMPORTED_MODULE_0__.E_S.useSelector((state=>{var _a,_b;return null!==(_b=null===(_a=state.appConfig.layouts[layoutId].setting)||void 0===_a?void 0:_a.splitColor)&&void 0!==_b?_b:"var(--ref-palette-neutral-500)"})),style=jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.useMemo((()=>{const pxSize=`${size}px`,canResize=!!isDesignMode||layoutResizable;return jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`
      width: ${"col"===direction?"100%":pxSize};
      height: ${"col"===direction?pxSize:"100%"};
      background: ${color};
      position: relative;
      overflow: visible;
      z-index: 20;
      flex-shrink: 0;

      .handler {
        position: absolute;
        background: transparent;
      }
      .horizontal-splitter {
        top: 0;
        bottom: 0;
        left: -5px;
        right: -5px;
        &:after {
          content: '';
          position: absolute;
          inset: 0 5px 0 0;
          cursor: ${canResize?"col-resize":"default"};
        }
      }

      .vertical-splitter {
        left: 0;
        right: 0;
        top: -5px;
        bottom: -5px;
        &:after {
          content: '';
          position: absolute;
          inset: 0 0 5px 0;
          cursor: ${canResize?"row-resize":"default"};
        }
      }
    `}),[direction,layoutResizable,isDesignMode,size,color]);return jimu_core__WEBPACK_IMPORTED_MODULE_0__.JLE.useEffectOnce((()=>{let dx,dy,parentRect,prevItem,prevItemRect,prevSize,originPrevItemWidth,originPrevItemHeight,nextItem,nextItemRect,nextSize,originNextItemWidth,originNextItemHeight;return Promise.all([__webpack_require__.e(2029),__webpack_require__.e(3033)]).then(__webpack_require__.bind(__webpack_require__,"../jimu-core/dnd.ts")).then((module=>{const interact=module.interact;interactRef.current=interact,domRef.current&&(interactableRef.current=interact(domRef.current).origin("parent").draggable({inertia:!1,autoScroll:!1,enabled:!!isDesignMode||layoutResizable,modifiers:[interact.modifiers.restrict({restriction:"parent"})],lockAxis:"row"===direction?"x":"y",onstart:event=>{event.stopPropagation(),dx=0,dy=0,parentRect=domRef.current.parentElement.getBoundingClientRect(),prevItem=domRef.current.previousElementSibling,prevItemRect=prevItem.getBoundingClientRect(),originPrevItemWidth=prevItem.style.width,originPrevItemHeight=prevItem.style.height,prevSize=getSize(prevItem),nextItem=domRef.current.nextElementSibling,nextItemRect=nextItem.getBoundingClientRect(),originNextItemWidth=nextItem.style.width,originNextItemHeight=nextItem.style.height,nextSize=getSize(nextItem)},onmove:event=>{event.stopPropagation(),dx+=event.dx,dy+=event.dy;const{x,y}=restrictResizing(prevItemRect,nextItemRect,direction,dx,dy,isRTL),factor=isRTL?-1:1;"row"===direction?(prevItem.style.width=`calc(${prevSize}% + ${x*factor}px)`,nextItem.style.width=`calc(${nextSize}% - ${x*factor}px)`):(prevItem.style.height=`calc(${prevSize}% + ${y}px)`,nextItem.style.height=`calc(${nextSize}% - ${y}px)`)},onend:event=>{event.stopPropagation(),dx+=event.dx,dy+=event.dy;const{x,y}=restrictResizing(prevItemRect,nextItemRect,direction,dx,dy,isRTL),factor=isRTL?-1:1;prevItem.style.width=originPrevItemWidth,nextItem.style.width=originNextItemWidth,prevItem.style.height=originPrevItemHeight,nextItem.style.height=originNextItemHeight,onResizeEnd(referenceItemId,Math.round(x*factor*1e4/parentRect.width)/100,Math.round(1e4*y/parentRect.height)/100)}}))})),()=>{var _a;null===(_a=interactableRef.current)||void 0===_a||_a.unset(),interactableRef.current=null}})),jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.useEffect((()=>{null!=interactableRef.current&&interactRef.current(domRef.current).draggable(!!isDesignMode||layoutResizable)}),[layoutResizable,isDesignMode]),(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Yac)("div",{ref:domRef,css:style,className:"grid-split flex-shrink-0"},(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Yac)("div",{className:(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.xWm)("handler",{"horizontal-splitter":"row"===direction,"vertical-splitter":"col"===direction})}))}try{Splitter.displayName="Splitter",Splitter.__docgenInfo={description:"",displayName:"Splitter",props:{referenceItemId:{defaultValue:null,description:"",name:"referenceItemId",required:!0,type:{name:"string"}},direction:{defaultValue:null,description:"",name:"direction",required:!0,type:{name:"enum",value:[{value:'"row"'},{value:'"col"'}]}},layoutId:{defaultValue:null,description:"",name:"layoutId",required:!0,type:{name:"string"}},onResizeEnd:{defaultValue:null,description:"",name:"onResizeEnd",required:!1,type:{name:"(id: string, dx: number, dy: number) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/grid-layout/common/splitter.tsx#Splitter"]={docgenInfo:Splitter.__docgenInfo,name:"Splitter",path:"../jimu-layouts/lib/grid-layout/common/splitter.tsx#Splitter"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-layouts/lib/grid-layout/common/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{T9:()=>getLabelOfGridTab,a2:()=>getGridItem,be:()=>isLastChildOfRootItem,jG:()=>indexOfPlainContent,lC:()=>calPaddingStyle,tq:()=>isExpandable});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),jimu_ui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-ui/index.tsx");function indexOfPlainContent(layout,layoutItemId){var _a,_b;let start=0;const rootItem=getGridItem(layout,layout.setting.rootItem);if(rootItem&&(null===(_a=rootItem.children)||void 0===_a?void 0:_a.length)>0){const candidates=[...rootItem.children];for(;candidates.length>0;){const firstItemId=candidates.shift(),firstItem=getGridItem(layout,firstItemId),parentItem=getGridItem(layout,firstItem.parent);if(`${firstItem.id}`===layoutItemId||parentItem.gridType===jimu_core__WEBPACK_IMPORTED_MODULE_0__.Qwn.Tab&&parentItem.children.includes(layoutItemId))return start;(null===(_b=firstItem.children)||void 0===_b?void 0:_b.length)>0?candidates.unshift(...firstItem.children):(parentItem.gridType!==jimu_core__WEBPACK_IMPORTED_MODULE_0__.Qwn.Tab||parentItem.gridType===jimu_core__WEBPACK_IMPORTED_MODULE_0__.Qwn.Tab&&0===parentItem.children.indexOf(firstItemId))&&(start+=1)}}return start}function isLastChildOfRootItem(layout,layoutItemId){var _a;let currentItem=getGridItem(layout,layoutItemId);if((null===(_a=null==currentItem?void 0:currentItem.children)||void 0===_a?void 0:_a.length)>0)return!1;for(;null!=currentItem;){const parentId=currentItem.parent;if(null==parentId)break;const parentItem=getGridItem(layout,parentId),len=parentItem.children.length;if(+parentItem.children[len-1]!=+currentItem.id)return!1;currentItem=parentItem}return!0}function isExpandable(state,layoutId,layoutItemId){var _a,_b;const layout=state.appConfig.layouts[layoutId],layoutItem=layout.content[layoutItemId];if(!(null===(_a=null==layoutItem?void 0:layoutItem.expandable)||void 0===_a||_a))return!1;const rootItem=null===(_b=null==layout?void 0:layout.setting)||void 0===_b?void 0:_b.rootItem;let isOnlyItem=!1;if(rootItem===layoutItemId){const rootLayoutItem=getGridItem(layout,rootItem);null!=rootLayoutItem.children&&0!==rootLayoutItem.children.length||(isOnlyItem=!0)}return!isOnlyItem}function getGridItem(layout,layoutItemId){var _a;return null===(_a=layout.content)||void 0===_a?void 0:_a[layoutItemId]}function getLabelOfGridTab(appConfig,layoutInfo,translate){var _a,_b,_c,_d,_e,_f,_g;const{layoutId,layoutItemId}=layoutInfo,layoutItem=appConfig.layouts[layoutId].content[layoutItemId];if((null==layoutItem?void 0:layoutItem.type)===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget){const widget=appConfig.widgets[layoutItem.widgetId];return widget?null!==(_b=null!==(_a=null==widget?void 0:widget.label)&&void 0!==_a?_a:layoutItem.label)&&void 0!==_b?_b:layoutItem.id:translate("placeholder")}if((null==layoutItem?void 0:layoutItem.type)===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Section){return appConfig.sections[layoutItem.sectionId].label}return(null==layoutItem?void 0:layoutItem.gridType)===jimu_core__WEBPACK_IMPORTED_MODULE_0__.Qwn.Row?null!==(_c=layoutItem.label)&&void 0!==_c?_c:translate("gridRow"):(null==layoutItem?void 0:layoutItem.gridType)===jimu_core__WEBPACK_IMPORTED_MODULE_0__.Qwn.Column?null!==(_d=layoutItem.label)&&void 0!==_d?_d:translate("gridCol"):(null==layoutItem?void 0:layoutItem.gridType)===jimu_core__WEBPACK_IMPORTED_MODULE_0__.Qwn.Tab?null!==(_e=layoutItem.label)&&void 0!==_e?_e:translate("tabs"):null!==(_g=null!==(_f=null==layoutItem?void 0:layoutItem.label)&&void 0!==_f?_f:null==layoutItem?void 0:layoutItem.id)&&void 0!==_g?_g:""}function calPaddingStyle(layoutSetting){var _a;const padding=jimu_ui__WEBPACK_IMPORTED_MODULE_1__.styleUtils.toCSSPadding(null===(_a=null==layoutSetting?void 0:layoutSetting.style)||void 0===_a?void 0:_a.padding);if(padding){if(layoutSetting.paddingColor){const paddingTokens=padding.split(" "),paddingColor=layoutSetting.paddingColor;let prefix="";const ua=window.jimuUA.browser.name.toLowerCase();return"firefox"===ua?prefix="-moz-":"safari"!==ua&&"chrome"!==ua||(prefix="-webkit-"),jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`
        padding: ${padding};
        background-image:
        ${prefix}linear-gradient(270deg, ${paddingColor} ${paddingTokens[0]}, transparent ${paddingTokens[0]}),
        ${prefix}linear-gradient(180deg, ${paddingColor} ${paddingTokens[1]}, transparent ${paddingTokens[1]}),
        ${prefix}linear-gradient(90deg, ${paddingColor} ${paddingTokens[2]}, transparent ${paddingTokens[2]}),
        ${prefix}linear-gradient(0deg, ${paddingColor} ${paddingTokens[3]}, transparent ${paddingTokens[3]});
      `}return jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`
      padding: ${padding};
    `}}},"../jimu-layouts/lib/grid-layout/layout-transform.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{K:()=>GridLayoutTransformer});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-layouts/layout-runtime.tsx");class GridLayoutTransformer{constructor(){this.id="grid-layout-transformer",this.layoutType=jimu_core__WEBPACK_IMPORTED_MODULE_0__.p5K.GridLayout,this.transformLayout=(layout,fromSizeMode,toSizeMode)=>{var _a,_b,_c;if(fromSizeMode!==toSizeMode&&toSizeMode===jimu_core__WEBPACK_IMPORTED_MODULE_0__.rHp.Small){let updatedLayout=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.J3Z)(layout);const rootId=null===(_a=layout.setting)||void 0===_a?void 0:_a.rootItem,mainItemId=null===(_b=layout.setting)||void 0===_b?void 0:_b.mainItemId;if(rootId&&(null===(_c=layout.content)||void 0===_c?void 0:_c[rootId])){const contentIds=[],rootItem=layout.content[rootId];if(mainItemId){let mainLayoutItemId;if(Object.keys(layout.content).some((itemId=>{const item=layout.content[itemId];return(item.widgetId===mainItemId||item.sectionId===mainItemId)&&(mainLayoutItemId=itemId,!0)})),mainLayoutItemId){if(updatedLayout=this.collectItem(layout,rootId,mainLayoutItemId,rootItem.children,contentIds),(null==contentIds?void 0:contentIds.length)>0){const nextLayoutItemId=`${jimu_layouts_layout_runtime__WEBPACK_IMPORTED_MODULE_1__.utils.getMaximumId(layout)+1}`,tabLayoutItem={id:nextLayoutItemId,bbox:{width:50},gridType:jimu_core__WEBPACK_IMPORTED_MODULE_0__.Qwn.Tab,children:contentIds,parent:rootId};updatedLayout=updatedLayout.setIn(["content",nextLayoutItemId],tabLayoutItem),contentIds.forEach((itemId=>{updatedLayout=updatedLayout.setIn(["content",itemId,"parent"],nextLayoutItemId)})),updatedLayout=updatedLayout.setIn(["content",rootId,"gridType"],jimu_core__WEBPACK_IMPORTED_MODULE_0__.Qwn.Column),updatedLayout=updatedLayout.setIn(["content",rootId,"children"],[mainLayoutItemId,nextLayoutItemId]),updatedLayout=updatedLayout.setIn(["content",mainLayoutItemId,"parent"],rootId).setIn(["content",mainLayoutItemId,"bbox","width"],50)}return updatedLayout}}updatedLayout=this.collectItem(layout,rootId,null,rootItem.children,contentIds),contentIds.length>0&&(updatedLayout=updatedLayout.setIn(["content",rootId,"gridType"],jimu_core__WEBPACK_IMPORTED_MODULE_0__.Qwn.Tab),updatedLayout=updatedLayout.setIn(["content",rootId,"children"],contentIds))}return updatedLayout}return layout},this.collectItem=(layout,rootId,mainItem,childIds,itemList)=>{let updatedLayout=layout;return null==childIds||childIds.forEach((itemId=>{var _a;if(!layout.content[itemId].isPending&&itemId!==mainItem){const item=layout.content[itemId];item.gridType!==jimu_core__WEBPACK_IMPORTED_MODULE_0__.Qwn.Column&&item.gridType!==jimu_core__WEBPACK_IMPORTED_MODULE_0__.Qwn.Row&&item.gridType!==jimu_core__WEBPACK_IMPORTED_MODULE_0__.Qwn.Tab?(itemList.push(itemId),mainItem||(updatedLayout=updatedLayout.setIn(["content",itemId,"parent"],rootId))):(null===(_a=item.children)||void 0===_a?void 0:_a.length)>0&&(updatedLayout=this.collectItem(updatedLayout,rootId,mainItem,item.children,itemList))}})),updatedLayout}}transformLayoutItem(item,index,fromLayoutId,toLayoutId,fromSizeMode,toSizeMode){return{index,item}}}},"../jimu-layouts/lib/row-layout/common/util.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{j:()=>getItemStyle});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-layouts/lib/utils.ts");function getItemStyle(isMultiRow,sign,gutter,mergedStyle,itemSetting){var _a,_b,_c,_d;return isMultiRow?[jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`
        padding: ${gutter/2}px 0;
        height: ${_utils__WEBPACK_IMPORTED_MODULE_1__.getValueOfBBox(mergedStyle,"height")};
        align-self: ${mergedStyle.alignSelf};
      `,0!==itemSetting.offsetX||0!==itemSetting.offsetY?`translate(${(null!==(_a=itemSetting.offsetX)&&void 0!==_a?_a:0)*sign}px, ${null!==(_b=itemSetting.offsetY)&&void 0!==_b?_b:0}px)`:null]:[jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`
      padding: 0 ${gutter/2}px;
      height: ${_utils__WEBPACK_IMPORTED_MODULE_1__.getValueOfBBox(mergedStyle,"height")};
      align-self: ${mergedStyle.alignSelf};
    `,0!==itemSetting.offsetX||0!==itemSetting.offsetY?`translate(${(null!==(_c=itemSetting.offsetX)&&void 0!==_c?_c:0)*sign}px, ${null!==(_d=itemSetting.offsetY)&&void 0!==_d?_d:0}px)`:null]}},"../jimu-layouts/lib/row-layout/default-setting.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>DEFAULT_ROW_ITEM_SETTING,r:()=>DEFAULT_ROW_LAYOUT_SETTING});const DEFAULT_ROW_LAYOUT_SETTING={space:10,style:{padding:{number:[10,10,10,10],unit:__webpack_require__("../jimu-ui/index.tsx").DistanceUnits.PIXEL}}},DEFAULT_ROW_ITEM_SETTING={heightMode:"fixed",aspectRatio:1,offsetX:0,offsetY:0,style:{alignSelf:"flex-start"}}},"../jimu-layouts/lib/row-layout/layout-transform.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{kF:()=>RowLayoutTransformer});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_search__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-layouts/lib/search/index.ts"),_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../jimu-layouts/lib/utils.ts"),_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../jimu-layouts/lib/row-layout/types.ts");function getHeightOfLayoutItems(appConfig,widgetsState,layoutId){var _a;const widgetId=_search__WEBPACK_IMPORTED_MODULE_1__.getWidgetIdThatUseTheLayoutId(appConfig,layoutId),widgetHeight=function getWidgetHeight(appConfig,widgetsState,widgetId){var _a,_b,_c,_d,_e,_f,_g;const widgetJson=appConfig.widgets[widgetId];if(null!=widgetJson){const browserSizeMode=_utils__WEBPACK_IMPORTED_MODULE_2__.getCurrentSizeMode(),mainSizeMode=appConfig.mainSizeMode,layoutId=widgetJson.layouts.DEFAULT[browserSizeMode],mainLayoutId=widgetJson.layouts.DEFAULT[mainSizeMode],padding=null!==(_e=null===(_d=null===(_c=null===(_b=(null!==(_a=appConfig.layouts[layoutId])&&void 0!==_a?_a:appConfig.layouts[mainLayoutId]).setting)||void 0===_b?void 0:_b.style)||void 0===_c?void 0:_c.padding)||void 0===_d?void 0:_d.number)&&void 0!==_e?_e:[0],paddingValues=_utils__WEBPACK_IMPORTED_MODULE_2__.expandStyleArray(padding),widgetHeight=null!==(_g=null===(_f=null==widgetsState?void 0:widgetsState[widgetId])||void 0===_f?void 0:_f.height)&&void 0!==_g?_g:0;let pt=paddingValues[0],pb=paddingValues[2];return _utils__WEBPACK_IMPORTED_MODULE_2__.isPercentage(pt)&&(pt=_utils__WEBPACK_IMPORTED_MODULE_2__.fromRatio(pt,widgetHeight)),_utils__WEBPACK_IMPORTED_MODULE_2__.isPercentage(pb)&&(pb=_utils__WEBPACK_IMPORTED_MODULE_2__.fromRatio(pb,widgetHeight)),widgetHeight-pt-pb}return 0}(appConfig,widgetsState,widgetId);if(widgetHeight>0){const itemIds=null!==(_a=appConfig.layouts[layoutId].order)&&void 0!==_a?_a:[],result={};return itemIds.forEach((itemId=>{const layoutItem=appConfig.layouts[layoutId].content[itemId];result[itemId]=_utils__WEBPACK_IMPORTED_MODULE_2__.calHeightOfLayoutItem(widgetHeight,layoutItem)})),result}return null}class RowLayoutTransformer{constructor(){this.id="row-layout-transformer",this.layoutType=jimu_core__WEBPACK_IMPORTED_MODULE_0__.p5K.RowLayout}transformLayout(layout,fromSizeMode,toSizeMode,appConfig){var _a,_b;if(fromSizeMode===toSizeMode)return layout;let updatedLayout=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.J3Z)(layout);if(toSizeMode===jimu_core__WEBPACK_IMPORTED_MODULE_0__.rHp.Small){const itemHeights=getHeightOfLayoutItems(appConfig,null===(_a=window.runtimeInfo)||void 0===_a?void 0:_a.widgets,layout.id);let index=0;Object.keys(null!==(_b=layout.content)&&void 0!==_b?_b:{}).sort(((a,b)=>parseInt(layout.content[a].bbox.left,10)-parseInt(layout.content[b].bbox.left,10))).forEach((itemId=>{var _a,_b,_c;const layoutItem=layout.content[itemId];if(!layoutItem.isPending){if(updatedLayout=updatedLayout.setIn(["content",itemId,"bbox"],{left:index*_types__WEBPACK_IMPORTED_MODULE_3__.$,width:_types__WEBPACK_IMPORTED_MODULE_3__.$,height:null!==(_b=null===(_a=layoutItem.bbox)||void 0===_a?void 0:_a.height)&&void 0!==_b?_b:"auto"}),null!=itemHeights){const setting=null!==(_c=layoutItem.setting)&&void 0!==_c?_c:(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.J3Z)({});updatedLayout=updatedLayout.setIn(["content",itemId,"bbox","height"],itemHeights[itemId].height).setIn(["content",itemId,"setting"],setting.merge(itemHeights[itemId].setting))}index+=1}}))}return updatedLayout}transformLayoutItem(item,index,fromLayoutId,toLayoutId,fromSizeMode,toSizeMode){return{item,index}}}},"../jimu-layouts/lib/row-layout/types.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$:()=>TOTAL_COLS,A:()=>MIN_SPAN});const MIN_SPAN=2,TOTAL_COLS=12},"../jimu-layouts/lib/row-layout/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Js:()=>flipRowItemPos,lD:()=>calItemHeight,z$:()=>ROW_STYLE});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../jimu-layouts/lib/row-layout/types.ts"),_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-layouts/lib/types.ts");const ROW_STYLE=jimu_core__WEBPACK_IMPORTED_MODULE_0__.AHW`
  width: 100%;
  display: flex;
  justify-content: center;

  .offset-1 {
    margin-left: 8.33333%;
    margin-right: 0;
  }
  .offset-2 {
    margin-left: 16.66667%;
    margin-right: 0;
  }
  .offset-3 {
    margin-left: 25%;
    margin-right: 0;
  }
  .offset-4 {
    margin-left: 33.33333%;
    margin-right: 0;
  }
  .offset-5 {
    margin-left: 41.66667%;
    margin-right: 0;
  }
  .offset-6 {
    margin-left: 50%;
    margin-right: 0;
  }
  .offset-7 {
    margin-left: 58.33333%;
    margin-right: 0;
  }
  .offset-8 {
    margin-left: 66.66667%;
    margin-right: 0;
  }
  .offset-9 {
    margin-left: 75%;
    margin-right: 0;
  }
  .offset-10 {
    margin-left: 83.33333%;
    margin-right: 0;
  }
  .offset-11 {
    margin-left: 91.66667%;
    margin-right: 0;
  }
`;function flipRowItemPos(bbox){return(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.J3Z)(bbox).set("left",_types__WEBPACK_IMPORTED_MODULE_2__.$-parseInt(bbox.left,10)-parseInt(bbox.width,10))}function calItemHeight(itemSetting,bbox,isMultiRow){var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m,_o,_p;return isMultiRow?{height:(null===(_a=itemSetting.autoProps)||void 0===_a?void 0:_a.height)===_types__WEBPACK_IMPORTED_MODULE_1__.Dy.Auto?"auto":bbox.height,alignSelf:null!==(_c=null===(_b=itemSetting.style)||void 0===_b?void 0:_b.alignSelf)&&void 0!==_c?_c:"flex-start"}:"ratio"===itemSetting.heightMode?{alignSelf:null!==(_e=null===(_d=itemSetting.style)||void 0===_d?void 0:_d.alignSelf)&&void 0!==_e?_e:"flex-start"}:(null===(_f=itemSetting.autoProps)||void 0===_f?void 0:_f.height)===_types__WEBPACK_IMPORTED_MODULE_1__.Dy.Auto?{height:"auto",alignSelf:null!==(_h=null===(_g=itemSetting.style)||void 0===_g?void 0:_g.alignSelf)&&void 0!==_h?_h:"flex-start"}:(null===(_j=itemSetting.autoProps)||void 0===_j?void 0:_j.height)===_types__WEBPACK_IMPORTED_MODULE_1__.Dy.Custom?{height:bbox.height,alignSelf:null!==(_l=null===(_k=itemSetting.style)||void 0===_k?void 0:_k.alignSelf)&&void 0!==_l?_l:"flex-start"}:(null===(_m=itemSetting.autoProps)||void 0===_m?void 0:_m.height)===_types__WEBPACK_IMPORTED_MODULE_1__.Dy.Stretch||"fit"===itemSetting.heightMode?{alignSelf:"stretch"}:parseFloat(bbox.height)>0?{height:bbox.height,alignSelf:null!==(_p=null===(_o=itemSetting.style)||void 0===_o?void 0:_o.alignSelf)&&void 0!==_p?_p:"flex-start"}:{alignSelf:"stretch"}}},"../jimu-layouts/lib/runtime/section-renderer-base.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{S:()=>SectionRendererBase});var jimu_core=__webpack_require__("../jimu-core/index.tsx"),types=__webpack_require__("../jimu-layouts/lib/types.ts"),jimu_ui=__webpack_require__("../jimu-ui/index.tsx"),jimu_theme=__webpack_require__("../jimu-theme/index.ts");function getBackgroundStyle(view,bgColor){if(!view)return null;let backgroundImage={};view.backgroundIMage&&(backgroundImage="string"==typeof view.backgroundIMage?{}:view.backgroundIMage);const fillType=view.backgroundPosition?jimu_ui.FillType[view.backgroundPosition.toUpperCase()]:jimu_ui.FillType.FILL;let color;color=null==view.backgroundColor?bgColor:""===view.backgroundColor?"transparent":view.backgroundColor?view.backgroundColor:"";const backgroundConfig={color,fillType,image:backgroundImage};return jimu_ui.styleUtils.toBackgroundStyle(backgroundConfig)}function ViewContent(props){var _a,_b;const{viewId,isActive,layoutEntryComponent,viewVisibilityContext}=props,view=jimu_core.E_S.useSelector((state=>{var _a,_b;return null===(_b=null===(_a=state.appConfig)||void 0===_a?void 0:_a.views)||void 0===_b?void 0:_b[viewId]})),bgColor=null===(_b=null===(_a=(0,jimu_theme.DP)())||void 0===_a?void 0:_a.body)||void 0===_b?void 0:_b.bg,LayoutEntry=layoutEntryComponent,ViewVisibilityContext=viewVisibilityContext,[started,setStarted]=jimu_core.q_G.useState(!1),viewVisibility=jimu_core.q_G.useMemo((()=>({isInView:!0,isInCurrentView:isActive})),[isActive]);return jimu_core.q_G.useEffect((()=>{isActive&&view.lazyLoad&&!started&&setStarted(!0)}),[isActive,view.lazyLoad,started]),(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)("w-100 h-100 d-flex section-view",{[jimu_ui.FOCUSABLE_CONTAINER_CLASS]:isActive}),style:getBackgroundStyle(view,bgColor),css:jimu_core.AHW`&, .exb-drop-area { pointer-events: ${isActive?"auto":"none"}; }`,key:viewId,id:`${view.parent}_${view.id}`},(started||!view.lazyLoad)&&(0,jimu_core.Yac)(jimu_core.tHk,null,(0,jimu_core.Yac)(ViewVisibilityContext.Provider,{value:viewVisibility},(0,jimu_core.Yac)(LayoutEntry,{layouts:null==view?void 0:view.layout,isInSection:!0,className:"w-100"}))))}try{ViewContent.displayName="ViewContent",ViewContent.__docgenInfo={description:"",displayName:"ViewContent",props:{viewId:{defaultValue:null,description:"",name:"viewId",required:!0,type:{name:"string"}},isActive:{defaultValue:null,description:"",name:"isActive",required:!0,type:{name:"boolean"}},layoutEntryComponent:{defaultValue:null,description:"",name:"layoutEntryComponent",required:!0,type:{name:"ComponentClass<LayoutProps, any>"}},viewVisibilityContext:{defaultValue:null,description:"",name:"viewVisibilityContext",required:!0,type:{name:"ComponentClass<{}, any>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/runtime/view-content.tsx#ViewContent"]={docgenInfo:ViewContent.__docgenInfo,name:"ViewContent",path:"../jimu-layouts/lib/runtime/view-content.tsx#ViewContent"})}catch(__react_docgen_typescript_loader_error){}function SectionContent(props){var _a,_b;const{views,navInfo,animationPreview,playMode,currentIndex,previousIndex,progress,loop,viewTransition}=props,isPreviewOneByOne=animationPreview&&playMode===jimu_core.G6p.OneByOne,{setting,playId}=jimu_core.q_G.useContext(jimu_core.e8P),isDesignMode=jimu_core.E_S.useSelector((state=>{var _a;return!setting||setting.type===jimu_core.J6N.None||(null===(_a=state.appRuntimeInfo)||void 0===_a?void 0:_a.appMode)===jimu_core.$0N.Design})),animationSetting=!isDesignMode||isPreviewOneByOne||(null==navInfo?void 0:navInfo.playId)&&(null==navInfo?void 0:navInfo.withOneByOne)?setting:null,animationContext=jimu_core.q_G.useMemo((()=>({setting:animationSetting,playId:isPreviewOneByOne?playId:null})),[animationSetting,isPreviewOneByOne,playId]);return(0,jimu_core.Yac)(jimu_core.e8P.Provider,{value:animationContext},(0,jimu_core.Yac)("div",{className:"section-content"},(0,jimu_core.Yac)(jimu_core.hk0,{useProgress:null!==(_a=null==navInfo?void 0:navInfo.useProgress)&&void 0!==_a&&_a,useStep:null!==(_b=null==navInfo?void 0:navInfo.useStep)&&void 0!==_b&&_b,previousIndex,currentIndex,progress,transitionType:null==viewTransition?void 0:viewTransition.type,direction:null==viewTransition?void 0:viewTransition.direction,playId:null==navInfo?void 0:navInfo.playId,withOneByOne:null==navInfo?void 0:navInfo.withOneByOne,loop},views.map((viewId=>{const isActive=viewId===views[currentIndex];return(0,jimu_core.Yac)(ViewContent,{key:viewId,viewId,isActive,layoutEntryComponent:props.layoutEntryComponent,viewVisibilityContext:props.viewVisibilityContext})})))))}try{SectionContent.displayName="SectionContent",SectionContent.__docgenInfo={description:"",displayName:"SectionContent",props:{views:{defaultValue:null,description:"",name:"views",required:!0,type:{name:"ImmutableArray<string>"}},navInfo:{defaultValue:null,description:"",name:"navInfo",required:!0,type:{name:"IMSectionNavInfo"}},animationPreview:{defaultValue:null,description:"",name:"animationPreview",required:!0,type:{name:"boolean"}},playMode:{defaultValue:null,description:"",name:"playMode",required:!0,type:{name:"enum",value:[{value:'"AS_ONE"'},{value:'"ONE_BY_ONE"'}]}},currentIndex:{defaultValue:null,description:"",name:"currentIndex",required:!0,type:{name:"number"}},previousIndex:{defaultValue:null,description:"",name:"previousIndex",required:!0,type:{name:"number"}},progress:{defaultValue:null,description:"",name:"progress",required:!0,type:{name:"number"}},loop:{defaultValue:null,description:"",name:"loop",required:!0,type:{name:"boolean"}},viewTransition:{defaultValue:null,description:"",name:"viewTransition",required:!0,type:{name:"{ type: TransitionType; direction: TransitionDirection; }"}},layoutEntryComponent:{defaultValue:null,description:"",name:"layoutEntryComponent",required:!0,type:{name:"ComponentClass<LayoutProps, any>"}},viewVisibilityContext:{defaultValue:null,description:"",name:"viewVisibilityContext",required:!0,type:{name:"ComponentClass<{}, any>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/runtime/section-content.tsx#SectionContent"]={docgenInfo:SectionContent.__docgenInfo,name:"SectionContent",path:"../jimu-layouts/lib/runtime/section-content.tsx#SectionContent"})}catch(__react_docgen_typescript_loader_error){}var left=__webpack_require__("../jimu-icons/outlined/directional/left.tsx"),right=__webpack_require__("../jimu-icons/outlined/directional/right.tsx");function SectionNav(props){var _a,_b,_c;const{sectionId,currentIndex,numOfViews,onCurrentViewChange}=props,translate=jimu_core.JLE.useTranslation(jimu_ui.defaultMessages),arrowsNav=jimu_core.E_S.useSelector((state=>{var _a;return null===(_a=state.appConfig.sections[sectionId])||void 0===_a?void 0:_a.arrowsNav})),dotsNav=jimu_core.E_S.useSelector((state=>{var _a;return null===(_a=state.appConfig.sections[sectionId])||void 0===_a?void 0:_a.dotsNav})),viewLabelString=jimu_core.E_S.useSelector((state=>{if(null==dotsNav?void 0:dotsNav.visible){const sectionJson=state.appConfig.sections[sectionId],views=null==sectionJson?void 0:sectionJson.views;if((null==views?void 0:views.length)>0){return views.map((view=>state.appConfig.views[view].label)).join(";")}}return""})),viewLabels=jimu_core.q_G.useMemo((()=>viewLabelString.length>0?viewLabelString.split(";"):[]),[viewLabelString]),dotsNavPosition=null!==(_a=null==dotsNav?void 0:dotsNav.position)&&void 0!==_a?_a:"b",dots=jimu_core.q_G.useMemo((()=>{const result=[];for(let i=0;i<numOfViews;i++)result.push(i);return result}),[numOfViews]),arrowStyle=()=>{var _a,_b,_c,_d;return jimu_core.AHW`
      position: absolute;
      cursor: pointer;
      pointer-events: auto;

      &.disabled {
        cursor: default;
        svg {
          color: var(--ref-palette-neutral-500);
        }
      }

      &.first {
        left: ${null!==(_a=arrowsNav.offset)&&void 0!==_a?_a:8}px;
        top: 50%;
        transform: translateY(-50%);

        &.vertical {
          top: ${null!==(_b=arrowsNav.offset)&&void 0!==_b?_b:8}px;
          left: 50%;
          transform: translateX(-50%) rotate(90deg);
        }
      }
      &.second {
        right: ${null!==(_c=arrowsNav.offset)&&void 0!==_c?_c:8}px;
        top: 50%;
        transform: translateY(-50%);

        &.vertical {
          bottom: ${null!==(_d=arrowsNav.offset)&&void 0!==_d?_d:8}px;
          left: 50%;
          top: auto;
          right: auto;
          transform: translateX(-50%) rotate(90deg);
        }
      }
    `},createDot=jimu_core.q_G.useCallback(((index,isActive)=>{var _a;return(0,jimu_core.Yac)(jimu_ui.Button,{key:index,type:"tertiary","aria-label":null!==(_a=viewLabels[index])&&void 0!==_a?_a:"",className:(0,jimu_core.xWm)("dot p-0 rounded-circle",{active:isActive,disabled:numOfViews<=1}),onClick:isActive?void 0:()=>{onCurrentViewChange(index)}})}),[onCurrentViewChange,numOfViews,viewLabels]),previousView=jimu_core.q_G.useCallback((()=>{onCurrentViewChange(currentIndex>0?currentIndex-1:numOfViews-1)}),[currentIndex,numOfViews,onCurrentViewChange]),nextView=jimu_core.q_G.useCallback((()=>{onCurrentViewChange(currentIndex<numOfViews-1?currentIndex+1:0)}),[currentIndex,numOfViews,onCurrentViewChange]),hasPreviousView=numOfViews>1&&0!==currentIndex,hasNextView=numOfViews>1&&currentIndex!==numOfViews-1;return(0,jimu_core.Yac)(jimu_core.q_G.Fragment,null,(null==arrowsNav?void 0:arrowsNav.visible)&&(0,jimu_core.Yac)(jimu_core.q_G.Fragment,null,(0,jimu_core.Yac)(jimu_ui.Button,{type:"tertiary",disabled:!hasPreviousView,className:(0,jimu_core.xWm)("arrows-nav first p-0",{vertical:"v"===arrowsNav.direction}),css:arrowStyle(),onClick:hasPreviousView?previousView:null,"aria-label":translate("previous")},(0,jimu_core.Yac)(left.Y,{className:"m-0",autoFlip:"v"!==arrowsNav.direction,size:null!==(_b=arrowsNav.size)&&void 0!==_b?_b:20})),(0,jimu_core.Yac)(jimu_ui.Button,{type:"tertiary",disabled:!hasNextView,className:(0,jimu_core.xWm)("arrows-nav second p-0",{vertical:"v"===arrowsNav.direction}),css:arrowStyle(),onClick:hasNextView?nextView:null,"aria-label":translate("next")},(0,jimu_core.Yac)(right.X,{className:"m-0",autoFlip:"v"!==arrowsNav.direction,size:null!==(_c=arrowsNav.size)&&void 0!==_c?_c:20}))),(null==dotsNav?void 0:dotsNav.visible)&&(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)("dots-nav",{"snap-left":"l"===dotsNavPosition,"snap-top":"t"===dotsNavPosition,"snap-right":"r"===dotsNavPosition,"snap-bottom":"b"===dotsNavPosition}),css:(()=>{var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m,_o,_p;return jimu_core.AHW`
      position: absolute;
      display: flex;
      flex-direction: ${"l"===dotsNavPosition||"r"===dotsNavPosition?"column":"row"};
      justify-content: center;
      align-items: center;
      overflow: visible;
      pointer-events: none;
      background: transparent;

      .dot {
        pointer-events: all;
        cursor: pointer;
        border: 1px solid var(--ref-palette-neutral-500);
        background: var(--ref-palette-neutral-200);
        width: ${null!==(_a=dotsNav.size)&&void 0!==_a?_a:8}px;
        height: ${null!==(_b=dotsNav.size)&&void 0!==_b?_b:8}px;

        &.active {
          border-color: var(--ref-palette-white);
          background: var(--sys-color-primary-main);
          width: ${dotsNav.size>0?1.5*dotsNav.size:12}px;
          height: ${dotsNav.size>0?1.5*dotsNav.size:12}px;
        }

        &.disabled {
          cursor: default;
        }
      }

      &.snap-left {
        height: 100%;
        top: 0;
        left: ${null!==(_c=dotsNav.offset)&&void 0!==_c?_c:50}px;
        width: ${null!==(_d=dotsNav.size)&&void 0!==_d?_d:8}px;

        > button:not(:first-of-type) {
          margin-top: ${null!==(_e=dotsNav.spacing)&&void 0!==_e?_e:10}px;
        }
      }
      &.snap-right {
        height: 100%;
        top: 0;
        right: ${null!==(_f=dotsNav.offset)&&void 0!==_f?_f:50}px;
        width: ${null!==(_g=dotsNav.size)&&void 0!==_g?_g:8}px;

        > button:not(:first-of-type) {
          margin-top: ${null!==(_h=dotsNav.spacing)&&void 0!==_h?_h:10}px;
        }
      }
      &.snap-top {
        width: 100%;
        top: ${null!==(_j=dotsNav.offset)&&void 0!==_j?_j:50}px;
        height: ${null!==(_k=dotsNav.size)&&void 0!==_k?_k:8}px;

        > button:not(:first-of-type) {
          margin-left: ${null!==(_l=dotsNav.spacing)&&void 0!==_l?_l:10}px;
        }
      }
      &.snap-bottom {
        width: 100%;
        bottom: ${null!==(_m=dotsNav.offset)&&void 0!==_m?_m:50}px;
        height: ${null!==(_o=dotsNav.size)&&void 0!==_o?_o:8}px;

        > button:not(:first-of-type) {
          margin-left: ${null!==(_p=dotsNav.spacing)&&void 0!==_p?_p:10}px;
        }
      }
    `})()},dots.map((index=>createDot(index,index===currentIndex)))))}try{SectionNav.displayName="SectionNav",SectionNav.__docgenInfo={description:"",displayName:"SectionNav",props:{sectionId:{defaultValue:null,description:"",name:"sectionId",required:!0,type:{name:"string"}},currentIndex:{defaultValue:null,description:"",name:"currentIndex",required:!0,type:{name:"number"}},numOfViews:{defaultValue:null,description:"",name:"numOfViews",required:!0,type:{name:"number"}},onCurrentViewChange:{defaultValue:null,description:"",name:"onCurrentViewChange",required:!0,type:{name:"(index: number) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/runtime/section-nav.tsx#SectionNav"]={docgenInfo:SectionNav.__docgenInfo,name:"SectionNav",path:"../jimu-layouts/lib/runtime/section-nav.tsx#SectionNav"})}catch(__react_docgen_typescript_loader_error){}function useAutoPlay(props){const{sectionId,autoPlay,interval=types.yd,loop=!1}=props,playHandlerRef=jimu_core.q_G.useRef(),isAutoplaySuspendMode=jimu_core.E_S.useSelector((state=>{var _a,_b;return autoPlay?(null===(_a=state.appRuntimeInfo)||void 0===_a?void 0:_a.appMode)===jimu_core.$0N.Design||(null===(_b=state.appRuntimeInfo)||void 0===_b?void 0:_b.isPrintPreview):null})),modeRef=jimu_core.q_G.useRef(isAutoplaySuspendMode),stopPlay=jimu_core.q_G.useCallback((()=>{playHandlerRef.current&&(clearInterval(playHandlerRef.current),playHandlerRef.current=null)}),[]),startPlay=jimu_core.q_G.useCallback((()=>{stopPlay(),playHandlerRef.current=setInterval((()=>{const continued=function nextView(sectionId,loop){var _a,_b;const state=(0,jimu_core.Vp3)().getState(),views=state.appConfig.sections[sectionId].views;let navInfo=null===(_b=null===(_a=state.appRuntimeInfo)||void 0===_a?void 0:_a.sectionNavInfos)||void 0===_b?void 0:_b[sectionId];const currentIndex=(null==navInfo?void 0:navInfo.currentViewId)?views.indexOf(navInfo.currentViewId):0,nextIndex=currentIndex<views.length-1?currentIndex+1:0;return loop||0!==nextIndex?(navInfo=navInfo?navInfo.set("previousViewId",views[currentIndex]).set("currentViewId",views[nextIndex]):{previousViewId:views[currentIndex],currentViewId:views[nextIndex]},(0,jimu_core.Vp3)().dispatch(jimu_core.tRc.sectionNavInfoChanged(sectionId,navInfo)),!0):(jimu_core.e7y.changeView(sectionId,views[views.length-1]),!1)}(sectionId,loop);continued||stopPlay()}),1e3*interval)}),[sectionId,loop,interval,stopPlay]);jimu_core.q_G.useEffect((()=>{if(!modeRef.current){if(!autoPlay)return void stopPlay();startPlay()}return()=>{stopPlay()}}),[autoPlay,interval,loop,stopPlay,startPlay]),jimu_core.q_G.useEffect((()=>{if(modeRef.current!==isAutoplaySuspendMode&&null!==isAutoplaySuspendMode){if(modeRef.current=isAutoplaySuspendMode,isAutoplaySuspendMode)return void stopPlay();autoPlay&&startPlay()}}),[isAutoplaySuspendMode,startPlay,stopPlay,autoPlay])}try{useAutoPlay.displayName="useAutoPlay",useAutoPlay.__docgenInfo={description:"",displayName:"useAutoPlay",props:{sectionId:{defaultValue:null,description:"",name:"sectionId",required:!0,type:{name:"string"}},autoPlay:{defaultValue:null,description:"",name:"autoPlay",required:!0,type:{name:"boolean"}},interval:{defaultValue:null,description:"",name:"interval",required:!0,type:{name:"number"}},loop:{defaultValue:null,description:"",name:"loop",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/runtime/section-auto-play.tsx#useAutoPlay"]={docgenInfo:useAutoPlay.__docgenInfo,name:"useAutoPlay",path:"../jimu-layouts/lib/runtime/section-auto-play.tsx#useAutoPlay"})}catch(__react_docgen_typescript_loader_error){}var translations_default=__webpack_require__("../jimu-layouts/lib/translations/default.ts"),__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};function getStyle(forceAspectRatio,aspectRatio){return jimu_core.AHW`
    overflow: visible;
    position: relative;
    aspect-ratio: ${forceAspectRatio&&aspectRatio>0?aspectRatio:null};

    .section-content {
      position: relative;
      overflow: hidden;
      width: 100%;
      height: 100%;
      z-index: 0;
    }

    .section-view {
      position: absolute;
    }

    .hidden {
      display: none !important;
    }
  `}function SectionRendererBase(props){var _a;const{views,navInfo,activeView,animationPreview,playMode,transition,sectionId,autoPlay,focusable=!0,interval=types.yd,loop=!0,className,sectionStyle,rotate,forceAspectRatio,aspectRatio,layoutEntryComponent,viewVisibilityContext}=props,currentIndexRef=jimu_core.q_G.useRef(),sectionRef=jimu_core.q_G.useRef(),hasFocusRef=jimu_core.q_G.useRef(!1),isSectionFocusedRef=jimu_core.q_G.useRef(!1),blurEventHandlerRef=jimu_core.q_G.useRef(null),[interruptAutoplay,setInterruptAutoplay]=jimu_core.q_G.useState(!1),translate=jimu_core.JLE.useTranslation(translations_default.A),activeViewId=null==activeView?void 0:activeView.id,renderInfo=jimu_core.q_G.useMemo((()=>{var _a;let currentIndex,previousIndex,progress,visibleViews=views;if(navInfo)if(visibleViews=null!==(_a=navInfo.visibleViews)&&void 0!==_a?_a:views,navInfo.useProgress){progress=navInfo.progress;currentIndex=(0,jimu_core.Whg)(progress,visibleViews.length).currentIndex}else currentIndex=Math.max(0,visibleViews.indexOf(navInfo.currentViewId)),previousIndex=navInfo.previousViewId?Math.max(0,visibleViews.indexOf(navInfo.previousViewId)):Math.max(0,currentIndex-1);else currentIndex=Math.max(0,visibleViews.indexOf(activeViewId)),previousIndex=currentIndex;return currentIndexRef.current=currentIndex,{currentIndex,previousIndex,progress}}),[activeViewId,navInfo,views]),_b=jimu_core.q_G.useMemo((()=>jimu_ui.styleUtils.toCSSStyle(sectionStyle)),[sectionStyle]),{transform}=_b,otherStyle=__rest(_b,["transform"]),rotateStyle=rotate>0||rotate<0?`rotateZ(${rotate}deg)`:"";let mergedTransform=rotateStyle;transform&&(mergedTransform=`${transform} ${rotateStyle}`);const onMouseEnter=jimu_core.q_G.useCallback((()=>{setInterruptAutoplay(!0)}),[]),onMouseLeave=jimu_core.q_G.useCallback((()=>{setInterruptAutoplay(!1)}),[]),onFocus=jimu_core.q_G.useCallback((e=>{hasFocusRef.current=!0,isSectionFocusedRef.current=e.target===sectionRef.current,null!=blurEventHandlerRef.current&&(clearTimeout(blurEventHandlerRef.current),blurEventHandlerRef.current=null),autoPlay&&setInterruptAutoplay(!0)}),[autoPlay]),onBlur=jimu_core.q_G.useCallback((e=>{hasFocusRef.current=!1,null!=blurEventHandlerRef.current&&(clearTimeout(blurEventHandlerRef.current),blurEventHandlerRef.current=null),autoPlay&&(blurEventHandlerRef.current=setTimeout((()=>{setInterruptAutoplay(!1)}),500))}),[autoPlay]),isAutoPlaying=autoPlay&&!interruptAutoplay;useAutoPlay({sectionId,interval,loop,autoPlay:isAutoPlaying});const onCurrentViewChange=jimu_core.q_G.useCallback((nextIndex=>{jimu_core.e7y.changeView(sectionId,views[nextIndex])}),[sectionId,views]);return(0,jimu_core.Yac)("div",{className:(0,jimu_core.xWm)(`section-layout layout-item-content w-100 ${null===(_a=null==sectionStyle?void 0:sectionStyle.boxShadow)||void 0===_a?void 0:_a.presetStyle}`,className),css:getStyle(forceAspectRatio,aspectRatio),"data-sectionid":sectionId,style:Object.assign(Object.assign({},otherStyle),{transform:mergedTransform}),onMouseEnter:autoPlay?onMouseEnter:null,onMouseLeave:autoPlay?onMouseLeave:null,onTouchStart:autoPlay?onMouseEnter:null,onTouchEnd:autoPlay?onMouseLeave:null,onFocus,onBlur,tabIndex:focusable?0:void 0,"aria-label":translate("activeViewTip",{viewLabel:(()=>{var _a,_b,_c;const viewId=views[currentIndexRef.current],appConfig=(0,jimu_core.Vp3)().getState().appConfig;return null!==(_c=null===(_b=null===(_a=null==appConfig?void 0:appConfig.views)||void 0===_a?void 0:_a[viewId])||void 0===_b?void 0:_b.label)&&void 0!==_c?_c:""})()}),ref:sectionRef},(0,jimu_core.Yac)(SectionContent,{views,navInfo,animationPreview,playMode,currentIndex:renderInfo.currentIndex,previousIndex:renderInfo.previousIndex,progress:renderInfo.progress,loop:isAutoPlaying&&loop,viewTransition:transition,layoutEntryComponent,viewVisibilityContext}),(0,jimu_core.Yac)(SectionNav,{sectionId,numOfViews:views.length,currentIndex:renderInfo.currentIndex,onCurrentViewChange}))}try{SectionRendererBase.displayName="SectionRendererBase",SectionRendererBase.__docgenInfo={description:"",displayName:"SectionRendererBase",props:{layoutId:{defaultValue:null,description:"",name:"layoutId",required:!0,type:{name:"string"}},layoutItemId:{defaultValue:null,description:"",name:"layoutItemId",required:!0,type:{name:"string"}},draggable:{defaultValue:null,description:"",name:"draggable",required:!1,type:{name:"boolean"}},resizable:{defaultValue:null,description:"",name:"resizable",required:!1,type:{name:"boolean"}},selectable:{defaultValue:null,description:"",name:"selectable",required:!1,type:{name:"boolean"}},forbidContextMenu:{defaultValue:null,description:"",name:"forbidContextMenu",required:!1,type:{name:"boolean"}},forbidToolbar:{defaultValue:null,description:"",name:"forbidToolbar",required:!1,type:{name:"boolean"}},showDefaultTools:{defaultValue:null,description:"",name:"showDefaultTools",required:!1,type:{name:"boolean"}},isInSection:{defaultValue:null,description:"",name:"isInSection",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},trailOrder:{defaultValue:null,description:"",name:"trailOrder",required:!1,type:{name:"number"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},onDoubleClick:{defaultValue:null,description:"",name:"onDoubleClick",required:!1,type:{name:"(e: any, layoutInfo: LayoutInfo) => void"}},forceAspectRatio:{defaultValue:null,description:"",name:"forceAspectRatio",required:!1,type:{name:"boolean"}},aspectRatio:{defaultValue:null,description:"",name:"aspectRatio",required:!1,type:{name:"number"}},resizeObserver:{defaultValue:null,description:"",name:"resizeObserver",required:!1,type:{name:"ResizeObserver"}},autoWidth:{defaultValue:null,description:"",name:"autoWidth",required:!1,type:{name:"boolean"}},autoHeight:{defaultValue:null,description:"",name:"autoHeight",required:!1,type:{name:"boolean"}},layoutItem:{defaultValue:null,description:"",name:"layoutItem",required:!0,type:{name:"IMLayoutItemJson"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"boolean"}},autoScroll:{defaultValue:null,description:"",name:"autoScroll",required:!1,type:{name:"boolean"}},animationPreview:{defaultValue:null,description:"",name:"animationPreview",required:!1,type:{name:"boolean"}},hoverPreview:{defaultValue:null,description:"",name:"hoverPreview",required:!1,type:{name:"boolean"}},playMode:{defaultValue:null,description:"",name:"playMode",required:!1,type:{name:"enum",value:[{value:'"AS_ONE"'},{value:'"ONE_BY_ONE"'}]}},previewId:{defaultValue:null,description:"",name:"previewId",required:!1,type:{name:"number"}},watchViewportVisibility:{defaultValue:null,description:"",name:"watchViewportVisibility",required:!1,type:{name:"boolean"}},sectionId:{defaultValue:null,description:"",name:"sectionId",required:!0,type:{name:"string"}},views:{defaultValue:null,description:"",name:"views",required:!0,type:{name:"ImmutableArray<string>"}},activeView:{defaultValue:null,description:"",name:"activeView",required:!1,type:{name:"IMViewJson"}},rotate:{defaultValue:null,description:"",name:"rotate",required:!1,type:{name:"number"}},sectionStyle:{defaultValue:null,description:"",name:"sectionStyle",required:!0,type:{name:"any"}},navInfo:{defaultValue:null,description:"",name:"navInfo",required:!0,type:{name:"IMSectionNavInfo"}},transition:{defaultValue:null,description:"",name:"transition",required:!1,type:{name:"{ type: string; direction?: string; }"}},autoPlay:{defaultValue:null,description:"",name:"autoPlay",required:!1,type:{name:"boolean"}},interval:{defaultValue:null,description:"",name:"interval",required:!1,type:{name:"number"}},loop:{defaultValue:null,description:"",name:"loop",required:!1,type:{name:"boolean"}},focusable:{defaultValue:null,description:"",name:"focusable",required:!1,type:{name:"boolean"}},layoutEntryComponent:{defaultValue:null,description:"",name:"layoutEntryComponent",required:!0,type:{name:"ComponentClass<LayoutProps, any>"}},viewVisibilityContext:{defaultValue:null,description:"",name:"viewVisibilityContext",required:!0,type:{name:"ComponentClass<{}, any>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../jimu-layouts/lib/runtime/section-renderer-base.tsx#SectionRendererBase"]={docgenInfo:SectionRendererBase.__docgenInfo,name:"SectionRendererBase",path:"../jimu-layouts/lib/runtime/section-renderer-base.tsx#SectionRendererBase"})}catch(__react_docgen_typescript_loader_error){}},"../jimu-layouts/lib/search/contents.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$k:()=>findLayoutItem,DH:()=>getBrowserSizeModeByLayoutId,Gv:()=>getContentsInTheSameContainer,JL:()=>getContentRootContainerInfo,LQ:()=>getLayoutInfosByType,MV:()=>findParentLayoutInfo,NG:()=>getRootContainerInfoOfLayout,Qz:()=>getContentsInLayoutRecursive,Tv:()=>findLayoutId,UE:()=>getContentLayoutInfosInOneSizeMode,UQ:()=>getContentsInTheSameRootContainer,Xi:()=>getBrowserSizeModeByLayoutIdAndWidgetId,Yh:()=>getContentsInLayout,_0:()=>getLayoutInfosHoldContent,b_:()=>getContentsInLayoutWithRecursiveLayouts,bp:()=>getContentsInContainer,eS:()=>getParentWidgetIdOfContent,fe:()=>getContentIdInLayoutItem,hZ:()=>getContentsInContainerRecursive,hm:()=>getScreenAnchorPointsInPage,iU:()=>getMapWidgets,mN:()=>getChildrenContents,ph:()=>getContentContainerInfo,pq:()=>getContentLayoutItem,qq:()=>getRelatedLayoutItemsInWidgetByLayoutInfo,qx:()=>getWidgetIdThatUseTheLayoutId,uI:()=>getContentsInContainerRecursiveAdv,ub:()=>getBlockAnchorPointsInPage,xm:()=>getRelatedLayoutInfosInWidgetByLayoutInfo,yu:()=>getLayoutItemIds});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx");function findLayoutItem(appConfig,layoutInfo){var _a,_b,_c;if(!layoutInfo)return null;const{layoutId,layoutItemId}=layoutInfo;return null===(_c=null===(_b=null===(_a=appConfig.layouts)||void 0===_a?void 0:_a[layoutId])||void 0===_b?void 0:_b.content)||void 0===_c?void 0:_c[layoutItemId]}function findParentLayoutInfo(layoutInfo,appConfig,browserSizeMode){var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k;const{layoutId}=layoutInfo,layout=appConfig.layouts[layoutId];switch(null===(_a=null==layout?void 0:layout.parent)||void 0===_a?void 0:_a.type){case jimu_core__WEBPACK_IMPORTED_MODULE_0__.$4y.View:{const viewJson=appConfig.views[layout.parent.id],sectionJson=appConfig.sections[viewJson.parent];return 1===(null===(_c=null===(_b=null==sectionJson?void 0:sectionJson.parent)||void 0===_b?void 0:_b[browserSizeMode])||void 0===_c?void 0:_c.length)?sectionJson.parent[browserSizeMode][0]:(null===(_e=null===(_d=null==sectionJson?void 0:sectionJson.parent)||void 0===_d?void 0:_d[browserSizeMode])||void 0===_e?void 0:_e.length)>1?findParentLayoutInfo(sectionJson.parent[browserSizeMode][0],appConfig,browserSizeMode):null}case jimu_core__WEBPACK_IMPORTED_MODULE_0__.$4y.Widget:{const widgetJson=appConfig.widgets[layout.parent.id];return 1===(null===(_g=null===(_f=null==widgetJson?void 0:widgetJson.parent)||void 0===_f?void 0:_f[browserSizeMode])||void 0===_g?void 0:_g.length)?widgetJson.parent[browserSizeMode][0]:(null===(_j=null===(_h=null==widgetJson?void 0:widgetJson.parent)||void 0===_h?void 0:_h[browserSizeMode])||void 0===_j?void 0:_j.length)>1?findParentLayoutInfo(widgetJson.parent[browserSizeMode][0],appConfig,browserSizeMode):null}case jimu_core__WEBPACK_IMPORTED_MODULE_0__.$4y.Screen:{const screenJson=appConfig.screens[layout.parent.id];return null===(_k=appConfig.screenGroups[screenJson.parent].parent)||void 0===_k?void 0:_k[browserSizeMode]}default:return null}}function getContentIdInLayoutItem(item){switch(item.type){case jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget:return"string"==typeof item.widgetId?item.widgetId:null;case jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Section:return"string"==typeof item.sectionId?item.sectionId:null;case jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.ScreenGroup:return"string"==typeof item.screenGroupId?item.screenGroupId:null;default:return null}}function getContentsInLayout(layoutJson,type,withPending=!1){return(null==layoutJson?void 0:layoutJson.content)?Object.keys(layoutJson.content).filter((itemId=>layoutJson.content[itemId].type===type&&!!getContentIdInLayoutItem(layoutJson.content[itemId])&&(withPending||!layoutJson.content[itemId].isPending))).map((itemId=>getContentIdInLayoutItem(layoutJson.content[itemId]))):[]}function getContentsInLayoutRecursive(appConfig,layoutId,type,sizeMode,withPending=!1){let ret=[];const widgetIds=getContentsInLayout(appConfig.layouts[layoutId],jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget,withPending),sectionIds=getContentsInLayout(appConfig.layouts[layoutId],jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Section,withPending),screenGroupIds=getContentsInLayout(appConfig.layouts[layoutId],jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.ScreenGroup,withPending);type===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget?ret=ret.concat(widgetIds):type===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Section?ret=ret.concat(sectionIds):type===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.ScreenGroup&&(ret=ret.concat(screenGroupIds));return widgetIds.filter((widgetId=>{var _a,_b,_c,_d,_e;return(null===(_b=null===(_a=appConfig.widgets[widgetId])||void 0===_a?void 0:_a.manifest)||void 0===_b?void 0:_b.widgetType)===jimu_core__WEBPACK_IMPORTED_MODULE_0__.xOw.Layout||(null===(_e=null===(_d=null===(_c=appConfig.widgets[widgetId])||void 0===_c?void 0:_c.manifest)||void 0===_d?void 0:_d.properties)||void 0===_e?void 0:_e.hasEmbeddedLayout)})).forEach((hasLayoutWidgetId=>{var _a;Object.keys(null!==(_a=appConfig.widgets[hasLayoutWidgetId].layouts)&&void 0!==_a?_a:{}).forEach((layoutKey=>{const layoutId=findLayoutId(appConfig.widgets[hasLayoutWidgetId].layouts[layoutKey],sizeMode,appConfig.mainSizeMode);ret=ret.concat(getContentsInLayoutRecursive(appConfig,layoutId,type,sizeMode,withPending))}))})),sectionIds.forEach((sectionId=>{var _a,_b;null===(_b=null===(_a=appConfig.sections)||void 0===_a?void 0:_a[sectionId])||void 0===_b||_b.views.forEach((viewId=>{const layoutId=findLayoutId(appConfig.views[viewId].layout,sizeMode,appConfig.mainSizeMode);appConfig.views[viewId]&&layoutId&&(ret=ret.concat(getContentsInLayoutRecursive(appConfig,layoutId,type,sizeMode,withPending)))}))})),screenGroupIds.forEach((screenGroupId=>{var _a,_b;null===(_b=null===(_a=appConfig.screenGroups)||void 0===_a?void 0:_a[screenGroupId])||void 0===_b||_b.screens.forEach((screenId=>{var _a,_b,_c,_d,_e;const mainLayoutId=findLayoutId(null===(_b=null===(_a=appConfig.screens)||void 0===_a?void 0:_a[screenId])||void 0===_b?void 0:_b.main.layout,sizeMode,appConfig.mainSizeMode);mainLayoutId&&(ret=ret.concat(getContentsInLayoutRecursive(appConfig,mainLayoutId,type,sizeMode,withPending)));const panelLayoutId=findLayoutId(null===(_e=null===(_d=null===(_c=appConfig.screens)||void 0===_c?void 0:_c[screenId])||void 0===_d?void 0:_d.panel)||void 0===_e?void 0:_e.layout,sizeMode,appConfig.mainSizeMode);panelLayoutId&&(ret=ret.concat(getContentsInLayoutRecursive(appConfig,panelLayoutId,type,sizeMode,withPending)))}))})),ret}function getContentsInLayoutWithRecursiveLayouts(appConfig,layoutId,type,sizeMode,withPending=!1){let ret=[];const widgetIds=getContentsInLayout(appConfig.layouts[layoutId],jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget,withPending),sectionIds=getContentsInLayout(appConfig.layouts[layoutId],jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Section,withPending),sgIds=getContentsInLayout(appConfig.layouts[layoutId],jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.ScreenGroup,withPending);ret=type===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget?ret.concat(widgetIds):type===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.ScreenGroup?ret.concat(sgIds):ret.concat(sectionIds);return widgetIds.filter((widgetId=>appConfig.widgets&&appConfig.widgets[widgetId]&&(appConfig.widgets[widgetId].manifest.widgetType===jimu_core__WEBPACK_IMPORTED_MODULE_0__.xOw.Layout||appConfig.widgets[widgetId].manifest.properties.hasEmbeddedLayout))).forEach((layoutWidgetId=>{var _a;Object.keys(null!==(_a=appConfig.widgets[layoutWidgetId].layouts)&&void 0!==_a?_a:{}).forEach((layoutKey=>{const layoutId=findLayoutId(appConfig.widgets[layoutWidgetId].layouts[layoutKey],sizeMode,appConfig.mainSizeMode);ret=ret.concat(getContentsInLayoutWithRecursiveLayouts(appConfig,layoutId,type,sizeMode,withPending))}))})),ret}function getContentLayoutItem(layoutJson,id,type){if(!(null==layoutJson?void 0:layoutJson.content))return null;const layoutItemId=Object.keys(layoutJson.content).find((itemId=>layoutJson.content[itemId].type===type&&(layoutJson.content[itemId].widgetId===id||layoutJson.content[itemId].sectionId===id||layoutJson.content[itemId].screenGroupId===id)&&!layoutJson.content[itemId].isPending));return layoutJson.content[layoutItemId]}function getLayoutItemIds(appConfig,layoutId,withPending=!1){const layout=appConfig.layouts[layoutId];return(null==layout?void 0:layout.content)?withPending?Object.keys(layout.content):Object.keys(layout.content).filter((itemId=>!layout.content[itemId].isPending)):[]}function getLayoutInfosByType(layoutJson,type,withPending=!1){return(null==layoutJson?void 0:layoutJson.content)?Object.keys(layoutJson.content).filter((itemId=>layoutJson.content[itemId].type===type&&!!getContentIdInLayoutItem(layoutJson.content[itemId])&&(withPending||!layoutJson.content[itemId].isPending))).map((itemId=>({layoutId:layoutJson.id,layoutItemId:itemId}))):[]}function getWidgetIdThatUseTheLayoutId(appConfig,layoutId){var _a;const layoutJson=appConfig.layouts[layoutId];return(null===(_a=null==layoutJson?void 0:layoutJson.parent)||void 0===_a?void 0:_a.type)===jimu_core__WEBPACK_IMPORTED_MODULE_0__.$4y.Widget?layoutJson.parent.id:null}function getContentContainerInfo(appConfig,id,type,sizeMode,withPending=!1){var _a;const layoutInfo=getLayoutInfoHoldContent(appConfig,id,type,sizeMode,withPending);if(layoutInfo){const layoutJson=appConfig.layouts[layoutInfo.layoutId];switch(null===(_a=layoutJson.parent)||void 0===_a?void 0:_a.type){case jimu_core__WEBPACK_IMPORTED_MODULE_0__.$4y.Page:return{type:jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Page,id:layoutJson.parent.id};case jimu_core__WEBPACK_IMPORTED_MODULE_0__.$4y.Dialog:return{type:jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Dialog,id:layoutJson.parent.id};case jimu_core__WEBPACK_IMPORTED_MODULE_0__.$4y.Header:return{type:jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Header,id:"header"};case jimu_core__WEBPACK_IMPORTED_MODULE_0__.$4y.Footer:return{type:jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Footer,id:"footer"};case jimu_core__WEBPACK_IMPORTED_MODULE_0__.$4y.View:return{type:jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.View,id:layoutJson.parent.id};case jimu_core__WEBPACK_IMPORTED_MODULE_0__.$4y.Screen:return{type:appConfig.screens[layoutJson.parent.id].main.layout[sizeMode]===layoutInfo.layoutId?jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.ScreenMain:jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.ScreenPanel,id:layoutJson.parent.id};case jimu_core__WEBPACK_IMPORTED_MODULE_0__.$4y.Widget:return getContentContainerInfo(appConfig,layoutJson.parent.id,type,sizeMode,withPending)}}return null}function getContentRootContainerInfo(appConfig,id,type,sizeMode,withPending=!1){let layoutInfo=getLayoutInfoHoldContent(appConfig,id,type,sizeMode,withPending),useSizeMode=sizeMode;if(layoutInfo||(layoutInfo=getLayoutInfoHoldContent(appConfig,id,type,appConfig.mainSizeMode,withPending),useSizeMode=appConfig.mainSizeMode),layoutInfo)return getRootContainerInfoOfLayout(appConfig,layoutInfo.layoutId,useSizeMode)}function getRootContainerInfoOfLayout(appConfig,layoutId,sizeMode){var _a;let layoutJson=appConfig.layouts[layoutId];for(;(null==layoutJson?void 0:layoutJson.parent)&&[jimu_core__WEBPACK_IMPORTED_MODULE_0__.$4y.Screen,jimu_core__WEBPACK_IMPORTED_MODULE_0__.$4y.View,jimu_core__WEBPACK_IMPORTED_MODULE_0__.$4y.Widget].includes(layoutJson.parent.type);){const layoutInfo=findParentLayoutInfo({layoutId},appConfig,sizeMode);layoutId=null==layoutInfo?void 0:layoutInfo.layoutId,layoutJson=appConfig.layouts[layoutId]}switch(null===(_a=null==layoutJson?void 0:layoutJson.parent)||void 0===_a?void 0:_a.type){case jimu_core__WEBPACK_IMPORTED_MODULE_0__.$4y.Dialog:return{type:jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Dialog,id:layoutJson.parent.id};case jimu_core__WEBPACK_IMPORTED_MODULE_0__.$4y.Page:return{type:jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Page,id:layoutJson.parent.id};case jimu_core__WEBPACK_IMPORTED_MODULE_0__.$4y.Header:return{type:jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Header,id:"header"};case jimu_core__WEBPACK_IMPORTED_MODULE_0__.$4y.Footer:return{type:jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Footer,id:"footer"};default:return null}}function getContentsInContainer(appConfig,containerInfo,type,browserSizeMode,withPending=!1){var _a,_b,_c,_d,_e,_f;let layoutId;switch(containerInfo.type){case jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Page:return layoutId=findLayoutId(null===(_b=null===(_a=appConfig.pages)||void 0===_a?void 0:_a[containerInfo.id])||void 0===_b?void 0:_b.layout,browserSizeMode,appConfig.mainSizeMode),layoutId?getContentsInLayoutWithRecursiveLayouts(appConfig,layoutId,type,browserSizeMode,withPending):[];case jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Header:return layoutId=findLayoutId(null===(_c=appConfig.header)||void 0===_c?void 0:_c.layout,browserSizeMode,appConfig.mainSizeMode),layoutId?getContentsInLayoutWithRecursiveLayouts(appConfig,layoutId,type,browserSizeMode,withPending):[];case jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Footer:return layoutId=findLayoutId(null===(_d=appConfig.footer)||void 0===_d?void 0:_d.layout,browserSizeMode,appConfig.mainSizeMode),layoutId?getContentsInLayoutWithRecursiveLayouts(appConfig,layoutId,type,browserSizeMode,withPending):[];case jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.View:return layoutId=findLayoutId(null===(_f=null===(_e=appConfig.views)||void 0===_e?void 0:_e[containerInfo.id])||void 0===_f?void 0:_f.layout,browserSizeMode,appConfig.mainSizeMode),layoutId?getContentsInLayoutWithRecursiveLayouts(appConfig,layoutId,type,browserSizeMode,withPending):[];case jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Dialog:return layoutId=findLayoutId(appConfig.dialogs[containerInfo.id].layout,browserSizeMode,appConfig.mainSizeMode),layoutId?getContentsInLayoutWithRecursiveLayouts(appConfig,layoutId,type,browserSizeMode,withPending):[];case jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.ScreenMain:case jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.ScreenPanel:if(!appConfig.screens||!appConfig.screens[containerInfo.id])return[];const mainLayoutId=findLayoutId(appConfig.screens[containerInfo.id].main.layout,browserSizeMode,appConfig.mainSizeMode);if(!mainLayoutId)return[];const mainContents=getContentsInLayoutWithRecursiveLayouts(appConfig,mainLayoutId,type,browserSizeMode,withPending);if(appConfig.screens[containerInfo.id].panel){const panelContents=getContentsInLayoutWithRecursiveLayouts(appConfig,findLayoutId(appConfig.screens[containerInfo.id].panel.layout,browserSizeMode,appConfig.mainSizeMode),type,browserSizeMode,withPending);return mainContents.concat(panelContents)}return mainContents}}function getContentsInContainerRecursive(appConfig,containerInfo,type,browserSizeMode,withPending=!1){var _a,_b,_c,_d,_e,_f;let layoutId;switch(containerInfo.type){case jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Page:return layoutId=findLayoutId(null===(_b=null===(_a=appConfig.pages)||void 0===_a?void 0:_a[containerInfo.id])||void 0===_b?void 0:_b.layout,browserSizeMode,appConfig.mainSizeMode),layoutId?getContentsInLayoutRecursive(appConfig,layoutId,type,browserSizeMode,withPending):[];case jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Header:return layoutId=findLayoutId(null===(_c=appConfig.header)||void 0===_c?void 0:_c.layout,browserSizeMode,appConfig.mainSizeMode),layoutId?getContentsInLayoutRecursive(appConfig,layoutId,type,browserSizeMode,withPending):[];case jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Footer:return layoutId=findLayoutId(null===(_d=appConfig.footer)||void 0===_d?void 0:_d.layout,browserSizeMode,appConfig.mainSizeMode),layoutId?getContentsInLayoutRecursive(appConfig,layoutId,type,browserSizeMode,withPending):[];case jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.View:return layoutId=findLayoutId(null===(_f=null===(_e=appConfig.views)||void 0===_e?void 0:_e[containerInfo.id])||void 0===_f?void 0:_f.layout,browserSizeMode,appConfig.mainSizeMode),layoutId?getContentsInLayoutRecursive(appConfig,layoutId,type,browserSizeMode,withPending):[];case jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Dialog:return layoutId=findLayoutId(appConfig.dialogs[containerInfo.id].layout,browserSizeMode,appConfig.mainSizeMode),layoutId?getContentsInLayoutRecursive(appConfig,layoutId,type,browserSizeMode,withPending):[];case jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.ScreenMain:case jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.ScreenPanel:if(!appConfig.screens||!appConfig.screens[containerInfo.id])return[];const mainLayoutId=findLayoutId(appConfig.screens[containerInfo.id].main.layout,browserSizeMode,appConfig.mainSizeMode);if(!mainLayoutId)return[];const mainContents=getContentsInLayoutRecursive(appConfig,mainLayoutId,type,browserSizeMode);if(appConfig.screens[containerInfo.id].panel){const panelContents=getContentsInLayoutRecursive(appConfig,findLayoutId(appConfig.screens[containerInfo.id].panel.layout,browserSizeMode,appConfig.mainSizeMode),type,browserSizeMode);return mainContents.concat(panelContents)}return mainContents}}function getContentsInContainerRecursiveAdv(appConfig,containerInfo,type,browserSizeMode,options){const getContentsInOneContainer=_containerInfo=>{let ids=[];return ids=options.includeOtherSizeMode?ids.concat(getContentsInContainerRecursive(appConfig,_containerInfo,type,jimu_core__WEBPACK_IMPORTED_MODULE_0__.rHp.Large,options.includePending),getContentsInContainerRecursive(appConfig,_containerInfo,type,jimu_core__WEBPACK_IMPORTED_MODULE_0__.rHp.Medium,options.includePending),getContentsInContainerRecursive(appConfig,_containerInfo,type,jimu_core__WEBPACK_IMPORTED_MODULE_0__.rHp.Small,options.includePending)):getContentsInContainerRecursive(appConfig,_containerInfo,type,browserSizeMode,options.includePending),ids=Array.from(new Set(ids)),ids};if(containerInfo.type===jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Dialog)return getContentsInOneContainer(containerInfo);if(containerInfo.type===jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Page){const pageJson=appConfig.pages[containerInfo.id];let ids=getContentsInOneContainer(containerInfo);return pageJson.header&&(ids=ids.concat(getContentsInOneContainer({type:jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Header,id:"header"}))),pageJson.footer&&(ids=ids.concat(getContentsInOneContainer({type:jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Footer,id:"footer"}))),ids=Array.from(new Set(ids)),ids}if(containerInfo.type===jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Header){const pageJson=appConfig.pages[options.currentPageId];let ids=getContentsInOneContainer(containerInfo).concat(getContentsInOneContainer({type:jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Page,id:options.currentPageId}));return(null==pageJson?void 0:pageJson.footer)&&(ids=ids.concat(getContentsInOneContainer({type:jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Footer,id:"footer"}))),ids=Array.from(new Set(ids)),ids}if(containerInfo.type===jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Footer){const pageJson=appConfig.pages[options.currentPageId];let ids=getContentsInOneContainer(containerInfo).concat(getContentsInOneContainer({type:jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Page,id:options.currentPageId}));return(null==pageJson?void 0:pageJson.header)&&(ids=ids.concat(getContentsInOneContainer({type:jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Header,id:"header"}))),ids=Array.from(new Set(ids)),ids}}function findLayoutId(layouts,browserSizeMode,mainSizeMode){return layouts?layouts[browserSizeMode]||layouts[mainSizeMode]:null}function getLayoutInfoHoldContent(appConfig,id,type,sizeMode,withPending=!0){var _a,_b,_c,_d,_e;switch(type){case jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.ScreenGroup:{const layoutInfo=null===(_a=appConfig.screenGroups[id].parent)||void 0===_a?void 0:_a[sizeMode],layoutItem=findLayoutItem(appConfig,layoutInfo);return withPending||!(null==layoutItem?void 0:layoutItem.isPending)?layoutInfo:null}case jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Section:case jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget:{let content;if(type===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget&&(content=appConfig.widgets[id]),type===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Section&&(content=appConfig.sections[id]),1===(null===(_c=null===(_b=null==content?void 0:content.parent)||void 0===_b?void 0:_b[sizeMode])||void 0===_c?void 0:_c.length)){const layoutInfo=content.parent[sizeMode][0],layoutItem=findLayoutItem(appConfig,layoutInfo);return withPending||!(null==layoutItem?void 0:layoutItem.isPending)?layoutInfo:null}if((null===(_e=null===(_d=null==content?void 0:content.parent)||void 0===_d?void 0:_d[sizeMode])||void 0===_e?void 0:_e.length)>1){const layoutInfo=content.parent[sizeMode][0],parentLayoutJson=appConfig.layouts[layoutInfo.layoutId];if(null==parentLayoutJson?void 0:parentLayoutJson.parent)return getLayoutInfoHoldContent(appConfig,parentLayoutJson.parent.id,jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget,sizeMode,withPending)}}default:return null}}function getLayoutInfosHoldContent(appConfig,type,id,sizeMode){switch(type){case jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.ScreenGroup:{const sg=appConfig.screenGroups[id];if(sg.parent)return sizeMode?[sg.parent[sizeMode]]:Object.values(sg.parent)}case jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Section:case jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget:{let content;if(type===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget&&(content=appConfig.widgets[id]),type===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Section&&(content=appConfig.sections[id]),null==content?void 0:content.parent){if(sizeMode)return content.parent[sizeMode];const result=[];return Object.values(content.parent).forEach((layoutInfos=>{result.push(...layoutInfos)})),result}}default:return[]}}function getParentWidgetIdOfContent(appConfig,id,type,sizeMode){var _a,_b,_c,_d,_e,_f,_g;let parentLayoutId;if(type===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget){const widgetJson=appConfig.widgets[id];parentLayoutId=null===(_c=null===(_b=null===(_a=null==widgetJson?void 0:widgetJson.parent)||void 0===_a?void 0:_a[sizeMode])||void 0===_b?void 0:_b[0])||void 0===_c?void 0:_c.layoutId}if(type===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Section){const sectionJson=appConfig.sections[id];parentLayoutId=null===(_f=null===(_e=null===(_d=null==sectionJson?void 0:sectionJson.parent)||void 0===_d?void 0:_d[sizeMode])||void 0===_e?void 0:_e[0])||void 0===_f?void 0:_f.layoutId}if(parentLayoutId){const layoutJson=appConfig.layouts[parentLayoutId];if((null===(_g=null==layoutJson?void 0:layoutJson.parent)||void 0===_g?void 0:_g.type)===jimu_core__WEBPACK_IMPORTED_MODULE_0__.$4y.Widget)return layoutJson.parent.id}return null}function getChildrenContents(appConfig,parentWidgetId,type,withPending){const parentWidgetJson=appConfig.widgets[parentWidgetId];if(!parentWidgetJson.layouts)return[];let ret=[];return Object.keys(parentWidgetJson.layouts).forEach((layoutName=>{Object.keys(parentWidgetJson.layouts[layoutName]).forEach((sizeMode=>{const layoutJson=appConfig.layouts[parentWidgetJson.layouts[layoutName][sizeMode]];ret=ret.concat(getContentsInLayout(layoutJson,type,withPending))}))})),Array.from(new Set(ret))}function getContentLayoutInfosInOneSizeMode(appConfig,contentId,type,sizeMode){var _a,_b,_c;switch(type){case jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.ScreenGroup:{const sg=appConfig.screenGroups[contentId];if(null===(_a=sg.parent)||void 0===_a?void 0:_a[sizeMode])return[sg.parent[sizeMode]]}case jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Section:case jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget:{let content;if(type===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget&&(content=appConfig.widgets[contentId]),type===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Section&&(content=appConfig.sections[contentId]),(null===(_c=null===(_b=null==content?void 0:content.parent)||void 0===_b?void 0:_b[sizeMode])||void 0===_c?void 0:_c.length)>0)return content.parent[sizeMode]}default:return[]}}function getBrowserSizeModeByLayoutIdAndWidgetId(appConfig,layoutId,widgetId){const widgetJson=appConfig.widgets[widgetId];if(!widgetJson)return;let sizeMode;return Object.keys(widgetJson.layouts).find((name=>!!Object.keys(widgetJson.layouts[name]).find((device=>widgetJson.layouts[name][device]===layoutId&&(sizeMode=device,!0))))),sizeMode}function getBrowserSizeModeByLayoutId(appConfig,layoutId){return jimu_core__WEBPACK_IMPORTED_MODULE_0__.VbA.getSizeModeOfALayout(appConfig,layoutId)}function getRelatedLayoutInfosInWidgetByLayoutInfo(appConfig,layoutInfo,parentWidgetId,sizeMode){if(!appConfig.widgets[parentWidgetId])return[];const layoutItem=appConfig.layouts[layoutInfo.layoutId]&&appConfig.layouts[layoutInfo.layoutId].content&&appConfig.layouts[layoutInfo.layoutId].content[layoutInfo.layoutItemId];if(!layoutItem)return[];const contentType=layoutItem.type;let contentId;return contentType===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Section?contentId=layoutItem.sectionId:contentType===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget&&(contentId=layoutItem.widgetId),contentId?getContentLayoutInfosInWidget(appConfig,contentId,contentType,parentWidgetId,sizeMode):function checkIsLayoutInfoInWidget(appConfig,parentWId,layoutInfo){const parentWidget=appConfig.widgets[parentWId];if(!parentWidget)return!1;let find=!1;return parentWidget.layouts&&Object.keys(parentWidget.layouts).some((layoutName=>Object.keys(parentWidget.layouts[layoutName]).some((sizeMode=>{const layoutId=parentWidget.layouts[layoutName][sizeMode];return getLayoutItemIds(appConfig,layoutId,!0).some((itemId=>layoutInfo.layoutId===layoutId&&layoutInfo.layoutItemId===itemId&&(find=!0,!0)))})))),find}(appConfig,parentWidgetId,layoutInfo)?[layoutInfo]:[]}function getRelatedLayoutItemsInWidgetByLayoutInfo(appConfig,layoutInfo,parentWId,browserSizeMode){return getRelatedLayoutInfosInWidgetByLayoutInfo(appConfig,layoutInfo,parentWId,browserSizeMode).map((layoutInfo=>appConfig.layouts[layoutInfo.layoutId][layoutInfo.layoutItemId]))}function getContentLayoutInfosInWidget(appConfig,id,type,parentWidgetId,browserSizeMode){const parentWidget=appConfig.widgets[parentWidgetId];if(!parentWidget||!id)return[];const items=[];return parentWidget.layouts&&Object.keys(parentWidget.layouts).forEach((s=>{const layoutId=parentWidget.layouts[s][browserSizeMode],layoutJson=appConfig.layouts[layoutId];layoutJson&&layoutJson.content&&Object.keys(layoutJson.content).forEach((key=>{const layoutEle=layoutJson.content[key];if(layoutEle.type!==type||layoutEle.widgetId!==id&&layoutEle.sectionId!==id&&layoutEle.screenGroupId!==id){if(layoutEle.type===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget){const wJson=appConfig.widgets[layoutEle.widgetId];wJson&&wJson.manifest.widgetType===jimu_core__WEBPACK_IMPORTED_MODULE_0__.xOw.Layout&&items.push(...getContentLayoutInfosInWidget(appConfig,id,type,wJson.id,browserSizeMode))}}else items.push({layoutId:layoutJson.id,layoutItemId:layoutEle.id})}))})),items}function getContentsInTheSameContainer(appConfig,id,type,retType,sizeMode,withPending=!1){const containerInfo=getContentContainerInfo(appConfig,id,type,sizeMode,withPending);return containerInfo?getContentsInContainer(appConfig,containerInfo,retType,sizeMode,withPending):[]}function getContentsInTheSameRootContainer(appConfig,id,type,retType,sizeMode,withPending=!1){const containerInfo=getContentRootContainerInfo(appConfig,id,type,sizeMode,withPending);return containerInfo?getContentsInContainerRecursive(appConfig,containerInfo,retType,sizeMode,withPending):[]}function getBlockAnchorPointsInPage(appConfig,pageId,sizeMode){var _a,_b;const pageJson=appConfig.pages[pageId],layoutId=null===(_a=null==pageJson?void 0:pageJson.layout)||void 0===_a?void 0:_a[sizeMode],layoutJson=appConfig.layouts[layoutId],blocks=[];return(null==layoutJson?void 0:layoutJson.type)===jimu_core__WEBPACK_IMPORTED_MODULE_0__.p5K.FlowLayout&&Object.keys(null!==(_b=layoutJson.content)&&void 0!==_b?_b:{}).sort().forEach((layoutItemId=>{var _a;const layoutItem=layoutJson.content[layoutItemId];if(!layoutItem.isPending&&!(null===(_a=layoutItem.setting)||void 0===_a?void 0:_a.isFloating)&&layoutItem.type===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget){const anchor=function generateBlockAnchorPoint(appConfig,layoutInfo){const{layoutId,layoutItemId}=layoutInfo,layoutItem=appConfig.layouts[layoutId].content[layoutItemId],widgetJson=appConfig.widgets[layoutItem.widgetId];if(widgetJson)return{label:widgetJson.label,id:`${layoutId}_block_${layoutItemId}`};return null}(appConfig,{layoutId,layoutItemId});anchor&&blocks.push(anchor)}})),blocks}function getScreenAnchorPointsInPage(appConfig,pageId,sizeMode){var _a,_b;const pageJson=appConfig.pages[pageId],layoutId=null===(_a=null==pageJson?void 0:pageJson.layout)||void 0===_a?void 0:_a[sizeMode],layoutJson=appConfig.layouts[layoutId],screenGroups=[];return(null==layoutJson?void 0:layoutJson.type)===jimu_core__WEBPACK_IMPORTED_MODULE_0__.p5K.FlowLayout&&Object.keys(null!==(_b=layoutJson.content)&&void 0!==_b?_b:{}).sort().forEach((layoutItemId=>{var _a;const layoutItem=layoutJson.content[layoutItemId];if(!layoutItem.isPending&&!(null===(_a=layoutItem.setting)||void 0===_a?void 0:_a.isFloating)&&layoutItem.type===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.ScreenGroup){const screenGroup=appConfig.screenGroups[layoutItem.screenGroupId],screens=[];null==screenGroup||screenGroup.screens.forEach((screenId=>{const anchor=function generateScreenAnchorPoint(appConfig,layoutId,screenId){const screenJson=appConfig.screens[screenId];if(screenJson)return{label:screenJson.label,id:`${layoutId}_screen_${screenId}`};return null}(appConfig,layoutId,screenId);anchor&&screens.push(anchor)})),screenGroups.push({id:screenGroup.id,label:screenGroup.label,screens})}})),screenGroups}function getMapWidgets(appConfig,sizeMode,currentContainerType,currentId){const flatContainerMaps=[],currentItem={id:currentId,type:currentContainerType,maps:getContentsInContainerRecursiveAdv(appConfig,{type:currentContainerType,id:currentId},jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget,sizeMode,{includePending:!1,includeOtherSizeMode:!1}).filter((widgetId=>appConfig.widgets[widgetId].manifest.properties.canCreateMapView))};return flatContainerMaps.push(currentItem),Object.keys(appConfig.pages).forEach((pageId=>{if(pageId===currentId)return;const item={id:pageId,type:jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Page,maps:getContentsInContainerRecursive(appConfig,{id:pageId,type:jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Page},jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget,sizeMode).filter((widgetId=>appConfig.widgets[widgetId].manifest.properties.canCreateMapView))};flatContainerMaps.push(item)})),Object.keys(appConfig.dialogs||{}).forEach((dlgId=>{if(dlgId===currentId)return;const item={id:dlgId,type:jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Dialog,maps:getContentsInContainerRecursive(appConfig,{id:dlgId,type:jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Dialog},jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget,sizeMode).filter((widgetId=>appConfig.widgets[widgetId].manifest.properties.canCreateMapView))};flatContainerMaps.push(item)})),flatContainerMaps}},"../jimu-layouts/lib/search/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{findLayoutId:()=>contents.Tv,findLayoutItem:()=>contents.$k,findParentLayoutInfo:()=>contents.MV,getBlockAnchorPointsInPage:()=>contents.ub,getBrowserSizeModeByLayoutId:()=>contents.DH,getBrowserSizeModeByLayoutIdAndWidgetId:()=>contents.Xi,getChildrenContents:()=>contents.mN,getContentContainerInfo:()=>contents.ph,getContentIdInLayoutItem:()=>contents.fe,getContentLayoutInfosInOneSizeMode:()=>contents.UE,getContentLayoutItem:()=>contents.pq,getContentRootContainerInfo:()=>contents.JL,getContentsInContainer:()=>contents.bp,getContentsInContainerRecursive:()=>contents.hZ,getContentsInContainerRecursiveAdv:()=>contents.uI,getContentsInLayout:()=>contents.Yh,getContentsInLayoutRecursive:()=>contents.Qz,getContentsInLayoutWithRecursiveLayouts:()=>contents.b_,getContentsInTheSameContainer:()=>contents.Gv,getContentsInTheSameRootContainer:()=>contents.UQ,getLayoutInfosByType:()=>contents.LQ,getLayoutInfosHoldContent:()=>contents._0,getLayoutItemIds:()=>contents.yu,getMapWidgets:()=>contents.iU,getParentWidgetIdOfContent:()=>contents.eS,getPendingLayoutItemsFromOtherSizeMode:()=>getPendingLayoutItemsFromOtherSizeMode,getPendingLayoutItemsFromOtherSizeModeInDialog:()=>getPendingLayoutItemsFromOtherSizeModeInDialog,getPendingLayoutItemsFromOtherSizeModeInPage:()=>getPendingLayoutItemsFromOtherSizeModeInPage,getPendingLayoutItemsInDialog:()=>getPendingLayoutItemsInDialog,getPendingLayoutItemsInLayoutWithDeep:()=>getPendingLayoutItemsInLayoutWithDeep,getPendingLayoutItemsInPage:()=>getPendingLayoutItemsInPage,getRelatedLayoutInfosInWidgetByLayoutInfo:()=>contents.xm,getRelatedLayoutItemsInWidgetByLayoutInfo:()=>contents.qq,getRootContainerInfoOfLayout:()=>contents.NG,getScreenAnchorPointsInPage:()=>contents.hm,getSectionInfo:()=>getSectionInfo,getWidgetIdThatUseTheLayoutId:()=>contents.qx});var contents=__webpack_require__("../jimu-layouts/lib/search/contents.ts");function getSectionInfo(state,sectionId){var _a;const section=state.appConfig.sections[sectionId];if(!section||!section.views)return null;const navInfo=null===(_a=state.appRuntimeInfo.sectionNavInfos)||void 0===_a?void 0:_a[section.id];let activeView;if(!navInfo){const activeViewId=section.views[0];activeView=state.appConfig.views[activeViewId]}return{sectionId,navInfo,activeView,views:section.views,sectionStyle:section.style,transition:section.transition,autoPlay:section.autoPlay,interval:section.interval,loop:section.loop,focusable:section.focusable}}var jimu_core=__webpack_require__("../jimu-core/index.tsx");function getPendingLayoutItemsInPage(appConfig,pageId,sizeMode,pagePart){const pageJson=appConfig.pages[pageId];return pageJson?pagePart===jimu_core.xH7.Header?pageJson.header&&appConfig.header?getPendingLayoutItemsInLayoutWithDeep(appConfig,appConfig.header.layout[sizeMode],sizeMode):[]:pagePart===jimu_core.xH7.Footer?pageJson.footer&&appConfig.footer?getPendingLayoutItemsInLayoutWithDeep(appConfig,appConfig.footer.layout[sizeMode],sizeMode):[]:pagePart===jimu_core.xH7.Body?getPendingLayoutItemsInLayoutWithDeep(appConfig,pageJson.layout[sizeMode],sizeMode):[]:[]}function getPendingLayoutItemsFromOtherSizeModeInPage(appConfig,pageId,sizeMode,pagePart){const pageJson=appConfig.pages[pageId];return pageJson?pagePart===jimu_core.xH7.Header?pageJson.header&&appConfig.header?getPendingLayoutItemsFromOtherSizeMode(appConfig,appConfig.header.layout,sizeMode):[]:pagePart===jimu_core.xH7.Footer?pageJson.footer&&appConfig.footer?getPendingLayoutItemsFromOtherSizeMode(appConfig,appConfig.footer.layout,sizeMode):[]:pagePart===jimu_core.xH7.Body?getPendingLayoutItemsFromOtherSizeMode(appConfig,pageJson.layout,sizeMode):[]:[]}function getPendingLayoutItemsInDialog(appConfig,dialogId,sizeMode){const dialogJson=appConfig.dialogs[dialogId];return dialogJson?getPendingLayoutItemsInLayoutWithDeep(appConfig,dialogJson.layout[sizeMode],sizeMode):[]}function getPendingLayoutItemsFromOtherSizeModeInDialog(appConfig,dialogId,sizeMode){const dialogJson=appConfig.dialogs[dialogId];return dialogJson?getPendingLayoutItemsFromOtherSizeMode(appConfig,dialogJson.layout,sizeMode):[]}function getPendingLayoutItemsInLayoutWithDeep(appConfig,layoutId,sizeMode){let retItems=[];(0,contents.LQ)(appConfig.layouts[layoutId],jimu_core.K6q.Widget,!0).forEach((widgetItem=>{const item=appConfig.layouts[widgetItem.layoutId].content[widgetItem.layoutItemId];item.isPending?retItems.push(widgetItem):appConfig.widgets[item.widgetId].layouts&&Object.keys(appConfig.widgets[item.widgetId].layouts).forEach((layoutName=>{retItems=retItems.concat(getPendingLayoutItemsInLayoutWithDeep(appConfig,appConfig.widgets[item.widgetId].layouts[layoutName][sizeMode],sizeMode))}))}));(0,contents.LQ)(appConfig.layouts[layoutId],jimu_core.K6q.Section,!0).forEach((sectionItem=>{const item=appConfig.layouts[sectionItem.layoutId].content[sectionItem.layoutItemId];item.isPending?retItems.push(sectionItem):appConfig.sections[item.sectionId].views&&appConfig.sections[item.sectionId].views.forEach((viewId=>{retItems=retItems.concat(getPendingLayoutItemsInLayoutWithDeep(appConfig,appConfig.views[viewId].layout[sizeMode],sizeMode))}))}));return(0,contents.LQ)(appConfig.layouts[layoutId],jimu_core.K6q.ScreenGroup,!0).forEach((sgItem=>{var _a,_b;const item=appConfig.layouts[sgItem.layoutId].content[sgItem.layoutItemId];if(item.isPending)retItems.push(sgItem);else{const sgId=item.screenGroupId;null===(_b=null===(_a=appConfig.screenGroups)||void 0===_a?void 0:_a[sgId].screens)||void 0===_b||_b.forEach((screenId=>{const screenJson=null==appConfig?void 0:appConfig.screens[screenId];screenJson.main&&(retItems=retItems.concat(getPendingLayoutItemsInLayoutWithDeep(appConfig,screenJson.main.layout[sizeMode],sizeMode))),screenJson.panel&&(retItems=retItems.concat(getPendingLayoutItemsInLayoutWithDeep(appConfig,screenJson.panel.layout[sizeMode],sizeMode)))}))}})),retItems}function getPendingLayoutItemsFromOtherSizeMode(appConfig,layout,sizeMode,thisWidgetIds=null,thisSectionIds=null,thisScreenGroupIds=null){const retItems=[];thisWidgetIds||(thisWidgetIds=(0,contents.Qz)(appConfig,layout[sizeMode],jimu_core.K6q.Widget,sizeMode,!0)),thisSectionIds||(thisSectionIds=(0,contents.Qz)(appConfig,layout[sizeMode],jimu_core.K6q.Section,sizeMode,!0)),thisScreenGroupIds||(thisScreenGroupIds=(0,contents.Qz)(appConfig,layout[sizeMode],jimu_core.K6q.ScreenGroup,sizeMode,!0));return Object.keys(jimu_core.rHp).filter((mode=>jimu_core.rHp[mode]!==sizeMode)).map((k=>jimu_core.rHp[k])).forEach((mode=>{(0,contents.LQ)(appConfig.layouts[layout[mode]],jimu_core.K6q.Widget,!0).forEach((widgetItem=>{var _a;const item=appConfig.layouts[widgetItem.layoutId].content[widgetItem.layoutItemId];(null===(_a=appConfig.widgets[item.widgetId].manifest)||void 0===_a?void 0:_a.widgetType)!==jimu_core.xOw.Layout&&thisWidgetIds.indexOf(item.widgetId)<0?!isContentExists(appConfig,retItems,widgetItem)&&retItems.push(widgetItem):appConfig.widgets[item.widgetId].layouts&&Object.keys(appConfig.widgets[item.widgetId].layouts).forEach((layoutName=>{getPendingLayoutItemsFromOtherSizeMode(appConfig,appConfig.widgets[item.widgetId].layouts[layoutName],sizeMode,thisWidgetIds,thisSectionIds,thisScreenGroupIds).forEach((widgetItem=>{!isContentExists(appConfig,retItems,widgetItem)&&retItems.push(widgetItem)}))}))}));(0,contents.LQ)(appConfig.layouts[layout[mode]],jimu_core.K6q.Section,!0).forEach((sectionItem=>{const item=appConfig.layouts[sectionItem.layoutId].content[sectionItem.layoutItemId];thisSectionIds.indexOf(item.sectionId)<0?!isContentExists(appConfig,retItems,sectionItem)&&retItems.push(sectionItem):appConfig.sections[item.sectionId].views&&appConfig.sections[item.sectionId].views.forEach((viewId=>{getPendingLayoutItemsFromOtherSizeMode(appConfig,appConfig.views[viewId].layout,sizeMode,thisWidgetIds,thisSectionIds,thisScreenGroupIds).forEach((sectionItem=>{!isContentExists(appConfig,retItems,sectionItem)&&retItems.push(sectionItem)}))}))}));(0,contents.LQ)(appConfig.layouts[layout[mode]],jimu_core.K6q.ScreenGroup,!0).forEach((sgItem=>{var _a,_b;const item=appConfig.layouts[sgItem.layoutId].content[sgItem.layoutItemId];thisScreenGroupIds.indexOf(item.screenGroupId)<0?!isContentExists(appConfig,retItems,sgItem)&&retItems.push(sgItem):(null===(_b=null===(_a=appConfig.screenGroups)||void 0===_a?void 0:_a[item.screenGroupId])||void 0===_b?void 0:_b.screens)&&appConfig.screenGroups[item.screenGroupId].screens.forEach((screenId=>{var _a;const screenJson=null===(_a=appConfig.screens)||void 0===_a?void 0:_a[screenId];(null==screenJson?void 0:screenJson.main)&&getPendingLayoutItemsFromOtherSizeMode(appConfig,screenJson.main.layout,sizeMode,thisWidgetIds,thisSectionIds,thisScreenGroupIds).forEach((sectionItem=>{!isContentExists(appConfig,retItems,sectionItem)&&retItems.push(sectionItem)})),(null==screenJson?void 0:screenJson.panel)&&getPendingLayoutItemsFromOtherSizeMode(appConfig,screenJson.panel.layout,sizeMode,thisWidgetIds,thisSectionIds,thisScreenGroupIds).forEach((sectionItem=>{!isContentExists(appConfig,retItems,sectionItem)&&retItems.push(sectionItem)}))}))}))})),retItems}function isContentExists(appConfig,layoutInfos,layoutInfo){const layoutItem=appConfig.layouts[layoutInfo.layoutId].content[layoutInfo.layoutItemId];return!!layoutInfos.find((info=>{const item=appConfig.layouts[info.layoutId].content[info.layoutItemId];return item.type===layoutItem.type&&(item.type===jimu_core.K6q.Widget&&item.widgetId===layoutItem.widgetId||item.type===jimu_core.K6q.Section&&item.sectionId===layoutItem.sectionId)}))}},"../jimu-layouts/lib/translations/default.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={previousView:"Previous view",nextView:"Next view",originTL:"Top left as origin",originTR:"Top right as origin",originBL:"Bottom left as origin",originBR:"Bottom right as origin",alignLeft:"Align left",alignRight:"Align right",alignTop:"Align top",alignCenter:"Align center",alignHCenter:"Horizontal center",alignVCenter:"Vertical center",alignBottom:"Align bottom",alignStretch:"Align stretch",sendBackward:"Send backward",bringForward:"Bring forward",sendToBack:"Send to back",bringToFront:"Bring to front",zoomoutFixed:"Zoom out fixed",order:"Order",moveToLeft:"Move to left",moveToRight:"Move to right",moveToTop:"Move to top",moveToBottom:"Move to bottom",addView:"New view",duplicateScreen:"Duplicate screen",deleteScreen:"Delete screen",applyToFirstPanel:"Apply to the first panel",deleteView:"Delete view",duplicateView:"Duplicate view",insertABlock:"Insert block",insertAScreenGroup:"Insert screen group",moveup:"Move up",movedown:"Move down",chooseTemplate:"Choose a {type} template",chooseHeaderTemplate:"Choose a header template",chooseFooterTemplate:"Choose a footer template",dropWidgetToAdd:"Or drag a widget here",snapToLeft:"Snap to left",snapToTop:"Snap to top",snapToBottom:"Snap to bottom",snapToRight:"Snap to right",fullWidth:"Full width",fullHeight:"Full height",fullSize:"Full size",restoreSize:"Restore size",pendingTip:"Move to the pending list",setting:"Settings",dragToMove:"Drag to move {label}",lockLayout:"Lock position and size",unlockLayout:"Unlock position and size",editHeader:"Edit header",editFooter:"Edit footer",transform:"Transform",rotation:"Rotation",angle:"Angle",floating:"Pin",sinking:"Unpin",floatingArea:"Floating area",changeToAuto:"Change to auto",changeToCustom:"Change to custom",positionType:"Position type",sticky:"Sticky",fixed:"Fixed",flow:"Flow",stack:"Stack",fixedAtTop:"Floating at the top when scrolling",actNormal:"Act as normal widget",hideInDesignView:"Hide in design view",showInDesignView:"Show in design view",unlockGridItem:"Unlock this widget to reorganize its internal widgets.",lockGridItem:"Lock this widget.",activeViewTip:"Section. Active view {viewLabel}."}},"../jimu-layouts/lib/types.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";var OrderAdjustType;__webpack_require__.d(__webpack_exports__,{Dy:()=>LayoutItemSizeModes,NS:()=>LayoutZIndex,NX:()=>CLICK_TOLERANCE,Qr:()=>OrderAdjustType,aQ:()=>COLS_IN_ONE_ROW,cm:()=>CONTEXT_MENU_ICON_SIZE,mE:()=>CONTEXT_MENU_ITEM_SIZE,o7:()=>MIN_LAYOUT_ITEM_SIZE,yd:()=>DEFAULT_AUTOPLAY_INTERVAL}),function(OrderAdjustType){OrderAdjustType[OrderAdjustType.BringForward=0]="BringForward",OrderAdjustType[OrderAdjustType.SendBackward=1]="SendBackward",OrderAdjustType[OrderAdjustType.BringToFront=2]="BringToFront",OrderAdjustType[OrderAdjustType.SendToBack=3]="SendToBack"}(OrderAdjustType||(OrderAdjustType={}));const COLS_IN_ONE_ROW=12,CONTEXT_MENU_ITEM_SIZE=28,CONTEXT_MENU_ICON_SIZE=16,MIN_LAYOUT_ITEM_SIZE=16,CLICK_TOLERANCE=5,DEFAULT_AUTOPLAY_INTERVAL=3;var LayoutZIndex,LayoutItemSizeModes;!function(LayoutZIndex){LayoutZIndex.Auto="auto",LayoutZIndex[LayoutZIndex.Normal=0]="Normal",LayoutZIndex[LayoutZIndex.BoundaryDropArea=10]="BoundaryDropArea",LayoutZIndex[LayoutZIndex.DragMoveTip=20]="DragMoveTip",LayoutZIndex[LayoutZIndex.HandlerTools=30]="HandlerTools",LayoutZIndex[LayoutZIndex.DraggingItem=40]="DraggingItem"}(LayoutZIndex||(LayoutZIndex={})),function(LayoutItemSizeModes){LayoutItemSizeModes.Auto="AUTO",LayoutItemSizeModes.Stretch="STRETCH",LayoutItemSizeModes.Custom="CUSTOM"}(LayoutItemSizeModes||(LayoutItemSizeModes={}))},"../jimu-layouts/lib/use-viewport-intersection.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{l:()=>useViewportIntersection});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx");function buildThresholdList(){const result=[0];for(let i=1;i<=10;i++)result.push(i/10);return result}function useViewportIntersection(ref,watchViewportVisibility){const observerRef=jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.useRef(),[isInViewport,setIsInViewport]=jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.useState(!0);return jimu_core__WEBPACK_IMPORTED_MODULE_0__.q_G.useEffect((()=>{if(observerRef.current&&(observerRef.current.unobserve(ref),observerRef.current=null),!watchViewportVisibility)return;if(ref&&"function"==typeof IntersectionObserver){const observer=new IntersectionObserver((entries=>{var entry;(entry=entries[0]).target.classList.contains("playing-animation")||entry.boundingClientRect.width>0&&entry.boundingClientRect.height>0&&setIsInViewport(entry.isIntersecting)}),{threshold:buildThresholdList(),root:document,rootMargin:"20%"});return observer.observe(ref),observerRef.current=observer,()=>{observerRef.current.unobserve(ref),observerRef.current=null}}}),[ref,watchViewportVisibility]),isInViewport}},"../jimu-layouts/lib/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{autoBindHandlers:()=>autoBindHandlers,calHeightOfLayoutItem:()=>calHeightOfLayoutItem,changeLayout:()=>changeLayout,contains:()=>contains,emptyFunc:()=>emptyFunc,expandStyleArray:()=>expandStyleArray,fromRatio:()=>fromRatio,gcd:()=>gcd,getActivePagePart:()=>getActivePagePart,getAppConfig:()=>getAppConfig,getCurrentDialogId:()=>getCurrentDialogId,getCurrentDialogRootLayoutId:()=>getCurrentDialogRootLayoutId,getCurrentPageId:()=>getCurrentPageId,getCurrentPageRootLayoutId:()=>getCurrentPageRootLayoutId,getCurrentSizeMode:()=>getCurrentSizeMode,getFooterRootLayoutId:()=>getFooterRootLayoutId,getHeaderRootLayoutId:()=>getHeaderRootLayoutId,getLayoutItemSizeMode:()=>getLayoutItemSizeMode,getMaximumId:()=>getMaximumId,getValueOfBBox:()=>getValueOfBBox,handleOnebyOneAnimation:()=>handleOnebyOneAnimation,intersects:()=>intersects,isEmptyLayout:()=>isEmptyLayout,isFunctionalWidget:()=>isFunctionalWidget,isNumber:()=>isNumber,isPercentage:()=>isPercentage,isRTL:()=>isRTL,isWidgetHasEmbeddedLayout:()=>isWidgetHasEmbeddedLayout,isWidgetPlaceholder:()=>isWidgetPlaceholder,mapStateToLayoutItemProps:()=>mapStateToLayoutItemProps,mapStateToLayoutProps:()=>mapStateToLayoutProps,mapStateToWidgetProps:()=>mapStateToWidgetProps,normalizeLinearUnit:()=>normalizeLinearUnit,parseAspectRatio:()=>parseAspectRatio,relativeClientRect:()=>relativeClientRect,replaceBoundingBox:()=>replaceBoundingBox,shouldUseAspectRatio:()=>shouldUseAspectRatio,toRatio:()=>toRatio,updateBoundingBoxProp:()=>updateBoundingBoxProp});var jimu_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../jimu-core/index.tsx"),jimu_ui__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../jimu-ui/index.tsx"),_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../jimu-layouts/lib/types.ts"),_search_contents__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../jimu-layouts/lib/search/contents.ts");const emptyFunc=()=>null;function autoBindHandlers(el,fns){fns.forEach((key=>{el[key]&&(el[key]=el[key].bind(el))}))}function getMaximumId(layoutMap){let max=-1;return layoutMap.content&&Object.keys(layoutMap.content).forEach((key=>{const id=parseInt(key,10);id>max&&(max=id)})),max}function isPercentage(value){return/^-?\d*(\.\d+)?%$/.test(value)}function isEmptyLayout(layout){var _a;const itemIds=Object.keys(null!==(_a=layout.content)&&void 0!==_a?_a:{});if(0===itemIds.length)return!0;return!itemIds.some((id=>!layout.content[id].isPending))}function isNumber(value){const result=parseFloat(value);return!isNaN(result)&&isFinite(result)}function getValueOfBBox(bbox,prop){return null==(null==bbox?void 0:bbox[prop])?null:"string"==typeof bbox[prop]?bbox[prop]:isNumber(bbox[prop])?`${Math.round(parseFloat(bbox[prop]))}px`:null}function toRatio(value,total){return`${(100*value/total).toFixed(1)}%`}function fromRatio(ratio,total){return parseFloat(`${ratio}`)*total/100}const mapStateToLayoutProps=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Mz0)([state=>state.appConfig.mainSizeMode,state=>state.browserSizeMode,(state,ownProps)=>{var _a,_b,_c,_d,_e;let isCustomRoot;if(state.browserSizeMode===state.appConfig.mainSizeMode)isCustomRoot=!0;else{let useSizeMode;(null===(_a=ownProps.layouts)||void 0===_a?void 0:_a[state.browserSizeMode])?useSizeMode=state.browserSizeMode:(null===(_b=ownProps.layouts)||void 0===_b?void 0:_b[state.appConfig.mainSizeMode])&&(useSizeMode=state.appConfig.mainSizeMode);const useLayoutId=null===(_c=ownProps.layouts)||void 0===_c?void 0:_c[useSizeMode],container=(0,_search_contents__WEBPACK_IMPORTED_MODULE_3__.NG)(state.appConfig,useLayoutId,useSizeMode);if((null==container?void 0:container.type)===jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Header)isCustomRoot=null!=state.appConfig.header.layout[state.browserSizeMode];else if((null==container?void 0:container.type)===jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Footer)isCustomRoot=null!=state.appConfig.footer.layout[state.browserSizeMode];else if((null==container?void 0:container.type)===jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Dialog){isCustomRoot=null!=state.appConfig.dialogs[container.id].layout[state.browserSizeMode]}else if((null==container?void 0:container.type)===jimu_core__WEBPACK_IMPORTED_MODULE_0__.Kk5.Page){isCustomRoot=null!=state.appConfig.pages[container.id].layout[state.browserSizeMode]}}if(isCustomRoot&&(null===(_d=ownProps.layouts)||void 0===_d?void 0:_d[state.browserSizeMode])){const layoutId=ownProps.layouts[state.browserSizeMode];return state.appConfig.layouts[layoutId]}const layoutId=null===(_e=ownProps.layouts)||void 0===_e?void 0:_e[state.appConfig.mainSizeMode];return state.appConfig.layouts[layoutId]}],((mainSizeMode,browserSizeMode,layout)=>({mainSizeMode,browserSizeMode,layout}))),mapStateToLayoutItemProps=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Mz0)([(state,ownProps)=>{var _a,_b,_c;const{layoutId,layoutItemId}=ownProps;return null===(_c=null===(_b=null===(_a=state.appConfig.layouts)||void 0===_a?void 0:_a[layoutId])||void 0===_b?void 0:_b.content)||void 0===_c?void 0:_c[layoutItemId]},(state,ownProps)=>{var _a,_b,_c,_d,_e,_f;const{layoutId,layoutItemId}=ownProps,layoutItem=null===(_c=null===(_b=null===(_a=state.appConfig.layouts)||void 0===_a?void 0:_a[layoutId])||void 0===_b?void 0:_b.content)||void 0===_c?void 0:_c[layoutItemId];if((null==layoutItem?void 0:layoutItem.type)===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget&&layoutItem.widgetId){const widget=state.appConfig.widgets[layoutItem.widgetId];return null!==(_f=null===(_e=null===(_d=null==widget?void 0:widget.manifest)||void 0===_d?void 0:_d.properties)||void 0===_e?void 0:_e.watchViewportVisibility)&&void 0!==_f&&_f}return!1},state=>{var _a;return null===(_a=state.appRuntimeInfo)||void 0===_a?void 0:_a.selection},state=>{var _a;return null===(_a=state.appRuntimeInfo)||void 0===_a?void 0:_a.animationPreview},state=>{var _a;return null===(_a=state.appRuntimeInfo)||void 0===_a?void 0:_a.hoverPreview},(_,ownProps)=>ownProps.layoutId],((layoutItem,watchViewportVisibility,selection,animationPreview,hoverPreview,layoutId)=>{var _a;if(!layoutItem)return{layoutItem:null,selected:!1};let selected=!1;const isPending=null!==(_a=layoutItem.isPending)&&void 0!==_a&&_a;selection&&(selected=selection.layoutId===layoutId&&selection.layoutItemId===layoutItem.id);const result={selected,watchViewportVisibility,layoutItem:isPending?null:layoutItem,autoScroll:selected?selection.autoScroll:void 0};if(selected&&(null==animationPreview?void 0:animationPreview.layoutInfo)){const{layoutId:animLayoutId,layoutItemId:animItemId}=animationPreview.layoutInfo;result.animationPreview=animLayoutId===layoutId&&animItemId===layoutItem.id,result.playMode=result.animationPreview?animationPreview.playMode:null,result.previewId=result.animationPreview?animationPreview.id:null}else if(selected&&(null==hoverPreview?void 0:hoverPreview.layoutInfo)){const{layoutId:hoverLayoutId,layoutItemId:hoverItemId}=hoverPreview.layoutInfo;result.hoverPreview=hoverLayoutId===layoutId&&hoverItemId===layoutItem.id,result.previewId=result.hoverPreview?hoverPreview.id:null}return result})),mapStateToWidgetProps=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Mz0)([(state,ownProps)=>{var _a,_b,_c;const{layoutId,layoutItemId}=ownProps,layoutItem=null===(_c=null===(_b=null===(_a=state.appConfig.layouts)||void 0===_a?void 0:_a[layoutId])||void 0===_b?void 0:_b.content)||void 0===_c?void 0:_c[layoutItemId];if((null==layoutItem?void 0:layoutItem.type)===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget&&layoutItem.widgetId)return state.appConfig.widgets[layoutItem.widgetId]},(state,ownProps)=>{var _a,_b,_c,_d;const{layoutId,layoutItemId}=ownProps,layoutItem=null===(_c=null===(_b=null===(_a=state.appConfig.layouts)||void 0===_a?void 0:_a[layoutId])||void 0===_b?void 0:_b.content)||void 0===_c?void 0:_c[layoutItemId];if((null==layoutItem?void 0:layoutItem.type)===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget&&!layoutItem.widgetId)return null===(_d=layoutItem.setting)||void 0===_d?void 0:_d.placeholderStyle},(state,ownProps)=>{var _a,_b,_c;const{layoutId,layoutItemId}=ownProps,layoutItem=null===(_c=null===(_b=null===(_a=state.appConfig.layouts)||void 0===_a?void 0:_a[layoutId])||void 0===_b?void 0:_b.content)||void 0===_c?void 0:_c[layoutItemId];if((null==layoutItem?void 0:layoutItem.type)===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget&&layoutItem.widgetId)return state.widgetsRuntimeInfo[layoutItem.widgetId]},(state,ownProps)=>{var _a,_b,_c;const{layoutId,layoutItemId}=ownProps,layoutItem=null===(_c=null===(_b=null===(_a=state.appConfig.layouts)||void 0===_a?void 0:_a[layoutId])||void 0===_b?void 0:_b.content)||void 0===_c?void 0:_c[layoutItemId];if((null==layoutItem?void 0:layoutItem.type)===jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget&&!layoutItem.widgetId)return state.widgetsState[layoutItem.widgetId]},(state,ownProps)=>{var _a,_b;const{layoutId}=ownProps,layoutJson=null===(_a=state.appConfig.layouts)||void 0===_a?void 0:_a[layoutId];if((null===(_b=layoutJson.parent)||void 0===_b?void 0:_b.type)===jimu_core__WEBPACK_IMPORTED_MODULE_0__.$4y.Widget){const parentWidgetId=layoutJson.parent.id,widgetJson=state.appConfig.widgets[parentWidgetId];return/widgets\/common\/controller\/?/.test(widgetJson.uri)}return!1}],((widget,placeholderStyle,widgetRuntimeInfo,widgetState,isInController)=>{var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m,_o,_p,_q,_r;const supportInlineEditing=null===(_b=null===(_a=null==widget?void 0:widget.manifest)||void 0===_a?void 0:_a.properties)||void 0===_b?void 0:_b.supportInlineEditing;return{hasEmbeddedLayout:(null===(_d=null===(_c=null==widget?void 0:widget.manifest)||void 0===_c?void 0:_c.properties)||void 0===_d?void 0:_d.hasEmbeddedLayout)&&Object.keys(null!==(_e=widget.layouts)&&void 0!==_e?_e:{}).length>0,supportInlineEditing,supportRepeat:null===(_g=null===(_f=null==widget?void 0:widget.manifest)||void 0===_f?void 0:_f.properties)||void 0===_g?void 0:_g.supportRepeat,isClassLoaded:null!==(_h=null==widgetRuntimeInfo?void 0:widgetRuntimeInfo.isClassLoaded)&&void 0!==_h&&_h,isInlineEditing:supportInlineEditing&&(null==widgetRuntimeInfo?void 0:widgetRuntimeInfo.isInlineEditing),isInController,useDragHandler:null!==(_l=null===(_k=null===(_j=null==widget?void 0:widget.manifest)||void 0===_j?void 0:_j.properties)||void 0===_k?void 0:_k.useDragHandler)&&void 0!==_l&&_l,widgetStyle:null!=widget?widget.style:placeholderStyle,canCrossLayoutBoundary:null===(_o=null===(_m=null==widget?void 0:widget.manifest)||void 0===_m?void 0:_m.properties)||void 0===_o?void 0:_o.canCrossLayoutBoundary,hasExtension:(null===(_q=null===(_p=null==widget?void 0:widget.manifest)||void 0===_p?void 0:_p.extensions)||void 0===_q?void 0:_q.length)>0,widgetJson:widget,widgetId:null==widget?void 0:widget.id,isFunctionalWidget:(null===(_r=null==widget?void 0:widget.manifest)||void 0===_r?void 0:_r.widgetType)!==jimu_core__WEBPACK_IMPORTED_MODULE_0__.xOw.Layout,widgetState}}));function isWidgetHasEmbeddedLayout(widgetId,appConfig){var _a,_b,_c,_d;const widget=null===(_a=null==appConfig?void 0:appConfig.widgets)||void 0===_a?void 0:_a[widgetId];return!!(null===(_c=null===(_b=null==widget?void 0:widget.manifest)||void 0===_b?void 0:_b.properties)||void 0===_c?void 0:_c.hasEmbeddedLayout)&&Object.keys(null!==(_d=null==widget?void 0:widget.layouts)&&void 0!==_d?_d:{}).length>0}function isFunctionalWidget(widgetId,appConfig){var _a,_b;const widget=null===(_a=null==appConfig?void 0:appConfig.widgets)||void 0===_a?void 0:_a[widgetId];return(null===(_b=null==widget?void 0:widget.manifest)||void 0===_b?void 0:_b.widgetType)!==jimu_core__WEBPACK_IMPORTED_MODULE_0__.xOw.Layout}function isWidgetPlaceholder(appConfig,item){var _a,_b;if(!item||item.itemType!==jimu_core__WEBPACK_IMPORTED_MODULE_0__.K6q.Widget)return!1;if(item.layoutInfo){const{layoutId,layoutItemId}=item.layoutInfo,layoutItem=null===(_b=null===(_a=appConfig.layouts)||void 0===_a?void 0:_a[layoutId].content)||void 0===_b?void 0:_b[layoutItemId];if(layoutItem&&!layoutItem.widgetId)return!0}return!item.layoutInfo&&!item.uri}function replaceBoundingBox(b1,b2,containerRect){if(!b1)return(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.J3Z)({left:isPercentage(b2.left)?b2.left:`${Math.round(b2.left)}px`,right:isPercentage(b2.right)?b2.right:`${Math.round(b2.right)}px`,top:isPercentage(b2.top)?b2.top:`${Math.round(b2.top)}px`,bottom:isPercentage(b2.bottom)?b2.bottom:`${Math.round(b2.bottom)}px`,width:isPercentage(b2.width)?b2.width:`${Math.round(b2.width)}px`,height:isPercentage(b2.height)?b2.height:`${Math.round(b2.height)}px`});let result=b1;return["left","right","top","bottom","width","height"].forEach((key=>{null!=result[key]?result=updateBoundingBoxProp(key,result,b2[key],containerRect):null!=b2[key]&&(result=result.set(key,`${Math.round(b2[key])}px`))})),result}function updateBoundingBoxProp(prop,b,newValue,containerRect){if(null==b[prop]||"auto"===b[prop])return b;let updated=b;return updated=isPercentage(b[prop])?"left"===prop||"right"===prop||"width"===prop?isPercentage(newValue)?b.set(prop,newValue):b.set(prop,`${(100*+newValue/containerRect.width).toFixed(4)}%`):isPercentage(newValue)?b.set(prop,newValue):b.set(prop,`${(100*+newValue/containerRect.height).toFixed(4)}%`):isPercentage(newValue)?"left"===prop||"right"===prop||"width"===prop?b.set(prop,Math.round(parseFloat(`${newValue}`)*containerRect.width/100)):b.set(prop,Math.round(parseFloat(`${newValue}`)*containerRect.height/100)):isNaN(+newValue)?b.without(prop):b.set(prop,`${Math.round(+newValue)}px`),updated}function relativeClientRect(r1,r2){return{left:r1.left-r2.left,top:r1.top-r2.top,right:r1.right,bottom:r1.bottom,width:r1.width,height:r1.height,id:null}}function isRTL(){var _a,_b;return null!==(_b=null===(_a=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Vp3)().getState().appContext)||void 0===_a?void 0:_a.isRTL)&&void 0!==_b&&_b}function parseAspectRatio(ratio){let width=100,height=100;if("number"==typeof ratio)width=100,height=Math.round(100*ratio);else if("string"==typeof ratio){const items=ratio.split(":");width=parseInt(items[0],10),height=parseInt(items[1],10)}return width/height}function expandStyleArray(dataArray){return dataArray&&0!==dataArray.length?1===dataArray.length?[dataArray[0],dataArray[0],dataArray[0],dataArray[0]]:2===dataArray.length?[dataArray[0],dataArray[1],dataArray[0],dataArray[1]]:3===dataArray.length?[dataArray[0],dataArray[1],dataArray[2],0]:[dataArray[0],dataArray[1],dataArray[2],dataArray[3]]:[0,0,0,0]}function calHeightOfLayoutItem(containerHeight,layoutItem){var _a,_b,_c,_d;const setting=null!==(_a=layoutItem.setting)&&void 0!==_a?_a:{},mode=getLayoutItemSizeMode("height",layoutItem.bbox,setting.autoProps);let result;if("ratio"===setting.heightMode)result={setting:{heightMode:"ratio",aspectRatio:null!==(_b=setting.aspectRatio)&&void 0!==_b?_b:1,autoProps:{height:_types__WEBPACK_IMPORTED_MODULE_2__.Dy.Custom}}};else{if(mode!==_types__WEBPACK_IMPORTED_MODULE_2__.Dy.Custom)return{height:mode===_types__WEBPACK_IMPORTED_MODULE_2__.Dy.Stretch?containerHeight:null,setting:{autoProps:{height:mode}}};{let height=null!==(_d=null===(_c=layoutItem.bbox)||void 0===_c?void 0:_c.height)&&void 0!==_d?_d:containerHeight;height=isPercentage(height)?fromRatio(height,containerHeight):parseInt(height),result={height,setting:{heightMode:"fixed",autoProps:{height:_types__WEBPACK_IMPORTED_MODULE_2__.Dy.Custom}}}}}return result}function getAppConfig(){var _a;return window.jimuConfig.isBuilder?null===(_a=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Vp3)().getState().appStateInBuilder)||void 0===_a?void 0:_a.appConfig:(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Vp3)().getState().appConfig}function getCurrentSizeMode(){var _a,_b;return(null===(_a=null===window||void 0===window?void 0:window.jimuConfig)||void 0===_a?void 0:_a.isBuilder)?null===(_b=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Vp3)().getState().appStateInBuilder)||void 0===_b?void 0:_b.browserSizeMode:(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Vp3)().getState().browserSizeMode}function getCurrentPageId(){var _a,_b,_c;return window.jimuConfig.isBuilder?null===(_b=null===(_a=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Vp3)().getState().appStateInBuilder)||void 0===_a?void 0:_a.appRuntimeInfo)||void 0===_b?void 0:_b.currentPageId:null===(_c=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Vp3)().getState().appRuntimeInfo)||void 0===_c?void 0:_c.currentPageId}function getCurrentDialogId(){var _a,_b,_c;return window.jimuConfig.isBuilder?null===(_b=null===(_a=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Vp3)().getState().appStateInBuilder)||void 0===_a?void 0:_a.appRuntimeInfo)||void 0===_b?void 0:_b.currentDialogId:null===(_c=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Vp3)().getState().appRuntimeInfo)||void 0===_c?void 0:_c.currentDialogId}function getActivePagePart(){var _a,_b,_c;return window.jimuConfig.isBuilder?null===(_b=null===(_a=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Vp3)().getState().appStateInBuilder)||void 0===_a?void 0:_a.appRuntimeInfo)||void 0===_b?void 0:_b.activePagePart:null===(_c=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Vp3)().getState().appRuntimeInfo)||void 0===_c?void 0:_c.activePagePart}function getCurrentDialogRootLayoutId(){var _a,_b,_c;const appConfig=window.jimuConfig.isBuilder?null===(_a=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Vp3)().getState().appStateInBuilder)||void 0===_a?void 0:_a.appConfig:(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Vp3)().getState().appConfig,dialogId=getCurrentDialogId(),browserSizeMode=getCurrentSizeMode();return null===(_c=null===(_b=null==appConfig?void 0:appConfig.dialogs[dialogId])||void 0===_b?void 0:_b.layout)||void 0===_c?void 0:_c[browserSizeMode]}function getCurrentPageRootLayoutId(){var _a,_b,_c;const appConfig=window.jimuConfig.isBuilder?null===(_a=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Vp3)().getState().appStateInBuilder)||void 0===_a?void 0:_a.appConfig:(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Vp3)().getState().appConfig,pageId=getCurrentPageId(),browserSizeMode=getCurrentSizeMode();return null===(_c=null===(_b=null==appConfig?void 0:appConfig.pages[pageId])||void 0===_b?void 0:_b.layout)||void 0===_c?void 0:_c[browserSizeMode]}function getHeaderRootLayoutId(){var _a,_b,_c;const appConfig=window.jimuConfig.isBuilder?null===(_a=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Vp3)().getState().appStateInBuilder)||void 0===_a?void 0:_a.appConfig:(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Vp3)().getState().appConfig,browserSizeMode=getCurrentSizeMode();return null===(_c=null===(_b=null==appConfig?void 0:appConfig.header)||void 0===_b?void 0:_b.layout)||void 0===_c?void 0:_c[browserSizeMode]}function getFooterRootLayoutId(){var _a,_b,_c;const appConfig=window.jimuConfig.isBuilder?null===(_a=(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Vp3)().getState().appStateInBuilder)||void 0===_a?void 0:_a.appConfig:(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Vp3)().getState().appConfig,browserSizeMode=getCurrentSizeMode();return null===(_c=null===(_b=null==appConfig?void 0:appConfig.footer)||void 0===_b?void 0:_b.layout)||void 0===_c?void 0:_c[browserSizeMode]}function contains(rect1,rect2){return rect2.left>=rect1.left&&rect2.left+rect2.width<=rect1.left+rect1.width&&rect2.top>=rect1.top&&rect2.top+rect2.height<=rect1.top+rect1.height}function intersects(r1,r2){return!(r2.left>r1.left+r1.width||r2.left+r2.width<r1.left||r2.top>r1.top+r1.height||r2.top+r2.height<r1.top)}function normalizeLinearUnit(value,precision){var _a,_b,_c;let unit,distance;if(null!=value&&"object"==typeof value)unit=null!==(_a=value.unit)&&void 0!==_a?_a:jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DistanceUnits.PIXEL,distance=null!==(_b=value.distance)&&void 0!==_b?_b:0;else{const ret=jimu_core__WEBPACK_IMPORTED_MODULE_0__.PLL.getValueAndUnit(value);unit=null!==(_c=null==ret?void 0:ret[1])&&void 0!==_c?_c:jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DistanceUnits.PIXEL,distance=+(null==ret?void 0:ret[0])>=0?+ret[0]:0}return precision>=0||(precision=unit===jimu_ui__WEBPACK_IMPORTED_MODULE_1__.DistanceUnits.PERCENTAGE?1:0),`${distance.toFixed(precision)}${unit}`}function getLayoutItemSizeMode(side,bbox,autoProps){const mode=null==autoProps?void 0:autoProps[side],first="width"===side?"left":"top",last="width"===side?"right":"bottom";if(!mode)return null!=bbox[side]?_types__WEBPACK_IMPORTED_MODULE_2__.Dy.Custom:null!=bbox[first]&&null!=bbox[last]?_types__WEBPACK_IMPORTED_MODULE_2__.Dy.Stretch:_types__WEBPACK_IMPORTED_MODULE_2__.Dy.Auto;if(!0===mode)return null!=bbox[first]&&null!=bbox[last]?_types__WEBPACK_IMPORTED_MODULE_2__.Dy.Stretch:_types__WEBPACK_IMPORTED_MODULE_2__.Dy.Auto;switch(mode){case _types__WEBPACK_IMPORTED_MODULE_2__.Dy.Auto:return _types__WEBPACK_IMPORTED_MODULE_2__.Dy.Auto;case _types__WEBPACK_IMPORTED_MODULE_2__.Dy.Stretch:return _types__WEBPACK_IMPORTED_MODULE_2__.Dy.Stretch;default:return _types__WEBPACK_IMPORTED_MODULE_2__.Dy.Custom}}function shouldUseAspectRatio(itemSetting){return"ratio"===itemSetting.heightMode&&null!=itemSetting.aspectRatio}function gcd(x,y){let m=Math.max(x,y),n=Math.min(x,y);for(;0!==n;){const temp=n;n=m%n,m=temp}return m}function handleOnebyOneAnimation(props){const{delay,isLastChild}=props;return{delay,isLastChild}}function changeLayout(appConfig,selection){jimu_core__WEBPACK_IMPORTED_MODULE_0__.WpD.changeAppConfig(appConfig),(0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.Vp3)().dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.tRc.selectionChanged(selection))}}}]);
//# sourceMappingURL=7373.5ed960f3.iframe.bundle.js.map