"use strict";(self.webpackChunkafd_experience_builder_doc=self.webpackChunkafd_experience_builder_doc||[]).push([[1964],{32102:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var a=n(28453),r=n(96540);function l(e){const t=Object.assign({p:"p",a:"a",h2:"h2",span:"span",ul:"ul",li:"li",strong:"strong"},(0,a.RP)(),e.components),{Note:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Note",!0),r.createElement(r.Fragment,null,r.createElement(t.p,null,"The Query widget allows you to retrieve information from a data source by running an attribute or spatial filter query. The results of a query generate an ",r.createElement(t.a,{href:"/experience-builder/guide/select-data/#output-data"},"output data source")," that other widgets can use."),"\n",r.createElement(t.h2,{id:"examples",className:"group relative s:flex s:flex-nowrap"},"Examples",r.createElement(t.a,{href:"#examples","aria-label":"examples permalink",className:"anchor-link"},r.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<calcite-icon scale="s" icon="link"></calcite-icon>'}}))),"\n",r.createElement(t.p,null,"Use this widget to support app design requirements such as the following:"),"\n",r.createElement(t.ul,{id:"UL_8F6C9777886745DC9AF2EB7C6982FDB5"},"\n",r.createElement(t.li,{id:"LI_A9340F717C7A41B6ABE5FDEF15DAF2F1"},"You want to allow users to find features based on a query expression."),"\n",r.createElement(t.li,{id:"LI_8EBF4A3CAFBB4375BA65B2E5EAE8A396"},"You want to allow users to draw a shape on a map and return features that intersect with the shape drawn."),"\n",r.createElement(t.li,{id:"LI_0C5287B967AE4C7CB0633B0F376530C2"},"You want to allow users to find features that have a specific spatial relationship (such as intersect or overlap) with the shapes of selected features from other widgets."),"\n",r.createElement(t.li,{id:"LI_6C71B5525D8347D6972A1C9C79BC2265"},"You want to use the results from the query to create features for other widgets."),"\n"),"\n",r.createElement(t.h2,{id:"usage-notes",className:"group relative s:flex s:flex-nowrap"},"Usage notes",r.createElement(t.a,{href:"#usage-notes","aria-label":"usage notes permalink",className:"anchor-link"},r.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<calcite-icon scale="s" icon="link"></calcite-icon>'}}))),"\n",r.createElement(t.p,null,"The Query widget requires that a ",r.createElement(t.a,{href:"/experience-builder/guide/select-data/"},"data source")," be set for each query that you add. Each query works with a single layer, and you can define multiple attribute and spatial filters. You can also create multiple queries and use layers from several data sources. A query can be configured with or without a map. To display the features returned from a query in a Map widget, you can either ",r.createElement(t.a,{href:"/experience-builder/guide/query-widget/#interaction-options"},"set an action")," to have them automatically show or use a ",r.createElement(t.a,{href:"/experience-builder/guide/action-triggers/#data-actions"},"data action")," that allows the user to click a button. Currently, using a scene layer requires adding a ",r.createElement(t.strong,null,"Record selection changes")," trigger instead, so users can click a query result to highlight it on the map."),"\n",r.createElement(n,{type:"caution"},r.createElement(t.p,null,"Attempting to run a spatial query for a feature that is highly complex (such as a polygon feature with a high number of vertices) may overload the widget and not return results. If this happens, you can try ",r.createElement(t.a,{href:"https://links.esri.com/exb-dev-ed-guide/generalize"},"generalizing")," the feature. Make sure you are in compliance with your server's maximum resource limits.")),"\n",r.createElement(n,{type:"note"},r.createElement(t.p,null,"The widget supports setting individual subtype sublayers from ",r.createElement(t.a,{href:"/experience-builder/guide/select-data/#LI_18EB80E2CB0F47218A3268918B4AEC00"},"subtype group layers")," as query layers.")),"\n",r.createElement(t.h2,{id:"settings",className:"group relative s:flex s:flex-nowrap"},"Settings",r.createElement(t.a,{href:"#settings","aria-label":"settings permalink",className:"anchor-link"},r.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<calcite-icon scale="s" icon="link"></calcite-icon>'}}))),"\n",r.createElement(t.p,null,"The Query widget includes the following settings:"),"\n",r.createElement(t.ul,{id:"UL_79110DA029A8411D8A149FC7AE806E38"},"\n",r.createElement(t.li,{id:"LI_B790E34BBD0145CAB195B1C9C4127624"},"\n",r.createElement(t.p,null,r.createElement(t.strong,null,"New query"),"—Create a query and specify the following settings in the ",r.createElement(t.strong,null,"Set query")," panel:"),"\n",r.createElement(t.ul,{id:"UL_1086EB3BCB6F4639BC05EA319294E750"},"\n",r.createElement(t.li,{id:"LI_7BD7CE097CD64AC1BA05BC2A3495022F"},"\n",r.createElement(t.p,null,"** Data**—Select the data you want to query. You can only select one data source per query. Feature layers, feature layers in selected web maps and web scenes, data views, output data sources, and feature service URLs are supported."),"\n"),"\n",r.createElement(t.li,{id:"LI_BF5D45EAB01D4AF2A545C8CB6F3D60DB"},"\n",r.createElement(t.p,null,"** Label**—Customize the name of each query. If there is a single query in a widget, you can turn off the display label for vertical and icon arrangement style."),"\n"),"\n",r.createElement(t.li,{id:"LI_2E29B0223A7D4115A48625BB47140DEB"},"\n",r.createElement(t.p,null,r.createElement(t.strong,null,"Icon"),"—Choose an icon for each query displayed in the widget and the list of queries in the content panel. You can choose icons from the ",r.createElement(t.strong,null,"General")," and ",r.createElement(t.strong,null,"Arrows")," galleries or add an icon from a file. Click the ",r.createElement(t.strong,null,"Delete")," button to remove unused uploaded icons."),"\n",r.createElement(n,{type:"note"},r.createElement(t.p,null,"You can upload the following image formats: PNG, GIF, JPG, JPEG, BMP, and WebP. To preserve optimal performance, there is a 10MB size limit for each upload.")),"\n"),"\n",r.createElement(t.li,{id:"LI_BCD72B2250AE47E480808A0DB0A416CC"},"\n",r.createElement(t.p,null,r.createElement(t.strong,null,"Attribute filter"),"—Build SQL expressions to specify the attribute filter criteria. The ",r.createElement(t.a,{href:"/experience-builder/guide/filter-widget/#sql-expression-builder"},"SQL Expression Builder")," that opens includes several options for creating complex and interactive queries."),"\n",r.createElement(t.ul,{id:"UL_3650458F330247C1AA432F29CEFBC896"},"\n",r.createElement(t.li,{id:"LI_BDD9E770AC8542D69AE41EDA6BF7BA40"},r.createElement(t.strong,null,"Label"),"—Customize the label for the attribute filter section."),"\n",r.createElement(t.li,{id:"LI_D1FDCF844C664530A28FDBFC9F894B3E"},r.createElement(t.strong,null,"Description"),"—Provide instructions for a specific audience, such as new users, that appear as hover text on an information icon."),"\n"),"\n"),"\n",r.createElement(t.li,{id:"LI_7659ED4A7D8E47CEB7E1DD7BB28A453D"},"\n",r.createElement(t.p,null,r.createElement(t.strong,null,"Spatial filter"),"—Select which spatial filters will be available and, optionally, choose a map widget."),"\n",r.createElement(t.ul,{id:"UL_73DA2E7DCAB54F5789C0BDF8A92BF7EA"},"\n",r.createElement(t.li,{id:"LI_895D2E77FBD64AEBA28DAE871C8AF03D"},"\n",r.createElement(t.p,null,r.createElement(t.strong,null,"Label"),"—Customize the label for the spatial filter section."),"\n"),"\n",r.createElement(t.li,{id:"LI_A1C0F96C8DAB4B4C9E068F78FBEA1801"},"\n",r.createElement(t.p,null,r.createElement(t.strong,null,"Selected features from data source"),"—Return features that have a spatial relationship with features in another layer. Optionally, a search distance can be applied to the geometries of the features in the related layer."),"\n",r.createElement(t.ul,{id:"UL_C827147094FA45A88B32507C43E2DAC1"},"\n",r.createElement(t.li,{id:"LI_2E29C99AADAD43DEA20C87D79A89B673"},"\n",r.createElement(t.p,null,r.createElement(t.strong,null,"Add filter layer"),"—Add layers that you want to be available to users to run spatial filters at run time."),"\n"),"\n",r.createElement(t.li,{id:"LI_9B14997EB9C54E7DA2F14F50FE469D1B"},"\n",r.createElement(t.p,null,r.createElement(t.strong,null,"Include runtime data"),"—Allow users to run spatial filters with runtime data, such as layers added with the ",r.createElement(t.a,{href:"/experience-builder/guide/add-data-widget/"},"Add Data widget"),"."),"\n",r.createElement(n,{type:"note"},r.createElement(t.p,null,"You cannot run spatial filters with ",r.createElement(t.a,{href:"/experience-builder/guide/select-data/#output-data"},"output data sources")," generated at run time by other widgets.")),"\n"),"\n",r.createElement(t.li,{id:"LI_A79856945B83499FA713CB8D86609D95"},"\n",r.createElement(t.p,null,r.createElement(t.strong,null,"Spatial relationship rules"),"—Choose which of the following spatial relationships to provide to users:"),"\n",r.createElement(t.ul,{id:"UL_9F31BF3B4F474320AD94DAB6D9E612F5"},"\n",r.createElement(t.li,{id:"LI_BE81AC3BF7524F79BBADB2E6B7A1A9F4"},r.createElement(t.strong,null,"Intersect"),"—Part of a feature from the source layer is contained in a feature from the filter layer."),"\n",r.createElement(t.li,{id:"LI_850670B3F8DD4081A8D76237D5BAC418"},r.createElement(t.strong,null,"Contain"),"—The feature from the source layer is completely enclosed by the feature from the filter layer."),"\n",r.createElement(t.li,{id:"LI_737CB68533D04699A3CDB74C08BE3745"},r.createElement(t.strong,null,"Cross"),"—The feature from the source layer crosses a feature from the filter layer."),"\n",r.createElement(t.li,{id:"LI_D01B0DAFC4A6437B9DD9E7D28D2BC089"},r.createElement(t.strong,null,"Envelope Intersect"),"—The envelope of the source layer intersects the envelope of the filter layer."),"\n",r.createElement(t.li,{id:"LI_4D3BDED62EC3458D8823F4011F32CFA4"},r.createElement(t.strong,null,"Index Intersect"),"—The envelope of the source layer intersects the index entry of the filter layer."),"\n",r.createElement(t.li,{id:"LI_B6424CCCC20342BABD4C37814D16048D"},r.createElement(t.strong,null,"Overlap"),"—Features from the source layer overlap features from the filter layer."),"\n",r.createElement(t.li,{id:"LI_E7D37E4C531444EC89F0DD14865B7732"},r.createElement(t.strong,null,"Touch"),"—The feature from the source layer touches the border of a feature from the filter layer."),"\n",r.createElement(t.li,{id:"LI_86C00B024AFC4AE4BE904A679C7AA251"},r.createElement(t.strong,null,"Within"),"—The feature from the filter layer is completely enclosed by the feature from the source layer."),"\n"),"\n"),"\n",r.createElement(t.li,{id:"LI_D3E62E3696774AE48D496351C5AE19B4"},"\n",r.createElement(t.p,null,"** Enable buffer**—Add a search distance. You can define the default distance and unit."),"\n"),"\n"),"\n"),"\n",r.createElement(t.li,{id:"LI_94815F5C8F2E4DA0AAF247A31CEDAA45"},"\n",r.createElement(t.p,null,r.createElement(t.strong,null,"Geometries from a map"),"—Return features that are within the current map extent or that intersect a shape drawn on the map. You can turn the draw tools on and off to control which tools are available in the widget."),"\n"),"\n",r.createElement(t.li,{id:"LI_52C32D9B5754418CA54069076D08E5AF"},"\n",r.createElement(t.p,null,r.createElement(t.strong,null,"Description"),"—Provide instructions for a specific audience, such as new users, that appear as hover text on an information icon."),"\n"),"\n"),"\n"),"\n",r.createElement(t.li,{id:"LI_3FC5CD9138744191B6CFDC651B1722EC"},"\n",r.createElement(t.p,null,r.createElement(t.strong,null,"Results"),"—Define how the widget displays query results."),"\n",r.createElement(t.ul,{id:"UL_9A5E56D41F2F402A8241BB3033D26831"},"\n",r.createElement(t.li,{id:"LI_0392AD098097428C92DA52E36C30A8CD"},"\n",r.createElement(t.p,null,r.createElement(t.strong,null,"Label"),"—Customize the label for the results list."),"\n"),"\n",r.createElement(t.li,{id:"LI_AA3DDD7E7E5143119DD71AD0721511E1"},"\n",r.createElement(t.p,null,r.createElement(t.strong,null,"Select mode"),"—Choose how many records users can select from the results list."),"\n",r.createElement(t.ul,{id:"UL_AEDBBA58BD834C5ABF6060A569998178"},"\n",r.createElement(t.li,{id:"LI_57FA9199592B4758A28EEDECCF41C35B"},r.createElement(t.strong,null,"Single"),"—Users can select one record at a time."),"\n",r.createElement(t.li,{id:"LI_F9B4595C55C5428E8BB4551C984A0A69"},r.createElement(t.strong,null,"Multiple"),"—Users can select multiple records."),"\n"),"\n"),"\n",r.createElement(t.li,{id:"LI_4A04A43D1FF74151956DF39FDA60DA9A"},"\n",r.createElement(t.p,null,r.createElement(t.strong,null,"Configure each record"),"—Honor the settings from the source data or customize the results by specifying which fields to display from the layer and providing a meaningful heading. If you choose ",r.createElement(t.strong,null,"Customize"),", only the fields you specify as display fields or include in the heading are exported when the user exports to JSON, CSV, GeoJSON, or an ArcGIS item."),"\n"),"\n",r.createElement(t.li,{id:"LI_494123C2767B4CDE827572CE524E282C"},"\n",r.createElement(t.p,null,r.createElement(t.strong,null,"Expand by default"),"—Check this box to expand all result nodes by default."),"\n"),"\n",r.createElement(t.li,{id:"LI_C71F33AE2AEB4AD69CD49C7AD3AC7BD6"},"\n",r.createElement(t.p,null,r.createElement(t.strong,null,"Sort records"),"—Configure which fields to sort by for the results list."),"\n"),"\n"),"\n"),"\n"),"\n"),"\n",r.createElement(t.li,{id:"LI_7B9B961124DE40498DA6B4B9CB21B4AC"},"\n",r.createElement(t.p,null,r.createElement(t.strong,null,"Arrangement style"),"—Choose ",r.createElement(t.strong,null,"Vertical"),", ",r.createElement(t.strong,null,"Horizontal"),", or ",r.createElement(t.strong,null,"Icon")," to customize the style for queries in the widget."),"\n"),"\n",r.createElement(t.li,{id:"LI_DC4134B4AB7445DEA25266801AC60EFE"},"\n",r.createElement(t.p,null,r.createElement(t.strong,null,"Result style"),"—Organize query results horizontally or vertically and on a single page or multiple pages."),"\n",r.createElement(t.ul,{id:"UL_AC2D5CB169164D4D8F7825D2865FE564"},"\n",r.createElement(t.li,{id:"LI_983651B21ED94D69B80E2563A369CBEF"},"\n",r.createElement(t.p,null,r.createElement(t.strong,null,"Number of records per page")," (available when you choose ",r.createElement(t.strong,null,"Multipage")," for ",r.createElement(t.strong,null,"Paging style"),")—Define the number of records that display per page. This number can be no less than 10 and no greater than 1,000. At run time, users can choose how many results to display per page using a drop-down menu or by typing a number. The drop-down menu is populated with values equal to 100 percent, 50 percent, and 33 percent of the number you define."),"\n",r.createElement(n,{type:"note"},r.createElement(t.p,null,"The Query widget honors any ",r.createElement(t.a,{href:"/experience-builder/guide/select-data/#LI_C2D5FF208BEB4CC4B62D3C71D1593110"},"maximum record counts limitations that you set for feature layers on the ",r.createElement(t.strong,null,"Data")," tab"),".")),"\n"),"\n"),"\n"),"\n"),"\n",r.createElement(t.h2,{id:"interaction-options",className:"group relative s:flex s:flex-nowrap"},"Interaction options",r.createElement(t.a,{href:"#interaction-options","aria-label":"interaction options permalink",className:"anchor-link"},r.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<calcite-icon scale="s" icon="link"></calcite-icon>'}}))),"\n",r.createElement(t.p,null,"The Query widget generates an output data source that can be used in other widgets. The interaction with additional widgets using the same output data source is achieved through ",r.createElement(t.a,{href:"/experience-builder/guide/action-triggers/"},"adding actions"),". For example, the map can automatically display the query results and zoom to the features. In the Query widget settings, on the ",r.createElement(t.strong,null,"Action")," tab, add the ",r.createElement(t.strong,null,"Records created")," trigger, select the target map, and add actions for ",r.createElement(t.strong,null,"Show on map")," and ",r.createElement(t.strong,null,"Zoom to"),"."),"\n",r.createElement(t.p,null,"The query results are shown in a list. To select the item in the list and the corresponding feature on the map, add the ",r.createElement(t.strong,null,"Record selection changes")," trigger for the Query widget. Select the target framework, add the ",r.createElement(t.strong,null,"Select data records")," action, and configure it with the feature layer for the map and the fields that bind the connection between the trigger and the action data. You can also add the ",r.createElement(t.strong,null,"Zoom to")," action to zoom the map to the selected feature."))}var i=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,a.RP)(),e.components);return t?r.createElement(t,e,r.createElement(l,e)):l(e)};var o=n(69507),s=n(46427);const c=function(e){const{data:{topicNavigation:t}}=e;return r.createElement(o.A,null,r.createElement(s.S,Object.assign({},e,{topicNavigation:t,wrapInLayout:!1})))};function u(e){return r.createElement(c,e,r.createElement(i,e))}}}]);